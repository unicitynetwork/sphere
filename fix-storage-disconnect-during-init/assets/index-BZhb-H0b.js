const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-5yIz3gKM.js","assets/index-BK7KZRGS.js","assets/index-DMlarQw3.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:l,ref:a!==void 0?a:null,props:o}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=s,reactJsxRuntime_production.jsxs=s,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}};function getDefaultExportFromCjs$3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var browser$c={exports:{}},process=browser$c.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch{try{return cachedSetTimeout.call(null,t,0)}catch{return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch{try{return cachedClearTimeout.call(null,t)}catch{return cachedClearTimeout.call(this,t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}process.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];queue.push(new Item(t,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(t,e){this.fun=t,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$2(){}process.on=noop$2;process.addListener=noop$2;process.once=noop$2;process.off=noop$2;process.removeListener=noop$2;process.removeAllListeners=noop$2;process.emit=noop$2;process.prependListener=noop$2;process.prependOnceListener=noop$2;process.listeners=function(t){return[]};process.binding=function(t){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(t){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$c.exports;const process$1=getDefaultExportFromCjs$3(browserExports);var react_production={},hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function y($){return $===null||typeof $!="object"?null:($=m&&$[m]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function j($,A,L){this.props=$,this.context=A,this.refs=C,this.updater=L||b}j.prototype.isReactComponent={},j.prototype.setState=function($,A){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,A,"setState")},j.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function B(){}B.prototype=j.prototype;function D($,A,L){this.props=$,this.context=A,this.refs=C,this.updater=L||b}var F=D.prototype=new B;F.constructor=D,E(F,j.prototype),F.isPureReactComponent=!0;var q=Array.isArray;function V(){}var ee={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function W($,A,L){var Y=L.ref;return{$$typeof:t,type:$,key:A,ref:Y!==void 0?Y:null,props:L}}function Z($,A){return W($.type,A,$.props)}function z($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function O($){var A={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(L){return A[L]})}var k=/\/+/g;function v($,A){return typeof $=="object"&&$!==null&&$.key!=null?O(""+$.key):A.toString(36)}function S($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(V,V):($.status="pending",$.then(function(A){$.status==="pending"&&($.status="fulfilled",$.value=A)},function(A){$.status==="pending"&&($.status="rejected",$.reason=A)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function N($,A,L,Y,oe){var J=typeof $;(J==="undefined"||J==="boolean")&&($=null);var U=!1;if($===null)U=!0;else switch(J){case"bigint":case"string":case"number":U=!0;break;case"object":switch($.$$typeof){case t:case e:U=!0;break;case d:return U=$._init,N(U($._payload),A,L,Y,oe)}}if(U)return oe=oe($),U=Y===""?"."+v($,0):Y,q(oe)?(L="",U!=null&&(L=U.replace(k,"$&/")+"/"),N(oe,A,L,"",function(he){return he})):oe!=null&&(z(oe)&&(oe=Z(oe,L+(oe.key==null||$&&$.key===oe.key?"":(""+oe.key).replace(k,"$&/")+"/")+U)),A.push(oe)),1;U=0;var G=Y===""?".":Y+":";if(q($))for(var ae=0;ae<$.length;ae++)Y=$[ae],J=G+v(Y,ae),U+=N(Y,A,L,J,oe);else if(ae=y($),typeof ae=="function")for($=ae.call($),ae=0;!(Y=$.next()).done;)Y=Y.value,J=G+v(Y,ae++),U+=N(Y,A,L,J,oe);else if(J==="object"){if(typeof $.then=="function")return N(S($),A,L,Y,oe);throw A=String($),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return U}function R($,A,L){if($==null)return $;var Y=[],oe=0;return N($,Y,"","",function(J){return A.call(L,J,oe++)}),Y}function T($){if($._status===-1){var A=$._result;A=A(),A.then(function(L){($._status===0||$._status===-1)&&($._status=1,$._result=L)},function(L){($._status===0||$._status===-1)&&($._status=2,$._result=L)}),$._status===-1&&($._status=0,$._result=A)}if($._status===1)return $._result.default;throw $._result}var M=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(A))return}else if(typeof process$1=="object"&&typeof process$1.emit=="function"){process$1.emit("uncaughtException",$);return}console.error($)},I={map:R,forEach:function($,A,L){R($,function(){A.apply(this,arguments)},L)},count:function($){var A=0;return R($,function(){A++}),A},toArray:function($){return R($,function(A){return A})||[]},only:function($){if(!z($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return react_production.Activity=p,react_production.Children=I,react_production.Component=j,react_production.Fragment=s,react_production.Profiler=a,react_production.PureComponent=D,react_production.StrictMode=r,react_production.Suspense=u,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,react_production.__COMPILER_RUNTIME={__proto__:null,c:function($){return ee.H.useMemoCache($)}},react_production.cache=function($){return function(){return $.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function($,A,L){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var Y=E({},$.props),oe=$.key;if(A!=null)for(J in A.key!==void 0&&(oe=""+A.key),A)!Q.call(A,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&A.ref===void 0||(Y[J]=A[J]);var J=arguments.length-2;if(J===1)Y.children=L;else if(1<J){for(var U=Array(J),G=0;G<J;G++)U[G]=arguments[G+2];Y.children=U}return W($.type,oe,Y)},react_production.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:o,_context:$},$},react_production.createElement=function($,A,L){var Y,oe={},J=null;if(A!=null)for(Y in A.key!==void 0&&(J=""+A.key),A)Q.call(A,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(oe[Y]=A[Y]);var U=arguments.length-2;if(U===1)oe.children=L;else if(1<U){for(var G=Array(U),ae=0;ae<U;ae++)G[ae]=arguments[ae+2];oe.children=G}if($&&$.defaultProps)for(Y in U=$.defaultProps,U)oe[Y]===void 0&&(oe[Y]=U[Y]);return W($,J,oe)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function($){return{$$typeof:c,render:$}},react_production.isValidElement=z,react_production.lazy=function($){return{$$typeof:d,_payload:{_status:-1,_result:$},_init:T}},react_production.memo=function($,A){return{$$typeof:f,type:$,compare:A===void 0?null:A}},react_production.startTransition=function($){var A=ee.T,L={};ee.T=L;try{var Y=$(),oe=ee.S;oe!==null&&oe(L,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(V,M)}catch(J){M(J)}finally{A!==null&&L.types!==null&&(A.types=L.types),ee.T=A}},react_production.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},react_production.use=function($){return ee.H.use($)},react_production.useActionState=function($,A,L){return ee.H.useActionState($,A,L)},react_production.useCallback=function($,A){return ee.H.useCallback($,A)},react_production.useContext=function($){return ee.H.useContext($)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function($,A){return ee.H.useDeferredValue($,A)},react_production.useEffect=function($,A){return ee.H.useEffect($,A)},react_production.useEffectEvent=function($){return ee.H.useEffectEvent($)},react_production.useId=function(){return ee.H.useId()},react_production.useImperativeHandle=function($,A,L){return ee.H.useImperativeHandle($,A,L)},react_production.useInsertionEffect=function($,A){return ee.H.useInsertionEffect($,A)},react_production.useLayoutEffect=function($,A){return ee.H.useLayoutEffect($,A)},react_production.useMemo=function($,A){return ee.H.useMemo($,A)},react_production.useOptimistic=function($,A){return ee.H.useOptimistic($,A)},react_production.useReducer=function($,A,L){return ee.H.useReducer($,A,L)},react_production.useRef=function($){return ee.H.useRef($)},react_production.useState=function($){return ee.H.useState($)},react_production.useSyncExternalStore=function($,A,L){return ee.H.useSyncExternalStore($,A,L)},react_production.useTransition=function(){return ee.H.useTransition()},react_production.version="19.2.4",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs$4(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(t){function e(N,R){var T=N.length;N.push(R);e:for(;0<T;){var M=T-1>>>1,I=N[M];if(0<a(I,R))N[M]=R,N[T]=I,T=M;else break e}}function s(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var R=N[0],T=N.pop();if(T!==R){N[0]=T;e:for(var M=0,I=N.length,$=I>>>1;M<$;){var A=2*(M+1)-1,L=N[A],Y=A+1,oe=N[Y];if(0>a(L,T))Y<I&&0>a(oe,L)?(N[M]=oe,N[Y]=T,M=Y):(N[M]=L,N[A]=T,M=A);else if(Y<I&&0>a(oe,T))N[M]=oe,N[Y]=T,M=Y;else break e}}return R}function a(N,R){var T=N.sortIndex-R.sortIndex;return T!==0?T:N.id-R.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var u=[],f=[],d=1,p=null,m=3,y=!1,b=!1,E=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function F(N){for(var R=s(f);R!==null;){if(R.callback===null)r(f);else if(R.startTime<=N)r(f),R.sortIndex=R.expirationTime,e(u,R);else break;R=s(f)}}function q(N){if(E=!1,F(N),!b)if(s(u)!==null)b=!0,V||(V=!0,O());else{var R=s(f);R!==null&&S(q,R.startTime-N)}}var V=!1,ee=-1,Q=5,W=-1;function Z(){return C?!0:!(t.unstable_now()-W<Q)}function z(){if(C=!1,V){var N=t.unstable_now();W=N;var R=!0;try{e:{b=!1,E&&(E=!1,B(ee),ee=-1),y=!0;var T=m;try{t:{for(F(N),p=s(u);p!==null&&!(p.expirationTime>N&&Z());){var M=p.callback;if(typeof M=="function"){p.callback=null,m=p.priorityLevel;var I=M(p.expirationTime<=N);if(N=t.unstable_now(),typeof I=="function"){p.callback=I,F(N),R=!0;break t}p===s(u)&&r(u),F(N)}else r(u);p=s(u)}if(p!==null)R=!0;else{var $=s(f);$!==null&&S(q,$.startTime-N),R=!1}}break e}finally{p=null,m=T,y=!1}R=void 0}}finally{R?O():V=!1}}}var O;if(typeof D=="function")O=function(){D(z)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,v=k.port2;k.port1.onmessage=z,O=function(){v.postMessage(null)}}else O=function(){j(z,0)};function S(N,R){ee=j(function(){N(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(N){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var T=m;m=R;try{return N()}finally{m=T}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(N,R){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var T=m;m=N;try{return R()}finally{m=T}},t.unstable_scheduleCallback=function(N,R,T){var M=t.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?M+T:M):T=M,N){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=T+I,N={id:d++,callback:R,priorityLevel:N,startTime:T,expirationTime:I,sortIndex:-1},T>M?(N.sortIndex=T,e(f,N),s(u)===null&&N===s(f)&&(E?(B(ee),ee=-1):E=!0,S(q,T-M))):(N.sortIndex=I,e(u,N),b||y||(b=!0,V||(V=!0,O()))),N},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(N){var R=m;return function(){var T=m;m=R;try{return N.apply(this,arguments)}finally{m=T}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var t=requireReact();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(u,f,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:u,containerInfo:f,implementation:d}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,reactDom_production.createPortal=function(u,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(u,f,null,d)},reactDom_production.flushSync=function(u){var f=l.T,d=r.p;try{if(l.T=null,r.p=2,u)return u()}finally{l.T=f,r.p=d,r.d.f()}},reactDom_production.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(u,f))},reactDom_production.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},reactDom_production.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var d=f.as,p=c(d,f.crossOrigin),m=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?r.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:y}):d==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},reactDom_production.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=c(f.as,f.crossOrigin);r.d.M(u,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(u)},reactDom_production.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,p=c(d,f.crossOrigin);r.d.L(u,d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},reactDom_production.preloadModule=function(u,f){if(typeof u=="string")if(f){var d=c(f.as,f.crossOrigin);r.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(u)},reactDom_production.requestFormReset=function(u){r.d.r(u)},reactDom_production.unstable_batchedUpdates=function(u,f){return u(f)},reactDom_production.useFormState=function(u,f,d){return l.H.useFormState(u,f,d)},reactDom_production.useFormStatus=function(){return l.H.useHostTransitionStatus()},reactDom_production.version="19.2.4",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var t=requireScheduler(),e=requireReact(),s=requireReactDom();function r(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function o(h){var g=h,w=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(w=g.return),h=g.return;while(h)}return g.tag===3?w:null}function l(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function c(h){if(h.tag===31){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function u(h){if(o(h)!==h)throw Error(r(188))}function f(h){var g=h.alternate;if(!g){if(g=o(h),g===null)throw Error(r(188));return g!==h?null:h}for(var w=h,P=g;;){var H=w.return;if(H===null)break;var K=H.alternate;if(K===null){if(P=H.return,P!==null){w=P;continue}break}if(H.child===K.child){for(K=H.child;K;){if(K===w)return u(H),h;if(K===P)return u(H),g;K=K.sibling}throw Error(r(188))}if(w.return!==P.return)w=H,P=K;else{for(var ue=!1,ge=H.child;ge;){if(ge===w){ue=!0,w=H,P=K;break}if(ge===P){ue=!0,P=H,w=K;break}ge=ge.sibling}if(!ue){for(ge=K.child;ge;){if(ge===w){ue=!0,w=K,P=H;break}if(ge===P){ue=!0,P=K,w=H;break}ge=ge.sibling}if(!ue)throw Error(r(189))}}if(w.alternate!==P)throw Error(r(190))}if(w.tag!==3)throw Error(r(188));return w.stateNode.current===w?h:g}function d(h){var g=h.tag;if(g===5||g===26||g===27||g===6)return h;for(h=h.child;h!==null;){if(g=d(h),g!==null)return g;h=h.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function O(h){return h===null||typeof h!="object"?null:(h=z&&h[z]||h["@@iterator"],typeof h=="function"?h:null)}var k=Symbol.for("react.client.reference");function v(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===k?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case E:return"Fragment";case j:return"Profiler";case C:return"StrictMode";case q:return"Suspense";case V:return"SuspenseList";case W:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case b:return"Portal";case D:return h.displayName||"Context";case B:return(h._context.displayName||"Context")+".Consumer";case F:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case ee:return g=h.displayName||null,g!==null?g:v(h.type)||"Memo";case Q:g=h._payload,h=h._init;try{return v(h(g))}catch{}}return null}var S=Array.isArray,N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T={pending:!1,data:null,method:null,action:null},M=[],I=-1;function $(h){return{current:h}}function A(h){0>I||(h.current=M[I],M[I]=null,I--)}function L(h,g){I++,M[I]=h.current,h.current=g}var Y=$(null),oe=$(null),J=$(null),U=$(null);function G(h,g){switch(L(J,g),L(oe,h),L(Y,null),g.nodeType){case 9:case 11:h=(h=g.documentElement)&&(h=h.namespaceURI)?nf(h):0;break;default:if(h=g.tagName,g=g.namespaceURI)g=nf(g),h=sf(g,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}A(Y),L(Y,h)}function ae(){A(Y),A(oe),A(J)}function he(h){h.memoizedState!==null&&L(U,h);var g=Y.current,w=sf(g,h.type);g!==w&&(L(oe,h),L(Y,w))}function le(h){oe.current===h&&(A(Y),A(oe)),U.current===h&&(A(U),Es._currentValue=T)}var te,pe;function xe(h){if(te===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);te=g&&g[1]||"",pe=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+h+pe}var be=!1;function ce(h,g){if(!h||be)return"";be=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var P={DetermineComponentFrameRoot:function(){try{if(g){var Ge=function(){throw Error()};if(Object.defineProperty(Ge.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ge,[])}catch(De){var Ie=De}Reflect.construct(h,[],Ge)}else{try{Ge.call()}catch(De){Ie=De}h.call(Ge.prototype)}}else{try{throw Error()}catch(De){Ie=De}(Ge=h())&&typeof Ge.catch=="function"&&Ge.catch(function(){})}}catch(De){if(De&&Ie&&typeof De.stack=="string")return[De.stack,Ie.stack]}return[null,null]}};P.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var H=Object.getOwnPropertyDescriptor(P.DetermineComponentFrameRoot,"name");H&&H.configurable&&Object.defineProperty(P.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=P.DetermineComponentFrameRoot(),ue=K[0],ge=K[1];if(ue&&ge){var Se=ue.split(`
`),Ne=ge.split(`
`);for(H=P=0;P<Se.length&&!Se[P].includes("DetermineComponentFrameRoot");)P++;for(;H<Ne.length&&!Ne[H].includes("DetermineComponentFrameRoot");)H++;if(P===Se.length||H===Ne.length)for(P=Se.length-1,H=Ne.length-1;1<=P&&0<=H&&Se[P]!==Ne[H];)H--;for(;1<=P&&0<=H;P--,H--)if(Se[P]!==Ne[H]){if(P!==1||H!==1)do if(P--,H--,0>H||Se[P]!==Ne[H]){var qe=`
`+Se[P].replace(" at new "," at ");return h.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",h.displayName)),qe}while(1<=P&&0<=H);break}}}finally{be=!1,Error.prepareStackTrace=w}return(w=h?h.displayName||h.name:"")?xe(w):""}function re(h,g){switch(h.tag){case 26:case 27:case 5:return xe(h.type);case 16:return xe("Lazy");case 13:return h.child!==g&&g!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return ce(h.type,!1);case 11:return ce(h.type.render,!1);case 1:return ce(h.type,!0);case 31:return xe("Activity");default:return""}}function ie(h){try{var g="",w=null;do g+=re(h,w),w=h,h=h.return;while(h);return g}catch(P){return`
Error generating stack: `+P.message+`
`+P.stack}}var fe=Object.prototype.hasOwnProperty,ye=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,Re=t.unstable_shouldYield,Me=t.unstable_requestPaint,ke=t.unstable_now,Le=t.unstable_getCurrentPriorityLevel,Fe=t.unstable_ImmediatePriority,Te=t.unstable_UserBlockingPriority,Be=t.unstable_NormalPriority,ze=t.unstable_LowPriority,de=t.unstable_IdlePriority,ne=t.log,se=t.unstable_setDisableYieldValue,me=null,Ee=null;function _e(h){if(typeof ne=="function"&&se(h),Ee&&typeof Ee.setStrictMode=="function")try{Ee.setStrictMode(me,h)}catch{}}var ve=Math.clz32?Math.clz32:Ue,Ae=Math.log,Oe=Math.LN2;function Ue(h){return h>>>=0,h===0?32:31-(Ae(h)/Oe|0)|0}var Ke=256,We=262144,Ve=4194304;function xt(h){var g=h&42;if(g!==0)return g;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function lt(h,g,w){var P=h.pendingLanes;if(P===0)return 0;var H=0,K=h.suspendedLanes,ue=h.pingedLanes;h=h.warmLanes;var ge=P&134217727;return ge!==0?(P=ge&~K,P!==0?H=xt(P):(ue&=ge,ue!==0?H=xt(ue):w||(w=ge&~h,w!==0&&(H=xt(w))))):(ge=P&~K,ge!==0?H=xt(ge):ue!==0?H=xt(ue):w||(w=P&~h,w!==0&&(H=xt(w)))),H===0?0:g!==0&&g!==H&&(g&K)===0&&(K=H&-H,w=g&-g,K>=w||K===32&&(w&4194048)!==0)?g:H}function Xe(h,g){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&g)===0}function St(h,g){switch(h){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var h=Ve;return Ve<<=1,(Ve&62914560)===0&&(Ve=4194304),h}function Pe(h){for(var g=[],w=0;31>w;w++)g.push(h);return g}function Qe(h,g){h.pendingLanes|=g,g!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Ze(h,g,w,P,H,K){var ue=h.pendingLanes;h.pendingLanes=w,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=w,h.entangledLanes&=w,h.errorRecoveryDisabledLanes&=w,h.shellSuspendCounter=0;var ge=h.entanglements,Se=h.expirationTimes,Ne=h.hiddenUpdates;for(w=ue&~w;0<w;){var qe=31-ve(w),Ge=1<<qe;ge[qe]=0,Se[qe]=-1;var Ie=Ne[qe];if(Ie!==null)for(Ne[qe]=null,qe=0;qe<Ie.length;qe++){var De=Ie[qe];De!==null&&(De.lane&=-536870913)}w&=~Ge}P!==0&&Ye(h,P,0),K!==0&&H===0&&h.tag!==0&&(h.suspendedLanes|=K&~(ue&~g))}function Ye(h,g,w){h.pendingLanes|=g,h.suspendedLanes&=~g;var P=31-ve(g);h.entangledLanes|=g,h.entanglements[P]=h.entanglements[P]|1073741824|w&261930}function at(h,g){var w=h.entangledLanes|=g;for(h=h.entanglements;w;){var P=31-ve(w),H=1<<P;H&g|h[P]&g&&(h[P]|=g),w&=~H}}function it(h,g){var w=g&-g;return w=(w&42)!==0?1:et(w),(w&(h.suspendedLanes|g))!==0?0:w}function et(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Ct(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function ft(){var h=R.p;return h!==0?h:(h=window.event,h===void 0?32:$f(h.type))}function tt(h,g){var w=R.p;try{return R.p=h,g()}finally{R.p=w}}var Et=Math.random().toString(36).slice(2),nt="__reactFiber$"+Et,Je="__reactProps$"+Et,Rt="__reactContainer$"+Et,dt="__reactEvents$"+Et,ht="__reactListeners$"+Et,wr="__reactHandles$"+Et,cr="__reactResources$"+Et,tr="__reactMarker$"+Et;function or(h){delete h[nt],delete h[Je],delete h[dt],delete h[ht],delete h[wr]}function Jt(h){var g=h[nt];if(g)return g;for(var w=h.parentNode;w;){if(g=w[Rt]||w[nt]){if(w=g.alternate,g.child!==null||w!==null&&w.child!==null)for(h=ff(h);h!==null;){if(w=h[nt])return w;h=ff(h)}return g}h=w,w=h.parentNode}return null}function Xt(h){if(h=h[nt]||h[Rt]){var g=h.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return h}return null}function rr(h){var g=h.tag;if(g===5||g===26||g===27||g===6)return h.stateNode;throw Error(r(33))}function Qt(h){var g=h[cr];return g||(g=h[cr]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Tt(h){h[tr]=!0}var ur=new Set,dr={};function Wt(h,g){Zt(h,g),Zt(h+"Capture",g)}function Zt(h,g){for(dr[h]=g,h=0;h<g.length;h++)ur.add(g[h])}var Er=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fr={},hr={};function _r(h){return fe.call(hr,h)?!0:fe.call(fr,h)?!1:Er.test(h)?hr[h]=!0:(fr[h]=!0,!1)}function jr(h,g,w){if(_r(g))if(w===null)h.removeAttribute(g);else{switch(typeof w){case"undefined":case"function":case"symbol":h.removeAttribute(g);return;case"boolean":var P=g.toLowerCase().slice(0,5);if(P!=="data-"&&P!=="aria-"){h.removeAttribute(g);return}}h.setAttribute(g,""+w)}}function Nr(h,g,w){if(w===null)h.removeAttribute(g);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(g);return}h.setAttribute(g,""+w)}}function Qr(h,g,w,P){if(P===null)h.removeAttribute(w);else{switch(typeof P){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(w);return}h.setAttributeNS(g,w,""+P)}}function Mr(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Kl(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Pf(h,g,w){var P=Object.getOwnPropertyDescriptor(h.constructor.prototype,g);if(!h.hasOwnProperty(g)&&typeof P<"u"&&typeof P.get=="function"&&typeof P.set=="function"){var H=P.get,K=P.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return H.call(this)},set:function(ue){w=""+ue,K.call(this,ue)}}),Object.defineProperty(h,g,{enumerable:P.enumerable}),{getValue:function(){return w},setValue:function(ue){w=""+ue},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function Da(h){if(!h._valueTracker){var g=Kl(h)?"checked":"value";h._valueTracker=Pf(h,g,""+h[g])}}function Wl(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var w=g.getValue(),P="";return h&&(P=Kl(h)?h.checked?"true":"false":h.value),h=P,h!==w?(g.setValue(h),!0):!1}function Cs(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Bf=/[\n"\\]/g;function Ir(h){return h.replace(Bf,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function La(h,g,w,P,H,K,ue,ge){h.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?h.type=ue:h.removeAttribute("type"),g!=null?ue==="number"?(g===0&&h.value===""||h.value!=g)&&(h.value=""+Mr(g)):h.value!==""+Mr(g)&&(h.value=""+Mr(g)):ue!=="submit"&&ue!=="reset"||h.removeAttribute("value"),g!=null?Fa(h,ue,Mr(g)):w!=null?Fa(h,ue,Mr(w)):P!=null&&h.removeAttribute("value"),H==null&&K!=null&&(h.defaultChecked=!!K),H!=null&&(h.checked=H&&typeof H!="function"&&typeof H!="symbol"),ge!=null&&typeof ge!="function"&&typeof ge!="symbol"&&typeof ge!="boolean"?h.name=""+Mr(ge):h.removeAttribute("name")}function Yl(h,g,w,P,H,K,ue,ge){if(K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(h.type=K),g!=null||w!=null){if(!(K!=="submit"&&K!=="reset"||g!=null)){Da(h);return}w=w!=null?""+Mr(w):"",g=g!=null?""+Mr(g):w,ge||g===h.value||(h.value=g),h.defaultValue=g}P=P??H,P=typeof P!="function"&&typeof P!="symbol"&&!!P,h.checked=ge?h.checked:!!P,h.defaultChecked=!!P,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(h.name=ue),Da(h)}function Fa(h,g,w){g==="number"&&Cs(h.ownerDocument)===h||h.defaultValue===""+w||(h.defaultValue=""+w)}function ii(h,g,w,P){if(h=h.options,g){g={};for(var H=0;H<w.length;H++)g["$"+w[H]]=!0;for(w=0;w<h.length;w++)H=g.hasOwnProperty("$"+h[w].value),h[w].selected!==H&&(h[w].selected=H),H&&P&&(h[w].defaultSelected=!0)}else{for(w=""+Mr(w),g=null,H=0;H<h.length;H++){if(h[H].value===w){h[H].selected=!0,P&&(h[H].defaultSelected=!0);return}g!==null||h[H].disabled||(g=h[H])}g!==null&&(g.selected=!0)}}function Jl(h,g,w){if(g!=null&&(g=""+Mr(g),g!==h.value&&(h.value=g),w==null)){h.defaultValue!==g&&(h.defaultValue=g);return}h.defaultValue=w!=null?""+Mr(w):""}function Xl(h,g,w,P){if(g==null){if(P!=null){if(w!=null)throw Error(r(92));if(S(P)){if(1<P.length)throw Error(r(93));P=P[0]}w=P}w==null&&(w=""),g=w}w=Mr(g),h.defaultValue=w,P=h.textContent,P===w&&P!==""&&P!==null&&(h.value=P),Da(h)}function si(h,g){if(g){var w=h.firstChild;if(w&&w===h.lastChild&&w.nodeType===3){w.nodeValue=g;return}}h.textContent=g}var Of=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ql(h,g,w){var P=g.indexOf("--")===0;w==null||typeof w=="boolean"||w===""?P?h.setProperty(g,""):g==="float"?h.cssFloat="":h[g]="":P?h.setProperty(g,w):typeof w!="number"||w===0||Of.has(g)?g==="float"?h.cssFloat=w:h[g]=(""+w).trim():h[g]=w+"px"}function Zl(h,g,w){if(g!=null&&typeof g!="object")throw Error(r(62));if(h=h.style,w!=null){for(var P in w)!w.hasOwnProperty(P)||g!=null&&g.hasOwnProperty(P)||(P.indexOf("--")===0?h.setProperty(P,""):P==="float"?h.cssFloat="":h[P]="");for(var H in g)P=g[H],g.hasOwnProperty(H)&&w[H]!==P&&Ql(h,H,P)}else for(var K in g)g.hasOwnProperty(K)&&Ql(h,K,g[K])}function qa(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Df=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function As(h){return Lf.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}function Zr(){}var Ua=null;function Ha(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var ai=null,oi=null;function tc(h){var g=Xt(h);if(g&&(h=g.stateNode)){var w=h[Je]||null;e:switch(h=g.stateNode,g.type){case"input":if(La(h,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name),g=w.name,w.type==="radio"&&g!=null){for(w=h;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll('input[name="'+Ir(""+g)+'"][type="radio"]'),g=0;g<w.length;g++){var P=w[g];if(P!==h&&P.form===h.form){var H=P[Je]||null;if(!H)throw Error(r(90));La(P,H.value,H.defaultValue,H.defaultValue,H.checked,H.defaultChecked,H.type,H.name)}}for(g=0;g<w.length;g++)P=w[g],P.form===h.form&&Wl(P)}break e;case"textarea":Jl(h,w.value,w.defaultValue);break e;case"select":g=w.value,g!=null&&ii(h,!!w.multiple,g,!1)}}}var za=!1;function rc(h,g,w){if(za)return h(g,w);za=!0;try{var P=h(g);return P}finally{if(za=!1,(ai!==null||oi!==null)&&(pa(),ai&&(g=ai,h=oi,oi=ai=null,tc(g),h)))for(g=0;g<h.length;g++)tc(h[g])}}function Di(h,g){var w=h.stateNode;if(w===null)return null;var P=w[Je]||null;if(P===null)return null;w=P[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(h=h.type,P=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!P;break e;default:h=!1}if(h)return null;if(w&&typeof w!="function")throw Error(r(231,g,typeof w));return w}var en=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(en)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{Ga=!1}var yn=null,Va=null,$s=null;function nc(){if($s)return $s;var h,g=Va,w=g.length,P,H="value"in yn?yn.value:yn.textContent,K=H.length;for(h=0;h<w&&g[h]===H[h];h++);var ue=w-h;for(P=1;P<=ue&&g[w-P]===H[K-P];P++);return $s=H.slice(h,1<P?1-P:void 0)}function ks(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function Ts(){return!0}function ic(){return!1}function pr(h){function g(w,P,H,K,ue){this._reactName=w,this._targetInst=H,this.type=P,this.nativeEvent=K,this.target=ue,this.currentTarget=null;for(var ge in h)h.hasOwnProperty(ge)&&(w=h[ge],this[ge]=w?w(K):K[ge]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Ts:ic,this.isPropagationStopped=ic,this}return p(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),g}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},js=pr(Un),Fi=p({},Un,{view:0,detail:0}),Ff=pr(Fi),Ka,Wa,qi,Ns=p({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ja,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==qi&&(qi&&h.type==="mousemove"?(Ka=h.screenX-qi.screenX,Wa=h.screenY-qi.screenY):Wa=Ka=0,qi=h),Ka)},movementY:function(h){return"movementY"in h?h.movementY:Wa}}),sc=pr(Ns),qf=p({},Ns,{dataTransfer:0}),Uf=pr(qf),Hf=p({},Fi,{relatedTarget:0}),Ya=pr(Hf),zf=p({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),Gf=pr(zf),Vf=p({},Un,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Kf=pr(Vf),Wf=p({},Un,{data:0}),ac=pr(Wf),Yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qf(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=Xf[h])?!!g[h]:!1}function Ja(){return Qf}var Zf=p({},Fi,{key:function(h){if(h.key){var g=Yf[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=ks(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Jf[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ja,charCode:function(h){return h.type==="keypress"?ks(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?ks(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),eh=pr(Zf),th=p({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oc=pr(th),rh=p({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ja}),nh=pr(rh),ih=p({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),sh=pr(ih),ah=p({},Ns,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),oh=pr(ah),lh=p({},Un,{newState:0,oldState:0}),ch=pr(lh),uh=[9,13,27,32],Xa=en&&"CompositionEvent"in window,Ui=null;en&&"documentMode"in document&&(Ui=document.documentMode);var fh=en&&"TextEvent"in window&&!Ui,lc=en&&(!Xa||Ui&&8<Ui&&11>=Ui),cc=" ",uc=!1;function dc(h,g){switch(h){case"keyup":return uh.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fc(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var li=!1;function hh(h,g){switch(h){case"compositionend":return fc(g);case"keypress":return g.which!==32?null:(uc=!0,cc);case"textInput":return h=g.data,h===cc&&uc?null:h;default:return null}}function ph(h,g){if(li)return h==="compositionend"||!Xa&&dc(h,g)?(h=nc(),$s=Va=yn=null,li=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return lc&&g.locale!=="ko"?null:g.data;default:return null}}var mh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hc(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!mh[h.type]:g==="textarea"}function pc(h,g,w,P){ai?oi?oi.push(P):oi=[P]:ai=P,g=wa(g,"onChange"),0<g.length&&(w=new js("onChange","change",null,w,P),h.push({event:w,listeners:g}))}var Hi=null,zi=null;function gh(h){Xd(h,0)}function Ms(h){var g=rr(h);if(Wl(g))return h}function mc(h,g){if(h==="change")return g}var gc=!1;if(en){var Qa;if(en){var Za="oninput"in document;if(!Za){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),Za=typeof xc.oninput=="function"}Qa=Za}else Qa=!1;gc=Qa&&(!document.documentMode||9<document.documentMode)}function yc(){Hi&&(Hi.detachEvent("onpropertychange",vc),zi=Hi=null)}function vc(h){if(h.propertyName==="value"&&Ms(zi)){var g=[];pc(g,zi,h,Ha(h)),rc(gh,g)}}function xh(h,g,w){h==="focusin"?(yc(),Hi=g,zi=w,Hi.attachEvent("onpropertychange",vc)):h==="focusout"&&yc()}function yh(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Ms(zi)}function bh(h,g){if(h==="click")return Ms(g)}function wh(h,g){if(h==="input"||h==="change")return Ms(g)}function Eh(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var Sr=typeof Object.is=="function"?Object.is:Eh;function Gi(h,g){if(Sr(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var w=Object.keys(h),P=Object.keys(g);if(w.length!==P.length)return!1;for(P=0;P<w.length;P++){var H=w[P];if(!fe.call(g,H)||!Sr(h[H],g[H]))return!1}return!0}function bc(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function wc(h,g){var w=bc(h);h=0;for(var P;w;){if(w.nodeType===3){if(P=h+w.textContent.length,h<=g&&P>=g)return{node:w,offset:g-h};h=P}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=bc(w)}}function Ec(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?Ec(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function _c(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var g=Cs(h.document);g instanceof h.HTMLIFrameElement;){try{var w=typeof g.contentWindow.location.href=="string"}catch{w=!1}if(w)h=g.contentWindow;else break;g=Cs(h.document)}return g}function eo(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}var _h=en&&"documentMode"in document&&11>=document.documentMode,ci=null,to=null,Vi=null,ro=!1;function Sc(h,g,w){var P=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;ro||ci==null||ci!==Cs(P)||(P=ci,"selectionStart"in P&&eo(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),Vi&&Gi(Vi,P)||(Vi=P,P=wa(to,"onSelect"),0<P.length&&(g=new js("onSelect","select",null,g,w),h.push({event:g,listeners:P}),g.target=ci)))}function Hn(h,g){var w={};return w[h.toLowerCase()]=g.toLowerCase(),w["Webkit"+h]="webkit"+g,w["Moz"+h]="moz"+g,w}var ui={animationend:Hn("Animation","AnimationEnd"),animationiteration:Hn("Animation","AnimationIteration"),animationstart:Hn("Animation","AnimationStart"),transitionrun:Hn("Transition","TransitionRun"),transitionstart:Hn("Transition","TransitionStart"),transitioncancel:Hn("Transition","TransitionCancel"),transitionend:Hn("Transition","TransitionEnd")},no={},Rc={};en&&(Rc=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function zn(h){if(no[h])return no[h];if(!ui[h])return h;var g=ui[h],w;for(w in g)if(g.hasOwnProperty(w)&&w in Rc)return no[h]=g[w];return h}var Cc=zn("animationend"),Ac=zn("animationiteration"),$c=zn("animationstart"),Sh=zn("transitionrun"),Rh=zn("transitionstart"),Ch=zn("transitioncancel"),kc=zn("transitionend"),Tc=new Map,io="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");io.push("scrollEnd");function Hr(h,g){Tc.set(h,g),Wt(g,[h])}var Is=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(g))return}else if(typeof process$1=="object"&&typeof process$1.emit=="function"){process$1.emit("uncaughtException",h);return}console.error(h)},Pr=[],di=0,so=0;function Ps(){for(var h=di,g=so=di=0;g<h;){var w=Pr[g];Pr[g++]=null;var P=Pr[g];Pr[g++]=null;var H=Pr[g];Pr[g++]=null;var K=Pr[g];if(Pr[g++]=null,P!==null&&H!==null){var ue=P.pending;ue===null?H.next=H:(H.next=ue.next,ue.next=H),P.pending=H}K!==0&&jc(w,H,K)}}function Bs(h,g,w,P){Pr[di++]=h,Pr[di++]=g,Pr[di++]=w,Pr[di++]=P,so|=P,h.lanes|=P,h=h.alternate,h!==null&&(h.lanes|=P)}function ao(h,g,w,P){return Bs(h,g,w,P),Os(h)}function Gn(h,g){return Bs(h,null,null,g),Os(h)}function jc(h,g,w){h.lanes|=w;var P=h.alternate;P!==null&&(P.lanes|=w);for(var H=!1,K=h.return;K!==null;)K.childLanes|=w,P=K.alternate,P!==null&&(P.childLanes|=w),K.tag===22&&(h=K.stateNode,h===null||h._visibility&1||(H=!0)),h=K,K=K.return;return h.tag===3?(K=h.stateNode,H&&g!==null&&(H=31-ve(w),h=K.hiddenUpdates,P=h[H],P===null?h[H]=[g]:P.push(g),g.lane=w|536870912),K):null}function Os(h){if(50<ps)throw ps=0,gl=null,Error(r(185));for(var g=h.return;g!==null;)h=g,g=h.return;return h.tag===3?h.stateNode:null}var fi={};function Ah(h,g,w,P){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(h,g,w,P){return new Ah(h,g,w,P)}function oo(h){return h=h.prototype,!(!h||!h.isReactComponent)}function tn(h,g){var w=h.alternate;return w===null?(w=Rr(h.tag,g,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=g,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&65011712,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,g=h.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w.refCleanup=h.refCleanup,w}function Nc(h,g){h.flags&=65011714;var w=h.alternate;return w===null?(h.childLanes=0,h.lanes=g,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=w.childLanes,h.lanes=w.lanes,h.child=w.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=w.memoizedProps,h.memoizedState=w.memoizedState,h.updateQueue=w.updateQueue,h.type=w.type,g=w.dependencies,h.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),h}function Ds(h,g,w,P,H,K){var ue=0;if(P=h,typeof h=="function")oo(h)&&(ue=1);else if(typeof h=="string")ue=N0(h,w,Y.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case W:return h=Rr(31,w,g,H),h.elementType=W,h.lanes=K,h;case E:return Vn(w.children,H,K,g);case C:ue=8,H|=24;break;case j:return h=Rr(12,w,g,H|2),h.elementType=j,h.lanes=K,h;case q:return h=Rr(13,w,g,H),h.elementType=q,h.lanes=K,h;case V:return h=Rr(19,w,g,H),h.elementType=V,h.lanes=K,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case D:ue=10;break e;case B:ue=9;break e;case F:ue=11;break e;case ee:ue=14;break e;case Q:ue=16,P=null;break e}ue=29,w=Error(r(130,h===null?"null":typeof h,"")),P=null}return g=Rr(ue,w,g,H),g.elementType=h,g.type=P,g.lanes=K,g}function Vn(h,g,w,P){return h=Rr(7,h,P,g),h.lanes=w,h}function lo(h,g,w){return h=Rr(6,h,null,g),h.lanes=w,h}function Mc(h){var g=Rr(18,null,null,0);return g.stateNode=h,g}function co(h,g,w){return g=Rr(4,h.children!==null?h.children:[],h.key,g),g.lanes=w,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}var Ic=new WeakMap;function Br(h,g){if(typeof h=="object"&&h!==null){var w=Ic.get(h);return w!==void 0?w:(g={value:h,source:g,stack:ie(g)},Ic.set(h,g),g)}return{value:h,source:g,stack:ie(g)}}var hi=[],pi=0,Ls=null,Ki=0,Or=[],Dr=0,vn=null,Wr=1,Yr="";function rn(h,g){hi[pi++]=Ki,hi[pi++]=Ls,Ls=h,Ki=g}function Pc(h,g,w){Or[Dr++]=Wr,Or[Dr++]=Yr,Or[Dr++]=vn,vn=h;var P=Wr;h=Yr;var H=32-ve(P)-1;P&=~(1<<H),w+=1;var K=32-ve(g)+H;if(30<K){var ue=H-H%5;K=(P&(1<<ue)-1).toString(32),P>>=ue,H-=ue,Wr=1<<32-ve(g)+H|w<<H|P,Yr=K+h}else Wr=1<<K|w<<H|P,Yr=h}function uo(h){h.return!==null&&(rn(h,1),Pc(h,1,0))}function fo(h){for(;h===Ls;)Ls=hi[--pi],hi[pi]=null,Ki=hi[--pi],hi[pi]=null;for(;h===vn;)vn=Or[--Dr],Or[Dr]=null,Yr=Or[--Dr],Or[Dr]=null,Wr=Or[--Dr],Or[Dr]=null}function Bc(h,g){Or[Dr++]=Wr,Or[Dr++]=Yr,Or[Dr++]=vn,Wr=g.id,Yr=g.overflow,vn=h}var nr=null,Ot=null,_t=!1,wn=null,Lr=!1,ho=Error(r(519));function En(h){var g=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wi(Br(g,h)),ho}function Oc(h){var g=h.stateNode,w=h.type,P=h.memoizedProps;switch(g[nt]=h,g[Je]=P,w){case"dialog":vt("cancel",g),vt("close",g);break;case"iframe":case"object":case"embed":vt("load",g);break;case"video":case"audio":for(w=0;w<gs.length;w++)vt(gs[w],g);break;case"source":vt("error",g);break;case"img":case"image":case"link":vt("error",g),vt("load",g);break;case"details":vt("toggle",g);break;case"input":vt("invalid",g),Yl(g,P.value,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name,!0);break;case"select":vt("invalid",g);break;case"textarea":vt("invalid",g),Xl(g,P.value,P.defaultValue,P.children)}w=P.children,typeof w!="string"&&typeof w!="number"&&typeof w!="bigint"||g.textContent===""+w||P.suppressHydrationWarning===!0||tf(g.textContent,w)?(P.popover!=null&&(vt("beforetoggle",g),vt("toggle",g)),P.onScroll!=null&&vt("scroll",g),P.onScrollEnd!=null&&vt("scrollend",g),P.onClick!=null&&(g.onclick=Zr),g=!0):g=!1,g||En(h,!0)}function Dc(h){for(nr=h.return;nr;)switch(nr.tag){case 5:case 31:case 13:Lr=!1;return;case 27:case 3:Lr=!0;return;default:nr=nr.return}}function mi(h){if(h!==nr)return!1;if(!_t)return Dc(h),_t=!0,!1;var g=h.tag,w;if((w=g!==3&&g!==27)&&((w=g===5)&&(w=h.type,w=!(w!=="form"&&w!=="button")||jl(h.type,h.memoizedProps)),w=!w),w&&Ot&&En(h),Dc(h),g===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));Ot=df(h)}else if(g===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));Ot=df(h)}else g===27?(g=Ot,Bn(h.type)?(h=Bl,Bl=null,Ot=h):Ot=g):Ot=nr?qr(h.stateNode.nextSibling):null;return!0}function Kn(){Ot=nr=null,_t=!1}function po(){var h=wn;return h!==null&&(vr===null?vr=h:vr.push.apply(vr,h),wn=null),h}function Wi(h){wn===null?wn=[h]:wn.push(h)}var mo=$(null),Wn=null,nn=null;function _n(h,g,w){L(mo,g._currentValue),g._currentValue=w}function sn(h){h._currentValue=mo.current,A(mo)}function go(h,g,w){for(;h!==null;){var P=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,P!==null&&(P.childLanes|=g)):P!==null&&(P.childLanes&g)!==g&&(P.childLanes|=g),h===w)break;h=h.return}}function xo(h,g,w,P){var H=h.child;for(H!==null&&(H.return=h);H!==null;){var K=H.dependencies;if(K!==null){var ue=H.child;K=K.firstContext;e:for(;K!==null;){var ge=K;K=H;for(var Se=0;Se<g.length;Se++)if(ge.context===g[Se]){K.lanes|=w,ge=K.alternate,ge!==null&&(ge.lanes|=w),go(K.return,w,h),P||(ue=null);break e}K=ge.next}}else if(H.tag===18){if(ue=H.return,ue===null)throw Error(r(341));ue.lanes|=w,K=ue.alternate,K!==null&&(K.lanes|=w),go(ue,w,h),ue=null}else ue=H.child;if(ue!==null)ue.return=H;else for(ue=H;ue!==null;){if(ue===h){ue=null;break}if(H=ue.sibling,H!==null){H.return=ue.return,ue=H;break}ue=ue.return}H=ue}}function gi(h,g,w,P){h=null;for(var H=g,K=!1;H!==null;){if(!K){if((H.flags&524288)!==0)K=!0;else if((H.flags&262144)!==0)break}if(H.tag===10){var ue=H.alternate;if(ue===null)throw Error(r(387));if(ue=ue.memoizedProps,ue!==null){var ge=H.type;Sr(H.pendingProps.value,ue.value)||(h!==null?h.push(ge):h=[ge])}}else if(H===U.current){if(ue=H.alternate,ue===null)throw Error(r(387));ue.memoizedState.memoizedState!==H.memoizedState.memoizedState&&(h!==null?h.push(Es):h=[Es])}H=H.return}h!==null&&xo(g,h,w,P),g.flags|=262144}function Fs(h){for(h=h.firstContext;h!==null;){if(!Sr(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Yn(h){Wn=h,nn=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function ir(h){return Lc(Wn,h)}function qs(h,g){return Wn===null&&Yn(h),Lc(h,g)}function Lc(h,g){var w=g._currentValue;if(g={context:g,memoizedValue:w,next:null},nn===null){if(h===null)throw Error(r(308));nn=g,h.dependencies={lanes:0,firstContext:g},h.flags|=524288}else nn=nn.next=g;return w}var $h=typeof AbortController<"u"?AbortController:function(){var h=[],g=this.signal={aborted:!1,addEventListener:function(w,P){h.push(P)}};this.abort=function(){g.aborted=!0,h.forEach(function(w){return w()})}},kh=t.unstable_scheduleCallback,Th=t.unstable_NormalPriority,zt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yo(){return{controller:new $h,data:new Map,refCount:0}}function Yi(h){h.refCount--,h.refCount===0&&kh(Th,function(){h.controller.abort()})}var Ji=null,vo=0,xi=0,yi=null;function jh(h,g){if(Ji===null){var w=Ji=[];vo=0,xi=El(),yi={status:"pending",value:void 0,then:function(P){w.push(P)}}}return vo++,g.then(Fc,Fc),g}function Fc(){if(--vo===0&&Ji!==null){yi!==null&&(yi.status="fulfilled");var h=Ji;Ji=null,xi=0,yi=null;for(var g=0;g<h.length;g++)(0,h[g])()}}function Nh(h,g){var w=[],P={status:"pending",value:null,reason:null,then:function(H){w.push(H)}};return h.then(function(){P.status="fulfilled",P.value=g;for(var H=0;H<w.length;H++)(0,w[H])(g)},function(H){for(P.status="rejected",P.reason=H,H=0;H<w.length;H++)(0,w[H])(void 0)}),P}var qc=N.S;N.S=function(h,g){Rd=ke(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&jh(h,g),qc!==null&&qc(h,g)};var Jn=$(null);function bo(){var h=Jn.current;return h!==null?h:Bt.pooledCache}function Us(h,g){g===null?L(Jn,Jn.current):L(Jn,g.pool)}function Uc(){var h=bo();return h===null?null:{parent:zt._currentValue,pool:h}}var vi=Error(r(460)),wo=Error(r(474)),Hs=Error(r(542)),zs={then:function(){}};function Hc(h){return h=h.status,h==="fulfilled"||h==="rejected"}function zc(h,g,w){switch(w=h[w],w===void 0?h.push(g):w!==g&&(g.then(Zr,Zr),g=w),g.status){case"fulfilled":return g.value;case"rejected":throw h=g.reason,Vc(h),h;default:if(typeof g.status=="string")g.then(Zr,Zr);else{if(h=Bt,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=g,h.status="pending",h.then(function(P){if(g.status==="pending"){var H=g;H.status="fulfilled",H.value=P}},function(P){if(g.status==="pending"){var H=g;H.status="rejected",H.reason=P}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw h=g.reason,Vc(h),h}throw Qn=g,vi}}function Xn(h){try{var g=h._init;return g(h._payload)}catch(w){throw w!==null&&typeof w=="object"&&typeof w.then=="function"?(Qn=w,vi):w}}var Qn=null;function Gc(){if(Qn===null)throw Error(r(459));var h=Qn;return Qn=null,h}function Vc(h){if(h===vi||h===Hs)throw Error(r(483))}var bi=null,Xi=0;function Gs(h){var g=Xi;return Xi+=1,bi===null&&(bi=[]),zc(bi,h,g)}function Qi(h,g){g=g.props.ref,h.ref=g!==void 0?g:null}function Vs(h,g){throw g.$$typeof===m?Error(r(525)):(h=Object.prototype.toString.call(g),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h)))}function Kc(h){function g($e,Ce){if(h){var je=$e.deletions;je===null?($e.deletions=[Ce],$e.flags|=16):je.push(Ce)}}function w($e,Ce){if(!h)return null;for(;Ce!==null;)g($e,Ce),Ce=Ce.sibling;return null}function P($e){for(var Ce=new Map;$e!==null;)$e.key!==null?Ce.set($e.key,$e):Ce.set($e.index,$e),$e=$e.sibling;return Ce}function H($e,Ce){return $e=tn($e,Ce),$e.index=0,$e.sibling=null,$e}function K($e,Ce,je){return $e.index=je,h?(je=$e.alternate,je!==null?(je=je.index,je<Ce?($e.flags|=67108866,Ce):je):($e.flags|=67108866,Ce)):($e.flags|=1048576,Ce)}function ue($e){return h&&$e.alternate===null&&($e.flags|=67108866),$e}function ge($e,Ce,je,He){return Ce===null||Ce.tag!==6?(Ce=lo(je,$e.mode,He),Ce.return=$e,Ce):(Ce=H(Ce,je),Ce.return=$e,Ce)}function Se($e,Ce,je,He){var ot=je.type;return ot===E?qe($e,Ce,je.props.children,He,je.key):Ce!==null&&(Ce.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Q&&Xn(ot)===Ce.type)?(Ce=H(Ce,je.props),Qi(Ce,je),Ce.return=$e,Ce):(Ce=Ds(je.type,je.key,je.props,null,$e.mode,He),Qi(Ce,je),Ce.return=$e,Ce)}function Ne($e,Ce,je,He){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==je.containerInfo||Ce.stateNode.implementation!==je.implementation?(Ce=co(je,$e.mode,He),Ce.return=$e,Ce):(Ce=H(Ce,je.children||[]),Ce.return=$e,Ce)}function qe($e,Ce,je,He,ot){return Ce===null||Ce.tag!==7?(Ce=Vn(je,$e.mode,He,ot),Ce.return=$e,Ce):(Ce=H(Ce,je),Ce.return=$e,Ce)}function Ge($e,Ce,je){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=lo(""+Ce,$e.mode,je),Ce.return=$e,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return je=Ds(Ce.type,Ce.key,Ce.props,null,$e.mode,je),Qi(je,Ce),je.return=$e,je;case b:return Ce=co(Ce,$e.mode,je),Ce.return=$e,Ce;case Q:return Ce=Xn(Ce),Ge($e,Ce,je)}if(S(Ce)||O(Ce))return Ce=Vn(Ce,$e.mode,je,null),Ce.return=$e,Ce;if(typeof Ce.then=="function")return Ge($e,Gs(Ce),je);if(Ce.$$typeof===D)return Ge($e,qs($e,Ce),je);Vs($e,Ce)}return null}function Ie($e,Ce,je,He){var ot=Ce!==null?Ce.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return ot!==null?null:ge($e,Ce,""+je,He);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case y:return je.key===ot?Se($e,Ce,je,He):null;case b:return je.key===ot?Ne($e,Ce,je,He):null;case Q:return je=Xn(je),Ie($e,Ce,je,He)}if(S(je)||O(je))return ot!==null?null:qe($e,Ce,je,He,null);if(typeof je.then=="function")return Ie($e,Ce,Gs(je),He);if(je.$$typeof===D)return Ie($e,Ce,qs($e,je),He);Vs($e,je)}return null}function De($e,Ce,je,He,ot){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return $e=$e.get(je)||null,ge(Ce,$e,""+He,ot);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case y:return $e=$e.get(He.key===null?je:He.key)||null,Se(Ce,$e,He,ot);case b:return $e=$e.get(He.key===null?je:He.key)||null,Ne(Ce,$e,He,ot);case Q:return He=Xn(He),De($e,Ce,je,He,ot)}if(S(He)||O(He))return $e=$e.get(je)||null,qe(Ce,$e,He,ot,null);if(typeof He.then=="function")return De($e,Ce,je,Gs(He),ot);if(He.$$typeof===D)return De($e,Ce,je,qs(Ce,He),ot);Vs(Ce,He)}return null}function rt($e,Ce,je,He){for(var ot=null,At=null,st=Ce,gt=Ce=0,wt=null;st!==null&&gt<je.length;gt++){st.index>gt?(wt=st,st=null):wt=st.sibling;var $t=Ie($e,st,je[gt],He);if($t===null){st===null&&(st=wt);break}h&&st&&$t.alternate===null&&g($e,st),Ce=K($t,Ce,gt),At===null?ot=$t:At.sibling=$t,At=$t,st=wt}if(gt===je.length)return w($e,st),_t&&rn($e,gt),ot;if(st===null){for(;gt<je.length;gt++)st=Ge($e,je[gt],He),st!==null&&(Ce=K(st,Ce,gt),At===null?ot=st:At.sibling=st,At=st);return _t&&rn($e,gt),ot}for(st=P(st);gt<je.length;gt++)wt=De(st,$e,gt,je[gt],He),wt!==null&&(h&&wt.alternate!==null&&st.delete(wt.key===null?gt:wt.key),Ce=K(wt,Ce,gt),At===null?ot=wt:At.sibling=wt,At=wt);return h&&st.forEach(function(qn){return g($e,qn)}),_t&&rn($e,gt),ot}function ut($e,Ce,je,He){if(je==null)throw Error(r(151));for(var ot=null,At=null,st=Ce,gt=Ce=0,wt=null,$t=je.next();st!==null&&!$t.done;gt++,$t=je.next()){st.index>gt?(wt=st,st=null):wt=st.sibling;var qn=Ie($e,st,$t.value,He);if(qn===null){st===null&&(st=wt);break}h&&st&&qn.alternate===null&&g($e,st),Ce=K(qn,Ce,gt),At===null?ot=qn:At.sibling=qn,At=qn,st=wt}if($t.done)return w($e,st),_t&&rn($e,gt),ot;if(st===null){for(;!$t.done;gt++,$t=je.next())$t=Ge($e,$t.value,He),$t!==null&&(Ce=K($t,Ce,gt),At===null?ot=$t:At.sibling=$t,At=$t);return _t&&rn($e,gt),ot}for(st=P(st);!$t.done;gt++,$t=je.next())$t=De(st,$e,gt,$t.value,He),$t!==null&&(h&&$t.alternate!==null&&st.delete($t.key===null?gt:$t.key),Ce=K($t,Ce,gt),At===null?ot=$t:At.sibling=$t,At=$t);return h&&st.forEach(function(H0){return g($e,H0)}),_t&&rn($e,gt),ot}function Pt($e,Ce,je,He){if(typeof je=="object"&&je!==null&&je.type===E&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case y:e:{for(var ot=je.key;Ce!==null;){if(Ce.key===ot){if(ot=je.type,ot===E){if(Ce.tag===7){w($e,Ce.sibling),He=H(Ce,je.props.children),He.return=$e,$e=He;break e}}else if(Ce.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===Q&&Xn(ot)===Ce.type){w($e,Ce.sibling),He=H(Ce,je.props),Qi(He,je),He.return=$e,$e=He;break e}w($e,Ce);break}else g($e,Ce);Ce=Ce.sibling}je.type===E?(He=Vn(je.props.children,$e.mode,He,je.key),He.return=$e,$e=He):(He=Ds(je.type,je.key,je.props,null,$e.mode,He),Qi(He,je),He.return=$e,$e=He)}return ue($e);case b:e:{for(ot=je.key;Ce!==null;){if(Ce.key===ot)if(Ce.tag===4&&Ce.stateNode.containerInfo===je.containerInfo&&Ce.stateNode.implementation===je.implementation){w($e,Ce.sibling),He=H(Ce,je.children||[]),He.return=$e,$e=He;break e}else{w($e,Ce);break}else g($e,Ce);Ce=Ce.sibling}He=co(je,$e.mode,He),He.return=$e,$e=He}return ue($e);case Q:return je=Xn(je),Pt($e,Ce,je,He)}if(S(je))return rt($e,Ce,je,He);if(O(je)){if(ot=O(je),typeof ot!="function")throw Error(r(150));return je=ot.call(je),ut($e,Ce,je,He)}if(typeof je.then=="function")return Pt($e,Ce,Gs(je),He);if(je.$$typeof===D)return Pt($e,Ce,qs($e,je),He);Vs($e,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,Ce!==null&&Ce.tag===6?(w($e,Ce.sibling),He=H(Ce,je),He.return=$e,$e=He):(w($e,Ce),He=lo(je,$e.mode,He),He.return=$e,$e=He),ue($e)):w($e,Ce)}return function($e,Ce,je,He){try{Xi=0;var ot=Pt($e,Ce,je,He);return bi=null,ot}catch(st){if(st===vi||st===Hs)throw st;var At=Rr(29,st,null,$e.mode);return At.lanes=He,At.return=$e,At}}}var Zn=Kc(!0),Wc=Kc(!1),Sn=!1;function Eo(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _o(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Rn(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Cn(h,g,w){var P=h.updateQueue;if(P===null)return null;if(P=P.shared,(kt&2)!==0){var H=P.pending;return H===null?g.next=g:(g.next=H.next,H.next=g),P.pending=g,g=Os(h),jc(h,null,w),g}return Bs(h,P,g,w),Os(h)}function Zi(h,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194048)!==0)){var P=g.lanes;P&=h.pendingLanes,w|=P,g.lanes=w,at(h,w)}}function So(h,g){var w=h.updateQueue,P=h.alternate;if(P!==null&&(P=P.updateQueue,w===P)){var H=null,K=null;if(w=w.firstBaseUpdate,w!==null){do{var ue={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};K===null?H=K=ue:K=K.next=ue,w=w.next}while(w!==null);K===null?H=K=g:K=K.next=g}else H=K=g;w={baseState:P.baseState,firstBaseUpdate:H,lastBaseUpdate:K,shared:P.shared,callbacks:P.callbacks},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=g:h.next=g,w.lastBaseUpdate=g}var Ro=!1;function es(){if(Ro){var h=yi;if(h!==null)throw h}}function ts(h,g,w,P){Ro=!1;var H=h.updateQueue;Sn=!1;var K=H.firstBaseUpdate,ue=H.lastBaseUpdate,ge=H.shared.pending;if(ge!==null){H.shared.pending=null;var Se=ge,Ne=Se.next;Se.next=null,ue===null?K=Ne:ue.next=Ne,ue=Se;var qe=h.alternate;qe!==null&&(qe=qe.updateQueue,ge=qe.lastBaseUpdate,ge!==ue&&(ge===null?qe.firstBaseUpdate=Ne:ge.next=Ne,qe.lastBaseUpdate=Se))}if(K!==null){var Ge=H.baseState;ue=0,qe=Ne=Se=null,ge=K;do{var Ie=ge.lane&-536870913,De=Ie!==ge.lane;if(De?(bt&Ie)===Ie:(P&Ie)===Ie){Ie!==0&&Ie===xi&&(Ro=!0),qe!==null&&(qe=qe.next={lane:0,tag:ge.tag,payload:ge.payload,callback:null,next:null});e:{var rt=h,ut=ge;Ie=g;var Pt=w;switch(ut.tag){case 1:if(rt=ut.payload,typeof rt=="function"){Ge=rt.call(Pt,Ge,Ie);break e}Ge=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=ut.payload,Ie=typeof rt=="function"?rt.call(Pt,Ge,Ie):rt,Ie==null)break e;Ge=p({},Ge,Ie);break e;case 2:Sn=!0}}Ie=ge.callback,Ie!==null&&(h.flags|=64,De&&(h.flags|=8192),De=H.callbacks,De===null?H.callbacks=[Ie]:De.push(Ie))}else De={lane:Ie,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},qe===null?(Ne=qe=De,Se=Ge):qe=qe.next=De,ue|=Ie;if(ge=ge.next,ge===null){if(ge=H.shared.pending,ge===null)break;De=ge,ge=De.next,De.next=null,H.lastBaseUpdate=De,H.shared.pending=null}}while(!0);qe===null&&(Se=Ge),H.baseState=Se,H.firstBaseUpdate=Ne,H.lastBaseUpdate=qe,K===null&&(H.shared.lanes=0),jn|=ue,h.lanes=ue,h.memoizedState=Ge}}function Yc(h,g){if(typeof h!="function")throw Error(r(191,h));h.call(g)}function Jc(h,g){var w=h.callbacks;if(w!==null)for(h.callbacks=null,h=0;h<w.length;h++)Yc(w[h],g)}var wi=$(null),Ks=$(0);function Xc(h,g){h=mn,L(Ks,h),L(wi,g),mn=h|g.baseLanes}function Co(){L(Ks,mn),L(wi,wi.current)}function Ao(){mn=Ks.current,A(wi),A(Ks)}var Cr=$(null),Fr=null;function An(h){var g=h.alternate;L(Ut,Ut.current&1),L(Cr,h),Fr===null&&(g===null||wi.current!==null||g.memoizedState!==null)&&(Fr=h)}function $o(h){L(Ut,Ut.current),L(Cr,h),Fr===null&&(Fr=h)}function Qc(h){h.tag===22?(L(Ut,Ut.current),L(Cr,h),Fr===null&&(Fr=h)):$n()}function $n(){L(Ut,Ut.current),L(Cr,Cr.current)}function Ar(h){A(Cr),Fr===h&&(Fr=null),A(Ut)}var Ut=$(0);function Ws(h){for(var g=h;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||Il(w)||Pl(w)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var an=0,mt=null,Mt=null,Gt=null,Ys=!1,Ei=!1,ei=!1,Js=0,rs=0,_i=null,Mh=0;function Ft(){throw Error(r(321))}function ko(h,g){if(g===null)return!1;for(var w=0;w<g.length&&w<h.length;w++)if(!Sr(h[w],g[w]))return!1;return!0}function To(h,g,w,P,H,K){return an=K,mt=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,N.H=h===null||h.memoizedState===null?Pu:Go,ei=!1,K=w(P,H),ei=!1,Ei&&(K=eu(g,w,P,H)),Zc(h),K}function Zc(h){N.H=ss;var g=Mt!==null&&Mt.next!==null;if(an=0,Gt=Mt=mt=null,Ys=!1,rs=0,_i=null,g)throw Error(r(300));h===null||Vt||(h=h.dependencies,h!==null&&Fs(h)&&(Vt=!0))}function eu(h,g,w,P){mt=h;var H=0;do{if(Ei&&(_i=null),rs=0,Ei=!1,25<=H)throw Error(r(301));if(H+=1,Gt=Mt=null,h.updateQueue!=null){var K=h.updateQueue;K.lastEffect=null,K.events=null,K.stores=null,K.memoCache!=null&&(K.memoCache.index=0)}N.H=Bu,K=g(w,P)}while(Ei);return K}function Ih(){var h=N.H,g=h.useState()[0];return g=typeof g.then=="function"?ns(g):g,h=h.useState()[0],(Mt!==null?Mt.memoizedState:null)!==h&&(mt.flags|=1024),g}function jo(){var h=Js!==0;return Js=0,h}function No(h,g,w){g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~w}function Mo(h){if(Ys){for(h=h.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Ys=!1}an=0,Gt=Mt=mt=null,Ei=!1,rs=Js=0,_i=null}function lr(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?mt.memoizedState=Gt=h:Gt=Gt.next=h,Gt}function Ht(){if(Mt===null){var h=mt.alternate;h=h!==null?h.memoizedState:null}else h=Mt.next;var g=Gt===null?mt.memoizedState:Gt.next;if(g!==null)Gt=g,Mt=h;else{if(h===null)throw mt.alternate===null?Error(r(467)):Error(r(310));Mt=h,h={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Gt===null?mt.memoizedState=Gt=h:Gt=Gt.next=h}return Gt}function Xs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ns(h){var g=rs;return rs+=1,_i===null&&(_i=[]),h=zc(_i,h,g),g=mt,(Gt===null?g.memoizedState:Gt.next)===null&&(g=g.alternate,N.H=g===null||g.memoizedState===null?Pu:Go),h}function Qs(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return ns(h);if(h.$$typeof===D)return ir(h)}throw Error(r(438,String(h)))}function Io(h){var g=null,w=mt.updateQueue;if(w!==null&&(g=w.memoCache),g==null){var P=mt.alternate;P!==null&&(P=P.updateQueue,P!==null&&(P=P.memoCache,P!=null&&(g={data:P.data.map(function(H){return H.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),w===null&&(w=Xs(),mt.updateQueue=w),w.memoCache=g,w=g.data[g.index],w===void 0)for(w=g.data[g.index]=Array(h),P=0;P<h;P++)w[P]=Z;return g.index++,w}function ln(h,g){return typeof g=="function"?g(h):g}function Zs(h){var g=Ht();return Po(g,Mt,h)}function Po(h,g,w){var P=h.queue;if(P===null)throw Error(r(311));P.lastRenderedReducer=w;var H=h.baseQueue,K=P.pending;if(K!==null){if(H!==null){var ue=H.next;H.next=K.next,K.next=ue}g.baseQueue=H=K,P.pending=null}if(K=h.baseState,H===null)h.memoizedState=K;else{g=H.next;var ge=ue=null,Se=null,Ne=g,qe=!1;do{var Ge=Ne.lane&-536870913;if(Ge!==Ne.lane?(bt&Ge)===Ge:(an&Ge)===Ge){var Ie=Ne.revertLane;if(Ie===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,gesture:null,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),Ge===xi&&(qe=!0);else if((an&Ie)===Ie){Ne=Ne.next,Ie===xi&&(qe=!0);continue}else Ge={lane:0,revertLane:Ne.revertLane,gesture:null,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},Se===null?(ge=Se=Ge,ue=K):Se=Se.next=Ge,mt.lanes|=Ie,jn|=Ie;Ge=Ne.action,ei&&w(K,Ge),K=Ne.hasEagerState?Ne.eagerState:w(K,Ge)}else Ie={lane:Ge,revertLane:Ne.revertLane,gesture:Ne.gesture,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},Se===null?(ge=Se=Ie,ue=K):Se=Se.next=Ie,mt.lanes|=Ge,jn|=Ge;Ne=Ne.next}while(Ne!==null&&Ne!==g);if(Se===null?ue=K:Se.next=ge,!Sr(K,h.memoizedState)&&(Vt=!0,qe&&(w=yi,w!==null)))throw w;h.memoizedState=K,h.baseState=ue,h.baseQueue=Se,P.lastRenderedState=K}return H===null&&(P.lanes=0),[h.memoizedState,P.dispatch]}function Bo(h){var g=Ht(),w=g.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=h;var P=w.dispatch,H=w.pending,K=g.memoizedState;if(H!==null){w.pending=null;var ue=H=H.next;do K=h(K,ue.action),ue=ue.next;while(ue!==H);Sr(K,g.memoizedState)||(Vt=!0),g.memoizedState=K,g.baseQueue===null&&(g.baseState=K),w.lastRenderedState=K}return[K,P]}function tu(h,g,w){var P=mt,H=Ht(),K=_t;if(K){if(w===void 0)throw Error(r(407));w=w()}else w=g();var ue=!Sr((Mt||H).memoizedState,w);if(ue&&(H.memoizedState=w,Vt=!0),H=H.queue,Lo(iu.bind(null,P,H,h),[h]),H.getSnapshot!==g||ue||Gt!==null&&Gt.memoizedState.tag&1){if(P.flags|=2048,Si(9,{destroy:void 0},nu.bind(null,P,H,w,g),null),Bt===null)throw Error(r(349));K||(an&127)!==0||ru(P,g,w)}return w}function ru(h,g,w){h.flags|=16384,h={getSnapshot:g,value:w},g=mt.updateQueue,g===null?(g=Xs(),mt.updateQueue=g,g.stores=[h]):(w=g.stores,w===null?g.stores=[h]:w.push(h))}function nu(h,g,w,P){g.value=w,g.getSnapshot=P,su(g)&&au(h)}function iu(h,g,w){return w(function(){su(g)&&au(h)})}function su(h){var g=h.getSnapshot;h=h.value;try{var w=g();return!Sr(h,w)}catch{return!0}}function au(h){var g=Gn(h,2);g!==null&&br(g,h,2)}function Oo(h){var g=lr();if(typeof h=="function"){var w=h;if(h=w(),ei){_e(!0);try{w()}finally{_e(!1)}}}return g.memoizedState=g.baseState=h,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:h},g}function ou(h,g,w,P){return h.baseState=w,Po(h,Mt,typeof P=="function"?P:ln)}function Ph(h,g,w,P,H){if(ra(h))throw Error(r(485));if(h=g.action,h!==null){var K={payload:H,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){K.listeners.push(ue)}};N.T!==null?w(!0):K.isTransition=!1,P(K),w=g.pending,w===null?(K.next=g.pending=K,lu(g,K)):(K.next=w.next,g.pending=w.next=K)}}function lu(h,g){var w=g.action,P=g.payload,H=h.state;if(g.isTransition){var K=N.T,ue={};N.T=ue;try{var ge=w(H,P),Se=N.S;Se!==null&&Se(ue,ge),cu(h,g,ge)}catch(Ne){Do(h,g,Ne)}finally{K!==null&&ue.types!==null&&(K.types=ue.types),N.T=K}}else try{K=w(H,P),cu(h,g,K)}catch(Ne){Do(h,g,Ne)}}function cu(h,g,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(P){uu(h,g,P)},function(P){return Do(h,g,P)}):uu(h,g,w)}function uu(h,g,w){g.status="fulfilled",g.value=w,du(g),h.state=w,g=h.pending,g!==null&&(w=g.next,w===g?h.pending=null:(w=w.next,g.next=w,lu(h,w)))}function Do(h,g,w){var P=h.pending;if(h.pending=null,P!==null){P=P.next;do g.status="rejected",g.reason=w,du(g),g=g.next;while(g!==P)}h.action=null}function du(h){h=h.listeners;for(var g=0;g<h.length;g++)(0,h[g])()}function fu(h,g){return g}function hu(h,g){if(_t){var w=Bt.formState;if(w!==null){e:{var P=mt;if(_t){if(Ot){t:{for(var H=Ot,K=Lr;H.nodeType!==8;){if(!K){H=null;break t}if(H=qr(H.nextSibling),H===null){H=null;break t}}K=H.data,H=K==="F!"||K==="F"?H:null}if(H){Ot=qr(H.nextSibling),P=H.data==="F!";break e}}En(P)}P=!1}P&&(g=w[0])}}return w=lr(),w.memoizedState=w.baseState=g,P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:g},w.queue=P,w=Nu.bind(null,mt,P),P.dispatch=w,P=Oo(!1),K=zo.bind(null,mt,!1,P.queue),P=lr(),H={state:g,dispatch:null,action:h,pending:null},P.queue=H,w=Ph.bind(null,mt,H,K,w),H.dispatch=w,P.memoizedState=h,[g,w,!1]}function pu(h){var g=Ht();return mu(g,Mt,h)}function mu(h,g,w){if(g=Po(h,g,fu)[0],h=Zs(ln)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var P=ns(g)}catch(ue){throw ue===vi?Hs:ue}else P=g;g=Ht();var H=g.queue,K=H.dispatch;return w!==g.memoizedState&&(mt.flags|=2048,Si(9,{destroy:void 0},Bh.bind(null,H,w),null)),[P,K,h]}function Bh(h,g){h.action=g}function gu(h){var g=Ht(),w=Mt;if(w!==null)return mu(g,w,h);Ht(),g=g.memoizedState,w=Ht();var P=w.queue.dispatch;return w.memoizedState=h,[g,P,!1]}function Si(h,g,w,P){return h={tag:h,create:w,deps:P,inst:g,next:null},g=mt.updateQueue,g===null&&(g=Xs(),mt.updateQueue=g),w=g.lastEffect,w===null?g.lastEffect=h.next=h:(P=w.next,w.next=h,h.next=P,g.lastEffect=h),h}function xu(){return Ht().memoizedState}function ea(h,g,w,P){var H=lr();mt.flags|=h,H.memoizedState=Si(1|g,{destroy:void 0},w,P===void 0?null:P)}function ta(h,g,w,P){var H=Ht();P=P===void 0?null:P;var K=H.memoizedState.inst;Mt!==null&&P!==null&&ko(P,Mt.memoizedState.deps)?H.memoizedState=Si(g,K,w,P):(mt.flags|=h,H.memoizedState=Si(1|g,K,w,P))}function yu(h,g){ea(8390656,8,h,g)}function Lo(h,g){ta(2048,8,h,g)}function Oh(h){mt.flags|=4;var g=mt.updateQueue;if(g===null)g=Xs(),mt.updateQueue=g,g.events=[h];else{var w=g.events;w===null?g.events=[h]:w.push(h)}}function vu(h){var g=Ht().memoizedState;return Oh({ref:g,nextImpl:h}),function(){if((kt&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}function bu(h,g){return ta(4,2,h,g)}function wu(h,g){return ta(4,4,h,g)}function Eu(h,g){if(typeof g=="function"){h=h();var w=g(h);return function(){typeof w=="function"?w():g(null)}}if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function _u(h,g,w){w=w!=null?w.concat([h]):null,ta(4,4,Eu.bind(null,g,h),w)}function Fo(){}function Su(h,g){var w=Ht();g=g===void 0?null:g;var P=w.memoizedState;return g!==null&&ko(g,P[1])?P[0]:(w.memoizedState=[h,g],h)}function Ru(h,g){var w=Ht();g=g===void 0?null:g;var P=w.memoizedState;if(g!==null&&ko(g,P[1]))return P[0];if(P=h(),ei){_e(!0);try{h()}finally{_e(!1)}}return w.memoizedState=[P,g],P}function qo(h,g,w){return w===void 0||(an&1073741824)!==0&&(bt&261930)===0?h.memoizedState=g:(h.memoizedState=w,h=Ad(),mt.lanes|=h,jn|=h,w)}function Cu(h,g,w,P){return Sr(w,g)?w:wi.current!==null?(h=qo(h,w,P),Sr(h,g)||(Vt=!0),h):(an&42)===0||(an&1073741824)!==0&&(bt&261930)===0?(Vt=!0,h.memoizedState=w):(h=Ad(),mt.lanes|=h,jn|=h,g)}function Au(h,g,w,P,H){var K=R.p;R.p=K!==0&&8>K?K:8;var ue=N.T,ge={};N.T=ge,zo(h,!1,g,w);try{var Se=H(),Ne=N.S;if(Ne!==null&&Ne(ge,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var qe=Nh(Se,P);is(h,g,qe,Tr(h))}else is(h,g,P,Tr(h))}catch(Ge){is(h,g,{then:function(){},status:"rejected",reason:Ge},Tr())}finally{R.p=K,ue!==null&&ge.types!==null&&(ue.types=ge.types),N.T=ue}}function Dh(){}function Uo(h,g,w,P){if(h.tag!==5)throw Error(r(476));var H=$u(h).queue;Au(h,H,g,T,w===null?Dh:function(){return ku(h),w(P)})}function $u(h){var g=h.memoizedState;if(g!==null)return g;g={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:T},next:null};var w={};return g.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:w},next:null},h.memoizedState=g,h=h.alternate,h!==null&&(h.memoizedState=g),g}function ku(h){var g=$u(h);g.next===null&&(g=h.alternate.memoizedState),is(h,g.next.queue,{},Tr())}function Ho(){return ir(Es)}function Tu(){return Ht().memoizedState}function ju(){return Ht().memoizedState}function Lh(h){for(var g=h.return;g!==null;){switch(g.tag){case 24:case 3:var w=Tr();h=Rn(w);var P=Cn(g,h,w);P!==null&&(br(P,g,w),Zi(P,g,w)),g={cache:yo()},h.payload=g;return}g=g.return}}function Fh(h,g,w){var P=Tr();w={lane:P,revertLane:0,gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},ra(h)?Mu(g,w):(w=ao(h,g,w,P),w!==null&&(br(w,h,P),Iu(w,g,P)))}function Nu(h,g,w){var P=Tr();is(h,g,w,P)}function is(h,g,w,P){var H={lane:P,revertLane:0,gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null};if(ra(h))Mu(g,H);else{var K=h.alternate;if(h.lanes===0&&(K===null||K.lanes===0)&&(K=g.lastRenderedReducer,K!==null))try{var ue=g.lastRenderedState,ge=K(ue,w);if(H.hasEagerState=!0,H.eagerState=ge,Sr(ge,ue))return Bs(h,g,H,0),Bt===null&&Ps(),!1}catch{}if(w=ao(h,g,H,P),w!==null)return br(w,h,P),Iu(w,g,P),!0}return!1}function zo(h,g,w,P){if(P={lane:2,revertLane:El(),gesture:null,action:P,hasEagerState:!1,eagerState:null,next:null},ra(h)){if(g)throw Error(r(479))}else g=ao(h,w,P,2),g!==null&&br(g,h,2)}function ra(h){var g=h.alternate;return h===mt||g!==null&&g===mt}function Mu(h,g){Ei=Ys=!0;var w=h.pending;w===null?g.next=g:(g.next=w.next,w.next=g),h.pending=g}function Iu(h,g,w){if((w&4194048)!==0){var P=g.lanes;P&=h.pendingLanes,w|=P,g.lanes=w,at(h,w)}}var ss={readContext:ir,use:Qs,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};ss.useEffectEvent=Ft;var Pu={readContext:ir,use:Qs,useCallback:function(h,g){return lr().memoizedState=[h,g===void 0?null:g],h},useContext:ir,useEffect:yu,useImperativeHandle:function(h,g,w){w=w!=null?w.concat([h]):null,ea(4194308,4,Eu.bind(null,g,h),w)},useLayoutEffect:function(h,g){return ea(4194308,4,h,g)},useInsertionEffect:function(h,g){ea(4,2,h,g)},useMemo:function(h,g){var w=lr();g=g===void 0?null:g;var P=h();if(ei){_e(!0);try{h()}finally{_e(!1)}}return w.memoizedState=[P,g],P},useReducer:function(h,g,w){var P=lr();if(w!==void 0){var H=w(g);if(ei){_e(!0);try{w(g)}finally{_e(!1)}}}else H=g;return P.memoizedState=P.baseState=H,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:H},P.queue=h,h=h.dispatch=Fh.bind(null,mt,h),[P.memoizedState,h]},useRef:function(h){var g=lr();return h={current:h},g.memoizedState=h},useState:function(h){h=Oo(h);var g=h.queue,w=Nu.bind(null,mt,g);return g.dispatch=w,[h.memoizedState,w]},useDebugValue:Fo,useDeferredValue:function(h,g){var w=lr();return qo(w,h,g)},useTransition:function(){var h=Oo(!1);return h=Au.bind(null,mt,h.queue,!0,!1),lr().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,g,w){var P=mt,H=lr();if(_t){if(w===void 0)throw Error(r(407));w=w()}else{if(w=g(),Bt===null)throw Error(r(349));(bt&127)!==0||ru(P,g,w)}H.memoizedState=w;var K={value:w,getSnapshot:g};return H.queue=K,yu(iu.bind(null,P,K,h),[h]),P.flags|=2048,Si(9,{destroy:void 0},nu.bind(null,P,K,w,g),null),w},useId:function(){var h=lr(),g=Bt.identifierPrefix;if(_t){var w=Yr,P=Wr;w=(P&~(1<<32-ve(P)-1)).toString(32)+w,g="_"+g+"R_"+w,w=Js++,0<w&&(g+="H"+w.toString(32)),g+="_"}else w=Mh++,g="_"+g+"r_"+w.toString(32)+"_";return h.memoizedState=g},useHostTransitionStatus:Ho,useFormState:hu,useActionState:hu,useOptimistic:function(h){var g=lr();g.memoizedState=g.baseState=h;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=w,g=zo.bind(null,mt,!0,w),w.dispatch=g,[h,g]},useMemoCache:Io,useCacheRefresh:function(){return lr().memoizedState=Lh.bind(null,mt)},useEffectEvent:function(h){var g=lr(),w={impl:h};return g.memoizedState=w,function(){if((kt&2)!==0)throw Error(r(440));return w.impl.apply(void 0,arguments)}}},Go={readContext:ir,use:Qs,useCallback:Su,useContext:ir,useEffect:Lo,useImperativeHandle:_u,useInsertionEffect:bu,useLayoutEffect:wu,useMemo:Ru,useReducer:Zs,useRef:xu,useState:function(){return Zs(ln)},useDebugValue:Fo,useDeferredValue:function(h,g){var w=Ht();return Cu(w,Mt.memoizedState,h,g)},useTransition:function(){var h=Zs(ln)[0],g=Ht().memoizedState;return[typeof h=="boolean"?h:ns(h),g]},useSyncExternalStore:tu,useId:Tu,useHostTransitionStatus:Ho,useFormState:pu,useActionState:pu,useOptimistic:function(h,g){var w=Ht();return ou(w,Mt,h,g)},useMemoCache:Io,useCacheRefresh:ju};Go.useEffectEvent=vu;var Bu={readContext:ir,use:Qs,useCallback:Su,useContext:ir,useEffect:Lo,useImperativeHandle:_u,useInsertionEffect:bu,useLayoutEffect:wu,useMemo:Ru,useReducer:Bo,useRef:xu,useState:function(){return Bo(ln)},useDebugValue:Fo,useDeferredValue:function(h,g){var w=Ht();return Mt===null?qo(w,h,g):Cu(w,Mt.memoizedState,h,g)},useTransition:function(){var h=Bo(ln)[0],g=Ht().memoizedState;return[typeof h=="boolean"?h:ns(h),g]},useSyncExternalStore:tu,useId:Tu,useHostTransitionStatus:Ho,useFormState:gu,useActionState:gu,useOptimistic:function(h,g){var w=Ht();return Mt!==null?ou(w,Mt,h,g):(w.baseState=h,[h,w.queue.dispatch])},useMemoCache:Io,useCacheRefresh:ju};Bu.useEffectEvent=vu;function Vo(h,g,w,P){g=h.memoizedState,w=w(P,g),w=w==null?g:p({},g,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var Ko={enqueueSetState:function(h,g,w){h=h._reactInternals;var P=Tr(),H=Rn(P);H.payload=g,w!=null&&(H.callback=w),g=Cn(h,H,P),g!==null&&(br(g,h,P),Zi(g,h,P))},enqueueReplaceState:function(h,g,w){h=h._reactInternals;var P=Tr(),H=Rn(P);H.tag=1,H.payload=g,w!=null&&(H.callback=w),g=Cn(h,H,P),g!==null&&(br(g,h,P),Zi(g,h,P))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var w=Tr(),P=Rn(w);P.tag=2,g!=null&&(P.callback=g),g=Cn(h,P,w),g!==null&&(br(g,h,w),Zi(g,h,w))}};function Ou(h,g,w,P,H,K,ue){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(P,K,ue):g.prototype&&g.prototype.isPureReactComponent?!Gi(w,P)||!Gi(H,K):!0}function Du(h,g,w,P){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,P),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,P),g.state!==h&&Ko.enqueueReplaceState(g,g.state,null)}function ti(h,g){var w=g;if("ref"in g){w={};for(var P in g)P!=="ref"&&(w[P]=g[P])}if(h=h.defaultProps){w===g&&(w=p({},w));for(var H in h)w[H]===void 0&&(w[H]=h[H])}return w}function Lu(h){Is(h)}function Fu(h){console.error(h)}function qu(h){Is(h)}function na(h,g){try{var w=h.onUncaughtError;w(g.value,{componentStack:g.stack})}catch(P){setTimeout(function(){throw P})}}function Uu(h,g,w){try{var P=h.onCaughtError;P(w.value,{componentStack:w.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(H){setTimeout(function(){throw H})}}function Wo(h,g,w){return w=Rn(w),w.tag=3,w.payload={element:null},w.callback=function(){na(h,g)},w}function Hu(h){return h=Rn(h),h.tag=3,h}function zu(h,g,w,P){var H=w.type.getDerivedStateFromError;if(typeof H=="function"){var K=P.value;h.payload=function(){return H(K)},h.callback=function(){Uu(g,w,P)}}var ue=w.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(h.callback=function(){Uu(g,w,P),typeof H!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var ge=P.stack;this.componentDidCatch(P.value,{componentStack:ge!==null?ge:""})})}function qh(h,g,w,P,H){if(w.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){if(g=w.alternate,g!==null&&gi(g,w,H,!0),w=Cr.current,w!==null){switch(w.tag){case 31:case 13:return Fr===null?ma():w.alternate===null&&qt===0&&(qt=3),w.flags&=-257,w.flags|=65536,w.lanes=H,P===zs?w.flags|=16384:(g=w.updateQueue,g===null?w.updateQueue=new Set([P]):g.add(P),vl(h,P,H)),!1;case 22:return w.flags|=65536,P===zs?w.flags|=16384:(g=w.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([P])},w.updateQueue=g):(w=g.retryQueue,w===null?g.retryQueue=new Set([P]):w.add(P)),vl(h,P,H)),!1}throw Error(r(435,w.tag))}return vl(h,P,H),ma(),!1}if(_t)return g=Cr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=H,P!==ho&&(h=Error(r(422),{cause:P}),Wi(Br(h,w)))):(P!==ho&&(g=Error(r(423),{cause:P}),Wi(Br(g,w))),h=h.current.alternate,h.flags|=65536,H&=-H,h.lanes|=H,P=Br(P,w),H=Wo(h.stateNode,P,H),So(h,H),qt!==4&&(qt=2)),!1;var K=Error(r(520),{cause:P});if(K=Br(K,w),hs===null?hs=[K]:hs.push(K),qt!==4&&(qt=2),g===null)return!0;P=Br(P,w),w=g;do{switch(w.tag){case 3:return w.flags|=65536,h=H&-H,w.lanes|=h,h=Wo(w.stateNode,P,h),So(w,h),!1;case 1:if(g=w.type,K=w.stateNode,(w.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Nn===null||!Nn.has(K))))return w.flags|=65536,H&=-H,w.lanes|=H,H=Hu(H),zu(H,h,w,P),So(w,H),!1}w=w.return}while(w!==null);return!1}var Yo=Error(r(461)),Vt=!1;function sr(h,g,w,P){g.child=h===null?Wc(g,null,w,P):Zn(g,h.child,w,P)}function Gu(h,g,w,P,H){w=w.render;var K=g.ref;if("ref"in P){var ue={};for(var ge in P)ge!=="ref"&&(ue[ge]=P[ge])}else ue=P;return Yn(g),P=To(h,g,w,ue,K,H),ge=jo(),h!==null&&!Vt?(No(h,g,H),cn(h,g,H)):(_t&&ge&&uo(g),g.flags|=1,sr(h,g,P,H),g.child)}function Vu(h,g,w,P,H){if(h===null){var K=w.type;return typeof K=="function"&&!oo(K)&&K.defaultProps===void 0&&w.compare===null?(g.tag=15,g.type=K,Ku(h,g,K,P,H)):(h=Ds(w.type,null,P,g,g.mode,H),h.ref=g.ref,h.return=g,g.child=h)}if(K=h.child,!nl(h,H)){var ue=K.memoizedProps;if(w=w.compare,w=w!==null?w:Gi,w(ue,P)&&h.ref===g.ref)return cn(h,g,H)}return g.flags|=1,h=tn(K,P),h.ref=g.ref,h.return=g,g.child=h}function Ku(h,g,w,P,H){if(h!==null){var K=h.memoizedProps;if(Gi(K,P)&&h.ref===g.ref)if(Vt=!1,g.pendingProps=P=K,nl(h,H))(h.flags&131072)!==0&&(Vt=!0);else return g.lanes=h.lanes,cn(h,g,H)}return Jo(h,g,w,P,H)}function Wu(h,g,w,P){var H=P.children,K=h!==null?h.memoizedState:null;if(h===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),P.mode==="hidden"){if((g.flags&128)!==0){if(K=K!==null?K.baseLanes|w:w,h!==null){for(P=g.child=h.child,H=0;P!==null;)H=H|P.lanes|P.childLanes,P=P.sibling;P=H&~K}else P=0,g.child=null;return Yu(h,g,K,w,P)}if((w&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},h!==null&&Us(g,K!==null?K.cachePool:null),K!==null?Xc(g,K):Co(),Qc(g);else return P=g.lanes=536870912,Yu(h,g,K!==null?K.baseLanes|w:w,w,P)}else K!==null?(Us(g,K.cachePool),Xc(g,K),$n(),g.memoizedState=null):(h!==null&&Us(g,null),Co(),$n());return sr(h,g,H,w),g.child}function as(h,g){return h!==null&&h.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function Yu(h,g,w,P,H){var K=bo();return K=K===null?null:{parent:zt._currentValue,pool:K},g.memoizedState={baseLanes:w,cachePool:K},h!==null&&Us(g,null),Co(),Qc(g),h!==null&&gi(h,g,P,!0),g.childLanes=H,null}function ia(h,g){return g=aa({mode:g.mode,children:g.children},h.mode),g.ref=h.ref,h.child=g,g.return=h,g}function Ju(h,g,w){return Zn(g,h.child,null,w),h=ia(g,g.pendingProps),h.flags|=2,Ar(g),g.memoizedState=null,h}function Uh(h,g,w){var P=g.pendingProps,H=(g.flags&128)!==0;if(g.flags&=-129,h===null){if(_t){if(P.mode==="hidden")return h=ia(g,P),g.lanes=536870912,as(null,h);if($o(g),(h=Ot)?(h=uf(h,Lr),h=h!==null&&h.data==="&"?h:null,h!==null&&(g.memoizedState={dehydrated:h,treeContext:vn!==null?{id:Wr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},w=Mc(h),w.return=g,g.child=w,nr=g,Ot=null)):h=null,h===null)throw En(g);return g.lanes=536870912,null}return ia(g,P)}var K=h.memoizedState;if(K!==null){var ue=K.dehydrated;if($o(g),H)if(g.flags&256)g.flags&=-257,g=Ju(h,g,w);else if(g.memoizedState!==null)g.child=h.child,g.flags|=128,g=null;else throw Error(r(558));else if(Vt||gi(h,g,w,!1),H=(w&h.childLanes)!==0,Vt||H){if(P=Bt,P!==null&&(ue=it(P,w),ue!==0&&ue!==K.retryLane))throw K.retryLane=ue,Gn(h,ue),br(P,h,ue),Yo;ma(),g=Ju(h,g,w)}else h=K.treeContext,Ot=qr(ue.nextSibling),nr=g,_t=!0,wn=null,Lr=!1,h!==null&&Bc(g,h),g=ia(g,P),g.flags|=4096;return g}return h=tn(h.child,{mode:P.mode,children:P.children}),h.ref=g.ref,g.child=h,h.return=g,h}function sa(h,g){var w=g.ref;if(w===null)h!==null&&h.ref!==null&&(g.flags|=4194816);else{if(typeof w!="function"&&typeof w!="object")throw Error(r(284));(h===null||h.ref!==w)&&(g.flags|=4194816)}}function Jo(h,g,w,P,H){return Yn(g),w=To(h,g,w,P,void 0,H),P=jo(),h!==null&&!Vt?(No(h,g,H),cn(h,g,H)):(_t&&P&&uo(g),g.flags|=1,sr(h,g,w,H),g.child)}function Xu(h,g,w,P,H,K){return Yn(g),g.updateQueue=null,w=eu(g,P,w,H),Zc(h),P=jo(),h!==null&&!Vt?(No(h,g,K),cn(h,g,K)):(_t&&P&&uo(g),g.flags|=1,sr(h,g,w,K),g.child)}function Qu(h,g,w,P,H){if(Yn(g),g.stateNode===null){var K=fi,ue=w.contextType;typeof ue=="object"&&ue!==null&&(K=ir(ue)),K=new w(P,K),g.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,K.updater=Ko,g.stateNode=K,K._reactInternals=g,K=g.stateNode,K.props=P,K.state=g.memoizedState,K.refs={},Eo(g),ue=w.contextType,K.context=typeof ue=="object"&&ue!==null?ir(ue):fi,K.state=g.memoizedState,ue=w.getDerivedStateFromProps,typeof ue=="function"&&(Vo(g,w,ue,P),K.state=g.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(ue=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),ue!==K.state&&Ko.enqueueReplaceState(K,K.state,null),ts(g,P,K,H),es(),K.state=g.memoizedState),typeof K.componentDidMount=="function"&&(g.flags|=4194308),P=!0}else if(h===null){K=g.stateNode;var ge=g.memoizedProps,Se=ti(w,ge);K.props=Se;var Ne=K.context,qe=w.contextType;ue=fi,typeof qe=="object"&&qe!==null&&(ue=ir(qe));var Ge=w.getDerivedStateFromProps;qe=typeof Ge=="function"||typeof K.getSnapshotBeforeUpdate=="function",ge=g.pendingProps!==ge,qe||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ge||Ne!==ue)&&Du(g,K,P,ue),Sn=!1;var Ie=g.memoizedState;K.state=Ie,ts(g,P,K,H),es(),Ne=g.memoizedState,ge||Ie!==Ne||Sn?(typeof Ge=="function"&&(Vo(g,w,Ge,P),Ne=g.memoizedState),(Se=Sn||Ou(g,w,Se,P,Ie,Ne,ue))?(qe||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(g.flags|=4194308)):(typeof K.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=P,g.memoizedState=Ne),K.props=P,K.state=Ne,K.context=ue,P=Se):(typeof K.componentDidMount=="function"&&(g.flags|=4194308),P=!1)}else{K=g.stateNode,_o(h,g),ue=g.memoizedProps,qe=ti(w,ue),K.props=qe,Ge=g.pendingProps,Ie=K.context,Ne=w.contextType,Se=fi,typeof Ne=="object"&&Ne!==null&&(Se=ir(Ne)),ge=w.getDerivedStateFromProps,(Ne=typeof ge=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ue!==Ge||Ie!==Se)&&Du(g,K,P,Se),Sn=!1,Ie=g.memoizedState,K.state=Ie,ts(g,P,K,H),es();var De=g.memoizedState;ue!==Ge||Ie!==De||Sn||h!==null&&h.dependencies!==null&&Fs(h.dependencies)?(typeof ge=="function"&&(Vo(g,w,ge,P),De=g.memoizedState),(qe=Sn||Ou(g,w,qe,P,Ie,De,Se)||h!==null&&h.dependencies!==null&&Fs(h.dependencies))?(Ne||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(P,De,Se),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(P,De,Se)),typeof K.componentDidUpdate=="function"&&(g.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof K.componentDidUpdate!="function"||ue===h.memoizedProps&&Ie===h.memoizedState||(g.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&Ie===h.memoizedState||(g.flags|=1024),g.memoizedProps=P,g.memoizedState=De),K.props=P,K.state=De,K.context=Se,P=qe):(typeof K.componentDidUpdate!="function"||ue===h.memoizedProps&&Ie===h.memoizedState||(g.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&Ie===h.memoizedState||(g.flags|=1024),P=!1)}return K=P,sa(h,g),P=(g.flags&128)!==0,K||P?(K=g.stateNode,w=P&&typeof w.getDerivedStateFromError!="function"?null:K.render(),g.flags|=1,h!==null&&P?(g.child=Zn(g,h.child,null,H),g.child=Zn(g,null,w,H)):sr(h,g,w,H),g.memoizedState=K.state,h=g.child):h=cn(h,g,H),h}function Zu(h,g,w,P){return Kn(),g.flags|=256,sr(h,g,w,P),g.child}var Xo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qo(h){return{baseLanes:h,cachePool:Uc()}}function Zo(h,g,w){return h=h!==null?h.childLanes&~w:0,g&&(h|=kr),h}function ed(h,g,w){var P=g.pendingProps,H=!1,K=(g.flags&128)!==0,ue;if((ue=K)||(ue=h!==null&&h.memoizedState===null?!1:(Ut.current&2)!==0),ue&&(H=!0,g.flags&=-129),ue=(g.flags&32)!==0,g.flags&=-33,h===null){if(_t){if(H?An(g):$n(),(h=Ot)?(h=uf(h,Lr),h=h!==null&&h.data!=="&"?h:null,h!==null&&(g.memoizedState={dehydrated:h,treeContext:vn!==null?{id:Wr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},w=Mc(h),w.return=g,g.child=w,nr=g,Ot=null)):h=null,h===null)throw En(g);return Pl(h)?g.lanes=32:g.lanes=536870912,null}var ge=P.children;return P=P.fallback,H?($n(),H=g.mode,ge=aa({mode:"hidden",children:ge},H),P=Vn(P,H,w,null),ge.return=g,P.return=g,ge.sibling=P,g.child=ge,P=g.child,P.memoizedState=Qo(w),P.childLanes=Zo(h,ue,w),g.memoizedState=Xo,as(null,P)):(An(g),el(g,ge))}var Se=h.memoizedState;if(Se!==null&&(ge=Se.dehydrated,ge!==null)){if(K)g.flags&256?(An(g),g.flags&=-257,g=tl(h,g,w)):g.memoizedState!==null?($n(),g.child=h.child,g.flags|=128,g=null):($n(),ge=P.fallback,H=g.mode,P=aa({mode:"visible",children:P.children},H),ge=Vn(ge,H,w,null),ge.flags|=2,P.return=g,ge.return=g,P.sibling=ge,g.child=P,Zn(g,h.child,null,w),P=g.child,P.memoizedState=Qo(w),P.childLanes=Zo(h,ue,w),g.memoizedState=Xo,g=as(null,P));else if(An(g),Pl(ge)){if(ue=ge.nextSibling&&ge.nextSibling.dataset,ue)var Ne=ue.dgst;ue=Ne,P=Error(r(419)),P.stack="",P.digest=ue,Wi({value:P,source:null,stack:null}),g=tl(h,g,w)}else if(Vt||gi(h,g,w,!1),ue=(w&h.childLanes)!==0,Vt||ue){if(ue=Bt,ue!==null&&(P=it(ue,w),P!==0&&P!==Se.retryLane))throw Se.retryLane=P,Gn(h,P),br(ue,h,P),Yo;Il(ge)||ma(),g=tl(h,g,w)}else Il(ge)?(g.flags|=192,g.child=h.child,g=null):(h=Se.treeContext,Ot=qr(ge.nextSibling),nr=g,_t=!0,wn=null,Lr=!1,h!==null&&Bc(g,h),g=el(g,P.children),g.flags|=4096);return g}return H?($n(),ge=P.fallback,H=g.mode,Se=h.child,Ne=Se.sibling,P=tn(Se,{mode:"hidden",children:P.children}),P.subtreeFlags=Se.subtreeFlags&65011712,Ne!==null?ge=tn(Ne,ge):(ge=Vn(ge,H,w,null),ge.flags|=2),ge.return=g,P.return=g,P.sibling=ge,g.child=P,as(null,P),P=g.child,ge=h.child.memoizedState,ge===null?ge=Qo(w):(H=ge.cachePool,H!==null?(Se=zt._currentValue,H=H.parent!==Se?{parent:Se,pool:Se}:H):H=Uc(),ge={baseLanes:ge.baseLanes|w,cachePool:H}),P.memoizedState=ge,P.childLanes=Zo(h,ue,w),g.memoizedState=Xo,as(h.child,P)):(An(g),w=h.child,h=w.sibling,w=tn(w,{mode:"visible",children:P.children}),w.return=g,w.sibling=null,h!==null&&(ue=g.deletions,ue===null?(g.deletions=[h],g.flags|=16):ue.push(h)),g.child=w,g.memoizedState=null,w)}function el(h,g){return g=aa({mode:"visible",children:g},h.mode),g.return=h,h.child=g}function aa(h,g){return h=Rr(22,h,null,g),h.lanes=0,h}function tl(h,g,w){return Zn(g,h.child,null,w),h=el(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function td(h,g,w){h.lanes|=g;var P=h.alternate;P!==null&&(P.lanes|=g),go(h.return,g,w)}function rl(h,g,w,P,H,K){var ue=h.memoizedState;ue===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:P,tail:w,tailMode:H,treeForkCount:K}:(ue.isBackwards=g,ue.rendering=null,ue.renderingStartTime=0,ue.last=P,ue.tail=w,ue.tailMode=H,ue.treeForkCount=K)}function rd(h,g,w){var P=g.pendingProps,H=P.revealOrder,K=P.tail;P=P.children;var ue=Ut.current,ge=(ue&2)!==0;if(ge?(ue=ue&1|2,g.flags|=128):ue&=1,L(Ut,ue),sr(h,g,P,w),P=_t?Ki:0,!ge&&h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&td(h,w,g);else if(h.tag===19)td(h,w,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(H){case"forwards":for(w=g.child,H=null;w!==null;)h=w.alternate,h!==null&&Ws(h)===null&&(H=w),w=w.sibling;w=H,w===null?(H=g.child,g.child=null):(H=w.sibling,w.sibling=null),rl(g,!1,H,w,K,P);break;case"backwards":case"unstable_legacy-backwards":for(w=null,H=g.child,g.child=null;H!==null;){if(h=H.alternate,h!==null&&Ws(h)===null){g.child=H;break}h=H.sibling,H.sibling=w,w=H,H=h}rl(g,!0,w,null,K,P);break;case"together":rl(g,!1,null,null,void 0,P);break;default:g.memoizedState=null}return g.child}function cn(h,g,w){if(h!==null&&(g.dependencies=h.dependencies),jn|=g.lanes,(w&g.childLanes)===0)if(h!==null){if(gi(h,g,w,!1),(w&g.childLanes)===0)return null}else return null;if(h!==null&&g.child!==h.child)throw Error(r(153));if(g.child!==null){for(h=g.child,w=tn(h,h.pendingProps),g.child=w,w.return=g;h.sibling!==null;)h=h.sibling,w=w.sibling=tn(h,h.pendingProps),w.return=g;w.sibling=null}return g.child}function nl(h,g){return(h.lanes&g)!==0?!0:(h=h.dependencies,!!(h!==null&&Fs(h)))}function Hh(h,g,w){switch(g.tag){case 3:G(g,g.stateNode.containerInfo),_n(g,zt,h.memoizedState.cache),Kn();break;case 27:case 5:he(g);break;case 4:G(g,g.stateNode.containerInfo);break;case 10:_n(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,$o(g),null;break;case 13:var P=g.memoizedState;if(P!==null)return P.dehydrated!==null?(An(g),g.flags|=128,null):(w&g.child.childLanes)!==0?ed(h,g,w):(An(g),h=cn(h,g,w),h!==null?h.sibling:null);An(g);break;case 19:var H=(h.flags&128)!==0;if(P=(w&g.childLanes)!==0,P||(gi(h,g,w,!1),P=(w&g.childLanes)!==0),H){if(P)return rd(h,g,w);g.flags|=128}if(H=g.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),L(Ut,Ut.current),P)break;return null;case 22:return g.lanes=0,Wu(h,g,w,g.pendingProps);case 24:_n(g,zt,h.memoizedState.cache)}return cn(h,g,w)}function nd(h,g,w){if(h!==null)if(h.memoizedProps!==g.pendingProps)Vt=!0;else{if(!nl(h,w)&&(g.flags&128)===0)return Vt=!1,Hh(h,g,w);Vt=(h.flags&131072)!==0}else Vt=!1,_t&&(g.flags&1048576)!==0&&Pc(g,Ki,g.index);switch(g.lanes=0,g.tag){case 16:e:{var P=g.pendingProps;if(h=Xn(g.elementType),g.type=h,typeof h=="function")oo(h)?(P=ti(h,P),g.tag=1,g=Qu(null,g,h,P,w)):(g.tag=0,g=Jo(null,g,h,P,w));else{if(h!=null){var H=h.$$typeof;if(H===F){g.tag=11,g=Gu(null,g,h,P,w);break e}else if(H===ee){g.tag=14,g=Vu(null,g,h,P,w);break e}}throw g=v(h)||h,Error(r(306,g,""))}}return g;case 0:return Jo(h,g,g.type,g.pendingProps,w);case 1:return P=g.type,H=ti(P,g.pendingProps),Qu(h,g,P,H,w);case 3:e:{if(G(g,g.stateNode.containerInfo),h===null)throw Error(r(387));P=g.pendingProps;var K=g.memoizedState;H=K.element,_o(h,g),ts(g,P,null,w);var ue=g.memoizedState;if(P=ue.cache,_n(g,zt,P),P!==K.cache&&xo(g,[zt],w,!0),es(),P=ue.element,K.isDehydrated)if(K={element:P,isDehydrated:!1,cache:ue.cache},g.updateQueue.baseState=K,g.memoizedState=K,g.flags&256){g=Zu(h,g,P,w);break e}else if(P!==H){H=Br(Error(r(424)),g),Wi(H),g=Zu(h,g,P,w);break e}else for(h=g.stateNode.containerInfo,h.nodeType===9?h=h.body:h=h.nodeName==="HTML"?h.ownerDocument.body:h,Ot=qr(h.firstChild),nr=g,_t=!0,wn=null,Lr=!0,w=Wc(g,null,P,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Kn(),P===H){g=cn(h,g,w);break e}sr(h,g,P,w)}g=g.child}return g;case 26:return sa(h,g),h===null?(w=gf(g.type,null,g.pendingProps,null))?g.memoizedState=w:_t||(w=g.type,h=g.pendingProps,P=Ea(J.current).createElement(w),P[nt]=g,P[Je]=h,ar(P,w,h),Tt(P),g.stateNode=P):g.memoizedState=gf(g.type,h.memoizedProps,g.pendingProps,h.memoizedState),null;case 27:return he(g),h===null&&_t&&(P=g.stateNode=hf(g.type,g.pendingProps,J.current),nr=g,Lr=!0,H=Ot,Bn(g.type)?(Bl=H,Ot=qr(P.firstChild)):Ot=H),sr(h,g,g.pendingProps.children,w),sa(h,g),h===null&&(g.flags|=4194304),g.child;case 5:return h===null&&_t&&((H=P=Ot)&&(P=v0(P,g.type,g.pendingProps,Lr),P!==null?(g.stateNode=P,nr=g,Ot=qr(P.firstChild),Lr=!1,H=!0):H=!1),H||En(g)),he(g),H=g.type,K=g.pendingProps,ue=h!==null?h.memoizedProps:null,P=K.children,jl(H,K)?P=null:ue!==null&&jl(H,ue)&&(g.flags|=32),g.memoizedState!==null&&(H=To(h,g,Ih,null,null,w),Es._currentValue=H),sa(h,g),sr(h,g,P,w),g.child;case 6:return h===null&&_t&&((h=w=Ot)&&(w=b0(w,g.pendingProps,Lr),w!==null?(g.stateNode=w,nr=g,Ot=null,h=!0):h=!1),h||En(g)),null;case 13:return ed(h,g,w);case 4:return G(g,g.stateNode.containerInfo),P=g.pendingProps,h===null?g.child=Zn(g,null,P,w):sr(h,g,P,w),g.child;case 11:return Gu(h,g,g.type,g.pendingProps,w);case 7:return sr(h,g,g.pendingProps,w),g.child;case 8:return sr(h,g,g.pendingProps.children,w),g.child;case 12:return sr(h,g,g.pendingProps.children,w),g.child;case 10:return P=g.pendingProps,_n(g,g.type,P.value),sr(h,g,P.children,w),g.child;case 9:return H=g.type._context,P=g.pendingProps.children,Yn(g),H=ir(H),P=P(H),g.flags|=1,sr(h,g,P,w),g.child;case 14:return Vu(h,g,g.type,g.pendingProps,w);case 15:return Ku(h,g,g.type,g.pendingProps,w);case 19:return rd(h,g,w);case 31:return Uh(h,g,w);case 22:return Wu(h,g,w,g.pendingProps);case 24:return Yn(g),P=ir(zt),h===null?(H=bo(),H===null&&(H=Bt,K=yo(),H.pooledCache=K,K.refCount++,K!==null&&(H.pooledCacheLanes|=w),H=K),g.memoizedState={parent:P,cache:H},Eo(g),_n(g,zt,H)):((h.lanes&w)!==0&&(_o(h,g),ts(g,null,null,w),es()),H=h.memoizedState,K=g.memoizedState,H.parent!==P?(H={parent:P,cache:P},g.memoizedState=H,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=H),_n(g,zt,P)):(P=K.cache,_n(g,zt,P),P!==H.cache&&xo(g,[zt],w,!0))),sr(h,g,g.pendingProps.children,w),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function un(h){h.flags|=4}function il(h,g,w,P,H){if((g=(h.mode&32)!==0)&&(g=!1),g){if(h.flags|=16777216,(H&335544128)===H)if(h.stateNode.complete)h.flags|=8192;else if(jd())h.flags|=8192;else throw Qn=zs,wo}else h.flags&=-16777217}function sd(h,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!wf(g))if(jd())h.flags|=8192;else throw Qn=zs,wo}function oa(h,g){g!==null&&(h.flags|=4),h.flags&16384&&(g=h.tag!==22?ct():536870912,h.lanes|=g,$i|=g)}function os(h,g){if(!_t)switch(h.tailMode){case"hidden":g=h.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var P=null;w!==null;)w.alternate!==null&&(P=w),w=w.sibling;P===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:P.sibling=null}}function Dt(h){var g=h.alternate!==null&&h.alternate.child===h.child,w=0,P=0;if(g)for(var H=h.child;H!==null;)w|=H.lanes|H.childLanes,P|=H.subtreeFlags&65011712,P|=H.flags&65011712,H.return=h,H=H.sibling;else for(H=h.child;H!==null;)w|=H.lanes|H.childLanes,P|=H.subtreeFlags,P|=H.flags,H.return=h,H=H.sibling;return h.subtreeFlags|=P,h.childLanes=w,g}function zh(h,g,w){var P=g.pendingProps;switch(fo(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(g),null;case 1:return Dt(g),null;case 3:return w=g.stateNode,P=null,h!==null&&(P=h.memoizedState.cache),g.memoizedState.cache!==P&&(g.flags|=2048),sn(zt),ae(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(h===null||h.child===null)&&(mi(g)?un(g):h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,po())),Dt(g),null;case 26:var H=g.type,K=g.memoizedState;return h===null?(un(g),K!==null?(Dt(g),sd(g,K)):(Dt(g),il(g,H,null,P,w))):K?K!==h.memoizedState?(un(g),Dt(g),sd(g,K)):(Dt(g),g.flags&=-16777217):(h=h.memoizedProps,h!==P&&un(g),Dt(g),il(g,H,h,P,w)),null;case 27:if(le(g),w=J.current,H=g.type,h!==null&&g.stateNode!=null)h.memoizedProps!==P&&un(g);else{if(!P){if(g.stateNode===null)throw Error(r(166));return Dt(g),null}h=Y.current,mi(g)?Oc(g):(h=hf(H,P,w),g.stateNode=h,un(g))}return Dt(g),null;case 5:if(le(g),H=g.type,h!==null&&g.stateNode!=null)h.memoizedProps!==P&&un(g);else{if(!P){if(g.stateNode===null)throw Error(r(166));return Dt(g),null}if(K=Y.current,mi(g))Oc(g);else{var ue=Ea(J.current);switch(K){case 1:K=ue.createElementNS("http://www.w3.org/2000/svg",H);break;case 2:K=ue.createElementNS("http://www.w3.org/1998/Math/MathML",H);break;default:switch(H){case"svg":K=ue.createElementNS("http://www.w3.org/2000/svg",H);break;case"math":K=ue.createElementNS("http://www.w3.org/1998/Math/MathML",H);break;case"script":K=ue.createElement("div"),K.innerHTML="<script><\/script>",K=K.removeChild(K.firstChild);break;case"select":K=typeof P.is=="string"?ue.createElement("select",{is:P.is}):ue.createElement("select"),P.multiple?K.multiple=!0:P.size&&(K.size=P.size);break;default:K=typeof P.is=="string"?ue.createElement(H,{is:P.is}):ue.createElement(H)}}K[nt]=g,K[Je]=P;e:for(ue=g.child;ue!==null;){if(ue.tag===5||ue.tag===6)K.appendChild(ue.stateNode);else if(ue.tag!==4&&ue.tag!==27&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===g)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===g)break e;ue=ue.return}ue.sibling.return=ue.return,ue=ue.sibling}g.stateNode=K;e:switch(ar(K,H,P),H){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}P&&un(g)}}return Dt(g),il(g,g.type,h===null?null:h.memoizedProps,g.pendingProps,w),null;case 6:if(h&&g.stateNode!=null)h.memoizedProps!==P&&un(g);else{if(typeof P!="string"&&g.stateNode===null)throw Error(r(166));if(h=J.current,mi(g)){if(h=g.stateNode,w=g.memoizedProps,P=null,H=nr,H!==null)switch(H.tag){case 27:case 5:P=H.memoizedProps}h[nt]=g,h=!!(h.nodeValue===w||P!==null&&P.suppressHydrationWarning===!0||tf(h.nodeValue,w)),h||En(g,!0)}else h=Ea(h).createTextNode(P),h[nt]=g,g.stateNode=h}return Dt(g),null;case 31:if(w=g.memoizedState,h===null||h.memoizedState!==null){if(P=mi(g),w!==null){if(h===null){if(!P)throw Error(r(318));if(h=g.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(557));h[nt]=g}else Kn(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Dt(g),h=!1}else w=po(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=w),h=!0;if(!h)return g.flags&256?(Ar(g),g):(Ar(g),null);if((g.flags&128)!==0)throw Error(r(558))}return Dt(g),null;case 13:if(P=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(H=mi(g),P!==null&&P.dehydrated!==null){if(h===null){if(!H)throw Error(r(318));if(H=g.memoizedState,H=H!==null?H.dehydrated:null,!H)throw Error(r(317));H[nt]=g}else Kn(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Dt(g),H=!1}else H=po(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=H),H=!0;if(!H)return g.flags&256?(Ar(g),g):(Ar(g),null)}return Ar(g),(g.flags&128)!==0?(g.lanes=w,g):(w=P!==null,h=h!==null&&h.memoizedState!==null,w&&(P=g.child,H=null,P.alternate!==null&&P.alternate.memoizedState!==null&&P.alternate.memoizedState.cachePool!==null&&(H=P.alternate.memoizedState.cachePool.pool),K=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(K=P.memoizedState.cachePool.pool),K!==H&&(P.flags|=2048)),w!==h&&w&&(g.child.flags|=8192),oa(g,g.updateQueue),Dt(g),null);case 4:return ae(),h===null&&Cl(g.stateNode.containerInfo),Dt(g),null;case 10:return sn(g.type),Dt(g),null;case 19:if(A(Ut),P=g.memoizedState,P===null)return Dt(g),null;if(H=(g.flags&128)!==0,K=P.rendering,K===null)if(H)os(P,!1);else{if(qt!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(K=Ws(h),K!==null){for(g.flags|=128,os(P,!1),h=K.updateQueue,g.updateQueue=h,oa(g,h),g.subtreeFlags=0,h=w,w=g.child;w!==null;)Nc(w,h),w=w.sibling;return L(Ut,Ut.current&1|2),_t&&rn(g,P.treeForkCount),g.child}h=h.sibling}P.tail!==null&&ke()>fa&&(g.flags|=128,H=!0,os(P,!1),g.lanes=4194304)}else{if(!H)if(h=Ws(K),h!==null){if(g.flags|=128,H=!0,h=h.updateQueue,g.updateQueue=h,oa(g,h),os(P,!0),P.tail===null&&P.tailMode==="hidden"&&!K.alternate&&!_t)return Dt(g),null}else 2*ke()-P.renderingStartTime>fa&&w!==536870912&&(g.flags|=128,H=!0,os(P,!1),g.lanes=4194304);P.isBackwards?(K.sibling=g.child,g.child=K):(h=P.last,h!==null?h.sibling=K:g.child=K,P.last=K)}return P.tail!==null?(h=P.tail,P.rendering=h,P.tail=h.sibling,P.renderingStartTime=ke(),h.sibling=null,w=Ut.current,L(Ut,H?w&1|2:w&1),_t&&rn(g,P.treeForkCount),h):(Dt(g),null);case 22:case 23:return Ar(g),Ao(),P=g.memoizedState!==null,h!==null?h.memoizedState!==null!==P&&(g.flags|=8192):P&&(g.flags|=8192),P?(w&536870912)!==0&&(g.flags&128)===0&&(Dt(g),g.subtreeFlags&6&&(g.flags|=8192)):Dt(g),w=g.updateQueue,w!==null&&oa(g,w.retryQueue),w=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),P=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(P=g.memoizedState.cachePool.pool),P!==w&&(g.flags|=2048),h!==null&&A(Jn),null;case 24:return w=null,h!==null&&(w=h.memoizedState.cache),g.memoizedState.cache!==w&&(g.flags|=2048),sn(zt),Dt(g),null;case 25:return null;case 30:return null}throw Error(r(156,g.tag))}function Gh(h,g){switch(fo(g),g.tag){case 1:return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return sn(zt),ae(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 26:case 27:case 5:return le(g),null;case 31:if(g.memoizedState!==null){if(Ar(g),g.alternate===null)throw Error(r(340));Kn()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 13:if(Ar(g),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(r(340));Kn()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return A(Ut),null;case 4:return ae(),null;case 10:return sn(g.type),null;case 22:case 23:return Ar(g),Ao(),h!==null&&A(Jn),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 24:return sn(zt),null;case 25:return null;default:return null}}function ad(h,g){switch(fo(g),g.tag){case 3:sn(zt),ae();break;case 26:case 27:case 5:le(g);break;case 4:ae();break;case 31:g.memoizedState!==null&&Ar(g);break;case 13:Ar(g);break;case 19:A(Ut);break;case 10:sn(g.type);break;case 22:case 23:Ar(g),Ao(),h!==null&&A(Jn);break;case 24:sn(zt)}}function ls(h,g){try{var w=g.updateQueue,P=w!==null?w.lastEffect:null;if(P!==null){var H=P.next;w=H;do{if((w.tag&h)===h){P=void 0;var K=w.create,ue=w.inst;P=K(),ue.destroy=P}w=w.next}while(w!==H)}}catch(ge){Nt(g,g.return,ge)}}function kn(h,g,w){try{var P=g.updateQueue,H=P!==null?P.lastEffect:null;if(H!==null){var K=H.next;P=K;do{if((P.tag&h)===h){var ue=P.inst,ge=ue.destroy;if(ge!==void 0){ue.destroy=void 0,H=g;var Se=w,Ne=ge;try{Ne()}catch(qe){Nt(H,Se,qe)}}}P=P.next}while(P!==K)}}catch(qe){Nt(g,g.return,qe)}}function od(h){var g=h.updateQueue;if(g!==null){var w=h.stateNode;try{Jc(g,w)}catch(P){Nt(h,h.return,P)}}}function ld(h,g,w){w.props=ti(h.type,h.memoizedProps),w.state=h.memoizedState;try{w.componentWillUnmount()}catch(P){Nt(h,g,P)}}function cs(h,g){try{var w=h.ref;if(w!==null){switch(h.tag){case 26:case 27:case 5:var P=h.stateNode;break;case 30:P=h.stateNode;break;default:P=h.stateNode}typeof w=="function"?h.refCleanup=w(P):w.current=P}}catch(H){Nt(h,g,H)}}function Jr(h,g){var w=h.ref,P=h.refCleanup;if(w!==null)if(typeof P=="function")try{P()}catch(H){Nt(h,g,H)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(H){Nt(h,g,H)}else w.current=null}function cd(h){var g=h.type,w=h.memoizedProps,P=h.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":w.autoFocus&&P.focus();break e;case"img":w.src?P.src=w.src:w.srcSet&&(P.srcset=w.srcSet)}}catch(H){Nt(h,h.return,H)}}function sl(h,g,w){try{var P=h.stateNode;h0(P,h.type,w,g),P[Je]=g}catch(H){Nt(h,h.return,H)}}function ud(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&Bn(h.type)||h.tag===4}function al(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||ud(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&Bn(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function ol(h,g,w){var P=h.tag;if(P===5||P===6)h=h.stateNode,g?(w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w).insertBefore(h,g):(g=w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w,g.appendChild(h),w=w._reactRootContainer,w!=null||g.onclick!==null||(g.onclick=Zr));else if(P!==4&&(P===27&&Bn(h.type)&&(w=h.stateNode,g=null),h=h.child,h!==null))for(ol(h,g,w),h=h.sibling;h!==null;)ol(h,g,w),h=h.sibling}function la(h,g,w){var P=h.tag;if(P===5||P===6)h=h.stateNode,g?w.insertBefore(h,g):w.appendChild(h);else if(P!==4&&(P===27&&Bn(h.type)&&(w=h.stateNode),h=h.child,h!==null))for(la(h,g,w),h=h.sibling;h!==null;)la(h,g,w),h=h.sibling}function dd(h){var g=h.stateNode,w=h.memoizedProps;try{for(var P=h.type,H=g.attributes;H.length;)g.removeAttributeNode(H[0]);ar(g,P,w),g[nt]=h,g[Je]=w}catch(K){Nt(h,h.return,K)}}var dn=!1,Kt=!1,ll=!1,fd=typeof WeakSet=="function"?WeakSet:Set,er=null;function Vh(h,g){if(h=h.containerInfo,kl=Ta,h=_c(h),eo(h)){if("selectionStart"in h)var w={start:h.selectionStart,end:h.selectionEnd};else e:{w=(w=h.ownerDocument)&&w.defaultView||window;var P=w.getSelection&&w.getSelection();if(P&&P.rangeCount!==0){w=P.anchorNode;var H=P.anchorOffset,K=P.focusNode;P=P.focusOffset;try{w.nodeType,K.nodeType}catch{w=null;break e}var ue=0,ge=-1,Se=-1,Ne=0,qe=0,Ge=h,Ie=null;t:for(;;){for(var De;Ge!==w||H!==0&&Ge.nodeType!==3||(ge=ue+H),Ge!==K||P!==0&&Ge.nodeType!==3||(Se=ue+P),Ge.nodeType===3&&(ue+=Ge.nodeValue.length),(De=Ge.firstChild)!==null;)Ie=Ge,Ge=De;for(;;){if(Ge===h)break t;if(Ie===w&&++Ne===H&&(ge=ue),Ie===K&&++qe===P&&(Se=ue),(De=Ge.nextSibling)!==null)break;Ge=Ie,Ie=Ge.parentNode}Ge=De}w=ge===-1||Se===-1?null:{start:ge,end:Se}}else w=null}w=w||{start:0,end:0}}else w=null;for(Tl={focusedElem:h,selectionRange:w},Ta=!1,er=g;er!==null;)if(g=er,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,er=h;else for(;er!==null;){switch(g=er,K=g.alternate,h=g.flags,g.tag){case 0:if((h&4)!==0&&(h=g.updateQueue,h=h!==null?h.events:null,h!==null))for(w=0;w<h.length;w++)H=h[w],H.ref.impl=H.nextImpl;break;case 11:case 15:break;case 1:if((h&1024)!==0&&K!==null){h=void 0,w=g,H=K.memoizedProps,K=K.memoizedState,P=w.stateNode;try{var rt=ti(w.type,H);h=P.getSnapshotBeforeUpdate(rt,K),P.__reactInternalSnapshotBeforeUpdate=h}catch(ut){Nt(w,w.return,ut)}}break;case 3:if((h&1024)!==0){if(h=g.stateNode.containerInfo,w=h.nodeType,w===9)Ml(h);else if(w===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":Ml(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(r(163))}if(h=g.sibling,h!==null){h.return=g.return,er=h;break}er=g.return}}function hd(h,g,w){var P=w.flags;switch(w.tag){case 0:case 11:case 15:hn(h,w),P&4&&ls(5,w);break;case 1:if(hn(h,w),P&4)if(h=w.stateNode,g===null)try{h.componentDidMount()}catch(ue){Nt(w,w.return,ue)}else{var H=ti(w.type,g.memoizedProps);g=g.memoizedState;try{h.componentDidUpdate(H,g,h.__reactInternalSnapshotBeforeUpdate)}catch(ue){Nt(w,w.return,ue)}}P&64&&od(w),P&512&&cs(w,w.return);break;case 3:if(hn(h,w),P&64&&(h=w.updateQueue,h!==null)){if(g=null,w.child!==null)switch(w.child.tag){case 27:case 5:g=w.child.stateNode;break;case 1:g=w.child.stateNode}try{Jc(h,g)}catch(ue){Nt(w,w.return,ue)}}break;case 27:g===null&&P&4&&dd(w);case 26:case 5:hn(h,w),g===null&&P&4&&cd(w),P&512&&cs(w,w.return);break;case 12:hn(h,w);break;case 31:hn(h,w),P&4&&gd(h,w);break;case 13:hn(h,w),P&4&&xd(h,w),P&64&&(h=w.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(w=t0.bind(null,w),w0(h,w))));break;case 22:if(P=w.memoizedState!==null||dn,!P){g=g!==null&&g.memoizedState!==null||Kt,H=dn;var K=Kt;dn=P,(Kt=g)&&!K?pn(h,w,(w.subtreeFlags&8772)!==0):hn(h,w),dn=H,Kt=K}break;case 30:break;default:hn(h,w)}}function pd(h){var g=h.alternate;g!==null&&(h.alternate=null,pd(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&or(g)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var Lt=null,gr=!1;function fn(h,g,w){for(w=w.child;w!==null;)md(h,g,w),w=w.sibling}function md(h,g,w){if(Ee&&typeof Ee.onCommitFiberUnmount=="function")try{Ee.onCommitFiberUnmount(me,w)}catch{}switch(w.tag){case 26:Kt||Jr(w,g),fn(h,g,w),w.memoizedState?w.memoizedState.count--:w.stateNode&&(w=w.stateNode,w.parentNode.removeChild(w));break;case 27:Kt||Jr(w,g);var P=Lt,H=gr;Bn(w.type)&&(Lt=w.stateNode,gr=!1),fn(h,g,w),ys(w.stateNode),Lt=P,gr=H;break;case 5:Kt||Jr(w,g);case 6:if(P=Lt,H=gr,Lt=null,fn(h,g,w),Lt=P,gr=H,Lt!==null)if(gr)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(w.stateNode)}catch(K){Nt(w,g,K)}else try{Lt.removeChild(w.stateNode)}catch(K){Nt(w,g,K)}break;case 18:Lt!==null&&(gr?(h=Lt,lf(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,w.stateNode),Bi(h)):lf(Lt,w.stateNode));break;case 4:P=Lt,H=gr,Lt=w.stateNode.containerInfo,gr=!0,fn(h,g,w),Lt=P,gr=H;break;case 0:case 11:case 14:case 15:kn(2,w,g),Kt||kn(4,w,g),fn(h,g,w);break;case 1:Kt||(Jr(w,g),P=w.stateNode,typeof P.componentWillUnmount=="function"&&ld(w,g,P)),fn(h,g,w);break;case 21:fn(h,g,w);break;case 22:Kt=(P=Kt)||w.memoizedState!==null,fn(h,g,w),Kt=P;break;default:fn(h,g,w)}}function gd(h,g){if(g.memoizedState===null&&(h=g.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{Bi(h)}catch(w){Nt(g,g.return,w)}}}function xd(h,g){if(g.memoizedState===null&&(h=g.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Bi(h)}catch(w){Nt(g,g.return,w)}}function Kh(h){switch(h.tag){case 31:case 13:case 19:var g=h.stateNode;return g===null&&(g=h.stateNode=new fd),g;case 22:return h=h.stateNode,g=h._retryCache,g===null&&(g=h._retryCache=new fd),g;default:throw Error(r(435,h.tag))}}function ca(h,g){var w=Kh(h);g.forEach(function(P){if(!w.has(P)){w.add(P);var H=r0.bind(null,h,P);P.then(H,H)}})}function xr(h,g){var w=g.deletions;if(w!==null)for(var P=0;P<w.length;P++){var H=w[P],K=h,ue=g,ge=ue;e:for(;ge!==null;){switch(ge.tag){case 27:if(Bn(ge.type)){Lt=ge.stateNode,gr=!1;break e}break;case 5:Lt=ge.stateNode,gr=!1;break e;case 3:case 4:Lt=ge.stateNode.containerInfo,gr=!0;break e}ge=ge.return}if(Lt===null)throw Error(r(160));md(K,ue,H),Lt=null,gr=!1,K=H.alternate,K!==null&&(K.return=null),H.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)yd(g,h),g=g.sibling}var zr=null;function yd(h,g){var w=h.alternate,P=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:xr(g,h),yr(h),P&4&&(kn(3,h,h.return),ls(3,h),kn(5,h,h.return));break;case 1:xr(g,h),yr(h),P&512&&(Kt||w===null||Jr(w,w.return)),P&64&&dn&&(h=h.updateQueue,h!==null&&(P=h.callbacks,P!==null&&(w=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=w===null?P:w.concat(P))));break;case 26:var H=zr;if(xr(g,h),yr(h),P&512&&(Kt||w===null||Jr(w,w.return)),P&4){var K=w!==null?w.memoizedState:null;if(P=h.memoizedState,w===null)if(P===null)if(h.stateNode===null){e:{P=h.type,w=h.memoizedProps,H=H.ownerDocument||H;t:switch(P){case"title":K=H.getElementsByTagName("title")[0],(!K||K[tr]||K[nt]||K.namespaceURI==="http://www.w3.org/2000/svg"||K.hasAttribute("itemprop"))&&(K=H.createElement(P),H.head.insertBefore(K,H.querySelector("head > title"))),ar(K,P,w),K[nt]=h,Tt(K),P=K;break e;case"link":var ue=vf("link","href",H).get(P+(w.href||""));if(ue){for(var ge=0;ge<ue.length;ge++)if(K=ue[ge],K.getAttribute("href")===(w.href==null||w.href===""?null:w.href)&&K.getAttribute("rel")===(w.rel==null?null:w.rel)&&K.getAttribute("title")===(w.title==null?null:w.title)&&K.getAttribute("crossorigin")===(w.crossOrigin==null?null:w.crossOrigin)){ue.splice(ge,1);break t}}K=H.createElement(P),ar(K,P,w),H.head.appendChild(K);break;case"meta":if(ue=vf("meta","content",H).get(P+(w.content||""))){for(ge=0;ge<ue.length;ge++)if(K=ue[ge],K.getAttribute("content")===(w.content==null?null:""+w.content)&&K.getAttribute("name")===(w.name==null?null:w.name)&&K.getAttribute("property")===(w.property==null?null:w.property)&&K.getAttribute("http-equiv")===(w.httpEquiv==null?null:w.httpEquiv)&&K.getAttribute("charset")===(w.charSet==null?null:w.charSet)){ue.splice(ge,1);break t}}K=H.createElement(P),ar(K,P,w),H.head.appendChild(K);break;default:throw Error(r(468,P))}K[nt]=h,Tt(K),P=K}h.stateNode=P}else bf(H,h.type,h.stateNode);else h.stateNode=yf(H,P,h.memoizedProps);else K!==P?(K===null?w.stateNode!==null&&(w=w.stateNode,w.parentNode.removeChild(w)):K.count--,P===null?bf(H,h.type,h.stateNode):yf(H,P,h.memoizedProps)):P===null&&h.stateNode!==null&&sl(h,h.memoizedProps,w.memoizedProps)}break;case 27:xr(g,h),yr(h),P&512&&(Kt||w===null||Jr(w,w.return)),w!==null&&P&4&&sl(h,h.memoizedProps,w.memoizedProps);break;case 5:if(xr(g,h),yr(h),P&512&&(Kt||w===null||Jr(w,w.return)),h.flags&32){H=h.stateNode;try{si(H,"")}catch(rt){Nt(h,h.return,rt)}}P&4&&h.stateNode!=null&&(H=h.memoizedProps,sl(h,H,w!==null?w.memoizedProps:H)),P&1024&&(ll=!0);break;case 6:if(xr(g,h),yr(h),P&4){if(h.stateNode===null)throw Error(r(162));P=h.memoizedProps,w=h.stateNode;try{w.nodeValue=P}catch(rt){Nt(h,h.return,rt)}}break;case 3:if(Ca=null,H=zr,zr=Sa(g.containerInfo),xr(g,h),zr=H,yr(h),P&4&&w!==null&&w.memoizedState.isDehydrated)try{Bi(g.containerInfo)}catch(rt){Nt(h,h.return,rt)}ll&&(ll=!1,vd(h));break;case 4:P=zr,zr=Sa(h.stateNode.containerInfo),xr(g,h),yr(h),zr=P;break;case 12:xr(g,h),yr(h);break;case 31:xr(g,h),yr(h),P&4&&(P=h.updateQueue,P!==null&&(h.updateQueue=null,ca(h,P)));break;case 13:xr(g,h),yr(h),h.child.flags&8192&&h.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(da=ke()),P&4&&(P=h.updateQueue,P!==null&&(h.updateQueue=null,ca(h,P)));break;case 22:H=h.memoizedState!==null;var Se=w!==null&&w.memoizedState!==null,Ne=dn,qe=Kt;if(dn=Ne||H,Kt=qe||Se,xr(g,h),Kt=qe,dn=Ne,yr(h),P&8192)e:for(g=h.stateNode,g._visibility=H?g._visibility&-2:g._visibility|1,H&&(w===null||Se||dn||Kt||ri(h)),w=null,g=h;;){if(g.tag===5||g.tag===26){if(w===null){Se=w=g;try{if(K=Se.stateNode,H)ue=K.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{ge=Se.stateNode;var Ge=Se.memoizedProps.style,Ie=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null;ge.style.display=Ie==null||typeof Ie=="boolean"?"":(""+Ie).trim()}}catch(rt){Nt(Se,Se.return,rt)}}}else if(g.tag===6){if(w===null){Se=g;try{Se.stateNode.nodeValue=H?"":Se.memoizedProps}catch(rt){Nt(Se,Se.return,rt)}}}else if(g.tag===18){if(w===null){Se=g;try{var De=Se.stateNode;H?cf(De,!0):cf(Se.stateNode,!1)}catch(rt){Nt(Se,Se.return,rt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===h)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break e;for(;g.sibling===null;){if(g.return===null||g.return===h)break e;w===g&&(w=null),g=g.return}w===g&&(w=null),g.sibling.return=g.return,g=g.sibling}P&4&&(P=h.updateQueue,P!==null&&(w=P.retryQueue,w!==null&&(P.retryQueue=null,ca(h,w))));break;case 19:xr(g,h),yr(h),P&4&&(P=h.updateQueue,P!==null&&(h.updateQueue=null,ca(h,P)));break;case 30:break;case 21:break;default:xr(g,h),yr(h)}}function yr(h){var g=h.flags;if(g&2){try{for(var w,P=h.return;P!==null;){if(ud(P)){w=P;break}P=P.return}if(w==null)throw Error(r(160));switch(w.tag){case 27:var H=w.stateNode,K=al(h);la(h,K,H);break;case 5:var ue=w.stateNode;w.flags&32&&(si(ue,""),w.flags&=-33);var ge=al(h);la(h,ge,ue);break;case 3:case 4:var Se=w.stateNode.containerInfo,Ne=al(h);ol(h,Ne,Se);break;default:throw Error(r(161))}}catch(qe){Nt(h,h.return,qe)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function vd(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var g=h;vd(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),h=h.sibling}}function hn(h,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)hd(h,g.alternate,g),g=g.sibling}function ri(h){for(h=h.child;h!==null;){var g=h;switch(g.tag){case 0:case 11:case 14:case 15:kn(4,g,g.return),ri(g);break;case 1:Jr(g,g.return);var w=g.stateNode;typeof w.componentWillUnmount=="function"&&ld(g,g.return,w),ri(g);break;case 27:ys(g.stateNode);case 26:case 5:Jr(g,g.return),ri(g);break;case 22:g.memoizedState===null&&ri(g);break;case 30:ri(g);break;default:ri(g)}h=h.sibling}}function pn(h,g,w){for(w=w&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var P=g.alternate,H=h,K=g,ue=K.flags;switch(K.tag){case 0:case 11:case 15:pn(H,K,w),ls(4,K);break;case 1:if(pn(H,K,w),P=K,H=P.stateNode,typeof H.componentDidMount=="function")try{H.componentDidMount()}catch(Ne){Nt(P,P.return,Ne)}if(P=K,H=P.updateQueue,H!==null){var ge=P.stateNode;try{var Se=H.shared.hiddenCallbacks;if(Se!==null)for(H.shared.hiddenCallbacks=null,H=0;H<Se.length;H++)Yc(Se[H],ge)}catch(Ne){Nt(P,P.return,Ne)}}w&&ue&64&&od(K),cs(K,K.return);break;case 27:dd(K);case 26:case 5:pn(H,K,w),w&&P===null&&ue&4&&cd(K),cs(K,K.return);break;case 12:pn(H,K,w);break;case 31:pn(H,K,w),w&&ue&4&&gd(H,K);break;case 13:pn(H,K,w),w&&ue&4&&xd(H,K);break;case 22:K.memoizedState===null&&pn(H,K,w),cs(K,K.return);break;case 30:break;default:pn(H,K,w)}g=g.sibling}}function cl(h,g){var w=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),h=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(h=g.memoizedState.cachePool.pool),h!==w&&(h!=null&&h.refCount++,w!=null&&Yi(w))}function ul(h,g){h=null,g.alternate!==null&&(h=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==h&&(g.refCount++,h!=null&&Yi(h))}function Gr(h,g,w,P){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)bd(h,g,w,P),g=g.sibling}function bd(h,g,w,P){var H=g.flags;switch(g.tag){case 0:case 11:case 15:Gr(h,g,w,P),H&2048&&ls(9,g);break;case 1:Gr(h,g,w,P);break;case 3:Gr(h,g,w,P),H&2048&&(h=null,g.alternate!==null&&(h=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==h&&(g.refCount++,h!=null&&Yi(h)));break;case 12:if(H&2048){Gr(h,g,w,P),h=g.stateNode;try{var K=g.memoizedProps,ue=K.id,ge=K.onPostCommit;typeof ge=="function"&&ge(ue,g.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Se){Nt(g,g.return,Se)}}else Gr(h,g,w,P);break;case 31:Gr(h,g,w,P);break;case 13:Gr(h,g,w,P);break;case 23:break;case 22:K=g.stateNode,ue=g.alternate,g.memoizedState!==null?K._visibility&2?Gr(h,g,w,P):us(h,g):K._visibility&2?Gr(h,g,w,P):(K._visibility|=2,Ri(h,g,w,P,(g.subtreeFlags&10256)!==0||!1)),H&2048&&cl(ue,g);break;case 24:Gr(h,g,w,P),H&2048&&ul(g.alternate,g);break;default:Gr(h,g,w,P)}}function Ri(h,g,w,P,H){for(H=H&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var K=h,ue=g,ge=w,Se=P,Ne=ue.flags;switch(ue.tag){case 0:case 11:case 15:Ri(K,ue,ge,Se,H),ls(8,ue);break;case 23:break;case 22:var qe=ue.stateNode;ue.memoizedState!==null?qe._visibility&2?Ri(K,ue,ge,Se,H):us(K,ue):(qe._visibility|=2,Ri(K,ue,ge,Se,H)),H&&Ne&2048&&cl(ue.alternate,ue);break;case 24:Ri(K,ue,ge,Se,H),H&&Ne&2048&&ul(ue.alternate,ue);break;default:Ri(K,ue,ge,Se,H)}g=g.sibling}}function us(h,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var w=h,P=g,H=P.flags;switch(P.tag){case 22:us(w,P),H&2048&&cl(P.alternate,P);break;case 24:us(w,P),H&2048&&ul(P.alternate,P);break;default:us(w,P)}g=g.sibling}}var ds=8192;function Ci(h,g,w){if(h.subtreeFlags&ds)for(h=h.child;h!==null;)wd(h,g,w),h=h.sibling}function wd(h,g,w){switch(h.tag){case 26:Ci(h,g,w),h.flags&ds&&h.memoizedState!==null&&M0(w,zr,h.memoizedState,h.memoizedProps);break;case 5:Ci(h,g,w);break;case 3:case 4:var P=zr;zr=Sa(h.stateNode.containerInfo),Ci(h,g,w),zr=P;break;case 22:h.memoizedState===null&&(P=h.alternate,P!==null&&P.memoizedState!==null?(P=ds,ds=16777216,Ci(h,g,w),ds=P):Ci(h,g,w));break;default:Ci(h,g,w)}}function Ed(h){var g=h.alternate;if(g!==null&&(h=g.child,h!==null)){g.child=null;do g=h.sibling,h.sibling=null,h=g;while(h!==null)}}function fs(h){var g=h.deletions;if((h.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var P=g[w];er=P,Sd(P,h)}Ed(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)_d(h),h=h.sibling}function _d(h){switch(h.tag){case 0:case 11:case 15:fs(h),h.flags&2048&&kn(9,h,h.return);break;case 3:fs(h);break;case 12:fs(h);break;case 22:var g=h.stateNode;h.memoizedState!==null&&g._visibility&2&&(h.return===null||h.return.tag!==13)?(g._visibility&=-3,ua(h)):fs(h);break;default:fs(h)}}function ua(h){var g=h.deletions;if((h.flags&16)!==0){if(g!==null)for(var w=0;w<g.length;w++){var P=g[w];er=P,Sd(P,h)}Ed(h)}for(h=h.child;h!==null;){switch(g=h,g.tag){case 0:case 11:case 15:kn(8,g,g.return),ua(g);break;case 22:w=g.stateNode,w._visibility&2&&(w._visibility&=-3,ua(g));break;default:ua(g)}h=h.sibling}}function Sd(h,g){for(;er!==null;){var w=er;switch(w.tag){case 0:case 11:case 15:kn(8,w,g);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var P=w.memoizedState.cachePool.pool;P!=null&&P.refCount++}break;case 24:Yi(w.memoizedState.cache)}if(P=w.child,P!==null)P.return=w,er=P;else e:for(w=h;er!==null;){P=er;var H=P.sibling,K=P.return;if(pd(P),P===w){er=null;break e}if(H!==null){H.return=K,er=H;break e}er=K}}}var Wh={getCacheForType:function(h){var g=ir(zt),w=g.data.get(h);return w===void 0&&(w=h(),g.data.set(h,w)),w},cacheSignal:function(){return ir(zt).controller.signal}},Yh=typeof WeakMap=="function"?WeakMap:Map,kt=0,Bt=null,yt=null,bt=0,jt=0,$r=null,Tn=!1,Ai=!1,dl=!1,mn=0,qt=0,jn=0,ni=0,fl=0,kr=0,$i=0,hs=null,vr=null,hl=!1,da=0,Rd=0,fa=1/0,ha=null,Nn=null,Yt=0,Mn=null,ki=null,gn=0,pl=0,ml=null,Cd=null,ps=0,gl=null;function Tr(){return(kt&2)!==0&&bt!==0?bt&-bt:N.T!==null?El():ft()}function Ad(){if(kr===0)if((bt&536870912)===0||_t){var h=We;We<<=1,(We&3932160)===0&&(We=262144),kr=h}else kr=536870912;return h=Cr.current,h!==null&&(h.flags|=32),kr}function br(h,g,w){(h===Bt&&(jt===2||jt===9)||h.cancelPendingCommit!==null)&&(Ti(h,0),In(h,bt,kr,!1)),Qe(h,w),((kt&2)===0||h!==Bt)&&(h===Bt&&((kt&2)===0&&(ni|=w),qt===4&&In(h,bt,kr,!1)),Xr(h))}function $d(h,g,w){if((kt&6)!==0)throw Error(r(327));var P=!w&&(g&127)===0&&(g&h.expiredLanes)===0||Xe(h,g),H=P?Qh(h,g):yl(h,g,!0),K=P;do{if(H===0){Ai&&!P&&In(h,g,0,!1);break}else{if(w=h.current.alternate,K&&!Jh(w)){H=yl(h,g,!1),K=!1;continue}if(H===2){if(K=g,h.errorRecoveryDisabledLanes&K)var ue=0;else ue=h.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){g=ue;e:{var ge=h;H=hs;var Se=ge.current.memoizedState.isDehydrated;if(Se&&(Ti(ge,ue).flags|=256),ue=yl(ge,ue,!1),ue!==2){if(dl&&!Se){ge.errorRecoveryDisabledLanes|=K,ni|=K,H=4;break e}K=vr,vr=H,K!==null&&(vr===null?vr=K:vr.push.apply(vr,K))}H=ue}if(K=!1,H!==2)continue}}if(H===1){Ti(h,0),In(h,g,0,!0);break}e:{switch(P=h,K=H,K){case 0:case 1:throw Error(r(345));case 4:if((g&4194048)!==g)break;case 6:In(P,g,kr,!Tn);break e;case 2:vr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((g&62914560)===g&&(H=da+300-ke(),10<H)){if(In(P,g,kr,!Tn),lt(P,0,!0)!==0)break e;gn=g,P.timeoutHandle=af(kd.bind(null,P,w,vr,ha,hl,g,kr,ni,$i,Tn,K,"Throttled",-0,0),H);break e}kd(P,w,vr,ha,hl,g,kr,ni,$i,Tn,K,null,-0,0)}}break}while(!0);Xr(h)}function kd(h,g,w,P,H,K,ue,ge,Se,Ne,qe,Ge,Ie,De){if(h.timeoutHandle=-1,Ge=g.subtreeFlags,Ge&8192||(Ge&16785408)===16785408){Ge={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zr},wd(g,K,Ge);var rt=(K&62914560)===K?da-ke():(K&4194048)===K?Rd-ke():0;if(rt=I0(Ge,rt),rt!==null){gn=K,h.cancelPendingCommit=rt(Od.bind(null,h,g,K,w,P,H,ue,ge,Se,qe,Ge,null,Ie,De)),In(h,K,ue,!Ne);return}}Od(h,g,K,w,P,H,ue,ge,Se)}function Jh(h){for(var g=h;;){var w=g.tag;if((w===0||w===11||w===15)&&g.flags&16384&&(w=g.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var P=0;P<w.length;P++){var H=w[P],K=H.getSnapshot;H=H.value;try{if(!Sr(K(),H))return!1}catch{return!1}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function In(h,g,w,P){g&=~fl,g&=~ni,h.suspendedLanes|=g,h.pingedLanes&=~g,P&&(h.warmLanes|=g),P=h.expirationTimes;for(var H=g;0<H;){var K=31-ve(H),ue=1<<K;P[K]=-1,H&=~ue}w!==0&&Ye(h,w,g)}function pa(){return(kt&6)===0?(ms(0),!1):!0}function xl(){if(yt!==null){if(jt===0)var h=yt.return;else h=yt,nn=Wn=null,Mo(h),bi=null,Xi=0,h=yt;for(;h!==null;)ad(h.alternate,h),h=h.return;yt=null}}function Ti(h,g){var w=h.timeoutHandle;w!==-1&&(h.timeoutHandle=-1,g0(w)),w=h.cancelPendingCommit,w!==null&&(h.cancelPendingCommit=null,w()),gn=0,xl(),Bt=h,yt=w=tn(h.current,null),bt=g,jt=0,$r=null,Tn=!1,Ai=Xe(h,g),dl=!1,$i=kr=fl=ni=jn=qt=0,vr=hs=null,hl=!1,(g&8)!==0&&(g|=g&32);var P=h.entangledLanes;if(P!==0)for(h=h.entanglements,P&=g;0<P;){var H=31-ve(P),K=1<<H;g|=h[H],P&=~K}return mn=g,Ps(),w}function Td(h,g){mt=null,N.H=ss,g===vi||g===Hs?(g=Gc(),jt=3):g===wo?(g=Gc(),jt=4):jt=g===Yo?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,$r=g,yt===null&&(qt=1,na(h,Br(g,h.current)))}function jd(){var h=Cr.current;return h===null?!0:(bt&4194048)===bt?Fr===null:(bt&62914560)===bt||(bt&536870912)!==0?h===Fr:!1}function Nd(){var h=N.H;return N.H=ss,h===null?ss:h}function Md(){var h=N.A;return N.A=Wh,h}function ma(){qt=4,Tn||(bt&4194048)!==bt&&Cr.current!==null||(Ai=!0),(jn&134217727)===0&&(ni&134217727)===0||Bt===null||In(Bt,bt,kr,!1)}function yl(h,g,w){var P=kt;kt|=2;var H=Nd(),K=Md();(Bt!==h||bt!==g)&&(ha=null,Ti(h,g)),g=!1;var ue=qt;e:do try{if(jt!==0&&yt!==null){var ge=yt,Se=$r;switch(jt){case 8:xl(),ue=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(g=!0);var Ne=jt;if(jt=0,$r=null,ji(h,ge,Se,Ne),w&&Ai){ue=0;break e}break;default:Ne=jt,jt=0,$r=null,ji(h,ge,Se,Ne)}}Xh(),ue=qt;break}catch(qe){Td(h,qe)}while(!0);return g&&h.shellSuspendCounter++,nn=Wn=null,kt=P,N.H=H,N.A=K,yt===null&&(Bt=null,bt=0,Ps()),ue}function Xh(){for(;yt!==null;)Id(yt)}function Qh(h,g){var w=kt;kt|=2;var P=Nd(),H=Md();Bt!==h||bt!==g?(ha=null,fa=ke()+500,Ti(h,g)):Ai=Xe(h,g);e:do try{if(jt!==0&&yt!==null){g=yt;var K=$r;t:switch(jt){case 1:jt=0,$r=null,ji(h,g,K,1);break;case 2:case 9:if(Hc(K)){jt=0,$r=null,Pd(g);break}g=function(){jt!==2&&jt!==9||Bt!==h||(jt=7),Xr(h)},K.then(g,g);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:Hc(K)?(jt=0,$r=null,Pd(g)):(jt=0,$r=null,ji(h,g,K,7));break;case 5:var ue=null;switch(yt.tag){case 26:ue=yt.memoizedState;case 5:case 27:var ge=yt;if(ue?wf(ue):ge.stateNode.complete){jt=0,$r=null;var Se=ge.sibling;if(Se!==null)yt=Se;else{var Ne=ge.return;Ne!==null?(yt=Ne,ga(Ne)):yt=null}break t}}jt=0,$r=null,ji(h,g,K,5);break;case 6:jt=0,$r=null,ji(h,g,K,6);break;case 8:xl(),qt=6;break e;default:throw Error(r(462))}}Zh();break}catch(qe){Td(h,qe)}while(!0);return nn=Wn=null,N.H=P,N.A=H,kt=w,yt!==null?0:(Bt=null,bt=0,Ps(),qt)}function Zh(){for(;yt!==null&&!Re();)Id(yt)}function Id(h){var g=nd(h.alternate,h,mn);h.memoizedProps=h.pendingProps,g===null?ga(h):yt=g}function Pd(h){var g=h,w=g.alternate;switch(g.tag){case 15:case 0:g=Xu(w,g,g.pendingProps,g.type,void 0,bt);break;case 11:g=Xu(w,g,g.pendingProps,g.type.render,g.ref,bt);break;case 5:Mo(g);default:ad(w,g),g=yt=Nc(g,mn),g=nd(w,g,mn)}h.memoizedProps=h.pendingProps,g===null?ga(h):yt=g}function ji(h,g,w,P){nn=Wn=null,Mo(g),bi=null,Xi=0;var H=g.return;try{if(qh(h,H,g,w,bt)){qt=1,na(h,Br(w,h.current)),yt=null;return}}catch(K){if(H!==null)throw yt=H,K;qt=1,na(h,Br(w,h.current)),yt=null;return}g.flags&32768?(_t||P===1?h=!0:Ai||(bt&536870912)!==0?h=!1:(Tn=h=!0,(P===2||P===9||P===3||P===6)&&(P=Cr.current,P!==null&&P.tag===13&&(P.flags|=16384))),Bd(g,h)):ga(g)}function ga(h){var g=h;do{if((g.flags&32768)!==0){Bd(g,Tn);return}h=g.return;var w=zh(g.alternate,g,mn);if(w!==null){yt=w;return}if(g=g.sibling,g!==null){yt=g;return}yt=g=h}while(g!==null);qt===0&&(qt=5)}function Bd(h,g){do{var w=Gh(h.alternate,h);if(w!==null){w.flags&=32767,yt=w;return}if(w=h.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!g&&(h=h.sibling,h!==null)){yt=h;return}yt=h=w}while(h!==null);qt=6,yt=null}function Od(h,g,w,P,H,K,ue,ge,Se){h.cancelPendingCommit=null;do xa();while(Yt!==0);if((kt&6)!==0)throw Error(r(327));if(g!==null){if(g===h.current)throw Error(r(177));if(K=g.lanes|g.childLanes,K|=so,Ze(h,w,K,ue,ge,Se),h===Bt&&(yt=Bt=null,bt=0),ki=g,Mn=h,gn=w,pl=K,ml=H,Cd=P,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,n0(Be,function(){return Ud(),null})):(h.callbackNode=null,h.callbackPriority=0),P=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||P){P=N.T,N.T=null,H=R.p,R.p=2,ue=kt,kt|=4;try{Vh(h,g,w)}finally{kt=ue,R.p=H,N.T=P}}Yt=1,Dd(),Ld(),Fd()}}function Dd(){if(Yt===1){Yt=0;var h=Mn,g=ki,w=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||w){w=N.T,N.T=null;var P=R.p;R.p=2;var H=kt;kt|=4;try{yd(g,h);var K=Tl,ue=_c(h.containerInfo),ge=K.focusedElem,Se=K.selectionRange;if(ue!==ge&&ge&&ge.ownerDocument&&Ec(ge.ownerDocument.documentElement,ge)){if(Se!==null&&eo(ge)){var Ne=Se.start,qe=Se.end;if(qe===void 0&&(qe=Ne),"selectionStart"in ge)ge.selectionStart=Ne,ge.selectionEnd=Math.min(qe,ge.value.length);else{var Ge=ge.ownerDocument||document,Ie=Ge&&Ge.defaultView||window;if(Ie.getSelection){var De=Ie.getSelection(),rt=ge.textContent.length,ut=Math.min(Se.start,rt),Pt=Se.end===void 0?ut:Math.min(Se.end,rt);!De.extend&&ut>Pt&&(ue=Pt,Pt=ut,ut=ue);var $e=wc(ge,ut),Ce=wc(ge,Pt);if($e&&Ce&&(De.rangeCount!==1||De.anchorNode!==$e.node||De.anchorOffset!==$e.offset||De.focusNode!==Ce.node||De.focusOffset!==Ce.offset)){var je=Ge.createRange();je.setStart($e.node,$e.offset),De.removeAllRanges(),ut>Pt?(De.addRange(je),De.extend(Ce.node,Ce.offset)):(je.setEnd(Ce.node,Ce.offset),De.addRange(je))}}}}for(Ge=[],De=ge;De=De.parentNode;)De.nodeType===1&&Ge.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof ge.focus=="function"&&ge.focus(),ge=0;ge<Ge.length;ge++){var He=Ge[ge];He.element.scrollLeft=He.left,He.element.scrollTop=He.top}}Ta=!!kl,Tl=kl=null}finally{kt=H,R.p=P,N.T=w}}h.current=g,Yt=2}}function Ld(){if(Yt===2){Yt=0;var h=Mn,g=ki,w=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||w){w=N.T,N.T=null;var P=R.p;R.p=2;var H=kt;kt|=4;try{hd(h,g.alternate,g)}finally{kt=H,R.p=P,N.T=w}}Yt=3}}function Fd(){if(Yt===4||Yt===3){Yt=0,Me();var h=Mn,g=ki,w=gn,P=Cd;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Yt=5:(Yt=0,ki=Mn=null,qd(h,h.pendingLanes));var H=h.pendingLanes;if(H===0&&(Nn=null),Ct(w),g=g.stateNode,Ee&&typeof Ee.onCommitFiberRoot=="function")try{Ee.onCommitFiberRoot(me,g,void 0,(g.current.flags&128)===128)}catch{}if(P!==null){g=N.T,H=R.p,R.p=2,N.T=null;try{for(var K=h.onRecoverableError,ue=0;ue<P.length;ue++){var ge=P[ue];K(ge.value,{componentStack:ge.stack})}}finally{N.T=g,R.p=H}}(gn&3)!==0&&xa(),Xr(h),H=h.pendingLanes,(w&261930)!==0&&(H&42)!==0?h===gl?ps++:(ps=0,gl=h):ps=0,ms(0)}}function qd(h,g){(h.pooledCacheLanes&=g)===0&&(g=h.pooledCache,g!=null&&(h.pooledCache=null,Yi(g)))}function xa(){return Dd(),Ld(),Fd(),Ud()}function Ud(){if(Yt!==5)return!1;var h=Mn,g=pl;pl=0;var w=Ct(gn),P=N.T,H=R.p;try{R.p=32>w?32:w,N.T=null,w=ml,ml=null;var K=Mn,ue=gn;if(Yt=0,ki=Mn=null,gn=0,(kt&6)!==0)throw Error(r(331));var ge=kt;if(kt|=4,_d(K.current),bd(K,K.current,ue,w),kt=ge,ms(0,!1),Ee&&typeof Ee.onPostCommitFiberRoot=="function")try{Ee.onPostCommitFiberRoot(me,K)}catch{}return!0}finally{R.p=H,N.T=P,qd(h,g)}}function Hd(h,g,w){g=Br(w,g),g=Wo(h.stateNode,g,2),h=Cn(h,g,2),h!==null&&(Qe(h,2),Xr(h))}function Nt(h,g,w){if(h.tag===3)Hd(h,h,w);else for(;g!==null;){if(g.tag===3){Hd(g,h,w);break}else if(g.tag===1){var P=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(Nn===null||!Nn.has(P))){h=Br(w,h),w=Hu(2),P=Cn(g,w,2),P!==null&&(zu(w,P,g,h),Qe(P,2),Xr(P));break}}g=g.return}}function vl(h,g,w){var P=h.pingCache;if(P===null){P=h.pingCache=new Yh;var H=new Set;P.set(g,H)}else H=P.get(g),H===void 0&&(H=new Set,P.set(g,H));H.has(w)||(dl=!0,H.add(w),h=e0.bind(null,h,g,w),g.then(h,h))}function e0(h,g,w){var P=h.pingCache;P!==null&&P.delete(g),h.pingedLanes|=h.suspendedLanes&w,h.warmLanes&=~w,Bt===h&&(bt&w)===w&&(qt===4||qt===3&&(bt&62914560)===bt&&300>ke()-da?(kt&2)===0&&Ti(h,0):fl|=w,$i===bt&&($i=0)),Xr(h)}function zd(h,g){g===0&&(g=ct()),h=Gn(h,g),h!==null&&(Qe(h,g),Xr(h))}function t0(h){var g=h.memoizedState,w=0;g!==null&&(w=g.retryLane),zd(h,w)}function r0(h,g){var w=0;switch(h.tag){case 31:case 13:var P=h.stateNode,H=h.memoizedState;H!==null&&(w=H.retryLane);break;case 19:P=h.stateNode;break;case 22:P=h.stateNode._retryCache;break;default:throw Error(r(314))}P!==null&&P.delete(g),zd(h,w)}function n0(h,g){return ye(h,g)}var ya=null,Ni=null,bl=!1,va=!1,wl=!1,Pn=0;function Xr(h){h!==Ni&&h.next===null&&(Ni===null?ya=Ni=h:Ni=Ni.next=h),va=!0,bl||(bl=!0,s0())}function ms(h,g){if(!wl&&va){wl=!0;do for(var w=!1,P=ya;P!==null;){if(h!==0){var H=P.pendingLanes;if(H===0)var K=0;else{var ue=P.suspendedLanes,ge=P.pingedLanes;K=(1<<31-ve(42|h)+1)-1,K&=H&~(ue&~ge),K=K&201326741?K&201326741|1:K?K|2:0}K!==0&&(w=!0,Wd(P,K))}else K=bt,K=lt(P,P===Bt?K:0,P.cancelPendingCommit!==null||P.timeoutHandle!==-1),(K&3)===0||Xe(P,K)||(w=!0,Wd(P,K));P=P.next}while(w);wl=!1}}function i0(){Gd()}function Gd(){va=bl=!1;var h=0;Pn!==0&&m0()&&(h=Pn);for(var g=ke(),w=null,P=ya;P!==null;){var H=P.next,K=Vd(P,g);K===0?(P.next=null,w===null?ya=H:w.next=H,H===null&&(Ni=w)):(w=P,(h!==0||(K&3)!==0)&&(va=!0)),P=H}Yt!==0&&Yt!==5||ms(h),Pn!==0&&(Pn=0)}function Vd(h,g){for(var w=h.suspendedLanes,P=h.pingedLanes,H=h.expirationTimes,K=h.pendingLanes&-62914561;0<K;){var ue=31-ve(K),ge=1<<ue,Se=H[ue];Se===-1?((ge&w)===0||(ge&P)!==0)&&(H[ue]=St(ge,g)):Se<=g&&(h.expiredLanes|=ge),K&=~ge}if(g=Bt,w=bt,w=lt(h,h===g?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),P=h.callbackNode,w===0||h===g&&(jt===2||jt===9)||h.cancelPendingCommit!==null)return P!==null&&P!==null&&we(P),h.callbackNode=null,h.callbackPriority=0;if((w&3)===0||Xe(h,w)){if(g=w&-w,g===h.callbackPriority)return g;switch(P!==null&&we(P),Ct(w)){case 2:case 8:w=Te;break;case 32:w=Be;break;case 268435456:w=de;break;default:w=Be}return P=Kd.bind(null,h),w=ye(w,P),h.callbackPriority=g,h.callbackNode=w,g}return P!==null&&P!==null&&we(P),h.callbackPriority=2,h.callbackNode=null,2}function Kd(h,g){if(Yt!==0&&Yt!==5)return h.callbackNode=null,h.callbackPriority=0,null;var w=h.callbackNode;if(xa()&&h.callbackNode!==w)return null;var P=bt;return P=lt(h,h===Bt?P:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),P===0?null:($d(h,P,g),Vd(h,ke()),h.callbackNode!=null&&h.callbackNode===w?Kd.bind(null,h):null)}function Wd(h,g){if(xa())return null;$d(h,g,!0)}function s0(){x0(function(){(kt&6)!==0?ye(Fe,i0):Gd()})}function El(){if(Pn===0){var h=xi;h===0&&(h=Ke,Ke<<=1,(Ke&261888)===0&&(Ke=256)),Pn=h}return Pn}function Yd(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:As(""+h)}function Jd(h,g){var w=g.ownerDocument.createElement("input");return w.name=g.name,w.value=g.value,h.id&&w.setAttribute("form",h.id),g.parentNode.insertBefore(w,g),h=new FormData(h),w.parentNode.removeChild(w),h}function a0(h,g,w,P,H){if(g==="submit"&&w&&w.stateNode===H){var K=Yd((H[Je]||null).action),ue=P.submitter;ue&&(g=(g=ue[Je]||null)?Yd(g.formAction):ue.getAttribute("formAction"),g!==null&&(K=g,ue=null));var ge=new js("action","action",null,P,H);h.push({event:ge,listeners:[{instance:null,listener:function(){if(P.defaultPrevented){if(Pn!==0){var Se=ue?Jd(H,ue):new FormData(H);Uo(w,{pending:!0,data:Se,method:H.method,action:K},null,Se)}}else typeof K=="function"&&(ge.preventDefault(),Se=ue?Jd(H,ue):new FormData(H),Uo(w,{pending:!0,data:Se,method:H.method,action:K},K,Se))},currentTarget:H}]})}}for(var _l=0;_l<io.length;_l++){var Sl=io[_l],o0=Sl.toLowerCase(),l0=Sl[0].toUpperCase()+Sl.slice(1);Hr(o0,"on"+l0)}Hr(Cc,"onAnimationEnd"),Hr(Ac,"onAnimationIteration"),Hr($c,"onAnimationStart"),Hr("dblclick","onDoubleClick"),Hr("focusin","onFocus"),Hr("focusout","onBlur"),Hr(Sh,"onTransitionRun"),Hr(Rh,"onTransitionStart"),Hr(Ch,"onTransitionCancel"),Hr(kc,"onTransitionEnd"),Zt("onMouseEnter",["mouseout","mouseover"]),Zt("onMouseLeave",["mouseout","mouseover"]),Zt("onPointerEnter",["pointerout","pointerover"]),Zt("onPointerLeave",["pointerout","pointerover"]),Wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gs));function Xd(h,g){g=(g&4)!==0;for(var w=0;w<h.length;w++){var P=h[w],H=P.event;P=P.listeners;e:{var K=void 0;if(g)for(var ue=P.length-1;0<=ue;ue--){var ge=P[ue],Se=ge.instance,Ne=ge.currentTarget;if(ge=ge.listener,Se!==K&&H.isPropagationStopped())break e;K=ge,H.currentTarget=Ne;try{K(H)}catch(qe){Is(qe)}H.currentTarget=null,K=Se}else for(ue=0;ue<P.length;ue++){if(ge=P[ue],Se=ge.instance,Ne=ge.currentTarget,ge=ge.listener,Se!==K&&H.isPropagationStopped())break e;K=ge,H.currentTarget=Ne;try{K(H)}catch(qe){Is(qe)}H.currentTarget=null,K=Se}}}}function vt(h,g){var w=g[dt];w===void 0&&(w=g[dt]=new Set);var P=h+"__bubble";w.has(P)||(Qd(g,h,2,!1),w.add(P))}function Rl(h,g,w){var P=0;g&&(P|=4),Qd(w,h,P,g)}var ba="_reactListening"+Math.random().toString(36).slice(2);function Cl(h){if(!h[ba]){h[ba]=!0,ur.forEach(function(w){w!=="selectionchange"&&(c0.has(w)||Rl(w,!1,h),Rl(w,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[ba]||(g[ba]=!0,Rl("selectionchange",!1,g))}}function Qd(h,g,w,P){switch($f(g)){case 2:var H=O0;break;case 8:H=D0;break;default:H=ql}w=H.bind(null,g,w,h),H=void 0,!Ga||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(H=!0),P?H!==void 0?h.addEventListener(g,w,{capture:!0,passive:H}):h.addEventListener(g,w,!0):H!==void 0?h.addEventListener(g,w,{passive:H}):h.addEventListener(g,w,!1)}function Al(h,g,w,P,H){var K=P;if((g&1)===0&&(g&2)===0&&P!==null)e:for(;;){if(P===null)return;var ue=P.tag;if(ue===3||ue===4){var ge=P.stateNode.containerInfo;if(ge===H)break;if(ue===4)for(ue=P.return;ue!==null;){var Se=ue.tag;if((Se===3||Se===4)&&ue.stateNode.containerInfo===H)return;ue=ue.return}for(;ge!==null;){if(ue=Jt(ge),ue===null)return;if(Se=ue.tag,Se===5||Se===6||Se===26||Se===27){P=K=ue;continue e}ge=ge.parentNode}}P=P.return}rc(function(){var Ne=K,qe=Ha(w),Ge=[];e:{var Ie=Tc.get(h);if(Ie!==void 0){var De=js,rt=h;switch(h){case"keypress":if(ks(w)===0)break e;case"keydown":case"keyup":De=eh;break;case"focusin":rt="focus",De=Ya;break;case"focusout":rt="blur",De=Ya;break;case"beforeblur":case"afterblur":De=Ya;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=sc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Uf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=nh;break;case Cc:case Ac:case $c:De=Gf;break;case kc:De=sh;break;case"scroll":case"scrollend":De=Ff;break;case"wheel":De=oh;break;case"copy":case"cut":case"paste":De=Kf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=oc;break;case"toggle":case"beforetoggle":De=ch}var ut=(g&4)!==0,Pt=!ut&&(h==="scroll"||h==="scrollend"),$e=ut?Ie!==null?Ie+"Capture":null:Ie;ut=[];for(var Ce=Ne,je;Ce!==null;){var He=Ce;if(je=He.stateNode,He=He.tag,He!==5&&He!==26&&He!==27||je===null||$e===null||(He=Di(Ce,$e),He!=null&&ut.push(xs(Ce,He,je))),Pt)break;Ce=Ce.return}0<ut.length&&(Ie=new De(Ie,rt,null,w,qe),Ge.push({event:Ie,listeners:ut}))}}if((g&7)===0){e:{if(Ie=h==="mouseover"||h==="pointerover",De=h==="mouseout"||h==="pointerout",Ie&&w!==Ua&&(rt=w.relatedTarget||w.fromElement)&&(Jt(rt)||rt[Rt]))break e;if((De||Ie)&&(Ie=qe.window===qe?qe:(Ie=qe.ownerDocument)?Ie.defaultView||Ie.parentWindow:window,De?(rt=w.relatedTarget||w.toElement,De=Ne,rt=rt?Jt(rt):null,rt!==null&&(Pt=o(rt),ut=rt.tag,rt!==Pt||ut!==5&&ut!==27&&ut!==6)&&(rt=null)):(De=null,rt=Ne),De!==rt)){if(ut=sc,He="onMouseLeave",$e="onMouseEnter",Ce="mouse",(h==="pointerout"||h==="pointerover")&&(ut=oc,He="onPointerLeave",$e="onPointerEnter",Ce="pointer"),Pt=De==null?Ie:rr(De),je=rt==null?Ie:rr(rt),Ie=new ut(He,Ce+"leave",De,w,qe),Ie.target=Pt,Ie.relatedTarget=je,He=null,Jt(qe)===Ne&&(ut=new ut($e,Ce+"enter",rt,w,qe),ut.target=je,ut.relatedTarget=Pt,He=ut),Pt=He,De&&rt)t:{for(ut=u0,$e=De,Ce=rt,je=0,He=$e;He;He=ut(He))je++;He=0;for(var ot=Ce;ot;ot=ut(ot))He++;for(;0<je-He;)$e=ut($e),je--;for(;0<He-je;)Ce=ut(Ce),He--;for(;je--;){if($e===Ce||Ce!==null&&$e===Ce.alternate){ut=$e;break t}$e=ut($e),Ce=ut(Ce)}ut=null}else ut=null;De!==null&&Zd(Ge,Ie,De,ut,!1),rt!==null&&Pt!==null&&Zd(Ge,Pt,rt,ut,!0)}}e:{if(Ie=Ne?rr(Ne):window,De=Ie.nodeName&&Ie.nodeName.toLowerCase(),De==="select"||De==="input"&&Ie.type==="file")var At=mc;else if(hc(Ie))if(gc)At=wh;else{At=yh;var st=xh}else De=Ie.nodeName,!De||De.toLowerCase()!=="input"||Ie.type!=="checkbox"&&Ie.type!=="radio"?Ne&&qa(Ne.elementType)&&(At=mc):At=bh;if(At&&(At=At(h,Ne))){pc(Ge,At,w,qe);break e}st&&st(h,Ie,Ne),h==="focusout"&&Ne&&Ie.type==="number"&&Ne.memoizedProps.value!=null&&Fa(Ie,"number",Ie.value)}switch(st=Ne?rr(Ne):window,h){case"focusin":(hc(st)||st.contentEditable==="true")&&(ci=st,to=Ne,Vi=null);break;case"focusout":Vi=to=ci=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,Sc(Ge,w,qe);break;case"selectionchange":if(_h)break;case"keydown":case"keyup":Sc(Ge,w,qe)}var gt;if(Xa)e:{switch(h){case"compositionstart":var wt="onCompositionStart";break e;case"compositionend":wt="onCompositionEnd";break e;case"compositionupdate":wt="onCompositionUpdate";break e}wt=void 0}else li?dc(h,w)&&(wt="onCompositionEnd"):h==="keydown"&&w.keyCode===229&&(wt="onCompositionStart");wt&&(lc&&w.locale!=="ko"&&(li||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&li&&(gt=nc()):(yn=qe,Va="value"in yn?yn.value:yn.textContent,li=!0)),st=wa(Ne,wt),0<st.length&&(wt=new ac(wt,h,null,w,qe),Ge.push({event:wt,listeners:st}),gt?wt.data=gt:(gt=fc(w),gt!==null&&(wt.data=gt)))),(gt=fh?hh(h,w):ph(h,w))&&(wt=wa(Ne,"onBeforeInput"),0<wt.length&&(st=new ac("onBeforeInput","beforeinput",null,w,qe),Ge.push({event:st,listeners:wt}),st.data=gt)),a0(Ge,h,Ne,w,qe)}Xd(Ge,g)})}function xs(h,g,w){return{instance:h,listener:g,currentTarget:w}}function wa(h,g){for(var w=g+"Capture",P=[];h!==null;){var H=h,K=H.stateNode;if(H=H.tag,H!==5&&H!==26&&H!==27||K===null||(H=Di(h,w),H!=null&&P.unshift(xs(h,H,K)),H=Di(h,g),H!=null&&P.push(xs(h,H,K))),h.tag===3)return P;h=h.return}return[]}function u0(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function Zd(h,g,w,P,H){for(var K=g._reactName,ue=[];w!==null&&w!==P;){var ge=w,Se=ge.alternate,Ne=ge.stateNode;if(ge=ge.tag,Se!==null&&Se===P)break;ge!==5&&ge!==26&&ge!==27||Ne===null||(Se=Ne,H?(Ne=Di(w,K),Ne!=null&&ue.unshift(xs(w,Ne,Se))):H||(Ne=Di(w,K),Ne!=null&&ue.push(xs(w,Ne,Se)))),w=w.return}ue.length!==0&&h.push({event:g,listeners:ue})}var d0=/\r\n?/g,f0=/\u0000|\uFFFD/g;function ef(h){return(typeof h=="string"?h:""+h).replace(d0,`
`).replace(f0,"")}function tf(h,g){return g=ef(g),ef(h)===g}function It(h,g,w,P,H,K){switch(w){case"children":typeof P=="string"?g==="body"||g==="textarea"&&P===""||si(h,P):(typeof P=="number"||typeof P=="bigint")&&g!=="body"&&si(h,""+P);break;case"className":Nr(h,"class",P);break;case"tabIndex":Nr(h,"tabindex",P);break;case"dir":case"role":case"viewBox":case"width":case"height":Nr(h,w,P);break;case"style":Zl(h,P,K);break;case"data":if(g!=="object"){Nr(h,"data",P);break}case"src":case"href":if(P===""&&(g!=="a"||w!=="href")){h.removeAttribute(w);break}if(P==null||typeof P=="function"||typeof P=="symbol"||typeof P=="boolean"){h.removeAttribute(w);break}P=As(""+P),h.setAttribute(w,P);break;case"action":case"formAction":if(typeof P=="function"){h.setAttribute(w,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof K=="function"&&(w==="formAction"?(g!=="input"&&It(h,g,"name",H.name,H,null),It(h,g,"formEncType",H.formEncType,H,null),It(h,g,"formMethod",H.formMethod,H,null),It(h,g,"formTarget",H.formTarget,H,null)):(It(h,g,"encType",H.encType,H,null),It(h,g,"method",H.method,H,null),It(h,g,"target",H.target,H,null)));if(P==null||typeof P=="symbol"||typeof P=="boolean"){h.removeAttribute(w);break}P=As(""+P),h.setAttribute(w,P);break;case"onClick":P!=null&&(h.onclick=Zr);break;case"onScroll":P!=null&&vt("scroll",h);break;case"onScrollEnd":P!=null&&vt("scrollend",h);break;case"dangerouslySetInnerHTML":if(P!=null){if(typeof P!="object"||!("__html"in P))throw Error(r(61));if(w=P.__html,w!=null){if(H.children!=null)throw Error(r(60));h.innerHTML=w}}break;case"multiple":h.multiple=P&&typeof P!="function"&&typeof P!="symbol";break;case"muted":h.muted=P&&typeof P!="function"&&typeof P!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(P==null||typeof P=="function"||typeof P=="boolean"||typeof P=="symbol"){h.removeAttribute("xlink:href");break}w=As(""+P),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":P!=null&&typeof P!="function"&&typeof P!="symbol"?h.setAttribute(w,""+P):h.removeAttribute(w);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":P&&typeof P!="function"&&typeof P!="symbol"?h.setAttribute(w,""):h.removeAttribute(w);break;case"capture":case"download":P===!0?h.setAttribute(w,""):P!==!1&&P!=null&&typeof P!="function"&&typeof P!="symbol"?h.setAttribute(w,P):h.removeAttribute(w);break;case"cols":case"rows":case"size":case"span":P!=null&&typeof P!="function"&&typeof P!="symbol"&&!isNaN(P)&&1<=P?h.setAttribute(w,P):h.removeAttribute(w);break;case"rowSpan":case"start":P==null||typeof P=="function"||typeof P=="symbol"||isNaN(P)?h.removeAttribute(w):h.setAttribute(w,P);break;case"popover":vt("beforetoggle",h),vt("toggle",h),jr(h,"popover",P);break;case"xlinkActuate":Qr(h,"http://www.w3.org/1999/xlink","xlink:actuate",P);break;case"xlinkArcrole":Qr(h,"http://www.w3.org/1999/xlink","xlink:arcrole",P);break;case"xlinkRole":Qr(h,"http://www.w3.org/1999/xlink","xlink:role",P);break;case"xlinkShow":Qr(h,"http://www.w3.org/1999/xlink","xlink:show",P);break;case"xlinkTitle":Qr(h,"http://www.w3.org/1999/xlink","xlink:title",P);break;case"xlinkType":Qr(h,"http://www.w3.org/1999/xlink","xlink:type",P);break;case"xmlBase":Qr(h,"http://www.w3.org/XML/1998/namespace","xml:base",P);break;case"xmlLang":Qr(h,"http://www.w3.org/XML/1998/namespace","xml:lang",P);break;case"xmlSpace":Qr(h,"http://www.w3.org/XML/1998/namespace","xml:space",P);break;case"is":jr(h,"is",P);break;case"innerText":case"textContent":break;default:(!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(w=Df.get(w)||w,jr(h,w,P))}}function $l(h,g,w,P,H,K){switch(w){case"style":Zl(h,P,K);break;case"dangerouslySetInnerHTML":if(P!=null){if(typeof P!="object"||!("__html"in P))throw Error(r(61));if(w=P.__html,w!=null){if(H.children!=null)throw Error(r(60));h.innerHTML=w}}break;case"children":typeof P=="string"?si(h,P):(typeof P=="number"||typeof P=="bigint")&&si(h,""+P);break;case"onScroll":P!=null&&vt("scroll",h);break;case"onScrollEnd":P!=null&&vt("scrollend",h);break;case"onClick":P!=null&&(h.onclick=Zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dr.hasOwnProperty(w))e:{if(w[0]==="o"&&w[1]==="n"&&(H=w.endsWith("Capture"),g=w.slice(2,H?w.length-7:void 0),K=h[Je]||null,K=K!=null?K[w]:null,typeof K=="function"&&h.removeEventListener(g,K,H),typeof P=="function")){typeof K!="function"&&K!==null&&(w in h?h[w]=null:h.hasAttribute(w)&&h.removeAttribute(w)),h.addEventListener(g,P,H);break e}w in h?h[w]=P:P===!0?h.setAttribute(w,""):jr(h,w,P)}}}function ar(h,g,w){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vt("error",h),vt("load",h);var P=!1,H=!1,K;for(K in w)if(w.hasOwnProperty(K)){var ue=w[K];if(ue!=null)switch(K){case"src":P=!0;break;case"srcSet":H=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:It(h,g,K,ue,w,null)}}H&&It(h,g,"srcSet",w.srcSet,w,null),P&&It(h,g,"src",w.src,w,null);return;case"input":vt("invalid",h);var ge=K=ue=H=null,Se=null,Ne=null;for(P in w)if(w.hasOwnProperty(P)){var qe=w[P];if(qe!=null)switch(P){case"name":H=qe;break;case"type":ue=qe;break;case"checked":Se=qe;break;case"defaultChecked":Ne=qe;break;case"value":K=qe;break;case"defaultValue":ge=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(r(137,g));break;default:It(h,g,P,qe,w,null)}}Yl(h,K,ge,Se,Ne,ue,H,!1);return;case"select":vt("invalid",h),P=ue=K=null;for(H in w)if(w.hasOwnProperty(H)&&(ge=w[H],ge!=null))switch(H){case"value":K=ge;break;case"defaultValue":ue=ge;break;case"multiple":P=ge;default:It(h,g,H,ge,w,null)}g=K,w=ue,h.multiple=!!P,g!=null?ii(h,!!P,g,!1):w!=null&&ii(h,!!P,w,!0);return;case"textarea":vt("invalid",h),K=H=P=null;for(ue in w)if(w.hasOwnProperty(ue)&&(ge=w[ue],ge!=null))switch(ue){case"value":P=ge;break;case"defaultValue":H=ge;break;case"children":K=ge;break;case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(91));break;default:It(h,g,ue,ge,w,null)}Xl(h,P,H,K);return;case"option":for(Se in w)w.hasOwnProperty(Se)&&(P=w[Se],P!=null)&&(Se==="selected"?h.selected=P&&typeof P!="function"&&typeof P!="symbol":It(h,g,Se,P,w,null));return;case"dialog":vt("beforetoggle",h),vt("toggle",h),vt("cancel",h),vt("close",h);break;case"iframe":case"object":vt("load",h);break;case"video":case"audio":for(P=0;P<gs.length;P++)vt(gs[P],h);break;case"image":vt("error",h),vt("load",h);break;case"details":vt("toggle",h);break;case"embed":case"source":case"link":vt("error",h),vt("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in w)if(w.hasOwnProperty(Ne)&&(P=w[Ne],P!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,g));default:It(h,g,Ne,P,w,null)}return;default:if(qa(g)){for(qe in w)w.hasOwnProperty(qe)&&(P=w[qe],P!==void 0&&$l(h,g,qe,P,w,void 0));return}}for(ge in w)w.hasOwnProperty(ge)&&(P=w[ge],P!=null&&It(h,g,ge,P,w,null))}function h0(h,g,w,P){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var H=null,K=null,ue=null,ge=null,Se=null,Ne=null,qe=null;for(De in w){var Ge=w[De];if(w.hasOwnProperty(De)&&Ge!=null)switch(De){case"checked":break;case"value":break;case"defaultValue":Se=Ge;default:P.hasOwnProperty(De)||It(h,g,De,null,P,Ge)}}for(var Ie in P){var De=P[Ie];if(Ge=w[Ie],P.hasOwnProperty(Ie)&&(De!=null||Ge!=null))switch(Ie){case"type":K=De;break;case"name":H=De;break;case"checked":Ne=De;break;case"defaultChecked":qe=De;break;case"value":ue=De;break;case"defaultValue":ge=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,g));break;default:De!==Ge&&It(h,g,Ie,De,P,Ge)}}La(h,ue,ge,Se,Ne,qe,K,H);return;case"select":De=ue=ge=Ie=null;for(K in w)if(Se=w[K],w.hasOwnProperty(K)&&Se!=null)switch(K){case"value":break;case"multiple":De=Se;default:P.hasOwnProperty(K)||It(h,g,K,null,P,Se)}for(H in P)if(K=P[H],Se=w[H],P.hasOwnProperty(H)&&(K!=null||Se!=null))switch(H){case"value":Ie=K;break;case"defaultValue":ge=K;break;case"multiple":ue=K;default:K!==Se&&It(h,g,H,K,P,Se)}g=ge,w=ue,P=De,Ie!=null?ii(h,!!w,Ie,!1):!!P!=!!w&&(g!=null?ii(h,!!w,g,!0):ii(h,!!w,w?[]:"",!1));return;case"textarea":De=Ie=null;for(ge in w)if(H=w[ge],w.hasOwnProperty(ge)&&H!=null&&!P.hasOwnProperty(ge))switch(ge){case"value":break;case"children":break;default:It(h,g,ge,null,P,H)}for(ue in P)if(H=P[ue],K=w[ue],P.hasOwnProperty(ue)&&(H!=null||K!=null))switch(ue){case"value":Ie=H;break;case"defaultValue":De=H;break;case"children":break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(91));break;default:H!==K&&It(h,g,ue,H,P,K)}Jl(h,Ie,De);return;case"option":for(var rt in w)Ie=w[rt],w.hasOwnProperty(rt)&&Ie!=null&&!P.hasOwnProperty(rt)&&(rt==="selected"?h.selected=!1:It(h,g,rt,null,P,Ie));for(Se in P)Ie=P[Se],De=w[Se],P.hasOwnProperty(Se)&&Ie!==De&&(Ie!=null||De!=null)&&(Se==="selected"?h.selected=Ie&&typeof Ie!="function"&&typeof Ie!="symbol":It(h,g,Se,Ie,P,De));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ut in w)Ie=w[ut],w.hasOwnProperty(ut)&&Ie!=null&&!P.hasOwnProperty(ut)&&It(h,g,ut,null,P,Ie);for(Ne in P)if(Ie=P[Ne],De=w[Ne],P.hasOwnProperty(Ne)&&Ie!==De&&(Ie!=null||De!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(r(137,g));break;default:It(h,g,Ne,Ie,P,De)}return;default:if(qa(g)){for(var Pt in w)Ie=w[Pt],w.hasOwnProperty(Pt)&&Ie!==void 0&&!P.hasOwnProperty(Pt)&&$l(h,g,Pt,void 0,P,Ie);for(qe in P)Ie=P[qe],De=w[qe],!P.hasOwnProperty(qe)||Ie===De||Ie===void 0&&De===void 0||$l(h,g,qe,Ie,P,De);return}}for(var $e in w)Ie=w[$e],w.hasOwnProperty($e)&&Ie!=null&&!P.hasOwnProperty($e)&&It(h,g,$e,null,P,Ie);for(Ge in P)Ie=P[Ge],De=w[Ge],!P.hasOwnProperty(Ge)||Ie===De||Ie==null&&De==null||It(h,g,Ge,Ie,P,De)}function rf(h){switch(h){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p0(){if(typeof performance.getEntriesByType=="function"){for(var h=0,g=0,w=performance.getEntriesByType("resource"),P=0;P<w.length;P++){var H=w[P],K=H.transferSize,ue=H.initiatorType,ge=H.duration;if(K&&ge&&rf(ue)){for(ue=0,ge=H.responseEnd,P+=1;P<w.length;P++){var Se=w[P],Ne=Se.startTime;if(Ne>ge)break;var qe=Se.transferSize,Ge=Se.initiatorType;qe&&rf(Ge)&&(Se=Se.responseEnd,ue+=qe*(Se<ge?1:(ge-Ne)/(Se-Ne)))}if(--P,g+=8*(K+ue)/(H.duration/1e3),h++,10<h)break}}if(0<h)return g/h/1e6}return navigator.connection&&(h=navigator.connection.downlink,typeof h=="number")?h:5}var kl=null,Tl=null;function Ea(h){return h.nodeType===9?h:h.ownerDocument}function nf(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sf(h,g){if(h===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&g==="foreignObject"?0:h}function jl(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Nl=null;function m0(){var h=window.event;return h&&h.type==="popstate"?h===Nl?!1:(Nl=h,!0):(Nl=null,!1)}var af=typeof setTimeout=="function"?setTimeout:void 0,g0=typeof clearTimeout=="function"?clearTimeout:void 0,of=typeof Promise=="function"?Promise:void 0,x0=typeof queueMicrotask=="function"?queueMicrotask:typeof of<"u"?function(h){return of.resolve(null).then(h).catch(y0)}:af;function y0(h){setTimeout(function(){throw h})}function Bn(h){return h==="head"}function lf(h,g){var w=g,P=0;do{var H=w.nextSibling;if(h.removeChild(w),H&&H.nodeType===8)if(w=H.data,w==="/$"||w==="/&"){if(P===0){h.removeChild(H),Bi(g);return}P--}else if(w==="$"||w==="$?"||w==="$~"||w==="$!"||w==="&")P++;else if(w==="html")ys(h.ownerDocument.documentElement);else if(w==="head"){w=h.ownerDocument.head,ys(w);for(var K=w.firstChild;K;){var ue=K.nextSibling,ge=K.nodeName;K[tr]||ge==="SCRIPT"||ge==="STYLE"||ge==="LINK"&&K.rel.toLowerCase()==="stylesheet"||w.removeChild(K),K=ue}}else w==="body"&&ys(h.ownerDocument.body);w=H}while(w);Bi(g)}function cf(h,g){var w=h;h=0;do{var P=w.nextSibling;if(w.nodeType===1?g?(w._stashedDisplay=w.style.display,w.style.display="none"):(w.style.display=w._stashedDisplay||"",w.getAttribute("style")===""&&w.removeAttribute("style")):w.nodeType===3&&(g?(w._stashedText=w.nodeValue,w.nodeValue=""):w.nodeValue=w._stashedText||""),P&&P.nodeType===8)if(w=P.data,w==="/$"){if(h===0)break;h--}else w!=="$"&&w!=="$?"&&w!=="$~"&&w!=="$!"||h++;w=P}while(w)}function Ml(h){var g=h.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var w=g;switch(g=g.nextSibling,w.nodeName){case"HTML":case"HEAD":case"BODY":Ml(w),or(w);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(w.rel.toLowerCase()==="stylesheet")continue}h.removeChild(w)}}function v0(h,g,w,P){for(;h.nodeType===1;){var H=w;if(h.nodeName.toLowerCase()!==g.toLowerCase()){if(!P&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(P){if(!h[tr])switch(g){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(K=h.getAttribute("rel"),K==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(K!==H.rel||h.getAttribute("href")!==(H.href==null||H.href===""?null:H.href)||h.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin)||h.getAttribute("title")!==(H.title==null?null:H.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(K=h.getAttribute("src"),(K!==(H.src==null?null:H.src)||h.getAttribute("type")!==(H.type==null?null:H.type)||h.getAttribute("crossorigin")!==(H.crossOrigin==null?null:H.crossOrigin))&&K&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(g==="input"&&h.type==="hidden"){var K=H.name==null?null:""+H.name;if(H.type==="hidden"&&h.getAttribute("name")===K)return h}else return h;if(h=qr(h.nextSibling),h===null)break}return null}function b0(h,g,w){if(g==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!w||(h=qr(h.nextSibling),h===null))return null;return h}function uf(h,g){for(;h.nodeType!==8;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!g||(h=qr(h.nextSibling),h===null))return null;return h}function Il(h){return h.data==="$?"||h.data==="$~"}function Pl(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState!=="loading"}function w0(h,g){var w=h.ownerDocument;if(h.data==="$~")h._reactRetry=g;else if(h.data!=="$?"||w.readyState!=="loading")g();else{var P=function(){g(),w.removeEventListener("DOMContentLoaded",P)};w.addEventListener("DOMContentLoaded",P),h._reactRetry=P}}function qr(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return h}var Bl=null;function df(h){h=h.nextSibling;for(var g=0;h;){if(h.nodeType===8){var w=h.data;if(w==="/$"||w==="/&"){if(g===0)return qr(h.nextSibling);g--}else w!=="$"&&w!=="$!"&&w!=="$?"&&w!=="$~"&&w!=="&"||g++}h=h.nextSibling}return null}function ff(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var w=h.data;if(w==="$"||w==="$!"||w==="$?"||w==="$~"||w==="&"){if(g===0)return h;g--}else w!=="/$"&&w!=="/&"||g++}h=h.previousSibling}return null}function hf(h,g,w){switch(g=Ea(w),h){case"html":if(h=g.documentElement,!h)throw Error(r(452));return h;case"head":if(h=g.head,!h)throw Error(r(453));return h;case"body":if(h=g.body,!h)throw Error(r(454));return h;default:throw Error(r(451))}}function ys(h){for(var g=h.attributes;g.length;)h.removeAttributeNode(g[0]);or(h)}var Ur=new Map,pf=new Set;function Sa(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var xn=R.d;R.d={f:E0,r:_0,D:S0,C:R0,L:C0,m:A0,X:k0,S:$0,M:T0};function E0(){var h=xn.f(),g=pa();return h||g}function _0(h){var g=Xt(h);g!==null&&g.tag===5&&g.type==="form"?ku(g):xn.r(h)}var Mi=typeof document>"u"?null:document;function mf(h,g,w){var P=Mi;if(P&&typeof g=="string"&&g){var H=Ir(g);H='link[rel="'+h+'"][href="'+H+'"]',typeof w=="string"&&(H+='[crossorigin="'+w+'"]'),pf.has(H)||(pf.add(H),h={rel:h,crossOrigin:w,href:g},P.querySelector(H)===null&&(g=P.createElement("link"),ar(g,"link",h),Tt(g),P.head.appendChild(g)))}}function S0(h){xn.D(h),mf("dns-prefetch",h,null)}function R0(h,g){xn.C(h,g),mf("preconnect",h,g)}function C0(h,g,w){xn.L(h,g,w);var P=Mi;if(P&&h&&g){var H='link[rel="preload"][as="'+Ir(g)+'"]';g==="image"&&w&&w.imageSrcSet?(H+='[imagesrcset="'+Ir(w.imageSrcSet)+'"]',typeof w.imageSizes=="string"&&(H+='[imagesizes="'+Ir(w.imageSizes)+'"]')):H+='[href="'+Ir(h)+'"]';var K=H;switch(g){case"style":K=Ii(h);break;case"script":K=Pi(h)}Ur.has(K)||(h=p({rel:"preload",href:g==="image"&&w&&w.imageSrcSet?void 0:h,as:g},w),Ur.set(K,h),P.querySelector(H)!==null||g==="style"&&P.querySelector(vs(K))||g==="script"&&P.querySelector(bs(K))||(g=P.createElement("link"),ar(g,"link",h),Tt(g),P.head.appendChild(g)))}}function A0(h,g){xn.m(h,g);var w=Mi;if(w&&h){var P=g&&typeof g.as=="string"?g.as:"script",H='link[rel="modulepreload"][as="'+Ir(P)+'"][href="'+Ir(h)+'"]',K=H;switch(P){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":K=Pi(h)}if(!Ur.has(K)&&(h=p({rel:"modulepreload",href:h},g),Ur.set(K,h),w.querySelector(H)===null)){switch(P){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(w.querySelector(bs(K)))return}P=w.createElement("link"),ar(P,"link",h),Tt(P),w.head.appendChild(P)}}}function $0(h,g,w){xn.S(h,g,w);var P=Mi;if(P&&h){var H=Qt(P).hoistableStyles,K=Ii(h);g=g||"default";var ue=H.get(K);if(!ue){var ge={loading:0,preload:null};if(ue=P.querySelector(vs(K)))ge.loading=5;else{h=p({rel:"stylesheet",href:h,"data-precedence":g},w),(w=Ur.get(K))&&Ol(h,w);var Se=ue=P.createElement("link");Tt(Se),ar(Se,"link",h),Se._p=new Promise(function(Ne,qe){Se.onload=Ne,Se.onerror=qe}),Se.addEventListener("load",function(){ge.loading|=1}),Se.addEventListener("error",function(){ge.loading|=2}),ge.loading|=4,Ra(ue,g,P)}ue={type:"stylesheet",instance:ue,count:1,state:ge},H.set(K,ue)}}}function k0(h,g){xn.X(h,g);var w=Mi;if(w&&h){var P=Qt(w).hoistableScripts,H=Pi(h),K=P.get(H);K||(K=w.querySelector(bs(H)),K||(h=p({src:h,async:!0},g),(g=Ur.get(H))&&Dl(h,g),K=w.createElement("script"),Tt(K),ar(K,"link",h),w.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},P.set(H,K))}}function T0(h,g){xn.M(h,g);var w=Mi;if(w&&h){var P=Qt(w).hoistableScripts,H=Pi(h),K=P.get(H);K||(K=w.querySelector(bs(H)),K||(h=p({src:h,async:!0,type:"module"},g),(g=Ur.get(H))&&Dl(h,g),K=w.createElement("script"),Tt(K),ar(K,"link",h),w.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},P.set(H,K))}}function gf(h,g,w,P){var H=(H=J.current)?Sa(H):null;if(!H)throw Error(r(446));switch(h){case"meta":case"title":return null;case"style":return typeof w.precedence=="string"&&typeof w.href=="string"?(g=Ii(w.href),w=Qt(H).hoistableStyles,P=w.get(g),P||(P={type:"style",instance:null,count:0,state:null},w.set(g,P)),P):{type:"void",instance:null,count:0,state:null};case"link":if(w.rel==="stylesheet"&&typeof w.href=="string"&&typeof w.precedence=="string"){h=Ii(w.href);var K=Qt(H).hoistableStyles,ue=K.get(h);if(ue||(H=H.ownerDocument||H,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},K.set(h,ue),(K=H.querySelector(vs(h)))&&!K._p&&(ue.instance=K,ue.state.loading=5),Ur.has(h)||(w={rel:"preload",as:"style",href:w.href,crossOrigin:w.crossOrigin,integrity:w.integrity,media:w.media,hrefLang:w.hrefLang,referrerPolicy:w.referrerPolicy},Ur.set(h,w),K||j0(H,h,w,ue.state))),g&&P===null)throw Error(r(528,""));return ue}if(g&&P!==null)throw Error(r(529,""));return null;case"script":return g=w.async,w=w.src,typeof w=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Pi(w),w=Qt(H).hoistableScripts,P=w.get(g),P||(P={type:"script",instance:null,count:0,state:null},w.set(g,P)),P):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,h))}}function Ii(h){return'href="'+Ir(h)+'"'}function vs(h){return'link[rel="stylesheet"]['+h+"]"}function xf(h){return p({},h,{"data-precedence":h.precedence,precedence:null})}function j0(h,g,w,P){h.querySelector('link[rel="preload"][as="style"]['+g+"]")?P.loading=1:(g=h.createElement("link"),P.preload=g,g.addEventListener("load",function(){return P.loading|=1}),g.addEventListener("error",function(){return P.loading|=2}),ar(g,"link",w),Tt(g),h.head.appendChild(g))}function Pi(h){return'[src="'+Ir(h)+'"]'}function bs(h){return"script[async]"+h}function yf(h,g,w){if(g.count++,g.instance===null)switch(g.type){case"style":var P=h.querySelector('style[data-href~="'+Ir(w.href)+'"]');if(P)return g.instance=P,Tt(P),P;var H=p({},w,{"data-href":w.href,"data-precedence":w.precedence,href:null,precedence:null});return P=(h.ownerDocument||h).createElement("style"),Tt(P),ar(P,"style",H),Ra(P,w.precedence,h),g.instance=P;case"stylesheet":H=Ii(w.href);var K=h.querySelector(vs(H));if(K)return g.state.loading|=4,g.instance=K,Tt(K),K;P=xf(w),(H=Ur.get(H))&&Ol(P,H),K=(h.ownerDocument||h).createElement("link"),Tt(K);var ue=K;return ue._p=new Promise(function(ge,Se){ue.onload=ge,ue.onerror=Se}),ar(K,"link",P),g.state.loading|=4,Ra(K,w.precedence,h),g.instance=K;case"script":return K=Pi(w.src),(H=h.querySelector(bs(K)))?(g.instance=H,Tt(H),H):(P=w,(H=Ur.get(K))&&(P=p({},w),Dl(P,H)),h=h.ownerDocument||h,H=h.createElement("script"),Tt(H),ar(H,"link",P),h.head.appendChild(H),g.instance=H);case"void":return null;default:throw Error(r(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(P=g.instance,g.state.loading|=4,Ra(P,w.precedence,h));return g.instance}function Ra(h,g,w){for(var P=w.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),H=P.length?P[P.length-1]:null,K=H,ue=0;ue<P.length;ue++){var ge=P[ue];if(ge.dataset.precedence===g)K=ge;else if(K!==H)break}K?K.parentNode.insertBefore(h,K.nextSibling):(g=w.nodeType===9?w.head:w,g.insertBefore(h,g.firstChild))}function Ol(h,g){h.crossOrigin==null&&(h.crossOrigin=g.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=g.referrerPolicy),h.title==null&&(h.title=g.title)}function Dl(h,g){h.crossOrigin==null&&(h.crossOrigin=g.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=g.referrerPolicy),h.integrity==null&&(h.integrity=g.integrity)}var Ca=null;function vf(h,g,w){if(Ca===null){var P=new Map,H=Ca=new Map;H.set(w,P)}else H=Ca,P=H.get(w),P||(P=new Map,H.set(w,P));if(P.has(h))return P;for(P.set(h,null),w=w.getElementsByTagName(h),H=0;H<w.length;H++){var K=w[H];if(!(K[tr]||K[nt]||h==="link"&&K.getAttribute("rel")==="stylesheet")&&K.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=K.getAttribute(g)||"";ue=h+ue;var ge=P.get(ue);ge?ge.push(K):P.set(ue,[K])}}return P}function bf(h,g,w){h=h.ownerDocument||h,h.head.insertBefore(w,g==="title"?h.querySelector("head > title"):null)}function N0(h,g,w){if(w===1||g.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(h=g.disabled,typeof g.precedence=="string"&&h==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function wf(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}function M0(h,g,w,P){if(w.type==="stylesheet"&&(typeof P.media!="string"||matchMedia(P.media).matches!==!1)&&(w.state.loading&4)===0){if(w.instance===null){var H=Ii(P.href),K=g.querySelector(vs(H));if(K){g=K._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(h.count++,h=Aa.bind(h),g.then(h,h)),w.state.loading|=4,w.instance=K,Tt(K);return}K=g.ownerDocument||g,P=xf(P),(H=Ur.get(H))&&Ol(P,H),K=K.createElement("link"),Tt(K);var ue=K;ue._p=new Promise(function(ge,Se){ue.onload=ge,ue.onerror=Se}),ar(K,"link",P),w.instance=K}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(w,g),(g=w.state.preload)&&(w.state.loading&3)===0&&(h.count++,w=Aa.bind(h),g.addEventListener("load",w),g.addEventListener("error",w))}}var Ll=0;function I0(h,g){return h.stylesheets&&h.count===0&&ka(h,h.stylesheets),0<h.count||0<h.imgCount?function(w){var P=setTimeout(function(){if(h.stylesheets&&ka(h,h.stylesheets),h.unsuspend){var K=h.unsuspend;h.unsuspend=null,K()}},6e4+g);0<h.imgBytes&&Ll===0&&(Ll=62500*p0());var H=setTimeout(function(){if(h.waitingForImages=!1,h.count===0&&(h.stylesheets&&ka(h,h.stylesheets),h.unsuspend)){var K=h.unsuspend;h.unsuspend=null,K()}},(h.imgBytes>Ll?50:800)+g);return h.unsuspend=w,function(){h.unsuspend=null,clearTimeout(P),clearTimeout(H)}}:null}function Aa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ka(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var $a=null;function ka(h,g){h.stylesheets=null,h.unsuspend!==null&&(h.count++,$a=new Map,g.forEach(P0,h),$a=null,Aa.call(h))}function P0(h,g){if(!(g.state.loading&4)){var w=$a.get(h);if(w)var P=w.get(null);else{w=new Map,$a.set(h,w);for(var H=h.querySelectorAll("link[data-precedence],style[data-precedence]"),K=0;K<H.length;K++){var ue=H[K];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(w.set(ue.dataset.precedence,ue),P=ue)}P&&w.set(null,P)}H=g.instance,ue=H.getAttribute("data-precedence"),K=w.get(ue)||P,K===P&&w.set(null,H),w.set(ue,H),this.count++,P=Aa.bind(this),H.addEventListener("load",P),H.addEventListener("error",P),K?K.parentNode.insertBefore(H,K.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(H,h.firstChild)),g.state.loading|=4}}var Es={$$typeof:D,Provider:null,Consumer:null,_currentValue:T,_currentValue2:T,_threadCount:0};function B0(h,g,w,P,H,K,ue,ge,Se){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=P,this.onUncaughtError=H,this.onCaughtError=K,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function Ef(h,g,w,P,H,K,ue,ge,Se,Ne,qe,Ge){return h=new B0(h,g,w,ue,Se,Ne,qe,Ge,ge),g=1,K===!0&&(g|=24),K=Rr(3,null,null,g),h.current=K,K.stateNode=h,g=yo(),g.refCount++,h.pooledCache=g,g.refCount++,K.memoizedState={element:P,isDehydrated:w,cache:g},Eo(K),h}function _f(h){return h?(h=fi,h):fi}function Sf(h,g,w,P,H,K){H=_f(H),P.context===null?P.context=H:P.pendingContext=H,P=Rn(g),P.payload={element:w},K=K===void 0?null:K,K!==null&&(P.callback=K),w=Cn(h,P,g),w!==null&&(br(w,h,g),Zi(w,h,g))}function Rf(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<g?w:g}}function Fl(h,g){Rf(h,g),(h=h.alternate)&&Rf(h,g)}function Cf(h){if(h.tag===13||h.tag===31){var g=Gn(h,67108864);g!==null&&br(g,h,67108864),Fl(h,67108864)}}function Af(h){if(h.tag===13||h.tag===31){var g=Tr();g=et(g);var w=Gn(h,g);w!==null&&br(w,h,g),Fl(h,g)}}var Ta=!0;function O0(h,g,w,P){var H=N.T;N.T=null;var K=R.p;try{R.p=2,ql(h,g,w,P)}finally{R.p=K,N.T=H}}function D0(h,g,w,P){var H=N.T;N.T=null;var K=R.p;try{R.p=8,ql(h,g,w,P)}finally{R.p=K,N.T=H}}function ql(h,g,w,P){if(Ta){var H=Ul(P);if(H===null)Al(h,g,P,ja,w),kf(h,P);else if(F0(H,h,g,w,P))P.stopPropagation();else if(kf(h,P),g&4&&-1<L0.indexOf(h)){for(;H!==null;){var K=Xt(H);if(K!==null)switch(K.tag){case 3:if(K=K.stateNode,K.current.memoizedState.isDehydrated){var ue=xt(K.pendingLanes);if(ue!==0){var ge=K;for(ge.pendingLanes|=2,ge.entangledLanes|=2;ue;){var Se=1<<31-ve(ue);ge.entanglements[1]|=Se,ue&=~Se}Xr(K),(kt&6)===0&&(fa=ke()+500,ms(0))}}break;case 31:case 13:ge=Gn(K,2),ge!==null&&br(ge,K,2),pa(),Fl(K,2)}if(K=Ul(P),K===null&&Al(h,g,P,ja,w),K===H)break;H=K}H!==null&&P.stopPropagation()}else Al(h,g,P,null,w)}}function Ul(h){return h=Ha(h),Hl(h)}var ja=null;function Hl(h){if(ja=null,h=Jt(h),h!==null){var g=o(h);if(g===null)h=null;else{var w=g.tag;if(w===13){if(h=l(g),h!==null)return h;h=null}else if(w===31){if(h=c(g),h!==null)return h;h=null}else if(w===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null)}}return ja=h,null}function $f(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case Fe:return 2;case Te:return 8;case Be:case ze:return 32;case de:return 268435456;default:return 32}default:return 32}}var zl=!1,On=null,Dn=null,Ln=null,_s=new Map,Ss=new Map,Fn=[],L0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kf(h,g){switch(h){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":_s.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(g.pointerId)}}function Rs(h,g,w,P,H,K){return h===null||h.nativeEvent!==K?(h={blockedOn:g,domEventName:w,eventSystemFlags:P,nativeEvent:K,targetContainers:[H]},g!==null&&(g=Xt(g),g!==null&&Cf(g)),h):(h.eventSystemFlags|=P,g=h.targetContainers,H!==null&&g.indexOf(H)===-1&&g.push(H),h)}function F0(h,g,w,P,H){switch(g){case"focusin":return On=Rs(On,h,g,w,P,H),!0;case"dragenter":return Dn=Rs(Dn,h,g,w,P,H),!0;case"mouseover":return Ln=Rs(Ln,h,g,w,P,H),!0;case"pointerover":var K=H.pointerId;return _s.set(K,Rs(_s.get(K)||null,h,g,w,P,H)),!0;case"gotpointercapture":return K=H.pointerId,Ss.set(K,Rs(Ss.get(K)||null,h,g,w,P,H)),!0}return!1}function Tf(h){var g=Jt(h.target);if(g!==null){var w=o(g);if(w!==null){if(g=w.tag,g===13){if(g=l(w),g!==null){h.blockedOn=g,tt(h.priority,function(){Af(w)});return}}else if(g===31){if(g=c(w),g!==null){h.blockedOn=g,tt(h.priority,function(){Af(w)});return}}else if(g===3&&w.stateNode.current.memoizedState.isDehydrated){h.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}h.blockedOn=null}function Na(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var w=Ul(h.nativeEvent);if(w===null){w=h.nativeEvent;var P=new w.constructor(w.type,w);Ua=P,w.target.dispatchEvent(P),Ua=null}else return g=Xt(w),g!==null&&Cf(g),h.blockedOn=w,!1;g.shift()}return!0}function jf(h,g,w){Na(h)&&w.delete(g)}function q0(){zl=!1,On!==null&&Na(On)&&(On=null),Dn!==null&&Na(Dn)&&(Dn=null),Ln!==null&&Na(Ln)&&(Ln=null),_s.forEach(jf),Ss.forEach(jf)}function Ma(h,g){h.blockedOn===g&&(h.blockedOn=null,zl||(zl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,q0)))}var Ia=null;function Nf(h){Ia!==h&&(Ia=h,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ia===h&&(Ia=null);for(var g=0;g<h.length;g+=3){var w=h[g],P=h[g+1],H=h[g+2];if(typeof P!="function"){if(Hl(P||w)===null)continue;break}var K=Xt(w);K!==null&&(h.splice(g,3),g-=3,Uo(K,{pending:!0,data:H,method:w.method,action:P},P,H))}}))}function Bi(h){function g(Se){return Ma(Se,h)}On!==null&&Ma(On,h),Dn!==null&&Ma(Dn,h),Ln!==null&&Ma(Ln,h),_s.forEach(g),Ss.forEach(g);for(var w=0;w<Fn.length;w++){var P=Fn[w];P.blockedOn===h&&(P.blockedOn=null)}for(;0<Fn.length&&(w=Fn[0],w.blockedOn===null);)Tf(w),w.blockedOn===null&&Fn.shift();if(w=(h.ownerDocument||h).$$reactFormReplay,w!=null)for(P=0;P<w.length;P+=3){var H=w[P],K=w[P+1],ue=H[Je]||null;if(typeof K=="function")ue||Nf(w);else if(ue){var ge=null;if(K&&K.hasAttribute("formAction")){if(H=K,ue=K[Je]||null)ge=ue.formAction;else if(Hl(H)!==null)continue}else ge=ue.action;typeof ge=="function"?w[P+1]=ge:(w.splice(P,3),P-=3),Nf(w)}}}function Mf(){function h(K){K.canIntercept&&K.info==="react-transition"&&K.intercept({handler:function(){return new Promise(function(ue){return H=ue})},focusReset:"manual",scroll:"manual"})}function g(){H!==null&&(H(),H=null),P||setTimeout(w,20)}function w(){if(!P&&!navigation.transition){var K=navigation.currentEntry;K&&K.url!=null&&navigation.navigate(K.url,{state:K.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var P=!1,H=null;return navigation.addEventListener("navigate",h),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(w,100),function(){P=!0,navigation.removeEventListener("navigate",h),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),H!==null&&(H(),H=null)}}}function Gl(h){this._internalRoot=h}Pa.prototype.render=Gl.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(r(409));var w=g.current,P=Tr();Sf(w,P,h,g,null,null)},Pa.prototype.unmount=Gl.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;Sf(h.current,2,null,h,null,null),pa(),g[Rt]=null}};function Pa(h){this._internalRoot=h}Pa.prototype.unstable_scheduleHydration=function(h){if(h){var g=ft();h={blockedOn:null,target:h,priority:g};for(var w=0;w<Fn.length&&g!==0&&g<Fn[w].priority;w++);Fn.splice(w,0,h),w===0&&Tf(h)}};var If=e.version;if(If!=="19.2.4")throw Error(r(527,If,"19.2.4"));R.findDOMNode=function(h){var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=f(g),h=h!==null?d(h):null,h=h===null?null:h.stateNode,h};var U0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{me=Ba.inject(U0),Ee=Ba}catch{}}return reactDomClient_production.createRoot=function(h,g){if(!a(h))throw Error(r(299));var w=!1,P="",H=Lu,K=Fu,ue=qu;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(P=g.identifierPrefix),g.onUncaughtError!==void 0&&(H=g.onUncaughtError),g.onCaughtError!==void 0&&(K=g.onCaughtError),g.onRecoverableError!==void 0&&(ue=g.onRecoverableError)),g=Ef(h,1,!1,null,null,w,P,null,H,K,ue,Mf),h[Rt]=g.current,Cl(h),new Gl(g)},reactDomClient_production.hydrateRoot=function(h,g,w){if(!a(h))throw Error(r(299));var P=!1,H="",K=Lu,ue=Fu,ge=qu,Se=null;return w!=null&&(w.unstable_strictMode===!0&&(P=!0),w.identifierPrefix!==void 0&&(H=w.identifierPrefix),w.onUncaughtError!==void 0&&(K=w.onUncaughtError),w.onCaughtError!==void 0&&(ue=w.onCaughtError),w.onRecoverableError!==void 0&&(ge=w.onRecoverableError),w.formState!==void 0&&(Se=w.formState)),g=Ef(h,1,!0,g,w??null,P,H,Se,K,ue,ge,Mf),g.context=_f(null),w=g.current,P=Tr(),P=et(P),H=Rn(P),H.callback=null,Cn(w,H,P),w=P,g.current.lanes=w,Qe(g,w),Xr(g),h[Rt]=g.current,Cl(h),new Pa(g)},reactDomClient_production.version="19.2.4",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();var PopStateEventType="popstate";function createHashHistory(t={}){function e(a,o){let{pathname:l="/",search:c="",hash:u=""}=parsePath(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),createLocation("",{pathname:l,search:c,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(a,o){let l=a.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let u=a.location.href,f=u.indexOf("#");c=f===-1?u:u.slice(0,f)}return c+"#"+(typeof o=="string"?o:createPath(o))}function r(a,o){warning$3(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return getUrlBasedHistory(e,s,r,t)}function invariant$1(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function warning$3(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(t,e){return{usr:t.state,key:t.key,idx:e}}function createLocation(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?parsePath(e):e,state:s,key:e&&e.key||r||createKey()}}function createPath({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function parsePath(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function getUrlBasedHistory(t,e,s,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,l=a.history,c="POP",u=null,f=d();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function d(){return(l.state||{idx:null}).idx}function p(){c="POP";let C=d(),j=C==null?null:C-f;f=C,u&&u({action:c,location:E.location,delta:j})}function m(C,j){c="PUSH";let B=createLocation(E.location,C,j);s&&s(B,C),f=d()+1;let D=getHistoryState(B,f),F=E.createHref(B);try{l.pushState(D,"",F)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;a.location.assign(F)}o&&u&&u({action:c,location:E.location,delta:1})}function y(C,j){c="REPLACE";let B=createLocation(E.location,C,j);s&&s(B,C),f=d();let D=getHistoryState(B,f),F=E.createHref(B);l.replaceState(D,"",F),o&&u&&u({action:c,location:E.location,delta:0})}function b(C){return createBrowserURLImpl(C)}let E={get action(){return c},get location(){return t(a,l)},listen(C){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,p),u=C,()=>{a.removeEventListener(PopStateEventType,p),u=null}},createHref(C){return e(a,C)},createURL:b,encodeLocation(C){let j=b(C);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:m,replace:y,go(C){return l.go(C)}};return E}function createBrowserURLImpl(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:createPath(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function matchRoutes(t,e,s="/"){return matchRoutesImpl(t,e,s,!1)}function matchRoutesImpl(t,e,s,r){let a=typeof e=="string"?parsePath(e):e,o=stripBasename(a.pathname||"/",s);if(o==null)return null;let l=flattenRoutes(t);rankRouteBranches(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let f=decodePath(o);c=matchRouteBranch(l[u],f,r)}return c}function flattenRoutes(t,e=[],s=[],r="",a=!1){let o=(l,c,u=a,f)=>{let d={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&u)return;invariant$1(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let p=joinPaths([r,d.relativePath]),m=s.concat(d);l.children&&l.children.length>0&&(invariant$1(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),flattenRoutes(l.children,e,m,p,u)),!(l.path==null&&!l.index)&&e.push({path:p,score:computeScore(p,l.index),routesMeta:m})};return t.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let u of explodeOptionalSegments(l.path))o(l,c,!0,u)}),e}function explodeOptionalSegments(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,a=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let l=explodeOptionalSegments(r.join("/")),c=[];return c.push(...l.map(u=>u===""?o:[o,u].join("/"))),a&&c.push(...l),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function rankRouteBranches(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:compareIndexes(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=t=>t==="*";function computeScore(t,e){let s=t.split("/"),r=s.length;return s.some(isSplat)&&(r+=splatPenalty),e&&(r+=indexRouteValue),s.filter(a=>!isSplat(a)).reduce((a,o)=>a+(paramRe.test(o)?dynamicSegmentValue:o===""?emptySegmentValue:staticSegmentValue),r)}function compareIndexes(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function matchRouteBranch(t,e,s=!1){let{routesMeta:r}=t,a={},o="/",l=[];for(let c=0;c<r.length;++c){let u=r[c],f=c===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",p=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},d),m=u.route;if(!p&&f&&s&&!r[r.length-1].route.index&&(p=matchPath({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:joinPaths([o,p.pathname]),pathnameBase:normalizePathname(joinPaths([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=joinPaths([o,p.pathnameBase]))}return l}function matchPath(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=compilePath(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:r.reduce((f,{paramName:d,isOptional:p},m)=>{if(d==="*"){let b=c[m]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const y=c[m];return p&&!y?f[d]=void 0:f[d]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:t}}function compilePath(t,e=!1,s=!0){warning$3(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function decodePath(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$3(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function stripBasename(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function resolvePath(t,e="/"){let{pathname:s,search:r="",hash:a=""}=typeof t=="string"?parsePath(t):t,o;return s?(s=s.replace(/\/\/+/g,"/"),s.startsWith("/")?o=resolvePathname(s.substring(1),"/"):o=resolvePathname(s,e)):o=e,{pathname:o,search:normalizeSearch(r),hash:normalizeHash(a)}}function resolvePathname(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(t){let e=getPathContributingMatches(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function resolveTo(t,e,s,r=!1){let a;typeof t=="string"?a=parsePath(t):(a={...t},invariant$1(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant$1(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant$1(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let o=t===""||a.pathname==="",l=o?"/":a.pathname,c;if(l==null)c=s;else{let p=e.length-1;if(!r&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),p-=1;a.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=resolvePath(a,c),f=l&&l!=="/"&&l.endsWith("/"),d=(o||l===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(f||d)&&(u.pathname+="/"),u}var joinPaths=t=>t.join("/").replace(/\/\/+/g,"/"),normalizePathname=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,normalizeHash=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,ErrorResponseImpl=class{constructor(t,e,s,r=!1){this.status=t,this.statusText=e||"",this.internal=r,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function isRouteErrorResponse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function getRoutePattern(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(t,e){let s=t;if(typeof s!="string"||!ABSOLUTE_URL_REGEX.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let r=s,a=!1;if(isBrowser$2)try{let o=new URL(window.location.href),l=s.startsWith("//")?new URL(o.protocol+s):new URL(s),c=stripBasename(l.pathname,e);l.origin===o.origin&&c!=null?s=c+l.search+l.hash:a=!0}catch{warning$3(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(t){if(t.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function decodeRouteErrorResponseDigest(t){if(t.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ErrorResponseImpl(e.status,e.statusText,e.data)}catch{}}function useHref(t,{relative:e}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=reactExports.useContext(NavigationContext),{hash:a,pathname:o,search:l}=useResolvedPath(t,{relative:e}),c=o;return s!=="/"&&(c=o==="/"?s:joinPaths([s,o])),r.createHref({pathname:c,search:l,hash:a})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(t){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(t)}function useNavigate(){let{isDataRoute:t}=reactExports.useContext(RouteContext);return t?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let t=reactExports.useContext(DataRouterContext),{basename:e,navigator:s}=reactExports.useContext(NavigationContext),{matches:r}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(r)),l=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{l.current=!0}),reactExports.useCallback((u,f={})=>{if(warning$3(l.current,navigateEffectWarning),!l.current)return;if(typeof u=="number"){s.go(u);return}let d=resolveTo(u,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:joinPaths([e,d.pathname])),(f.replace?s.replace:s.push)(d,f.state,f)},[e,s,o,a,t])}var OutletContext=reactExports.createContext(null);function useOutlet(t){let e=reactExports.useContext(RouteContext).outlet;return reactExports.useMemo(()=>e&&reactExports.createElement(OutletContext.Provider,{value:t},e),[e,t])}function useParams(){let{matches:t}=reactExports.useContext(RouteContext),e=t[t.length-1];return e?e.params:{}}function useResolvedPath(t,{relative:e}={}){let{matches:s}=reactExports.useContext(RouteContext),{pathname:r}=useLocation(),a=JSON.stringify(getResolveToMatches(s));return reactExports.useMemo(()=>resolveTo(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function useRoutes(t,e){return useRoutesImpl(t,e)}function useRoutesImpl(t,e,s,r,a){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=reactExports.useContext(NavigationContext),{matches:l}=reactExports.useContext(RouteContext),c=l[l.length-1],u=c?c.params:{},f=c?c.pathname:"/",d=c?c.pathnameBase:"/",p=c&&c.route;{let B=p&&p.path||"";warningOnce(f,!p||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let m=useLocation(),y;if(e){let B=typeof e=="string"?parsePath(e):e;invariant$1(d==="/"||B.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${B.pathname}" was given in the \`location\` prop.`),y=B}else y=m;let b=y.pathname||"/",E=b;if(d!=="/"){let B=d.replace(/^\//,"").split("/");E="/"+b.replace(/^\//,"").split("/").slice(B.length).join("/")}let C=matchRoutes(t,{pathname:E});warning$3(p||C!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),warning$3(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=_renderMatches(C&&C.map(B=>Object.assign({},B,{params:Object.assign({},u,B.params),pathname:joinPaths([d,o.encodeLocation?o.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?d:joinPaths([d,o.encodeLocation?o.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),l,s,r,a);return e&&j?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},j):j}function DefaultErrorComponent(){let t=useRouteError(),e=isRouteErrorResponse(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:o},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:o},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),s?reactExports.createElement("pre",{style:a},s):null,l)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=decodeRouteErrorResponseDigest(t.digest);s&&(t=s)}let e=t!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:t},e):e}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:t,error:e}){let{basename:s}=reactExports.useContext(NavigationContext);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=decodeRedirectErrorDigest(e.digest);if(r){let a=errorRedirectHandledMap.get(e);if(a)throw a;let o=parseToInfo(r.location,s);if(isBrowser$2&&!errorRedirectHandledMap.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw errorRedirectHandledMap.set(e,l),l}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function RenderedRoute({routeContext:t,match:e,children:s}){let r=reactExports.useContext(DataRouterContext);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),reactExports.createElement(RouteContext.Provider,{value:t},s)}function _renderMatches(t,e=[],s=null,r=null,a=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let o=t,l=s?.errors;if(l!=null){let d=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);invariant$1(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(s)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:m,errors:y}=s,b=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}let f=s&&r?(d,p)=>{r(d,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:getRoutePattern(s.matches),errorInfo:p})}:void 0;return o.reduceRight((d,p,m)=>{let y,b=!1,E=null,C=null;s&&(y=l&&p.route.id?l[p.route.id]:void 0,E=p.route.errorElement||defaultErrorElement,c&&(u<0&&m===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,C=null):u===m&&(b=!0,C=p.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,m+1)),B=()=>{let D;return y?D=E:b?D=C:p.route.Component?D=reactExports.createElement(p.route.Component,null):p.route.element?D=p.route.element:D=d,reactExports.createElement(RenderedRoute,{match:p,routeContext:{outlet:d,matches:j,isDataRoute:s!=null},children:D})};return s&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:E,error:y,children:B(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:f}):B()},null)}function getDataRouterConsoleError(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useDataRouterState(t){let e=reactExports.useContext(DataRouterStateContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useRouteContext(t){let e=reactExports.useContext(RouteContext);return invariant$1(e,getDataRouterConsoleError(t)),e}function useCurrentRouteId(t){let e=useRouteContext(t),s=e.matches[e.matches.length-1];return invariant$1(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let t=reactExports.useContext(RouteErrorContext),e=useDataRouterState("useRouteError"),s=useCurrentRouteId("useRouteError");return t!==void 0?t:e.errors?.[s]}function useNavigateStable(){let{router:t}=useDataRouterContext("useNavigate"),e=useCurrentRouteId("useNavigate"),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback(async(a,o={})=>{warning$3(s.current,navigateEffectWarning),s.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var alreadyWarned={};function warningOnce(t,e,s){!e&&!alreadyWarned[t]&&(alreadyWarned[t]=!0,warning$3(!1,s))}reactExports.memo(DataRoutes);function DataRoutes({routes:t,future:e,state:s,onError:r}){return useRoutesImpl(t,void 0,s,r,e)}function Navigate({to:t,replace:e,state:s,relative:r}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=reactExports.useContext(NavigationContext);warning$3(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=reactExports.useContext(RouteContext),{pathname:l}=useLocation(),c=useNavigate(),u=resolveTo(t,getResolveToMatches(o),l,r==="path"),f=JSON.stringify(u);return reactExports.useEffect(()=>{c(JSON.parse(f),{replace:e,state:s,relative:r})},[c,f,r,e,s]),null}function Outlet(t){return useOutlet(t.context)}function Route(t){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:a,static:o=!1,unstable_useTransitions:l}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=reactExports.useMemo(()=>({basename:c,navigator:a,static:o,unstable_useTransitions:l,future:{}}),[c,a,o,l]);typeof s=="string"&&(s=parsePath(s));let{pathname:f="/",search:d="",hash:p="",state:m=null,key:y="default"}=s,b=reactExports.useMemo(()=>{let E=stripBasename(f,c);return E==null?null:{location:{pathname:E,search:d,hash:p,state:m,key:y},navigationType:r}},[c,f,d,p,m,y,r]);return warning$3(b!=null,`<Router basename="${c}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:reactExports.createElement(NavigationContext.Provider,{value:u},reactExports.createElement(LocationContext.Provider,{children:e,value:b}))}function Routes({children:t,location:e}){return useRoutes(createRoutesFromChildren(t),e)}function createRoutesFromChildren(t,e=[]){let s=[];return reactExports.Children.forEach(t,(r,a)=>{if(!reactExports.isValidElement(r))return;let o=[...e,a];if(r.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(r.props.children,o));return}invariant$1(r.type===Route,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=createRoutesFromChildren(r.props.children,o)),s.push(l)}),s}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function isButtonElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="button"}function isFormElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="form"}function isInputElement(t){return isHtmlElement(t)&&t.tagName.toLowerCase()==="input"}function isModifiedEvent(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function shouldProcessLinkClick(t,e){return t.button===0&&(!e||e==="_self")&&!isModifiedEvent(t)}function createSearchParams(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let r=t[s];return e.concat(Array.isArray(r)?r.map(a=>[s,a]):[[s,r]])},[]))}function getSearchParamsForLocation(t,e){let s=createSearchParams(t);return e&&e.forEach((r,a)=>{s.has(a)||e.getAll(a).forEach(o=>{s.append(a,o)})}),s}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(t){return t!=null&&!supportedFormEncTypes.has(t)?(warning$3(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):t}function getFormSubmissionInfo(t,e){let s,r,a,o,l;if(isFormElement(t)){let c=t.getAttribute("action");r=c?stripBasename(c,e):null,s=t.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("enctype"))||defaultEncType,o=new FormData(t)}else if(isButtonElement(t)||isInputElement(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?stripBasename(u,e):null,s=t.getAttribute("formmethod")||c.getAttribute("method")||defaultMethod,a=getFormEncType(t.getAttribute("formenctype"))||getFormEncType(c.getAttribute("enctype"))||defaultEncType,o=new FormData(c,t),!isFormDataSubmitterSupported()){let{name:f,type:d,value:p}=t;if(d==="image"){let m=f?`${f}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else f&&o.append(f,p)}}else{if(isHtmlElement(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=defaultMethod,r=null,a=defaultEncType,l=t}return o&&a==="text/plain"&&(l=o,o=void 0),{action:r,method:s.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function singleFetchUrl(t,e,s,r){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&stripBasename(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function loadRouteModule(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function getKeyedPrefetchLinks(t,e,s){let r=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await loadRouteModule(o,s);return l.links?l.links():[]}return[]}));return dedupeLinkDescriptors(r.flat(1).filter(isHtmlLinkDescriptor).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function getNewMatchesForLinks(t,e,s,r,a,o){let l=(u,f)=>s[f]?u.route.id!==s[f].route.id:!0,c=(u,f)=>s[f].pathname!==u.pathname||s[f].route.path?.endsWith("*")&&s[f].params["*"]!==u.params["*"];return o==="assets"?e.filter((u,f)=>l(u,f)||c(u,f)):o==="data"?e.filter((u,f)=>{let d=r.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(l(u,f)||c(u,f))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function getModuleLinkHrefs(t,e,{includeHydrateFallback:s}={}){return dedupeHrefs(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function dedupeHrefs(t){return[...new Set(t)]}function sortKeys(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function dedupeLinkDescriptors(t,e){let s=new Set;return new Set(e),t.reduce((r,a)=>{let o=JSON.stringify(sortKeys(a));return s.has(o)||(s.add(o),r.push({key:o,link:a})),r},[])}function useDataRouterContext2(){let t=reactExports.useContext(DataRouterContext);return invariant2(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function useDataRouterStateContext(){let t=reactExports.useContext(DataRouterStateContext);return invariant2(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let t=reactExports.useContext(FrameworkContext);return invariant2(t,"You must render this element inside a <HydratedRouter> element"),t}function usePrefetchBehavior(t,e){let s=reactExports.useContext(FrameworkContext),[r,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:f,onMouseLeave:d,onTouchStart:p}=e,m=reactExports.useRef(null);reactExports.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let E=j=>{j.forEach(B=>{l(B.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return m.current&&C.observe(m.current),()=>{C.disconnect()}}},[t]),reactExports.useEffect(()=>{if(r){let E=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(E)}}},[r]);let y=()=>{a(!0)},b=()=>{a(!1),l(!1)};return s?t!=="intent"?[o,m,{}]:[o,m,{onFocus:composeEventHandlers(c,y),onBlur:composeEventHandlers(u,b),onMouseEnter:composeEventHandlers(f,y),onMouseLeave:composeEventHandlers(d,b),onTouchStart:composeEventHandlers(p,y)}]:[!1,m,{}]}function composeEventHandlers(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function PrefetchPageLinks({page:t,...e}){let{router:s}=useDataRouterContext2(),r=reactExports.useMemo(()=>matchRoutes(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?reactExports.createElement(PrefetchPageLinksImpl,{page:t,matches:r,...e}):null}function useKeyedPrefetchLinks(t){let{manifest:e,routeModules:s}=useFrameworkContext(),[r,a]=reactExports.useState([]);return reactExports.useEffect(()=>{let o=!1;return getKeyedPrefetchLinks(t,e,s).then(l=>{o||a(l)}),()=>{o=!0}},[t,e,s]),r}function PrefetchPageLinksImpl({page:t,matches:e,...s}){let r=useLocation(),{future:a,manifest:o,routeModules:l}=useFrameworkContext(),{basename:c}=useDataRouterContext2(),{loaderData:u,matches:f}=useDataRouterStateContext(),d=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,f,o,r,"data"),[t,e,f,o,r]),p=reactExports.useMemo(()=>getNewMatchesForLinks(t,e,f,o,r,"assets"),[t,e,f,o,r]),m=reactExports.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let E=new Set,C=!1;if(e.forEach(B=>{let D=o.routes[B.route.id];!D||!D.hasLoader||(!d.some(F=>F.route.id===B.route.id)&&B.route.id in u&&l[B.route.id]?.shouldRevalidate||D.hasClientLoader?C=!0:E.add(B.route.id))}),E.size===0)return[];let j=singleFetchUrl(t,c,a.unstable_trailingSlashAwareDataRequests,"data");return C&&E.size>0&&j.searchParams.set("_routes",e.filter(B=>E.has(B.route.id)).map(B=>B.route.id).join(",")),[j.pathname+j.search]},[c,a.unstable_trailingSlashAwareDataRequests,u,r,o,d,e,t,l]),y=reactExports.useMemo(()=>getModuleLinkHrefs(p,o),[p,o]),b=useKeyedPrefetchLinks(p);return reactExports.createElement(reactExports.Fragment,null,m.map(E=>reactExports.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...s})),y.map(E=>reactExports.createElement("link",{key:E,rel:"modulepreload",href:E,...s})),b.map(({key:E,link:C})=>reactExports.createElement("link",{key:E,nonce:s.nonce,...C,crossOrigin:C.crossOrigin??s.crossOrigin})))}function mergeRefs(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.13.0")}catch{}function HashRouter({basename:t,children:e,unstable_useTransitions:s,window:r}){let a=reactExports.useRef();a.current==null&&(a.current=createHashHistory({window:r,v5Compat:!0}));let o=a.current,[l,c]=reactExports.useState({action:o.action,location:o.location}),u=reactExports.useCallback(f=>{s===!1?c(f):reactExports.startTransition(()=>c(f))},[s]);return reactExports.useLayoutEffect(()=>o.listen(u),[o,u]),reactExports.createElement(Router,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:s})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:a,reloadDocument:o,replace:l,state:c,target:u,to:f,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:m,...y},b){let{basename:E,unstable_useTransitions:C}=reactExports.useContext(NavigationContext),j=typeof f=="string"&&ABSOLUTE_URL_REGEX2.test(f),B=parseToInfo(f,E);f=B.to;let D=useHref(f,{relative:a}),[F,q,V]=usePrefetchBehavior(r,y),ee=useLinkClickHandler(f,{replace:l,state:c,target:u,preventScrollReset:d,relative:a,viewTransition:p,unstable_defaultShouldRevalidate:m,unstable_useTransitions:C});function Q(Z){e&&e(Z),Z.defaultPrevented||ee(Z)}let W=reactExports.createElement("a",{...y,...V,href:B.absoluteURL||D,onClick:B.isExternal||o?e:Q,ref:mergeRefs(b,q),target:u,"data-discover":!j&&s==="render"?"true":void 0});return F&&!j?reactExports.createElement(reactExports.Fragment,null,W,reactExports.createElement(PrefetchPageLinks,{page:D})):W});Link$1.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:a=!1,style:o,to:l,viewTransition:c,children:u,...f},d){let p=useResolvedPath(l,{relative:f.relative}),m=useLocation(),y=reactExports.useContext(DataRouterStateContext),{navigator:b,basename:E}=reactExports.useContext(NavigationContext),C=y!=null&&useViewTransitionState(p)&&c===!0,j=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,B=m.pathname,D=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(B=B.toLowerCase(),D=D?D.toLowerCase():null,j=j.toLowerCase()),D&&E&&(D=stripBasename(D,E)||D);const F=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let q=B===j||!a&&B.startsWith(j)&&B.charAt(F)==="/",V=D!=null&&(D===j||!a&&D.startsWith(j)&&D.charAt(j.length)==="/"),ee={isActive:q,isPending:V,isTransitioning:C},Q=q?e:void 0,W;typeof r=="function"?W=r(ee):W=[r,q?"active":null,V?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let Z=typeof o=="function"?o(ee):o;return reactExports.createElement(Link$1,{...f,"aria-current":Q,className:W,ref:d,style:Z,to:l,viewTransition:c},typeof u=="function"?u(ee):u)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:a,state:o,method:l=defaultMethod,action:c,onSubmit:u,relative:f,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:m,...y},b)=>{let{unstable_useTransitions:E}=reactExports.useContext(NavigationContext),C=useSubmit(),j=useFormAction(c,{relative:f}),B=l.toLowerCase()==="get"?"get":"post",D=typeof c=="string"&&ABSOLUTE_URL_REGEX2.test(c),F=q=>{if(u&&u(q),q.defaultPrevented)return;q.preventDefault();let V=q.nativeEvent.submitter,ee=V?.getAttribute("formmethod")||l,Q=()=>C(V||q.currentTarget,{fetcherKey:e,method:ee,navigate:s,replace:a,state:o,relative:f,preventScrollReset:d,viewTransition:p,unstable_defaultShouldRevalidate:m});E&&s!==!1?reactExports.startTransition(()=>Q()):Q()};return reactExports.createElement("form",{ref:b,method:B,action:j,onSubmit:r?u:F,...y,"data-discover":!D&&t==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(t){let e=reactExports.useContext(DataRouterContext);return invariant$1(e,getDataRouterConsoleError2(t)),e}function useLinkClickHandler(t,{target:e,replace:s,state:r,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let f=useNavigate(),d=useLocation(),p=useResolvedPath(t,{relative:o});return reactExports.useCallback(m=>{if(shouldProcessLinkClick(m,e)){m.preventDefault();let y=s!==void 0?s:createPath(d)===createPath(p),b=()=>f(t,{replace:y,state:r,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c});u?reactExports.startTransition(()=>b()):b()}},[d,f,p,s,r,e,t,a,o,l,c,u])}function useSearchParams(t){warning$3(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=reactExports.useRef(createSearchParams(t)),s=reactExports.useRef(!1),r=useLocation(),a=reactExports.useMemo(()=>getSearchParamsForLocation(r.search,s.current?null:e.current),[r.search]),o=useNavigate(),l=reactExports.useCallback((c,u)=>{const f=createSearchParams(typeof c=="function"?c(new URLSearchParams(a)):c);s.current=!0,o("?"+f,u)},[o,a]);return[a,l]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:t}=useDataRouterContext3("useSubmit"),{basename:e}=reactExports.useContext(NavigationContext),s=useRouteId(),r=t.fetch,a=t.navigate;return reactExports.useCallback(async(o,l={})=>{let{action:c,method:u,encType:f,formData:d,body:p}=getFormSubmissionInfo(o,e);if(l.navigate===!1){let m=l.fetcherKey||getUniqueFetcherId();await r(m,s,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:d,body:p,formMethod:l.method||u,formEncType:l.encType||f,flushSync:l.flushSync})}else await a(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:d,body:p,formMethod:l.method||u,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:s,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,a,e,s])}function useFormAction(t,{relative:e}={}){let{basename:s}=reactExports.useContext(NavigationContext),r=reactExports.useContext(RouteContext);invariant$1(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...useResolvedPath(t||".",{relative:e})},l=useLocation();if(t==null){o.search=l.search;let c=new URLSearchParams(o.search),u=c.getAll("index");if(u.some(d=>d==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let d=c.toString();o.search=d?`?${d}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(o.pathname=o.pathname==="/"?s:joinPaths([s,o.pathname])),createPath(o)}function useViewTransitionState(t,{relative:e}={}){let s=reactExports.useContext(ViewTransitionContext);invariant$1(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=useDataRouterContext3("useViewTransitionState"),a=useResolvedPath(t,{relative:e});if(!s.isTransitioning)return!1;let o=stripBasename(s.currentLocation.pathname,r)||s.currentLocation.pathname,l=stripBasename(s.nextLocation.pathname,r)||s.nextLocation.pathname;return matchPath(a.pathname,l)!=null||matchPath(a.pathname,o)!=null}var reactDomExports=requireReactDom();const toKebabCase=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),toPascalCase=t=>{const e=toCamelCase(t);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),hasA11yProp=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon=reactExports.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:l,...c},u)=>reactExports.createElement("svg",{ref:u,...defaultAttributes,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:mergeClasses("lucide",a),...!o&&!hasA11yProp(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,d])=>reactExports.createElement(f,d)),...Array.isArray(o)?o:[o]]));const createLucideIcon=(t,e)=>{const s=reactExports.forwardRef(({className:r,...a},o)=>reactExports.createElement(Icon,{ref:o,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(t))}`,`lucide-${t}`,r),...a}));return s.displayName=toPascalCase(t),s};const __iconNode$1r=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Activity=createLucideIcon("activity",__iconNode$1r);const __iconNode$1q=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],ArrowDownLeft=createLucideIcon("arrow-down-left",__iconNode$1q);const __iconNode$1p=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]],ArrowDownUp=createLucideIcon("arrow-down-up",__iconNode$1p);const __iconNode$1o=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ArrowDown=createLucideIcon("arrow-down",__iconNode$1o);const __iconNode$1n=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$1n);const __iconNode$1m=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],ArrowRightLeft=createLucideIcon("arrow-right-left",__iconNode$1m);const __iconNode$1l=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$1l);const __iconNode$1k=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],ArrowUpRight=createLucideIcon("arrow-up-right",__iconNode$1k);const __iconNode$1j=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],AtSign=createLucideIcon("at-sign",__iconNode$1j);const __iconNode$1i=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$1i);const __iconNode$1h=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Box=createLucideIcon("box",__iconNode$1h);const __iconNode$1g=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],CheckCheck=createLucideIcon("check-check",__iconNode$1g);const __iconNode$1f=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$1f);const __iconNode$1e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$1e);const __iconNode$1d=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ChevronLeft=createLucideIcon("chevron-left",__iconNode$1d);const __iconNode$1c=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ChevronRight=createLucideIcon("chevron-right",__iconNode$1c);const __iconNode$1b=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$1b);const __iconNode$1a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$1a);const __iconNode$19=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$19);const __iconNode$18=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CircleCheck=createLucideIcon("circle-check",__iconNode$18);const __iconNode$17=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$17);const __iconNode$16=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock=createLucideIcon("clock",__iconNode$16);const __iconNode$15=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],CloudOff=createLucideIcon("cloud-off",__iconNode$15);const __iconNode$14=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Cloud=createLucideIcon("cloud",__iconNode$14);const __iconNode$13=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Coins=createLucideIcon("coins",__iconNode$13);const __iconNode$12=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$12);const __iconNode$11=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],CornerDownRight=createLucideIcon("corner-down-right",__iconNode$11);const __iconNode$10=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$10);const __iconNode$$=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],EllipsisVertical=createLucideIcon("ellipsis-vertical",__iconNode$$);const __iconNode$_=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$_);const __iconNode$Z=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$Z);const __iconNode$Y=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$Y);const __iconNode$X=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],FileBraces=createLucideIcon("file-braces",__iconNode$X);const __iconNode$W=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$W);const __iconNode$V=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Flame=createLucideIcon("flame",__iconNode$V);const __iconNode$U=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],Gamepad2=createLucideIcon("gamepad-2",__iconNode$U);const __iconNode$T=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],Github=createLucideIcon("github",__iconNode$T);const __iconNode$S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$S);const __iconNode$R=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],Handshake=createLucideIcon("handshake",__iconNode$R);const __iconNode$Q=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Hash$1=createLucideIcon("hash",__iconNode$Q);const __iconNode$P=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],History=createLucideIcon("history",__iconNode$P);const __iconNode$O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Info=createLucideIcon("info",__iconNode$O);const __iconNode$N=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],KeyRound=createLucideIcon("key-round",__iconNode$N);const __iconNode$M=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Key=createLucideIcon("key",__iconNode$M);const __iconNode$L=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Layers=createLucideIcon("layers",__iconNode$L);const __iconNode$K=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Link=createLucideIcon("link",__iconNode$K);const __iconNode$J=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$J);const __iconNode$I=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$I);const __iconNode$H=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$H);const __iconNode$G=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Maximize2=createLucideIcon("maximize-2",__iconNode$G);const __iconNode$F=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Menu=createLucideIcon("menu",__iconNode$F);const __iconNode$E=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],MessageCirclePlus=createLucideIcon("message-circle-plus",__iconNode$E);const __iconNode$D=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],MessageCircle=createLucideIcon("message-circle",__iconNode$D);const __iconNode$C=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 8v6",key:"1ib9pf"}],["path",{d:"M9 11h6",key:"1fldmi"}]],MessageSquarePlus=createLucideIcon("message-square-plus",__iconNode$C);const __iconNode$B=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],MessageSquare=createLucideIcon("message-square",__iconNode$B);const __iconNode$A=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Minimize2=createLucideIcon("minimize-2",__iconNode$A);const __iconNode$z=[["path",{d:"M5 12h14",key:"1ays0h"}]],Minus=createLucideIcon("minus",__iconNode$z);const __iconNode$y=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Moon=createLucideIcon("moon",__iconNode$y);const __iconNode$x=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],PanelLeftClose=createLucideIcon("panel-left-close",__iconNode$x);const __iconNode$w=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],PanelLeft=createLucideIcon("panel-left",__iconNode$w);const __iconNode$v=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],Plug=createLucideIcon("plug",__iconNode$v);const __iconNode$u=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$u);const __iconNode$t=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],QrCode=createLucideIcon("qr-code",__iconNode$t);const __iconNode$s=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Receipt=createLucideIcon("receipt",__iconNode$s);const __iconNode$r=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],RefreshCw=createLucideIcon("refresh-cw",__iconNode$r);const __iconNode$q=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Reply=createLucideIcon("reply",__iconNode$q);const __iconNode$p=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$p);const __iconNode$o=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$o);const __iconNode$n=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$n);const __iconNode$m=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],ShieldAlert=createLucideIcon("shield-alert",__iconNode$m);const __iconNode$l=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ShieldCheck=createLucideIcon("shield-check",__iconNode$l);const __iconNode$k=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Shield=createLucideIcon("shield",__iconNode$k);const __iconNode$j=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ShoppingBag=createLucideIcon("shopping-bag",__iconNode$j);const __iconNode$i=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ShoppingCart=createLucideIcon("shopping-cart",__iconNode$i);const __iconNode$h=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Sparkles=createLucideIcon("sparkles",__iconNode$h);const __iconNode$g=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],SquareCheckBig=createLucideIcon("square-check-big",__iconNode$g);const __iconNode$f=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$f);const __iconNode$e=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Store=createLucideIcon("store",__iconNode$e);const __iconNode$d=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$d);const __iconNode$c=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Tag=createLucideIcon("tag",__iconNode$c);const __iconNode$b=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$b);const __iconNode$a=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],TrendingUp=createLucideIcon("trending-up",__iconNode$a);const __iconNode$9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TriangleAlert=createLucideIcon("triangle-alert",__iconNode$9);const __iconNode$8=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Trophy=createLucideIcon("trophy",__iconNode$8);const __iconNode$7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$7);const __iconNode$6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],UserMinus=createLucideIcon("user-minus",__iconNode$6);const __iconNode$5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$5);const __iconNode$4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Users=createLucideIcon("users",__iconNode$4);const __iconNode$3=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Wallet=createLucideIcon("wallet",__iconNode$3);const __iconNode$2=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Wifi=createLucideIcon("wifi",__iconNode$2);const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode),LayoutGroupContext=reactExports.createContext({});function useConstant(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}const isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const clamp=(t,e,s)=>s>e?e:s<t?t:s;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject$2(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const noop$1=t=>t,combineFunctions=(t,e)=>s=>e(t(s)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,s,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,r);else for(let o=0;o<a;o++){const l=this.subscriptions[o];l&&l(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,e){return e?t*(1e3/e):0}const wrap=(t,e,s)=>{const r=e-t;return((s-t)%r+r)%r+t},calcBezier=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,s,r,a){let o,l,c=0;do l=e+(s-e)/2,o=calcBezier(l,r,a)-t,o>0?s=l:e=l;while(Math.abs(o)>subdivisionPrecision&&++c<subdivisionMaxIterations);return l}function cubicBezier(t,e,s,r){if(t===e&&s===r)return noop$1;const a=o=>binarySubdivide(o,0,1,t,s);return o=>o===0||o===1?o:calcBezier(a(o),e,r)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number";function getEasingForSegment(t,e){return isEasingArray(t)?t[wrap(0,t.length,e)]:t}const isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,s,r,a]=t;return cubicBezier(e,s,r,a)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(t,e){let s=new Set,r=new Set,a=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(d){l.has(d)&&(f.schedule(d),t()),d(c)}const f={schedule:(d,p=!1,m=!1)=>{const b=m&&a?s:r;return p&&l.add(d),b.has(d)||b.add(d),d},cancel:d=>{r.delete(d),l.delete(d)},process:d=>{if(c=d,a){o=!0;return}a=!0,[s,r]=[r,s],s.forEach(u),s.clear(),a=!1,o&&(o=!1,f.process(d))}};return f}const maxElapsed=40;function createRenderBatcher(t,e){let s=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>s=!0,l=stepsOrder.reduce((D,F)=>(D[F]=createRenderStep(o),D),{}),{setup:c,read:u,resolveKeyframes:f,preUpdate:d,update:p,preRender:m,render:y,postRender:b}=l,E=()=>{const D=MotionGlobalConfig.useManualTiming?a.timestamp:performance.now();s=!1,MotionGlobalConfig.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(D-a.timestamp,maxElapsed),1)),a.timestamp=D,a.isProcessing=!0,c.process(a),u.process(a),f.process(a),d.process(a),p.process(a),m.process(a),y.process(a),b.process(a),a.isProcessing=!1,s&&e&&(r=!1,t(E))},C=()=>{s=!0,r=!0,a.isProcessing||t(E)};return{schedule:stepsOrder.reduce((D,F)=>{const q=l[F];return D[F]=(V,ee=!1,Q=!1)=>(s||C(),q.schedule(V,ee,Q)),D},{}),cancel:D=>{for(let F=0;F<stepsOrder.length;F++)l[stepsOrder[F]].cancel(D)},state:a,steps:l}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha={...number,transform:t=>clamp(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(t)||e&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,e)),splitColor=(t,e,s)=>r=>{if(typeof r!="string")return r;const[a,o,l,c]=r.match(floatRegex);return{[t]:parseFloat(a),[e]:parseFloat(o),[s]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},clampRgbUnit=t=>clamp(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(r))+")"};function parseHex(t){let e="",s="",r="",a="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),a=t.substring(4,5),e+=e,s+=s,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(r))+")"},color={test:t=>rgba.test(t)||hex.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t),getAnimatableNone:t=>{const e=color.parse(t);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){return isNaN(t)&&typeof t=="string"&&(t.match(floatRegex)?.length||0)+(t.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},a=[];let o=0;const c=e.replace(complexRegex,u=>(color.test(u)?(r.color.push(o),a.push(COLOR_TOKEN),s.push(color.parse(u))):u.startsWith(VAR_FUNCTION_TOKEN)?(r.var.push(o),a.push(VAR_TOKEN),s.push(u)):(r.number.push(o),a.push(NUMBER_TOKEN),s.push(parseFloat(u))),++o,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:c,indexes:r,types:a}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:s}=analyseComplexValue(t),r=e.length;return a=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],a[l]!==void 0){const c=s[l];c===NUMBER_TOKEN?o+=sanitize(a[l]):c===COLOR_TOKEN?o+=color.transform(a[l]):o+=a[l]}return o}}const convertNumbersToZero=t=>typeof t=="number"?0:color.test(t)?color.getAnimatableNone(t):t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let a=0,o=0,l=0;if(!e)a=o=l=s;else{const c=s<.5?s*(1+e):s+e-s*e,u=2*s-c;a=hueToRgb(u,c,t+1/3),o=hueToRgb(u,c,t),l=hueToRgb(u,c,t-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function mixImmediate(t,e){return s=>s>0?e:t}const mixNumber$1=(t,e,s)=>t+(e-t)*s,mixLinearColor=(t,e,s)=>{const r=t*t,a=s*(e*e-r)+r;return a<0?0:Math.sqrt(a)},colorTypes=[hex,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let s=e.parse(t);return e===hsla&&(s=hslaToRgba(s)),s}const mixColor=(t,e)=>{const s=asRGBA(t),r=asRGBA(e);if(!s||!r)return mixImmediate(t,e);const a={...s};return o=>(a.red=mixLinearColor(s.red,r.red,o),a.green=mixLinearColor(s.green,r.green,o),a.blue=mixLinearColor(s.blue,r.blue,o),a.alpha=mixNumber$1(s.alpha,r.alpha,o),rgba.transform(a))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function mixNumber(t,e){return s=>mixNumber$1(t,e,s)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const s=[...t],r=s.length,a=t.map((o,l)=>getMixer(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)s[l]=a[l](o);return s}}function mixObject(t,e){const s={...t,...e},r={};for(const a in s)t[a]!==void 0&&e[a]!==void 0&&(r[a]=getMixer(t[a])(t[a],e[a]));return a=>{for(const o in r)s[o]=r[o](a);return s}}function matchOrder(t,e){const s=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],l=t.indexes[o][r[o]],c=t.values[l]??0;s[a]=c,r[o]++}return s}const mixComplex=(t,e)=>{const s=complex.createTransformer(e),r=analyseComplexValue(t),a=analyseComplexValue(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?invisibleValues.has(t)&&!a.values.length||invisibleValues.has(e)&&!r.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(r,a),a.values),s):mixImmediate(t,e)};function mix(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?mixNumber$1(t,e,s):getMixer(t)(t,e)}const frameloopDriver=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>frame.update(e,s),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,e,s=10)=>{let r="";const a=Math.max(Math.round(e/s),2);for(let o=0;o<a;o++)r+=Math.round(t(o/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<maxGeneratorDuration;)e+=s,r=t.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(t,e=100,s){const r=s({...t,keyframes:[0,e]}),a=Math.min(calcGeneratorDuration(r),maxGeneratorDuration);return{type:"keyframes",ease:o=>r.next(a*o).value/e,duration:millisecondsToSeconds(a)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,s){const r=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(s-t(r),e-r)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:r=springDefaults.mass}){let a,o,l=1-e;l=clamp(springDefaults.minDamping,springDefaults.maxDamping,l),t=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),l<1?(a=f=>{const d=f*l,p=d*t,m=d-s,y=calcAngularFreq(f,l),b=Math.exp(-p);return safeMin-m/y*b},o=f=>{const p=f*l*t,m=p*s+s,y=Math.pow(l,2)*Math.pow(f,2)*t,b=Math.exp(-p),E=calcAngularFreq(Math.pow(f,2),l);return(-a(f)+safeMin>0?-1:1)*((m-y)*b)/E}):(a=f=>{const d=Math.exp(-f*t),p=(f-s)*t+1;return-safeMin+d*p},o=f=>{const d=Math.exp(-f*t),p=(s-f)*(t*t);return d*p});const c=5/t,u=approximateRoot(a,o,c);if(t=secondsToMilliseconds(t),isNaN(u))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const f=Math.pow(u,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:t}}}const rootIterations=12;function approximateRoot(t,e,s){let r=s;for(let a=1;a<rootIterations;a++)r=r-t(r)/e(r);return r}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(s=>t[s]!==void 0)}function getSpringOptions(t){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),a=r*r,o=2*clamp(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:springDefaults.mass,stiffness:a,damping:o}}else{const s=findSpring(t);e={...e,...s,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(t=springDefaults.visualDuration,e=springDefaults.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:a}=s;const o=s.keyframes[0],l=s.keyframes[s.keyframes.length-1],c={done:!1,value:o},{stiffness:u,damping:f,mass:d,duration:p,velocity:m,isResolvedFromDuration:y}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),b=m||0,E=f/(2*Math.sqrt(u*d)),C=l-o,j=millisecondsToSeconds(Math.sqrt(u/d)),B=Math.abs(C)<5;r||(r=B?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),a||(a=B?springDefaults.restDelta.granular:springDefaults.restDelta.default);let D;if(E<1){const q=calcAngularFreq(j,E);D=V=>{const ee=Math.exp(-E*j*V);return l-ee*((b+E*j*C)/q*Math.sin(q*V)+C*Math.cos(q*V))}}else if(E===1)D=q=>l-Math.exp(-j*q)*(C+(b+j*C)*q);else{const q=j*Math.sqrt(E*E-1);D=V=>{const ee=Math.exp(-E*j*V),Q=Math.min(q*V,300);return l-ee*((b+E*j*C)*Math.sinh(Q)+q*C*Math.cosh(Q))/q}}const F={calculatedDuration:y&&p||null,next:q=>{const V=D(q);if(y)c.done=q>=p;else{let ee=q===0?b:0;E<1&&(ee=q===0?secondsToMilliseconds(b):calcGeneratorVelocity(D,q,V));const Q=Math.abs(ee)<=r,W=Math.abs(l-V)<=a;c.done=Q&&W}return c.value=c.done?l:V,c},toString:()=>{const q=Math.min(calcGeneratorDuration(F),maxGeneratorDuration),V=generateLinearEasing(ee=>F.next(q*ee).value,q,30);return q+"ms "+V},toTransition:()=>{}};return F}spring.applyToOptions=t=>{const e=createGeneratorEasing(t,100,spring);return t.ease=e.ease,t.duration=secondsToMilliseconds(e.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:u,restDelta:f=.5,restSpeed:d}){const p=t[0],m={done:!1,value:p},y=Q=>c!==void 0&&Q<c||u!==void 0&&Q>u,b=Q=>c===void 0?u:u===void 0||Math.abs(c-Q)<Math.abs(u-Q)?c:u;let E=s*e;const C=p+E,j=l===void 0?C:l(C);j!==C&&(E=j-p);const B=Q=>-E*Math.exp(-Q/r),D=Q=>j+B(Q),F=Q=>{const W=B(Q),Z=D(Q);m.done=Math.abs(W)<=f,m.value=m.done?j:Z};let q,V;const ee=Q=>{y(m.value)&&(q=Q,V=spring({keyframes:[m.value,b(m.value)],velocity:calcGeneratorVelocity(D,Q,m.value),damping:a,stiffness:o,restDelta:f,restSpeed:d}))};return ee(0),{calculatedDuration:null,next:Q=>{let W=!1;return!V&&q===void 0&&(W=!0,F(Q),ee(Q)),q!==void 0&&Q>=q?V.next(Q-q):(!W&&F(Q),m)}}}function createMixers(t,e,s){const r=[],a=s||MotionGlobalConfig.mix||mix,o=t.length-1;for(let l=0;l<o;l++){let c=a(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||noop$1:e;c=pipe(u,c)}r.push(c)}return r}function interpolate(t,e,{clamp:s=!0,ease:r,mixer:a}={}){const o=t.length;if(invariant(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=createMixers(e,r,a),u=c.length,f=d=>{if(l&&d<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(d<t[p+1]);p++);const m=progress(t[p],t[p+1],d);return c[p](m)};return s?d=>f(clamp(t[0],t[o-1],d)):f}function fillOffset(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const a=progress(0,e,r);t.push(mixNumber$1(s,1,a))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(s=>s*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const a=isEasingArray(r)?r.map(easingDefinitionToFunction):easingDefinitionToFunction(r),o={done:!1,value:e[0]},l=convertOffsetToTimes(s&&s.length===e.length?s:defaultOffset(e),t),c=interpolate(l,e,{ease:Array.isArray(a)?a:defaultEasing(e,a)});return{calculatedDuration:t,next:u=>(o.value=c(u),o.done=u>=t,o)}}const isNotNull$1=t=>t!==null;function getFinalKeyframe$1(t,{repeat:e,repeatType:s="loop"},r,a=1){const o=t.filter(isNotNull$1),c=a<0||e&&s!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:s=keyframes,repeat:r=0,repeatDelay:a=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const u=s||keyframes;u!==keyframes&&typeof c[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(c[0],c[1])),c=[0,100]);const f=u({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=calcGeneratorDuration(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=f}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:r,totalDuration:a,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:d,repeat:p,repeatType:m,repeatDelay:y,type:b,onUpdate:E,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const j=this.currentTime-f*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?j<0:j>a;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let D=this.currentTime,F=r;if(p){const Q=Math.min(this.currentTime,a)/c;let W=Math.floor(Q),Z=Q%1;!Z&&Q>=1&&(Z=1),Z===1&&W--,W=Math.min(W,p+1),W%2&&(m==="reverse"?(Z=1-Z,y&&(Z-=y/c)):m==="mirror"&&(F=l)),D=clamp(0,1,Z)*c}const q=B?{done:!1,value:d[0]}:F.next(D);o&&(q.value=o(q.value));let{done:V}=q;!B&&u!==null&&(V=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const ee=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return ee&&b!==inertia&&(q.value=getFinalKeyframe$1(d,this.options,C,this.speed)),E&&E(q.value),ee&&this.finish(),q}then(e,s){return this.finished.then(e,s)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+millisecondsToSeconds(e)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:s}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const radToDeg=t=>t*180/Math.PI,rotate=t=>{const e=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate,rotateZ:rotate,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,e){if(!t||t==="none")return defaultTransformValue(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(s)r=matrix3dParsers,a=s;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=matrix2dParsers,a=c}if(!a)return defaultTransformValue(e);const o=r[e],l=a[1].split(",").map(convertTransformToNumber);return typeof o=="function"?o(l):l[o]}const readTransformValue=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return parseValueFromTransform(s,e)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>parseValueFromTransform(e,"x"),y:(t,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const a=removeNonTranslationalTransform(r);a.length&&(s.set(r,a),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=s.get(r);a&&a.forEach(([o,l])=>{r.getValue(o)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,s,r,a,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=a,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:a}=this;if(e[0]===null){const o=a?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&s){const c=r.readValue(s,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),a&&o===void 0&&a.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle(t,e,s){isCSSVar(e)?t.style.setProperty(e,s):t.style[e]=s}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,e){const s=memo(t);return()=>supportsFlags[e]??s()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,e):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(s=>mapEasingToNativeEasing(s,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,s,{delay:r=0,duration:a=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:u}={},f=void 0){const d={[e]:s};u&&(d.offset=u);const p=mapEasingToNativeEasing(c,a);Array.isArray(p)&&(d.easing=p);const m={delay:r,duration:a,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(m.pseudoElement=f),t.animate(d,m)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...e}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:s,name:r,keyframes:a,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,invariant(typeof e.type!="string");const f=applyGeneratorOptions(e);this.animation=startWaapiAnimation(s,r,a,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=getFinalKeyframe$1(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(d):setStyle(s,r,d),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const e=this.options?.element;!this.isPseudoElement&&e?.isConnected&&this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+millisecondsToSeconds(e)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$1):s(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:r,onComplete:a,element:o,...l}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const c=new JSAnimation({...l,autoplay:!1}),u=Math.max(sampleDelta,time.now()-this.startTime),f=clamp(0,sampleDelta,u-sampleDelta);s.setWithVelocity(c.sample(Math.max(0,u-f)).value,c.sample(u).value,f),c.stop()}}const isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function canAnimate(t,e,s,r){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=isAnimatable(a,e),c=isAnimatable(o,e);return!l||!c?!1:hasKeyframesChanged(t)||(s==="spring"||isGenerator(s))&&r}function makeAnimationInstant(t){t.duration=0,t.type="keyframes"}const acceleratedValues$1=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){const{motionValue:e,name:s,repeatDelay:r,repeatType:a,damping:o,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return supportsWaapi()&&s&&acceleratedValues$1.has(s)&&(s!=="transform"||!f)&&!u&&!r&&a!=="mirror"&&o!==0&&l!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:u,motionValue:f,element:d,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const m={autoplay:e,delay:s,type:r,repeat:a,repeatDelay:o,repeatType:l,name:u,motionValue:f,element:d,...p},y=d?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new y(c,(b,E,C)=>this.onKeyframesResolved(b,E,m,!C),u,f,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,s,r,a){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:u,isHandoff:f,onUpdate:d}=r;this.resolvedAt=time.now(),canAnimate(e,o,l,c)||((MotionGlobalConfig.instantAnimations||!u)&&d?.(getFinalKeyframe$1(e,r,s)),e[0]=e[e.length-1],makeAnimationInstant(r),r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:e},y=!f&&supportsBrowserAnimation(m),b=m.motionValue?.owner?.current,E=y?new NativeAnimationExtended({...m,element:b}):new JSAnimation(m);E.finished.then(()=>{this.notifyFinished()}).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}class GroupAnimation{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=s}attachTimeline(e){const s=this.animations.map(r=>r.attachTimeline(e));return()=>{s.forEach((r,a)=>{r&&r(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return getMax(this.animations,"duration")}get iterationDuration(){return getMax(this.animations,"iterationDuration")}runAll(e){this.animations.forEach(s=>s[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function getMax(t,e){let s=0;for(let r=0;r<t.length;r++){const a=t[r][e];a!==null&&a>s&&(s=a)}return s}class GroupAnimationWithThen extends GroupAnimation{then(e,s){return this.finished.finally(e).then(()=>{})}}function calcChildStagger(t,e,s,r=0,a=1){const o=Array.from(t).sort((f,d)=>f.sortNodePosition(d)).indexOf(e),l=t.size,c=(l-1)*r;return typeof s=="function"?s(o,l):a===1?o*r:c-o*r}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,s,r,a]=e;return[`--${s??r}`,a]}function getVariableValue(t,e,s=1){const[r,a]=parseCSSVariable(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return isNumericalString(l)?parseFloat(l):l}return isCSSVariableToken(a)?getVariableValue(a,e,s+1):a}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease,isNotNull=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:s="loop"},r){const a=t.filter(isNotNull),o=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[o]}function resolveTransition(t,e){if(t?.inherit&&e){const{inherit:s,...r}=t;return{...e,...r}}return t}function getValueTransition$1(t,e){const s=t?.[e]??t?.default??t;return s!==t?resolveTransition(s,t):s}function isTransitionDefined({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:c,from:u,elapsed:f,...d}){return!!Object.keys(d).length}const animateMotionValue=(t,e,s,r={},a,o)=>l=>{const c=getValueTransition$1(r,t)||{},u=c.delay||r.delay||0;let{elapsed:f=0}=r;f=f-secondsToMilliseconds(u);const d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:m=>{e.set(m),c.onUpdate&&c.onUpdate(m)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:a};isTransitionDefined(c)||Object.assign(d,getDefaultTransition(t,d)),d.duration&&(d.duration=secondsToMilliseconds(d.duration)),d.repeatDelay&&(d.repeatDelay=secondsToMilliseconds(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(makeAnimationInstant(d),d.delay===0&&(p=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations||a?.shouldSkipAnimations)&&(p=!0,makeAnimationInstant(d),d.delay=0),d.allowFlatten=!c.type&&!c.ease,p&&!o&&e.get()!==void 0){const m=getFinalKeyframe(d.keyframes,c);if(m!==void 0){frame.update(()=>{d.onUpdate(m),d.onComplete()});return}}return c.isSync?new JSAnimation(d):new AsyncMotionValueAnimation(d)};function getValueState(t){const e=[{},{}];return t?.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function resolveVariantFromProps(t,e,s,r){if(typeof e=="function"){const[a,o]=getValueState(r);e=e(s!==void 0?s:t.custom,a,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,o]=getValueState(r);e=e(s!==void 0?s:t.custom,a,o)}return e}function resolveVariant(t,e,s){const r=t.getProps();return resolveVariantFromProps(r,e,s!==void 0?s:r.custom,t)}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t)),collectMotionValues={current:void 0};class MotionValue{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const a=time.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new SubscriptionManager);const r=this.events[e].add(s);return e==="change"?()=>{r(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,motionValue(s))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,e){const s=resolveVariant(t,e);let{transitionEnd:r={},transition:a={},...o}=s||{};o={...o,...r};for(const l in o){const c=resolveFinalValueInKeyframes(o[l]);setMotionValue(t,l,c)}}const isMotionValue=t=>!!(t&&t.getVelocity);function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const s=t.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(e);if(!s&&MotionGlobalConfig.WillChange){const r=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function camelToDash(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function animateTarget(t,e,{delay:s=0,transitionOverride:r,type:a}={}){let{transition:o,transitionEnd:l,...c}=e;const u=t.getDefaultTransition();o=o?resolveTransition(o,u):u;const f=o?.reduceMotion;r&&(o=r);const d=[],p=a&&t.animationState&&t.animationState.getState()[a];for(const m in c){const y=t.getValue(m,t.latestValues[m]??null),b=c[m];if(b===void 0||p&&shouldBlockAnimation(p,m))continue;const E={delay:s,...getValueTransition$1(o||{},m)},C=y.get();if(C!==void 0&&!y.isAnimating&&!Array.isArray(b)&&b===C&&!E.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const F=getOptimisedAppearId(t);if(F){const q=window.MotionHandoffAnimation(F,m,frame);q!==null&&(E.startTime=q,j=!0)}}addValueToWillChange(t,m);const B=f??t.shouldReduceMotion;y.start(animateMotionValue(m,y,b,B&&positionalKeys.has(m)?{type:!1}:E,t,j));const D=y.animation;D&&d.push(D)}if(l){const m=()=>frame.update(()=>{l&&setTarget(t,l)});d.length?Promise.all(d).then(m):m()}return d}function animateVariant(t,e,s={}){const r=resolveVariant(t,e,s.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const o=r?()=>Promise.all(animateTarget(t,r,s)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:p}=a;return animateChildren(t,e,u,f,d,p,s)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,f]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>f())}else return Promise.all([o(),l(s.delay)])}function animateChildren(t,e,s=0,r=0,a=0,o=1,l){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(animateVariant(u,e,{...l,delay:s+(typeof r=="function"?0:r)+calcChildStagger(t.variantChildren,u,r,a,o)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function animateVisualElement(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(o=>animateVariant(t,o,s));r=Promise.all(a)}else if(typeof e=="string")r=animateVariant(t,e,s);else{const a=typeof e=="function"?resolveVariant(t,e,s.custom):e;r=Promise.all(animateTarget(t,a,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}const auto={test:t=>t==="auto",parse:t=>t},testValueType=t=>e=>e.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(floatRegex)||[];if(!r)return t;const a=s.replace(r,"");let o=maxDefaults.has(e)?1:0;return r!==s&&(o*=100),e+"("+o+a+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,inset:px,insetBlock:px,insetBlockStart:px,insetBlockEnd:px,insetInline:px,insetInlineStart:px,insetInlineEnd:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,paddingBlock:px,paddingBlockStart:px,paddingBlockEnd:px,paddingInline:px,paddingInlineStart:px,paddingInlineEnd:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,marginBlock:px,marginBlockStart:px,marginBlockEnd:px,marginInline:px,marginInlineStart:px,marginInlineEnd:px,fontSize:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let s=getDefaultValueType(t);return s!==filter&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,s){let r=0,a;for(;r<t.length&&!a;){const o=t[r];typeof o=="string"&&!invalidTemplates.has(o)&&analyseComplexValue(o).values.length&&(a=t[r]),r++}if(a&&s)for(const o of e)t[o]=getAnimatableNone(s,a)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,s,r,a,o){super(e,s,r,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),isCSSVariableToken(p))){const m=getVariableValue(p,s.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(r)||e.length!==2)return;const[a,o]=e,l=findDimensionValueType(a),c=findDimensionValueType(o),u=containsCSSVariable(a),f=containsCSSVariable(o);if(u!==f&&positionalValues[r]){this.needsMeasurement=!0;return}if(l!==c)if(isNumOrPxType(l)&&isNumOrPxType(c))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else positionalValues[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let a=0;a<e.length;a++)(e[a]===null||isNone(e[a]))&&r.push(a);r.length&&makeNoneKeyframesAnimatable(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){const{element:e,name:s,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=positionalValues[s](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function resolveElements(t,e,s){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const a=s?.[t]??r.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t).filter(r=>r!=null)}const getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function isHTMLElement(t){return isObject$2(t)&&"offsetHeight"in t}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,e){const s=resolveElements(t),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[s,a,()=>r.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,e,s={}){const[r,a,o]=setupGesture(t,s);return r.forEach(l=>{let c=!1,u=!1,f;const d=()=>{l.removeEventListener("pointerleave",b)},p=C=>{f&&(f(C),f=void 0),d()},m=C=>{c=!1,window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",m),u&&(u=!1,p(C))},y=()=>{c=!0,window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",m,a)},b=C=>{if(C.pointerType!=="touch"){if(c){u=!0;return}p(C)}},E=C=>{if(!isValidHover(C))return;u=!1;const j=e(l,C);typeof j=="function"&&(f=j,l.addEventListener("pointerleave",b,a))};l.addEventListener("pointerenter",E,a),l.addEventListener("pointerdown",y,a)}),o}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,keyboardAccessibleElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return keyboardAccessibleElements.has(t.tagName)||t.isContentEditable===!0}const textInputElements=new Set(["INPUT","SELECT","TEXTAREA"]);function isElementTextInput(t){return textInputElements.has(t.tagName)||t.isContentEditable===!0}const isPressing=new WeakSet;function filterEvents(t){return e=>{e.key==="Enter"&&t(e)}}function firePointerEvent(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const a=filterEvents(()=>{firePointerEvent(s,"up")}),o=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",o,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}const claimedPointerDownEvents=new WeakSet;function press(t,e,s={}){const[r,a,o]=setupGesture(t,s),l=c=>{const u=c.currentTarget;if(!isValidPressEvent(c)||claimedPointerDownEvents.has(c))return;isPressing.add(u),s.stopPropagation&&claimedPointerDownEvents.add(c);const f=e(u,c),d=(y,b)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),isPressing.has(u)&&isPressing.delete(u),isValidPressEvent(y)&&typeof f=="function"&&f(y,{success:b})},p=y=>{d(y,u===window||u===document||s.useGlobalTarget||isNodeOrChild(u,y.target))},m=y=>{d(y,!1)};window.addEventListener("pointerup",p,a),window.addEventListener("pointercancel",m,a)};return r.forEach(c=>{(s.useGlobalTarget?window:c).addEventListener("pointerdown",l,a),isHTMLElement(c)&&(c.addEventListener("focus",f=>enableKeyboardPress(f,a)),!isElementKeyboardAccessible(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function isSVGElement$1(t){return isObject$2(t)&&"ownerSVGElement"in t}const resizeHandlers=new WeakMap;let observer;const getSize=(t,e,s)=>(r,a)=>a&&a[0]?a[0][t+"Size"]:isSVGElement$1(r)&&"getBBox"in r?r.getBBox()[e]:r[s],getWidth=getSize("inline","width","offsetWidth"),getHeight=getSize("block","height","offsetHeight");function notifyTarget({target:t,borderBoxSize:e}){resizeHandlers.get(t)?.forEach(s=>{s(t,{get width(){return getWidth(t,e)},get height(){return getHeight(t,e)}})})}function notifyAll(t){t.forEach(notifyTarget)}function createResizeObserver(){typeof ResizeObserver>"u"||(observer=new ResizeObserver(notifyAll))}function resizeElement(t,e){observer||createResizeObserver();const s=resolveElements(t);return s.forEach(r=>{let a=resizeHandlers.get(r);a||(a=new Set,resizeHandlers.set(r,a)),a.add(e),observer?.observe(r)}),()=>{s.forEach(r=>{const a=resizeHandlers.get(r);a?.delete(e),a?.size||observer?.unobserve(r)})}}const windowCallbacks=new Set;let windowResizeHandler;function createWindowResizeHandler(){windowResizeHandler=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};windowCallbacks.forEach(e=>e(t))},window.addEventListener("resize",windowResizeHandler)}function resizeWindow(t){return windowCallbacks.add(t),windowResizeHandler||createWindowResizeHandler(),()=>{windowCallbacks.delete(t),!windowCallbacks.size&&typeof windowResizeHandler=="function"&&(window.removeEventListener("resize",windowResizeHandler),windowResizeHandler=void 0)}}function resize(t,e){return typeof t=="function"?resizeWindow(t):resizeElement(t,e)}function isSVGSVGElement(t){return isSVGElement$1(t)&&t.tagName==="svg"}function transform(...t){const e=!Array.isArray(t[0]),s=e?0:-1,r=t[0+s],a=t[1+s],o=t[2+s],l=t[3+s],c=interpolate(a,o,l);return e?c(r):c}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=t=>valueTypes.find(testValueType(t)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),visualElementStore=new WeakMap;function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function updateMotionValuesFromProps(t,e,s){for(const r in e){const a=e[r],o=s[r];if(isMotionValue(a))t.addValue(r,a);else if(isMotionValue(o))t.addValue(r,motionValue(a,{owner:t}));else if(o!==a)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=t.getStaticValue(r);t.addValue(r,motionValue(l!==void 0?l:a,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser=typeof window<"u";function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let featureDefinitions={};function setFeatureDefinitions(t){featureDefinitions=t}function getFeatureDefinitions(){return featureDefinitions}class VisualElement{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:a,skipAnimations:o,blockInitialAnimation:l,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=time.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,frame.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=s.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.skipAnimationsConfig=o,this.options=u,this.blockInitialAnimation=!!l,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(s,{},this);for(const y in m){const b=m[y];f[y]!==void 0&&isMotionValue(b)&&b.set(f[y])}}mount(e){if(this.hasBeenMounted)for(const s in this.initialValues)this.values.get(s)?.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),s.accelerate&&acceleratedValues.has(e)&&this.current instanceof HTMLElement){const{factory:l,keyframes:c,times:u,ease:f,duration:d}=s.accelerate,p=new NativeAnimation({element:this.current,name:e,keyframes:c,times:u,ease:f,duration:secondsToMilliseconds(d)}),m=l(p);this.valueSubscriptions.set(e,()=>{m(),p.cancel()});return}const r=transformProps.has(e);r&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&frame.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),o&&o(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const s=featureDefinitions[e];if(!s)continue;const{isEnabled:r,Feature:a}=s;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<propEventHandlers.length;r++){const a=propEventHandlers[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,l=e[o];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=motionValue(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(isNumericalString(r)||isZeroValueString(r))?r=parseFloat(r):!findValueType(r)&&complex.test(s)&&(r=getAnimatableNone(e,s)),this.setBaseTarget(e,isMotionValue(r)?r.get():r)),isMotionValue(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const o=resolveVariantFromProps(this.props,s,this.presenceContext?.custom);o&&(r=o[e])}if(s&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!isMotionValue(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){const r=e.style;return r?r[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}function convertBoundingBoxToBox({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:s}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(s)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,s){const r=t-s,a=e*r;return s+a}function applyPointDelta(t,e,s,r,a){return a!==void 0&&(t=scalePoint(t,a,r)),scalePoint(t,s,r)+e}function applyAxisDelta(t,e=0,s=1,r,a){t.min=applyPointDelta(t.min,e,s,r,a),t.max=applyPointDelta(t.max,e,s,r,a)}function applyBoxDelta(t,{x:e,y:s}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,s,r=!1){const a=s.length;if(!a)return;e.x=e.y=1;let o,l;for(let c=0;c<a;c++){o=s[c],l=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&transformBox(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,applyBoxDelta(t,l)),r&&hasTransform(o.latestValues)&&transformBox(t,o.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,s,r,a=.5){const o=mixNumber$1(t.min,t.max,a);applyAxisDelta(t,e,s,o,r)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,s){const r=measureViewportBox(t,s),{scroll:a}=e;return a&&(translateAxis(r.x,a.offset.x),translateAxis(r.y,a.offset.y)),r}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,s){let r="",a=!0;for(let o=0;o<numTransforms;o++){const l=transformPropOrder[o],c=t[l];if(c===void 0)continue;let u=!0;if(typeof c=="number")u=c===(l.startsWith("scale")?1:0);else{const f=parseFloat(c);u=l.startsWith("scale")?f===1:f===0}if(!u||s){const f=getValueAsType(c,numberValueTypes[l]);if(!u){a=!1;const d=translateAlias[l]||l;r+=`${d}(${f}) `}s&&(e[l]=f)}}return r=r.trim(),s?r=s(e,a?"":r):a&&(r="none"),r}function buildHTMLStyles(t,e,s){const{style:r,vars:a,transformOrigin:o}=t;let l=!1,c=!1;for(const u in e){const f=e[u];if(transformProps.has(u)){l=!0;continue}else if(isCSSVariableName(u)){a[u]=f;continue}else{const d=getValueAsType(f,numberValueTypes[u]);u.startsWith("origin")?(c=!0,o[u]=d):r[u]=d}}if(e.transform||(l||s?r.transform=buildTransform(e,t.transform,s):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:f="50%",originZ:d=0}=o;r.transformOrigin=`${u} ${f} ${d}`}}function renderHTML(t,{style:e,vars:s},r,a){const o=t.style;let l;for(l in e)o[l]=e[l];a?.applyProjectionStyles(o,r);for(l in s)o.setProperty(l,s[l])}function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const s=pixelsToPercent(t,e.target.x),r=pixelsToPercent(t,e.target.y);return`${s}% ${r}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,a=complex.parse(t);if(a.length>5)return r;const o=complex.createTransformer(t),l=typeof a[0]!="number"?1:0,c=s.x.scale*e.x,u=s.y.scale*e.y;a[0+l]/=c,a[1+l]/=u;const f=mixNumber$1(c,u,.5);return typeof a[2+l]=="number"&&(a[2+l]/=f),typeof a[3+l]=="number"&&(a[3+l]/=f),o(a)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(t,{layout:e,layoutId:s}){return transformProps.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}function scrapeMotionValuesFromProps$1(t,e,s){const r=t.style,a=e?.style,o={};if(!r)return o;for(const l in r)(isMotionValue(r[l])||a&&isMotionValue(a[l])||isForcedMotionValue(l,t)||s?.getValue(l)?.liveStyle!==void 0)&&(o[l]=r[l]);return o}function getComputedStyle$1(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,s){if(transformProps.has(s))return this.projection?.isProjecting?defaultTransformValue(s):readTransformValue(e,s);{const r=getComputedStyle$1(e),a=(isCSSVariableName(s)?r.getPropertyValue(s):r[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:s}){return measureViewportBox(e,s)}build(e,s,r){buildHTMLStyles(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return scrapeMotionValuesFromProps$1(e,s,r)}}function isObjectKey(t,e){return t in e}class ObjectVisualElement extends VisualElement{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,s){if(isObjectKey(s,e)){const r=e[s];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(e,s){delete s.output[e]}measureInstanceViewportBox(){return createBox()}build(e,s){Object.assign(e.output,s)}renderInstance(e,{output:s}){Object.assign(e,s)}sortInstanceNodePosition(){return 0}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,s=1,r=0,a=!0){t.pathLength=1;const o=a?dashKeys:camelKeys;t[o.offset]=`${-r}`,t[o.array]=`${e} ${s}`}const cssMotionPathProperties=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function buildSVGAttrs(t,{attrX:e,attrY:s,attrScale:r,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},u,f,d){if(buildHTMLStyles(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=d?.transformBox??"fill-box",delete p.transformBox);for(const y of cssMotionPathProperties)p[y]!==void 0&&(m[y]=p[y],delete p[y]);e!==void 0&&(p.x=e),s!==void 0&&(p.y=s),r!==void 0&&(p.scale=r),a!==void 0&&buildSVGPath(p,a,o,l,!1)}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function renderSVG(t,e,s,r){renderHTML(t,e,void 0,r);for(const a in e.attrs)t.setAttribute(camelCaseAttributes.has(a)?a:camelToDash(a),e.attrs[a])}function scrapeMotionValuesFromProps(t,e,s){const r=scrapeMotionValuesFromProps$1(t,e,s);for(const a in t)if(isMotionValue(t[a])||isMotionValue(e[a])){const o=transformPropOrder.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[o]=t[a]}return r}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(transformProps.has(s)){const r=getDefaultValueType(s);return r&&r.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return scrapeMotionValuesFromProps(e,s,r)}build(e,s,r){buildSVGAttrs(e,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,s,r,a){renderSVG(e,s,r,a)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<numVariantProps;s++){const r=variantProps[s],a=t.props[r];(isVariantLabel(a)||a===!1)&&(e[r]=a)}return e}function shallowCompare(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(t){return e=>Promise.all(e.map(({animation:s,options:r})=>animateVisualElement(t,s,r)))}function createAnimationState(t){let e=createAnimateFunction(t),s=createState(),r=!0;const a=u=>(f,d)=>{const p=resolveVariant(t,d,u==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:y,...b}=p;f={...f,...b,...y}}return f};function o(u){e=u(t)}function l(u){const{props:f}=t,d=getVariantContext(t.parent)||{},p=[],m=new Set;let y={},b=1/0;for(let C=0;C<numAnimationTypes;C++){const j=reversePriorityOrder[C],B=s[j],D=f[j]!==void 0?f[j]:d[j],F=isVariantLabel(D),q=j===u?B.isActive:null;q===!1&&(b=C);let V=D===d[j]&&D!==f[j]&&F;if(V&&r&&t.manuallyAnimateOnMount&&(V=!1),B.protectedKeys={...y},!B.isActive&&q===null||!D&&!B.prevProp||isAnimationControls(D)||typeof D=="boolean")continue;if(j==="exit"&&B.isActive&&q!==!0){B.prevResolvedValues&&(y={...y,...B.prevResolvedValues});continue}const ee=checkVariantsDidChange(B.prevProp,D);let Q=ee||j===u&&B.isActive&&!V&&F||C>b&&F,W=!1;const Z=Array.isArray(D)?D:[D];let z=Z.reduce(a(j),{});q===!1&&(z={});const{prevResolvedValues:O={}}=B,k={...O,...z},v=R=>{Q=!0,m.has(R)&&(W=!0,m.delete(R)),B.needsAnimating[R]=!0;const T=t.getValue(R);T&&(T.liveStyle=!1)};for(const R in k){const T=z[R],M=O[R];if(y.hasOwnProperty(R))continue;let I=!1;isKeyframesTarget(T)&&isKeyframesTarget(M)?I=!shallowCompare(T,M):I=T!==M,I?T!=null?v(R):m.add(R):T!==void 0&&m.has(R)?v(R):B.protectedKeys[R]=!0}B.prevProp=D,B.prevResolvedValues=z,B.isActive&&(y={...y,...z}),r&&t.blockInitialAnimation&&(Q=!1);const S=V&&ee;Q&&(!S||W)&&p.push(...Z.map(R=>{const T={type:j};if(typeof R=="string"&&r&&!S&&t.manuallyAnimateOnMount&&t.parent){const{parent:M}=t,I=resolveVariant(M,R);if(M.enteringChildren&&I){const{delayChildren:$}=I.transition||{};T.delay=calcChildStagger(M.enteringChildren,t,$)}}return{animation:R,options:T}}))}if(m.size){const C={};if(typeof f.initial!="boolean"){const j=resolveVariant(t,Array.isArray(f.initial)?f.initial[0]:f.initial);j&&j.transition&&(C.transition=j.transition)}m.forEach(j=>{const B=t.getBaseTarget(j),D=t.getValue(j);D&&(D.liveStyle=!0),C[j]=B??null}),p.push({animation:C})}let E=!!p.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(p):Promise.resolve()}function c(u,f){if(s[u].isActive===f)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(u,f)),s[u].isActive=f;const d=l(u);for(const p in s)s[p].protectedKeys={};return d}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>s,reset:()=>{s=createState()}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,s){return Math.abs(t-e)<=s}function calcAxisDelta(t,e,s,r=.5){t.origin=r,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(s)/calcLength(e),t.translate=mixNumber$1(s.min,s.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,s,r){calcAxisDelta(t.x,e.x,s.x,r?r.originX:void 0),calcAxisDelta(t.y,e.y,s.y,r?r.originY:void 0)}function calcRelativeAxis(t,e,s){t.min=s.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,s){calcRelativeAxis(t.x,e.x,s.x),calcRelativeAxis(t.y,e.y,s.y)}function calcRelativeAxisPosition(t,e,s){t.min=e.min-s.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,s){calcRelativeAxisPosition(t.x,e.x,s.x),calcRelativeAxisPosition(t.y,e.y,s.y)}function removePointDelta(t,e,s,r,a){return t-=e,t=scalePoint(t,1/s,r),a!==void 0&&(t=scalePoint(t,1/a,r)),t}function removeAxisDelta(t,e=0,s=1,r=.5,a,o=t,l=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=mixNumber$1(o.min,o.max,r);t===o&&(c-=e),t.min=removePointDelta(t.min,e,s,c,a),t.max=removePointDelta(t.max,e,s,c,a)}function removeAxisTransforms(t,e,[s,r,a],o,l){removeAxisDelta(t,e[s],e[r],e[a],e.scale,o,l)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,s,r){removeAxisTransforms(t.x,e,xKeys,s?s.x:void 0,r?r.x:void 0),removeAxisTransforms(t.y,e,yKeys,s?s.y:void 0,r?r.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function eachAxis(t){return[t("x"),t("y")]}function buildProjectionTransform(t,e,s){let r="";const a=t.x.translate/e.x,o=t.y.translate/e.y,l=s?.z||0;if((a||o||l)&&(r=`translate3d(${a}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:f,rotate:d,rotateX:p,rotateY:m,skewX:y,skewY:b}=s;f&&(r=`perspective(${f}px) ${r}`),d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),b&&(r+=`skewY(${b}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,s,r,a,o){a?(t.opacity=mixNumber$1(0,s.opacity??1,easeCrossfadeIn(r)),t.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(r))):o&&(t.opacity=mixNumber$1(e.opacity??1,s.opacity??1,r));for(let l=0;l<numBorders;l++){const c=`border${borders[l]}Radius`;let u=getRadius(e,c),f=getRadius(s,c);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||isPx(u)===isPx(f)?(t[c]=Math.max(mixNumber$1(asNumber(u),asNumber(f),r),0),(percent.test(f)||percent.test(u))&&(t[c]+="%")):t[c]=f}(e.rotate||s.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,s.rotate||0,r))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress$1(0,.5,circOut),easeCrossfadeOut=compress$1(.5,.95,noop$1);function compress$1(t,e,s){return r=>r<t?0:r>e?1:s(progress(t,e,r))}function animateSingleValue(t,e,s){const r=isMotionValue(t)?t:motionValue(t);return r.start(animateMotionValue("",r,e,s)),r.animation}function addDomEvent(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(t,e){const s=time.now(),r=({timestamp:a})=>{const o=a-s;o>=e&&(cancelFrame(r),t(o-e))};return frame.setup(r,!0),()=>cancelFrame(r)}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e);for(let s=this.members.length-1;s>=0;s--){const r=this.members[s];if(r===e||r===this.lead||r===this.prevLead)continue;const a=r.instance;a&&a.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&removeItem(this.members,r)}e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let r;for(let a=s;a>=0;a--){const o=this.members[a],l=o.instance;if(o.isPresent!==!1&&(!l||l.isConnected!==!1)){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const a=r.options.layoutDependency,o=e.options.layoutDependency;if(!(a!==void 0&&o!==void 0&&a===o)){const u=r.instance;u&&u.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:c}=e.options;c===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},transformAxes=["","X","Y","Z"],animationTarget=1e3;let id$1=0;function resetDistortingTransform(t,e,s,r){const{latestValues:a}=e;a[t]&&(s[t]=a[t],e.setStaticValue(t,0),r&&(r[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(a||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(r)}function createProjectionNode$1({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(l={},c=e?.()){this.id=id$1++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new SubscriptionManager),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const u=this.eventHandlers.get(l);u&&u.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=isSVGElement$1(l)&&!isSVGSVGElement(l),this.instance=l;const{layoutId:c,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let d,p=0;const m=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{p=window.innerWidth}),t(l,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,d&&d(),d=delay(m,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:E,onLayoutAnimationComplete:C}=f.getProps(),j=!this.targetLayout||!boxEqualsRounded(this.targetLayout,y),B=!p&&m;if(this.options.layoutRoot||this.resumeFrom||B||p&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...getValueTransition$1(b,"layout"),onPlay:E,onComplete:C};(f.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(d,B)}else p||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const c=time.now();frameData.delta=clamp(0,1e3/60,c-frameData.timestamp),frameData.timestamp=c,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!isDeltaZero(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;l&&this.instance&&(c||hasTransform(this.latestValues)||d)&&(a(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return l&&(u=this.removeTransform(u)),roundBox(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return createBox();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:f}=this.root;f&&(translateAxis(c.x,f.offset.x),translateAxis(c.y,f.offset.y))}return c}removeElementScroll(l){const c=createBox();if(copyBoxInto(c,l),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:d,options:p}=f;f!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&copyBoxInto(c,l),translateAxis(c.x,d.offset.x),translateAxis(c.y,d.offset.y))}return c}applyTransform(l,c=!1){const u=createBox();copyBoxInto(u,l);for(let f=0;f<this.path.length;f++){const d=this.path[f];!c&&d.options.layoutScroll&&d.scroll&&d!==d.root&&transformBox(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),hasTransform(d.latestValues)&&transformBox(u,d.latestValues)}return hasTransform(this.latestValues)&&transformBox(u,this.latestValues),u}removeTransform(l){const c=createBox();copyBoxInto(c,l);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!hasTransform(f.latestValues))continue;hasScale(f.latestValues)&&f.updateSnapshot();const d=createBox(),p=f.measurePageBox();copyBoxInto(d,p),removeBoxTransforms(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return hasTransform(this.latestValues)&&removeBoxTransforms(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(l||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!this.layout||!(d||p))return;this.resolvedRelativeTargetAt=frameData.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,u){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,c,u),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=createBox());const{target:y}=l;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(l,c=!1){const u=this.snapshot,f=u?u.latestValues:{},d={...this.latestValues},p=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const m=createBox(),y=u?u.source:void 0,b=this.layout?this.layout.source:void 0,E=y!==b,C=this.getStack(),j=!C||C.members.length<=1,B=!!(E&&!j&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let D;this.mixTargetDelta=F=>{const q=F/1e3;mixAxisDelta(p.x,l.x,q),mixAxisDelta(p.y,l.y,q),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,m,q),D&&boxEquals(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=createBox()),copyBoxInto(D,this.relativeTarget)),E&&(this.animationValues=d,mixValues(d,f,this.latestValues,q,B,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:u,layout:f,latestValues:d}=l;if(!(!c||!u||!f)){if(this!==l&&this.layout&&f&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||createBox();const p=calcLength(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+p;const m=calcLength(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+m}copyBoxInto(c,u),transformBox(c,d),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,c,d)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new NodeStack),this.sharedNodes.get(l).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const f={};u.z&&resetDistortingTransform("z",l,f,this.animationValues);for(let d=0;d<transformAxes.length;d++)resetDistortingTransform(`rotate${transformAxes[d]}`,l,f,this.animationValues),resetDistortingTransform(`skew${transformAxes[d]}`,l,f,this.animationValues);l.render();for(const d in f)l.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=resolveMotionValue(c?.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=resolveMotionValue(c?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(l.transform=u?u({},""):"none",this.hasProjected=!1);return}l.visibility="";const d=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,d);u&&(p=u(d,p)),l.transform=p;const{x:m,y}=this.projectionDelta;l.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?l.opacity=f===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const b in scaleCorrectors){if(d[b]===void 0)continue;const{correct:E,applyTo:C,isCSSVariable:j}=scaleCorrectors[b],B=p==="none"?d[b]:E(d[b],f);if(C){const D=C.length;for(let F=0;F<D;F++)l[C[F]]=B}else j?this.options.visualElement.renderState.vars[b]=B:l[b]=B}this.options.layoutId&&(l.pointerEvents=f===this?resolveMotionValue(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?eachAxis(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],m=calcLength(p);p.min=s[d].min,p.max=p.min+m}):shouldAnimatePositionOnly(a,e.layoutBox,s)&&eachAxis(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],m=calcLength(s[d]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const l=createDelta();calcBoxDelta(l,s,e.layoutBox);const c=createDelta();o?calcBoxDelta(c,t.applyTransform(r,!0),e.measuredBox):calcBoxDelta(c,s,e.layoutBox);const u=!isDeltaZero(l);let f=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const y=createBox();calcRelativePosition(y,e.layoutBox,p.layoutBox);const b=createBox();calcRelativePosition(b,s,m.layoutBox),boxEqualsRounded(y,b)||(f=!0),d.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,s){t.translate=mixNumber$1(e.translate,0,s),t.scale=mixNumber$1(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,s,r){t.min=mixNumber$1(e.min,s.min,r),t.max=mixNumber$1(e.max,s.max,r)}function mixBox(t,e,s,r){mixAxis(t.x,e.x,s.x,r),mixAxis(t.y,e.y,s.y,r)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,s){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(s),.2)}function checkNodeWasScrollRoot(t){return t!==t.root&&t.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function setRef(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function composeRefs(...t){return e=>{let s=!1;const r=t.map(a=>{const o=setRef(a,e);return!s&&typeof o=="function"&&(s=!0),o});if(s)return()=>{for(let a=0;a<r.length;a++){const o=r[a];typeof o=="function"?o():setRef(t[a],null)}}}}function useComposedRefs(...t){return reactExports.useCallback(composeRefs(...t),t)}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=s.offsetParent,a=isHTMLElement(r)&&r.offsetWidth||0,o=isHTMLElement(r)&&r.offsetHeight||0,l=this.props.sizeRef.current;l.height=s.offsetHeight||0,l.width=s.offsetWidth||0,l.top=s.offsetTop,l.left=s.offsetLeft,l.right=a-l.width-l.left,l.bottom=o-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:t,isPresent:e,anchorX:s,anchorY:r,root:a,pop:o}){const l=reactExports.useId(),c=reactExports.useRef(null),u=reactExports.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=reactExports.useContext(MotionConfigContext),d=t.props?.ref??t?.ref,p=useComposedRefs(c,d);return reactExports.useInsertionEffect(()=>{const{width:m,height:y,top:b,left:E,right:C,bottom:j}=u.current;if(e||o===!1||!c.current||!m||!y)return;const B=s==="left"?`left: ${E}`:`right: ${C}`,D=r==="bottom"?`bottom: ${j}`:`top: ${b}`;c.current.dataset.motionPopId=l;const F=document.createElement("style");f&&(F.nonce=f);const q=a??document.head;return q.appendChild(F),F.sheet&&F.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${y}px !important;
            ${B}px !important;
            ${D}px !important;
          }
        `),()=>{q.contains(F)&&q.removeChild(F)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:c,sizeRef:u,pop:o,children:o===!1?t:reactExports.cloneElement(t,{ref:p})})}const PresenceChild=({children:t,initial:e,isPresent:s,onExitComplete:r,custom:a,presenceAffectsLayout:o,mode:l,anchorX:c,anchorY:u,root:f})=>{const d=useConstant(newChildrenMap),p=reactExports.useId();let m=!0,y=reactExports.useMemo(()=>(m=!1,{id:p,initial:e,isPresent:s,custom:a,onExitComplete:b=>{d.set(b,!0);for(const E of d.values())if(!E)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[s,d,r]);return o&&m&&(y={...y}),reactExports.useMemo(()=>{d.forEach((b,E)=>d.set(E,!1))},[s]),reactExports.useEffect(()=>{!s&&!d.size&&r&&r()},[s]),t=jsxRuntimeExports.jsx(PopChild,{pop:l==="popLayout",isPresent:s,anchorX:c,anchorY:u,root:f,children:t}),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:y,children:t})};function newChildrenMap(){return new Map}function usePresence(t=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:a}=e,o=reactExports.useId();reactExports.useEffect(()=>{if(t)return a(o)},[t]);const l=reactExports.useCallback(()=>t&&r&&r(o),[o,r,t]);return!s&&r?[!1,l]:[!0]}const getChildKey=t=>t.key||"";function onlyElements(t){const e=[];return reactExports.Children.forEach(t,s=>{reactExports.isValidElement(s)&&e.push(s)}),e}const AnimatePresence=({children:t,custom:e,initial:s=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",anchorY:u="top",root:f})=>{const[d,p]=usePresence(l),m=reactExports.useMemo(()=>onlyElements(t),[t]),y=l&&!d?[]:m.map(getChildKey),b=reactExports.useRef(!0),E=reactExports.useRef(m),C=useConstant(()=>new Map),j=reactExports.useRef(new Set),[B,D]=reactExports.useState(m),[F,q]=reactExports.useState(m);useIsomorphicLayoutEffect(()=>{b.current=!1,E.current=m;for(let Q=0;Q<F.length;Q++){const W=getChildKey(F[Q]);y.includes(W)?(C.delete(W),j.current.delete(W)):C.get(W)!==!0&&C.set(W,!1)}},[F,y.length,y.join("-")]);const V=[];if(m!==B){let Q=[...m];for(let W=0;W<F.length;W++){const Z=F[W],z=getChildKey(Z);y.includes(z)||(Q.splice(W,0,Z),V.push(Z))}return o==="wait"&&V.length&&(Q=V),q(onlyElements(Q)),D(m),null}const{forceRender:ee}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:F.map(Q=>{const W=getChildKey(Q),Z=l&&!d?!1:m===F||y.includes(W),z=()=>{if(j.current.has(W))return;if(j.current.add(W),C.has(W))C.set(W,!0);else return;let O=!0;C.forEach(k=>{k||(O=!1)}),O&&(ee?.(),q(E.current),l&&p?.(),r&&r())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:Z,initial:!b.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:o,root:f,onExitComplete:Z?void 0:z,anchorX:c,anchorY:u,children:Q},W)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;const t={};for(const e in featureProps)t[e]={isEnabled:s=>featureProps[e].some(r=>!!s[r])};setFeatureDefinitions(t),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(t){const e=getInitializedFeatureDefinitions();for(const s in t)e[s]={...e[s],...t[s]};setFeatureDefinitions(e)}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){typeof t=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,s){const r={};for(const a in t)a==="values"&&typeof t.values=="object"||(shouldForward(a)||s===!0&&isValidMotionProp(a)||!e&&!isValidMotionProp(a)||t.draggable&&a.startsWith("onDrag"))&&(r[a]=t[a]);return r}const MotionContext=reactExports.createContext({});function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:s,animate:r}=t;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(r)?r:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:s}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:s}),[variantLabelsAsDependency(e),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,e,s){for(const r in e)!isMotionValue(e[r])&&!isForcedMotionValue(r,s)&&(t[r]=e[r])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,e,t),Object.assign({},s.vars,s.style)},[e])}function useStyle(t,e){const s=t.style||{},r={};return copyRawValuesOnly(r,s,t),Object.assign(r,useInitialMotionValues(t,e)),r}function useHTMLProps(t,e){const s={},r=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(t,e,s,r){const a=reactExports.useMemo(()=>{const o=createSvgRenderState();return buildSVGAttrs(o,e,isSVGTag(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};copyRawValuesOnly(o,t.style,t),a.style={...o,...a.style}}return a}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function useRender(t,e,s,{latestValues:r},a,o=!1,l){const u=(l??isSVGComponent(t)?useSVGProps:useHTMLProps)(e,r,a,t),f=filterProps(e,typeof t=="string",o),d=t!==reactExports.Fragment?{...f,...u,ref:s}:{},{children:p}=e,m=reactExports.useMemo(()=>isMotionValue(p)?p.get():p,[p]);return reactExports.createElement(t,{...d,children:m})}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e},s,r,a){return{latestValues:makeLatestValues(s,r,a,t),renderState:e()}}function makeLatestValues(t,e,s,r){const a={},o=r(t,{});for(const m in o)a[m]=resolveMotionValue(o[m]);let{initial:l,animate:c}=t;const u=isControllingVariants(t),f=isVariantNode(t);e&&f&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let d=s?s.initial===!1:!1;d=d||l===!1;const p=d?c:l;if(p&&typeof p!="boolean"&&!isAnimationControls(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const b=resolveVariantFromProps(t,m[y]);if(b){const{transitionEnd:E,transition:C,...j}=b;for(const B in j){let D=j[B];if(Array.isArray(D)){const F=d?D.length-1:0;D=D[F]}D!==null&&(a[B]=D)}for(const B in E)a[B]=E[B]}}}return a}const makeUseVisualState=t=>(e,s)=>{const r=reactExports.useContext(MotionContext),a=reactExports.useContext(PresenceContext),o=()=>makeState(t,e,r,a);return s?o():useConstant(o)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function useMotionRef(t,e,s){const r=reactExports.useRef(s);reactExports.useInsertionEffect(()=>{r.current=s});const a=reactExports.useRef(null);return reactExports.useCallback(o=>{o&&t.onMount?.(o),e&&(o?e.mount(o):e.unmount());const l=r.current;if(typeof l=="function")if(o){const c=l(o);typeof c=="function"&&(a.current=c)}else a.current?(a.current(),a.current=null):l(o);else l&&(l.current=o)},[e])}const SwitchLayoutGroupContext=reactExports.createContext({});function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useVisualElement(t,e,s,r,a,o){const{visualElement:l}=reactExports.useContext(MotionContext),c=reactExports.useContext(LazyContext),u=reactExports.useContext(PresenceContext),f=reactExports.useContext(MotionConfigContext),d=f.reducedMotion,p=f.skipAnimations,m=reactExports.useRef(null),y=reactExports.useRef(!1);r=r||c.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:l,props:s,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d,skipAnimations:p,isSVG:o}),y.current&&m.current&&(m.current.manuallyAnimateOnMount=!0));const b=m.current,E=reactExports.useContext(SwitchLayoutGroupContext);b&&!b.projection&&a&&(b.type==="html"||b.type==="svg")&&createProjectionNode(m.current,s,a,E);const C=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{b&&C.current&&b.update(s,u)});const j=s[optimizedAppearDataAttribute],B=reactExports.useRef(!!j&&!window.MotionHandoffIsComplete?.(j)&&window.MotionHasOptimisedAnimation?.(j));return useIsomorphicLayoutEffect(()=>{y.current=!0,b&&(C.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),B.current&&b.animationState&&b.animationState.animateChanges())}),reactExports.useEffect(()=>{b&&(!B.current&&b.animationState&&b.animationState.animateChanges(),B.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(j)}),B.current=!1),b.enteringChildren=void 0)}),b}function createProjectionNode(t,e,s,r){const{layoutId:a,layout:o,drag:l,dragConstraints:c,layoutScroll:u,layoutRoot:f,layoutCrossfade:d}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!l||c&&isRefObject(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:u,layoutRoot:f})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createMotionComponent(t,{forwardMotionProps:e=!1,type:s}={},r,a){r&&loadFeatures(r);const o=s?s==="svg":isSVGComponent(t),l=o?useSVGVisualState:useHTMLVisualState;function c(f,d){let p;const m={...reactExports.useContext(MotionConfigContext),...f,layoutId:useLayoutId(f)},{isStatic:y}=m,b=useCreateMotionContext(f),E=l(f,y);if(!y&&isBrowser$1){useStrictMode();const C=getProjectionFunctionality(m);p=C.MeasureLayout,b.visualElement=useVisualElement(t,E,m,a,C.ProjectionNode,o)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:b,children:[p&&b.visualElement?jsxRuntimeExports.jsx(p,{visualElement:b.visualElement,...m}):null,useRender(t,f,useMotionRef(E,b.visualElement,d),E,y,e,o)]})}c.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=reactExports.forwardRef(c);return u[motionComponentSymbol]=t,u}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const e=getInitializedFeatureDefinitions(),{drag:s,layout:r}=e;if(!s&&!r)return{};const a={...s,...r};return{MeasureLayout:s?.isEnabled(t)||r?.isEnabled(t)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function createMotionProxy(t,e){if(typeof Proxy>"u")return createMotionComponent;const s=new Map,r=(o,l)=>createMotionComponent(o,l,t,e),a=(o,l)=>r(o,l);return new Proxy(a,{get:(o,l)=>l==="create"?r:(s.has(l)||s.set(l,createMotionComponent(l,void 0,t,e)),s.get(l))})}const createDomVisualElement=(t,e)=>e.isSVG??isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment});class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addPointerEvent(t,e,s,r){return addDomEvent(t,e,addPointerInfo(s),r)}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const s=distance(t.x,e.x),r=distance(t.y,e.y);return Math.sqrt(s**2+r**2)}const overflowStyles=new Set(["auto","scroll"]);class PanSession{constructor(e,s,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=getPanInfo(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,E=distance2D(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!E)return;const{point:C}=y,{timestamp:j}=frameData;this.history.push({...C,timestamp:j});const{onStart:B,onMove:D}=this.handlers;b||(B&&B(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,y)},this.handlePointerMove=(y,b)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=transformPoint(b,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(y,b)=>{this.end();const{onEnd:E,onSessionEnd:C,resumeAnimation:j}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=getPanInfo(y.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(b,this.transformPagePoint),this.history);this.startEvent&&E&&E(y,B),C&&C(y,B)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=o,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=a||window;const u=extractEventInfo(e),f=transformPoint(u,this.transformPagePoint),{point:d}=f,{timestamp:p}=frameData;this.history=[{...d,timestamp:p}];const{onSessionStart:m}=s;m&&m(e,getPanInfo(f,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let s=e.parentElement;for(;s;){const r=getComputedStyle(s);(overflowStyles.has(r.overflowX)||overflowStyles.has(r.overflowY))&&this.scrollPositions.set(s,{x:s.scrollLeft,y:s.scrollTop}),s=s.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const s=this.scrollPositions.get(e);if(!s)return;const r=e===window,a=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:a.x-s.x,y:a.y-s.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,a),frame.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const a=lastDevicePoint(t);for(;s>=0&&(r=t[s],!(a.timestamp-r.timestamp>secondsToMilliseconds(e)));)s--;if(!r)return{x:0,y:0};r===t[0]&&t.length>2&&a.timestamp-r.timestamp>secondsToMilliseconds(e)*2&&(r=t[1]);const o=millisecondsToSeconds(a.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(a.x-r.x)/o,y:(a.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function applyConstraints(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?mixNumber$1(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?mixNumber$1(s,t,r.max):Math.min(t,s)),t}function calcRelativeAxisConstraints(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:s,bottom:r,right:a}){return{x:calcRelativeAxisConstraints(t.x,s,a),y:calcRelativeAxisConstraints(t.y,e,r)}}function calcViewportAxisConstraints(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin(t,e){let s=.5;const r=calcLength(t),a=calcLength(e);return a>r?s=progress(e.min,e.max-r,t.min):r>a&&(s=progress(t.min,t.max-a,e.min)),clamp(0,1,s)}function rebaseAxisConstraints(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,s){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,s)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=p=>{s&&this.snapToCursor(extractEventInfo(p).point),this.stopAnimation()},l=(p,m)=>{const{drag:y,dragPropagation:b,onDragStart:E}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(j=>{let B=this.getAxisMotionValue(j).get()||0;if(percent.test(B)){const{projection:D}=this.visualElement;if(D&&D.layout){const F=D.layout.layoutBox[j];F&&(B=calcLength(F)*(parseFloat(B)/100))}}this.originPoint[j]=B}),E&&frame.update(()=>E(p,m),!1,!0),addValueToWillChange(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:E,onDrag:C}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:j}=m;if(b&&this.currentDirection===null){this.currentDirection=getCurrentDirection(j),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,j),this.updateAxis("y",m.point,j),this.visualElement.render(),C&&frame.update(()=>C(p,m),!1,!0)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>{const{dragSnapToOrigin:p}=this.getProps();(p||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:d}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(e,s){const r=e||this.latestPointerEvent,a=s||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!r)return;const{velocity:l}=a;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&frame.postRender(()=>c(r,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,s,r){const{drag:a}=this.getProps();if(!r||!shouldDrag(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=applyConstraints(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=calcRelativeConstraints(r.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(s),a!==this.constraints&&!isRefObject(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=rebaseAxisConstraints(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!isRefObject(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=measurePageBox(r,a.root,this.visualElement.getTransformPagePoint());let l=calcViewportConstraints(a.layout.layoutBox,o);if(s){const c=s(convertBoxToBoundingBox(l));this.hasMutatedConstraints=!!c,c&&(l=convertBoundingBoxToBox(c))}return l}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:a,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},f=eachAxis(d=>{if(!shouldDrag(d,s,this.currentDirection))return;let p=u&&u[d]||{};l&&(p={min:0,max:0});const m=a?200:1e6,y=a?40:1e7,b={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(d,b)});return Promise.all(f).then(c)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),r.start(animateMotionValue(e,r,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[s];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(s=>{const{drag:r}=this.getProps();if(!shouldDrag(s,r,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(s);if(a&&a.layout){const{min:l,max:c}=a.layout.layoutBox[s],u=o.get()||0;o.set(e[s]-mixNumber$1(l,c,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!isRefObject(s)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};eachAxis(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const u=c.get();a[l]=calcOrigin({min:u,max:u},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),eachAxis(l=>{if(!shouldDrag(l,e,null))return;const c=this.getAxisMotionValue(l),{min:u,max:f}=this.constraints[l];c.set(mixNumber$1(u,f,a[l]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,s=addPointerEvent(e,"pointerdown",f=>{const{drag:d,dragListener:p=!0}=this.getProps(),m=f.target,y=m!==e&&isElementTextInput(m);d&&p&&!y&&this.start(f)});let r;const a=()=>{const{dragConstraints:f}=this.getProps();isRefObject(f)&&f.current&&(this.constraints=this.resolveRefConstraints(),r||(r=startResizeObservers(e,f.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,l=o.addEventListener("measure",a);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),frame.read(a);const c=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),u=o.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(eachAxis(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=f[p].translate,m.set(m.get()+f[p].translate))}),this.visualElement.render())}));return()=>{c(),s(),l(),u&&u(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:l=defaultElastic,dragMomentum:c=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:a,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function skipFirstCall(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function startResizeObservers(t,e,s){const r=resize(t,skipFirstCall(s)),a=resize(e,skipFirstCall(s));return()=>{r(),a()}}function shouldDrag(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function getCurrentDirection(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}update(){const{dragControls:e}=this.node.getProps(),{dragControls:s}=this.node.prevProps||{};e!==s&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const asyncHandler=t=>(e,s)=>{t&&frame.update(()=>t(e,s),!1,!0)};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(s),onMove:asyncHandler(r),onEnd:(o,l)=>{delete this.session,a&&frame.postRender(()=>a(o,l))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:a}=this.props,{projection:o}=e;o&&(s.group&&s.group.add(o),r&&r.register&&a&&r.register(o),hasTakenAnySnapshot&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:a,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,e.layoutDependency!==s&&l.setOptions({...l.options,layoutDependency:s}),hasTakenAnySnapshot=!0,a||e.layoutDependency!==s||s===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||frame.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:a}=e;hasTakenAnySnapshot=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,s]=usePresence(),r=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:r,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:s})}const drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,o=r[a];o&&frame.postRender(()=>o(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(s,r)=>(handleHoverEvent(this.node,r,"Start"),a=>handleHoverEvent(this.node,a,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,e,s){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),o=r[a];o&&frame.postRender(()=>o(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:s,propagate:r}=this.node.props;this.unmount=press(e,(a,o)=>(handlePressEvent(this.node,o,"Start"),(l,{success:c})=>handlePressEvent(this.node,l,c?"End":"Cancel")),{useGlobalTarget:s,stopPropagation:r?.tap===!1})}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const s=t||document;observers.has(s)||observers.set(s,{});const r=observers.get(s),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),r[a]}function observeIntersection(t,e,s){const r=initIntersectionObserver(e);return observerCallbacks.set(t,s),r.observe(t),()=>{observerCallbacks.delete(t),r.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:a="some",once:o}=e,l={root:s?s.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:thresholdNames[a]},c=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:p}=this.node.getProps(),m=f?d:p;m&&m(u)};return observeIntersection(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function useMotionValue(t){const e=useConstant(()=>motionValue(t)),{isStatic:s}=reactExports.useContext(MotionConfigContext);if(s){const[,r]=reactExports.useState(t);reactExports.useEffect(()=>e.on("change",r),[])}return e}function useCombineMotionValues(t,e){const s=useMotionValue(e()),r=()=>s.set(e());return r(),useIsomorphicLayoutEffect(()=>{const a=()=>frame.preRender(r,!1,!0),o=t.map(l=>l.on("change",a));return()=>{o.forEach(l=>l()),cancelFrame(r)}}),s}function useComputed(t){collectMotionValues.current=[],t();const e=useCombineMotionValues(collectMotionValues.current,t);return collectMotionValues.current=void 0,e}function useTransform(t,e,s,r){if(typeof t=="function")return useComputed(t);const o=typeof e=="function"?e:transform(e,s,r),l=Array.isArray(t)?useListTransform(t,o):useListTransform([t],([u])=>o(u)),c=Array.isArray(t)?void 0:t.accelerate;return c&&!c.isTransformed&&typeof e!="function"&&Array.isArray(s)&&r?.clamp!==!1&&(l.accelerate={...c,times:e,keyframes:s,isTransformed:!0}),l}function useListTransform(t,e){const s=useConstant(()=>[]);return useCombineMotionValues(t,()=>{s.length=0;const r=t.length;for(let a=0;a<r;a++)s[a]=t[a].get();return e(s)})}function isDOMKeyframes(t){return typeof t=="object"&&!Array.isArray(t)}function resolveSubjects(t,e,s,r){return t==null?[]:typeof t=="string"&&isDOMKeyframes(e)?resolveElements(t,s,r):t instanceof NodeList?Array.from(t):Array.isArray(t)?t.filter(a=>a!=null):[t]}function calculateRepeatDuration(t,e,s){return t*(e+1)}function calcNextTime(t,e,s,r){return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,t+parseFloat(e)):e==="<"?s:e.startsWith("<")?Math.max(0,s+parseFloat(e.slice(1))):r.get(e)??t}function eraseKeyframes(t,e,s){for(let r=0;r<t.length;r++){const a=t[r];a.at>e&&a.at<s&&(removeItem(t,a),r--)}}function addKeyframes(t,e,s,r,a,o){eraseKeyframes(t,a,o);for(let l=0;l<e.length;l++)t.push({value:e[l],at:mixNumber$1(a,o,r[l]),easing:getEasingForSegment(s,l)})}function normalizeTimes(t,e){for(let s=0;s<t.length;s++)t[s]=t[s]/(e+1)}function compareByTime(t,e){return t.at===e.at?t.value===null?1:e.value===null?-1:0:t.at-e.at}const defaultSegmentEasing="easeInOut";function createAnimationsFromSequence(t,{defaultTransition:e={},...s}={},r,a){const o=e.duration||.3,l=new Map,c=new Map,u={},f=new Map;let d=0,p=0,m=0;for(let y=0;y<t.length;y++){const b=t[y];if(typeof b=="string"){f.set(b,p);continue}else if(!Array.isArray(b)){f.set(b.name,calcNextTime(p,b.at,d,f));continue}let[E,C,j={}]=b;j.at!==void 0&&(p=calcNextTime(p,j.at,d,f));let B=0;const D=(F,q,V,ee=0,Q=0)=>{const W=keyframesAsList(F),{delay:Z=0,times:z=defaultOffset(W),type:O=e.type||"keyframes",repeat:k,repeatType:v,repeatDelay:S=0,...N}=q;let{ease:R=e.ease||"easeOut",duration:T}=q;const M=typeof Z=="function"?Z(ee,Q):Z,I=W.length,$=isGenerator(O)?O:a?.[O||"keyframes"];if(I<=2&&$){let oe=100;if(I===2&&isNumberKeyframesArray(W)){const G=W[1]-W[0];oe=Math.abs(G)}const J={...e,...N};T!==void 0&&(J.duration=secondsToMilliseconds(T));const U=createGeneratorEasing(J,oe,$);R=U.ease,T=U.duration}T??(T=o);const A=p+M;z.length===1&&z[0]===0&&(z[1]=1);const L=z.length-W.length;if(L>0&&fillOffset(z,L),W.length===1&&W.unshift(null),k){T=calculateRepeatDuration(T,k);const oe=[...W],J=[...z];R=Array.isArray(R)?[...R]:[R];const U=[...R];for(let G=0;G<k;G++){W.push(...oe);for(let ae=0;ae<oe.length;ae++)z.push(J[ae]+(G+1)),R.push(ae===0?"linear":getEasingForSegment(U,ae-1))}normalizeTimes(z,k)}const Y=A+T;addKeyframes(V,W,R,z,A,Y),B=Math.max(M+T,B),m=Math.max(Y,m)};if(isMotionValue(E)){const F=getSubjectSequence(E,c);D(C,j,getValueSequence("default",F))}else{const F=resolveSubjects(E,C,r,u),q=F.length;for(let V=0;V<q;V++){C=C,j=j;const ee=F[V],Q=getSubjectSequence(ee,c);for(const W in C)D(C[W],getValueTransition(j,W),getValueSequence(W,Q),V,q)}}d=p,p+=B}return c.forEach((y,b)=>{for(const E in y){const C=y[E];C.sort(compareByTime);const j=[],B=[],D=[];for(let ee=0;ee<C.length;ee++){const{at:Q,value:W,easing:Z}=C[ee];j.push(W),B.push(progress(0,m,Q)),D.push(Z||"easeOut")}B[0]!==0&&(B.unshift(0),j.unshift(j[0]),D.unshift(defaultSegmentEasing)),B[B.length-1]!==1&&(B.push(1),j.push(null)),l.has(b)||l.set(b,{keyframes:{},transition:{}});const F=l.get(b);F.keyframes[E]=j;const{type:q,...V}=e;F.transition[E]={...V,duration:m,ease:D,times:B,...s}}}),l}function getSubjectSequence(t,e){return!e.has(t)&&e.set(t,{}),e.get(t)}function getValueSequence(t,e){return e[t]||(e[t]=[]),e[t]}function keyframesAsList(t){return Array.isArray(t)?t:[t]}function getValueTransition(t,e){return t&&t[e]?{...t,...t[e]}:{...t}}const isNumber=t=>typeof t=="number",isNumberKeyframesArray=t=>t.every(isNumber);function createDOMVisualElement(t){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},s=isSVGElement$1(t)&&!isSVGSVGElement(t)?new SVGVisualElement(e):new HTMLVisualElement(e);s.mount(t),visualElementStore.set(t,s)}function createObjectVisualElement(t){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},s=new ObjectVisualElement(e);s.mount(t),visualElementStore.set(t,s)}function isSingleValue(t,e){return isMotionValue(t)||typeof t=="number"||typeof t=="string"&&!isDOMKeyframes(e)}function animateSubject(t,e,s,r){const a=[];if(isSingleValue(t,e))a.push(animateSingleValue(t,isDOMKeyframes(e)&&e.default||e,s&&(s.default||s)));else{if(t==null)return a;const o=resolveSubjects(t,e,r),l=o.length;for(let c=0;c<l;c++){const u=o[c],f=u instanceof Element?createDOMVisualElement:createObjectVisualElement;visualElementStore.has(u)||f(u);const d=visualElementStore.get(u),p={...s};"delay"in p&&typeof p.delay=="function"&&(p.delay=p.delay(c,l)),a.push(...animateTarget(d,{...e,transition:p},{}))}}return a}function animateSequence(t,e,s){const r=[],a=t.map(l=>{if(Array.isArray(l)&&typeof l[0]=="function"){const c=l[0],u=motionValue(0);return u.on("change",c),l.length===1?[u,[0,1]]:l.length===2?[u,[0,1],l[1]]:[u,l[1],l[2]]}return l});return createAnimationsFromSequence(a,e,s,{spring}).forEach(({keyframes:l,transition:c},u)=>{r.push(...animateSubject(u,l,c))}),r}function isSequence(t){return Array.isArray(t)&&t.some(Array.isArray)}function createScopedAnimate(t={}){const{scope:e,reduceMotion:s}=t;function r(a,o,l){let c=[],u;if(isSequence(a))c=animateSequence(a,s!==void 0?{reduceMotion:s,...o}:o,e);else{const{onComplete:d,...p}=l||{};typeof d=="function"&&(u=d),c=animateSubject(a,o,s!==void 0?{reduceMotion:s,...p}:p,e)}const f=new GroupAnimationWithThen(c);return u&&f.finished.then(u),e&&(e.animations.push(f),f.finished.then(()=>{removeItem(e.animations,f)})),f}return r}const animate=createScopedAnimate(),byteToHex=[];for(let t=0;t<256;++t)byteToHex.push((t+256).toString(16).slice(1));function unsafeStringify(t,e=0){return(byteToHex[t[e+0]]+byteToHex[t[e+1]]+byteToHex[t[e+2]]+byteToHex[t[e+3]]+"-"+byteToHex[t[e+4]]+byteToHex[t[e+5]]+"-"+byteToHex[t[e+6]]+byteToHex[t[e+7]]+"-"+byteToHex[t[e+8]]+byteToHex[t[e+9]]+"-"+byteToHex[t[e+10]]+byteToHex[t[e+11]]+byteToHex[t[e+12]]+byteToHex[t[e+13]]+byteToHex[t[e+14]]+byteToHex[t[e+15]]).toLowerCase()}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function _v4(t,e,s){t=t||{};const r=t.random??t.rng?.()??rng();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,unsafeStringify(r)}function v4(t,e,s){return native.randomUUID&&!t?native.randomUUID():_v4(t)}const mockMatches=[{id:"1",team1:"Finland",team2:"Estonia",team1Flag:"",team2Flag:"",date:"28.12.25",time:"19:00",odds1:1.85,oddsDraw:3.4,odds2:4.2,image:"https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=400&h=200&fit=crop"},{id:"2",team1:"Germany",team2:"France",team1Flag:"",team2Flag:"",date:"29.12.25",time:"21:00",odds1:2.1,oddsDraw:3.2,odds2:2.9,image:"https://images.unsplash.com/photo-1508098682722-e99c43a406b2?w=400&h=200&fit=crop"}],p2pListings=[{id:"1",name:"Leather Sofa",price:450,seller:{id:"1",name:"Sarah Williams",avatar:"SW"},image:"https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=400&h=200&fit=crop",description:"Genuine leather 3-seater sofa in excellent condition",location:"New York"},{id:"2",name:"iPhone 14 Pro",price:800,seller:{id:"2",name:"Mike Johnson",avatar:"MJ"},image:"https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400&h=200&fit=crop",description:"128GB, Space Black, like new with original box",location:"Los Angeles"},{id:"3",name:"Mountain Bike",price:350,seller:{id:"3",name:"Alex Chen",avatar:"AC"},image:"https://images.unsplash.com/photo-1532298229144-0ec0c57515c7?w=400&h=200&fit=crop",description:"21-speed, aluminum frame, barely used",location:"Chicago"},{id:"4",name:"Gaming PC",price:1200,seller:{id:"4",name:"Emma Davis",avatar:"ED"},image:"https://images.unsplash.com/photo-1587202372775-e229f172b9d7?w=400&h=200&fit=crop",description:"RTX 3070, Ryzen 7, 32GB RAM, RGB setup",location:"Miami"},{id:"5",name:'MacBook Pro 16"',price:1800,seller:{id:"5",name:"David Kim",avatar:"DK"},image:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400&h=200&fit=crop",description:"M2 Pro, 16GB RAM, 512GB SSD, AppleCare until 2025",location:"San Francisco"},{id:"6",name:"Vintage Watch",price:650,seller:{id:"6",name:"James Miller",avatar:"JM"},image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=200&fit=crop",description:"Classic automatic movement, leather strap, serviced recently",location:"Boston"},{id:"7",name:"Electric Scooter",price:400,seller:{id:"7",name:"Lisa Park",avatar:"LP"},image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=200&fit=crop",description:"25km range, foldable, includes charger and helmet",location:"Seattle"},{id:"8",name:"Sony PS5",price:450,seller:{id:"8",name:"Ryan Brown",avatar:"RB"},image:"https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?w=400&h=200&fit=crop",description:"Disc edition, 2 controllers, 5 games included",location:"Denver"},{id:"9",name:"Standing Desk",price:280,seller:{id:"9",name:"Nicole Garcia",avatar:"NG"},image:"https://images.unsplash.com/photo-1593062096033-9a26b09da705?w=400&h=200&fit=crop",description:"Electric height adjustable, 140x70cm, memory presets",location:"Austin"},{id:"10",name:"Camera Kit",price:950,seller:{id:"10",name:"Tom Wilson",avatar:"TW"},image:"https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=400&h=200&fit=crop",description:"Canon EOS R50 + 18-150mm lens + bag + extra battery",location:"Portland"},{id:"11",name:"Dining Table Set",price:550,seller:{id:"11",name:"Maria Lopez",avatar:"ML"},image:"https://images.unsplash.com/photo-1617806118233-18e1de247200?w=400&h=200&fit=crop",description:"Solid oak table with 6 chairs, modern design",location:"Phoenix"},{id:"12",name:"Drone DJI Mini 3",price:620,seller:{id:"12",name:"Kevin Lee",avatar:"KL"},image:"https://images.unsplash.com/photo-1473968512647-3e447244af8f?w=400&h=200&fit=crop",description:"4K camera, 38min flight time, includes Fly More combo",location:"San Diego"},{id:"13",name:"Acoustic Guitar",price:320,seller:{id:"13",name:"Chris Taylor",avatar:"CT"},image:"https://images.unsplash.com/photo-1510915361894-db8b60106cb1?w=400&h=200&fit=crop",description:"Taylor Big Baby, solid spruce top, gig bag included",location:"Nashville"},{id:"14",name:'Smart TV 65"',price:580,seller:{id:"14",name:"Anna White",avatar:"AW"},image:"https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=400&h=200&fit=crop",description:"Samsung QLED 4K, wall mount included, 2 years old",location:"Dallas"},{id:"15",name:"Treadmill",price:480,seller:{id:"15",name:"Mark Johnson",avatar:"MJ"},image:"https://images.unsplash.com/photo-1576678927484-cc907957088c?w=400&h=200&fit=crop",description:"NordicTrack, foldable, incline feature, heart rate monitor",location:"Houston"},{id:"16",name:"Vintage Armchair",price:290,seller:{id:"16",name:"Sophie Brown",avatar:"SB"},image:"https://images.unsplash.com/photo-1506439773649-6e0eb8cfb237?w=400&h=200&fit=crop",description:"Mid-century modern design, reupholstered in velvet",location:"New York"},{id:"17",name:'iPad Pro 12.9"',price:720,seller:{id:"17",name:"Jason Clark",avatar:"JC"},image:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=400&h=200&fit=crop",description:"M1 chip, 256GB, WiFi + Cellular, Magic Keyboard included",location:"Los Angeles"},{id:"18",name:"Road Bike",price:680,seller:{id:"18",name:"Peter Adams",avatar:"PA"},image:"https://images.unsplash.com/photo-1485965120184-e220f721d03e?w=400&h=200&fit=crop",description:"Carbon frame, Shimano 105 groupset, size 56cm",location:"Chicago"}],merchItems=[{id:"1",name:"Unicity Hoodie",price:59.99,image:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=400&h=200&fit=crop",description:"Premium black hoodie with embroidered Unicity logo",sizes:["S","M","L","XL","XXL"]},{id:"2",name:"Crypto T-Shirt",price:29.99,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=200&fit=crop",description:"Classic fit cotton t-shirt with blockchain design",sizes:["S","M","L","XL"]},{id:"3",name:"Dev Cap",price:24.99,image:"https://images.unsplash.com/photo-1588850561407-ed78c282e89b?w=400&h=200&fit=crop",description:'Snapback cap with "Code & Crypto" embroidery',sizes:["One Size"]},{id:"4",name:"Sphere Mug",price:14.99,image:"https://images.unsplash.com/photo-1514228742587-6b1558fcca3d?w=400&h=200&fit=crop",description:"Ceramic mug with color-changing Sphere logo",sizes:["Standard"]}],MARKETPLACE_LOCATIONS=["Dubai, UAE","London, UK","New York, USA","Los Angeles, USA","Singapore","Hong Kong","Tokyo, Japan","Sydney, Australia","Toronto, Canada","Miami, USA","Las Vegas, USA","Munich, Germany","Paris, France","Zurich, Switzerland","Amsterdam, Netherlands"],marketplaceListings=[{id:"mg1",category:"gold",title:"1oz PAMP Suisse Gold Bar",description:"Brand new, sealed. Certificate included. Available for pickup in Dubai or London.",price:2150,currency:"USDC",image:"https://images.unsplash.com/photo-1610375461246-83df859d849d?w=400&h=200&fit=crop",seller:{id:"g1",name:"@golddealer_uae",avatar:"GD"},location:"Dubai, UAE",verified:!0,urgency:"hot"},{id:"mg2",category:"gold",title:"10x 1oz Silver Coins - Austrian Philharmonic",description:"2024 Austrian Philharmonic silver coins. Tube of 10. Spot + 3%.",price:285,currency:"USDC",image:"https://images.unsplash.com/photo-1607292803062-5b3f2c0b5c6d?w=400&h=200&fit=crop",seller:{id:"g2",name:"@silverstack",avatar:"SS"},location:"London, UK"},{id:"mg3",category:"gold",title:"5oz Perth Mint Gold Bar",description:"Perth Mint certified. Serial number documented. Secure vault storage available.",price:10500,currency:"USDC",image:"https://images.unsplash.com/photo-1610375461246-83df859d849d?w=400&h=200&fit=crop",seller:{id:"g1",name:"@golddealer_uae",avatar:"GD"},location:"Sydney, Australia",verified:!0},{id:"mg4",category:"gold",title:"20x American Gold Eagle 1oz",description:"Full tube of 2024 American Gold Eagles. Will split. Spot + 4%.",price:43e3,currency:"USDC",image:"https://images.unsplash.com/photo-1610375461246-83df859d849d?w=400&h=200&fit=crop",seller:{id:"g2",name:"@silverstack",avatar:"SS"},location:"New York, USA",verified:!0,urgency:"hot"},{id:"mg5",category:"gold",title:"100g Valcambi Gold CombiBar",description:"Divisible 100x1g gold bar. Perfect for fractional sales. Swiss made.",price:6800,currency:"USDC",image:"https://images.unsplash.com/photo-1610375461246-83df859d849d?w=400&h=200&fit=crop",seller:{id:"g1",name:"@golddealer_uae",avatar:"GD"},location:"Zurich, Switzerland",verified:!0},{id:"mg6",category:"gold",title:"50x Silver Maple Leaf Monster Box",description:"Royal Canadian Mint. Factory sealed monster box. 500oz total.",price:14200,currency:"USDC",image:"https://images.unsplash.com/photo-1607292803062-5b3f2c0b5c6d?w=400&h=200&fit=crop",seller:{id:"g2",name:"@silverstack",avatar:"SS"},location:"Toronto, Canada",urgency:"urgent"},{id:"mt1",category:"tickets",title:"UFC 315 - Cage Side Seats x2",description:"Premium cage side seats. Can't attend anymore. Face value was $3500 each. Open to offers.",price:5500,currency:"USDC",image:"https://images.unsplash.com/photo-1549719386-74dfcbf7dbed?w=400&h=200&fit=crop",seller:{id:"t1",name:"@fightfan",avatar:"FF"},location:"Las Vegas",urgency:"urgent"},{id:"mt2",category:"tickets",title:"Coldplay World Tour - VIP Package",description:"Munich show, VIP package includes early entry, exclusive merch, and meet & greet chance.",price:450,currency:"USDC",image:"https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=400&h=200&fit=crop",seller:{id:"t2",name:"@concerthopper",avatar:"CH"},location:"Munich, Germany"},{id:"mt3",category:"tickets",title:"World Cup 2026 - England vs Argentina",description:"Group stage match. Category 1 seats. Verified through FIFA portal.",price:1800,currency:"USDC",image:"https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=400&h=200&fit=crop",seller:{id:"t1",name:"@fightfan",avatar:"FF"},location:"New York, USA",verified:!0,urgency:"hot"},{id:"mt4",category:"tickets",title:"Formula 1 Monaco GP - Paddock Club",description:"Ultimate F1 experience. Paddock access, pit lane walks, gourmet catering. 2 passes.",price:8500,currency:"USDC",image:"https://images.unsplash.com/photo-1504707748692-419802cf939d?w=400&h=200&fit=crop",seller:{id:"t2",name:"@concerthopper",avatar:"CH"},location:"Monaco",verified:!0,urgency:"hot"},{id:"mt5",category:"tickets",title:"Taylor Swift Eras Tour - Floor Seats x4",description:"Sydney show. Floor section B, row 15. Selling as group only.",price:3200,currency:"USDC",image:"https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=400&h=200&fit=crop",seller:{id:"t1",name:"@fightfan",avatar:"FF"},location:"Sydney, Australia",urgency:"urgent"},{id:"mt6",category:"tickets",title:"Champions League Final 2026",description:"Category 2 tickets. Location TBA. Transferable via UEFA app.",price:2400,currency:"USDC",image:"https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=400&h=200&fit=crop",seller:{id:"t2",name:"@concerthopper",avatar:"CH"},location:"London, UK",verified:!0},{id:"mt7",category:"tickets",title:"Rolling Stones - Hackney Diamonds Tour",description:"VIP package Tokyo show. Front section + meet & greet lottery entry.",price:1200,currency:"USDC",image:"https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=400&h=200&fit=crop",seller:{id:"t1",name:"@fightfan",avatar:"FF"},location:"Tokyo, Japan"},{id:"mt8",category:"tickets",title:"NBA Finals Game 7 - Courtside",description:"If it goes to Game 7, I have 2 courtside seats. Deposit required.",price:15e3,currency:"USDC",image:"https://images.unsplash.com/photo-1546519638-68e109498ffc?w=400&h=200&fit=crop",seller:{id:"t2",name:"@concerthopper",avatar:"CH"},location:"Los Angeles, USA",verified:!0,urgency:"hot"},{id:"ma1",category:"asics",title:"Antminer S21 200TH/s",description:"Brand new, unopened. Bitmain warranty valid. 17.5 J/TH efficiency. Perfect for Bitcoin mining.",price:4200,currency:"USDC",image:"https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=400&h=200&fit=crop",seller:{id:"a1",name:"@miningpro",avatar:"MP"},location:"Texas, USA",verified:!0},{id:"ma2",category:"asics",title:"Antminer KS5 Pro - Kaspa Miner",description:"21 TH/s Kaspa miner. 6 months old with remaining warranty. Selling due to facility upgrade.",price:8500,currency:"USDC",image:"https://images.unsplash.com/photo-1518546305927-5a555bb7020d?w=400&h=200&fit=crop",seller:{id:"a2",name:"@kaspaking",avatar:"KK"},location:"Iceland",urgency:"urgent"},{id:"ma3",category:"asics",title:"5x GPU Mining Rig - RTX 4090",description:"Complete rig with 5x RTX 4090. Frame, PSU, mobo included. Great for AI/ML or mining.",price:12e3,currency:"USDC",image:"https://images.unsplash.com/photo-1591799264318-7e6ef8ddb7ea?w=400&h=200&fit=crop",seller:{id:"a1",name:"@miningpro",avatar:"MP"},location:"Singapore"},{id:"ma4",category:"asics",title:"Whatsminer M50S++ 140TH/s x10",description:"Bulk deal - 10 units. All tested and hashing. Great for small farm setup.",price:28e3,currency:"USDC",image:"https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=400&h=200&fit=crop",seller:{id:"a2",name:"@kaspaking",avatar:"KK"},location:"Dubai, UAE",verified:!0,urgency:"hot"},{id:"ma5",category:"asics",title:"Bitmain Antminer L9 16GH/s",description:"Scrypt miner for LTC/DOGE. Latest generation. 3 months old.",price:11500,currency:"USDC",image:"https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=400&h=200&fit=crop",seller:{id:"a1",name:"@miningpro",avatar:"MP"},location:"Hong Kong",verified:!0},{id:"ma6",category:"asics",title:"IceRiver KS3M Kaspa Miner",description:"6TH/s Kaspa beast. Runs cool, quiet. Perfect for home mining.",price:4800,currency:"USDC",image:"https://images.unsplash.com/photo-1518546305927-5a555bb7020d?w=400&h=200&fit=crop",seller:{id:"a2",name:"@kaspaking",avatar:"KK"},location:"Amsterdam, Netherlands"},{id:"ma7",category:"asics",title:"Full Mining Container - 200 S19 Pro",description:"40ft container with 200 Antminer S19 Pro. 20MW total. Turnkey solution.",price:45e4,currency:"USDC",image:"https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=400&h=200&fit=crop",seller:{id:"a1",name:"@miningpro",avatar:"MP"},location:"Texas, USA",verified:!0,urgency:"urgent"},{id:"ma8",category:"asics",title:"Goldshell AL-BOX Alephium Miner",description:"Compact ALPH miner. 180W only. Silent operation. WiFi enabled.",price:850,currency:"USDC",image:"https://images.unsplash.com/photo-1518546305927-5a555bb7020d?w=400&h=200&fit=crop",seller:{id:"a2",name:"@kaspaking",avatar:"KK"},location:"Paris, France"},{id:"ma9",category:"asics",title:"Avalon Made A1466 150TH/s x5",description:"Canaan miners. Bulk of 5 units. Competitive efficiency at 20 J/TH.",price:16e3,currency:"USDC",image:"https://images.unsplash.com/photo-1639762681485-074b7f938ba0?w=400&h=200&fit=crop",seller:{id:"a1",name:"@miningpro",avatar:"MP"},location:"Toronto, Canada",verified:!0}],marketplaceActivity=[{id:"i1",type:"buy",user:"@goldbug_dubai",message:"Looking for 1oz gold bars, any mint",category:"gold",timestamp:"2 min ago"},{id:"i2",type:"buy",user:"@cryptominer_tx",message:"Need Antminer S21, paying in USDC",category:"asics",timestamp:"5 min ago"},{id:"i3",type:"buy",user:"@footballfan_uk",message:"Searching for World Cup tickets",category:"tickets",timestamp:"8 min ago"},{id:"i4",type:"buy",user:"@tickethunter",message:"Want Coldplay tickets for EU shows",category:"tickets",timestamp:"12 min ago"},{id:"i5",type:"buy",user:"@miningfarm_sg",message:"Looking for bulk S19 Pro deal",category:"asics",timestamp:"18 min ago"},{id:"i6",type:"buy",user:"@silverstack",message:"Need silver coins, any quantity",category:"gold",timestamp:"22 min ago"}];function getMarketplaceListingsByCategory(t){return t==="all"?marketplaceListings:marketplaceListings.filter(e=>e.category===t)}const STORAGE_KEYS={THEME:"sphere_theme",WELCOME_ACCEPTED:"sphere_welcome_accepted",TUTORIAL_COMPLETED:"sphere_tutorial_completed",TRANSACTION_HISTORY:"sphere_transaction_history",CHAT_MODE:"sphere_chat_mode",CHAT_SELECTED_GROUP:"sphere_chat_selected_group",CHAT_SELECTED_DM:"sphere_chat_selected_dm",AGENT_CHAT_SESSIONS:"sphere_agent_chat_sessions",IPFS_ENABLED:"sphere_ipfs_enabled",DEV_AGGREGATOR_URL:"sphere_dev_aggregator_url",DEV_SKIP_TRUST_BASE:"sphere_dev_skip_trust_base"},STORAGE_KEY_GENERATORS={agentMemory:(t,e)=>`sphere_agent_memory:${t}:${e}`,agentChatMessages:t=>`sphere_agent_chat_messages:${t}`},STORAGE_PREFIX="sphere_";function clearAllSphereData(){const t=[];for(let e=0;e<localStorage.length;e++){const s=localStorage.key(e);s?.startsWith(STORAGE_PREFIX)&&t.push(s)}t.forEach(e=>localStorage.removeItem(e)),console.log(`Cleared ${t.length} sphere keys from localStorage`)}function getMemoryKey(t,e){return STORAGE_KEY_GENERATORS.agentMemory(t,e)}function loadMemory(t,e){try{const s=getMemoryKey(t,e),r=localStorage.getItem(s);if(!r)return console.log(`[Memory] No stored memory for ${t}:${e}`),{};const a=JSON.parse(r);return console.log(`[Memory] Loaded memory for ${t}:${e}:`,Object.keys(a)),a}catch(s){return console.warn("[Memory] Failed to load memory:",s),{}}}function saveMemory(t,e,s){try{const r=getMemoryKey(t,e),a=JSON.stringify(s);return localStorage.setItem(r,a),console.log(`[Memory] Saved memory for ${t}:${e}:`,Object.keys(s)),!0}catch(r){return r instanceof DOMException&&(r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")?console.error("[Memory] localStorage quota exceeded. Unable to save memory."):console.error("[Memory] Failed to save memory:",r),!1}}function isLocalStorageAvailable(){try{const t="__localStorage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}}function isMock(){return!1}function getAgentMode(){return"real"}function getAgentApiUrl(){return"https://sphere.unicity.network/api"}function getAgentApiKey(){}function useAgentChat({activityId:t,userId:e}){const[s,r]=reactExports.useState([]),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(null),u=reactExports.useRef(v4()),f=e||u.current,d=reactExports.useRef(null),p=reactExports.useCallback(()=>{d.current&&(d.current.abort(),d.current=null),o(!1),c(null)},[]),m=reactExports.useCallback(async b=>{const E={id:v4(),role:"user",content:b,timestamp:Date.now()};r(j=>[...j,E]);const C={id:v4(),role:"assistant",content:"",timestamp:Date.now()};r(j=>[...j,C]),o(!0),c("Thinking...");try{d.current=new AbortController;const j=getAgentApiUrl(),B=[...s,E].map(Z=>({id:Z.id,role:Z.role,content:[{type:"text",text:Z.content}],timestamp:Z.timestamp})),D=isLocalStorageAvailable()?loadMemory(f,t):{};console.log("[useAgentChat] Sending memory state:",D);const F=void 0,q=await fetch(`${j}/chat/stream`,{method:"POST",headers:{"Content-Type":"application/json",...F&&{"x-api-key":F}},body:JSON.stringify({activityId:t,userId:f,messages:B,userContext:{userId:f,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,locale:navigator.language},memoryState:D}),signal:d.current.signal});if(!q.ok)throw new Error(`HTTP ${q.status}`);const V=q.body?.getReader();if(!V)throw new Error("No response body");const ee=new TextDecoder;let Q="",W="";for(;;){const{done:Z,value:z}=await V.read();if(Z)break;Q+=ee.decode(z,{stream:!0});const O=Q.split(`
`);Q=O.pop()||"";for(const k of O)if(k.startsWith("data: "))try{const v=JSON.parse(k.slice(6));switch(v.type){case"text-delta":W+=v.text,r(S=>S.map(N=>N.id===C.id?{...N,content:W}:N));break;case"tool-call":c(`Using ${v.toolName}...`);break;case"reasoning":r(S=>S.map(N=>N.id===C.id?{...N,thinking:(N.thinking||"")+v.text}:N));break;case"memory-update":isLocalStorageAvailable()&&v.memoryState&&saveMemory(f,t,v.memoryState);break;case"done":o(!1),c(null);break;case"error":r(S=>S.map(N=>N.id===C.id?{...N,content:`Error: ${v.message}`}:N)),o(!1),c(null);break}}catch{}}}catch(j){if(j instanceof Error&&j.name==="AbortError")return;r(B=>B.map(D=>D.id===C.id?{...D,content:"Failed to connect to agent server. Make sure agentic-chatbot is running."}:D)),o(!1),c(null)}},[t,s,f]),y=reactExports.useCallback(()=>{r([])},[]);return{messages:s,setMessages:r,isStreaming:a,currentStatus:l,sendMessage:m,clearMessages:y,stopGeneration:p,agentMode:getAgentMode()}}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},defaultTimeoutProvider={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},TimeoutManager=class{#e=defaultTimeoutProvider;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},timeoutManager=new TimeoutManager;function systemSetTimeoutZero(t){setTimeout(t,0)}var isServer=typeof window>"u"||"Deno"in globalThis;function noop(){}function functionalUpdate(t,e){return typeof t=="function"?t(e):t}function isValidTimeout(t){return typeof t=="number"&&t>=0&&t!==1/0}function timeUntilStale(t,e){return Math.max(t+(e||0)-Date.now(),0)}function resolveStaleTime(t,e){return typeof t=="function"?t(e):t}function resolveEnabled(t,e){return typeof t=="function"?t(e):t}function matchQuery(t,e){const{type:s="all",exact:r,fetchStatus:a,predicate:o,queryKey:l,stale:c}=t;if(l){if(r){if(e.queryHash!==hashQueryKeyByOptions(l,e.options))return!1}else if(!partialMatchKey(e.queryKey,l))return!1}if(s!=="all"){const u=e.isActive();if(s==="active"&&!u||s==="inactive"&&u)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||a&&a!==e.state.fetchStatus||o&&!o(e))}function matchMutation(t,e){const{exact:s,status:r,predicate:a,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(s){if(hashKey(e.options.mutationKey)!==hashKey(o))return!1}else if(!partialMatchKey(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||a&&!a(e))}function hashQueryKeyByOptions(t,e){return(e?.queryKeyHashFn||hashKey)(t)}function hashKey(t){return JSON.stringify(t,(e,s)=>isPlainObject(s)?Object.keys(s).sort().reduce((r,a)=>(r[a]=s[a],r),{}):s)}function partialMatchKey(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(s=>partialMatchKey(t[s],e[s])):!1}var hasOwn=Object.prototype.hasOwnProperty;function replaceEqualDeep(t,e,s=0){if(t===e)return t;if(s>500)return e;const r=isPlainArray(t)&&isPlainArray(e);if(!r&&!(isPlainObject(t)&&isPlainObject(e)))return e;const o=(r?t:Object.keys(t)).length,l=r?e:Object.keys(e),c=l.length,u=r?new Array(c):{};let f=0;for(let d=0;d<c;d++){const p=r?d:l[d],m=t[p],y=e[p];if(m===y){u[p]=m,(r?d<o:hasOwn.call(t,p))&&f++;continue}if(m===null||y===null||typeof m!="object"||typeof y!="object"){u[p]=y;continue}const b=replaceEqualDeep(m,y,s+1);u[p]=b,b===m&&f++}return o===c&&f===o?t:u}function shallowEqualObjects(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function isPlainArray(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function isPlainObject(t){if(!hasObjectPrototype(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!hasObjectPrototype(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hasObjectPrototype(t){return Object.prototype.toString.call(t)==="[object Object]"}function sleep$1(t){return new Promise(e=>{timeoutManager.setTimeout(e,t)})}function replaceData(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?replaceEqualDeep(t,e):e}function keepPreviousData(t){return t}function addToEnd(t,e,s=0){const r=[...t,e];return s&&r.length>s?r.slice(1):r}function addToStart(t,e,s=0){const r=[e,...t];return s&&r.length>s?r.slice(0,-1):r}var skipToken=Symbol();function ensureQueryFn(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function shouldThrowError(t,e){return typeof t=="function"?t(...e):!!t}function addConsumeAwareSignal(t,e,s){let r=!1,a;return Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(a??=e(),r||(r=!0,a.aborted?s():a.addEventListener("abort",s,{once:!0})),a)}),t}var FocusManager=class extends Subscribable{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!isServer&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},focusManager=new FocusManager;function pendingThenable(){let t,e;const s=new Promise((a,o)=>{t=a,e=o});s.status="pending",s.catch(()=>{});function r(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{r({status:"fulfilled",value:a}),t(a)},s.reject=a=>{r({status:"rejected",reason:a}),e(a)},s}var defaultScheduler=systemSetTimeoutZero;function createNotifyManager(){let t=[],e=0,s=c=>{c()},r=c=>{c()},a=defaultScheduler;const o=c=>{e?t.push(c):a(()=>{s(c)})},l=()=>{const c=t;t=[],c.length&&a(()=>{r(()=>{c.forEach(u=>{s(u)})})})};return{batch:c=>{let u;e++;try{u=c()}finally{e--,e||l()}return u},batchCalls:c=>(...u)=>{o(()=>{c(...u)})},schedule:o,setNotifyFunction:c=>{s=c},setBatchNotifyFunction:c=>{r=c},setScheduler:c=>{a=c}}}var notifyManager=createNotifyManager(),OnlineManager=class extends Subscribable{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!isServer&&window.addEventListener){const e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(s=>{s(t)}))}isOnline(){return this.#e}},onlineManager=new OnlineManager;function defaultRetryDelay(t){return Math.min(1e3*2**t,3e4)}function canFetch(t){return(t??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function createRetryer(t){let e=!1,s=0,r;const a=pendingThenable(),o=()=>a.status!=="pending",l=E=>{if(!o()){const C=new CancelledError(E);m(C),t.onCancel?.(C)}},c=()=>{e=!0},u=()=>{e=!1},f=()=>focusManager.isFocused()&&(t.networkMode==="always"||onlineManager.isOnline())&&t.canRun(),d=()=>canFetch(t.networkMode)&&t.canRun(),p=E=>{o()||(r?.(),a.resolve(E))},m=E=>{o()||(r?.(),a.reject(E))},y=()=>new Promise(E=>{r=C=>{(o()||f())&&E(C)},t.onPause?.()}).then(()=>{r=void 0,o()||t.onContinue?.()}),b=()=>{if(o())return;let E;const C=s===0?t.initialPromise:void 0;try{E=C??t.fn()}catch(j){E=Promise.reject(j)}Promise.resolve(E).then(p).catch(j=>{if(o())return;const B=t.retry??(isServer?0:3),D=t.retryDelay??defaultRetryDelay,F=typeof D=="function"?D(s,j):D,q=B===!0||typeof B=="number"&&s<B||typeof B=="function"&&B(s,j);if(e||!q){m(j);return}s++,t.onFail?.(s,j),sleep$1(F).then(()=>f()?void 0:y()).then(()=>{e?m(j):b()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(r?.(),a),cancelRetry:c,continueRetry:u,canStart:d,start:()=>(d()?b():y().then(b),a)}}var Removable=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&(this.#e=timeoutManager.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(isServer?1/0:300*1e3))}clearGcTimeout(){this.#e&&(timeoutManager.clearTimeout(this.#e),this.#e=void 0)}},Query=class extends Removable{#e;#t;#r;#i;#n;#a;#o;constructor(t){super(),this.#o=!1,this.#a=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.client,this.#r=this.#i.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=getDefaultState$1(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){if(this.options={...this.#a,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=getDefaultState$1(this.options);e.data!==void 0&&(this.setState(successState(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const s=replaceData(this.state.data,t,this.options);return this.#s({data:s,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),s}setState(t,e){this.#s({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(noop).catch(noop):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>resolveEnabled(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>resolveStaleTime(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const c=this.observers.find(u=>u.options.queryFn);c&&this.setOptions(c.options)}const s=new AbortController,r=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,s.signal)})},a=()=>{const c=ensureQueryFn(this.options,e),f=(()=>{const d={client:this.#i,queryKey:this.queryKey,meta:this.meta};return r(d),d})();return this.#o=!1,this.options.persister?this.options.persister(c,f,this):c(f)},l=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:a};return r(c),c})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#s({type:"fetch",meta:l.fetchOptions?.meta}),this.#n=createRetryer({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:c=>{c instanceof CancelledError&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),s.abort()},onFail:(c,u)=>{this.#s({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const c=await this.#n.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof CancelledError){if(c.silent)return this.#n.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#s({type:"error",error:c}),this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#s(t){const e=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...fetchState(s.data,this.options),fetchMeta:t.meta??null};case"success":const r={...s,...successState(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const a=t.error;return{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=e(this.state),notifyManager.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function fetchState(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function successState(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function getDefaultState$1(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,r=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var QueryObserver=class extends Subscribable{constructor(t,e){super(),this.options=e,this.#e=t,this.#s=null,this.#o=pendingThenable(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#r=void 0;#i=void 0;#n;#a;#o;#s;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),shouldFetchOnMount(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#E(),this.#t.setOptions(this.options),e._defaulted&&!shallowEqualObjects(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&shouldFetchOptionally(this.#t,s,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==s||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(e.enabled,this.#t)||resolveStaleTime(this.options.staleTime,this.#t)!==resolveStaleTime(e.staleTime,this.#t))&&this.#g();const a=this.#x();r&&(this.#t!==s||resolveEnabled(this.options.enabled,this.#t)!==resolveEnabled(e.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),s=this.createResult(e,t);return shouldAssignObserverCurrentProperties(this,s)&&(this.#i=s,this.#a=this.options,this.#n=this.#t.state),s}getCurrentResult(){return this.#i}trackResult(t,e){return new Proxy(t,{get:(s,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),s=this.#e.getQueryCache().build(this.#e,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#i))}#d(t){this.#E();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(noop)),e}#g(){this.#b();const t=resolveStaleTime(this.options.staleTime,this.#t);if(isServer||this.#i.isStale||!isValidTimeout(t))return;const s=timeUntilStale(this.#i.dataUpdatedAt,t)+1;this.#c=timeoutManager.setTimeout(()=>{this.#i.isStale||this.updateResult()},s)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#w(),this.#l=t,!(isServer||resolveEnabled(this.options.enabled,this.#t)===!1||!isValidTimeout(this.#l)||this.#l===0)&&(this.#u=timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&this.#d()},this.#l))}#v(){this.#g(),this.#y(this.#x())}#b(){this.#c&&(timeoutManager.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(timeoutManager.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const s=this.#t,r=this.options,a=this.#i,o=this.#n,l=this.#a,u=t!==s?t.state:this.#r,{state:f}=t;let d={...f},p=!1,m;if(e._optimisticResults){const Q=this.hasListeners(),W=!Q&&shouldFetchOnMount(t,e),Z=Q&&shouldFetchOptionally(t,s,e,r);(W||Z)&&(d={...d,...fetchState(f.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:y,errorUpdatedAt:b,status:E}=d;m=d.data;let C=!1;if(e.placeholderData!==void 0&&m===void 0&&E==="pending"){let Q;a?.isPlaceholderData&&e.placeholderData===l?.placeholderData?(Q=a.data,C=!0):Q=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,Q!==void 0&&(E="success",m=replaceData(a?.data,Q,e),p=!0)}if(e.select&&m!==void 0&&!C)if(a&&m===o?.data&&e.select===this.#m)m=this.#f;else try{this.#m=e.select,m=e.select(m),m=replaceData(a?.data,m,e),this.#f=m,this.#s=null}catch(Q){this.#s=Q}this.#s&&(y=this.#s,m=this.#f,b=Date.now(),E="error");const j=d.fetchStatus==="fetching",B=E==="pending",D=E==="error",F=B&&j,q=m!==void 0,ee={status:E,fetchStatus:d.fetchStatus,isPending:B,isSuccess:E==="success",isError:D,isInitialLoading:F,isLoading:F,data:m,dataUpdatedAt:d.dataUpdatedAt,error:y,errorUpdatedAt:b,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:j,isRefetching:j&&!B,isLoadingError:D&&!q,isPaused:d.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:D&&q,isStale:isStale(t,e),refetch:this.refetch,promise:this.#o,isEnabled:resolveEnabled(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const Q=ee.data!==void 0,W=ee.status==="error"&&!Q,Z=k=>{W?k.reject(ee.error):Q&&k.resolve(ee.data)},z=()=>{const k=this.#o=ee.promise=pendingThenable();Z(k)},O=this.#o;switch(O.status){case"pending":t.queryHash===s.queryHash&&Z(O);break;case"fulfilled":(W||ee.data!==O.value)&&z();break;case"rejected":(!W||ee.error!==O.reason)&&z();break}}return ee}updateResult(){const t=this.#i,e=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#a=this.options,this.#n.data!==void 0&&(this.#h=this.#t),shallowEqualObjects(e,t))return;this.#i=e;const s=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,a=typeof r=="function"?r():r;if(a==="all"||!a&&!this.#p.size)return!0;const o=new Set(a??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#i).some(l=>{const c=l;return this.#i[c]!==t[c]&&o.has(c)})};this.#_({listeners:s()})}#E(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#_(t){notifyManager.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#i)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function shouldLoadOnMount(t,e){return resolveEnabled(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function shouldFetchOnMount(t,e){return shouldLoadOnMount(t,e)||t.state.data!==void 0&&shouldFetchOn(t,e,e.refetchOnMount)}function shouldFetchOn(t,e,s){if(resolveEnabled(e.enabled,t)!==!1&&resolveStaleTime(e.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&isStale(t,e)}return!1}function shouldFetchOptionally(t,e,s,r){return(t!==e||resolveEnabled(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&isStale(t,s)}function isStale(t,e){return resolveEnabled(e.enabled,t)!==!1&&t.isStaleByTime(resolveStaleTime(e.staleTime,t))}function shouldAssignObserverCurrentProperties(t,e){return!shallowEqualObjects(t.getCurrentResult(),e)}function infiniteQueryBehavior(t){return{onFetch:(e,s)=>{const r=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,o=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},u=0;const f=async()=>{let d=!1;const p=b=>{addConsumeAwareSignal(b,()=>e.signal,()=>d=!0)},m=ensureQueryFn(e.options,e.fetchOptions),y=async(b,E,C)=>{if(d)return Promise.reject();if(E==null&&b.pages.length)return Promise.resolve(b);const B=(()=>{const V={client:e.client,queryKey:e.queryKey,pageParam:E,direction:C?"backward":"forward",meta:e.options.meta};return p(V),V})(),D=await m(B),{maxPages:F}=e.options,q=C?addToStart:addToEnd;return{pages:q(b.pages,D,F),pageParams:q(b.pageParams,E,F)}};if(a&&o.length){const b=a==="backward",E=b?getPreviousPageParam:getNextPageParam,C={pages:o,pageParams:l},j=E(r,C);c=await y(C,j,b)}else{const b=t??o.length;do{const E=u===0?l[0]??r.initialPageParam:getNextPageParam(r,c);if(u>0&&E==null)break;c=await y(c,E),u++}while(u<b)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s):e.fetchFn=f}}}function getNextPageParam(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function getPreviousPageParam(t,{pages:e,pageParams:s}){return e.length>0?t.getPreviousPageParam?.(e[0],e,s[0],s):void 0}function hasNextPage(t,e){return e?getNextPageParam(t,e)!=null:!1}function hasPreviousPage(t,e){return!e||!t.getPreviousPageParam?!1:getPreviousPageParam(t,e)!=null}var InfiniteQueryObserver=class extends QueryObserver{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:infiniteQueryBehavior()})}getOptimisticResult(t){return t.behavior=infiniteQueryBehavior(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){const{state:s}=t,r=super.createResult(t,e),{isFetching:a,isRefetching:o,isError:l,isRefetchError:c}=r,u=s.fetchMeta?.fetchMore?.direction,f=l&&u==="forward",d=a&&u==="forward",p=l&&u==="backward",m=a&&u==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:hasNextPage(e,s.data),hasPreviousPage:hasPreviousPage(e,s.data),isFetchNextPageError:f,isFetchingNextPage:d,isFetchPreviousPageError:p,isFetchingPreviousPage:m,isRefetchError:c&&!f&&!p,isRefetching:o&&!d&&!m}}},Mutation=class extends Removable{#e;#t;#r;#i;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#r=t.mutationCache,this.#t=[],this.state=t.state||getDefaultState(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#n({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(o,l)=>{this.#n({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#n({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const r=this.state.status==="pending",a=!this.#i.canStart();try{if(r)e();else{this.#n({type:"pending",variables:t,isPaused:a}),this.#r.config.onMutate&&await this.#r.config.onMutate(t,this,s);const l=await this.options.onMutate?.(t,s);l!==this.state.context&&this.#n({type:"pending",context:l,variables:t,isPaused:a})}const o=await this.#i.start();return await this.#r.config.onSuccess?.(o,t,this.state.context,this,s),await this.options.onSuccess?.(o,t,this.state.context,s),await this.#r.config.onSettled?.(o,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(o,null,t,this.state.context,s),this.#n({type:"success",data:o}),o}catch(o){try{await this.#r.config.onError?.(o,t,this.state.context,this,s)}catch(l){Promise.reject(l)}try{await this.options.onError?.(o,t,this.state.context,s)}catch(l){Promise.reject(l)}try{await this.#r.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,s)}catch(l){Promise.reject(l)}try{await this.options.onSettled?.(void 0,o,t,this.state.context,s)}catch(l){Promise.reject(l)}throw this.#n({type:"error",error:o}),o}finally{this.#r.runNext(this)}}#n(t){const e=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),notifyManager.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(t)}),this.#r.notify({mutation:this,type:"updated",action:t})})}};function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var MutationCache=class extends Subscribable{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,e,s){const r=new Mutation({client:t,mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(e),state:s});return this.add(r),r}add(t){this.#e.add(t);const e=scopeFor(t);if(typeof e=="string"){const s=this.#t.get(e);s?s.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=scopeFor(t);if(typeof e=="string"){const s=this.#t.get(e);if(s)if(s.length>1){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}else s[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=scopeFor(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(a=>a.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=scopeFor(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){notifyManager.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(s=>matchMutation(e,s))}findAll(t={}){return this.getAll().filter(e=>matchMutation(t,e))}notify(t){notifyManager.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return notifyManager.batch(()=>Promise.all(t.map(e=>e.continue().catch(noop))))}};function scopeFor(t){return t.options.scope?.id}var MutationObserver$1=class extends Subscribable{#e;#t=void 0;#r;#i;constructor(e,s){super(),this.#e=e,this.setOptions(s),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const s=this.options;this.options=this.#e.defaultMutationOptions(e),shallowEqualObjects(this.options,s)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),s?.mutationKey&&this.options.mutationKey&&hashKey(s.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#a()}mutate(e,s){return this.#i=s,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#n(){const e=this.#r?.state??getDefaultState();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#a(e){notifyManager.batch(()=>{if(this.#i&&this.hasListeners()){const s=this.#t.variables,r=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#i.onSuccess?.(e.data,s,r,a)}catch(o){Promise.reject(o)}try{this.#i.onSettled?.(e.data,null,s,r,a)}catch(o){Promise.reject(o)}}else if(e?.type==="error"){try{this.#i.onError?.(e.error,s,r,a)}catch(o){Promise.reject(o)}try{this.#i.onSettled?.(void 0,e.error,s,r,a)}catch(o){Promise.reject(o)}}}this.listeners.forEach(s=>{s(this.#t)})})}},QueryCache=class extends Subscribable{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,s){const r=e.queryKey,a=e.queryHash??hashQueryKeyByOptions(r,e);let o=this.get(a);return o||(o=new Query({client:t,queryKey:r,queryHash:a,options:t.defaultQueryOptions(e),state:s,defaultOptions:t.getQueryDefaults(r)}),this.add(o)),o}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(s=>matchQuery(e,s))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(s=>matchQuery(t,s)):e}notify(t){notifyManager.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},QueryClient=class{#e;#t;#r;#i;#n;#a;#o;#s;constructor(t={}){this.#e=t.queryCache||new QueryCache,this.#t=t.mutationCache||new MutationCache,this.#r=t.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=focusManager.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=onlineManager.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=this.#e.build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(resolveStaleTime(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(r.queryHash)?.state.data,l=functionalUpdate(e,o);if(l!==void 0)return this.#e.build(this,r).setData(l,{...s,manual:!0})}setQueriesData(t,e,s){return notifyManager.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;notifyManager.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=this.#e;return notifyManager.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=notifyManager.batch(()=>this.#e.findAll(t).map(a=>a.cancel(s)));return Promise.all(r).then(noop).catch(noop)}invalidateQueries(t,e={}){return notifyManager.batch(()=>(this.#e.findAll(t).forEach(s=>{s.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=notifyManager.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,s);return s.throwOnError||(o=o.catch(noop)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(noop)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=this.#e.build(this,e);return s.isStaleByTime(resolveStaleTime(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(noop).catch(noop)}fetchInfiniteQuery(t){return t.behavior=infiniteQueryBehavior(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(noop).catch(noop)}ensureInfiniteQueryData(t){return t.behavior=infiniteQueryBehavior(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return onlineManager.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#i.set(hashKey(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],s={};return e.forEach(r=>{partialMatchKey(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){this.#n.set(hashKey(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#n.values()],s={};return e.forEach(r=>{partialMatchKey(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},QueryClientContext=reactExports.createContext(void 0),useQueryClient=t=>{const e=reactExports.useContext(QueryClientContext);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},QueryClientProvider=({client:t,children:e})=>(reactExports.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:t,children:e})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext),ensurePreventErrorBoundaryRetry=(t,e,s)=>{const r=s?.state.error&&typeof t.throwOnError=="function"?shouldThrowError(t.throwOnError,[s.state.error,s]):t.throwOnError;(t.suspense||t.experimental_prefetchInRender||r)&&(e.isReset()||(t.retryOnMount=!1))},useClearResetErrorBoundary=t=>{reactExports.useEffect(()=>{t.clearReset()},[t])},getHasError=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:a})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(a&&t.data===void 0||shouldThrowError(s,[t.error,r])),ensureSuspenseTimers=t=>{if(t.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...a)=>s(r(...a)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},willFetch=(t,e)=>t.isLoading&&t.isFetching&&!e,shouldSuspend=(t,e)=>t?.suspense&&e.isPending,fetchOptimistic=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function useBaseQuery(t,e,s){const r=useIsRestoring(),a=useQueryErrorResetBoundary(),o=useQueryClient(),l=o.defaultQueryOptions(t);o.getDefaultOptions().queries?._experimental_beforeQuery?.(l);const c=o.getQueryCache().get(l.queryHash);l._optimisticResults=r?"isRestoring":"optimistic",ensureSuspenseTimers(l),ensurePreventErrorBoundaryRetry(l,a,c),useClearResetErrorBoundary(a);const u=!o.getQueryCache().get(l.queryHash),[f]=reactExports.useState(()=>new e(o,l)),d=f.getOptimisticResult(l),p=!r&&t.subscribed!==!1;if(reactExports.useSyncExternalStore(reactExports.useCallback(m=>{const y=p?f.subscribe(notifyManager.batchCalls(m)):noop;return f.updateResult(),y},[f,p]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),reactExports.useEffect(()=>{f.setOptions(l)},[l,f]),shouldSuspend(l,d))throw fetchOptimistic(l,f,a);if(getHasError({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:c,suspense:l.suspense}))throw d.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(l,d),l.experimental_prefetchInRender&&!isServer&&willFetch(d,r)&&(u?fetchOptimistic(l,f,a):c?.promise)?.catch(noop).finally(()=>{f.updateResult()}),l.notifyOnChangeProps?d:f.trackResult(d)}function useQuery(t,e){return useBaseQuery(t,QueryObserver)}function useMutation(t,e){const s=useQueryClient(),[r]=reactExports.useState(()=>new MutationObserver$1(s,t));reactExports.useEffect(()=>{r.setOptions(t)},[r,t]);const a=reactExports.useSyncExternalStore(reactExports.useCallback(l=>r.subscribe(notifyManager.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=reactExports.useCallback((l,c)=>{r.mutate(l,c).catch(noop)},[r]);if(a.error&&shouldThrowError(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}function useInfiniteQuery(t,e){return useBaseQuery(t,InfiniteQueryObserver)}const THEME_QUERY_KEY=["theme"];function getStoredTheme(){if(typeof window>"u")return"dark";const t=localStorage.getItem(STORAGE_KEYS.THEME);return t==="light"||t==="dark"?t:window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}function applyTheme(t){const e=document.documentElement;t==="dark"?(e.classList.add("dark"),e.classList.remove("light")):(e.classList.add("light"),e.classList.remove("dark"));const s=document.querySelector('meta[name="theme-color"]');s&&s.setAttribute("content",t==="dark"?"#0a0a0a":"#f5f5f5")}function useTheme(){const t=useQueryClient(),{data:e="dark"}=useQuery({queryKey:THEME_QUERY_KEY,queryFn:getStoredTheme,staleTime:1/0,gcTime:1/0});reactExports.useEffect(()=>{applyTheme(e)},[e]),reactExports.useEffect(()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{if(!localStorage.getItem(STORAGE_KEYS.THEME)){const u=l.matches?"dark":"light";t.setQueryData(THEME_QUERY_KEY,u)}};return a.addEventListener("change",o),()=>a.removeEventListener("change",o)},[t]);const s=reactExports.useCallback(a=>{localStorage.setItem(STORAGE_KEYS.THEME,a),t.setQueryData(THEME_QUERY_KEY,a),applyTheme(a)},[t]),r=reactExports.useCallback(()=>{s(e==="dark"?"light":"dark")},[e,s]);return{theme:e,setTheme:s,toggleTheme:r,isDark:e==="dark",isLight:e==="light"}}function ThemeToggle(){const{isDark:t,toggleTheme:e}=useTheme();return jsxRuntimeExports.jsxs(motion.button,{onClick:e,whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.05},className:"relative p-2 sm:p-2.5 lg:p-3 rounded-lg sm:rounded-xl transition-all group bg-transparent hover:bg-theme-bg-tertiary dark:hover:bg-neutral-800/80 cursor-pointer","aria-label":t?"Switch to light mode":"Switch to dark mode",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-4 h-4 sm:w-5 sm:h-5",children:[jsxRuntimeExports.jsx(motion.div,{initial:!1,animate:{scale:t?1:0,opacity:t?1:0,rotate:t?0:180},transition:{duration:.2},className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx(Moon,{className:"w-4 h-4 sm:w-5 sm:h-5 text-theme-text-secondary group-hover:text-orange-400 transition-colors"})}),jsxRuntimeExports.jsx(motion.div,{initial:!1,animate:{scale:t?0:1,opacity:t?0:1,rotate:t?-180:0},transition:{duration:.2},className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx(Sun,{className:"w-4 h-4 sm:w-5 sm:h-5 text-theme-text-secondary group-hover:text-orange-400 transition-colors"})})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg sm:rounded-xl bg-orange-500/0 group-hover:bg-orange-500/10 transition-colors"})]})}function ThemeInitializer({children:t}){const{theme:e}=useTheme();return reactExports.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(e)},[e]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t})}const scriptRel="modulepreload",assetsURL=function(t){return"/sphere/fix-storage-disconnect-during-init/"+t},seen={},__vitePreload=function(e,s,r){let a=Promise.resolve();if(s&&s.length>0){let u=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=u(s.map(f=>{if(f=assetsURL(f),f in seen)return;seen[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":scriptRel,d||(m.as="script"),m.crossOrigin="",m.href=f,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((y,b)=>{m.addEventListener("load",y),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};var buffer$2={},base64Js$1={};base64Js$1.byteLength=byteLength;base64Js$1.toByteArray=toByteArray;base64Js$1.fromByteArray=fromByteArray;var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup$1[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=t.indexOf("=");s===-1&&(s=e);var r=s===e?0:4-s%4;return[s,r]}function byteLength(t){var e=getLens(t),s=e[0],r=e[1];return(s+r)*3/4-r}function _byteLength(t,e,s){return(e+s)*3/4-s}function toByteArray(t){var e,s=getLens(t),r=s[0],a=s[1],o=new Arr(_byteLength(t,r,a)),l=0,c=a>0?r-4:r,u;for(u=0;u<c;u+=4)e=revLookup[t.charCodeAt(u)]<<18|revLookup[t.charCodeAt(u+1)]<<12|revLookup[t.charCodeAt(u+2)]<<6|revLookup[t.charCodeAt(u+3)],o[l++]=e>>16&255,o[l++]=e>>8&255,o[l++]=e&255;return a===2&&(e=revLookup[t.charCodeAt(u)]<<2|revLookup[t.charCodeAt(u+1)]>>4,o[l++]=e&255),a===1&&(e=revLookup[t.charCodeAt(u)]<<10|revLookup[t.charCodeAt(u+1)]<<4|revLookup[t.charCodeAt(u+2)]>>2,o[l++]=e>>8&255,o[l++]=e&255),o}function tripletToBase64(t){return lookup$1[t>>18&63]+lookup$1[t>>12&63]+lookup$1[t>>6&63]+lookup$1[t&63]}function encodeChunk(t,e,s){for(var r,a=[],o=e;o<s;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),a.push(tripletToBase64(r));return a.join("")}function fromByteArray(t){for(var e,s=t.length,r=s%3,a=[],o=16383,l=0,c=s-r;l<c;l+=o)a.push(encodeChunk(t,l,l+o>c?c:l+o));return r===1?(e=t[s-1],a.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):r===2&&(e=(t[s-2]<<8)+t[s-1],a.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),a.join("")}var ieee754$1={};ieee754$1.read=function(t,e,s,r,a){var o,l,c=a*8-r-1,u=(1<<c)-1,f=u>>1,d=-7,p=s?a-1:0,m=s?-1:1,y=t[e+p];for(p+=m,o=y&(1<<-d)-1,y>>=-d,d+=c;d>0;o=o*256+t[e+p],p+=m,d-=8);for(l=o&(1<<-d)-1,o>>=-d,d+=r;d>0;l=l*256+t[e+p],p+=m,d-=8);if(o===0)o=1-f;else{if(o===u)return l?NaN:(y?-1:1)*(1/0);l=l+Math.pow(2,r),o=o-f}return(y?-1:1)*l*Math.pow(2,o-r)};ieee754$1.write=function(t,e,s,r,a,o){var l,c,u,f=o*8-a-1,d=(1<<f)-1,p=d>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:o-1,b=r?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,l=d):(l=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-l))<1&&(l--,u*=2),l+p>=1?e+=m/u:e+=m*Math.pow(2,1-p),e*u>=2&&(l++,u/=2),l+p>=d?(c=0,l=d):l+p>=1?(c=(e*u-1)*Math.pow(2,a),l=l+p):(c=e*Math.pow(2,p-1)*Math.pow(2,a),l=0));a>=8;t[s+y]=c&255,y+=b,c/=256,a-=8);for(l=l<<a|c,f+=a;f>0;t[s+y]=l&255,y+=b,l/=256,f-=8);t[s+y-b]|=E*128};(function(t){const e=base64Js$1,s=ieee754$1,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=q,t.INSPECT_MAX_BYTES=50;const a=2147483647;t.kMaxLength=a;const{Uint8Array:o,ArrayBuffer:l,SharedArrayBuffer:c}=globalThis;d.TYPED_ARRAY_SUPPORT=u(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const de=new o(1),ne={foo:function(){return 42}};return Object.setPrototypeOf(ne,o.prototype),Object.setPrototypeOf(de,ne),de.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function f(de){if(de>a)throw new RangeError('The value "'+de+'" is invalid for option "size"');const ne=new o(de);return Object.setPrototypeOf(ne,d.prototype),ne}function d(de,ne,se){if(typeof de=="number"){if(typeof ne=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(de)}return p(de,ne,se)}d.poolSize=8192;function p(de,ne,se){if(typeof de=="string")return E(de,ne);if(l.isView(de))return j(de);if(de==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof de);if(Le(de,l)||de&&Le(de.buffer,l)||typeof c<"u"&&(Le(de,c)||de&&Le(de.buffer,c)))return B(de,ne,se);if(typeof de=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const me=de.valueOf&&de.valueOf();if(me!=null&&me!==de)return d.from(me,ne,se);const Ee=D(de);if(Ee)return Ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof de[Symbol.toPrimitive]=="function")return d.from(de[Symbol.toPrimitive]("string"),ne,se);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof de)}d.from=function(de,ne,se){return p(de,ne,se)},Object.setPrototypeOf(d.prototype,o.prototype),Object.setPrototypeOf(d,o);function m(de){if(typeof de!="number")throw new TypeError('"size" argument must be of type number');if(de<0)throw new RangeError('The value "'+de+'" is invalid for option "size"')}function y(de,ne,se){return m(de),de<=0?f(de):ne!==void 0?typeof se=="string"?f(de).fill(ne,se):f(de).fill(ne):f(de)}d.alloc=function(de,ne,se){return y(de,ne,se)};function b(de){return m(de),f(de<0?0:F(de)|0)}d.allocUnsafe=function(de){return b(de)},d.allocUnsafeSlow=function(de){return b(de)};function E(de,ne){if((typeof ne!="string"||ne==="")&&(ne="utf8"),!d.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);const se=V(de,ne)|0;let me=f(se);const Ee=me.write(de,ne);return Ee!==se&&(me=me.slice(0,Ee)),me}function C(de){const ne=de.length<0?0:F(de.length)|0,se=f(ne);for(let me=0;me<ne;me+=1)se[me]=de[me]&255;return se}function j(de){if(Le(de,o)){const ne=new o(de);return B(ne.buffer,ne.byteOffset,ne.byteLength)}return C(de)}function B(de,ne,se){if(ne<0||de.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<ne+(se||0))throw new RangeError('"length" is outside of buffer bounds');let me;return ne===void 0&&se===void 0?me=new o(de):se===void 0?me=new o(de,ne):me=new o(de,ne,se),Object.setPrototypeOf(me,d.prototype),me}function D(de){if(d.isBuffer(de)){const ne=F(de.length)|0,se=f(ne);return se.length===0||de.copy(se,0,0,ne),se}if(de.length!==void 0)return typeof de.length!="number"||Fe(de.length)?f(0):C(de);if(de.type==="Buffer"&&Array.isArray(de.data))return C(de.data)}function F(de){if(de>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return de|0}function q(de){return+de!=de&&(de=0),d.alloc(+de)}d.isBuffer=function(ne){return ne!=null&&ne._isBuffer===!0&&ne!==d.prototype},d.compare=function(ne,se){if(Le(ne,o)&&(ne=d.from(ne,ne.offset,ne.byteLength)),Le(se,o)&&(se=d.from(se,se.offset,se.byteLength)),!d.isBuffer(ne)||!d.isBuffer(se))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ne===se)return 0;let me=ne.length,Ee=se.length;for(let _e=0,ve=Math.min(me,Ee);_e<ve;++_e)if(ne[_e]!==se[_e]){me=ne[_e],Ee=se[_e];break}return me<Ee?-1:Ee<me?1:0},d.isEncoding=function(ne){switch(String(ne).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(ne,se){if(!Array.isArray(ne))throw new TypeError('"list" argument must be an Array of Buffers');if(ne.length===0)return d.alloc(0);let me;if(se===void 0)for(se=0,me=0;me<ne.length;++me)se+=ne[me].length;const Ee=d.allocUnsafe(se);let _e=0;for(me=0;me<ne.length;++me){let ve=ne[me];if(Le(ve,o))_e+ve.length>Ee.length?(d.isBuffer(ve)||(ve=d.from(ve)),ve.copy(Ee,_e)):o.prototype.set.call(Ee,ve,_e);else if(d.isBuffer(ve))ve.copy(Ee,_e);else throw new TypeError('"list" argument must be an Array of Buffers');_e+=ve.length}return Ee};function V(de,ne){if(d.isBuffer(de))return de.length;if(l.isView(de)||Le(de,l))return de.byteLength;if(typeof de!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof de);const se=de.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&se===0)return 0;let Ee=!1;for(;;)switch(ne){case"ascii":case"latin1":case"binary":return se;case"utf8":case"utf-8":return ye(de).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se*2;case"hex":return se>>>1;case"base64":return Me(de).length;default:if(Ee)return me?-1:ye(de).length;ne=(""+ne).toLowerCase(),Ee=!0}}d.byteLength=V;function ee(de,ne,se){let me=!1;if((ne===void 0||ne<0)&&(ne=0),ne>this.length||((se===void 0||se>this.length)&&(se=this.length),se<=0)||(se>>>=0,ne>>>=0,se<=ne))return"";for(de||(de="utf8");;)switch(de){case"hex":return A(this,ne,se);case"utf8":case"utf-8":return R(this,ne,se);case"ascii":return I(this,ne,se);case"latin1":case"binary":return $(this,ne,se);case"base64":return N(this,ne,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,ne,se);default:if(me)throw new TypeError("Unknown encoding: "+de);de=(de+"").toLowerCase(),me=!0}}d.prototype._isBuffer=!0;function Q(de,ne,se){const me=de[ne];de[ne]=de[se],de[se]=me}d.prototype.swap16=function(){const ne=this.length;if(ne%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let se=0;se<ne;se+=2)Q(this,se,se+1);return this},d.prototype.swap32=function(){const ne=this.length;if(ne%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let se=0;se<ne;se+=4)Q(this,se,se+3),Q(this,se+1,se+2);return this},d.prototype.swap64=function(){const ne=this.length;if(ne%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let se=0;se<ne;se+=8)Q(this,se,se+7),Q(this,se+1,se+6),Q(this,se+2,se+5),Q(this,se+3,se+4);return this},d.prototype.toString=function(){const ne=this.length;return ne===0?"":arguments.length===0?R(this,0,ne):ee.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(ne){if(!d.isBuffer(ne))throw new TypeError("Argument must be a Buffer");return this===ne?!0:d.compare(this,ne)===0},d.prototype.inspect=function(){let ne="";const se=t.INSPECT_MAX_BYTES;return ne=this.toString("hex",0,se).replace(/(.{2})/g,"$1 ").trim(),this.length>se&&(ne+=" ... "),"<Buffer "+ne+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(ne,se,me,Ee,_e){if(Le(ne,o)&&(ne=d.from(ne,ne.offset,ne.byteLength)),!d.isBuffer(ne))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ne);if(se===void 0&&(se=0),me===void 0&&(me=ne?ne.length:0),Ee===void 0&&(Ee=0),_e===void 0&&(_e=this.length),se<0||me>ne.length||Ee<0||_e>this.length)throw new RangeError("out of range index");if(Ee>=_e&&se>=me)return 0;if(Ee>=_e)return-1;if(se>=me)return 1;if(se>>>=0,me>>>=0,Ee>>>=0,_e>>>=0,this===ne)return 0;let ve=_e-Ee,Ae=me-se;const Oe=Math.min(ve,Ae),Ue=this.slice(Ee,_e),Ke=ne.slice(se,me);for(let We=0;We<Oe;++We)if(Ue[We]!==Ke[We]){ve=Ue[We],Ae=Ke[We];break}return ve<Ae?-1:Ae<ve?1:0};function W(de,ne,se,me,Ee){if(de.length===0)return-1;if(typeof se=="string"?(me=se,se=0):se>2147483647?se=2147483647:se<-2147483648&&(se=-2147483648),se=+se,Fe(se)&&(se=Ee?0:de.length-1),se<0&&(se=de.length+se),se>=de.length){if(Ee)return-1;se=de.length-1}else if(se<0)if(Ee)se=0;else return-1;if(typeof ne=="string"&&(ne=d.from(ne,me)),d.isBuffer(ne))return ne.length===0?-1:Z(de,ne,se,me,Ee);if(typeof ne=="number")return ne=ne&255,typeof o.prototype.indexOf=="function"?Ee?o.prototype.indexOf.call(de,ne,se):o.prototype.lastIndexOf.call(de,ne,se):Z(de,[ne],se,me,Ee);throw new TypeError("val must be string, number or Buffer")}function Z(de,ne,se,me,Ee){let _e=1,ve=de.length,Ae=ne.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(de.length<2||ne.length<2)return-1;_e=2,ve/=2,Ae/=2,se/=2}function Oe(Ke,We){return _e===1?Ke[We]:Ke.readUInt16BE(We*_e)}let Ue;if(Ee){let Ke=-1;for(Ue=se;Ue<ve;Ue++)if(Oe(de,Ue)===Oe(ne,Ke===-1?0:Ue-Ke)){if(Ke===-1&&(Ke=Ue),Ue-Ke+1===Ae)return Ke*_e}else Ke!==-1&&(Ue-=Ue-Ke),Ke=-1}else for(se+Ae>ve&&(se=ve-Ae),Ue=se;Ue>=0;Ue--){let Ke=!0;for(let We=0;We<Ae;We++)if(Oe(de,Ue+We)!==Oe(ne,We)){Ke=!1;break}if(Ke)return Ue}return-1}d.prototype.includes=function(ne,se,me){return this.indexOf(ne,se,me)!==-1},d.prototype.indexOf=function(ne,se,me){return W(this,ne,se,me,!0)},d.prototype.lastIndexOf=function(ne,se,me){return W(this,ne,se,me,!1)};function z(de,ne,se,me){se=Number(se)||0;const Ee=de.length-se;me?(me=Number(me),me>Ee&&(me=Ee)):me=Ee;const _e=ne.length;me>_e/2&&(me=_e/2);let ve;for(ve=0;ve<me;++ve){const Ae=parseInt(ne.substr(ve*2,2),16);if(Fe(Ae))return ve;de[se+ve]=Ae}return ve}function O(de,ne,se,me){return ke(ye(ne,de.length-se),de,se,me)}function k(de,ne,se,me){return ke(we(ne),de,se,me)}function v(de,ne,se,me){return ke(Me(ne),de,se,me)}function S(de,ne,se,me){return ke(Re(ne,de.length-se),de,se,me)}d.prototype.write=function(ne,se,me,Ee){if(se===void 0)Ee="utf8",me=this.length,se=0;else if(me===void 0&&typeof se=="string")Ee=se,me=this.length,se=0;else if(isFinite(se))se=se>>>0,isFinite(me)?(me=me>>>0,Ee===void 0&&(Ee="utf8")):(Ee=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const _e=this.length-se;if((me===void 0||me>_e)&&(me=_e),ne.length>0&&(me<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");let ve=!1;for(;;)switch(Ee){case"hex":return z(this,ne,se,me);case"utf8":case"utf-8":return O(this,ne,se,me);case"ascii":case"latin1":case"binary":return k(this,ne,se,me);case"base64":return v(this,ne,se,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,ne,se,me);default:if(ve)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),ve=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(de,ne,se){return ne===0&&se===de.length?e.fromByteArray(de):e.fromByteArray(de.slice(ne,se))}function R(de,ne,se){se=Math.min(de.length,se);const me=[];let Ee=ne;for(;Ee<se;){const _e=de[Ee];let ve=null,Ae=_e>239?4:_e>223?3:_e>191?2:1;if(Ee+Ae<=se){let Oe,Ue,Ke,We;switch(Ae){case 1:_e<128&&(ve=_e);break;case 2:Oe=de[Ee+1],(Oe&192)===128&&(We=(_e&31)<<6|Oe&63,We>127&&(ve=We));break;case 3:Oe=de[Ee+1],Ue=de[Ee+2],(Oe&192)===128&&(Ue&192)===128&&(We=(_e&15)<<12|(Oe&63)<<6|Ue&63,We>2047&&(We<55296||We>57343)&&(ve=We));break;case 4:Oe=de[Ee+1],Ue=de[Ee+2],Ke=de[Ee+3],(Oe&192)===128&&(Ue&192)===128&&(Ke&192)===128&&(We=(_e&15)<<18|(Oe&63)<<12|(Ue&63)<<6|Ke&63,We>65535&&We<1114112&&(ve=We))}}ve===null?(ve=65533,Ae=1):ve>65535&&(ve-=65536,me.push(ve>>>10&1023|55296),ve=56320|ve&1023),me.push(ve),Ee+=Ae}return M(me)}const T=4096;function M(de){const ne=de.length;if(ne<=T)return String.fromCharCode.apply(String,de);let se="",me=0;for(;me<ne;)se+=String.fromCharCode.apply(String,de.slice(me,me+=T));return se}function I(de,ne,se){let me="";se=Math.min(de.length,se);for(let Ee=ne;Ee<se;++Ee)me+=String.fromCharCode(de[Ee]&127);return me}function $(de,ne,se){let me="";se=Math.min(de.length,se);for(let Ee=ne;Ee<se;++Ee)me+=String.fromCharCode(de[Ee]);return me}function A(de,ne,se){const me=de.length;(!ne||ne<0)&&(ne=0),(!se||se<0||se>me)&&(se=me);let Ee="";for(let _e=ne;_e<se;++_e)Ee+=Te[de[_e]];return Ee}function L(de,ne,se){const me=de.slice(ne,se);let Ee="";for(let _e=0;_e<me.length-1;_e+=2)Ee+=String.fromCharCode(me[_e]+me[_e+1]*256);return Ee}d.prototype.slice=function(ne,se){const me=this.length;ne=~~ne,se=se===void 0?me:~~se,ne<0?(ne+=me,ne<0&&(ne=0)):ne>me&&(ne=me),se<0?(se+=me,se<0&&(se=0)):se>me&&(se=me),se<ne&&(se=ne);const Ee=this.subarray(ne,se);return Object.setPrototypeOf(Ee,d.prototype),Ee};function Y(de,ne,se){if(de%1!==0||de<0)throw new RangeError("offset is not uint");if(de+ne>se)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(ne,se,me){ne=ne>>>0,se=se>>>0,me||Y(ne,se,this.length);let Ee=this[ne],_e=1,ve=0;for(;++ve<se&&(_e*=256);)Ee+=this[ne+ve]*_e;return Ee},d.prototype.readUintBE=d.prototype.readUIntBE=function(ne,se,me){ne=ne>>>0,se=se>>>0,me||Y(ne,se,this.length);let Ee=this[ne+--se],_e=1;for(;se>0&&(_e*=256);)Ee+=this[ne+--se]*_e;return Ee},d.prototype.readUint8=d.prototype.readUInt8=function(ne,se){return ne=ne>>>0,se||Y(ne,1,this.length),this[ne]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(ne,se){return ne=ne>>>0,se||Y(ne,2,this.length),this[ne]|this[ne+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(ne,se){return ne=ne>>>0,se||Y(ne,2,this.length),this[ne]<<8|this[ne+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),(this[ne]|this[ne+1]<<8|this[ne+2]<<16)+this[ne+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),this[ne]*16777216+(this[ne+1]<<16|this[ne+2]<<8|this[ne+3])},d.prototype.readBigUInt64LE=Be(function(ne){ne=ne>>>0,ce(ne,"offset");const se=this[ne],me=this[ne+7];(se===void 0||me===void 0)&&re(ne,this.length-8);const Ee=se+this[++ne]*2**8+this[++ne]*2**16+this[++ne]*2**24,_e=this[++ne]+this[++ne]*2**8+this[++ne]*2**16+me*2**24;return BigInt(Ee)+(BigInt(_e)<<BigInt(32))}),d.prototype.readBigUInt64BE=Be(function(ne){ne=ne>>>0,ce(ne,"offset");const se=this[ne],me=this[ne+7];(se===void 0||me===void 0)&&re(ne,this.length-8);const Ee=se*2**24+this[++ne]*2**16+this[++ne]*2**8+this[++ne],_e=this[++ne]*2**24+this[++ne]*2**16+this[++ne]*2**8+me;return(BigInt(Ee)<<BigInt(32))+BigInt(_e)}),d.prototype.readIntLE=function(ne,se,me){ne=ne>>>0,se=se>>>0,me||Y(ne,se,this.length);let Ee=this[ne],_e=1,ve=0;for(;++ve<se&&(_e*=256);)Ee+=this[ne+ve]*_e;return _e*=128,Ee>=_e&&(Ee-=Math.pow(2,8*se)),Ee},d.prototype.readIntBE=function(ne,se,me){ne=ne>>>0,se=se>>>0,me||Y(ne,se,this.length);let Ee=se,_e=1,ve=this[ne+--Ee];for(;Ee>0&&(_e*=256);)ve+=this[ne+--Ee]*_e;return _e*=128,ve>=_e&&(ve-=Math.pow(2,8*se)),ve},d.prototype.readInt8=function(ne,se){return ne=ne>>>0,se||Y(ne,1,this.length),this[ne]&128?(255-this[ne]+1)*-1:this[ne]},d.prototype.readInt16LE=function(ne,se){ne=ne>>>0,se||Y(ne,2,this.length);const me=this[ne]|this[ne+1]<<8;return me&32768?me|4294901760:me},d.prototype.readInt16BE=function(ne,se){ne=ne>>>0,se||Y(ne,2,this.length);const me=this[ne+1]|this[ne]<<8;return me&32768?me|4294901760:me},d.prototype.readInt32LE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),this[ne]|this[ne+1]<<8|this[ne+2]<<16|this[ne+3]<<24},d.prototype.readInt32BE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),this[ne]<<24|this[ne+1]<<16|this[ne+2]<<8|this[ne+3]},d.prototype.readBigInt64LE=Be(function(ne){ne=ne>>>0,ce(ne,"offset");const se=this[ne],me=this[ne+7];(se===void 0||me===void 0)&&re(ne,this.length-8);const Ee=this[ne+4]+this[ne+5]*2**8+this[ne+6]*2**16+(me<<24);return(BigInt(Ee)<<BigInt(32))+BigInt(se+this[++ne]*2**8+this[++ne]*2**16+this[++ne]*2**24)}),d.prototype.readBigInt64BE=Be(function(ne){ne=ne>>>0,ce(ne,"offset");const se=this[ne],me=this[ne+7];(se===void 0||me===void 0)&&re(ne,this.length-8);const Ee=(se<<24)+this[++ne]*2**16+this[++ne]*2**8+this[++ne];return(BigInt(Ee)<<BigInt(32))+BigInt(this[++ne]*2**24+this[++ne]*2**16+this[++ne]*2**8+me)}),d.prototype.readFloatLE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),s.read(this,ne,!0,23,4)},d.prototype.readFloatBE=function(ne,se){return ne=ne>>>0,se||Y(ne,4,this.length),s.read(this,ne,!1,23,4)},d.prototype.readDoubleLE=function(ne,se){return ne=ne>>>0,se||Y(ne,8,this.length),s.read(this,ne,!0,52,8)},d.prototype.readDoubleBE=function(ne,se){return ne=ne>>>0,se||Y(ne,8,this.length),s.read(this,ne,!1,52,8)};function oe(de,ne,se,me,Ee,_e){if(!d.isBuffer(de))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne>Ee||ne<_e)throw new RangeError('"value" argument is out of bounds');if(se+me>de.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(ne,se,me,Ee){if(ne=+ne,se=se>>>0,me=me>>>0,!Ee){const Ae=Math.pow(2,8*me)-1;oe(this,ne,se,me,Ae,0)}let _e=1,ve=0;for(this[se]=ne&255;++ve<me&&(_e*=256);)this[se+ve]=ne/_e&255;return se+me},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(ne,se,me,Ee){if(ne=+ne,se=se>>>0,me=me>>>0,!Ee){const Ae=Math.pow(2,8*me)-1;oe(this,ne,se,me,Ae,0)}let _e=me-1,ve=1;for(this[se+_e]=ne&255;--_e>=0&&(ve*=256);)this[se+_e]=ne/ve&255;return se+me},d.prototype.writeUint8=d.prototype.writeUInt8=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,1,255,0),this[se]=ne&255,se+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,2,65535,0),this[se]=ne&255,this[se+1]=ne>>>8,se+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,2,65535,0),this[se]=ne>>>8,this[se+1]=ne&255,se+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,4,4294967295,0),this[se+3]=ne>>>24,this[se+2]=ne>>>16,this[se+1]=ne>>>8,this[se]=ne&255,se+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,4,4294967295,0),this[se]=ne>>>24,this[se+1]=ne>>>16,this[se+2]=ne>>>8,this[se+3]=ne&255,se+4};function J(de,ne,se,me,Ee){be(ne,me,Ee,de,se,7);let _e=Number(ne&BigInt(4294967295));de[se++]=_e,_e=_e>>8,de[se++]=_e,_e=_e>>8,de[se++]=_e,_e=_e>>8,de[se++]=_e;let ve=Number(ne>>BigInt(32)&BigInt(4294967295));return de[se++]=ve,ve=ve>>8,de[se++]=ve,ve=ve>>8,de[se++]=ve,ve=ve>>8,de[se++]=ve,se}function U(de,ne,se,me,Ee){be(ne,me,Ee,de,se,7);let _e=Number(ne&BigInt(4294967295));de[se+7]=_e,_e=_e>>8,de[se+6]=_e,_e=_e>>8,de[se+5]=_e,_e=_e>>8,de[se+4]=_e;let ve=Number(ne>>BigInt(32)&BigInt(4294967295));return de[se+3]=ve,ve=ve>>8,de[se+2]=ve,ve=ve>>8,de[se+1]=ve,ve=ve>>8,de[se]=ve,se+8}d.prototype.writeBigUInt64LE=Be(function(ne,se=0){return J(this,ne,se,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Be(function(ne,se=0){return U(this,ne,se,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(ne,se,me,Ee){if(ne=+ne,se=se>>>0,!Ee){const Oe=Math.pow(2,8*me-1);oe(this,ne,se,me,Oe-1,-Oe)}let _e=0,ve=1,Ae=0;for(this[se]=ne&255;++_e<me&&(ve*=256);)ne<0&&Ae===0&&this[se+_e-1]!==0&&(Ae=1),this[se+_e]=(ne/ve>>0)-Ae&255;return se+me},d.prototype.writeIntBE=function(ne,se,me,Ee){if(ne=+ne,se=se>>>0,!Ee){const Oe=Math.pow(2,8*me-1);oe(this,ne,se,me,Oe-1,-Oe)}let _e=me-1,ve=1,Ae=0;for(this[se+_e]=ne&255;--_e>=0&&(ve*=256);)ne<0&&Ae===0&&this[se+_e+1]!==0&&(Ae=1),this[se+_e]=(ne/ve>>0)-Ae&255;return se+me},d.prototype.writeInt8=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,1,127,-128),ne<0&&(ne=255+ne+1),this[se]=ne&255,se+1},d.prototype.writeInt16LE=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,2,32767,-32768),this[se]=ne&255,this[se+1]=ne>>>8,se+2},d.prototype.writeInt16BE=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,2,32767,-32768),this[se]=ne>>>8,this[se+1]=ne&255,se+2},d.prototype.writeInt32LE=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,4,2147483647,-2147483648),this[se]=ne&255,this[se+1]=ne>>>8,this[se+2]=ne>>>16,this[se+3]=ne>>>24,se+4},d.prototype.writeInt32BE=function(ne,se,me){return ne=+ne,se=se>>>0,me||oe(this,ne,se,4,2147483647,-2147483648),ne<0&&(ne=4294967295+ne+1),this[se]=ne>>>24,this[se+1]=ne>>>16,this[se+2]=ne>>>8,this[se+3]=ne&255,se+4},d.prototype.writeBigInt64LE=Be(function(ne,se=0){return J(this,ne,se,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Be(function(ne,se=0){return U(this,ne,se,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(de,ne,se,me,Ee,_e){if(se+me>de.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("Index out of range")}function ae(de,ne,se,me,Ee){return ne=+ne,se=se>>>0,Ee||G(de,ne,se,4),s.write(de,ne,se,me,23,4),se+4}d.prototype.writeFloatLE=function(ne,se,me){return ae(this,ne,se,!0,me)},d.prototype.writeFloatBE=function(ne,se,me){return ae(this,ne,se,!1,me)};function he(de,ne,se,me,Ee){return ne=+ne,se=se>>>0,Ee||G(de,ne,se,8),s.write(de,ne,se,me,52,8),se+8}d.prototype.writeDoubleLE=function(ne,se,me){return he(this,ne,se,!0,me)},d.prototype.writeDoubleBE=function(ne,se,me){return he(this,ne,se,!1,me)},d.prototype.copy=function(ne,se,me,Ee){if(!d.isBuffer(ne))throw new TypeError("argument should be a Buffer");if(me||(me=0),!Ee&&Ee!==0&&(Ee=this.length),se>=ne.length&&(se=ne.length),se||(se=0),Ee>0&&Ee<me&&(Ee=me),Ee===me||ne.length===0||this.length===0)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),ne.length-se<Ee-me&&(Ee=ne.length-se+me);const _e=Ee-me;return this===ne&&typeof o.prototype.copyWithin=="function"?this.copyWithin(se,me,Ee):o.prototype.set.call(ne,this.subarray(me,Ee),se),_e},d.prototype.fill=function(ne,se,me,Ee){if(typeof ne=="string"){if(typeof se=="string"?(Ee=se,se=0,me=this.length):typeof me=="string"&&(Ee=me,me=this.length),Ee!==void 0&&typeof Ee!="string")throw new TypeError("encoding must be a string");if(typeof Ee=="string"&&!d.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);if(ne.length===1){const ve=ne.charCodeAt(0);(Ee==="utf8"&&ve<128||Ee==="latin1")&&(ne=ve)}}else typeof ne=="number"?ne=ne&255:typeof ne=="boolean"&&(ne=Number(ne));if(se<0||this.length<se||this.length<me)throw new RangeError("Out of range index");if(me<=se)return this;se=se>>>0,me=me===void 0?this.length:me>>>0,ne||(ne=0);let _e;if(typeof ne=="number")for(_e=se;_e<me;++_e)this[_e]=ne;else{const ve=d.isBuffer(ne)?ne:d.from(ne,Ee),Ae=ve.length;if(Ae===0)throw new TypeError('The value "'+ne+'" is invalid for argument "value"');for(_e=0;_e<me-se;++_e)this[_e+se]=ve[_e%Ae]}return this};const le={};function te(de,ne,se){le[de]=class extends se{constructor(){super(),Object.defineProperty(this,"message",{value:ne.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${de}]`,this.stack,delete this.name}get code(){return de}set code(Ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ee,writable:!0})}toString(){return`${this.name} [${de}]: ${this.message}`}}}te("ERR_BUFFER_OUT_OF_BOUNDS",function(de){return de?`${de} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),te("ERR_INVALID_ARG_TYPE",function(de,ne){return`The "${de}" argument must be of type number. Received type ${typeof ne}`},TypeError),te("ERR_OUT_OF_RANGE",function(de,ne,se){let me=`The value of "${de}" is out of range.`,Ee=se;return Number.isInteger(se)&&Math.abs(se)>2**32?Ee=pe(String(se)):typeof se=="bigint"&&(Ee=String(se),(se>BigInt(2)**BigInt(32)||se<-(BigInt(2)**BigInt(32)))&&(Ee=pe(Ee)),Ee+="n"),me+=` It must be ${ne}. Received ${Ee}`,me},RangeError);function pe(de){let ne="",se=de.length;const me=de[0]==="-"?1:0;for(;se>=me+4;se-=3)ne=`_${de.slice(se-3,se)}${ne}`;return`${de.slice(0,se)}${ne}`}function xe(de,ne,se){ce(ne,"offset"),(de[ne]===void 0||de[ne+se]===void 0)&&re(ne,de.length-(se+1))}function be(de,ne,se,me,Ee,_e){if(de>se||de<ne){const ve=typeof ne=="bigint"?"n":"";let Ae;throw ne===0||ne===BigInt(0)?Ae=`>= 0${ve} and < 2${ve} ** ${(_e+1)*8}${ve}`:Ae=`>= -(2${ve} ** ${(_e+1)*8-1}${ve}) and < 2 ** ${(_e+1)*8-1}${ve}`,new le.ERR_OUT_OF_RANGE("value",Ae,de)}xe(me,Ee,_e)}function ce(de,ne){if(typeof de!="number")throw new le.ERR_INVALID_ARG_TYPE(ne,"number",de)}function re(de,ne,se){throw Math.floor(de)!==de?(ce(de,se),new le.ERR_OUT_OF_RANGE("offset","an integer",de)):ne<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ne}`,de)}const ie=/[^+/0-9A-Za-z-_]/g;function fe(de){if(de=de.split("=")[0],de=de.trim().replace(ie,""),de.length<2)return"";for(;de.length%4!==0;)de=de+"=";return de}function ye(de,ne){ne=ne||1/0;let se;const me=de.length;let Ee=null;const _e=[];for(let ve=0;ve<me;++ve){if(se=de.charCodeAt(ve),se>55295&&se<57344){if(!Ee){if(se>56319){(ne-=3)>-1&&_e.push(239,191,189);continue}else if(ve+1===me){(ne-=3)>-1&&_e.push(239,191,189);continue}Ee=se;continue}if(se<56320){(ne-=3)>-1&&_e.push(239,191,189),Ee=se;continue}se=(Ee-55296<<10|se-56320)+65536}else Ee&&(ne-=3)>-1&&_e.push(239,191,189);if(Ee=null,se<128){if((ne-=1)<0)break;_e.push(se)}else if(se<2048){if((ne-=2)<0)break;_e.push(se>>6|192,se&63|128)}else if(se<65536){if((ne-=3)<0)break;_e.push(se>>12|224,se>>6&63|128,se&63|128)}else if(se<1114112){if((ne-=4)<0)break;_e.push(se>>18|240,se>>12&63|128,se>>6&63|128,se&63|128)}else throw new Error("Invalid code point")}return _e}function we(de){const ne=[];for(let se=0;se<de.length;++se)ne.push(de.charCodeAt(se)&255);return ne}function Re(de,ne){let se,me,Ee;const _e=[];for(let ve=0;ve<de.length&&!((ne-=2)<0);++ve)se=de.charCodeAt(ve),me=se>>8,Ee=se%256,_e.push(Ee),_e.push(me);return _e}function Me(de){return e.toByteArray(fe(de))}function ke(de,ne,se,me){let Ee;for(Ee=0;Ee<me&&!(Ee+se>=ne.length||Ee>=de.length);++Ee)ne[Ee+se]=de[Ee];return Ee}function Le(de,ne){return de instanceof ne||de!=null&&de.constructor!=null&&de.constructor.name!=null&&de.constructor.name===ne.name}function Fe(de){return de!==de}const Te=(function(){const de="0123456789abcdef",ne=new Array(256);for(let se=0;se<16;++se){const me=se*16;for(let Ee=0;Ee<16;++Ee)ne[me+Ee]=de[se]+de[Ee]}return ne})();function Be(de){return typeof BigInt>"u"?ze:de}function ze(){throw new Error("BigInt not supported")}})(buffer$2);const Buffer=buffer$2.Buffer;var cryptoJs$1={exports:{}};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core$1={exports:{}},cryptoBrowserify={},browser$b={exports:{}},safeBuffer$2={exports:{}},buffer$1={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=c,base64Js.toByteArray=f,base64Js.fromByteArray=m;for(var t=[],e=[],s=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=r.length;a<o;++a)t[a]=r[a],e[r.charCodeAt(a)]=a;e[45]=62,e[95]=63;function l(y){var b=y.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var E=y.indexOf("=");E===-1&&(E=b);var C=E===b?0:4-E%4;return[E,C]}function c(y){var b=l(y),E=b[0],C=b[1];return(E+C)*3/4-C}function u(y,b,E){return(b+E)*3/4-E}function f(y){var b,E=l(y),C=E[0],j=E[1],B=new s(u(y,C,j)),D=0,F=j>0?C-4:C,q;for(q=0;q<F;q+=4)b=e[y.charCodeAt(q)]<<18|e[y.charCodeAt(q+1)]<<12|e[y.charCodeAt(q+2)]<<6|e[y.charCodeAt(q+3)],B[D++]=b>>16&255,B[D++]=b>>8&255,B[D++]=b&255;return j===2&&(b=e[y.charCodeAt(q)]<<2|e[y.charCodeAt(q+1)]>>4,B[D++]=b&255),j===1&&(b=e[y.charCodeAt(q)]<<10|e[y.charCodeAt(q+1)]<<4|e[y.charCodeAt(q+2)]>>2,B[D++]=b>>8&255,B[D++]=b&255),B}function d(y){return t[y>>18&63]+t[y>>12&63]+t[y>>6&63]+t[y&63]}function p(y,b,E){for(var C,j=[],B=b;B<E;B+=3)C=(y[B]<<16&16711680)+(y[B+1]<<8&65280)+(y[B+2]&255),j.push(d(C));return j.join("")}function m(y){for(var b,E=y.length,C=E%3,j=[],B=16383,D=0,F=E-C;D<F;D+=B)j.push(p(y,D,D+B>F?F:D+B));return C===1?(b=y[E-1],j.push(t[b>>2]+t[b<<4&63]+"==")):C===2&&(b=(y[E-2]<<8)+y[E-1],j.push(t[b>>10]+t[b>>4&63]+t[b<<2&63]+"=")),j.join("")}return base64Js}var ieee754={};var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(t,e,s,r,a){var o,l,c=a*8-r-1,u=(1<<c)-1,f=u>>1,d=-7,p=s?a-1:0,m=s?-1:1,y=t[e+p];for(p+=m,o=y&(1<<-d)-1,y>>=-d,d+=c;d>0;o=o*256+t[e+p],p+=m,d-=8);for(l=o&(1<<-d)-1,o>>=-d,d+=r;d>0;l=l*256+t[e+p],p+=m,d-=8);if(o===0)o=1-f;else{if(o===u)return l?NaN:(y?-1:1)*(1/0);l=l+Math.pow(2,r),o=o-f}return(y?-1:1)*l*Math.pow(2,o-r)},ieee754.write=function(t,e,s,r,a,o){var l,c,u,f=o*8-a-1,d=(1<<f)-1,p=d>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:o-1,b=r?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,l=d):(l=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-l))<1&&(l--,u*=2),l+p>=1?e+=m/u:e+=m*Math.pow(2,1-p),e*u>=2&&(l++,u/=2),l+p>=d?(c=0,l=d):l+p>=1?(c=(e*u-1)*Math.pow(2,a),l=l+p):(c=e*Math.pow(2,p-1)*Math.pow(2,a),l=0));a>=8;t[s+y]=c&255,y+=b,c/=256,a-=8);for(l=l<<a|c,f+=a;f>0;t[s+y]=l&255,y+=b,l/=256,f-=8);t[s+y-b]|=E*128}),ieee754}var hasRequiredBuffer$1;function requireBuffer$1(){return hasRequiredBuffer$1||(hasRequiredBuffer$1=1,(function(t){var e=requireBase64Js(),s=requireIeee754(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=B,t.INSPECT_MAX_BYTES=50;var a=2147483647;t.kMaxLength=a,c.TYPED_ARRAY_SUPPORT=o(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var ce=new Uint8Array(1),re={foo:function(){return 42}};return Object.setPrototypeOf(re,Uint8Array.prototype),Object.setPrototypeOf(ce,re),ce.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function l(ce){if(ce>a)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var re=new Uint8Array(ce);return Object.setPrototypeOf(re,c.prototype),re}function c(ce,re,ie){if(typeof ce=="number"){if(typeof re=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(ce)}return u(ce,re,ie)}c.poolSize=8192;function u(ce,re,ie){if(typeof ce=="string")return m(ce,re);if(ArrayBuffer.isView(ce))return b(ce);if(ce==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(pe(ce,ArrayBuffer)||ce&&pe(ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(ce,SharedArrayBuffer)||ce&&pe(ce.buffer,SharedArrayBuffer)))return E(ce,re,ie);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var fe=ce.valueOf&&ce.valueOf();if(fe!=null&&fe!==ce)return c.from(fe,re,ie);var ye=C(ce);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return c.from(ce[Symbol.toPrimitive]("string"),re,ie);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}c.from=function(ce,re,ie){return u(ce,re,ie)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function f(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function d(ce,re,ie){return f(ce),ce<=0?l(ce):re!==void 0?typeof ie=="string"?l(ce).fill(re,ie):l(ce).fill(re):l(ce)}c.alloc=function(ce,re,ie){return d(ce,re,ie)};function p(ce){return f(ce),l(ce<0?0:j(ce)|0)}c.allocUnsafe=function(ce){return p(ce)},c.allocUnsafeSlow=function(ce){return p(ce)};function m(ce,re){if((typeof re!="string"||re==="")&&(re="utf8"),!c.isEncoding(re))throw new TypeError("Unknown encoding: "+re);var ie=D(ce,re)|0,fe=l(ie),ye=fe.write(ce,re);return ye!==ie&&(fe=fe.slice(0,ye)),fe}function y(ce){for(var re=ce.length<0?0:j(ce.length)|0,ie=l(re),fe=0;fe<re;fe+=1)ie[fe]=ce[fe]&255;return ie}function b(ce){if(pe(ce,Uint8Array)){var re=new Uint8Array(ce);return E(re.buffer,re.byteOffset,re.byteLength)}return y(ce)}function E(ce,re,ie){if(re<0||ce.byteLength<re)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<re+(ie||0))throw new RangeError('"length" is outside of buffer bounds');var fe;return re===void 0&&ie===void 0?fe=new Uint8Array(ce):ie===void 0?fe=new Uint8Array(ce,re):fe=new Uint8Array(ce,re,ie),Object.setPrototypeOf(fe,c.prototype),fe}function C(ce){if(c.isBuffer(ce)){var re=j(ce.length)|0,ie=l(re);return ie.length===0||ce.copy(ie,0,0,re),ie}if(ce.length!==void 0)return typeof ce.length!="number"||xe(ce.length)?l(0):y(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return y(ce.data)}function j(ce){if(ce>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ce|0}function B(ce){return+ce!=ce&&(ce=0),c.alloc(+ce)}c.isBuffer=function(re){return re!=null&&re._isBuffer===!0&&re!==c.prototype},c.compare=function(re,ie){if(pe(re,Uint8Array)&&(re=c.from(re,re.offset,re.byteLength)),pe(ie,Uint8Array)&&(ie=c.from(ie,ie.offset,ie.byteLength)),!c.isBuffer(re)||!c.isBuffer(ie))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(re===ie)return 0;for(var fe=re.length,ye=ie.length,we=0,Re=Math.min(fe,ye);we<Re;++we)if(re[we]!==ie[we]){fe=re[we],ye=ie[we];break}return fe<ye?-1:ye<fe?1:0},c.isEncoding=function(re){switch(String(re).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(re,ie){if(!Array.isArray(re))throw new TypeError('"list" argument must be an Array of Buffers');if(re.length===0)return c.alloc(0);var fe;if(ie===void 0)for(ie=0,fe=0;fe<re.length;++fe)ie+=re[fe].length;var ye=c.allocUnsafe(ie),we=0;for(fe=0;fe<re.length;++fe){var Re=re[fe];if(pe(Re,Uint8Array))we+Re.length>ye.length?c.from(Re).copy(ye,we):Uint8Array.prototype.set.call(ye,Re,we);else if(c.isBuffer(Re))Re.copy(ye,we);else throw new TypeError('"list" argument must be an Array of Buffers');we+=Re.length}return ye};function D(ce,re){if(c.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||pe(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);var ie=ce.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&ie===0)return 0;for(var ye=!1;;)switch(re){case"ascii":case"latin1":case"binary":return ie;case"utf8":case"utf-8":return G(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie*2;case"hex":return ie>>>1;case"base64":return le(ce).length;default:if(ye)return fe?-1:G(ce).length;re=(""+re).toLowerCase(),ye=!0}}c.byteLength=D;function F(ce,re,ie){var fe=!1;if((re===void 0||re<0)&&(re=0),re>this.length||((ie===void 0||ie>this.length)&&(ie=this.length),ie<=0)||(ie>>>=0,re>>>=0,ie<=re))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return M(this,re,ie);case"utf8":case"utf-8":return v(this,re,ie);case"ascii":return R(this,re,ie);case"latin1":case"binary":return T(this,re,ie);case"base64":return k(this,re,ie);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,re,ie);default:if(fe)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),fe=!0}}c.prototype._isBuffer=!0;function q(ce,re,ie){var fe=ce[re];ce[re]=ce[ie],ce[ie]=fe}c.prototype.swap16=function(){var re=this.length;if(re%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ie=0;ie<re;ie+=2)q(this,ie,ie+1);return this},c.prototype.swap32=function(){var re=this.length;if(re%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ie=0;ie<re;ie+=4)q(this,ie,ie+3),q(this,ie+1,ie+2);return this},c.prototype.swap64=function(){var re=this.length;if(re%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ie=0;ie<re;ie+=8)q(this,ie,ie+7),q(this,ie+1,ie+6),q(this,ie+2,ie+5),q(this,ie+3,ie+4);return this},c.prototype.toString=function(){var re=this.length;return re===0?"":arguments.length===0?v(this,0,re):F.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(re){if(!c.isBuffer(re))throw new TypeError("Argument must be a Buffer");return this===re?!0:c.compare(this,re)===0},c.prototype.inspect=function(){var re="",ie=t.INSPECT_MAX_BYTES;return re=this.toString("hex",0,ie).replace(/(.{2})/g,"$1 ").trim(),this.length>ie&&(re+=" ... "),"<Buffer "+re+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(re,ie,fe,ye,we){if(pe(re,Uint8Array)&&(re=c.from(re,re.offset,re.byteLength)),!c.isBuffer(re))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof re);if(ie===void 0&&(ie=0),fe===void 0&&(fe=re?re.length:0),ye===void 0&&(ye=0),we===void 0&&(we=this.length),ie<0||fe>re.length||ye<0||we>this.length)throw new RangeError("out of range index");if(ye>=we&&ie>=fe)return 0;if(ye>=we)return-1;if(ie>=fe)return 1;if(ie>>>=0,fe>>>=0,ye>>>=0,we>>>=0,this===re)return 0;for(var Re=we-ye,Me=fe-ie,ke=Math.min(Re,Me),Le=this.slice(ye,we),Fe=re.slice(ie,fe),Te=0;Te<ke;++Te)if(Le[Te]!==Fe[Te]){Re=Le[Te],Me=Fe[Te];break}return Re<Me?-1:Me<Re?1:0};function V(ce,re,ie,fe,ye){if(ce.length===0)return-1;if(typeof ie=="string"?(fe=ie,ie=0):ie>2147483647?ie=2147483647:ie<-2147483648&&(ie=-2147483648),ie=+ie,xe(ie)&&(ie=ye?0:ce.length-1),ie<0&&(ie=ce.length+ie),ie>=ce.length){if(ye)return-1;ie=ce.length-1}else if(ie<0)if(ye)ie=0;else return-1;if(typeof re=="string"&&(re=c.from(re,fe)),c.isBuffer(re))return re.length===0?-1:ee(ce,re,ie,fe,ye);if(typeof re=="number")return re=re&255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(ce,re,ie):Uint8Array.prototype.lastIndexOf.call(ce,re,ie):ee(ce,[re],ie,fe,ye);throw new TypeError("val must be string, number or Buffer")}function ee(ce,re,ie,fe,ye){var we=1,Re=ce.length,Me=re.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(ce.length<2||re.length<2)return-1;we=2,Re/=2,Me/=2,ie/=2}function ke(ze,de){return we===1?ze[de]:ze.readUInt16BE(de*we)}var Le;if(ye){var Fe=-1;for(Le=ie;Le<Re;Le++)if(ke(ce,Le)===ke(re,Fe===-1?0:Le-Fe)){if(Fe===-1&&(Fe=Le),Le-Fe+1===Me)return Fe*we}else Fe!==-1&&(Le-=Le-Fe),Fe=-1}else for(ie+Me>Re&&(ie=Re-Me),Le=ie;Le>=0;Le--){for(var Te=!0,Be=0;Be<Me;Be++)if(ke(ce,Le+Be)!==ke(re,Be)){Te=!1;break}if(Te)return Le}return-1}c.prototype.includes=function(re,ie,fe){return this.indexOf(re,ie,fe)!==-1},c.prototype.indexOf=function(re,ie,fe){return V(this,re,ie,fe,!0)},c.prototype.lastIndexOf=function(re,ie,fe){return V(this,re,ie,fe,!1)};function Q(ce,re,ie,fe){ie=Number(ie)||0;var ye=ce.length-ie;fe?(fe=Number(fe),fe>ye&&(fe=ye)):fe=ye;var we=re.length;fe>we/2&&(fe=we/2);for(var Re=0;Re<fe;++Re){var Me=parseInt(re.substr(Re*2,2),16);if(xe(Me))return Re;ce[ie+Re]=Me}return Re}function W(ce,re,ie,fe){return te(G(re,ce.length-ie),ce,ie,fe)}function Z(ce,re,ie,fe){return te(ae(re),ce,ie,fe)}function z(ce,re,ie,fe){return te(le(re),ce,ie,fe)}function O(ce,re,ie,fe){return te(he(re,ce.length-ie),ce,ie,fe)}c.prototype.write=function(re,ie,fe,ye){if(ie===void 0)ye="utf8",fe=this.length,ie=0;else if(fe===void 0&&typeof ie=="string")ye=ie,fe=this.length,ie=0;else if(isFinite(ie))ie=ie>>>0,isFinite(fe)?(fe=fe>>>0,ye===void 0&&(ye="utf8")):(ye=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var we=this.length-ie;if((fe===void 0||fe>we)&&(fe=we),re.length>0&&(fe<0||ie<0)||ie>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");for(var Re=!1;;)switch(ye){case"hex":return Q(this,re,ie,fe);case"utf8":case"utf-8":return W(this,re,ie,fe);case"ascii":case"latin1":case"binary":return Z(this,re,ie,fe);case"base64":return z(this,re,ie,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,re,ie,fe);default:if(Re)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Re=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(ce,re,ie){return re===0&&ie===ce.length?e.fromByteArray(ce):e.fromByteArray(ce.slice(re,ie))}function v(ce,re,ie){ie=Math.min(ce.length,ie);for(var fe=[],ye=re;ye<ie;){var we=ce[ye],Re=null,Me=we>239?4:we>223?3:we>191?2:1;if(ye+Me<=ie){var ke,Le,Fe,Te;switch(Me){case 1:we<128&&(Re=we);break;case 2:ke=ce[ye+1],(ke&192)===128&&(Te=(we&31)<<6|ke&63,Te>127&&(Re=Te));break;case 3:ke=ce[ye+1],Le=ce[ye+2],(ke&192)===128&&(Le&192)===128&&(Te=(we&15)<<12|(ke&63)<<6|Le&63,Te>2047&&(Te<55296||Te>57343)&&(Re=Te));break;case 4:ke=ce[ye+1],Le=ce[ye+2],Fe=ce[ye+3],(ke&192)===128&&(Le&192)===128&&(Fe&192)===128&&(Te=(we&15)<<18|(ke&63)<<12|(Le&63)<<6|Fe&63,Te>65535&&Te<1114112&&(Re=Te))}}Re===null?(Re=65533,Me=1):Re>65535&&(Re-=65536,fe.push(Re>>>10&1023|55296),Re=56320|Re&1023),fe.push(Re),ye+=Me}return N(fe)}var S=4096;function N(ce){var re=ce.length;if(re<=S)return String.fromCharCode.apply(String,ce);for(var ie="",fe=0;fe<re;)ie+=String.fromCharCode.apply(String,ce.slice(fe,fe+=S));return ie}function R(ce,re,ie){var fe="";ie=Math.min(ce.length,ie);for(var ye=re;ye<ie;++ye)fe+=String.fromCharCode(ce[ye]&127);return fe}function T(ce,re,ie){var fe="";ie=Math.min(ce.length,ie);for(var ye=re;ye<ie;++ye)fe+=String.fromCharCode(ce[ye]);return fe}function M(ce,re,ie){var fe=ce.length;(!re||re<0)&&(re=0),(!ie||ie<0||ie>fe)&&(ie=fe);for(var ye="",we=re;we<ie;++we)ye+=be[ce[we]];return ye}function I(ce,re,ie){for(var fe=ce.slice(re,ie),ye="",we=0;we<fe.length-1;we+=2)ye+=String.fromCharCode(fe[we]+fe[we+1]*256);return ye}c.prototype.slice=function(re,ie){var fe=this.length;re=~~re,ie=ie===void 0?fe:~~ie,re<0?(re+=fe,re<0&&(re=0)):re>fe&&(re=fe),ie<0?(ie+=fe,ie<0&&(ie=0)):ie>fe&&(ie=fe),ie<re&&(ie=re);var ye=this.subarray(re,ie);return Object.setPrototypeOf(ye,c.prototype),ye};function $(ce,re,ie){if(ce%1!==0||ce<0)throw new RangeError("offset is not uint");if(ce+re>ie)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(re,ie,fe){re=re>>>0,ie=ie>>>0,fe||$(re,ie,this.length);for(var ye=this[re],we=1,Re=0;++Re<ie&&(we*=256);)ye+=this[re+Re]*we;return ye},c.prototype.readUintBE=c.prototype.readUIntBE=function(re,ie,fe){re=re>>>0,ie=ie>>>0,fe||$(re,ie,this.length);for(var ye=this[re+--ie],we=1;ie>0&&(we*=256);)ye+=this[re+--ie]*we;return ye},c.prototype.readUint8=c.prototype.readUInt8=function(re,ie){return re=re>>>0,ie||$(re,1,this.length),this[re]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(re,ie){return re=re>>>0,ie||$(re,2,this.length),this[re]|this[re+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(re,ie){return re=re>>>0,ie||$(re,2,this.length),this[re]<<8|this[re+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(re,ie){return re=re>>>0,ie||$(re,4,this.length),(this[re]|this[re+1]<<8|this[re+2]<<16)+this[re+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(re,ie){return re=re>>>0,ie||$(re,4,this.length),this[re]*16777216+(this[re+1]<<16|this[re+2]<<8|this[re+3])},c.prototype.readIntLE=function(re,ie,fe){re=re>>>0,ie=ie>>>0,fe||$(re,ie,this.length);for(var ye=this[re],we=1,Re=0;++Re<ie&&(we*=256);)ye+=this[re+Re]*we;return we*=128,ye>=we&&(ye-=Math.pow(2,8*ie)),ye},c.prototype.readIntBE=function(re,ie,fe){re=re>>>0,ie=ie>>>0,fe||$(re,ie,this.length);for(var ye=ie,we=1,Re=this[re+--ye];ye>0&&(we*=256);)Re+=this[re+--ye]*we;return we*=128,Re>=we&&(Re-=Math.pow(2,8*ie)),Re},c.prototype.readInt8=function(re,ie){return re=re>>>0,ie||$(re,1,this.length),this[re]&128?(255-this[re]+1)*-1:this[re]},c.prototype.readInt16LE=function(re,ie){re=re>>>0,ie||$(re,2,this.length);var fe=this[re]|this[re+1]<<8;return fe&32768?fe|4294901760:fe},c.prototype.readInt16BE=function(re,ie){re=re>>>0,ie||$(re,2,this.length);var fe=this[re+1]|this[re]<<8;return fe&32768?fe|4294901760:fe},c.prototype.readInt32LE=function(re,ie){return re=re>>>0,ie||$(re,4,this.length),this[re]|this[re+1]<<8|this[re+2]<<16|this[re+3]<<24},c.prototype.readInt32BE=function(re,ie){return re=re>>>0,ie||$(re,4,this.length),this[re]<<24|this[re+1]<<16|this[re+2]<<8|this[re+3]},c.prototype.readFloatLE=function(re,ie){return re=re>>>0,ie||$(re,4,this.length),s.read(this,re,!0,23,4)},c.prototype.readFloatBE=function(re,ie){return re=re>>>0,ie||$(re,4,this.length),s.read(this,re,!1,23,4)},c.prototype.readDoubleLE=function(re,ie){return re=re>>>0,ie||$(re,8,this.length),s.read(this,re,!0,52,8)},c.prototype.readDoubleBE=function(re,ie){return re=re>>>0,ie||$(re,8,this.length),s.read(this,re,!1,52,8)};function A(ce,re,ie,fe,ye,we){if(!c.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(re>ye||re<we)throw new RangeError('"value" argument is out of bounds');if(ie+fe>ce.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(re,ie,fe,ye){if(re=+re,ie=ie>>>0,fe=fe>>>0,!ye){var we=Math.pow(2,8*fe)-1;A(this,re,ie,fe,we,0)}var Re=1,Me=0;for(this[ie]=re&255;++Me<fe&&(Re*=256);)this[ie+Me]=re/Re&255;return ie+fe},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(re,ie,fe,ye){if(re=+re,ie=ie>>>0,fe=fe>>>0,!ye){var we=Math.pow(2,8*fe)-1;A(this,re,ie,fe,we,0)}var Re=fe-1,Me=1;for(this[ie+Re]=re&255;--Re>=0&&(Me*=256);)this[ie+Re]=re/Me&255;return ie+fe},c.prototype.writeUint8=c.prototype.writeUInt8=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,1,255,0),this[ie]=re&255,ie+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,2,65535,0),this[ie]=re&255,this[ie+1]=re>>>8,ie+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,2,65535,0),this[ie]=re>>>8,this[ie+1]=re&255,ie+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,4,4294967295,0),this[ie+3]=re>>>24,this[ie+2]=re>>>16,this[ie+1]=re>>>8,this[ie]=re&255,ie+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,4,4294967295,0),this[ie]=re>>>24,this[ie+1]=re>>>16,this[ie+2]=re>>>8,this[ie+3]=re&255,ie+4},c.prototype.writeIntLE=function(re,ie,fe,ye){if(re=+re,ie=ie>>>0,!ye){var we=Math.pow(2,8*fe-1);A(this,re,ie,fe,we-1,-we)}var Re=0,Me=1,ke=0;for(this[ie]=re&255;++Re<fe&&(Me*=256);)re<0&&ke===0&&this[ie+Re-1]!==0&&(ke=1),this[ie+Re]=(re/Me>>0)-ke&255;return ie+fe},c.prototype.writeIntBE=function(re,ie,fe,ye){if(re=+re,ie=ie>>>0,!ye){var we=Math.pow(2,8*fe-1);A(this,re,ie,fe,we-1,-we)}var Re=fe-1,Me=1,ke=0;for(this[ie+Re]=re&255;--Re>=0&&(Me*=256);)re<0&&ke===0&&this[ie+Re+1]!==0&&(ke=1),this[ie+Re]=(re/Me>>0)-ke&255;return ie+fe},c.prototype.writeInt8=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,1,127,-128),re<0&&(re=255+re+1),this[ie]=re&255,ie+1},c.prototype.writeInt16LE=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,2,32767,-32768),this[ie]=re&255,this[ie+1]=re>>>8,ie+2},c.prototype.writeInt16BE=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,2,32767,-32768),this[ie]=re>>>8,this[ie+1]=re&255,ie+2},c.prototype.writeInt32LE=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,4,2147483647,-2147483648),this[ie]=re&255,this[ie+1]=re>>>8,this[ie+2]=re>>>16,this[ie+3]=re>>>24,ie+4},c.prototype.writeInt32BE=function(re,ie,fe){return re=+re,ie=ie>>>0,fe||A(this,re,ie,4,2147483647,-2147483648),re<0&&(re=4294967295+re+1),this[ie]=re>>>24,this[ie+1]=re>>>16,this[ie+2]=re>>>8,this[ie+3]=re&255,ie+4};function L(ce,re,ie,fe,ye,we){if(ie+fe>ce.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("Index out of range")}function Y(ce,re,ie,fe,ye){return re=+re,ie=ie>>>0,ye||L(ce,re,ie,4),s.write(ce,re,ie,fe,23,4),ie+4}c.prototype.writeFloatLE=function(re,ie,fe){return Y(this,re,ie,!0,fe)},c.prototype.writeFloatBE=function(re,ie,fe){return Y(this,re,ie,!1,fe)};function oe(ce,re,ie,fe,ye){return re=+re,ie=ie>>>0,ye||L(ce,re,ie,8),s.write(ce,re,ie,fe,52,8),ie+8}c.prototype.writeDoubleLE=function(re,ie,fe){return oe(this,re,ie,!0,fe)},c.prototype.writeDoubleBE=function(re,ie,fe){return oe(this,re,ie,!1,fe)},c.prototype.copy=function(re,ie,fe,ye){if(!c.isBuffer(re))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!ye&&ye!==0&&(ye=this.length),ie>=re.length&&(ie=re.length),ie||(ie=0),ye>0&&ye<fe&&(ye=fe),ye===fe||re.length===0||this.length===0)return 0;if(ie<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),re.length-ie<ye-fe&&(ye=re.length-ie+fe);var we=ye-fe;return this===re&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ie,fe,ye):Uint8Array.prototype.set.call(re,this.subarray(fe,ye),ie),we},c.prototype.fill=function(re,ie,fe,ye){if(typeof re=="string"){if(typeof ie=="string"?(ye=ie,ie=0,fe=this.length):typeof fe=="string"&&(ye=fe,fe=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!c.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if(re.length===1){var we=re.charCodeAt(0);(ye==="utf8"&&we<128||ye==="latin1")&&(re=we)}}else typeof re=="number"?re=re&255:typeof re=="boolean"&&(re=Number(re));if(ie<0||this.length<ie||this.length<fe)throw new RangeError("Out of range index");if(fe<=ie)return this;ie=ie>>>0,fe=fe===void 0?this.length:fe>>>0,re||(re=0);var Re;if(typeof re=="number")for(Re=ie;Re<fe;++Re)this[Re]=re;else{var Me=c.isBuffer(re)?re:c.from(re,ye),ke=Me.length;if(ke===0)throw new TypeError('The value "'+re+'" is invalid for argument "value"');for(Re=0;Re<fe-ie;++Re)this[Re+ie]=Me[Re%ke]}return this};var J=/[^+/0-9A-Za-z-_]/g;function U(ce){if(ce=ce.split("=")[0],ce=ce.trim().replace(J,""),ce.length<2)return"";for(;ce.length%4!==0;)ce=ce+"=";return ce}function G(ce,re){re=re||1/0;for(var ie,fe=ce.length,ye=null,we=[],Re=0;Re<fe;++Re){if(ie=ce.charCodeAt(Re),ie>55295&&ie<57344){if(!ye){if(ie>56319){(re-=3)>-1&&we.push(239,191,189);continue}else if(Re+1===fe){(re-=3)>-1&&we.push(239,191,189);continue}ye=ie;continue}if(ie<56320){(re-=3)>-1&&we.push(239,191,189),ye=ie;continue}ie=(ye-55296<<10|ie-56320)+65536}else ye&&(re-=3)>-1&&we.push(239,191,189);if(ye=null,ie<128){if((re-=1)<0)break;we.push(ie)}else if(ie<2048){if((re-=2)<0)break;we.push(ie>>6|192,ie&63|128)}else if(ie<65536){if((re-=3)<0)break;we.push(ie>>12|224,ie>>6&63|128,ie&63|128)}else if(ie<1114112){if((re-=4)<0)break;we.push(ie>>18|240,ie>>12&63|128,ie>>6&63|128,ie&63|128)}else throw new Error("Invalid code point")}return we}function ae(ce){for(var re=[],ie=0;ie<ce.length;++ie)re.push(ce.charCodeAt(ie)&255);return re}function he(ce,re){for(var ie,fe,ye,we=[],Re=0;Re<ce.length&&!((re-=2)<0);++Re)ie=ce.charCodeAt(Re),fe=ie>>8,ye=ie%256,we.push(ye),we.push(fe);return we}function le(ce){return e.toByteArray(U(ce))}function te(ce,re,ie,fe){for(var ye=0;ye<fe&&!(ye+ie>=re.length||ye>=ce.length);++ye)re[ye+ie]=ce[ye];return ye}function pe(ce,re){return ce instanceof re||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===re.name}function xe(ce){return ce!==ce}var be=(function(){for(var ce="0123456789abcdef",re=new Array(256),ie=0;ie<16;++ie)for(var fe=ie*16,ye=0;ye<16;++ye)re[fe+ye]=ce[ie]+ce[ye];return re})()})(buffer$1)),buffer$1}var hasRequiredSafeBuffer$2;function requireSafeBuffer$2(){return hasRequiredSafeBuffer$2||(hasRequiredSafeBuffer$2=1,(function(t,e){var s=requireBuffer$1(),r=s.Buffer;function a(l,c){for(var u in l)c[u]=l[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=s:(a(s,e),e.Buffer=o);function o(l,c,u){return r(l,c,u)}o.prototype=Object.create(r.prototype),a(r,o),o.from=function(l,c,u){if(typeof l=="number")throw new TypeError("Argument must not be a number");return r(l,c,u)},o.alloc=function(l,c,u){if(typeof l!="number")throw new TypeError("Argument must be a number");var f=r(l);return c!==void 0?typeof u=="string"?f.fill(c,u):f.fill(c):f.fill(0),f},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(l)}})(safeBuffer$2,safeBuffer$2.exports)),safeBuffer$2.exports}var hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$b.exports;hasRequiredBrowser$b=1;var t=65536,e=4294967295;function s(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var r=requireSafeBuffer$2().Buffer,a=commonjsGlobal.crypto||commonjsGlobal.msCrypto;a&&a.getRandomValues?browser$b.exports=o:browser$b.exports=s;function o(l,c){if(l>e)throw new RangeError("requested too many random bytes");var u=r.allocUnsafe(l);if(l>0)if(l>t)for(var f=0;f<l;f+=t)a.getRandomValues(u.slice(f,f+t));else a.getRandomValues(u);return typeof c=="function"?process$1.nextTick(function(){c(null,u)}):u}return browser$b.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,s){s&&(e.super_=s,e.prototype=Object.create(s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,s){if(s){e.super_=s;var r=function(){};r.prototype=s.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits_browser.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(q,V,ee){return Function.prototype.apply.call(q,V,ee)},s;t&&typeof t.ownKeys=="function"?s=t.ownKeys:Object.getOwnPropertySymbols?s=function(q){return Object.getOwnPropertyNames(q).concat(Object.getOwnPropertySymbols(q))}:s=function(q){return Object.getOwnPropertyNames(q)};function r(F){console&&console.warn&&console.warn(F)}var a=Number.isNaN||function(q){return q!==q};function o(){o.init.call(this)}events.exports=o,events.exports.once=j,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(F){if(typeof F!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof F)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(F){if(typeof F!="number"||F<0||a(F))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+F+".");l=F}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(q){if(typeof q!="number"||q<0||a(q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+q+".");return this._maxListeners=q,this};function u(F){return F._maxListeners===void 0?o.defaultMaxListeners:F._maxListeners}o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(q){for(var V=[],ee=1;ee<arguments.length;ee++)V.push(arguments[ee]);var Q=q==="error",W=this._events;if(W!==void 0)Q=Q&&W.error===void 0;else if(!Q)return!1;if(Q){var Z;if(V.length>0&&(Z=V[0]),Z instanceof Error)throw Z;var z=new Error("Unhandled error."+(Z?" ("+Z.message+")":""));throw z.context=Z,z}var O=W[q];if(O===void 0)return!1;if(typeof O=="function")e(O,this,V);else for(var k=O.length,v=b(O,k),ee=0;ee<k;++ee)e(v[ee],this,V);return!0};function f(F,q,V,ee){var Q,W,Z;if(c(V),W=F._events,W===void 0?(W=F._events=Object.create(null),F._eventsCount=0):(W.newListener!==void 0&&(F.emit("newListener",q,V.listener?V.listener:V),W=F._events),Z=W[q]),Z===void 0)Z=W[q]=V,++F._eventsCount;else if(typeof Z=="function"?Z=W[q]=ee?[V,Z]:[Z,V]:ee?Z.unshift(V):Z.push(V),Q=u(F),Q>0&&Z.length>Q&&!Z.warned){Z.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+Z.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=F,z.type=q,z.count=Z.length,r(z)}return F}o.prototype.addListener=function(q,V){return f(this,q,V,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(q,V){return f(this,q,V,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(F,q,V){var ee={fired:!1,wrapFn:void 0,target:F,type:q,listener:V},Q=d.bind(ee);return Q.listener=V,ee.wrapFn=Q,Q}o.prototype.once=function(q,V){return c(V),this.on(q,p(this,q,V)),this},o.prototype.prependOnceListener=function(q,V){return c(V),this.prependListener(q,p(this,q,V)),this},o.prototype.removeListener=function(q,V){var ee,Q,W,Z,z;if(c(V),Q=this._events,Q===void 0)return this;if(ee=Q[q],ee===void 0)return this;if(ee===V||ee.listener===V)--this._eventsCount===0?this._events=Object.create(null):(delete Q[q],Q.removeListener&&this.emit("removeListener",q,ee.listener||V));else if(typeof ee!="function"){for(W=-1,Z=ee.length-1;Z>=0;Z--)if(ee[Z]===V||ee[Z].listener===V){z=ee[Z].listener,W=Z;break}if(W<0)return this;W===0?ee.shift():E(ee,W),ee.length===1&&(Q[q]=ee[0]),Q.removeListener!==void 0&&this.emit("removeListener",q,z||V)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(q){var V,ee,Q;if(ee=this._events,ee===void 0)return this;if(ee.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ee[q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ee[q]),this;if(arguments.length===0){var W=Object.keys(ee),Z;for(Q=0;Q<W.length;++Q)Z=W[Q],Z!=="removeListener"&&this.removeAllListeners(Z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(V=ee[q],typeof V=="function")this.removeListener(q,V);else if(V!==void 0)for(Q=V.length-1;Q>=0;Q--)this.removeListener(q,V[Q]);return this};function m(F,q,V){var ee=F._events;if(ee===void 0)return[];var Q=ee[q];return Q===void 0?[]:typeof Q=="function"?V?[Q.listener||Q]:[Q]:V?C(Q):b(Q,Q.length)}o.prototype.listeners=function(q){return m(this,q,!0)},o.prototype.rawListeners=function(q){return m(this,q,!1)},o.listenerCount=function(F,q){return typeof F.listenerCount=="function"?F.listenerCount(q):y.call(F,q)},o.prototype.listenerCount=y;function y(F){var q=this._events;if(q!==void 0){var V=q[F];if(typeof V=="function")return 1;if(V!==void 0)return V.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function b(F,q){for(var V=new Array(q),ee=0;ee<q;++ee)V[ee]=F[ee];return V}function E(F,q){for(;q+1<F.length;q++)F[q]=F[q+1];F.pop()}function C(F){for(var q=new Array(F.length),V=0;V<q.length;++V)q[V]=F[V].listener||F[V];return q}function j(F,q){return new Promise(function(V,ee){function Q(Z){F.removeListener(q,W),ee(Z)}function W(){typeof F.removeListener=="function"&&F.removeListener("error",Q),V([].slice.call(arguments))}D(F,q,W,{once:!0}),q!=="error"&&B(F,Q,{once:!0})})}function B(F,q,V){typeof F.on=="function"&&D(F,"error",q,V)}function D(F,q,V,ee){if(typeof F.on=="function")ee.once?F.once(q,V):F.on(q,V);else if(typeof F.addEventListener=="function")F.addEventListener(q,function Q(W){ee.once&&F.removeEventListener(q,Q),V(W)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof F)}return events.exports}var streamBrowser$2,hasRequiredStreamBrowser$2;function requireStreamBrowser$2(){return hasRequiredStreamBrowser$2||(hasRequiredStreamBrowser$2=1,streamBrowser$2=requireEvents().EventEmitter),streamBrowser$2}var util$1={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},s=Symbol("test"),r=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var a=42;e[s]=a;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==s||!Object.prototype.propertyIsEnumerable.call(e,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,s);if(c.value!==a||c.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var t=requireShams$1();return shams=function(){return t()&&!!Symbol.toStringTag},shams}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round=Math.round),round}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!==e}),_isNaN}var sign$2,hasRequiredSign$1;function requireSign$1(){if(hasRequiredSign$1)return sign$2;hasRequiredSign$1=1;var t=require_isNaN();return sign$2=function(s){return t(s)||s===0?s:s<0?-1:1},sign$2}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var t=requireGOPD();if(t)try{t([],"length")}catch{t=null}return gopd=t,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return esDefineProperty=t,esDefineProperty}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var t=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var t=requireEsObjectAtoms();return Object_getPrototypeOf=t.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,s=Math.max,r="[object Function]",a=function(u,f){for(var d=[],p=0;p<u.length;p+=1)d[p]=u[p];for(var m=0;m<f.length;m+=1)d[m+u.length]=f[m];return d},o=function(u,f){for(var d=[],p=f,m=0;p<u.length;p+=1,m+=1)d[m]=u[p];return d},l=function(c,u){for(var f="",d=0;d<c.length;d+=1)f+=c[d],d+1<c.length&&(f+=u);return f};return implementation=function(u){var f=this;if(typeof f!="function"||e.apply(f)!==r)throw new TypeError(t+f);for(var d=o(arguments,1),p,m=function(){if(this instanceof p){var j=f.apply(this,a(d,arguments));return Object(j)===j?j:this}return f.apply(u,a(d,arguments))},y=s(0,f.length-d.length),b=[],E=0;E<y;E++)b[E]="$"+E;if(p=Function("binder","return function ("+l(b,",")+"){ return binder.apply(this,arguments); }")(m),f.prototype){var C=function(){};C.prototype=f.prototype,p.prototype=new C,C.prototype=null}return p},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var t=requireImplementation();return functionBind=Function.prototype.bind||t,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var t=requireFunctionBind(),e=requireFunctionApply(),s=requireFunctionCall(),r=requireReflectApply();return actualApply=r||t.call(s,e),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var t=requireFunctionBind(),e=requireType(),s=requireFunctionCall(),r=requireActualApply();return callBindApplyHelpers=function(o){if(o.length<1||typeof o[0]!="function")throw new e("a function is required");return r(t,s,o)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var t=requireCallBindApplyHelpers(),e=requireGopd(),s;try{s=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var r=!!s&&e&&e(Object.prototype,"__proto__"),a=Object,o=a.getPrototypeOf;return get=r&&typeof r.get=="function"?t([r.get]):typeof o=="function"?function(c){return o(c==null?c:a(c))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var t=requireReflect_getPrototypeOf(),e=requireObject_getPrototypeOf(),s=requireGet();return getProto=t?function(a){return t(a)}:e?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return e(a)}:s?function(a){return s(a)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,s=requireFunctionBind();return hasown=s.call(t,e),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var t,e=requireEsObjectAtoms(),s=requireEsErrors(),r=require_eval(),a=requireRange(),o=requireRef(),l=requireSyntax(),c=requireType(),u=requireUri(),f=requireAbs(),d=requireFloor(),p=requireMax(),m=requireMin(),y=requirePow(),b=requireRound(),E=requireSign$1(),C=Function,j=function(ae){try{return C('"use strict"; return ('+ae+").constructor;")()}catch{}},B=requireGopd(),D=requireEsDefineProperty(),F=function(){throw new c},q=B?(function(){try{return arguments.callee,F}catch{try{return B(arguments,"callee").get}catch{return F}}})():F,V=requireHasSymbols()(),ee=requireGetProto(),Q=requireObject_getPrototypeOf(),W=requireReflect_getPrototypeOf(),Z=requireFunctionApply(),z=requireFunctionCall(),O={},k=typeof Uint8Array>"u"||!ee?t:ee(Uint8Array),v={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":V&&ee?ee([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":C,"%GeneratorFunction%":O,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":V&&ee?ee(ee([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!V||!ee?t:ee(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":B,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":a,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!V||!ee?t:ee(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":V&&ee?ee(""[Symbol.iterator]()):t,"%Symbol%":V?Symbol:t,"%SyntaxError%":l,"%ThrowTypeError%":q,"%TypedArray%":k,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":z,"%Function.prototype.apply%":Z,"%Object.defineProperty%":D,"%Object.getPrototypeOf%":Q,"%Math.abs%":f,"%Math.floor%":d,"%Math.max%":p,"%Math.min%":m,"%Math.pow%":y,"%Math.round%":b,"%Math.sign%":E,"%Reflect.getPrototypeOf%":W};if(ee)try{null.error}catch(ae){var S=ee(ee(ae));v["%Error.prototype%"]=S}var N=function ae(he){var le;if(he==="%AsyncFunction%")le=j("async function () {}");else if(he==="%GeneratorFunction%")le=j("function* () {}");else if(he==="%AsyncGeneratorFunction%")le=j("async function* () {}");else if(he==="%AsyncGenerator%"){var te=ae("%AsyncGeneratorFunction%");te&&(le=te.prototype)}else if(he==="%AsyncIteratorPrototype%"){var pe=ae("%AsyncGenerator%");pe&&ee&&(le=ee(pe.prototype))}return v[he]=le,le},R={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=requireFunctionBind(),M=requireHasown(),I=T.call(z,Array.prototype.concat),$=T.call(Z,Array.prototype.splice),A=T.call(z,String.prototype.replace),L=T.call(z,String.prototype.slice),Y=T.call(z,RegExp.prototype.exec),oe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,J=/\\(\\)?/g,U=function(he){var le=L(he,0,1),te=L(he,-1);if(le==="%"&&te!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(te==="%"&&le!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var pe=[];return A(he,oe,function(xe,be,ce,re){pe[pe.length]=ce?A(re,J,"$1"):be||xe}),pe},G=function(he,le){var te=he,pe;if(M(R,te)&&(pe=R[te],te="%"+pe[0]+"%"),M(v,te)){var xe=v[te];if(xe===O&&(xe=N(te)),typeof xe>"u"&&!le)throw new c("intrinsic "+he+" exists, but is not available. Please file an issue!");return{alias:pe,name:te,value:xe}}throw new l("intrinsic "+he+" does not exist!")};return getIntrinsic=function(he,le){if(typeof he!="string"||he.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof le!="boolean")throw new c('"allowMissing" argument must be a boolean');if(Y(/^%?[^%]*%?$/,he)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var te=U(he),pe=te.length>0?te[0]:"",xe=G("%"+pe+"%",le),be=xe.name,ce=xe.value,re=!1,ie=xe.alias;ie&&(pe=ie[0],$(te,I([0,1],ie)));for(var fe=1,ye=!0;fe<te.length;fe+=1){var we=te[fe],Re=L(we,0,1),Me=L(we,-1);if((Re==='"'||Re==="'"||Re==="`"||Me==='"'||Me==="'"||Me==="`")&&Re!==Me)throw new l("property names with quotes must have matching quotes");if((we==="constructor"||!ye)&&(re=!0),pe+="."+we,be="%"+pe+"%",M(v,be))ce=v[be];else if(ce!=null){if(!(we in ce)){if(!le)throw new c("base intrinsic for "+he+" exists, but the property is not available.");return}if(B&&fe+1>=te.length){var ke=B(ce,we);ye=!!ke,ye&&"get"in ke&&!("originalValue"in ke.get)?ce=ke.get:ce=ce[we]}else ye=M(ce,we),ce=ce[we];ye&&!re&&(v[be]=ce)}}return ce},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var t=requireGetIntrinsic(),e=requireCallBindApplyHelpers(),s=e([t("%String.prototype.indexOf%")]);return callBound=function(a,o){var l=t(a,!!o);return typeof l=="function"&&s(a,".prototype.")>-1?e([l]):l},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var t=requireShams()(),e=requireCallBound(),s=e("Object.prototype.toString"),r=function(c){return t&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:s(c)==="[object Arguments]"},a=function(c){return r(c)?!0:c!==null&&typeof c=="object"&&"length"in c&&typeof c.length=="number"&&c.length>=0&&s(c)!=="[object Array]"&&"callee"in c&&s(c.callee)==="[object Function]"},o=(function(){return r(arguments)})();return r.isLegacyArguments=a,isArguments=o?r:a,isArguments}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var t=requireCallBound(),e=requireShams()(),s=requireHasown(),r=requireGopd(),a;if(e){var o=t("RegExp.prototype.exec"),l={},c=function(){throw l},u={toString:c,valueOf:c};typeof Symbol.toPrimitive=="symbol"&&(u[Symbol.toPrimitive]=c),a=function(m){if(!m||typeof m!="object")return!1;var y=r(m,"lastIndex"),b=y&&s(y,"value");if(!b)return!1;try{o(m,u)}catch(E){return E===l}}}else{var f=t("Object.prototype.toString"),d="[object RegExp]";a=function(m){return!m||typeof m!="object"&&typeof m!="function"?!1:f(m)===d}}return isRegex=a,isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var t=requireCallBound(),e=requireIsRegex(),s=t("RegExp.prototype.exec"),r=requireType();return safeRegexTest=function(o){if(!e(o))throw new r("`regex` must be a RegExp");return function(c){return s(o,c)!==null}},safeRegexTest}var generatorFunction,hasRequiredGeneratorFunction;function requireGeneratorFunction(){if(hasRequiredGeneratorFunction)return generatorFunction;hasRequiredGeneratorFunction=1;const t=(function*(){}).constructor;return generatorFunction=()=>t,generatorFunction}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var t=requireCallBound(),e=requireSafeRegexTest(),s=e(/^\s*(?:function)?\*/),r=requireShams()(),a=requireGetProto(),o=t("Object.prototype.toString"),l=t("Function.prototype.toString"),c=requireGeneratorFunction();return isGeneratorFunction=function(f){if(typeof f!="function")return!1;if(s(l(f)))return!0;if(!r){var d=o(f);return d==="[object GeneratorFunction]"}if(!a)return!1;var p=c();return p&&a(f)===p.prototype},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,s,r;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{s=Object.defineProperty({},"length",{get:function(){throw r}}),r={},e(function(){throw 42},null,s)}catch(B){B!==r&&(e=null)}else e=null;var a=/^\s*class\b/,o=function(D){try{var F=t.call(D);return a.test(F)}catch{return!1}},l=function(D){try{return o(D)?!1:(t.call(D),!0)}catch{return!1}},c=Object.prototype.toString,u="[object Object]",f="[object Function]",d="[object GeneratorFunction]",p="[object HTMLAllCollection]",m="[object HTML document.all class]",y="[object HTMLCollection]",b=typeof Symbol=="function"&&!!Symbol.toStringTag,E=!(0 in[,]),C=function(){return!1};if(typeof document=="object"){var j=document.all;c.call(j)===c.call(document.all)&&(C=function(D){if((E||!D)&&(typeof D>"u"||typeof D=="object"))try{var F=c.call(D);return(F===p||F===m||F===y||F===u)&&D("")==null}catch{}return!1})}return isCallable=e?function(D){if(C(D))return!0;if(!D||typeof D!="function"&&typeof D!="object")return!1;try{e(D,null,s)}catch(F){if(F!==r)return!1}return!o(D)&&l(D)}:function(D){if(C(D))return!0;if(!D||typeof D!="function"&&typeof D!="object")return!1;if(b)return l(D);if(o(D))return!1;var F=c.call(D);return F!==f&&F!==d&&!/^\[object HTML/.test(F)?!1:l(D)},isCallable}var forEach,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var t=requireIsCallable(),e=Object.prototype.toString,s=Object.prototype.hasOwnProperty,r=function(u,f,d){for(var p=0,m=u.length;p<m;p++)s.call(u,p)&&(d==null?f(u[p],p,u):f.call(d,u[p],p,u))},a=function(u,f,d){for(var p=0,m=u.length;p<m;p++)d==null?f(u.charAt(p),p,u):f.call(d,u.charAt(p),p,u)},o=function(u,f,d){for(var p in u)s.call(u,p)&&(d==null?f(u[p],p,u):f.call(d,u[p],p,u))};function l(c){return e.call(c)==="[object Array]"}return forEach=function(u,f,d){if(!t(f))throw new TypeError("iterator must be a function");var p;arguments.length>=3&&(p=d),l(u)?r(u,f,p):typeof u=="string"?a(u,f,p):o(u,f,p)},forEach}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var t=requirePossibleTypedArrayNames(),e=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var r=[],a=0;a<t.length;a++)typeof e[t[a]]=="function"&&(r[r.length]=t[a]);return r},availableTypedArrays}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var t=requireEsDefineProperty(),e=requireSyntax(),s=requireType(),r=requireGopd();return defineDataProperty=function(o,l,c){if(!o||typeof o!="object"&&typeof o!="function")throw new s("`obj` must be an object or a function`");if(typeof l!="string"&&typeof l!="symbol")throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new s("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,p=arguments.length>6?arguments[6]:!1,m=!!r&&r(o,l);if(t)t(o,l,{configurable:d===null&&m?m.configurable:!d,enumerable:u===null&&m?m.enumerable:!u,value:c,writable:f===null&&m?m.writable:!f});else if(p||!u&&!f&&!d)o[l]=c;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var t=requireEsDefineProperty(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=e,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var t=requireGetIntrinsic(),e=requireDefineDataProperty(),s=requireHasPropertyDescriptors()(),r=requireGopd(),a=requireType(),o=t("%Math.floor%");return setFunctionLength=function(c,u){if(typeof c!="function")throw new a("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||o(u)!==u)throw new a("`length` must be a positive 32-bit integer");var f=arguments.length>2&&!!arguments[2],d=!0,p=!0;if("length"in c&&r){var m=r(c,"length");m&&!m.configurable&&(d=!1),m&&!m.writable&&(p=!1)}return(d||p||!f)&&(s?e(c,"length",u,!0,!0):e(c,"length",u)),c},setFunctionLength}var applyBind,hasRequiredApplyBind;function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var t=requireFunctionBind(),e=requireFunctionApply(),s=requireActualApply();return applyBind=function(){return s(t,e,arguments)},applyBind}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,(function(t){var e=requireSetFunctionLength(),s=requireEsDefineProperty(),r=requireCallBindApplyHelpers(),a=requireApplyBind();t.exports=function(l){var c=r(arguments),u=l.length-(arguments.length-1);return e(c,1+(u>0?u:0),!0)},s?s(t.exports,"apply",{value:a}):t.exports.apply=a})(callBind)),callBind.exports}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),s=requireCallBind(),r=requireCallBound(),a=requireGopd(),o=requireGetProto(),l=r("Object.prototype.toString"),c=requireShams()(),u=typeof globalThis>"u"?commonjsGlobal:globalThis,f=e(),d=r("String.prototype.slice"),p=r("Array.prototype.indexOf",!0)||function(C,j){for(var B=0;B<C.length;B+=1)if(C[B]===j)return B;return-1},m={__proto__:null};c&&a&&o?t(f,function(E){var C=new u[E];if(Symbol.toStringTag in C&&o){var j=o(C),B=a(j,Symbol.toStringTag);if(!B&&j){var D=o(j);B=a(D,Symbol.toStringTag)}if(B&&B.get){var F=s(B.get);m["$"+E]=F}}}):t(f,function(E){var C=new u[E],j=C.slice||C.set;if(j){var B=s(j);m["$"+E]=B}});var y=function(C){var j=!1;return t(m,function(B,D){if(!j)try{"$"+B(C)===D&&(j=d(D,1))}catch{}}),j},b=function(C){var j=!1;return t(m,function(B,D){if(!j)try{B(C),j=d(D,1)}catch{}}),j};return whichTypedArray=function(C){if(!C||typeof C!="object")return!1;if(!c){var j=d(l(C),8,-1);return p(f,j)>-1?j:j!=="Object"?!1:b(C)}return a?y(C):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var t=requireWhichTypedArray();return isTypedArray=function(s){return!!t(s)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(t){var e=requireIsArguments(),s=requireIsGeneratorFunction(),r=requireWhichTypedArray(),a=requireIsTypedArray();function o(fe){return fe.call.bind(fe)}var l=typeof BigInt<"u",c=typeof Symbol<"u",u=o(Object.prototype.toString),f=o(Number.prototype.valueOf),d=o(String.prototype.valueOf),p=o(Boolean.prototype.valueOf);if(l)var m=o(BigInt.prototype.valueOf);if(c)var y=o(Symbol.prototype.valueOf);function b(fe,ye){if(typeof fe!="object")return!1;try{return ye(fe),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=s,t.isTypedArray=a;function E(fe){return typeof Promise<"u"&&fe instanceof Promise||fe!==null&&typeof fe=="object"&&typeof fe.then=="function"&&typeof fe.catch=="function"}t.isPromise=E;function C(fe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(fe):a(fe)||L(fe)}t.isArrayBufferView=C;function j(fe){return r(fe)==="Uint8Array"}t.isUint8Array=j;function B(fe){return r(fe)==="Uint8ClampedArray"}t.isUint8ClampedArray=B;function D(fe){return r(fe)==="Uint16Array"}t.isUint16Array=D;function F(fe){return r(fe)==="Uint32Array"}t.isUint32Array=F;function q(fe){return r(fe)==="Int8Array"}t.isInt8Array=q;function V(fe){return r(fe)==="Int16Array"}t.isInt16Array=V;function ee(fe){return r(fe)==="Int32Array"}t.isInt32Array=ee;function Q(fe){return r(fe)==="Float32Array"}t.isFloat32Array=Q;function W(fe){return r(fe)==="Float64Array"}t.isFloat64Array=W;function Z(fe){return r(fe)==="BigInt64Array"}t.isBigInt64Array=Z;function z(fe){return r(fe)==="BigUint64Array"}t.isBigUint64Array=z;function O(fe){return u(fe)==="[object Map]"}O.working=typeof Map<"u"&&O(new Map);function k(fe){return typeof Map>"u"?!1:O.working?O(fe):fe instanceof Map}t.isMap=k;function v(fe){return u(fe)==="[object Set]"}v.working=typeof Set<"u"&&v(new Set);function S(fe){return typeof Set>"u"?!1:v.working?v(fe):fe instanceof Set}t.isSet=S;function N(fe){return u(fe)==="[object WeakMap]"}N.working=typeof WeakMap<"u"&&N(new WeakMap);function R(fe){return typeof WeakMap>"u"?!1:N.working?N(fe):fe instanceof WeakMap}t.isWeakMap=R;function T(fe){return u(fe)==="[object WeakSet]"}T.working=typeof WeakSet<"u"&&T(new WeakSet);function M(fe){return T(fe)}t.isWeakSet=M;function I(fe){return u(fe)==="[object ArrayBuffer]"}I.working=typeof ArrayBuffer<"u"&&I(new ArrayBuffer);function $(fe){return typeof ArrayBuffer>"u"?!1:I.working?I(fe):fe instanceof ArrayBuffer}t.isArrayBuffer=$;function A(fe){return u(fe)==="[object DataView]"}A.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&A(new DataView(new ArrayBuffer(1),0,1));function L(fe){return typeof DataView>"u"?!1:A.working?A(fe):fe instanceof DataView}t.isDataView=L;var Y=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function oe(fe){return u(fe)==="[object SharedArrayBuffer]"}function J(fe){return typeof Y>"u"?!1:(typeof oe.working>"u"&&(oe.working=oe(new Y)),oe.working?oe(fe):fe instanceof Y)}t.isSharedArrayBuffer=J;function U(fe){return u(fe)==="[object AsyncFunction]"}t.isAsyncFunction=U;function G(fe){return u(fe)==="[object Map Iterator]"}t.isMapIterator=G;function ae(fe){return u(fe)==="[object Set Iterator]"}t.isSetIterator=ae;function he(fe){return u(fe)==="[object Generator]"}t.isGeneratorObject=he;function le(fe){return u(fe)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=le;function te(fe){return b(fe,f)}t.isNumberObject=te;function pe(fe){return b(fe,d)}t.isStringObject=pe;function xe(fe){return b(fe,p)}t.isBooleanObject=xe;function be(fe){return l&&b(fe,m)}t.isBigIntObject=be;function ce(fe){return c&&b(fe,y)}t.isSymbolObject=ce;function re(fe){return te(fe)||pe(fe)||xe(fe)||be(fe)||ce(fe)}t.isBoxedPrimitive=re;function ie(fe){return typeof Uint8Array<"u"&&($(fe)||J(fe))}t.isAnyArrayBuffer=ie,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(fe){Object.defineProperty(t,fe,{enumerable:!1,value:function(){throw new Error(fe+" is not supported in userland")}})})})(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil$1;function requireUtil$1(){return hasRequiredUtil$1||(hasRequiredUtil$1=1,(function(t){var e={},s=Object.getOwnPropertyDescriptors||function(Y){for(var oe=Object.keys(Y),J={},U=0;U<oe.length;U++)J[oe[U]]=Object.getOwnPropertyDescriptor(Y,oe[U]);return J},r=/%[sdj%]/g;t.format=function(L){if(!V(L)){for(var Y=[],oe=0;oe<arguments.length;oe++)Y.push(c(arguments[oe]));return Y.join(" ")}for(var oe=1,J=arguments,U=J.length,G=String(L).replace(r,function(he){if(he==="%%")return"%";if(oe>=U)return he;switch(he){case"%s":return String(J[oe++]);case"%d":return Number(J[oe++]);case"%j":try{return JSON.stringify(J[oe++])}catch{return"[Circular]"}default:return he}}),ae=J[oe];oe<U;ae=J[++oe])D(ae)||!Z(ae)?G+=" "+ae:G+=" "+c(ae);return G},t.deprecate=function(L,Y){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return L;if(typeof process$1>"u")return function(){return t.deprecate(L,Y).apply(this,arguments)};var oe=!1;function J(){if(!oe){if(process$1.throwDeprecation)throw new Error(Y);process$1.traceDeprecation?console.trace(Y):console.error(Y),oe=!0}return L.apply(this,arguments)}return J};var a={},o=/^$/;if(e.NODE_DEBUG){var l=e.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+l+"$","i")}t.debuglog=function(L){if(L=L.toUpperCase(),!a[L])if(o.test(L)){var Y=process$1.pid;a[L]=function(){var oe=t.format.apply(t,arguments);console.error("%s %d: %s",L,Y,oe)}}else a[L]=function(){};return a[L]};function c(L,Y){var oe={seen:[],stylize:f};return arguments.length>=3&&(oe.depth=arguments[2]),arguments.length>=4&&(oe.colors=arguments[3]),B(Y)?oe.showHidden=Y:Y&&t._extend(oe,Y),Q(oe.showHidden)&&(oe.showHidden=!1),Q(oe.depth)&&(oe.depth=2),Q(oe.colors)&&(oe.colors=!1),Q(oe.customInspect)&&(oe.customInspect=!0),oe.colors&&(oe.stylize=u),p(oe,L,oe.depth)}t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(L,Y){var oe=c.styles[Y];return oe?"\x1B["+c.colors[oe][0]+"m"+L+"\x1B["+c.colors[oe][1]+"m":L}function f(L,Y){return L}function d(L){var Y={};return L.forEach(function(oe,J){Y[oe]=!0}),Y}function p(L,Y,oe){if(L.customInspect&&Y&&k(Y.inspect)&&Y.inspect!==t.inspect&&!(Y.constructor&&Y.constructor.prototype===Y)){var J=Y.inspect(oe,L);return V(J)||(J=p(L,J,oe)),J}var U=m(L,Y);if(U)return U;var G=Object.keys(Y),ae=d(G);if(L.showHidden&&(G=Object.getOwnPropertyNames(Y)),O(Y)&&(G.indexOf("message")>=0||G.indexOf("description")>=0))return y(Y);if(G.length===0){if(k(Y)){var he=Y.name?": "+Y.name:"";return L.stylize("[Function"+he+"]","special")}if(W(Y))return L.stylize(RegExp.prototype.toString.call(Y),"regexp");if(z(Y))return L.stylize(Date.prototype.toString.call(Y),"date");if(O(Y))return y(Y)}var le="",te=!1,pe=["{","}"];if(j(Y)&&(te=!0,pe=["[","]"]),k(Y)){var xe=Y.name?": "+Y.name:"";le=" [Function"+xe+"]"}if(W(Y)&&(le=" "+RegExp.prototype.toString.call(Y)),z(Y)&&(le=" "+Date.prototype.toUTCString.call(Y)),O(Y)&&(le=" "+y(Y)),G.length===0&&(!te||Y.length==0))return pe[0]+le+pe[1];if(oe<0)return W(Y)?L.stylize(RegExp.prototype.toString.call(Y),"regexp"):L.stylize("[Object]","special");L.seen.push(Y);var be;return te?be=b(L,Y,oe,ae,G):be=G.map(function(ce){return E(L,Y,oe,ae,ce,te)}),L.seen.pop(),C(be,le,pe)}function m(L,Y){if(Q(Y))return L.stylize("undefined","undefined");if(V(Y)){var oe="'"+JSON.stringify(Y).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(oe,"string")}if(q(Y))return L.stylize(""+Y,"number");if(B(Y))return L.stylize(""+Y,"boolean");if(D(Y))return L.stylize("null","null")}function y(L){return"["+Error.prototype.toString.call(L)+"]"}function b(L,Y,oe,J,U){for(var G=[],ae=0,he=Y.length;ae<he;++ae)M(Y,String(ae))?G.push(E(L,Y,oe,J,String(ae),!0)):G.push("");return U.forEach(function(le){le.match(/^\d+$/)||G.push(E(L,Y,oe,J,le,!0))}),G}function E(L,Y,oe,J,U,G){var ae,he,le;if(le=Object.getOwnPropertyDescriptor(Y,U)||{value:Y[U]},le.get?le.set?he=L.stylize("[Getter/Setter]","special"):he=L.stylize("[Getter]","special"):le.set&&(he=L.stylize("[Setter]","special")),M(J,U)||(ae="["+U+"]"),he||(L.seen.indexOf(le.value)<0?(D(oe)?he=p(L,le.value,null):he=p(L,le.value,oe-1),he.indexOf(`
`)>-1&&(G?he=he.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):he=`
`+he.split(`
`).map(function(te){return"   "+te}).join(`
`))):he=L.stylize("[Circular]","special")),Q(ae)){if(G&&U.match(/^\d+$/))return he;ae=JSON.stringify(""+U),ae.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ae=ae.slice(1,-1),ae=L.stylize(ae,"name")):(ae=ae.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ae=L.stylize(ae,"string"))}return ae+": "+he}function C(L,Y,oe){var J=L.reduce(function(U,G){return G.indexOf(`
`)>=0,U+G.replace(/\u001b\[\d\d?m/g,"").length+1},0);return J>60?oe[0]+(Y===""?"":Y+`
 `)+" "+L.join(`,
  `)+" "+oe[1]:oe[0]+Y+" "+L.join(", ")+" "+oe[1]}t.types=requireTypes();function j(L){return Array.isArray(L)}t.isArray=j;function B(L){return typeof L=="boolean"}t.isBoolean=B;function D(L){return L===null}t.isNull=D;function F(L){return L==null}t.isNullOrUndefined=F;function q(L){return typeof L=="number"}t.isNumber=q;function V(L){return typeof L=="string"}t.isString=V;function ee(L){return typeof L=="symbol"}t.isSymbol=ee;function Q(L){return L===void 0}t.isUndefined=Q;function W(L){return Z(L)&&S(L)==="[object RegExp]"}t.isRegExp=W,t.types.isRegExp=W;function Z(L){return typeof L=="object"&&L!==null}t.isObject=Z;function z(L){return Z(L)&&S(L)==="[object Date]"}t.isDate=z,t.types.isDate=z;function O(L){return Z(L)&&(S(L)==="[object Error]"||L instanceof Error)}t.isError=O,t.types.isNativeError=O;function k(L){return typeof L=="function"}t.isFunction=k;function v(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||typeof L>"u"}t.isPrimitive=v,t.isBuffer=requireIsBufferBrowser();function S(L){return Object.prototype.toString.call(L)}function N(L){return L<10?"0"+L.toString(10):L.toString(10)}var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var L=new Date,Y=[N(L.getHours()),N(L.getMinutes()),N(L.getSeconds())].join(":");return[L.getDate(),R[L.getMonth()],Y].join(" ")}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=requireInherits_browser(),t._extend=function(L,Y){if(!Y||!Z(Y))return L;for(var oe=Object.keys(Y),J=oe.length;J--;)L[oe[J]]=Y[oe[J]];return L};function M(L,Y){return Object.prototype.hasOwnProperty.call(L,Y)}var I=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(Y){if(typeof Y!="function")throw new TypeError('The "original" argument must be of type Function');if(I&&Y[I]){var oe=Y[I];if(typeof oe!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(oe,I,{value:oe,enumerable:!1,writable:!1,configurable:!0}),oe}function oe(){for(var J,U,G=new Promise(function(le,te){J=le,U=te}),ae=[],he=0;he<arguments.length;he++)ae.push(arguments[he]);ae.push(function(le,te){le?U(le):J(te)});try{Y.apply(this,ae)}catch(le){U(le)}return G}return Object.setPrototypeOf(oe,Object.getPrototypeOf(Y)),I&&Object.defineProperty(oe,I,{value:oe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(oe,s(Y))},t.promisify.custom=I;function $(L,Y){if(!L){var oe=new Error("Promise was rejected with a falsy value");oe.reason=L,L=oe}return Y(L)}function A(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function Y(){for(var oe=[],J=0;J<arguments.length;J++)oe.push(arguments[J]);var U=oe.pop();if(typeof U!="function")throw new TypeError("The last argument must be of type Function");var G=this,ae=function(){return U.apply(G,arguments)};L.apply(this,oe).then(function(he){process$1.nextTick(ae.bind(null,null,he))},function(he){process$1.nextTick($.bind(null,he,ae))})}return Object.setPrototypeOf(Y,Object.getPrototypeOf(L)),Object.defineProperties(Y,s(L)),Y}t.callbackify=A})(util$1)),util$1}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(b,E){var C=Object.keys(b);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(b);E&&(j=j.filter(function(B){return Object.getOwnPropertyDescriptor(b,B).enumerable})),C.push.apply(C,j)}return C}function e(b){for(var E=1;E<arguments.length;E++){var C=arguments[E]!=null?arguments[E]:{};E%2?t(Object(C),!0).forEach(function(j){s(b,j,C[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(C)):t(Object(C)).forEach(function(j){Object.defineProperty(b,j,Object.getOwnPropertyDescriptor(C,j))})}return b}function s(b,E,C){return E=l(E),E in b?Object.defineProperty(b,E,{value:C,enumerable:!0,configurable:!0,writable:!0}):b[E]=C,b}function r(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}function a(b,E){for(var C=0;C<E.length;C++){var j=E[C];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(b,l(j.key),j)}}function o(b,E,C){return E&&a(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),b}function l(b){var E=c(b,"string");return typeof E=="symbol"?E:String(E)}function c(b,E){if(typeof b!="object"||b===null)return b;var C=b[Symbol.toPrimitive];if(C!==void 0){var j=C.call(b,E);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}var u=requireBuffer$1(),f=u.Buffer,d=requireUtil$1(),p=d.inspect,m=p&&p.custom||"inspect";function y(b,E,C){f.prototype.copy.call(b,E,C)}return buffer_list=(function(){function b(){r(this,b),this.head=null,this.tail=null,this.length=0}return o(b,[{key:"push",value:function(C){var j={data:C,next:null};this.length>0?this.tail.next=j:this.head=j,this.tail=j,++this.length}},{key:"unshift",value:function(C){var j={data:C,next:this.head};this.length===0&&(this.tail=j),this.head=j,++this.length}},{key:"shift",value:function(){if(this.length!==0){var C=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,C}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(C){if(this.length===0)return"";for(var j=this.head,B=""+j.data;j=j.next;)B+=C+j.data;return B}},{key:"concat",value:function(C){if(this.length===0)return f.alloc(0);for(var j=f.allocUnsafe(C>>>0),B=this.head,D=0;B;)y(B.data,j,D),D+=B.data.length,B=B.next;return j}},{key:"consume",value:function(C,j){var B;return C<this.head.data.length?(B=this.head.data.slice(0,C),this.head.data=this.head.data.slice(C)):C===this.head.data.length?B=this.shift():B=j?this._getString(C):this._getBuffer(C),B}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(C){var j=this.head,B=1,D=j.data;for(C-=D.length;j=j.next;){var F=j.data,q=C>F.length?F.length:C;if(q===F.length?D+=F:D+=F.slice(0,C),C-=q,C===0){q===F.length?(++B,j.next?this.head=j.next:this.head=this.tail=null):(this.head=j,j.data=F.slice(q));break}++B}return this.length-=B,D}},{key:"_getBuffer",value:function(C){var j=f.allocUnsafe(C),B=this.head,D=1;for(B.data.copy(j),C-=B.data.length;B=B.next;){var F=B.data,q=C>F.length?F.length:C;if(F.copy(j,j.length-C,0,q),C-=q,C===0){q===F.length?(++D,B.next?this.head=B.next:this.head=this.tail=null):(this.head=B,B.data=F.slice(q));break}++D}return this.length-=D,j}},{key:m,value:function(C,j){return p(this,e(e({},j),{},{depth:0,customInspect:!1}))}}]),b})(),buffer_list}var destroy_1$2,hasRequiredDestroy$2;function requireDestroy$2(){if(hasRequiredDestroy$2)return destroy_1$2;hasRequiredDestroy$2=1;function t(l,c){var u=this,f=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return f||d?(c?c(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(a,this,l)):process$1.nextTick(a,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(p){!c&&p?u._writableState?u._writableState.errorEmitted?process$1.nextTick(s,u):(u._writableState.errorEmitted=!0,process$1.nextTick(e,u,p)):process$1.nextTick(e,u,p):c?(process$1.nextTick(s,u),c(p)):process$1.nextTick(s,u)}),this)}function e(l,c){a(l,c),s(l)}function s(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(l,c){l.emit("error",c)}function o(l,c){var u=l._readableState,f=l._writableState;u&&u.autoDestroy||f&&f.autoDestroy?l.destroy(c):l.emit("error",c)}return destroy_1$2={destroy:t,undestroy:r,errorOrDestroy:o},destroy_1$2}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(c,u){c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.__proto__=u}var e={};function s(c,u,f){f||(f=Error);function d(m,y,b){return typeof u=="string"?u:u(m,y,b)}var p=(function(m){t(y,m);function y(b,E,C){return m.call(this,d(b,E,C))||this}return y})(f);p.prototype.name=f.name,p.prototype.code=c,e[c]=p}function r(c,u){if(Array.isArray(c)){var f=c.length;return c=c.map(function(d){return String(d)}),f>2?"one of ".concat(u," ").concat(c.slice(0,f-1).join(", "),", or ")+c[f-1]:f===2?"one of ".concat(u," ").concat(c[0]," or ").concat(c[1]):"of ".concat(u," ").concat(c[0])}else return"of ".concat(u," ").concat(String(c))}function a(c,u,f){return c.substr(0,u.length)===u}function o(c,u,f){return(f===void 0||f>c.length)&&(f=c.length),c.substring(f-u.length,f)===u}function l(c,u,f){return typeof f!="number"&&(f=0),f+u.length>c.length?!1:c.indexOf(u,f)!==-1}return s("ERR_INVALID_OPT_VALUE",function(c,u){return'The value "'+u+'" is invalid for option "'+c+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(c,u,f){var d;typeof u=="string"&&a(u,"not ")?(d="must not be",u=u.replace(/^not /,"")):d="must be";var p;if(o(c," argument"))p="The ".concat(c," ").concat(d," ").concat(r(u,"type"));else{var m=l(c,".")?"property":"argument";p='The "'.concat(c,'" ').concat(m," ").concat(d," ").concat(r(u,"type"))}return p+=". Received type ".concat(typeof f),p},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state$1,hasRequiredState;function requireState(){if(hasRequiredState)return state$1;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(r,a,o){return r.highWaterMark!=null?r.highWaterMark:a?r[o]:null}function s(r,a,o,l){var c=e(a,l,o);if(c!=null){if(!(isFinite(c)&&Math.floor(c)===c)||c<0){var u=l?o:"highWaterMark";throw new t(u,c)}return Math.floor(c)}return r.objectMode?16:16*1024}return state$1={getHighWaterMark:s},state$1}var browser$a,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$a;hasRequiredBrowser$a=1,browser$a=t;function t(s,r){if(e("noDeprecation"))return s;var a=!1;function o(){if(!a){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),a=!0}return s.apply(this,arguments)}return o}function e(s){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var r=commonjsGlobal.localStorage[s];return r==null?!1:String(r).toLowerCase()==="true"}return browser$a}var _stream_writable$2,hasRequired_stream_writable$2;function require_stream_writable$2(){if(hasRequired_stream_writable$2)return _stream_writable$2;hasRequired_stream_writable$2=1,_stream_writable$2=Q;function t(J){var U=this;this.next=null,this.entry=null,this.finish=function(){oe(U,J)}}var e;Q.WritableState=V;var s={deprecate:requireBrowser$a()},r=requireStreamBrowser$2(),a=requireBuffer$1().Buffer,o=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(J){return a.from(J)}function c(J){return a.isBuffer(J)||J instanceof o}var u=requireDestroy$2(),f=requireState(),d=f.getHighWaterMark,p=requireErrorsBrowser().codes,m=p.ERR_INVALID_ARG_TYPE,y=p.ERR_METHOD_NOT_IMPLEMENTED,b=p.ERR_MULTIPLE_CALLBACK,E=p.ERR_STREAM_CANNOT_PIPE,C=p.ERR_STREAM_DESTROYED,j=p.ERR_STREAM_NULL_VALUES,B=p.ERR_STREAM_WRITE_AFTER_END,D=p.ERR_UNKNOWN_ENCODING,F=u.errorOrDestroy;requireInherits_browser()(Q,r);function q(){}function V(J,U,G){e=e||require_stream_duplex$2(),J=J||{},typeof G!="boolean"&&(G=U instanceof e),this.objectMode=!!J.objectMode,G&&(this.objectMode=this.objectMode||!!J.writableObjectMode),this.highWaterMark=d(this,J,"writableHighWaterMark",G),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ae=J.decodeStrings===!1;this.decodeStrings=!ae,this.defaultEncoding=J.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(he){N(U,he)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=J.emitClose!==!1,this.autoDestroy=!!J.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}V.prototype.getBuffer=function(){for(var U=this.bufferedRequest,G=[];U;)G.push(U),U=U.next;return G},(function(){try{Object.defineProperty(V.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var ee;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ee=Function.prototype[Symbol.hasInstance],Object.defineProperty(Q,Symbol.hasInstance,{value:function(U){return ee.call(this,U)?!0:this!==Q?!1:U&&U._writableState instanceof V}})):ee=function(U){return U instanceof this};function Q(J){e=e||require_stream_duplex$2();var U=this instanceof e;if(!U&&!ee.call(Q,this))return new Q(J);this._writableState=new V(J,this,U),this.writable=!0,J&&(typeof J.write=="function"&&(this._write=J.write),typeof J.writev=="function"&&(this._writev=J.writev),typeof J.destroy=="function"&&(this._destroy=J.destroy),typeof J.final=="function"&&(this._final=J.final)),r.call(this)}Q.prototype.pipe=function(){F(this,new E)};function W(J,U){var G=new B;F(J,G),process$1.nextTick(U,G)}function Z(J,U,G,ae){var he;return G===null?he=new j:typeof G!="string"&&!U.objectMode&&(he=new m("chunk",["string","Buffer"],G)),he?(F(J,he),process$1.nextTick(ae,he),!1):!0}Q.prototype.write=function(J,U,G){var ae=this._writableState,he=!1,le=!ae.objectMode&&c(J);return le&&!a.isBuffer(J)&&(J=l(J)),typeof U=="function"&&(G=U,U=null),le?U="buffer":U||(U=ae.defaultEncoding),typeof G!="function"&&(G=q),ae.ending?W(this,G):(le||Z(this,ae,J,G))&&(ae.pendingcb++,he=O(this,ae,le,J,U,G)),he},Q.prototype.cork=function(){this._writableState.corked++},Q.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,!J.writing&&!J.corked&&!J.bufferProcessing&&J.bufferedRequest&&M(this,J))},Q.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new D(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(Q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function z(J,U,G){return!J.objectMode&&J.decodeStrings!==!1&&typeof U=="string"&&(U=a.from(U,G)),U}Object.defineProperty(Q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O(J,U,G,ae,he,le){if(!G){var te=z(U,ae,he);ae!==te&&(G=!0,he="buffer",ae=te)}var pe=U.objectMode?1:ae.length;U.length+=pe;var xe=U.length<U.highWaterMark;if(xe||(U.needDrain=!0),U.writing||U.corked){var be=U.lastBufferedRequest;U.lastBufferedRequest={chunk:ae,encoding:he,isBuf:G,callback:le,next:null},be?be.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else k(J,U,!1,pe,ae,he,le);return xe}function k(J,U,G,ae,he,le,te){U.writelen=ae,U.writecb=te,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new C("write")):G?J._writev(he,U.onwrite):J._write(he,le,U.onwrite),U.sync=!1}function v(J,U,G,ae,he){--U.pendingcb,G?(process$1.nextTick(he,ae),process$1.nextTick(L,J,U),J._writableState.errorEmitted=!0,F(J,ae)):(he(ae),J._writableState.errorEmitted=!0,F(J,ae),L(J,U))}function S(J){J.writing=!1,J.writecb=null,J.length-=J.writelen,J.writelen=0}function N(J,U){var G=J._writableState,ae=G.sync,he=G.writecb;if(typeof he!="function")throw new b;if(S(G),U)v(J,G,ae,U,he);else{var le=I(G)||J.destroyed;!le&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&M(J,G),ae?process$1.nextTick(R,J,G,le,he):R(J,G,le,he)}}function R(J,U,G,ae){G||T(J,U),U.pendingcb--,ae(),L(J,U)}function T(J,U){U.length===0&&U.needDrain&&(U.needDrain=!1,J.emit("drain"))}function M(J,U){U.bufferProcessing=!0;var G=U.bufferedRequest;if(J._writev&&G&&G.next){var ae=U.bufferedRequestCount,he=new Array(ae),le=U.corkedRequestsFree;le.entry=G;for(var te=0,pe=!0;G;)he[te]=G,G.isBuf||(pe=!1),G=G.next,te+=1;he.allBuffers=pe,k(J,U,!0,U.length,he,"",le.finish),U.pendingcb++,U.lastBufferedRequest=null,le.next?(U.corkedRequestsFree=le.next,le.next=null):U.corkedRequestsFree=new t(U),U.bufferedRequestCount=0}else{for(;G;){var xe=G.chunk,be=G.encoding,ce=G.callback,re=U.objectMode?1:xe.length;if(k(J,U,!1,re,xe,be,ce),G=G.next,U.bufferedRequestCount--,U.writing)break}G===null&&(U.lastBufferedRequest=null)}U.bufferedRequest=G,U.bufferProcessing=!1}Q.prototype._write=function(J,U,G){G(new y("_write()"))},Q.prototype._writev=null,Q.prototype.end=function(J,U,G){var ae=this._writableState;return typeof J=="function"?(G=J,J=null,U=null):typeof U=="function"&&(G=U,U=null),J!=null&&this.write(J,U),ae.corked&&(ae.corked=1,this.uncork()),ae.ending||Y(this,ae,G),this},Object.defineProperty(Q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function I(J){return J.ending&&J.length===0&&J.bufferedRequest===null&&!J.finished&&!J.writing}function $(J,U){J._final(function(G){U.pendingcb--,G&&F(J,G),U.prefinished=!0,J.emit("prefinish"),L(J,U)})}function A(J,U){!U.prefinished&&!U.finalCalled&&(typeof J._final=="function"&&!U.destroyed?(U.pendingcb++,U.finalCalled=!0,process$1.nextTick($,J,U)):(U.prefinished=!0,J.emit("prefinish")))}function L(J,U){var G=I(U);if(G&&(A(J,U),U.pendingcb===0&&(U.finished=!0,J.emit("finish"),U.autoDestroy))){var ae=J._readableState;(!ae||ae.autoDestroy&&ae.endEmitted)&&J.destroy()}return G}function Y(J,U,G){U.ending=!0,L(J,U),G&&(U.finished?process$1.nextTick(G):J.once("finish",G)),U.ended=!0,J.writable=!1}function oe(J,U,G){var ae=J.entry;for(J.entry=null;ae;){var he=ae.callback;U.pendingcb--,he(G),ae=ae.next}U.corkedRequestsFree.next=J}return Object.defineProperty(Q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(U){this._writableState&&(this._writableState.destroyed=U)}}),Q.prototype.destroy=u.destroy,Q.prototype._undestroy=u.undestroy,Q.prototype._destroy=function(J,U){U(J)},_stream_writable$2}var _stream_duplex$2,hasRequired_stream_duplex$2;function require_stream_duplex$2(){if(hasRequired_stream_duplex$2)return _stream_duplex$2;hasRequired_stream_duplex$2=1;var t=Object.keys||function(f){var d=[];for(var p in f)d.push(p);return d};_stream_duplex$2=l;var e=require_stream_readable$2(),s=require_stream_writable$2();requireInherits_browser()(l,e);for(var r=t(s.prototype),a=0;a<r.length;a++){var o=r[a];l.prototype[o]||(l.prototype[o]=s.prototype[o])}function l(f){if(!(this instanceof l))return new l(f);e.call(this,f),s.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",c)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function c(){this._writableState.ended||process$1.nextTick(u,this)}function u(f){f.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),_stream_duplex$2}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var t=requireSafeBuffer$2().Buffer,e=t.isEncoding||function(j){switch(j=""+j,j&&j.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(j){if(!j)return"utf8";for(var B;;)switch(j){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return j;default:if(B)return;j=(""+j).toLowerCase(),B=!0}}function r(j){var B=s(j);if(typeof B!="string"&&(t.isEncoding===e||!e(j)))throw new Error("Unknown encoding: "+j);return B||j}string_decoder.StringDecoder=a;function a(j){this.encoding=r(j);var B;switch(this.encoding){case"utf16le":this.text=p,this.end=m,B=4;break;case"utf8":this.fillLast=u,B=4;break;case"base64":this.text=y,this.end=b,B=3;break;default:this.write=E,this.end=C;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(B)}a.prototype.write=function(j){if(j.length===0)return"";var B,D;if(this.lastNeed){if(B=this.fillLast(j),B===void 0)return"";D=this.lastNeed,this.lastNeed=0}else D=0;return D<j.length?B?B+this.text(j,D):this.text(j,D):B||""},a.prototype.end=d,a.prototype.text=f,a.prototype.fillLast=function(j){if(this.lastNeed<=j.length)return j.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);j.copy(this.lastChar,this.lastTotal-this.lastNeed,0,j.length),this.lastNeed-=j.length};function o(j){return j<=127?0:j>>5===6?2:j>>4===14?3:j>>3===30?4:j>>6===2?-1:-2}function l(j,B,D){var F=B.length-1;if(F<D)return 0;var q=o(B[F]);return q>=0?(q>0&&(j.lastNeed=q-1),q):--F<D||q===-2?0:(q=o(B[F]),q>=0?(q>0&&(j.lastNeed=q-2),q):--F<D||q===-2?0:(q=o(B[F]),q>=0?(q>0&&(q===2?q=0:j.lastNeed=q-3),q):0))}function c(j,B,D){if((B[0]&192)!==128)return j.lastNeed=0,"";if(j.lastNeed>1&&B.length>1){if((B[1]&192)!==128)return j.lastNeed=1,"";if(j.lastNeed>2&&B.length>2&&(B[2]&192)!==128)return j.lastNeed=2,""}}function u(j){var B=this.lastTotal-this.lastNeed,D=c(this,j);if(D!==void 0)return D;if(this.lastNeed<=j.length)return j.copy(this.lastChar,B,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);j.copy(this.lastChar,B,0,j.length),this.lastNeed-=j.length}function f(j,B){var D=l(this,j,B);if(!this.lastNeed)return j.toString("utf8",B);this.lastTotal=D;var F=j.length-(D-this.lastNeed);return j.copy(this.lastChar,0,F),j.toString("utf8",B,F)}function d(j){var B=j&&j.length?this.write(j):"";return this.lastNeed?B+"":B}function p(j,B){if((j.length-B)%2===0){var D=j.toString("utf16le",B);if(D){var F=D.charCodeAt(D.length-1);if(F>=55296&&F<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=j[j.length-2],this.lastChar[1]=j[j.length-1],D.slice(0,-1)}return D}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=j[j.length-1],j.toString("utf16le",B,j.length-1)}function m(j){var B=j&&j.length?this.write(j):"";if(this.lastNeed){var D=this.lastTotal-this.lastNeed;return B+this.lastChar.toString("utf16le",0,D)}return B}function y(j,B){var D=(j.length-B)%3;return D===0?j.toString("base64",B):(this.lastNeed=3-D,this.lastTotal=3,D===1?this.lastChar[0]=j[j.length-1]:(this.lastChar[0]=j[j.length-2],this.lastChar[1]=j[j.length-1]),j.toString("base64",B,j.length-D))}function b(j){var B=j&&j.length?this.write(j):"";return this.lastNeed?B+this.lastChar.toString("base64",0,3-this.lastNeed):B}function E(j){return j.toString(this.encoding)}function C(j){return j&&j.length?this.write(j):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(o){var l=!1;return function(){if(!l){l=!0;for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];o.apply(this,u)}}}function s(){}function r(o){return o.setHeader&&typeof o.abort=="function"}function a(o,l,c){if(typeof l=="function")return a(o,null,l);l||(l={}),c=e(c||s);var u=l.readable||l.readable!==!1&&o.readable,f=l.writable||l.writable!==!1&&o.writable,d=function(){o.writable||m()},p=o._writableState&&o._writableState.finished,m=function(){f=!1,p=!0,u||c.call(o)},y=o._readableState&&o._readableState.endEmitted,b=function(){u=!1,y=!0,f||c.call(o)},E=function(D){c.call(o,D)},C=function(){var D;if(u&&!y)return(!o._readableState||!o._readableState.ended)&&(D=new t),c.call(o,D);if(f&&!p)return(!o._writableState||!o._writableState.ended)&&(D=new t),c.call(o,D)},j=function(){o.req.on("finish",m)};return r(o)?(o.on("complete",m),o.on("abort",C),o.req?j():o.on("request",j)):f&&!o._writableState&&(o.on("end",d),o.on("close",d)),o.on("end",b),o.on("finish",m),l.error!==!1&&o.on("error",E),o.on("close",C),function(){o.removeListener("complete",m),o.removeListener("abort",C),o.removeListener("request",j),o.req&&o.req.removeListener("finish",m),o.removeListener("end",d),o.removeListener("close",d),o.removeListener("finish",m),o.removeListener("end",b),o.removeListener("error",E),o.removeListener("close",C)}}return endOfStream=a,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(D,F,q){return F=s(F),F in D?Object.defineProperty(D,F,{value:q,enumerable:!0,configurable:!0,writable:!0}):D[F]=q,D}function s(D){var F=r(D,"string");return typeof F=="symbol"?F:String(F)}function r(D,F){if(typeof D!="object"||D===null)return D;var q=D[Symbol.toPrimitive];if(q!==void 0){var V=q.call(D,F);if(typeof V!="object")return V;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(D)}var a=requireEndOfStream(),o=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),f=Symbol("lastPromise"),d=Symbol("handlePromise"),p=Symbol("stream");function m(D,F){return{value:D,done:F}}function y(D){var F=D[o];if(F!==null){var q=D[p].read();q!==null&&(D[f]=null,D[o]=null,D[l]=null,F(m(q,!1)))}}function b(D){process$1.nextTick(y,D)}function E(D,F){return function(q,V){D.then(function(){if(F[u]){q(m(void 0,!0));return}F[d](q,V)},V)}}var C=Object.getPrototypeOf(function(){}),j=Object.setPrototypeOf((t={get stream(){return this[p]},next:function(){var F=this,q=this[c];if(q!==null)return Promise.reject(q);if(this[u])return Promise.resolve(m(void 0,!0));if(this[p].destroyed)return new Promise(function(W,Z){process$1.nextTick(function(){F[c]?Z(F[c]):W(m(void 0,!0))})});var V=this[f],ee;if(V)ee=new Promise(E(V,this));else{var Q=this[p].read();if(Q!==null)return Promise.resolve(m(Q,!1));ee=new Promise(this[d])}return this[f]=ee,ee}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var F=this;return new Promise(function(q,V){F[p].destroy(null,function(ee){if(ee){V(ee);return}q(m(void 0,!0))})})}),t),C),B=function(F){var q,V=Object.create(j,(q={},e(q,p,{value:F,writable:!0}),e(q,o,{value:null,writable:!0}),e(q,l,{value:null,writable:!0}),e(q,c,{value:null,writable:!0}),e(q,u,{value:F._readableState.endEmitted,writable:!0}),e(q,d,{value:function(Q,W){var Z=V[p].read();Z?(V[f]=null,V[o]=null,V[l]=null,Q(m(Z,!1))):(V[o]=Q,V[l]=W)},writable:!0}),q));return V[f]=null,a(F,function(ee){if(ee&&ee.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Q=V[l];Q!==null&&(V[f]=null,V[o]=null,V[l]=null,Q(ee)),V[c]=ee;return}var W=V[o];W!==null&&(V[f]=null,V[o]=null,V[l]=null,W(m(void 0,!0))),V[u]=!0}),F.on("readable",b.bind(null,V)),V};return async_iterator=B,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$2,hasRequired_stream_readable$2;function require_stream_readable$2(){if(hasRequired_stream_readable$2)return _stream_readable$2;hasRequired_stream_readable$2=1,_stream_readable$2=W;var t;W.ReadableState=Q,requireEvents().EventEmitter;var e=function(te,pe){return te.listeners(pe).length},s=requireStreamBrowser$2(),r=requireBuffer$1().Buffer,a=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(le){return r.from(le)}function l(le){return r.isBuffer(le)||le instanceof a}var c=requireUtil$1(),u;c&&c.debuglog?u=c.debuglog("stream"):u=function(){};var f=requireBuffer_list(),d=requireDestroy$2(),p=requireState(),m=p.getHighWaterMark,y=requireErrorsBrowser().codes,b=y.ERR_INVALID_ARG_TYPE,E=y.ERR_STREAM_PUSH_AFTER_EOF,C=y.ERR_METHOD_NOT_IMPLEMENTED,j=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,B,D,F;requireInherits_browser()(W,s);var q=d.errorOrDestroy,V=["error","close","destroy","pause","resume"];function ee(le,te,pe){if(typeof le.prependListener=="function")return le.prependListener(te,pe);!le._events||!le._events[te]?le.on(te,pe):Array.isArray(le._events[te])?le._events[te].unshift(pe):le._events[te]=[pe,le._events[te]]}function Q(le,te,pe){t=t||require_stream_duplex$2(),le=le||{},typeof pe!="boolean"&&(pe=te instanceof t),this.objectMode=!!le.objectMode,pe&&(this.objectMode=this.objectMode||!!le.readableObjectMode),this.highWaterMark=m(this,le,"readableHighWaterMark",pe),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=le.emitClose!==!1,this.autoDestroy=!!le.autoDestroy,this.destroyed=!1,this.defaultEncoding=le.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,le.encoding&&(B||(B=requireString_decoder().StringDecoder),this.decoder=new B(le.encoding),this.encoding=le.encoding)}function W(le){if(t=t||require_stream_duplex$2(),!(this instanceof W))return new W(le);var te=this instanceof t;this._readableState=new Q(le,this,te),this.readable=!0,le&&(typeof le.read=="function"&&(this._read=le.read),typeof le.destroy=="function"&&(this._destroy=le.destroy)),s.call(this)}Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(te){this._readableState&&(this._readableState.destroyed=te)}}),W.prototype.destroy=d.destroy,W.prototype._undestroy=d.undestroy,W.prototype._destroy=function(le,te){te(le)},W.prototype.push=function(le,te){var pe=this._readableState,xe;return pe.objectMode?xe=!0:typeof le=="string"&&(te=te||pe.defaultEncoding,te!==pe.encoding&&(le=r.from(le,te),te=""),xe=!0),Z(this,le,te,!1,xe)},W.prototype.unshift=function(le){return Z(this,le,null,!0,!1)};function Z(le,te,pe,xe,be){u("readableAddChunk",te);var ce=le._readableState;if(te===null)ce.reading=!1,N(le,ce);else{var re;if(be||(re=O(ce,te)),re)q(le,re);else if(ce.objectMode||te&&te.length>0)if(typeof te!="string"&&!ce.objectMode&&Object.getPrototypeOf(te)!==r.prototype&&(te=o(te)),xe)ce.endEmitted?q(le,new j):z(le,ce,te,!0);else if(ce.ended)q(le,new E);else{if(ce.destroyed)return!1;ce.reading=!1,ce.decoder&&!pe?(te=ce.decoder.write(te),ce.objectMode||te.length!==0?z(le,ce,te,!1):M(le,ce)):z(le,ce,te,!1)}else xe||(ce.reading=!1,M(le,ce))}return!ce.ended&&(ce.length<ce.highWaterMark||ce.length===0)}function z(le,te,pe,xe){te.flowing&&te.length===0&&!te.sync?(te.awaitDrain=0,le.emit("data",pe)):(te.length+=te.objectMode?1:pe.length,xe?te.buffer.unshift(pe):te.buffer.push(pe),te.needReadable&&R(le)),M(le,te)}function O(le,te){var pe;return!l(te)&&typeof te!="string"&&te!==void 0&&!le.objectMode&&(pe=new b("chunk",["string","Buffer","Uint8Array"],te)),pe}W.prototype.isPaused=function(){return this._readableState.flowing===!1},W.prototype.setEncoding=function(le){B||(B=requireString_decoder().StringDecoder);var te=new B(le);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var pe=this._readableState.buffer.head,xe="";pe!==null;)xe+=te.write(pe.data),pe=pe.next;return this._readableState.buffer.clear(),xe!==""&&this._readableState.buffer.push(xe),this._readableState.length=xe.length,this};var k=1073741824;function v(le){return le>=k?le=k:(le--,le|=le>>>1,le|=le>>>2,le|=le>>>4,le|=le>>>8,le|=le>>>16,le++),le}function S(le,te){return le<=0||te.length===0&&te.ended?0:te.objectMode?1:le!==le?te.flowing&&te.length?te.buffer.head.data.length:te.length:(le>te.highWaterMark&&(te.highWaterMark=v(le)),le<=te.length?le:te.ended?te.length:(te.needReadable=!0,0))}W.prototype.read=function(le){u("read",le),le=parseInt(le,10);var te=this._readableState,pe=le;if(le!==0&&(te.emittedReadable=!1),le===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return u("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?G(this):R(this),null;if(le=S(le,te),le===0&&te.ended)return te.length===0&&G(this),null;var xe=te.needReadable;u("need readable",xe),(te.length===0||te.length-le<te.highWaterMark)&&(xe=!0,u("length less than watermark",xe)),te.ended||te.reading?(xe=!1,u("reading or ended",xe)):xe&&(u("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(le=S(pe,te)));var be;return le>0?be=U(le,te):be=null,be===null?(te.needReadable=te.length<=te.highWaterMark,le=0):(te.length-=le,te.awaitDrain=0),te.length===0&&(te.ended||(te.needReadable=!0),pe!==le&&te.ended&&G(this)),be!==null&&this.emit("data",be),be};function N(le,te){if(u("onEofChunk"),!te.ended){if(te.decoder){var pe=te.decoder.end();pe&&pe.length&&(te.buffer.push(pe),te.length+=te.objectMode?1:pe.length)}te.ended=!0,te.sync?R(le):(te.needReadable=!1,te.emittedReadable||(te.emittedReadable=!0,T(le)))}}function R(le){var te=le._readableState;u("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(u("emitReadable",te.flowing),te.emittedReadable=!0,process$1.nextTick(T,le))}function T(le){var te=le._readableState;u("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&(te.length||te.ended)&&(le.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,J(le)}function M(le,te){te.readingMore||(te.readingMore=!0,process$1.nextTick(I,le,te))}function I(le,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){var pe=te.length;if(u("maybeReadMore read 0"),le.read(0),pe===te.length)break}te.readingMore=!1}W.prototype._read=function(le){q(this,new C("_read()"))},W.prototype.pipe=function(le,te){var pe=this,xe=this._readableState;switch(xe.pipesCount){case 0:xe.pipes=le;break;case 1:xe.pipes=[xe.pipes,le];break;default:xe.pipes.push(le);break}xe.pipesCount+=1,u("pipe count=%d opts=%j",xe.pipesCount,te);var be=(!te||te.end!==!1)&&le!==process$1.stdout&&le!==process$1.stderr,ce=be?ie:Fe;xe.endEmitted?process$1.nextTick(ce):pe.once("end",ce),le.on("unpipe",re);function re(Te,Be){u("onunpipe"),Te===pe&&Be&&Be.hasUnpiped===!1&&(Be.hasUnpiped=!0,we())}function ie(){u("onend"),le.end()}var fe=$(pe);le.on("drain",fe);var ye=!1;function we(){u("cleanup"),le.removeListener("close",ke),le.removeListener("finish",Le),le.removeListener("drain",fe),le.removeListener("error",Me),le.removeListener("unpipe",re),pe.removeListener("end",ie),pe.removeListener("end",Fe),pe.removeListener("data",Re),ye=!0,xe.awaitDrain&&(!le._writableState||le._writableState.needDrain)&&fe()}pe.on("data",Re);function Re(Te){u("ondata");var Be=le.write(Te);u("dest.write",Be),Be===!1&&((xe.pipesCount===1&&xe.pipes===le||xe.pipesCount>1&&he(xe.pipes,le)!==-1)&&!ye&&(u("false write response, pause",xe.awaitDrain),xe.awaitDrain++),pe.pause())}function Me(Te){u("onerror",Te),Fe(),le.removeListener("error",Me),e(le,"error")===0&&q(le,Te)}ee(le,"error",Me);function ke(){le.removeListener("finish",Le),Fe()}le.once("close",ke);function Le(){u("onfinish"),le.removeListener("close",ke),Fe()}le.once("finish",Le);function Fe(){u("unpipe"),pe.unpipe(le)}return le.emit("pipe",pe),xe.flowing||(u("pipe resume"),pe.resume()),le};function $(le){return function(){var pe=le._readableState;u("pipeOnDrain",pe.awaitDrain),pe.awaitDrain&&pe.awaitDrain--,pe.awaitDrain===0&&e(le,"data")&&(pe.flowing=!0,J(le))}}W.prototype.unpipe=function(le){var te=this._readableState,pe={hasUnpiped:!1};if(te.pipesCount===0)return this;if(te.pipesCount===1)return le&&le!==te.pipes?this:(le||(le=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,le&&le.emit("unpipe",this,pe),this);if(!le){var xe=te.pipes,be=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var ce=0;ce<be;ce++)xe[ce].emit("unpipe",this,{hasUnpiped:!1});return this}var re=he(te.pipes,le);return re===-1?this:(te.pipes.splice(re,1),te.pipesCount-=1,te.pipesCount===1&&(te.pipes=te.pipes[0]),le.emit("unpipe",this,pe),this)},W.prototype.on=function(le,te){var pe=s.prototype.on.call(this,le,te),xe=this._readableState;return le==="data"?(xe.readableListening=this.listenerCount("readable")>0,xe.flowing!==!1&&this.resume()):le==="readable"&&!xe.endEmitted&&!xe.readableListening&&(xe.readableListening=xe.needReadable=!0,xe.flowing=!1,xe.emittedReadable=!1,u("on readable",xe.length,xe.reading),xe.length?R(this):xe.reading||process$1.nextTick(L,this)),pe},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(le,te){var pe=s.prototype.removeListener.call(this,le,te);return le==="readable"&&process$1.nextTick(A,this),pe},W.prototype.removeAllListeners=function(le){var te=s.prototype.removeAllListeners.apply(this,arguments);return(le==="readable"||le===void 0)&&process$1.nextTick(A,this),te};function A(le){var te=le._readableState;te.readableListening=le.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:le.listenerCount("data")>0&&le.resume()}function L(le){u("readable nexttick read 0"),le.read(0)}W.prototype.resume=function(){var le=this._readableState;return le.flowing||(u("resume"),le.flowing=!le.readableListening,Y(this,le)),le.paused=!1,this};function Y(le,te){te.resumeScheduled||(te.resumeScheduled=!0,process$1.nextTick(oe,le,te))}function oe(le,te){u("resume",te.reading),te.reading||le.read(0),te.resumeScheduled=!1,le.emit("resume"),J(le),te.flowing&&!te.reading&&le.read(0)}W.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function J(le){var te=le._readableState;for(u("flow",te.flowing);te.flowing&&le.read()!==null;);}W.prototype.wrap=function(le){var te=this,pe=this._readableState,xe=!1;le.on("end",function(){if(u("wrapped end"),pe.decoder&&!pe.ended){var re=pe.decoder.end();re&&re.length&&te.push(re)}te.push(null)}),le.on("data",function(re){if(u("wrapped data"),pe.decoder&&(re=pe.decoder.write(re)),!(pe.objectMode&&re==null)&&!(!pe.objectMode&&(!re||!re.length))){var ie=te.push(re);ie||(xe=!0,le.pause())}});for(var be in le)this[be]===void 0&&typeof le[be]=="function"&&(this[be]=(function(ie){return function(){return le[ie].apply(le,arguments)}})(be));for(var ce=0;ce<V.length;ce++)le.on(V[ce],this.emit.bind(this,V[ce]));return this._read=function(re){u("wrapped _read",re),xe&&(xe=!1,le.resume())},this},typeof Symbol=="function"&&(W.prototype[Symbol.asyncIterator]=function(){return D===void 0&&(D=requireAsync_iterator()),D(this)}),Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(W.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(W.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),W._fromList=U,Object.defineProperty(W.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function U(le,te){if(te.length===0)return null;var pe;return te.objectMode?pe=te.buffer.shift():!le||le>=te.length?(te.decoder?pe=te.buffer.join(""):te.buffer.length===1?pe=te.buffer.first():pe=te.buffer.concat(te.length),te.buffer.clear()):pe=te.buffer.consume(le,te.decoder),pe}function G(le){var te=le._readableState;u("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,process$1.nextTick(ae,te,le))}function ae(le,te){if(u("endReadableNT",le.endEmitted,le.length),!le.endEmitted&&le.length===0&&(le.endEmitted=!0,te.readable=!1,te.emit("end"),le.autoDestroy)){var pe=te._writableState;(!pe||pe.autoDestroy&&pe.finished)&&te.destroy()}}typeof Symbol=="function"&&(W.from=function(le,te){return F===void 0&&(F=requireFromBrowser()),F(W,le,te)});function he(le,te){for(var pe=0,xe=le.length;pe<xe;pe++)if(le[pe]===te)return pe;return-1}return _stream_readable$2}var _stream_transform$2,hasRequired_stream_transform$2;function require_stream_transform$2(){if(hasRequired_stream_transform$2)return _stream_transform$2;hasRequired_stream_transform$2=1,_stream_transform$2=c;var t=requireErrorsBrowser().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,s=t.ERR_MULTIPLE_CALLBACK,r=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=t.ERR_TRANSFORM_WITH_LENGTH_0,o=require_stream_duplex$2();requireInherits_browser()(c,o);function l(d,p){var m=this._transformState;m.transforming=!1;var y=m.writecb;if(y===null)return this.emit("error",new s);m.writechunk=null,m.writecb=null,p!=null&&this.push(p),y(d);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function c(d){if(!(this instanceof c))return new c(d);o.call(this,d),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",u)}function u(){var d=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(p,m){f(d,p,m)}):f(this,null,null)}c.prototype.push=function(d,p){return this._transformState.needTransform=!1,o.prototype.push.call(this,d,p)},c.prototype._transform=function(d,p,m){m(new e("_transform()"))},c.prototype._write=function(d,p,m){var y=this._transformState;if(y.writecb=m,y.writechunk=d,y.writeencoding=p,!y.transforming){var b=this._readableState;(y.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},c.prototype._read=function(d){var p=this._transformState;p.writechunk!==null&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},c.prototype._destroy=function(d,p){o.prototype._destroy.call(this,d,function(m){p(m)})};function f(d,p,m){if(p)return d.emit("error",p);if(m!=null&&d.push(m),d._writableState.length)throw new a;if(d._transformState.transforming)throw new r;return d.push(null)}return _stream_transform$2}var _stream_passthrough$2,hasRequired_stream_passthrough$2;function require_stream_passthrough$2(){if(hasRequired_stream_passthrough$2)return _stream_passthrough$2;hasRequired_stream_passthrough$2=1,_stream_passthrough$2=e;var t=require_stream_transform$2();requireInherits_browser()(e,t);function e(s){if(!(this instanceof e))return new e(s);t.call(this,s)}return e.prototype._transform=function(s,r,a){a(null,s)},_stream_passthrough$2}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function e(m){var y=!1;return function(){y||(y=!0,m.apply(void 0,arguments))}}var s=requireErrorsBrowser().codes,r=s.ERR_MISSING_ARGS,a=s.ERR_STREAM_DESTROYED;function o(m){if(m)throw m}function l(m){return m.setHeader&&typeof m.abort=="function"}function c(m,y,b,E){E=e(E);var C=!1;m.on("close",function(){C=!0}),t===void 0&&(t=requireEndOfStream()),t(m,{readable:y,writable:b},function(B){if(B)return E(B);C=!0,E()});var j=!1;return function(B){if(!C&&!j){if(j=!0,l(m))return m.abort();if(typeof m.destroy=="function")return m.destroy();E(B||new a("pipe"))}}}function u(m){m()}function f(m,y){return m.pipe(y)}function d(m){return!m.length||typeof m[m.length-1]!="function"?o:m.pop()}function p(){for(var m=arguments.length,y=new Array(m),b=0;b<m;b++)y[b]=arguments[b];var E=d(y);if(Array.isArray(y[0])&&(y=y[0]),y.length<2)throw new r("streams");var C,j=y.map(function(B,D){var F=D<y.length-1,q=D>0;return c(B,F,q,function(V){C||(C=V),V&&j.forEach(u),!F&&(j.forEach(u),E(C))})});return y.reduce(f)}return pipeline_1=p,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=s;var t=requireEvents().EventEmitter,e=requireInherits_browser();e(s,t),s.Readable=require_stream_readable$2(),s.Writable=require_stream_writable$2(),s.Duplex=require_stream_duplex$2(),s.Transform=require_stream_transform$2(),s.PassThrough=require_stream_passthrough$2(),s.finished=requireEndOfStream(),s.pipeline=requirePipeline(),s.Stream=s;function s(){t.call(this)}return s.prototype.pipe=function(r,a){var o=this;function l(y){r.writable&&r.write(y)===!1&&o.pause&&o.pause()}o.on("data",l);function c(){o.readable&&o.resume&&o.resume()}r.on("drain",c),!r._isStdio&&(!a||a.end!==!1)&&(o.on("end",f),o.on("close",d));var u=!1;function f(){u||(u=!0,r.end())}function d(){u||(u=!0,typeof r.destroy=="function"&&r.destroy())}function p(y){if(m(),t.listenerCount(this,"error")===0)throw y}o.on("error",p),r.on("error",p);function m(){o.removeListener("data",l),r.removeListener("drain",c),o.removeListener("end",f),o.removeListener("close",d),o.removeListener("error",p),r.removeListener("error",p),o.removeListener("end",m),o.removeListener("close",m),r.removeListener("close",m)}return o.on("end",m),o.on("close",m),r.on("close",m),r.emit("pipe",o),r},streamBrowserify}var hashBase$1,hasRequiredHashBase$1;function requireHashBase$1(){if(hasRequiredHashBase$1)return hashBase$1;hasRequiredHashBase$1=1;var t=requireSafeBuffer$2().Buffer,e=requireStreamBrowserify().Transform,s=requireInherits_browser();function r(c){e.call(this),this._block=t.allocUnsafe(c),this._blockSize=c,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}s(r,e),r.prototype._transform=function(c,u,f){var d=null;try{this.update(c,u)}catch(p){d=p}f(d)},r.prototype._flush=function(c){var u=null;try{this.push(this.digest())}catch(f){u=f}c(u)};var a=typeof Uint8Array<"u",o=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(t.prototype instanceof Uint8Array||t.TYPED_ARRAY_SUPPORT);function l(c,u){if(c instanceof t)return c;if(typeof c=="string")return t.from(c,u);if(o&&ArrayBuffer.isView(c)){if(c.byteLength===0)return t.alloc(0);var f=t.from(c.buffer,c.byteOffset,c.byteLength);if(f.byteLength===c.byteLength)return f}if(a&&c instanceof Uint8Array||t.isBuffer(c)&&c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return t.from(c);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return r.prototype.update=function(c,u){if(this._finalized)throw new Error("Digest already called");c=l(c,u);for(var f=this._block,d=0;this._blockOffset+c.length-d>=this._blockSize;){for(var p=this._blockOffset;p<this._blockSize;)f[p++]=c[d++];this._update(),this._blockOffset=0}for(;d<c.length;)f[this._blockOffset++]=c[d++];for(var m=0,y=c.length*8;y>0;++m)this._length[m]+=y,y=this._length[m]/4294967296|0,y>0&&(this._length[m]-=4294967296*y);return this},r.prototype._update=function(){throw new Error("_update is not implemented")},r.prototype.digest=function(c){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var u=this._digest();c!==void 0&&(u=u.toString(c)),this._block.fill(0),this._blockOffset=0;for(var f=0;f<4;++f)this._length[f]=0;return u},r.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase$1=r,hashBase$1}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var t=requireInherits_browser(),e=requireHashBase$1(),s=requireSafeBuffer$2().Buffer,r=new Array(16);function a(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}t(a,e),a.prototype._update=function(){for(var d=r,p=0;p<16;++p)d[p]=this._block.readInt32LE(p*4);var m=this._a,y=this._b,b=this._c,E=this._d;m=l(m,y,b,E,d[0],3614090360,7),E=l(E,m,y,b,d[1],3905402710,12),b=l(b,E,m,y,d[2],606105819,17),y=l(y,b,E,m,d[3],3250441966,22),m=l(m,y,b,E,d[4],4118548399,7),E=l(E,m,y,b,d[5],1200080426,12),b=l(b,E,m,y,d[6],2821735955,17),y=l(y,b,E,m,d[7],4249261313,22),m=l(m,y,b,E,d[8],1770035416,7),E=l(E,m,y,b,d[9],2336552879,12),b=l(b,E,m,y,d[10],4294925233,17),y=l(y,b,E,m,d[11],2304563134,22),m=l(m,y,b,E,d[12],1804603682,7),E=l(E,m,y,b,d[13],4254626195,12),b=l(b,E,m,y,d[14],2792965006,17),y=l(y,b,E,m,d[15],1236535329,22),m=c(m,y,b,E,d[1],4129170786,5),E=c(E,m,y,b,d[6],3225465664,9),b=c(b,E,m,y,d[11],643717713,14),y=c(y,b,E,m,d[0],3921069994,20),m=c(m,y,b,E,d[5],3593408605,5),E=c(E,m,y,b,d[10],38016083,9),b=c(b,E,m,y,d[15],3634488961,14),y=c(y,b,E,m,d[4],3889429448,20),m=c(m,y,b,E,d[9],568446438,5),E=c(E,m,y,b,d[14],3275163606,9),b=c(b,E,m,y,d[3],4107603335,14),y=c(y,b,E,m,d[8],1163531501,20),m=c(m,y,b,E,d[13],2850285829,5),E=c(E,m,y,b,d[2],4243563512,9),b=c(b,E,m,y,d[7],1735328473,14),y=c(y,b,E,m,d[12],2368359562,20),m=u(m,y,b,E,d[5],4294588738,4),E=u(E,m,y,b,d[8],2272392833,11),b=u(b,E,m,y,d[11],1839030562,16),y=u(y,b,E,m,d[14],4259657740,23),m=u(m,y,b,E,d[1],2763975236,4),E=u(E,m,y,b,d[4],1272893353,11),b=u(b,E,m,y,d[7],4139469664,16),y=u(y,b,E,m,d[10],3200236656,23),m=u(m,y,b,E,d[13],681279174,4),E=u(E,m,y,b,d[0],3936430074,11),b=u(b,E,m,y,d[3],3572445317,16),y=u(y,b,E,m,d[6],76029189,23),m=u(m,y,b,E,d[9],3654602809,4),E=u(E,m,y,b,d[12],3873151461,11),b=u(b,E,m,y,d[15],530742520,16),y=u(y,b,E,m,d[2],3299628645,23),m=f(m,y,b,E,d[0],4096336452,6),E=f(E,m,y,b,d[7],1126891415,10),b=f(b,E,m,y,d[14],2878612391,15),y=f(y,b,E,m,d[5],4237533241,21),m=f(m,y,b,E,d[12],1700485571,6),E=f(E,m,y,b,d[3],2399980690,10),b=f(b,E,m,y,d[10],4293915773,15),y=f(y,b,E,m,d[1],2240044497,21),m=f(m,y,b,E,d[8],1873313359,6),E=f(E,m,y,b,d[15],4264355552,10),b=f(b,E,m,y,d[6],2734768916,15),y=f(y,b,E,m,d[13],1309151649,21),m=f(m,y,b,E,d[4],4149444226,6),E=f(E,m,y,b,d[11],3174756917,10),b=f(b,E,m,y,d[2],718787259,15),y=f(y,b,E,m,d[9],3951481745,21),this._a=this._a+m|0,this._b=this._b+y|0,this._c=this._c+b|0,this._d=this._d+E|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var d=s.allocUnsafe(16);return d.writeInt32LE(this._a,0),d.writeInt32LE(this._b,4),d.writeInt32LE(this._c,8),d.writeInt32LE(this._d,12),d};function o(d,p){return d<<p|d>>>32-p}function l(d,p,m,y,b,E,C){return o(d+(p&m|~p&y)+b+E|0,C)+p|0}function c(d,p,m,y,b,E,C){return o(d+(p&y|m&~y)+b+E|0,C)+p|0}function u(d,p,m,y,b,E,C){return o(d+(p^m^y)+b+E|0,C)+p|0}function f(d,p,m,y,b,E,C){return o(d+(m^(p|~y))+b+E|0,C)+p|0}return md5_js=a,md5_js}var isarray$2,hasRequiredIsarray$2;function requireIsarray$2(){if(hasRequiredIsarray$2)return isarray$2;hasRequiredIsarray$2=1;var t={}.toString;return isarray$2=Array.isArray||function(e){return t.call(e)=="[object Array]"},isarray$2}var typedArrayBuffer,hasRequiredTypedArrayBuffer;function requireTypedArrayBuffer(){if(hasRequiredTypedArrayBuffer)return typedArrayBuffer;hasRequiredTypedArrayBuffer=1;var t=requireType(),e=requireCallBound(),s=e("TypedArray.prototype.buffer",!0),r=requireIsTypedArray();return typedArrayBuffer=s||function(o){if(!r(o))throw new t("Not a Typed Array");return o.buffer},typedArrayBuffer}var toBuffer,hasRequiredToBuffer$2;function requireToBuffer$2(){if(hasRequiredToBuffer$2)return toBuffer;hasRequiredToBuffer$2=1;var t=requireSafeBuffer$2().Buffer,e=requireIsarray$2(),s=requireTypedArrayBuffer(),r=ArrayBuffer.isView||function(u){try{return s(u),!0}catch{return!1}},a=typeof Uint8Array<"u",o=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l=o&&(t.prototype instanceof Uint8Array||t.TYPED_ARRAY_SUPPORT);return toBuffer=function(u,f){if(t.isBuffer(u))return u.constructor&&!("isBuffer"in u)?t.from(u):u;if(typeof u=="string")return t.from(u,f);if(o&&r(u)){if(u.byteLength===0)return t.alloc(0);if(l){var d=t.from(u.buffer,u.byteOffset,u.byteLength);if(d.byteLength===u.byteLength)return d}var p=u instanceof Uint8Array?u:new Uint8Array(u.buffer,u.byteOffset,u.byteLength),m=t.from(p);if(m.length===u.byteLength)return m}if(a&&u instanceof Uint8Array)return t.from(u);var y=e(u);if(y)for(var b=0;b<u.length;b+=1){var E=u[b];if(typeof E!="number"||E<0||E>255||~~E!==E)throw new RangeError("Array items must be numbers in the range 0-255.")}if(y||t.isBuffer(u)&&u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u))return t.from(u);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},toBuffer}var toBuffer_1$1,hasRequiredToBuffer$1;function requireToBuffer$1(){if(hasRequiredToBuffer$1)return toBuffer_1$1;hasRequiredToBuffer$1=1;var t=requireSafeBuffer$2().Buffer,e=requireToBuffer$2(),s=typeof Uint8Array<"u",r=s&&typeof ArrayBuffer<"u",a=r&&ArrayBuffer.isView;return toBuffer_1$1=function(o,l){if(typeof o=="string"||t.isBuffer(o)||s&&o instanceof Uint8Array||a&&a(o))return e(o,l);throw new TypeError('The "data" argument must be a string, a Buffer, a Uint8Array, or a DataView')},toBuffer_1$1}var readableBrowser$1={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:t}:processNextickArgs.exports=process$1;function t(e,s,r,a){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,l,c;switch(o){case 0:case 1:return process$1.nextTick(e);case 2:return process$1.nextTick(function(){e.call(null,s)});case 3:return process$1.nextTick(function(){e.call(null,s,r)});case 4:return process$1.nextTick(function(){e.call(null,s,r,a)});default:for(l=new Array(o-1),c=0;c<l.length;)l[c++]=arguments[c];return process$1.nextTick(function(){e.apply(null,l)})}}return processNextickArgs.exports}var isarray$1,hasRequiredIsarray$1;function requireIsarray$1(){if(hasRequiredIsarray$1)return isarray$1;hasRequiredIsarray$1=1;var t={}.toString;return isarray$1=Array.isArray||function(e){return t.call(e)=="[object Array]"},isarray$1}var streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var safeBuffer$1={exports:{}},hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,(function(t,e){var s=requireBuffer$1(),r=s.Buffer;function a(l,c){for(var u in l)c[u]=l[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=s:(a(s,e),e.Buffer=o);function o(l,c,u){return r(l,c,u)}a(r,o),o.from=function(l,c,u){if(typeof l=="number")throw new TypeError("Argument must not be a number");return r(l,c,u)},o.alloc=function(l,c,u){if(typeof l!="number")throw new TypeError("Argument must be a number");var f=r(l);return c!==void 0?typeof u=="string"?f.fill(c,u):f.fill(c):f.fill(0),f},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(l)}})(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;function t(E){return Array.isArray?Array.isArray(E):b(E)==="[object Array]"}util.isArray=t;function e(E){return typeof E=="boolean"}util.isBoolean=e;function s(E){return E===null}util.isNull=s;function r(E){return E==null}util.isNullOrUndefined=r;function a(E){return typeof E=="number"}util.isNumber=a;function o(E){return typeof E=="string"}util.isString=o;function l(E){return typeof E=="symbol"}util.isSymbol=l;function c(E){return E===void 0}util.isUndefined=c;function u(E){return b(E)==="[object RegExp]"}util.isRegExp=u;function f(E){return typeof E=="object"&&E!==null}util.isObject=f;function d(E){return b(E)==="[object Date]"}util.isDate=d;function p(E){return b(E)==="[object Error]"||E instanceof Error}util.isError=p;function m(E){return typeof E=="function"}util.isFunction=m;function y(E){return E===null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||typeof E=="symbol"||typeof E>"u"}util.isPrimitive=y,util.isBuffer=requireBuffer$1().Buffer.isBuffer;function b(E){return Object.prototype.toString.call(E)}return util}var BufferList$1={exports:{}},hasRequiredBufferList$1;function requireBufferList$1(){return hasRequiredBufferList$1||(hasRequiredBufferList$1=1,(function(t){function e(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}var s=requireSafeBuffer$1().Buffer,r=requireUtil$1();function a(o,l,c){o.copy(l,c)}t.exports=(function(){function o(){e(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(c){var u={data:c,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length},o.prototype.unshift=function(c){var u={data:c,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length},o.prototype.shift=function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(c){if(this.length===0)return"";for(var u=this.head,f=""+u.data;u=u.next;)f+=c+u.data;return f},o.prototype.concat=function(c){if(this.length===0)return s.alloc(0);for(var u=s.allocUnsafe(c>>>0),f=this.head,d=0;f;)a(f.data,u,d),d+=f.data.length,f=f.next;return u},o})(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var o=r.inspect({length:this.length});return this.constructor.name+" "+o})})(BufferList$1)),BufferList$1.exports}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;var t=requireProcessNextickArgs();function e(a,o){var l=this,c=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return c||u?(o?o(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(r,this,a)):t.nextTick(r,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(f){!o&&f?l._writableState?l._writableState.errorEmitted||(l._writableState.errorEmitted=!0,t.nextTick(r,l,f)):t.nextTick(r,l,f):o&&o(f)}),this)}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function r(a,o){a.emit("error",o)}return destroy_1$1={destroy:e,undestroy:s},destroy_1$1}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1;var t=requireProcessNextickArgs();_stream_writable$1=E;function e(R){var T=this;this.next=null,this.entry=null,this.finish=function(){N(T,R)}}var s=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:t.nextTick,r;E.WritableState=y;var a=Object.create(requireUtil());a.inherits=requireInherits_browser();var o={deprecate:requireBrowser$a()},l=requireStreamBrowser$1(),c=requireSafeBuffer$1().Buffer,u=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(R){return c.from(R)}function d(R){return c.isBuffer(R)||R instanceof u}var p=requireDestroy$1();a.inherits(E,l);function m(){}function y(R,T){r=r||require_stream_duplex$1(),R=R||{};var M=T instanceof r;this.objectMode=!!R.objectMode,M&&(this.objectMode=this.objectMode||!!R.writableObjectMode);var I=R.highWaterMark,$=R.writableHighWaterMark,A=this.objectMode?16:16*1024;I||I===0?this.highWaterMark=I:M&&($||$===0)?this.highWaterMark=$:this.highWaterMark=A,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=R.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){ee(T,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}y.prototype.getBuffer=function(){for(var T=this.bufferedRequest,M=[];T;)M.push(T),T=T.next;return M},(function(){try{Object.defineProperty(y.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var b;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(R){return b.call(this,R)?!0:this!==E?!1:R&&R._writableState instanceof y}})):b=function(R){return R instanceof this};function E(R){if(r=r||require_stream_duplex$1(),!b.call(E,this)&&!(this instanceof r))return new E(R);this._writableState=new y(R,this),this.writable=!0,R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final)),l.call(this)}E.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function C(R,T){var M=new Error("write after end");R.emit("error",M),t.nextTick(T,M)}function j(R,T,M,I){var $=!0,A=!1;return M===null?A=new TypeError("May not write null values to stream"):typeof M!="string"&&M!==void 0&&!T.objectMode&&(A=new TypeError("Invalid non-string/buffer chunk")),A&&(R.emit("error",A),t.nextTick(I,A),$=!1),$}E.prototype.write=function(R,T,M){var I=this._writableState,$=!1,A=!I.objectMode&&d(R);return A&&!c.isBuffer(R)&&(R=f(R)),typeof T=="function"&&(M=T,T=null),A?T="buffer":T||(T=I.defaultEncoding),typeof M!="function"&&(M=m),I.ended?C(this,M):(A||j(this,I,R,M))&&(I.pendingcb++,$=D(this,I,A,R,T,M)),$},E.prototype.cork=function(){var R=this._writableState;R.corked++},E.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,!R.writing&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&Z(this,R))},E.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+T);return this._writableState.defaultEncoding=T,this};function B(R,T,M){return!R.objectMode&&R.decodeStrings!==!1&&typeof T=="string"&&(T=c.from(T,M)),T}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function D(R,T,M,I,$,A){if(!M){var L=B(T,I,$);I!==L&&(M=!0,$="buffer",I=L)}var Y=T.objectMode?1:I.length;T.length+=Y;var oe=T.length<T.highWaterMark;if(oe||(T.needDrain=!0),T.writing||T.corked){var J=T.lastBufferedRequest;T.lastBufferedRequest={chunk:I,encoding:$,isBuf:M,callback:A,next:null},J?J.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else F(R,T,!1,Y,I,$,A);return oe}function F(R,T,M,I,$,A,L){T.writelen=I,T.writecb=L,T.writing=!0,T.sync=!0,M?R._writev($,T.onwrite):R._write($,A,T.onwrite),T.sync=!1}function q(R,T,M,I,$){--T.pendingcb,M?(t.nextTick($,I),t.nextTick(v,R,T),R._writableState.errorEmitted=!0,R.emit("error",I)):($(I),R._writableState.errorEmitted=!0,R.emit("error",I),v(R,T))}function V(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}function ee(R,T){var M=R._writableState,I=M.sync,$=M.writecb;if(V(M),T)q(R,M,I,T,$);else{var A=z(M);!A&&!M.corked&&!M.bufferProcessing&&M.bufferedRequest&&Z(R,M),I?s(Q,R,M,A,$):Q(R,M,A,$)}}function Q(R,T,M,I){M||W(R,T),T.pendingcb--,I(),v(R,T)}function W(R,T){T.length===0&&T.needDrain&&(T.needDrain=!1,R.emit("drain"))}function Z(R,T){T.bufferProcessing=!0;var M=T.bufferedRequest;if(R._writev&&M&&M.next){var I=T.bufferedRequestCount,$=new Array(I),A=T.corkedRequestsFree;A.entry=M;for(var L=0,Y=!0;M;)$[L]=M,M.isBuf||(Y=!1),M=M.next,L+=1;$.allBuffers=Y,F(R,T,!0,T.length,$,"",A.finish),T.pendingcb++,T.lastBufferedRequest=null,A.next?(T.corkedRequestsFree=A.next,A.next=null):T.corkedRequestsFree=new e(T),T.bufferedRequestCount=0}else{for(;M;){var oe=M.chunk,J=M.encoding,U=M.callback,G=T.objectMode?1:oe.length;if(F(R,T,!1,G,oe,J,U),M=M.next,T.bufferedRequestCount--,T.writing)break}M===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=M,T.bufferProcessing=!1}E.prototype._write=function(R,T,M){M(new Error("_write() is not implemented"))},E.prototype._writev=null,E.prototype.end=function(R,T,M){var I=this._writableState;typeof R=="function"?(M=R,R=null,T=null):typeof T=="function"&&(M=T,T=null),R!=null&&this.write(R,T),I.corked&&(I.corked=1,this.uncork()),I.ending||S(this,I,M)};function z(R){return R.ending&&R.length===0&&R.bufferedRequest===null&&!R.finished&&!R.writing}function O(R,T){R._final(function(M){T.pendingcb--,M&&R.emit("error",M),T.prefinished=!0,R.emit("prefinish"),v(R,T)})}function k(R,T){!T.prefinished&&!T.finalCalled&&(typeof R._final=="function"?(T.pendingcb++,T.finalCalled=!0,t.nextTick(O,R,T)):(T.prefinished=!0,R.emit("prefinish")))}function v(R,T){var M=z(T);return M&&(k(R,T),T.pendingcb===0&&(T.finished=!0,R.emit("finish"))),M}function S(R,T,M){T.ending=!0,v(R,T),M&&(T.finished?t.nextTick(M):R.once("finish",M)),T.ended=!0,R.writable=!1}function N(R,T,M){var I=R.entry;for(R.entry=null;I;){var $=I.callback;T.pendingcb--,$(M),I=I.next}T.corkedRequestsFree.next=R}return Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(R,T){this.end(),T(R)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var t=requireProcessNextickArgs(),e=Object.keys||function(p){var m=[];for(var y in p)m.push(y);return m};_stream_duplex$1=u;var s=Object.create(requireUtil());s.inherits=requireInherits_browser();var r=require_stream_readable$1(),a=require_stream_writable$1();s.inherits(u,r);for(var o=e(a.prototype),l=0;l<o.length;l++){var c=o[l];u.prototype[c]||(u.prototype[c]=a.prototype[c])}function u(p){if(!(this instanceof u))return new u(p);r.call(this,p),a.call(this,p),p&&p.readable===!1&&(this.readable=!1),p&&p.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,p&&p.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",f)}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function f(){this.allowHalfOpen||this._writableState.ended||t.nextTick(d,this)}function d(p){p.end()}return Object.defineProperty(u.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),u.prototype._destroy=function(p,m){this.push(null),this.end(),t.nextTick(m,p)},_stream_duplex$1}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1;var t=requireProcessNextickArgs();_stream_readable$1=B;var e=requireIsarray$1(),s;B.ReadableState=j,requireEvents().EventEmitter;var r=function(U,G){return U.listeners(G).length},a=requireStreamBrowser$1(),o=requireSafeBuffer$1().Buffer,l=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(U){return o.from(U)}function u(U){return o.isBuffer(U)||U instanceof l}var f=Object.create(requireUtil());f.inherits=requireInherits_browser();var d=requireUtil$1(),p=void 0;d&&d.debuglog?p=d.debuglog("stream"):p=function(){};var m=requireBufferList$1(),y=requireDestroy$1(),b;f.inherits(B,a);var E=["error","close","destroy","pause","resume"];function C(U,G,ae){if(typeof U.prependListener=="function")return U.prependListener(G,ae);!U._events||!U._events[G]?U.on(G,ae):e(U._events[G])?U._events[G].unshift(ae):U._events[G]=[ae,U._events[G]]}function j(U,G){s=s||require_stream_duplex$1(),U=U||{};var ae=G instanceof s;this.objectMode=!!U.objectMode,ae&&(this.objectMode=this.objectMode||!!U.readableObjectMode);var he=U.highWaterMark,le=U.readableHighWaterMark,te=this.objectMode?16:16*1024;he||he===0?this.highWaterMark=he:ae&&(le||le===0)?this.highWaterMark=le:this.highWaterMark=te,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(b||(b=requireString_decoder().StringDecoder),this.decoder=new b(U.encoding),this.encoding=U.encoding)}function B(U){if(s=s||require_stream_duplex$1(),!(this instanceof B))return new B(U);this._readableState=new j(U,this),this.readable=!0,U&&(typeof U.read=="function"&&(this._read=U.read),typeof U.destroy=="function"&&(this._destroy=U.destroy)),a.call(this)}Object.defineProperty(B.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(U){this._readableState&&(this._readableState.destroyed=U)}}),B.prototype.destroy=y.destroy,B.prototype._undestroy=y.undestroy,B.prototype._destroy=function(U,G){this.push(null),G(U)},B.prototype.push=function(U,G){var ae=this._readableState,he;return ae.objectMode?he=!0:typeof U=="string"&&(G=G||ae.defaultEncoding,G!==ae.encoding&&(U=o.from(U,G),G=""),he=!0),D(this,U,G,!1,he)},B.prototype.unshift=function(U){return D(this,U,null,!0,!1)};function D(U,G,ae,he,le){var te=U._readableState;if(G===null)te.reading=!1,Z(U,te);else{var pe;le||(pe=q(te,G)),pe?U.emit("error",pe):te.objectMode||G&&G.length>0?(typeof G!="string"&&!te.objectMode&&Object.getPrototypeOf(G)!==o.prototype&&(G=c(G)),he?te.endEmitted?U.emit("error",new Error("stream.unshift() after end event")):F(U,te,G,!0):te.ended?U.emit("error",new Error("stream.push() after EOF")):(te.reading=!1,te.decoder&&!ae?(G=te.decoder.write(G),te.objectMode||G.length!==0?F(U,te,G,!1):k(U,te)):F(U,te,G,!1))):he||(te.reading=!1)}return V(te)}function F(U,G,ae,he){G.flowing&&G.length===0&&!G.sync?(U.emit("data",ae),U.read(0)):(G.length+=G.objectMode?1:ae.length,he?G.buffer.unshift(ae):G.buffer.push(ae),G.needReadable&&z(U)),k(U,G)}function q(U,G){var ae;return!u(G)&&typeof G!="string"&&G!==void 0&&!U.objectMode&&(ae=new TypeError("Invalid non-string/buffer chunk")),ae}function V(U){return!U.ended&&(U.needReadable||U.length<U.highWaterMark||U.length===0)}B.prototype.isPaused=function(){return this._readableState.flowing===!1},B.prototype.setEncoding=function(U){return b||(b=requireString_decoder().StringDecoder),this._readableState.decoder=new b(U),this._readableState.encoding=U,this};var ee=8388608;function Q(U){return U>=ee?U=ee:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}function W(U,G){return U<=0||G.length===0&&G.ended?0:G.objectMode?1:U!==U?G.flowing&&G.length?G.buffer.head.data.length:G.length:(U>G.highWaterMark&&(G.highWaterMark=Q(U)),U<=G.length?U:G.ended?G.length:(G.needReadable=!0,0))}B.prototype.read=function(U){p("read",U),U=parseInt(U,10);var G=this._readableState,ae=U;if(U!==0&&(G.emittedReadable=!1),U===0&&G.needReadable&&(G.length>=G.highWaterMark||G.ended))return p("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?Y(this):z(this),null;if(U=W(U,G),U===0&&G.ended)return G.length===0&&Y(this),null;var he=G.needReadable;p("need readable",he),(G.length===0||G.length-U<G.highWaterMark)&&(he=!0,p("length less than watermark",he)),G.ended||G.reading?(he=!1,p("reading or ended",he)):he&&(p("do read"),G.reading=!0,G.sync=!0,G.length===0&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1,G.reading||(U=W(ae,G)));var le;return U>0?le=I(U,G):le=null,le===null?(G.needReadable=!0,U=0):G.length-=U,G.length===0&&(G.ended||(G.needReadable=!0),ae!==U&&G.ended&&Y(this)),le!==null&&this.emit("data",le),le};function Z(U,G){if(!G.ended){if(G.decoder){var ae=G.decoder.end();ae&&ae.length&&(G.buffer.push(ae),G.length+=G.objectMode?1:ae.length)}G.ended=!0,z(U)}}function z(U){var G=U._readableState;G.needReadable=!1,G.emittedReadable||(p("emitReadable",G.flowing),G.emittedReadable=!0,G.sync?t.nextTick(O,U):O(U))}function O(U){p("emit readable"),U.emit("readable"),M(U)}function k(U,G){G.readingMore||(G.readingMore=!0,t.nextTick(v,U,G))}function v(U,G){for(var ae=G.length;!G.reading&&!G.flowing&&!G.ended&&G.length<G.highWaterMark&&(p("maybeReadMore read 0"),U.read(0),ae!==G.length);)ae=G.length;G.readingMore=!1}B.prototype._read=function(U){this.emit("error",new Error("_read() is not implemented"))},B.prototype.pipe=function(U,G){var ae=this,he=this._readableState;switch(he.pipesCount){case 0:he.pipes=U;break;case 1:he.pipes=[he.pipes,U];break;default:he.pipes.push(U);break}he.pipesCount+=1,p("pipe count=%d opts=%j",he.pipesCount,G);var le=(!G||G.end!==!1)&&U!==process$1.stdout&&U!==process$1.stderr,te=le?xe:Me;he.endEmitted?t.nextTick(te):ae.once("end",te),U.on("unpipe",pe);function pe(ke,Le){p("onunpipe"),ke===ae&&Le&&Le.hasUnpiped===!1&&(Le.hasUnpiped=!0,re())}function xe(){p("onend"),U.end()}var be=S(ae);U.on("drain",be);var ce=!1;function re(){p("cleanup"),U.removeListener("close",we),U.removeListener("finish",Re),U.removeListener("drain",be),U.removeListener("error",ye),U.removeListener("unpipe",pe),ae.removeListener("end",xe),ae.removeListener("end",Me),ae.removeListener("data",fe),ce=!0,he.awaitDrain&&(!U._writableState||U._writableState.needDrain)&&be()}var ie=!1;ae.on("data",fe);function fe(ke){p("ondata"),ie=!1;var Le=U.write(ke);Le===!1&&!ie&&((he.pipesCount===1&&he.pipes===U||he.pipesCount>1&&J(he.pipes,U)!==-1)&&!ce&&(p("false write response, pause",he.awaitDrain),he.awaitDrain++,ie=!0),ae.pause())}function ye(ke){p("onerror",ke),Me(),U.removeListener("error",ye),r(U,"error")===0&&U.emit("error",ke)}C(U,"error",ye);function we(){U.removeListener("finish",Re),Me()}U.once("close",we);function Re(){p("onfinish"),U.removeListener("close",we),Me()}U.once("finish",Re);function Me(){p("unpipe"),ae.unpipe(U)}return U.emit("pipe",ae),he.flowing||(p("pipe resume"),ae.resume()),U};function S(U){return function(){var G=U._readableState;p("pipeOnDrain",G.awaitDrain),G.awaitDrain&&G.awaitDrain--,G.awaitDrain===0&&r(U,"data")&&(G.flowing=!0,M(U))}}B.prototype.unpipe=function(U){var G=this._readableState,ae={hasUnpiped:!1};if(G.pipesCount===0)return this;if(G.pipesCount===1)return U&&U!==G.pipes?this:(U||(U=G.pipes),G.pipes=null,G.pipesCount=0,G.flowing=!1,U&&U.emit("unpipe",this,ae),this);if(!U){var he=G.pipes,le=G.pipesCount;G.pipes=null,G.pipesCount=0,G.flowing=!1;for(var te=0;te<le;te++)he[te].emit("unpipe",this,{hasUnpiped:!1});return this}var pe=J(G.pipes,U);return pe===-1?this:(G.pipes.splice(pe,1),G.pipesCount-=1,G.pipesCount===1&&(G.pipes=G.pipes[0]),U.emit("unpipe",this,ae),this)},B.prototype.on=function(U,G){var ae=a.prototype.on.call(this,U,G);if(U==="data")this._readableState.flowing!==!1&&this.resume();else if(U==="readable"){var he=this._readableState;!he.endEmitted&&!he.readableListening&&(he.readableListening=he.needReadable=!0,he.emittedReadable=!1,he.reading?he.length&&z(this):t.nextTick(N,this))}return ae},B.prototype.addListener=B.prototype.on;function N(U){p("readable nexttick read 0"),U.read(0)}B.prototype.resume=function(){var U=this._readableState;return U.flowing||(p("resume"),U.flowing=!0,R(this,U)),this};function R(U,G){G.resumeScheduled||(G.resumeScheduled=!0,t.nextTick(T,U,G))}function T(U,G){G.reading||(p("resume read 0"),U.read(0)),G.resumeScheduled=!1,G.awaitDrain=0,U.emit("resume"),M(U),G.flowing&&!G.reading&&U.read(0)}B.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function M(U){var G=U._readableState;for(p("flow",G.flowing);G.flowing&&U.read()!==null;);}B.prototype.wrap=function(U){var G=this,ae=this._readableState,he=!1;U.on("end",function(){if(p("wrapped end"),ae.decoder&&!ae.ended){var pe=ae.decoder.end();pe&&pe.length&&G.push(pe)}G.push(null)}),U.on("data",function(pe){if(p("wrapped data"),ae.decoder&&(pe=ae.decoder.write(pe)),!(ae.objectMode&&pe==null)&&!(!ae.objectMode&&(!pe||!pe.length))){var xe=G.push(pe);xe||(he=!0,U.pause())}});for(var le in U)this[le]===void 0&&typeof U[le]=="function"&&(this[le]=(function(pe){return function(){return U[pe].apply(U,arguments)}})(le));for(var te=0;te<E.length;te++)U.on(E[te],this.emit.bind(this,E[te]));return this._read=function(pe){p("wrapped _read",pe),he&&(he=!1,U.resume())},this},Object.defineProperty(B.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),B._fromList=I;function I(U,G){if(G.length===0)return null;var ae;return G.objectMode?ae=G.buffer.shift():!U||U>=G.length?(G.decoder?ae=G.buffer.join(""):G.buffer.length===1?ae=G.buffer.head.data:ae=G.buffer.concat(G.length),G.buffer.clear()):ae=$(U,G.buffer,G.decoder),ae}function $(U,G,ae){var he;return U<G.head.data.length?(he=G.head.data.slice(0,U),G.head.data=G.head.data.slice(U)):U===G.head.data.length?he=G.shift():he=ae?A(U,G):L(U,G),he}function A(U,G){var ae=G.head,he=1,le=ae.data;for(U-=le.length;ae=ae.next;){var te=ae.data,pe=U>te.length?te.length:U;if(pe===te.length?le+=te:le+=te.slice(0,U),U-=pe,U===0){pe===te.length?(++he,ae.next?G.head=ae.next:G.head=G.tail=null):(G.head=ae,ae.data=te.slice(pe));break}++he}return G.length-=he,le}function L(U,G){var ae=o.allocUnsafe(U),he=G.head,le=1;for(he.data.copy(ae),U-=he.data.length;he=he.next;){var te=he.data,pe=U>te.length?te.length:U;if(te.copy(ae,ae.length-U,0,pe),U-=pe,U===0){pe===te.length?(++le,he.next?G.head=he.next:G.head=G.tail=null):(G.head=he,he.data=te.slice(pe));break}++le}return G.length-=le,ae}function Y(U){var G=U._readableState;if(G.length>0)throw new Error('"endReadable()" called on non-empty stream');G.endEmitted||(G.ended=!0,t.nextTick(oe,G,U))}function oe(U,G){!U.endEmitted&&U.length===0&&(U.endEmitted=!0,G.readable=!1,G.emit("end"))}function J(U,G){for(var ae=0,he=U.length;ae<he;ae++)if(U[ae]===G)return ae;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=r;var t=require_stream_duplex$1(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(r,t);function s(l,c){var u=this._transformState;u.transforming=!1;var f=u.writecb;if(!f)return this.emit("error",new Error("write callback called multiple times"));u.writechunk=null,u.writecb=null,c!=null&&this.push(c),f(l);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function r(l){if(!(this instanceof r))return new r(l);t.call(this,l),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",a)}function a(){var l=this;typeof this._flush=="function"?this._flush(function(c,u){o(l,c,u)}):o(this,null,null)}r.prototype.push=function(l,c){return this._transformState.needTransform=!1,t.prototype.push.call(this,l,c)},r.prototype._transform=function(l,c,u){throw new Error("_transform() is not implemented")},r.prototype._write=function(l,c,u){var f=this._transformState;if(f.writecb=u,f.writechunk=l,f.writeencoding=c,!f.transforming){var d=this._readableState;(f.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},r.prototype._read=function(l){var c=this._transformState;c.writechunk!==null&&c.writecb&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0},r.prototype._destroy=function(l,c){var u=this;t.prototype._destroy.call(this,l,function(f){c(f),u.emit("close")})};function o(l,c,u){if(c)return l.emit("error",c);if(u!=null&&l.push(u),l._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(l._transformState.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=s;var t=require_stream_transform$1(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(s,t);function s(r){if(!(this instanceof s))return new s(r);t.call(this,r)}return s.prototype._transform=function(r,a,o){o(null,r)},_stream_passthrough$1}var hasRequiredReadableBrowser$1;function requireReadableBrowser$1(){return hasRequiredReadableBrowser$1||(hasRequiredReadableBrowser$1=1,(function(t,e){e=t.exports=require_stream_readable$1(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable$1(),e.Duplex=require_stream_duplex$1(),e.Transform=require_stream_transform$1(),e.PassThrough=require_stream_passthrough$1()})(readableBrowser$1,readableBrowser$1.exports)),readableBrowser$1.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var t=requireSafeBuffer$2().Buffer,e=requireToBuffer$1(),s=requireReadableBrowser$1().Transform,r=requireInherits_browser();function a(o){s.call(this),this._block=t.allocUnsafe(o),this._blockSize=o,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return r(a,s),a.prototype._transform=function(o,l,c){var u=null;try{this.update(o,l)}catch(f){u=f}c(u)},a.prototype._flush=function(o){var l=null;try{this.push(this.digest())}catch(c){l=c}o(l)},a.prototype.update=function(o,l){if(this._finalized)throw new Error("Digest already called");for(var c=e(o,l),u=this._block,f=0;this._blockOffset+c.length-f>=this._blockSize;){for(var d=this._blockOffset;d<this._blockSize;)u[d]=c[f],d+=1,f+=1;this._update(),this._blockOffset=0}for(;f<c.length;)u[this._blockOffset]=c[f],this._blockOffset+=1,f+=1;for(var p=0,m=c.length*8;m>0;++p)this._length[p]+=m,m=this._length[p]/4294967296|0,m>0&&(this._length[p]-=4294967296*m);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(o){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var l=this._digest();o!==void 0&&(l=l.toString(o)),this._block.fill(0),this._blockOffset=0;for(var c=0;c<4;++c)this._length[c]=0;return l},a.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=a,hashBase}var ripemd160$5,hasRequiredRipemd160$1;function requireRipemd160$1(){if(hasRequiredRipemd160$1)return ripemd160$5;hasRequiredRipemd160$1=1;var t=requireBuffer$1().Buffer,e=requireInherits_browser(),s=requireHashBase(),r=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],o=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(j,B){return j<<B|j>>>32-B}function p(j,B,D,F,q,V,ee,Q){return d(j+(B^D^F)+V+ee|0,Q)+q|0}function m(j,B,D,F,q,V,ee,Q){return d(j+(B&D|~B&F)+V+ee|0,Q)+q|0}function y(j,B,D,F,q,V,ee,Q){return d(j+((B|~D)^F)+V+ee|0,Q)+q|0}function b(j,B,D,F,q,V,ee,Q){return d(j+(B&F|D&~F)+V+ee|0,Q)+q|0}function E(j,B,D,F,q,V,ee,Q){return d(j+(B^(D|~F))+V+ee|0,Q)+q|0}function C(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}return e(C,s),C.prototype._update=function(){for(var j=r,B=0;B<16;++B)j[B]=this._block.readInt32LE(B*4);for(var D=this._a|0,F=this._b|0,q=this._c|0,V=this._d|0,ee=this._e|0,Q=this._a|0,W=this._b|0,Z=this._c|0,z=this._d|0,O=this._e|0,k=0;k<80;k+=1){var v,S;k<16?(v=p(D,F,q,V,ee,j[a[k]],u[0],l[k]),S=E(Q,W,Z,z,O,j[o[k]],f[0],c[k])):k<32?(v=m(D,F,q,V,ee,j[a[k]],u[1],l[k]),S=b(Q,W,Z,z,O,j[o[k]],f[1],c[k])):k<48?(v=y(D,F,q,V,ee,j[a[k]],u[2],l[k]),S=y(Q,W,Z,z,O,j[o[k]],f[2],c[k])):k<64?(v=b(D,F,q,V,ee,j[a[k]],u[3],l[k]),S=m(Q,W,Z,z,O,j[o[k]],f[3],c[k])):(v=E(D,F,q,V,ee,j[a[k]],u[4],l[k]),S=p(Q,W,Z,z,O,j[o[k]],f[4],c[k])),D=ee,ee=V,V=d(q,10),q=F,F=v,Q=O,O=z,z=d(Z,10),Z=W,W=S}var N=this._b+q+z|0;this._b=this._c+V+O|0,this._c=this._d+ee+Q|0,this._d=this._e+D+W|0,this._e=this._a+F+Z|0,this._a=N},C.prototype._digest=function(){this._block[this._blockOffset]=128,this._blockOffset+=1,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var j=t.alloc?t.alloc(20):new t(20);return j.writeInt32LE(this._a,0),j.writeInt32LE(this._b,4),j.writeInt32LE(this._c,8),j.writeInt32LE(this._d,12),j.writeInt32LE(this._e,16),j},ripemd160$5=C,ripemd160$5}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var t=requireSafeBuffer$2().Buffer,e=requireToBuffer$2();function s(r,a){this._block=t.alloc(r),this._finalSize=a,this._blockSize=r,this._len=0}return s.prototype.update=function(r,a){r=e(r,a||"utf8");for(var o=this._block,l=this._blockSize,c=r.length,u=this._len,f=0;f<c;){for(var d=u%l,p=Math.min(c-f,l-d),m=0;m<p;m++)o[d+m]=r[f+m];u+=p,f+=p,u%l===0&&this._update(o)}return this._len+=c,this},s.prototype.digest=function(r){var a=this._len%this._blockSize;this._block[a]=128,this._block.fill(0,a+1),a>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var l=(o&4294967295)>>>0,c=(o-l)/4294967296;this._block.writeUInt32BE(c,this._blockSize-8),this._block.writeUInt32BE(l,this._blockSize-4)}this._update(this._block);var u=this._hash();return r?u.toString(r):u},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=s,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var t=requireInherits_browser(),e=requireHash$1(),s=requireSafeBuffer$2().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function o(){this.init(),this._w=a,e.call(this,64,56)}t(o,e),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function l(f){return f<<5|f>>>27}function c(f){return f<<30|f>>>2}function u(f,d,p,m){return f===0?d&p|~d&m:f===2?d&p|d&m|p&m:d^p^m}return o.prototype._update=function(f){for(var d=this._w,p=this._a|0,m=this._b|0,y=this._c|0,b=this._d|0,E=this._e|0,C=0;C<16;++C)d[C]=f.readInt32BE(C*4);for(;C<80;++C)d[C]=d[C-3]^d[C-8]^d[C-14]^d[C-16];for(var j=0;j<80;++j){var B=~~(j/20),D=l(p)+u(B,m,y,b)+E+d[j]+r[B]|0;E=b,b=y,y=c(m),m=p,p=D}this._a=p+this._a|0,this._b=m+this._b|0,this._c=y+this._c|0,this._d=b+this._d|0,this._e=E+this._e|0},o.prototype._hash=function(){var f=s.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},sha$1=o,sha$1}var sha1$2,hasRequiredSha1$1;function requireSha1$1(){if(hasRequiredSha1$1)return sha1$2;hasRequiredSha1$1=1;var t=requireInherits_browser(),e=requireHash$1(),s=requireSafeBuffer$2().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function o(){this.init(),this._w=a,e.call(this,64,56)}t(o,e),o.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function l(d){return d<<1|d>>>31}function c(d){return d<<5|d>>>27}function u(d){return d<<30|d>>>2}function f(d,p,m,y){return d===0?p&m|~p&y:d===2?p&m|p&y|m&y:p^m^y}return o.prototype._update=function(d){for(var p=this._w,m=this._a|0,y=this._b|0,b=this._c|0,E=this._d|0,C=this._e|0,j=0;j<16;++j)p[j]=d.readInt32BE(j*4);for(;j<80;++j)p[j]=l(p[j-3]^p[j-8]^p[j-14]^p[j-16]);for(var B=0;B<80;++B){var D=~~(B/20),F=c(m)+f(D,y,b,E)+C+p[B]+r[D]|0;C=E,E=b,b=u(y),y=m,m=F}this._a=m+this._a|0,this._b=y+this._b|0,this._c=b+this._c|0,this._d=E+this._d|0,this._e=C+this._e|0},o.prototype._hash=function(){var d=s.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},sha1$2=o,sha1$2}var sha256$8,hasRequiredSha256$2;function requireSha256$2(){if(hasRequiredSha256$2)return sha256$8;hasRequiredSha256$2=1;var t=requireInherits_browser(),e=requireHash$1(),s=requireSafeBuffer$2().Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function o(){this.init(),this._w=a,e.call(this,64,56)}t(o,e),o.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function l(m,y,b){return b^m&(y^b)}function c(m,y,b){return m&y|b&(m|y)}function u(m){return(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10)}function f(m){return(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7)}function d(m){return(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3}function p(m){return(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10}return o.prototype._update=function(m){for(var y=this._w,b=this._a|0,E=this._b|0,C=this._c|0,j=this._d|0,B=this._e|0,D=this._f|0,F=this._g|0,q=this._h|0,V=0;V<16;++V)y[V]=m.readInt32BE(V*4);for(;V<64;++V)y[V]=p(y[V-2])+y[V-7]+d(y[V-15])+y[V-16]|0;for(var ee=0;ee<64;++ee){var Q=q+f(B)+l(B,D,F)+r[ee]+y[ee]|0,W=u(b)+c(b,E,C)|0;q=F,F=D,D=B,B=j+Q|0,j=C,C=E,E=b,b=Q+W|0}this._a=b+this._a|0,this._b=E+this._b|0,this._c=C+this._c|0,this._d=j+this._d|0,this._e=B+this._e|0,this._f=D+this._f|0,this._g=F+this._g|0,this._h=q+this._h|0},o.prototype._hash=function(){var m=s.allocUnsafe(32);return m.writeInt32BE(this._a,0),m.writeInt32BE(this._b,4),m.writeInt32BE(this._c,8),m.writeInt32BE(this._d,12),m.writeInt32BE(this._e,16),m.writeInt32BE(this._f,20),m.writeInt32BE(this._g,24),m.writeInt32BE(this._h,28),m},sha256$8=o,sha256$8}var sha224$4,hasRequiredSha224$1;function requireSha224$1(){if(hasRequiredSha224$1)return sha224$4;hasRequiredSha224$1=1;var t=requireInherits_browser(),e=requireSha256$2(),s=requireHash$1(),r=requireSafeBuffer$2().Buffer,a=new Array(64);function o(){this.init(),this._w=a,s.call(this,64,56)}return t(o,e),o.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},o.prototype._hash=function(){var l=r.allocUnsafe(28);return l.writeInt32BE(this._a,0),l.writeInt32BE(this._b,4),l.writeInt32BE(this._c,8),l.writeInt32BE(this._d,12),l.writeInt32BE(this._e,16),l.writeInt32BE(this._f,20),l.writeInt32BE(this._g,24),l},sha224$4=o,sha224$4}var sha512$5,hasRequiredSha512$2;function requireSha512$2(){if(hasRequiredSha512$2)return sha512$5;hasRequiredSha512$2=1;var t=requireInherits_browser(),e=requireHash$1(),s=requireSafeBuffer$2().Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function o(){this.init(),this._w=a,e.call(this,128,112)}t(o,e),o.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function l(E,C,j){return j^E&(C^j)}function c(E,C,j){return E&C|j&(E|C)}function u(E,C){return(E>>>28|C<<4)^(C>>>2|E<<30)^(C>>>7|E<<25)}function f(E,C){return(E>>>14|C<<18)^(E>>>18|C<<14)^(C>>>9|E<<23)}function d(E,C){return(E>>>1|C<<31)^(E>>>8|C<<24)^E>>>7}function p(E,C){return(E>>>1|C<<31)^(E>>>8|C<<24)^(E>>>7|C<<25)}function m(E,C){return(E>>>19|C<<13)^(C>>>29|E<<3)^E>>>6}function y(E,C){return(E>>>19|C<<13)^(C>>>29|E<<3)^(E>>>6|C<<26)}function b(E,C){return E>>>0<C>>>0?1:0}return o.prototype._update=function(E){for(var C=this._w,j=this._ah|0,B=this._bh|0,D=this._ch|0,F=this._dh|0,q=this._eh|0,V=this._fh|0,ee=this._gh|0,Q=this._hh|0,W=this._al|0,Z=this._bl|0,z=this._cl|0,O=this._dl|0,k=this._el|0,v=this._fl|0,S=this._gl|0,N=this._hl|0,R=0;R<32;R+=2)C[R]=E.readInt32BE(R*4),C[R+1]=E.readInt32BE(R*4+4);for(;R<160;R+=2){var T=C[R-30],M=C[R-30+1],I=d(T,M),$=p(M,T);T=C[R-4],M=C[R-4+1];var A=m(T,M),L=y(M,T),Y=C[R-14],oe=C[R-14+1],J=C[R-32],U=C[R-32+1],G=$+oe|0,ae=I+Y+b(G,$)|0;G=G+L|0,ae=ae+A+b(G,L)|0,G=G+U|0,ae=ae+J+b(G,U)|0,C[R]=ae,C[R+1]=G}for(var he=0;he<160;he+=2){ae=C[he],G=C[he+1];var le=c(j,B,D),te=c(W,Z,z),pe=u(j,W),xe=u(W,j),be=f(q,k),ce=f(k,q),re=r[he],ie=r[he+1],fe=l(q,V,ee),ye=l(k,v,S),we=N+ce|0,Re=Q+be+b(we,N)|0;we=we+ye|0,Re=Re+fe+b(we,ye)|0,we=we+ie|0,Re=Re+re+b(we,ie)|0,we=we+G|0,Re=Re+ae+b(we,G)|0;var Me=xe+te|0,ke=pe+le+b(Me,xe)|0;Q=ee,N=S,ee=V,S=v,V=q,v=k,k=O+we|0,q=F+Re+b(k,O)|0,F=D,O=z,D=B,z=Z,B=j,Z=W,W=we+Me|0,j=Re+ke+b(W,we)|0}this._al=this._al+W|0,this._bl=this._bl+Z|0,this._cl=this._cl+z|0,this._dl=this._dl+O|0,this._el=this._el+k|0,this._fl=this._fl+v|0,this._gl=this._gl+S|0,this._hl=this._hl+N|0,this._ah=this._ah+j+b(this._al,W)|0,this._bh=this._bh+B+b(this._bl,Z)|0,this._ch=this._ch+D+b(this._cl,z)|0,this._dh=this._dh+F+b(this._dl,O)|0,this._eh=this._eh+q+b(this._el,k)|0,this._fh=this._fh+V+b(this._fl,v)|0,this._gh=this._gh+ee+b(this._gl,S)|0,this._hh=this._hh+Q+b(this._hl,N)|0},o.prototype._hash=function(){var E=s.allocUnsafe(64);function C(j,B,D){E.writeInt32BE(j,D),E.writeInt32BE(B,D+4)}return C(this._ah,this._al,0),C(this._bh,this._bl,8),C(this._ch,this._cl,16),C(this._dh,this._dl,24),C(this._eh,this._el,32),C(this._fh,this._fl,40),C(this._gh,this._gl,48),C(this._hh,this._hl,56),E},sha512$5=o,sha512$5}var sha384$4,hasRequiredSha384$1;function requireSha384$1(){if(hasRequiredSha384$1)return sha384$4;hasRequiredSha384$1=1;var t=requireInherits_browser(),e=requireSha512$2(),s=requireHash$1(),r=requireSafeBuffer$2().Buffer,a=new Array(160);function o(){this.init(),this._w=a,s.call(this,128,112)}return t(o,e),o.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},o.prototype._hash=function(){var l=r.allocUnsafe(48);function c(u,f,d){l.writeInt32BE(u,d),l.writeInt32BE(f,d+4)}return c(this._ah,this._al,0),c(this._bh,this._bl,8),c(this._ch,this._cl,16),c(this._dh,this._dl,24),c(this._eh,this._el,32),c(this._fh,this._fl,40),l},sha384$4=o,sha384$4}var hasRequiredSha_js;function requireSha_js(){return hasRequiredSha_js||(hasRequiredSha_js=1,(function(t){t.exports=function(s){var r=s.toLowerCase(),a=t.exports[r];if(!a)throw new Error(r+" is not supported (we accept pull requests)");return new a},t.exports.sha=requireSha$1(),t.exports.sha1=requireSha1$1(),t.exports.sha224=requireSha224$1(),t.exports.sha256=requireSha256$2(),t.exports.sha384=requireSha384$1(),t.exports.sha512=requireSha512$2()})(sha_js)),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var t=requireSafeBuffer$2().Buffer,e=requireStreamBrowserify().Transform,s=requireString_decoder().StringDecoder,r=requireInherits_browser(),a=requireToBuffer$2();function o(l){e.call(this),this.hashMode=typeof l=="string",this.hashMode?this[l]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return r(o,e),o.prototype.update=function(l,c,u){var f=a(l,c),d=this._update(f);return this.hashMode?this:(u&&(d=this._toString(d,u)),d)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(l,c,u){var f;try{this.hashMode?this._update(l):this.push(this._update(l))}catch(d){f=d}finally{u(f)}},o.prototype._flush=function(l){var c;try{this.push(this.__final())}catch(u){c=u}l(c)},o.prototype._finalOrDigest=function(l){var c=this.__final()||t.alloc(0);return l&&(c=this._toString(c,l,!0)),c},o.prototype._toString=function(l,c,u){if(this._decoder||(this._decoder=new s(c),this._encoding=c),this._encoding!==c)throw new Error("cant switch encodings");var f=this._decoder.write(l);return u&&(f+=this._decoder.end()),f},cipherBase=o,cipherBase}var browser$9,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$9;hasRequiredBrowser$9=1;var t=requireInherits_browser(),e=requireMd5_js(),s=requireRipemd160$1(),r=requireSha_js(),a=requireCipherBase();function o(l){a.call(this,"digest"),this._hash=l}return t(o,a),o.prototype._update=function(l){this._hash.update(l)},o.prototype._final=function(){return this._hash.digest()},browser$9=function(c){return c=c.toLowerCase(),c==="md5"?new e:c==="rmd160"||c==="ripemd160"?new s:new o(r(c))},browser$9}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var t=requireInherits_browser(),e=requireSafeBuffer$2().Buffer,s=requireCipherBase(),r=e.alloc(128),a=64;function o(l,c){s.call(this,"digest"),typeof c=="string"&&(c=e.from(c)),this._alg=l,this._key=c,c.length>a?c=l(c):c.length<a&&(c=e.concat([c,r],a));for(var u=this._ipad=e.allocUnsafe(a),f=this._opad=e.allocUnsafe(a),d=0;d<a;d++)u[d]=c[d]^54,f[d]=c[d]^92;this._hash=[u]}return t(o,s),o.prototype._update=function(l){this._hash.push(l)},o.prototype._final=function(){var l=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,l]))},legacy=o,legacy}var md5$2,hasRequiredMd5$1;function requireMd5$1(){if(hasRequiredMd5$1)return md5$2;hasRequiredMd5$1=1;var t=requireMd5_js();return md5$2=function(e){return new t().update(e).digest()},md5$2}var browser$8,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$8;hasRequiredBrowser$8=1;var t=requireInherits_browser(),e=requireLegacy(),s=requireCipherBase(),r=requireSafeBuffer$2().Buffer,a=requireMd5$1(),o=requireRipemd160$1(),l=requireSha_js(),c=r.alloc(128);function u(f,d){s.call(this,"digest"),typeof d=="string"&&(d=r.from(d));var p=f==="sha512"||f==="sha384"?128:64;if(this._alg=f,this._key=d,d.length>p){var m=f==="rmd160"?new o:l(f);d=m.update(d).digest()}else d.length<p&&(d=r.concat([d,c],p));for(var y=this._ipad=r.allocUnsafe(p),b=this._opad=r.allocUnsafe(p),E=0;E<p;E++)y[E]=d[E]^54,b[E]=d[E]^92;this._hash=f==="rmd160"?new o:l(f),this._hash.update(y)}return t(u,s),u.prototype._update=function(f){this._hash.update(f)},u.prototype._final=function(){var f=this._hash.digest(),d=this._alg==="rmd160"?new o:l(this._alg);return d.update(this._opad).update(f).digest()},browser$8=function(d,p){return d=d.toLowerCase(),d==="rmd160"||d==="ripemd160"?new u("rmd160",p):d==="md5"?new e(a,p):new u(d,p)},browser$8}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$7={sign:"ecdsa",hash:"sha256",id:""},sha224$3={sign:"ecdsa",hash:"sha224",id:""},sha384$3={sign:"ecdsa",hash:"sha384",id:""},sha512$4={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6$1={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$7,sha224:sha224$3,sha384:sha384$3,sha512:sha512$4,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6$1),algos}var browser$7={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var t=isFinite,e=Math.pow(2,30)-1;return precondition=function(s,r){if(typeof s!="number")throw new TypeError("Iterations not a number");if(s<0||!t(s))throw new TypeError("Bad iterations");if(typeof r!="number")throw new TypeError("Key length not a number");if(r<0||r>e||r!==r)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var t;if(commonjsGlobal.process&&commonjsGlobal.process.browser)t="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var e=parseInt(process$1.version.split(".")[0].slice(1),10);t=e>=6?"utf-8":"binary"}else t="utf-8";return defaultEncoding_1=t,defaultEncoding_1}var toBuffer_1,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer_1;hasRequiredToBuffer=1;var t=requireSafeBuffer$2().Buffer,e=requireToBuffer$2(),s=typeof Uint8Array<"u",r=s&&typeof ArrayBuffer<"u",a=r&&ArrayBuffer.isView;return toBuffer_1=function(o,l,c){if(typeof o=="string"||t.isBuffer(o)||s&&o instanceof Uint8Array||a&&a(o))return e(o,l);throw new TypeError(c+" must be a string, a Buffer, a Uint8Array, or a DataView")},toBuffer_1}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var t=requireMd5$1(),e=requireRipemd160$1(),s=requireSha_js(),r=requireSafeBuffer$2().Buffer,a=requirePrecondition(),o=requireDefaultEncoding(),l=requireToBuffer(),c=r.alloc(128),u={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},f={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function d(b){return new e().update(b).digest()}function p(b){function E(C){return s(b).update(C).digest()}return b==="rmd160"||b==="ripemd160"?d:b==="md5"?t:E}function m(b,E,C){var j=p(b),B=b==="sha512"||b==="sha384"?128:64;E.length>B?E=j(E):E.length<B&&(E=r.concat([E,c],B));for(var D=r.allocUnsafe(B+u[b]),F=r.allocUnsafe(B+u[b]),q=0;q<B;q++)D[q]=E[q]^54,F[q]=E[q]^92;var V=r.allocUnsafe(B+C+4);D.copy(V,0,0,B),this.ipad1=V,this.ipad2=D,this.opad=F,this.alg=b,this.blocksize=B,this.hash=j,this.size=u[b]}m.prototype.run=function(b,E){b.copy(E,this.blocksize);var C=this.hash(E);return C.copy(this.opad,this.blocksize),this.hash(this.opad)};function y(b,E,C,j,B){a(C,j),b=l(b,o,"Password"),E=l(E,o,"Salt");var D=(B||"sha1").toLowerCase(),F=f[D]||D,q=u[F];if(typeof q!="number"||!q)throw new TypeError("Digest algorithm not supported: "+B);var V=new m(F,b,E.length),ee=r.allocUnsafe(j),Q=r.allocUnsafe(E.length+4);E.copy(Q,0,0,E.length);for(var W=0,Z=q,z=Math.ceil(j/Z),O=1;O<=z;O++){Q.writeUInt32BE(O,E.length);for(var k=V.run(Q,V.ipad1),v=k,S=1;S<C;S++){v=V.run(v,V.ipad2);for(var N=0;N<Z;N++)k[N]^=v[N]}k.copy(ee,W),W+=Z}return ee}return syncBrowser=y,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var t=requireSafeBuffer$2().Buffer,e=requirePrecondition(),s=requireDefaultEncoding(),r=requireSyncBrowser(),a=requireToBuffer(),o,l=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},u=[],f;function d(){return f||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?f=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?f=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?f=commonjsGlobal.setImmediate:f=commonjsGlobal.setTimeout,f)}function p(b,E,C,j,B){return l.importKey("raw",b,{name:"PBKDF2"},!1,["deriveBits"]).then(function(D){return l.deriveBits({name:"PBKDF2",salt:E,iterations:C,hash:{name:B}},D,j<<3)}).then(function(D){return t.from(D)})}function m(b){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(u[b]!==void 0)return u[b];o=o||t.alloc(8);var E=p(o,o,10,128,b).then(function(){return!0},function(){return!1});return u[b]=E,E}function y(b,E){b.then(function(C){d()(function(){E(null,C)})},function(C){d()(function(){E(C)})})}return async=function(b,E,C,j,B,D){if(typeof B=="function"&&(D=B,B=void 0),e(C,j),b=a(b,s,"Password"),E=a(E,s,"Salt"),typeof D!="function")throw new Error("No callback provided to pbkdf2");B=B||"sha1";var F=c[B.toLowerCase()];if(!F||typeof commonjsGlobal.Promise!="function"){d()(function(){var q;try{q=r(b,E,C,j,B)}catch(V){D(V);return}D(null,q)});return}y(m(F).then(function(q){return q?p(b,E,C,j,F):r(b,E,C,j,B)}),D)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$7.pbkdf2=requireAsync(),browser$7.pbkdf2Sync=requireSyncBrowser()),browser$7}var browser$6={},des$1={},utils$5={},hasRequiredUtils$4;function requireUtils$4(){if(hasRequiredUtils$4)return utils$5;hasRequiredUtils$4=1,utils$5.readUInt32BE=function(a,o){var l=a[0+o]<<24|a[1+o]<<16|a[2+o]<<8|a[3+o];return l>>>0},utils$5.writeUInt32BE=function(a,o,l){a[0+l]=o>>>24,a[1+l]=o>>>16&255,a[2+l]=o>>>8&255,a[3+l]=o&255},utils$5.ip=function(a,o,l,c){for(var u=0,f=0,d=6;d>=0;d-=2){for(var p=0;p<=24;p+=8)u<<=1,u|=o>>>p+d&1;for(var p=0;p<=24;p+=8)u<<=1,u|=a>>>p+d&1}for(var d=6;d>=0;d-=2){for(var p=1;p<=25;p+=8)f<<=1,f|=o>>>p+d&1;for(var p=1;p<=25;p+=8)f<<=1,f|=a>>>p+d&1}l[c+0]=u>>>0,l[c+1]=f>>>0},utils$5.rip=function(a,o,l,c){for(var u=0,f=0,d=0;d<4;d++)for(var p=24;p>=0;p-=8)u<<=1,u|=o>>>p+d&1,u<<=1,u|=a>>>p+d&1;for(var d=4;d<8;d++)for(var p=24;p>=0;p-=8)f<<=1,f|=o>>>p+d&1,f<<=1,f|=a>>>p+d&1;l[c+0]=u>>>0,l[c+1]=f>>>0},utils$5.pc1=function(a,o,l,c){for(var u=0,f=0,d=7;d>=5;d--){for(var p=0;p<=24;p+=8)u<<=1,u|=o>>p+d&1;for(var p=0;p<=24;p+=8)u<<=1,u|=a>>p+d&1}for(var p=0;p<=24;p+=8)u<<=1,u|=o>>p+d&1;for(var d=1;d<=3;d++){for(var p=0;p<=24;p+=8)f<<=1,f|=o>>p+d&1;for(var p=0;p<=24;p+=8)f<<=1,f|=a>>p+d&1}for(var p=0;p<=24;p+=8)f<<=1,f|=a>>p+d&1;l[c+0]=u>>>0,l[c+1]=f>>>0},utils$5.r28shl=function(a,o){return a<<o&268435455|a>>>28-o};var t=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$5.pc2=function(a,o,l,c){for(var u=0,f=0,d=t.length>>>1,p=0;p<d;p++)u<<=1,u|=a>>>t[p]&1;for(var p=d;p<t.length;p++)f<<=1,f|=o>>>t[p]&1;l[c+0]=u>>>0,l[c+1]=f>>>0},utils$5.expand=function(a,o,l){var c=0,u=0;c=(a&1)<<5|a>>>27;for(var f=23;f>=15;f-=4)c<<=6,c|=a>>>f&63;for(var f=11;f>=3;f-=4)u|=a>>>f&63,u<<=6;u|=(a&31)<<1|a>>>31,o[l+0]=c>>>0,o[l+1]=u>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$5.substitute=function(a,o){for(var l=0,c=0;c<4;c++){var u=a>>>18-c*6&63,f=e[c*64+u];l<<=4,l|=f}for(var c=0;c<4;c++){var u=o>>>18-c*6&63,f=e[256+c*64+u];l<<=4,l|=f}return l>>>0};var s=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$5.permute=function(a){for(var o=0,l=0;l<s.length;l++)o<<=1,o|=a>>>s[l]&1;return o>>>0},utils$5.padSplit=function(a,o,l){for(var c=a.toString(2);c.length<o;)c="0"+c;for(var u=[],f=0;f<o;f+=l)u.push(c.slice(f,f+l));return u.join(" ")},utils$5}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=t;function t(e,s){if(!e)throw new Error(s||"Assertion failed")}return t.equal=function(s,r,a){if(s!=r)throw new Error(a||"Assertion failed: "+s+" != "+r)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var t=requireMinimalisticAssert();function e(s){this.options=s,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=s.padding!==!1}return cipher=e,e.prototype._init=function(){},e.prototype.update=function(r){return r.length===0?[]:this.type==="decrypt"?this._updateDecrypt(r):this._updateEncrypt(r)},e.prototype._buffer=function(r,a){for(var o=Math.min(this.buffer.length-this.bufferOff,r.length-a),l=0;l<o;l++)this.buffer[this.bufferOff+l]=r[a+l];return this.bufferOff+=o,o},e.prototype._flushBuffer=function(r,a){return this._update(this.buffer,0,r,a),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(r){var a=0,o=0,l=(this.bufferOff+r.length)/this.blockSize|0,c=new Array(l*this.blockSize);this.bufferOff!==0&&(a+=this._buffer(r,a),this.bufferOff===this.buffer.length&&(o+=this._flushBuffer(c,o)));for(var u=r.length-(r.length-a)%this.blockSize;a<u;a+=this.blockSize)this._update(r,a,c,o),o+=this.blockSize;for(;a<r.length;a++,this.bufferOff++)this.buffer[this.bufferOff]=r[a];return c},e.prototype._updateDecrypt=function(r){for(var a=0,o=0,l=Math.ceil((this.bufferOff+r.length)/this.blockSize)-1,c=new Array(l*this.blockSize);l>0;l--)a+=this._buffer(r,a),o+=this._flushBuffer(c,o);return a+=this._buffer(r,a),c},e.prototype.final=function(r){var a;r&&(a=this.update(r));var o;return this.type==="encrypt"?o=this._finalEncrypt():o=this._finalDecrypt(),a?a.concat(o):o},e.prototype._pad=function(r,a){if(a===0)return!1;for(;a<r.length;)r[a++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var r=new Array(this.blockSize);return this._update(this.buffer,0,r,0),r},e.prototype._unpad=function(r){return r},e.prototype._finalDecrypt=function(){t.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var r=new Array(this.blockSize);return this._flushBuffer(r,0),this._unpad(r)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var t=requireMinimalisticAssert(),e=requireInherits_browser(),s=requireUtils$4(),r=requireCipher();function a(){this.tmp=new Array(2),this.keys=null}function o(c){r.call(this,c);var u=new a;this._desState=u,this.deriveKeys(u,c.key)}e(o,r),des=o,o.create=function(u){return new o(u)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return o.prototype.deriveKeys=function(u,f){u.keys=new Array(32),t.equal(f.length,this.blockSize,"Invalid key length");var d=s.readUInt32BE(f,0),p=s.readUInt32BE(f,4);s.pc1(d,p,u.tmp,0),d=u.tmp[0],p=u.tmp[1];for(var m=0;m<u.keys.length;m+=2){var y=l[m>>>1];d=s.r28shl(d,y),p=s.r28shl(p,y),s.pc2(d,p,u.keys,m)}},o.prototype._update=function(u,f,d,p){var m=this._desState,y=s.readUInt32BE(u,f),b=s.readUInt32BE(u,f+4);s.ip(y,b,m.tmp,0),y=m.tmp[0],b=m.tmp[1],this.type==="encrypt"?this._encrypt(m,y,b,m.tmp,0):this._decrypt(m,y,b,m.tmp,0),y=m.tmp[0],b=m.tmp[1],s.writeUInt32BE(d,y,p),s.writeUInt32BE(d,b,p+4)},o.prototype._pad=function(u,f){if(this.padding===!1)return!1;for(var d=u.length-f,p=f;p<u.length;p++)u[p]=d;return!0},o.prototype._unpad=function(u){if(this.padding===!1)return u;for(var f=u[u.length-1],d=u.length-f;d<u.length;d++)t.equal(u[d],f);return u.slice(0,u.length-f)},o.prototype._encrypt=function(u,f,d,p,m){for(var y=f,b=d,E=0;E<u.keys.length;E+=2){var C=u.keys[E],j=u.keys[E+1];s.expand(b,u.tmp,0),C^=u.tmp[0],j^=u.tmp[1];var B=s.substitute(C,j),D=s.permute(B),F=b;b=(y^D)>>>0,y=F}s.rip(b,y,p,m)},o.prototype._decrypt=function(u,f,d,p,m){for(var y=d,b=f,E=u.keys.length-2;E>=0;E-=2){var C=u.keys[E],j=u.keys[E+1];s.expand(y,u.tmp,0),C^=u.tmp[0],j^=u.tmp[1];var B=s.substitute(C,j),D=s.permute(B),F=y;y=(b^D)>>>0,b=F}s.rip(y,b,p,m)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var t=requireMinimalisticAssert(),e=requireInherits_browser(),s={};function r(o){t.equal(o.length,8,"Invalid IV length"),this.iv=new Array(8);for(var l=0;l<this.iv.length;l++)this.iv[l]=o[l]}function a(o){function l(d){o.call(this,d),this._cbcInit()}e(l,o);for(var c=Object.keys(s),u=0;u<c.length;u++){var f=c[u];l.prototype[f]=s[f]}return l.create=function(p){return new l(p)},l}return cbc$1.instantiate=a,s._cbcInit=function(){var l=new r(this.options.iv);this._cbcState=l},s._update=function(l,c,u,f){var d=this._cbcState,p=this.constructor.super_.prototype,m=d.iv;if(this.type==="encrypt"){for(var y=0;y<this.blockSize;y++)m[y]^=l[c+y];p._update.call(this,m,0,u,f);for(var y=0;y<this.blockSize;y++)m[y]=u[f+y]}else{p._update.call(this,l,c,u,f);for(var y=0;y<this.blockSize;y++)u[f+y]^=m[y];for(var y=0;y<this.blockSize;y++)m[y]=l[c+y]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var t=requireMinimalisticAssert(),e=requireInherits_browser(),s=requireCipher(),r=requireDes$1();function a(l,c){t.equal(c.length,24,"Invalid key length");var u=c.slice(0,8),f=c.slice(8,16),d=c.slice(16,24);l==="encrypt"?this.ciphers=[r.create({type:"encrypt",key:u}),r.create({type:"decrypt",key:f}),r.create({type:"encrypt",key:d})]:this.ciphers=[r.create({type:"decrypt",key:d}),r.create({type:"encrypt",key:f}),r.create({type:"decrypt",key:u})]}function o(l){s.call(this,l);var c=new a(this.type,this.options.key);this._edeState=c}return e(o,s),ede=o,o.create=function(c){return new o(c)},o.prototype._update=function(c,u,f,d){var p=this._edeState;p.ciphers[0]._update(c,u,f,d),p.ciphers[1]._update(f,d,f,d),p.ciphers[2]._update(f,d,f,d)},o.prototype._pad=r.prototype._pad,o.prototype._unpad=r.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$4(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var t=requireCipherBase(),e=requireDes(),s=requireInherits_browser(),r=requireSafeBuffer$2().Buffer,a={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],browserifyDes=o,s(o,t);function o(l){t.call(this);var c=l.mode.toLowerCase(),u=a[c],f;l.decrypt?f="decrypt":f="encrypt";var d=l.key;r.isBuffer(d)||(d=r.from(d)),(c==="des-ede"||c==="des-ede-cbc")&&(d=r.concat([d,d.slice(0,8)]));var p=l.iv;r.isBuffer(p)||(p=r.from(p)),this._des=u.create({key:d,iv:p,type:f})}return o.prototype._update=function(l){return r.from(this._des.update(l))},o.prototype._final=function(){return r.from(this._des.final())},browserifyDes}var browser$5={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(t,e){return t._cipher.encryptBlock(e)},ecb.decrypt=function(t,e){return t._cipher.decryptBlock(e)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(e,s){for(var r=Math.min(e.length,s.length),a=new Buffer(r),o=0;o<r;++o)a[o]=e[o]^s[o];return a}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var t=requireBufferXor();return cbc.encrypt=function(e,s){var r=t(s,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},cbc.decrypt=function(e,s){var r=e._prev;e._prev=s;var a=e._cipher.decryptBlock(s);return t(a,r)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var t=requireSafeBuffer$2().Buffer,e=requireBufferXor();function s(r,a,o){var l=a.length,c=e(a,r._cache);return r._cache=r._cache.slice(l),r._prev=t.concat([r._prev,o?a:c]),c}return cfb.encrypt=function(r,a,o){for(var l=t.allocUnsafe(0),c;a.length;)if(r._cache.length===0&&(r._cache=r._cipher.encryptBlock(r._prev),r._prev=t.allocUnsafe(0)),r._cache.length<=a.length)c=r._cache.length,l=t.concat([l,s(r,a.slice(0,c),o)]),a=a.slice(c);else{l=t.concat([l,s(r,a,o)]);break}return l},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var t=requireSafeBuffer$2().Buffer;function e(s,r,a){var o=s._cipher.encryptBlock(s._prev),l=o[0]^r;return s._prev=t.concat([s._prev.slice(1),t.from([a?r:l])]),l}return cfb8.encrypt=function(s,r,a){for(var o=r.length,l=t.allocUnsafe(o),c=-1;++c<o;)l[c]=e(s,r[c],a);return l},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var t=requireSafeBuffer$2().Buffer;function e(r,a,o){for(var l,c=-1,u=8,f=0,d,p;++c<u;)l=r._cipher.encryptBlock(r._prev),d=a&1<<7-c?128:0,p=l[0]^d,f+=(p&128)>>c%8,r._prev=s(r._prev,o?d:p);return f}function s(r,a){var o=r.length,l=-1,c=t.allocUnsafe(r.length);for(r=t.concat([r,t.from([a])]);++l<o;)c[l]=r[l]<<1|r[l+1]>>7;return c}return cfb1.encrypt=function(r,a,o){for(var l=a.length,c=t.allocUnsafe(l),u=-1;++u<l;)c[u]=e(r,a[u],o);return c},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var t=requireBufferXor();function e(s){return s._prev=s._cipher.encryptBlock(s._prev),s._prev}return ofb.encrypt=function(s,r){for(;s._cache.length<r.length;)s._cache=Buffer.concat([s._cache,e(s)]);var a=s._cache.slice(0,r.length);return s._cache=s._cache.slice(r.length),t(r,a)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function t(e){for(var s=e.length,r;s--;)if(r=e.readUInt8(s),r===255)e.writeUInt8(0,s);else{r++,e.writeUInt8(r,s);break}}return incr32_1=t,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var t=requireBufferXor(),e=requireSafeBuffer$2().Buffer,s=requireIncr32();function r(o){var l=o._cipher.encryptBlockRaw(o._prev);return s(o._prev),l}var a=16;return ctr.encrypt=function(o,l){var c=Math.ceil(l.length/a),u=o._cache.length;o._cache=e.concat([o._cache,e.allocUnsafe(c*a)]);for(var f=0;f<c;f++){var d=r(o),p=u+f*a;o._cache.writeUInt32BE(d[0],p+0),o._cache.writeUInt32BE(d[1],p+4),o._cache.writeUInt32BE(d[2],p+8),o._cache.writeUInt32BE(d[3],p+12)}var m=o._cache.slice(0,l.length);return o._cache=o._cache.slice(l.length),t(l,m)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2$4={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var t={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},e=require$$2$4;for(var s in e)e[s].module=t[e[s].mode];return modes_1=e,modes_1}var aes$2={},hasRequiredAes$1;function requireAes$1(){if(hasRequiredAes$1)return aes$2;hasRequiredAes$1=1;var t=requireSafeBuffer$2().Buffer;function e(c){t.isBuffer(c)||(c=t.from(c));for(var u=c.length/4|0,f=new Array(u),d=0;d<u;d++)f[d]=c.readUInt32BE(d*4);return f}function s(c){for(var u=0;u<c.length;c++)c[u]=0}function r(c,u,f,d,p){for(var m=f[0],y=f[1],b=f[2],E=f[3],C=c[0]^u[0],j=c[1]^u[1],B=c[2]^u[2],D=c[3]^u[3],F,q,V,ee,Q=4,W=1;W<p;W++)F=m[C>>>24]^y[j>>>16&255]^b[B>>>8&255]^E[D&255]^u[Q++],q=m[j>>>24]^y[B>>>16&255]^b[D>>>8&255]^E[C&255]^u[Q++],V=m[B>>>24]^y[D>>>16&255]^b[C>>>8&255]^E[j&255]^u[Q++],ee=m[D>>>24]^y[C>>>16&255]^b[j>>>8&255]^E[B&255]^u[Q++],C=F,j=q,B=V,D=ee;return F=(d[C>>>24]<<24|d[j>>>16&255]<<16|d[B>>>8&255]<<8|d[D&255])^u[Q++],q=(d[j>>>24]<<24|d[B>>>16&255]<<16|d[D>>>8&255]<<8|d[C&255])^u[Q++],V=(d[B>>>24]<<24|d[D>>>16&255]<<16|d[C>>>8&255]<<8|d[j&255])^u[Q++],ee=(d[D>>>24]<<24|d[C>>>16&255]<<16|d[j>>>8&255]<<8|d[B&255])^u[Q++],F=F>>>0,q=q>>>0,V=V>>>0,ee=ee>>>0,[F,q,V,ee]}var a=[0,1,2,4,8,16,32,64,128,27,54],o=(function(){for(var c=new Array(256),u=0;u<256;u++)u<128?c[u]=u<<1:c[u]=u<<1^283;for(var f=[],d=[],p=[[],[],[],[]],m=[[],[],[],[]],y=0,b=0,E=0;E<256;++E){var C=b^b<<1^b<<2^b<<3^b<<4;C=C>>>8^C&255^99,f[y]=C,d[C]=y;var j=c[y],B=c[j],D=c[B],F=c[C]*257^C*16843008;p[0][y]=F<<24|F>>>8,p[1][y]=F<<16|F>>>16,p[2][y]=F<<8|F>>>24,p[3][y]=F,F=D*16843009^B*65537^j*257^y*16843008,m[0][C]=F<<24|F>>>8,m[1][C]=F<<16|F>>>16,m[2][C]=F<<8|F>>>24,m[3][C]=F,y===0?y=b=1:(y=j^c[c[c[D^j]]],b^=c[c[b]])}return{SBOX:f,INV_SBOX:d,SUB_MIX:p,INV_SUB_MIX:m}})();function l(c){this._key=e(c),this._reset()}return l.blockSize=16,l.keySize=256/8,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var c=this._key,u=c.length,f=u+6,d=(f+1)*4,p=[],m=0;m<u;m++)p[m]=c[m];for(m=u;m<d;m++){var y=p[m-1];m%u===0?(y=y<<8|y>>>24,y=o.SBOX[y>>>24]<<24|o.SBOX[y>>>16&255]<<16|o.SBOX[y>>>8&255]<<8|o.SBOX[y&255],y^=a[m/u|0]<<24):u>6&&m%u===4&&(y=o.SBOX[y>>>24]<<24|o.SBOX[y>>>16&255]<<16|o.SBOX[y>>>8&255]<<8|o.SBOX[y&255]),p[m]=p[m-u]^y}for(var b=[],E=0;E<d;E++){var C=d-E,j=p[C-(E%4?0:4)];E<4||C<=4?b[E]=j:b[E]=o.INV_SUB_MIX[0][o.SBOX[j>>>24]]^o.INV_SUB_MIX[1][o.SBOX[j>>>16&255]]^o.INV_SUB_MIX[2][o.SBOX[j>>>8&255]]^o.INV_SUB_MIX[3][o.SBOX[j&255]]}this._nRounds=f,this._keySchedule=p,this._invKeySchedule=b},l.prototype.encryptBlockRaw=function(c){return c=e(c),r(c,this._keySchedule,o.SUB_MIX,o.SBOX,this._nRounds)},l.prototype.encryptBlock=function(c){var u=this.encryptBlockRaw(c),f=t.allocUnsafe(16);return f.writeUInt32BE(u[0],0),f.writeUInt32BE(u[1],4),f.writeUInt32BE(u[2],8),f.writeUInt32BE(u[3],12),f},l.prototype.decryptBlock=function(c){c=e(c);var u=c[1];c[1]=c[3],c[3]=u;var f=r(c,this._invKeySchedule,o.INV_SUB_MIX,o.INV_SBOX,this._nRounds),d=t.allocUnsafe(16);return d.writeUInt32BE(f[0],0),d.writeUInt32BE(f[3],4),d.writeUInt32BE(f[2],8),d.writeUInt32BE(f[1],12),d},l.prototype.scrub=function(){s(this._keySchedule),s(this._invKeySchedule),s(this._key)},aes$2.AES=l,aes$2}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var t=requireSafeBuffer$2().Buffer,e=t.alloc(16,0);function s(o){return[o.readUInt32BE(0),o.readUInt32BE(4),o.readUInt32BE(8),o.readUInt32BE(12)]}function r(o){var l=t.allocUnsafe(16);return l.writeUInt32BE(o[0]>>>0,0),l.writeUInt32BE(o[1]>>>0,4),l.writeUInt32BE(o[2]>>>0,8),l.writeUInt32BE(o[3]>>>0,12),l}function a(o){this.h=o,this.state=t.alloc(16,0),this.cache=t.allocUnsafe(0)}return a.prototype.ghash=function(o){for(var l=-1;++l<o.length;)this.state[l]^=o[l];this._multiply()},a.prototype._multiply=function(){for(var o=s(this.h),l=[0,0,0,0],c,u,f,d=-1;++d<128;){for(u=(this.state[~~(d/8)]&1<<7-d%8)!==0,u&&(l[0]^=o[0],l[1]^=o[1],l[2]^=o[2],l[3]^=o[3]),f=(o[3]&1)!==0,c=3;c>0;c--)o[c]=o[c]>>>1|(o[c-1]&1)<<31;o[0]=o[0]>>>1,f&&(o[0]=o[0]^225<<24)}this.state=r(l)},a.prototype.update=function(o){this.cache=t.concat([this.cache,o]);for(var l;this.cache.length>=16;)l=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(l)},a.prototype.final=function(o,l){return this.cache.length&&this.ghash(t.concat([this.cache,e],16)),this.ghash(r([0,o,0,l])),this.state},ghash=a,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var t=requireAes$1(),e=requireSafeBuffer$2().Buffer,s=requireCipherBase(),r=requireInherits_browser(),a=requireGhash(),o=requireBufferXor(),l=requireIncr32();function c(d,p){var m=0;d.length!==p.length&&m++;for(var y=Math.min(d.length,p.length),b=0;b<y;++b)m+=d[b]^p[b];return m}function u(d,p,m){if(p.length===12)return d._finID=e.concat([p,e.from([0,0,0,1])]),e.concat([p,e.from([0,0,0,2])]);var y=new a(m),b=p.length,E=b%16;y.update(p),E&&(E=16-E,y.update(e.alloc(E,0))),y.update(e.alloc(8,0));var C=b*8,j=e.alloc(8);j.writeUIntBE(C,0,8),y.update(j),d._finID=y.state;var B=e.from(d._finID);return l(B),B}function f(d,p,m,y){s.call(this);var b=e.alloc(4,0);this._cipher=new t.AES(p);var E=this._cipher.encryptBlock(b);this._ghash=new a(E),m=u(this,m,E),this._prev=e.from(m),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=y,this._alen=0,this._len=0,this._mode=d,this._authTag=null,this._called=!1}return r(f,s),f.prototype._update=function(d){if(!this._called&&this._alen){var p=16-this._alen%16;p<16&&(p=e.alloc(p,0),this._ghash.update(p))}this._called=!0;var m=this._mode.encrypt(this,d);return this._decrypt?this._ghash.update(d):this._ghash.update(m),this._len+=d.length,m},f.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var d=o(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&c(d,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=d,this._cipher.scrub()},f.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},f.prototype.setAuthTag=function(p){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=p},f.prototype.setAAD=function(p){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(p),this._alen+=p.length},authCipher=f,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var t=requireAes$1(),e=requireSafeBuffer$2().Buffer,s=requireCipherBase(),r=requireInherits_browser();function a(o,l,c,u){s.call(this),this._cipher=new t.AES(l),this._prev=e.from(c),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=u,this._mode=o}return r(a,s),a.prototype._update=function(o){return this._mode.encrypt(this,o,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},streamCipher=a,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var t=requireSafeBuffer$2().Buffer,e=requireMd5_js();function s(r,a,o,l){if(t.isBuffer(r)||(r=t.from(r,"binary")),a&&(t.isBuffer(a)||(a=t.from(a,"binary")),a.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var c=o/8,u=t.alloc(c),f=t.alloc(l||0),d=t.alloc(0);c>0||l>0;){var p=new e;p.update(d),p.update(r),a&&p.update(a),d=p.digest();var m=0;if(c>0){var y=u.length-c;m=Math.min(c,d.length),d.copy(u,y,0,m),c-=m}if(m<d.length&&l>0){var b=f.length-l,E=Math.min(l,d.length-m);d.copy(f,b,m,m+E),l-=E}}return d.fill(0),{key:u,iv:f}}return evp_bytestokey=s,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var t=requireModes$1(),e=requireAuthCipher(),s=requireSafeBuffer$2().Buffer,r=requireStreamCipher(),a=requireCipherBase(),o=requireAes$1(),l=requireEvp_bytestokey(),c=requireInherits_browser();function u(y,b,E){a.call(this),this._cache=new d,this._cipher=new o.AES(b),this._prev=s.from(E),this._mode=y,this._autopadding=!0}c(u,a),u.prototype._update=function(y){this._cache.add(y);for(var b,E,C=[];b=this._cache.get();)E=this._mode.encrypt(this,b),C.push(E);return s.concat(C)};var f=s.alloc(16,16);u.prototype._final=function(){var y=this._cache.flush();if(this._autopadding)return y=this._mode.encrypt(this,y),this._cipher.scrub(),y;if(!y.equals(f))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(y){return this._autopadding=!!y,this};function d(){this.cache=s.allocUnsafe(0)}d.prototype.add=function(y){this.cache=s.concat([this.cache,y])},d.prototype.get=function(){if(this.cache.length>15){var y=this.cache.slice(0,16);return this.cache=this.cache.slice(16),y}return null},d.prototype.flush=function(){for(var y=16-this.cache.length,b=s.allocUnsafe(y),E=-1;++E<y;)b.writeUInt8(y,E);return s.concat([this.cache,b])};function p(y,b,E){var C=t[y.toLowerCase()];if(!C)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=s.from(b)),b.length!==C.key/8)throw new TypeError("invalid key length "+b.length);if(typeof E=="string"&&(E=s.from(E)),C.mode!=="GCM"&&E.length!==C.iv)throw new TypeError("invalid iv length "+E.length);return C.type==="stream"?new r(C.module,b,E):C.type==="auth"?new e(C.module,b,E):new u(C.module,b,E)}function m(y,b){var E=t[y.toLowerCase()];if(!E)throw new TypeError("invalid suite type");var C=l(b,!1,E.key,E.iv);return p(y,C.key,C.iv)}return encrypter.createCipheriv=p,encrypter.createCipher=m,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var t=requireAuthCipher(),e=requireSafeBuffer$2().Buffer,s=requireModes$1(),r=requireStreamCipher(),a=requireCipherBase(),o=requireAes$1(),l=requireEvp_bytestokey(),c=requireInherits_browser();function u(y,b,E){a.call(this),this._cache=new f,this._last=void 0,this._cipher=new o.AES(b),this._prev=e.from(E),this._mode=y,this._autopadding=!0}c(u,a),u.prototype._update=function(y){this._cache.add(y);for(var b,E,C=[];b=this._cache.get(this._autopadding);)E=this._mode.decrypt(this,b),C.push(E);return e.concat(C)},u.prototype._final=function(){var y=this._cache.flush();if(this._autopadding)return d(this._mode.decrypt(this,y));if(y)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(y){return this._autopadding=!!y,this};function f(){this.cache=e.allocUnsafe(0)}f.prototype.add=function(y){this.cache=e.concat([this.cache,y])},f.prototype.get=function(y){var b;if(y){if(this.cache.length>16)return b=this.cache.slice(0,16),this.cache=this.cache.slice(16),b}else if(this.cache.length>=16)return b=this.cache.slice(0,16),this.cache=this.cache.slice(16),b;return null},f.prototype.flush=function(){if(this.cache.length)return this.cache};function d(y){var b=y[15];if(b<1||b>16)throw new Error("unable to decrypt data");for(var E=-1;++E<b;)if(y[E+(16-b)]!==b)throw new Error("unable to decrypt data");if(b!==16)return y.slice(0,16-b)}function p(y,b,E){var C=s[y.toLowerCase()];if(!C)throw new TypeError("invalid suite type");if(typeof E=="string"&&(E=e.from(E)),C.mode!=="GCM"&&E.length!==C.iv)throw new TypeError("invalid iv length "+E.length);if(typeof b=="string"&&(b=e.from(b)),b.length!==C.key/8)throw new TypeError("invalid key length "+b.length);return C.type==="stream"?new r(C.module,b,E,!0):C.type==="auth"?new t(C.module,b,E,!0):new u(C.module,b,E)}function m(y,b){var E=s[y.toLowerCase()];if(!E)throw new TypeError("invalid suite type");var C=l(b,!1,E.key,E.iv);return p(y,C.key,C.iv)}return decrypter.createDecipher=m,decrypter.createDecipheriv=p,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$5;hasRequiredBrowser$6=1;var t=requireEncrypter(),e=requireDecrypter(),s=require$$2$4;function r(){return Object.keys(s)}return browser$5.createCipher=browser$5.Cipher=t.createCipher,browser$5.createCipheriv=browser$5.Cipheriv=t.createCipheriv,browser$5.createDecipher=browser$5.Decipher=e.createDecipher,browser$5.createDecipheriv=browser$5.Decipheriv=e.createDecipheriv,browser$5.listCiphers=browser$5.getCiphers=r,browser$5}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,(function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}})(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$6;hasRequiredBrowser$5=1;var t=requireBrowserifyDes(),e=requireBrowser$6(),s=requireModes$1(),r=requireModes(),a=requireEvp_bytestokey();function o(d,p){d=d.toLowerCase();var m,y;if(s[d])m=s[d].key,y=s[d].iv;else if(r[d])m=r[d].key*8,y=r[d].iv;else throw new TypeError("invalid suite type");var b=a(p,!1,m,y);return c(d,b.key,b.iv)}function l(d,p){d=d.toLowerCase();var m,y;if(s[d])m=s[d].key,y=s[d].iv;else if(r[d])m=r[d].key*8,y=r[d].iv;else throw new TypeError("invalid suite type");var b=a(p,!1,m,y);return u(d,b.key,b.iv)}function c(d,p,m){if(d=d.toLowerCase(),s[d])return e.createCipheriv(d,p,m);if(r[d])return new t({key:p,iv:m,mode:d});throw new TypeError("invalid suite type")}function u(d,p,m){if(d=d.toLowerCase(),s[d])return e.createDecipheriv(d,p,m);if(r[d])return new t({key:p,iv:m,mode:d,decrypt:!0});throw new TypeError("invalid suite type")}function f(){return Object.keys(r).concat(e.getCiphers())}return browser$6.createCipher=browser$6.Cipher=o,browser$6.createCipheriv=browser$6.Cipheriv=c,browser$6.createDecipher=browser$6.Decipher=l,browser$6.createDecipheriv=browser$6.Decipheriv=u,browser$6.listCiphers=browser$6.getCiphers=f,browser$6}var browser$4={},bn$5={exports:{}},bn$4=bn$5.exports,hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,(function(t){(function(e,s){function r(z,O){if(!z)throw new Error(O||"Assertion failed")}function a(z,O){z.super_=O;var k=function(){};k.prototype=O.prototype,z.prototype=new k,z.prototype.constructor=z}function o(z,O,k){if(o.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,z!==null&&((O==="le"||O==="be")&&(k=O,O=10),this._init(z||0,O||10,k||"be"))}typeof e=="object"?e.exports=o:s.BN=o,o.BN=o,o.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=requireBuffer$1().Buffer}catch{}o.isBN=function(O){return O instanceof o?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===o.wordSize&&Array.isArray(O.words)},o.max=function(O,k){return O.cmp(k)>0?O:k},o.min=function(O,k){return O.cmp(k)<0?O:k},o.prototype._init=function(O,k,v){if(typeof O=="number")return this._initNumber(O,k,v);if(typeof O=="object")return this._initArray(O,k,v);k==="hex"&&(k=16),r(k===(k|0)&&k>=2&&k<=36),O=O.toString().replace(/\s+/g,"");var S=0;O[0]==="-"&&(S++,this.negative=1),S<O.length&&(k===16?this._parseHex(O,S,v):(this._parseBase(O,k,S),v==="le"&&this._initArray(this.toArray(),k,v)))},o.prototype._initNumber=function(O,k,v){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(r(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),k,v)},o.prototype._initArray=function(O,k,v){if(r(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var N,R,T=0;if(v==="be")for(S=O.length-1,N=0;S>=0;S-=3)R=O[S]|O[S-1]<<8|O[S-2]<<16,this.words[N]|=R<<T&67108863,this.words[N+1]=R>>>26-T&67108863,T+=24,T>=26&&(T-=26,N++);else if(v==="le")for(S=0,N=0;S<O.length;S+=3)R=O[S]|O[S+1]<<8|O[S+2]<<16,this.words[N]|=R<<T&67108863,this.words[N+1]=R>>>26-T&67108863,T+=24,T>=26&&(T-=26,N++);return this.strip()};function c(z,O){var k=z.charCodeAt(O);return k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:k-48&15}function u(z,O,k){var v=c(z,k);return k-1>=O&&(v|=c(z,k-1)<<4),v}o.prototype._parseHex=function(O,k,v){this.length=Math.ceil((O.length-k)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var N=0,R=0,T;if(v==="be")for(S=O.length-1;S>=k;S-=2)T=u(O,k,S)<<N,this.words[R]|=T&67108863,N>=18?(N-=18,R+=1,this.words[R]|=T>>>26):N+=8;else{var M=O.length-k;for(S=M%2===0?k+1:k;S<O.length;S+=2)T=u(O,k,S)<<N,this.words[R]|=T&67108863,N>=18?(N-=18,R+=1,this.words[R]|=T>>>26):N+=8}this.strip()};function f(z,O,k,v){for(var S=0,N=Math.min(z.length,k),R=O;R<N;R++){var T=z.charCodeAt(R)-48;S*=v,T>=49?S+=T-49+10:T>=17?S+=T-17+10:S+=T}return S}o.prototype._parseBase=function(O,k,v){this.words=[0],this.length=1;for(var S=0,N=1;N<=67108863;N*=k)S++;S--,N=N/k|0;for(var R=O.length-v,T=R%S,M=Math.min(R,R-T)+v,I=0,$=v;$<M;$+=S)I=f(O,$,$+S,k),this.imuln(N),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(T!==0){var A=1;for(I=f(O,$,O.length,k),$=0;$<T;$++)A*=k;this.imuln(A),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this.strip()},o.prototype.copy=function(O){O.words=new Array(this.length);for(var k=0;k<this.length;k++)O.words[k]=this.words[k];O.length=this.length,O.negative=this.negative,O.red=this.red},o.prototype.clone=function(){var O=new o(null);return this.copy(O),O},o.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(O,k){O=O||10,k=k|0||1;var v;if(O===16||O==="hex"){v="";for(var S=0,N=0,R=0;R<this.length;R++){var T=this.words[R],M=((T<<S|N)&16777215).toString(16);N=T>>>24-S&16777215,S+=2,S>=26&&(S-=26,R--),N!==0||R!==this.length-1?v=d[6-M.length]+M+v:v=M+v}for(N!==0&&(v=N.toString(16)+v);v.length%k!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(O===(O|0)&&O>=2&&O<=36){var I=p[O],$=m[O];v="";var A=this.clone();for(A.negative=0;!A.isZero();){var L=A.modn($).toString(O);A=A.idivn($),A.isZero()?v=L+v:v=d[I-L.length]+L+v}for(this.isZero()&&(v="0"+v);v.length%k!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(O,k){return r(typeof l<"u"),this.toArrayLike(l,O,k)},o.prototype.toArray=function(O,k){return this.toArrayLike(Array,O,k)},o.prototype.toArrayLike=function(O,k,v){var S=this.byteLength(),N=v||Math.max(1,S);r(S<=N,"byte array longer than desired length"),r(N>0,"Requested array length <= 0"),this.strip();var R=k==="le",T=new O(N),M,I,$=this.clone();if(R){for(I=0;!$.isZero();I++)M=$.andln(255),$.iushrn(8),T[I]=M;for(;I<N;I++)T[I]=0}else{for(I=0;I<N-S;I++)T[I]=0;for(I=0;!$.isZero();I++)M=$.andln(255),$.iushrn(8),T[N-I-1]=M}return T},Math.clz32?o.prototype._countBits=function(O){return 32-Math.clz32(O)}:o.prototype._countBits=function(O){var k=O,v=0;return k>=4096&&(v+=13,k>>>=13),k>=64&&(v+=7,k>>>=7),k>=8&&(v+=4,k>>>=4),k>=2&&(v+=2,k>>>=2),v+k},o.prototype._zeroBits=function(O){if(O===0)return 26;var k=O,v=0;return(k&8191)===0&&(v+=13,k>>>=13),(k&127)===0&&(v+=7,k>>>=7),(k&15)===0&&(v+=4,k>>>=4),(k&3)===0&&(v+=2,k>>>=2),(k&1)===0&&v++,v},o.prototype.bitLength=function(){var O=this.words[this.length-1],k=this._countBits(O);return(this.length-1)*26+k};function y(z){for(var O=new Array(z.bitLength()),k=0;k<O.length;k++){var v=k/26|0,S=k%26;O[k]=(z.words[v]&1<<S)>>>S}return O}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,k=0;k<this.length;k++){var v=this._zeroBits(this.words[k]);if(O+=v,v!==26)break}return O},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},o.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var k=0;k<O.length;k++)this.words[k]=this.words[k]|O.words[k];return this.strip()},o.prototype.ior=function(O){return r((this.negative|O.negative)===0),this.iuor(O)},o.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},o.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},o.prototype.iuand=function(O){var k;this.length>O.length?k=O:k=this;for(var v=0;v<k.length;v++)this.words[v]=this.words[v]&O.words[v];return this.length=k.length,this.strip()},o.prototype.iand=function(O){return r((this.negative|O.negative)===0),this.iuand(O)},o.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},o.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},o.prototype.iuxor=function(O){var k,v;this.length>O.length?(k=this,v=O):(k=O,v=this);for(var S=0;S<v.length;S++)this.words[S]=k.words[S]^v.words[S];if(this!==k)for(;S<k.length;S++)this.words[S]=k.words[S];return this.length=k.length,this.strip()},o.prototype.ixor=function(O){return r((this.negative|O.negative)===0),this.iuxor(O)},o.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},o.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},o.prototype.inotn=function(O){r(typeof O=="number"&&O>=0);var k=Math.ceil(O/26)|0,v=O%26;this._expand(k),v>0&&k--;for(var S=0;S<k;S++)this.words[S]=~this.words[S]&67108863;return v>0&&(this.words[S]=~this.words[S]&67108863>>26-v),this.strip()},o.prototype.notn=function(O){return this.clone().inotn(O)},o.prototype.setn=function(O,k){r(typeof O=="number"&&O>=0);var v=O/26|0,S=O%26;return this._expand(v+1),k?this.words[v]=this.words[v]|1<<S:this.words[v]=this.words[v]&~(1<<S),this.strip()},o.prototype.iadd=function(O){var k;if(this.negative!==0&&O.negative===0)return this.negative=0,k=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,k=this.isub(O),O.negative=1,k._normSign();var v,S;this.length>O.length?(v=this,S=O):(v=O,S=this);for(var N=0,R=0;R<S.length;R++)k=(v.words[R]|0)+(S.words[R]|0)+N,this.words[R]=k&67108863,N=k>>>26;for(;N!==0&&R<v.length;R++)k=(v.words[R]|0)+N,this.words[R]=k&67108863,N=k>>>26;if(this.length=v.length,N!==0)this.words[this.length]=N,this.length++;else if(v!==this)for(;R<v.length;R++)this.words[R]=v.words[R];return this},o.prototype.add=function(O){var k;return O.negative!==0&&this.negative===0?(O.negative=0,k=this.sub(O),O.negative^=1,k):O.negative===0&&this.negative!==0?(this.negative=0,k=O.sub(this),this.negative=1,k):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},o.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var k=this.iadd(O);return O.negative=1,k._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var v=this.cmp(O);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,N;v>0?(S=this,N=O):(S=O,N=this);for(var R=0,T=0;T<N.length;T++)k=(S.words[T]|0)-(N.words[T]|0)+R,R=k>>26,this.words[T]=k&67108863;for(;R!==0&&T<S.length;T++)k=(S.words[T]|0)+R,R=k>>26,this.words[T]=k&67108863;if(R===0&&T<S.length&&S!==this)for(;T<S.length;T++)this.words[T]=S.words[T];return this.length=Math.max(this.length,T),S!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(O){return this.clone().isub(O)};function b(z,O,k){k.negative=O.negative^z.negative;var v=z.length+O.length|0;k.length=v,v=v-1|0;var S=z.words[0]|0,N=O.words[0]|0,R=S*N,T=R&67108863,M=R/67108864|0;k.words[0]=T;for(var I=1;I<v;I++){for(var $=M>>>26,A=M&67108863,L=Math.min(I,O.length-1),Y=Math.max(0,I-z.length+1);Y<=L;Y++){var oe=I-Y|0;S=z.words[oe]|0,N=O.words[Y]|0,R=S*N+A,$+=R/67108864|0,A=R&67108863}k.words[I]=A|0,M=$|0}return M!==0?k.words[I]=M|0:k.length--,k.strip()}var E=function(O,k,v){var S=O.words,N=k.words,R=v.words,T=0,M,I,$,A=S[0]|0,L=A&8191,Y=A>>>13,oe=S[1]|0,J=oe&8191,U=oe>>>13,G=S[2]|0,ae=G&8191,he=G>>>13,le=S[3]|0,te=le&8191,pe=le>>>13,xe=S[4]|0,be=xe&8191,ce=xe>>>13,re=S[5]|0,ie=re&8191,fe=re>>>13,ye=S[6]|0,we=ye&8191,Re=ye>>>13,Me=S[7]|0,ke=Me&8191,Le=Me>>>13,Fe=S[8]|0,Te=Fe&8191,Be=Fe>>>13,ze=S[9]|0,de=ze&8191,ne=ze>>>13,se=N[0]|0,me=se&8191,Ee=se>>>13,_e=N[1]|0,ve=_e&8191,Ae=_e>>>13,Oe=N[2]|0,Ue=Oe&8191,Ke=Oe>>>13,We=N[3]|0,Ve=We&8191,xt=We>>>13,lt=N[4]|0,Xe=lt&8191,St=lt>>>13,ct=N[5]|0,Pe=ct&8191,Qe=ct>>>13,Ze=N[6]|0,Ye=Ze&8191,at=Ze>>>13,it=N[7]|0,et=it&8191,Ct=it>>>13,ft=N[8]|0,tt=ft&8191,Et=ft>>>13,nt=N[9]|0,Je=nt&8191,Rt=nt>>>13;v.negative=O.negative^k.negative,v.length=19,M=Math.imul(L,me),I=Math.imul(L,Ee),I=I+Math.imul(Y,me)|0,$=Math.imul(Y,Ee);var dt=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(dt>>>26)|0,dt&=67108863,M=Math.imul(J,me),I=Math.imul(J,Ee),I=I+Math.imul(U,me)|0,$=Math.imul(U,Ee),M=M+Math.imul(L,ve)|0,I=I+Math.imul(L,Ae)|0,I=I+Math.imul(Y,ve)|0,$=$+Math.imul(Y,Ae)|0;var ht=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(ht>>>26)|0,ht&=67108863,M=Math.imul(ae,me),I=Math.imul(ae,Ee),I=I+Math.imul(he,me)|0,$=Math.imul(he,Ee),M=M+Math.imul(J,ve)|0,I=I+Math.imul(J,Ae)|0,I=I+Math.imul(U,ve)|0,$=$+Math.imul(U,Ae)|0,M=M+Math.imul(L,Ue)|0,I=I+Math.imul(L,Ke)|0,I=I+Math.imul(Y,Ue)|0,$=$+Math.imul(Y,Ke)|0;var wr=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(wr>>>26)|0,wr&=67108863,M=Math.imul(te,me),I=Math.imul(te,Ee),I=I+Math.imul(pe,me)|0,$=Math.imul(pe,Ee),M=M+Math.imul(ae,ve)|0,I=I+Math.imul(ae,Ae)|0,I=I+Math.imul(he,ve)|0,$=$+Math.imul(he,Ae)|0,M=M+Math.imul(J,Ue)|0,I=I+Math.imul(J,Ke)|0,I=I+Math.imul(U,Ue)|0,$=$+Math.imul(U,Ke)|0,M=M+Math.imul(L,Ve)|0,I=I+Math.imul(L,xt)|0,I=I+Math.imul(Y,Ve)|0,$=$+Math.imul(Y,xt)|0;var cr=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(cr>>>26)|0,cr&=67108863,M=Math.imul(be,me),I=Math.imul(be,Ee),I=I+Math.imul(ce,me)|0,$=Math.imul(ce,Ee),M=M+Math.imul(te,ve)|0,I=I+Math.imul(te,Ae)|0,I=I+Math.imul(pe,ve)|0,$=$+Math.imul(pe,Ae)|0,M=M+Math.imul(ae,Ue)|0,I=I+Math.imul(ae,Ke)|0,I=I+Math.imul(he,Ue)|0,$=$+Math.imul(he,Ke)|0,M=M+Math.imul(J,Ve)|0,I=I+Math.imul(J,xt)|0,I=I+Math.imul(U,Ve)|0,$=$+Math.imul(U,xt)|0,M=M+Math.imul(L,Xe)|0,I=I+Math.imul(L,St)|0,I=I+Math.imul(Y,Xe)|0,$=$+Math.imul(Y,St)|0;var tr=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(tr>>>26)|0,tr&=67108863,M=Math.imul(ie,me),I=Math.imul(ie,Ee),I=I+Math.imul(fe,me)|0,$=Math.imul(fe,Ee),M=M+Math.imul(be,ve)|0,I=I+Math.imul(be,Ae)|0,I=I+Math.imul(ce,ve)|0,$=$+Math.imul(ce,Ae)|0,M=M+Math.imul(te,Ue)|0,I=I+Math.imul(te,Ke)|0,I=I+Math.imul(pe,Ue)|0,$=$+Math.imul(pe,Ke)|0,M=M+Math.imul(ae,Ve)|0,I=I+Math.imul(ae,xt)|0,I=I+Math.imul(he,Ve)|0,$=$+Math.imul(he,xt)|0,M=M+Math.imul(J,Xe)|0,I=I+Math.imul(J,St)|0,I=I+Math.imul(U,Xe)|0,$=$+Math.imul(U,St)|0,M=M+Math.imul(L,Pe)|0,I=I+Math.imul(L,Qe)|0,I=I+Math.imul(Y,Pe)|0,$=$+Math.imul(Y,Qe)|0;var or=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(or>>>26)|0,or&=67108863,M=Math.imul(we,me),I=Math.imul(we,Ee),I=I+Math.imul(Re,me)|0,$=Math.imul(Re,Ee),M=M+Math.imul(ie,ve)|0,I=I+Math.imul(ie,Ae)|0,I=I+Math.imul(fe,ve)|0,$=$+Math.imul(fe,Ae)|0,M=M+Math.imul(be,Ue)|0,I=I+Math.imul(be,Ke)|0,I=I+Math.imul(ce,Ue)|0,$=$+Math.imul(ce,Ke)|0,M=M+Math.imul(te,Ve)|0,I=I+Math.imul(te,xt)|0,I=I+Math.imul(pe,Ve)|0,$=$+Math.imul(pe,xt)|0,M=M+Math.imul(ae,Xe)|0,I=I+Math.imul(ae,St)|0,I=I+Math.imul(he,Xe)|0,$=$+Math.imul(he,St)|0,M=M+Math.imul(J,Pe)|0,I=I+Math.imul(J,Qe)|0,I=I+Math.imul(U,Pe)|0,$=$+Math.imul(U,Qe)|0,M=M+Math.imul(L,Ye)|0,I=I+Math.imul(L,at)|0,I=I+Math.imul(Y,Ye)|0,$=$+Math.imul(Y,at)|0;var Jt=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,M=Math.imul(ke,me),I=Math.imul(ke,Ee),I=I+Math.imul(Le,me)|0,$=Math.imul(Le,Ee),M=M+Math.imul(we,ve)|0,I=I+Math.imul(we,Ae)|0,I=I+Math.imul(Re,ve)|0,$=$+Math.imul(Re,Ae)|0,M=M+Math.imul(ie,Ue)|0,I=I+Math.imul(ie,Ke)|0,I=I+Math.imul(fe,Ue)|0,$=$+Math.imul(fe,Ke)|0,M=M+Math.imul(be,Ve)|0,I=I+Math.imul(be,xt)|0,I=I+Math.imul(ce,Ve)|0,$=$+Math.imul(ce,xt)|0,M=M+Math.imul(te,Xe)|0,I=I+Math.imul(te,St)|0,I=I+Math.imul(pe,Xe)|0,$=$+Math.imul(pe,St)|0,M=M+Math.imul(ae,Pe)|0,I=I+Math.imul(ae,Qe)|0,I=I+Math.imul(he,Pe)|0,$=$+Math.imul(he,Qe)|0,M=M+Math.imul(J,Ye)|0,I=I+Math.imul(J,at)|0,I=I+Math.imul(U,Ye)|0,$=$+Math.imul(U,at)|0,M=M+Math.imul(L,et)|0,I=I+Math.imul(L,Ct)|0,I=I+Math.imul(Y,et)|0,$=$+Math.imul(Y,Ct)|0;var Xt=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,M=Math.imul(Te,me),I=Math.imul(Te,Ee),I=I+Math.imul(Be,me)|0,$=Math.imul(Be,Ee),M=M+Math.imul(ke,ve)|0,I=I+Math.imul(ke,Ae)|0,I=I+Math.imul(Le,ve)|0,$=$+Math.imul(Le,Ae)|0,M=M+Math.imul(we,Ue)|0,I=I+Math.imul(we,Ke)|0,I=I+Math.imul(Re,Ue)|0,$=$+Math.imul(Re,Ke)|0,M=M+Math.imul(ie,Ve)|0,I=I+Math.imul(ie,xt)|0,I=I+Math.imul(fe,Ve)|0,$=$+Math.imul(fe,xt)|0,M=M+Math.imul(be,Xe)|0,I=I+Math.imul(be,St)|0,I=I+Math.imul(ce,Xe)|0,$=$+Math.imul(ce,St)|0,M=M+Math.imul(te,Pe)|0,I=I+Math.imul(te,Qe)|0,I=I+Math.imul(pe,Pe)|0,$=$+Math.imul(pe,Qe)|0,M=M+Math.imul(ae,Ye)|0,I=I+Math.imul(ae,at)|0,I=I+Math.imul(he,Ye)|0,$=$+Math.imul(he,at)|0,M=M+Math.imul(J,et)|0,I=I+Math.imul(J,Ct)|0,I=I+Math.imul(U,et)|0,$=$+Math.imul(U,Ct)|0,M=M+Math.imul(L,tt)|0,I=I+Math.imul(L,Et)|0,I=I+Math.imul(Y,tt)|0,$=$+Math.imul(Y,Et)|0;var rr=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(rr>>>26)|0,rr&=67108863,M=Math.imul(de,me),I=Math.imul(de,Ee),I=I+Math.imul(ne,me)|0,$=Math.imul(ne,Ee),M=M+Math.imul(Te,ve)|0,I=I+Math.imul(Te,Ae)|0,I=I+Math.imul(Be,ve)|0,$=$+Math.imul(Be,Ae)|0,M=M+Math.imul(ke,Ue)|0,I=I+Math.imul(ke,Ke)|0,I=I+Math.imul(Le,Ue)|0,$=$+Math.imul(Le,Ke)|0,M=M+Math.imul(we,Ve)|0,I=I+Math.imul(we,xt)|0,I=I+Math.imul(Re,Ve)|0,$=$+Math.imul(Re,xt)|0,M=M+Math.imul(ie,Xe)|0,I=I+Math.imul(ie,St)|0,I=I+Math.imul(fe,Xe)|0,$=$+Math.imul(fe,St)|0,M=M+Math.imul(be,Pe)|0,I=I+Math.imul(be,Qe)|0,I=I+Math.imul(ce,Pe)|0,$=$+Math.imul(ce,Qe)|0,M=M+Math.imul(te,Ye)|0,I=I+Math.imul(te,at)|0,I=I+Math.imul(pe,Ye)|0,$=$+Math.imul(pe,at)|0,M=M+Math.imul(ae,et)|0,I=I+Math.imul(ae,Ct)|0,I=I+Math.imul(he,et)|0,$=$+Math.imul(he,Ct)|0,M=M+Math.imul(J,tt)|0,I=I+Math.imul(J,Et)|0,I=I+Math.imul(U,tt)|0,$=$+Math.imul(U,Et)|0,M=M+Math.imul(L,Je)|0,I=I+Math.imul(L,Rt)|0,I=I+Math.imul(Y,Je)|0,$=$+Math.imul(Y,Rt)|0;var Qt=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,M=Math.imul(de,ve),I=Math.imul(de,Ae),I=I+Math.imul(ne,ve)|0,$=Math.imul(ne,Ae),M=M+Math.imul(Te,Ue)|0,I=I+Math.imul(Te,Ke)|0,I=I+Math.imul(Be,Ue)|0,$=$+Math.imul(Be,Ke)|0,M=M+Math.imul(ke,Ve)|0,I=I+Math.imul(ke,xt)|0,I=I+Math.imul(Le,Ve)|0,$=$+Math.imul(Le,xt)|0,M=M+Math.imul(we,Xe)|0,I=I+Math.imul(we,St)|0,I=I+Math.imul(Re,Xe)|0,$=$+Math.imul(Re,St)|0,M=M+Math.imul(ie,Pe)|0,I=I+Math.imul(ie,Qe)|0,I=I+Math.imul(fe,Pe)|0,$=$+Math.imul(fe,Qe)|0,M=M+Math.imul(be,Ye)|0,I=I+Math.imul(be,at)|0,I=I+Math.imul(ce,Ye)|0,$=$+Math.imul(ce,at)|0,M=M+Math.imul(te,et)|0,I=I+Math.imul(te,Ct)|0,I=I+Math.imul(pe,et)|0,$=$+Math.imul(pe,Ct)|0,M=M+Math.imul(ae,tt)|0,I=I+Math.imul(ae,Et)|0,I=I+Math.imul(he,tt)|0,$=$+Math.imul(he,Et)|0,M=M+Math.imul(J,Je)|0,I=I+Math.imul(J,Rt)|0,I=I+Math.imul(U,Je)|0,$=$+Math.imul(U,Rt)|0;var Tt=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,M=Math.imul(de,Ue),I=Math.imul(de,Ke),I=I+Math.imul(ne,Ue)|0,$=Math.imul(ne,Ke),M=M+Math.imul(Te,Ve)|0,I=I+Math.imul(Te,xt)|0,I=I+Math.imul(Be,Ve)|0,$=$+Math.imul(Be,xt)|0,M=M+Math.imul(ke,Xe)|0,I=I+Math.imul(ke,St)|0,I=I+Math.imul(Le,Xe)|0,$=$+Math.imul(Le,St)|0,M=M+Math.imul(we,Pe)|0,I=I+Math.imul(we,Qe)|0,I=I+Math.imul(Re,Pe)|0,$=$+Math.imul(Re,Qe)|0,M=M+Math.imul(ie,Ye)|0,I=I+Math.imul(ie,at)|0,I=I+Math.imul(fe,Ye)|0,$=$+Math.imul(fe,at)|0,M=M+Math.imul(be,et)|0,I=I+Math.imul(be,Ct)|0,I=I+Math.imul(ce,et)|0,$=$+Math.imul(ce,Ct)|0,M=M+Math.imul(te,tt)|0,I=I+Math.imul(te,Et)|0,I=I+Math.imul(pe,tt)|0,$=$+Math.imul(pe,Et)|0,M=M+Math.imul(ae,Je)|0,I=I+Math.imul(ae,Rt)|0,I=I+Math.imul(he,Je)|0,$=$+Math.imul(he,Rt)|0;var ur=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(ur>>>26)|0,ur&=67108863,M=Math.imul(de,Ve),I=Math.imul(de,xt),I=I+Math.imul(ne,Ve)|0,$=Math.imul(ne,xt),M=M+Math.imul(Te,Xe)|0,I=I+Math.imul(Te,St)|0,I=I+Math.imul(Be,Xe)|0,$=$+Math.imul(Be,St)|0,M=M+Math.imul(ke,Pe)|0,I=I+Math.imul(ke,Qe)|0,I=I+Math.imul(Le,Pe)|0,$=$+Math.imul(Le,Qe)|0,M=M+Math.imul(we,Ye)|0,I=I+Math.imul(we,at)|0,I=I+Math.imul(Re,Ye)|0,$=$+Math.imul(Re,at)|0,M=M+Math.imul(ie,et)|0,I=I+Math.imul(ie,Ct)|0,I=I+Math.imul(fe,et)|0,$=$+Math.imul(fe,Ct)|0,M=M+Math.imul(be,tt)|0,I=I+Math.imul(be,Et)|0,I=I+Math.imul(ce,tt)|0,$=$+Math.imul(ce,Et)|0,M=M+Math.imul(te,Je)|0,I=I+Math.imul(te,Rt)|0,I=I+Math.imul(pe,Je)|0,$=$+Math.imul(pe,Rt)|0;var dr=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(dr>>>26)|0,dr&=67108863,M=Math.imul(de,Xe),I=Math.imul(de,St),I=I+Math.imul(ne,Xe)|0,$=Math.imul(ne,St),M=M+Math.imul(Te,Pe)|0,I=I+Math.imul(Te,Qe)|0,I=I+Math.imul(Be,Pe)|0,$=$+Math.imul(Be,Qe)|0,M=M+Math.imul(ke,Ye)|0,I=I+Math.imul(ke,at)|0,I=I+Math.imul(Le,Ye)|0,$=$+Math.imul(Le,at)|0,M=M+Math.imul(we,et)|0,I=I+Math.imul(we,Ct)|0,I=I+Math.imul(Re,et)|0,$=$+Math.imul(Re,Ct)|0,M=M+Math.imul(ie,tt)|0,I=I+Math.imul(ie,Et)|0,I=I+Math.imul(fe,tt)|0,$=$+Math.imul(fe,Et)|0,M=M+Math.imul(be,Je)|0,I=I+Math.imul(be,Rt)|0,I=I+Math.imul(ce,Je)|0,$=$+Math.imul(ce,Rt)|0;var Wt=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,M=Math.imul(de,Pe),I=Math.imul(de,Qe),I=I+Math.imul(ne,Pe)|0,$=Math.imul(ne,Qe),M=M+Math.imul(Te,Ye)|0,I=I+Math.imul(Te,at)|0,I=I+Math.imul(Be,Ye)|0,$=$+Math.imul(Be,at)|0,M=M+Math.imul(ke,et)|0,I=I+Math.imul(ke,Ct)|0,I=I+Math.imul(Le,et)|0,$=$+Math.imul(Le,Ct)|0,M=M+Math.imul(we,tt)|0,I=I+Math.imul(we,Et)|0,I=I+Math.imul(Re,tt)|0,$=$+Math.imul(Re,Et)|0,M=M+Math.imul(ie,Je)|0,I=I+Math.imul(ie,Rt)|0,I=I+Math.imul(fe,Je)|0,$=$+Math.imul(fe,Rt)|0;var Zt=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,M=Math.imul(de,Ye),I=Math.imul(de,at),I=I+Math.imul(ne,Ye)|0,$=Math.imul(ne,at),M=M+Math.imul(Te,et)|0,I=I+Math.imul(Te,Ct)|0,I=I+Math.imul(Be,et)|0,$=$+Math.imul(Be,Ct)|0,M=M+Math.imul(ke,tt)|0,I=I+Math.imul(ke,Et)|0,I=I+Math.imul(Le,tt)|0,$=$+Math.imul(Le,Et)|0,M=M+Math.imul(we,Je)|0,I=I+Math.imul(we,Rt)|0,I=I+Math.imul(Re,Je)|0,$=$+Math.imul(Re,Rt)|0;var Er=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(Er>>>26)|0,Er&=67108863,M=Math.imul(de,et),I=Math.imul(de,Ct),I=I+Math.imul(ne,et)|0,$=Math.imul(ne,Ct),M=M+Math.imul(Te,tt)|0,I=I+Math.imul(Te,Et)|0,I=I+Math.imul(Be,tt)|0,$=$+Math.imul(Be,Et)|0,M=M+Math.imul(ke,Je)|0,I=I+Math.imul(ke,Rt)|0,I=I+Math.imul(Le,Je)|0,$=$+Math.imul(Le,Rt)|0;var fr=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(fr>>>26)|0,fr&=67108863,M=Math.imul(de,tt),I=Math.imul(de,Et),I=I+Math.imul(ne,tt)|0,$=Math.imul(ne,Et),M=M+Math.imul(Te,Je)|0,I=I+Math.imul(Te,Rt)|0,I=I+Math.imul(Be,Je)|0,$=$+Math.imul(Be,Rt)|0;var hr=(T+M|0)+((I&8191)<<13)|0;T=($+(I>>>13)|0)+(hr>>>26)|0,hr&=67108863,M=Math.imul(de,Je),I=Math.imul(de,Rt),I=I+Math.imul(ne,Je)|0,$=Math.imul(ne,Rt);var _r=(T+M|0)+((I&8191)<<13)|0;return T=($+(I>>>13)|0)+(_r>>>26)|0,_r&=67108863,R[0]=dt,R[1]=ht,R[2]=wr,R[3]=cr,R[4]=tr,R[5]=or,R[6]=Jt,R[7]=Xt,R[8]=rr,R[9]=Qt,R[10]=Tt,R[11]=ur,R[12]=dr,R[13]=Wt,R[14]=Zt,R[15]=Er,R[16]=fr,R[17]=hr,R[18]=_r,T!==0&&(R[19]=T,v.length++),v};Math.imul||(E=b);function C(z,O,k){k.negative=O.negative^z.negative,k.length=z.length+O.length;for(var v=0,S=0,N=0;N<k.length-1;N++){var R=S;S=0;for(var T=v&67108863,M=Math.min(N,O.length-1),I=Math.max(0,N-z.length+1);I<=M;I++){var $=N-I,A=z.words[$]|0,L=O.words[I]|0,Y=A*L,oe=Y&67108863;R=R+(Y/67108864|0)|0,oe=oe+T|0,T=oe&67108863,R=R+(oe>>>26)|0,S+=R>>>26,R&=67108863}k.words[N]=T,v=R,R=S}return v!==0?k.words[N]=v:k.length--,k.strip()}function j(z,O,k){var v=new B;return v.mulp(z,O,k)}o.prototype.mulTo=function(O,k){var v,S=this.length+O.length;return this.length===10&&O.length===10?v=E(this,O,k):S<63?v=b(this,O,k):S<1024?v=C(this,O,k):v=j(this,O,k),v};function B(z,O){this.x=z,this.y=O}B.prototype.makeRBT=function(O){for(var k=new Array(O),v=o.prototype._countBits(O)-1,S=0;S<O;S++)k[S]=this.revBin(S,v,O);return k},B.prototype.revBin=function(O,k,v){if(O===0||O===v-1)return O;for(var S=0,N=0;N<k;N++)S|=(O&1)<<k-N-1,O>>=1;return S},B.prototype.permute=function(O,k,v,S,N,R){for(var T=0;T<R;T++)S[T]=k[O[T]],N[T]=v[O[T]]},B.prototype.transform=function(O,k,v,S,N,R){this.permute(R,O,k,v,S,N);for(var T=1;T<N;T<<=1)for(var M=T<<1,I=Math.cos(2*Math.PI/M),$=Math.sin(2*Math.PI/M),A=0;A<N;A+=M)for(var L=I,Y=$,oe=0;oe<T;oe++){var J=v[A+oe],U=S[A+oe],G=v[A+oe+T],ae=S[A+oe+T],he=L*G-Y*ae;ae=L*ae+Y*G,G=he,v[A+oe]=J+G,S[A+oe]=U+ae,v[A+oe+T]=J-G,S[A+oe+T]=U-ae,oe!==M&&(he=I*L-$*Y,Y=I*Y+$*L,L=he)}},B.prototype.guessLen13b=function(O,k){var v=Math.max(k,O)|1,S=v&1,N=0;for(v=v/2|0;v;v=v>>>1)N++;return 1<<N+1+S},B.prototype.conjugate=function(O,k,v){if(!(v<=1))for(var S=0;S<v/2;S++){var N=O[S];O[S]=O[v-S-1],O[v-S-1]=N,N=k[S],k[S]=-k[v-S-1],k[v-S-1]=-N}},B.prototype.normalize13b=function(O,k){for(var v=0,S=0;S<k/2;S++){var N=Math.round(O[2*S+1]/k)*8192+Math.round(O[2*S]/k)+v;O[S]=N&67108863,N<67108864?v=0:v=N/67108864|0}return O},B.prototype.convert13b=function(O,k,v,S){for(var N=0,R=0;R<k;R++)N=N+(O[R]|0),v[2*R]=N&8191,N=N>>>13,v[2*R+1]=N&8191,N=N>>>13;for(R=2*k;R<S;++R)v[R]=0;r(N===0),r((N&-8192)===0)},B.prototype.stub=function(O){for(var k=new Array(O),v=0;v<O;v++)k[v]=0;return k},B.prototype.mulp=function(O,k,v){var S=2*this.guessLen13b(O.length,k.length),N=this.makeRBT(S),R=this.stub(S),T=new Array(S),M=new Array(S),I=new Array(S),$=new Array(S),A=new Array(S),L=new Array(S),Y=v.words;Y.length=S,this.convert13b(O.words,O.length,T,S),this.convert13b(k.words,k.length,$,S),this.transform(T,R,M,I,S,N),this.transform($,R,A,L,S,N);for(var oe=0;oe<S;oe++){var J=M[oe]*A[oe]-I[oe]*L[oe];I[oe]=M[oe]*L[oe]+I[oe]*A[oe],M[oe]=J}return this.conjugate(M,I,S),this.transform(M,I,Y,R,S,N),this.conjugate(Y,R,S),this.normalize13b(Y,S),v.negative=O.negative^k.negative,v.length=O.length+k.length,v.strip()},o.prototype.mul=function(O){var k=new o(null);return k.words=new Array(this.length+O.length),this.mulTo(O,k)},o.prototype.mulf=function(O){var k=new o(null);return k.words=new Array(this.length+O.length),j(this,O,k)},o.prototype.imul=function(O){return this.clone().mulTo(O,this)},o.prototype.imuln=function(O){r(typeof O=="number"),r(O<67108864);for(var k=0,v=0;v<this.length;v++){var S=(this.words[v]|0)*O,N=(S&67108863)+(k&67108863);k>>=26,k+=S/67108864|0,k+=N>>>26,this.words[v]=N&67108863}return k!==0&&(this.words[v]=k,this.length++),this.length=O===0?1:this.length,this},o.prototype.muln=function(O){return this.clone().imuln(O)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(O){var k=y(O);if(k.length===0)return new o(1);for(var v=this,S=0;S<k.length&&k[S]===0;S++,v=v.sqr());if(++S<k.length)for(var N=v.sqr();S<k.length;S++,N=N.sqr())k[S]!==0&&(v=v.mul(N));return v},o.prototype.iushln=function(O){r(typeof O=="number"&&O>=0);var k=O%26,v=(O-k)/26,S=67108863>>>26-k<<26-k,N;if(k!==0){var R=0;for(N=0;N<this.length;N++){var T=this.words[N]&S,M=(this.words[N]|0)-T<<k;this.words[N]=M|R,R=T>>>26-k}R&&(this.words[N]=R,this.length++)}if(v!==0){for(N=this.length-1;N>=0;N--)this.words[N+v]=this.words[N];for(N=0;N<v;N++)this.words[N]=0;this.length+=v}return this.strip()},o.prototype.ishln=function(O){return r(this.negative===0),this.iushln(O)},o.prototype.iushrn=function(O,k,v){r(typeof O=="number"&&O>=0);var S;k?S=(k-k%26)/26:S=0;var N=O%26,R=Math.min((O-N)/26,this.length),T=67108863^67108863>>>N<<N,M=v;if(S-=R,S=Math.max(0,S),M){for(var I=0;I<R;I++)M.words[I]=this.words[I];M.length=R}if(R!==0)if(this.length>R)for(this.length-=R,I=0;I<this.length;I++)this.words[I]=this.words[I+R];else this.words[0]=0,this.length=1;var $=0;for(I=this.length-1;I>=0&&($!==0||I>=S);I--){var A=this.words[I]|0;this.words[I]=$<<26-N|A>>>N,$=A&T}return M&&$!==0&&(M.words[M.length++]=$),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(O,k,v){return r(this.negative===0),this.iushrn(O,k,v)},o.prototype.shln=function(O){return this.clone().ishln(O)},o.prototype.ushln=function(O){return this.clone().iushln(O)},o.prototype.shrn=function(O){return this.clone().ishrn(O)},o.prototype.ushrn=function(O){return this.clone().iushrn(O)},o.prototype.testn=function(O){r(typeof O=="number"&&O>=0);var k=O%26,v=(O-k)/26,S=1<<k;if(this.length<=v)return!1;var N=this.words[v];return!!(N&S)},o.prototype.imaskn=function(O){r(typeof O=="number"&&O>=0);var k=O%26,v=(O-k)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(k!==0&&v++,this.length=Math.min(v,this.length),k!==0){var S=67108863^67108863>>>k<<k;this.words[this.length-1]&=S}return this.strip()},o.prototype.maskn=function(O){return this.clone().imaskn(O)},o.prototype.iaddn=function(O){return r(typeof O=="number"),r(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},o.prototype._iaddn=function(O){this.words[0]+=O;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},o.prototype.isubn=function(O){if(r(typeof O=="number"),r(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this.strip()},o.prototype.addn=function(O){return this.clone().iaddn(O)},o.prototype.subn=function(O){return this.clone().isubn(O)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(O,k,v){var S=O.length+v,N;this._expand(S);var R,T=0;for(N=0;N<O.length;N++){R=(this.words[N+v]|0)+T;var M=(O.words[N]|0)*k;R-=M&67108863,T=(R>>26)-(M/67108864|0),this.words[N+v]=R&67108863}for(;N<this.length-v;N++)R=(this.words[N+v]|0)+T,T=R>>26,this.words[N+v]=R&67108863;if(T===0)return this.strip();for(r(T===-1),T=0,N=0;N<this.length;N++)R=-(this.words[N]|0)+T,T=R>>26,this.words[N]=R&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(O,k){var v=this.length-O.length,S=this.clone(),N=O,R=N.words[N.length-1]|0,T=this._countBits(R);v=26-T,v!==0&&(N=N.ushln(v),S.iushln(v),R=N.words[N.length-1]|0);var M=S.length-N.length,I;if(k!=="mod"){I=new o(null),I.length=M+1,I.words=new Array(I.length);for(var $=0;$<I.length;$++)I.words[$]=0}var A=S.clone()._ishlnsubmul(N,1,M);A.negative===0&&(S=A,I&&(I.words[M]=1));for(var L=M-1;L>=0;L--){var Y=(S.words[N.length+L]|0)*67108864+(S.words[N.length+L-1]|0);for(Y=Math.min(Y/R|0,67108863),S._ishlnsubmul(N,Y,L);S.negative!==0;)Y--,S.negative=0,S._ishlnsubmul(N,1,L),S.isZero()||(S.negative^=1);I&&(I.words[L]=Y)}return I&&I.strip(),S.strip(),k!=="div"&&v!==0&&S.iushrn(v),{div:I||null,mod:S}},o.prototype.divmod=function(O,k,v){if(r(!O.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var S,N,R;return this.negative!==0&&O.negative===0?(R=this.neg().divmod(O,k),k!=="mod"&&(S=R.div.neg()),k!=="div"&&(N=R.mod.neg(),v&&N.negative!==0&&N.iadd(O)),{div:S,mod:N}):this.negative===0&&O.negative!==0?(R=this.divmod(O.neg(),k),k!=="mod"&&(S=R.div.neg()),{div:S,mod:R.mod}):(this.negative&O.negative)!==0?(R=this.neg().divmod(O.neg(),k),k!=="div"&&(N=R.mod.neg(),v&&N.negative!==0&&N.isub(O)),{div:R.div,mod:N}):O.length>this.length||this.cmp(O)<0?{div:new o(0),mod:this}:O.length===1?k==="div"?{div:this.divn(O.words[0]),mod:null}:k==="mod"?{div:null,mod:new o(this.modn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new o(this.modn(O.words[0]))}:this._wordDiv(O,k)},o.prototype.div=function(O){return this.divmod(O,"div",!1).div},o.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},o.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},o.prototype.divRound=function(O){var k=this.divmod(O);if(k.mod.isZero())return k.div;var v=k.div.negative!==0?k.mod.isub(O):k.mod,S=O.ushrn(1),N=O.andln(1),R=v.cmp(S);return R<0||N===1&&R===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},o.prototype.modn=function(O){r(O<=67108863);for(var k=(1<<26)%O,v=0,S=this.length-1;S>=0;S--)v=(k*v+(this.words[S]|0))%O;return v},o.prototype.idivn=function(O){r(O<=67108863);for(var k=0,v=this.length-1;v>=0;v--){var S=(this.words[v]|0)+k*67108864;this.words[v]=S/O|0,k=S%O}return this.strip()},o.prototype.divn=function(O){return this.clone().idivn(O)},o.prototype.egcd=function(O){r(O.negative===0),r(!O.isZero());var k=this,v=O.clone();k.negative!==0?k=k.umod(O):k=k.clone();for(var S=new o(1),N=new o(0),R=new o(0),T=new o(1),M=0;k.isEven()&&v.isEven();)k.iushrn(1),v.iushrn(1),++M;for(var I=v.clone(),$=k.clone();!k.isZero();){for(var A=0,L=1;(k.words[0]&L)===0&&A<26;++A,L<<=1);if(A>0)for(k.iushrn(A);A-- >0;)(S.isOdd()||N.isOdd())&&(S.iadd(I),N.isub($)),S.iushrn(1),N.iushrn(1);for(var Y=0,oe=1;(v.words[0]&oe)===0&&Y<26;++Y,oe<<=1);if(Y>0)for(v.iushrn(Y);Y-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(I),T.isub($)),R.iushrn(1),T.iushrn(1);k.cmp(v)>=0?(k.isub(v),S.isub(R),N.isub(T)):(v.isub(k),R.isub(S),T.isub(N))}return{a:R,b:T,gcd:v.iushln(M)}},o.prototype._invmp=function(O){r(O.negative===0),r(!O.isZero());var k=this,v=O.clone();k.negative!==0?k=k.umod(O):k=k.clone();for(var S=new o(1),N=new o(0),R=v.clone();k.cmpn(1)>0&&v.cmpn(1)>0;){for(var T=0,M=1;(k.words[0]&M)===0&&T<26;++T,M<<=1);if(T>0)for(k.iushrn(T);T-- >0;)S.isOdd()&&S.iadd(R),S.iushrn(1);for(var I=0,$=1;(v.words[0]&$)===0&&I<26;++I,$<<=1);if(I>0)for(v.iushrn(I);I-- >0;)N.isOdd()&&N.iadd(R),N.iushrn(1);k.cmp(v)>=0?(k.isub(v),S.isub(N)):(v.isub(k),N.isub(S))}var A;return k.cmpn(1)===0?A=S:A=N,A.cmpn(0)<0&&A.iadd(O),A},o.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var k=this.clone(),v=O.clone();k.negative=0,v.negative=0;for(var S=0;k.isEven()&&v.isEven();S++)k.iushrn(1),v.iushrn(1);do{for(;k.isEven();)k.iushrn(1);for(;v.isEven();)v.iushrn(1);var N=k.cmp(v);if(N<0){var R=k;k=v,v=R}else if(N===0||v.cmpn(1)===0)break;k.isub(v)}while(!0);return v.iushln(S)},o.prototype.invm=function(O){return this.egcd(O).a.umod(O)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(O){return this.words[0]&O},o.prototype.bincn=function(O){r(typeof O=="number");var k=O%26,v=(O-k)/26,S=1<<k;if(this.length<=v)return this._expand(v+1),this.words[v]|=S,this;for(var N=S,R=v;N!==0&&R<this.length;R++){var T=this.words[R]|0;T+=N,N=T>>>26,T&=67108863,this.words[R]=T}return N!==0&&(this.words[R]=N,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(O){var k=O<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;this.strip();var v;if(this.length>1)v=1;else{k&&(O=-O),r(O<=67108863,"Number is too big");var S=this.words[0]|0;v=S===O?0:S<O?-1:1}return this.negative!==0?-v|0:v},o.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var k=this.ucmp(O);return this.negative!==0?-k|0:k},o.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var k=0,v=this.length-1;v>=0;v--){var S=this.words[v]|0,N=O.words[v]|0;if(S!==N){S<N?k=-1:S>N&&(k=1);break}}return k},o.prototype.gtn=function(O){return this.cmpn(O)===1},o.prototype.gt=function(O){return this.cmp(O)===1},o.prototype.gten=function(O){return this.cmpn(O)>=0},o.prototype.gte=function(O){return this.cmp(O)>=0},o.prototype.ltn=function(O){return this.cmpn(O)===-1},o.prototype.lt=function(O){return this.cmp(O)===-1},o.prototype.lten=function(O){return this.cmpn(O)<=0},o.prototype.lte=function(O){return this.cmp(O)<=0},o.prototype.eqn=function(O){return this.cmpn(O)===0},o.prototype.eq=function(O){return this.cmp(O)===0},o.red=function(O){return new W(O)},o.prototype.toRed=function(O){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(O){return this.red=O,this},o.prototype.forceRed=function(O){return r(!this.red,"Already a number in reduction context"),this._forceRed(O)},o.prototype.redAdd=function(O){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},o.prototype.redIAdd=function(O){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},o.prototype.redSub=function(O){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},o.prototype.redISub=function(O){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},o.prototype.redShl=function(O){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},o.prototype.redMul=function(O){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},o.prototype.redIMul=function(O){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(O){return r(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var D={k256:null,p224:null,p192:null,p25519:null};function F(z,O){this.name=z,this.p=new o(O,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var O=new o(null);return O.words=new Array(Math.ceil(this.n/13)),O},F.prototype.ireduce=function(O){var k=O,v;do this.split(k,this.tmp),k=this.imulK(k),k=k.iadd(this.tmp),v=k.bitLength();while(v>this.n);var S=v<this.n?-1:k.ucmp(this.p);return S===0?(k.words[0]=0,k.length=1):S>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},F.prototype.split=function(O,k){O.iushrn(this.n,0,k)},F.prototype.imulK=function(O){return O.imul(this.k)};function q(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(q,F),q.prototype.split=function(O,k){for(var v=4194303,S=Math.min(O.length,9),N=0;N<S;N++)k.words[N]=O.words[N];if(k.length=S,O.length<=9){O.words[0]=0,O.length=1;return}var R=O.words[9];for(k.words[k.length++]=R&v,N=10;N<O.length;N++){var T=O.words[N]|0;O.words[N-10]=(T&v)<<4|R>>>22,R=T}R>>>=22,O.words[N-10]=R,R===0&&O.length>10?O.length-=10:O.length-=9},q.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var k=0,v=0;v<O.length;v++){var S=O.words[v]|0;k+=S*977,O.words[v]=k&67108863,k=S*64+(k/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function V(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(V,F);function ee(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(ee,F);function Q(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(Q,F),Q.prototype.imulK=function(O){for(var k=0,v=0;v<O.length;v++){var S=(O.words[v]|0)*19+k,N=S&67108863;S>>>=26,O.words[v]=N,k=S}return k!==0&&(O.words[O.length++]=k),O},o._prime=function(O){if(D[O])return D[O];var k;if(O==="k256")k=new q;else if(O==="p224")k=new V;else if(O==="p192")k=new ee;else if(O==="p25519")k=new Q;else throw new Error("Unknown prime "+O);return D[O]=k,k};function W(z){if(typeof z=="string"){var O=o._prime(z);this.m=O.p,this.prime=O}else r(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}W.prototype._verify1=function(O){r(O.negative===0,"red works only with positives"),r(O.red,"red works only with red numbers")},W.prototype._verify2=function(O,k){r((O.negative|k.negative)===0,"red works only with positives"),r(O.red&&O.red===k.red,"red works only with red numbers")},W.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):O.umod(this.m)._forceRed(this)},W.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},W.prototype.add=function(O,k){this._verify2(O,k);var v=O.add(k);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},W.prototype.iadd=function(O,k){this._verify2(O,k);var v=O.iadd(k);return v.cmp(this.m)>=0&&v.isub(this.m),v},W.prototype.sub=function(O,k){this._verify2(O,k);var v=O.sub(k);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},W.prototype.isub=function(O,k){this._verify2(O,k);var v=O.isub(k);return v.cmpn(0)<0&&v.iadd(this.m),v},W.prototype.shl=function(O,k){return this._verify1(O),this.imod(O.ushln(k))},W.prototype.imul=function(O,k){return this._verify2(O,k),this.imod(O.imul(k))},W.prototype.mul=function(O,k){return this._verify2(O,k),this.imod(O.mul(k))},W.prototype.isqr=function(O){return this.imul(O,O.clone())},W.prototype.sqr=function(O){return this.mul(O,O)},W.prototype.sqrt=function(O){if(O.isZero())return O.clone();var k=this.m.andln(3);if(r(k%2===1),k===3){var v=this.m.add(new o(1)).iushrn(2);return this.pow(O,v)}for(var S=this.m.subn(1),N=0;!S.isZero()&&S.andln(1)===0;)N++,S.iushrn(1);r(!S.isZero());var R=new o(1).toRed(this),T=R.redNeg(),M=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new o(2*I*I).toRed(this);this.pow(I,M).cmp(T)!==0;)I.redIAdd(T);for(var $=this.pow(I,S),A=this.pow(O,S.addn(1).iushrn(1)),L=this.pow(O,S),Y=N;L.cmp(R)!==0;){for(var oe=L,J=0;oe.cmp(R)!==0;J++)oe=oe.redSqr();r(J<Y);var U=this.pow($,new o(1).iushln(Y-J-1));A=A.redMul(U),$=U.redSqr(),L=L.redMul($),Y=J}return A},W.prototype.invm=function(O){var k=O._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},W.prototype.pow=function(O,k){if(k.isZero())return new o(1).toRed(this);if(k.cmpn(1)===0)return O.clone();var v=4,S=new Array(1<<v);S[0]=new o(1).toRed(this),S[1]=O;for(var N=2;N<S.length;N++)S[N]=this.mul(S[N-1],O);var R=S[0],T=0,M=0,I=k.bitLength()%26;for(I===0&&(I=26),N=k.length-1;N>=0;N--){for(var $=k.words[N],A=I-1;A>=0;A--){var L=$>>A&1;if(R!==S[0]&&(R=this.sqr(R)),L===0&&T===0){M=0;continue}T<<=1,T|=L,M++,!(M!==v&&(N!==0||A!==0))&&(R=this.mul(R,S[T]),M=0,T=0)}I=26}return R},W.prototype.convertTo=function(O){var k=O.umod(this.m);return k===O?k.clone():k},W.prototype.convertFrom=function(O){var k=O.clone();return k.red=null,k},o.mont=function(O){return new Z(O)};function Z(z){W.call(this,z),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(Z,W),Z.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},Z.prototype.convertFrom=function(O){var k=this.imod(O.mul(this.rinv));return k.red=null,k},Z.prototype.imul=function(O,k){if(O.isZero()||k.isZero())return O.words[0]=0,O.length=1,O;var v=O.imul(k),S=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=v.isub(S).iushrn(this.shift),R=N;return N.cmp(this.m)>=0?R=N.isub(this.m):N.cmpn(0)<0&&(R=N.iadd(this.m)),R._forceRed(this)},Z.prototype.mul=function(O,k){if(O.isZero()||k.isZero())return new o(0)._forceRed(this);var v=O.mul(k),S=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=v.isub(S).iushrn(this.shift),R=N;return N.cmp(this.m)>=0?R=N.isub(this.m):N.cmpn(0)<0&&(R=N.iadd(this.m)),R._forceRed(this)},Z.prototype.invm=function(O){var k=this.imod(O._invmp(this.m).mul(this.r2));return k._forceRed(this)}})(t,bn$4)})(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var t;brorand.exports=function(a){return t||(t=new e(null)),t.generate(a)};function e(r){this.rand=r}if(brorand.exports.Rand=e,e.prototype.generate=function(a){return this._rand(a)},e.prototype._rand=function(a){if(this.rand.getBytes)return this.rand.getBytes(a);for(var o=new Uint8Array(a),l=0;l<o.length;l++)o[l]=this.rand.getByte();return o},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(a){var o=new Uint8Array(a);return self.crypto.getRandomValues(o),o}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(a){var o=new Uint8Array(a);return self.msCrypto.getRandomValues(o),o}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=requireCryptoBrowserify();if(typeof s.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(a){return s.randomBytes(a)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var t=requireBn$2(),e=requireBrorand();function s(r){this.rand=r||new e.Rand}return mr=s,s.create=function(a){return new s(a)},s.prototype._randbelow=function(a){var o=a.bitLength(),l=Math.ceil(o/8);do var c=new t(this.rand.generate(l));while(c.cmp(a)>=0);return c},s.prototype._randrange=function(a,o){var l=o.sub(a);return a.add(this._randbelow(l))},s.prototype.test=function(a,o,l){var c=a.bitLength(),u=t.mont(a),f=new t(1).toRed(u);o||(o=Math.max(1,c/48|0));for(var d=a.subn(1),p=0;!d.testn(p);p++);for(var m=a.shrn(p),y=d.toRed(u),b=!0;o>0;o--){var E=this._randrange(new t(2),d);l&&l(E);var C=E.toRed(u).redPow(m);if(!(C.cmp(f)===0||C.cmp(y)===0)){for(var j=1;j<p;j++){if(C=C.redSqr(),C.cmp(f)===0)return!1;if(C.cmp(y)===0)break}if(j===p)return!1}}return b},s.prototype.getDivisor=function(a,o){var l=a.bitLength(),c=t.mont(a),u=new t(1).toRed(c);o||(o=Math.max(1,l/48|0));for(var f=a.subn(1),d=0;!f.testn(d);d++);for(var p=a.shrn(d),m=f.toRed(c);o>0;o--){var y=this._randrange(new t(2),f),b=a.gcd(y);if(b.cmpn(1)!==0)return b;var E=y.toRed(c).redPow(p);if(!(E.cmp(u)===0||E.cmp(m)===0)){for(var C=1;C<d;C++){if(E=E.redSqr(),E.cmp(u)===0)return E.fromRed().subn(1).gcd(a);if(E.cmp(m)===0)break}if(C===d)return E=E.redSqr(),E.fromRed().subn(1).gcd(a)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var t=requireBrowser$b();generatePrime=C,C.simpleSieve=b,C.fermatTest=E;var e=requireBn$2(),s=new e(24),r=requireMr(),a=new r,o=new e(1),l=new e(2),c=new e(5);new e(16),new e(8);var u=new e(10),f=new e(3);new e(7);var d=new e(11),p=new e(4);new e(12);var m=null;function y(){if(m!==null)return m;var j=1048576,B=[];B[0]=2;for(var D=1,F=3;F<j;F+=2){for(var q=Math.ceil(Math.sqrt(F)),V=0;V<D&&B[V]<=q&&F%B[V]!==0;V++);D!==V&&B[V]<=q||(B[D++]=F)}return m=B,B}function b(j){for(var B=y(),D=0;D<B.length;D++)if(j.modn(B[D])===0)return j.cmpn(B[D])===0;return!0}function E(j){var B=e.mont(j);return l.toRed(B).redPow(j.subn(1)).fromRed().cmpn(1)===0}function C(j,B){if(j<16)return B===2||B===5?new e([140,123]):new e([140,39]);B=new e(B);for(var D,F;;){for(D=new e(t(Math.ceil(j/8)));D.bitLength()>j;)D.ishrn(1);if(D.isEven()&&D.iadd(o),D.testn(1)||D.iadd(l),B.cmp(l)){if(!B.cmp(c))for(;D.mod(u).cmp(f);)D.iadd(p)}else for(;D.mod(s).cmp(d);)D.iadd(p);if(F=D.shrn(1),b(F)&&b(D)&&E(F)&&E(D)&&a.test(F)&&a.test(D))return D}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$2={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var t=requireBn$2(),e=requireMr(),s=new e,r=new t(24),a=new t(11),o=new t(10),l=new t(3),c=new t(7),u=requireGeneratePrime(),f=requireBrowser$b();dh=b;function d(C,j){return j=j||"utf8",Buffer.isBuffer(C)||(C=new Buffer(C,j)),this._pub=new t(C),this}function p(C,j){return j=j||"utf8",Buffer.isBuffer(C)||(C=new Buffer(C,j)),this._priv=new t(C),this}var m={};function y(C,j){var B=j.toString("hex"),D=[B,C.toString(16)].join("_");if(D in m)return m[D];var F=0;if(C.isEven()||!u.simpleSieve||!u.fermatTest(C)||!s.test(C))return F+=1,B==="02"||B==="05"?F+=8:F+=4,m[D]=F,F;s.test(C.shrn(1))||(F+=2);var q;switch(B){case"02":C.mod(r).cmp(a)&&(F+=8);break;case"05":q=C.mod(o),q.cmp(l)&&q.cmp(c)&&(F+=8);break;default:F+=4}return m[D]=F,F}function b(C,j,B){this.setGenerator(j),this.__prime=new t(C),this._prime=t.mont(this.__prime),this._primeLen=C.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,B?(this.setPublicKey=d,this.setPrivateKey=p):this._primeCode=8}Object.defineProperty(b.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=y(this.__prime,this.__gen)),this._primeCode}}),b.prototype.generateKeys=function(){return this._priv||(this._priv=new t(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},b.prototype.computeSecret=function(C){C=new t(C),C=C.toRed(this._prime);var j=C.redPow(this._priv).fromRed(),B=new Buffer(j.toArray()),D=this.getPrime();if(B.length<D.length){var F=new Buffer(D.length-B.length);F.fill(0),B=Buffer.concat([F,B])}return B},b.prototype.getPublicKey=function(j){return E(this._pub,j)},b.prototype.getPrivateKey=function(j){return E(this._priv,j)},b.prototype.getPrime=function(C){return E(this.__prime,C)},b.prototype.getGenerator=function(C){return E(this._gen,C)},b.prototype.setGenerator=function(C,j){return j=j||"utf8",Buffer.isBuffer(C)||(C=new Buffer(C,j)),this.__gen=C,this._gen=new t(C),this};function E(C,j){var B=new Buffer(C.toArray());return j?B.toString(j):B}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$4;hasRequiredBrowser$4=1;var t=requireGeneratePrime(),e=require$$1$2,s=requireDh();function r(l){var c=new Buffer(e[l].prime,"hex"),u=new Buffer(e[l].gen,"hex");return new s(c,u)}var a={binary:!0,hex:!0,base64:!0};function o(l,c,u,f){return Buffer.isBuffer(c)||a[c]===void 0?o(l,"binary",c,u):(c=c||"binary",f=f||"binary",u=u||new Buffer([2]),Buffer.isBuffer(u)||(u=new Buffer(u,f)),typeof l=="number"?new s(t(l,u),u,!0):(Buffer.isBuffer(l)||(l=new Buffer(l,c)),new s(l,u,!0)))}return browser$4.DiffieHellmanGroup=browser$4.createDiffieHellmanGroup=browser$4.getDiffieHellman=r,browser$4.createDiffieHellman=browser$4.DiffieHellman=o,browser$4}var readableBrowser={exports:{}},isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var t={}.toString;return isarray=Array.isArray||function(e){return t.call(e)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(t,e){var s=requireBuffer$1(),r=s.Buffer;function a(l,c){for(var u in l)c[u]=l[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=s:(a(s,e),e.Buffer=o);function o(l,c,u){return r(l,c,u)}a(r,o),o.from=function(l,c,u){if(typeof l=="number")throw new TypeError("Argument must not be a number");return r(l,c,u)},o.alloc=function(l,c,u){if(typeof l!="number")throw new TypeError("Argument must be a number");var f=r(l);return c!==void 0?typeof u=="string"?f.fill(c,u):f.fill(c):f.fill(0),f},o.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r(l)},o.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(l)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,(function(t){function e(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}var s=requireSafeBuffer().Buffer,r=requireUtil$1();function a(o,l,c){o.copy(l,c)}t.exports=(function(){function o(){e(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(c){var u={data:c,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length},o.prototype.unshift=function(c){var u={data:c,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length},o.prototype.shift=function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(c){if(this.length===0)return"";for(var u=this.head,f=""+u.data;u=u.next;)f+=c+u.data;return f},o.prototype.concat=function(c){if(this.length===0)return s.alloc(0);for(var u=s.allocUnsafe(c>>>0),f=this.head,d=0;f;)a(f.data,u,d),d+=f.data.length,f=f.next;return u},o})(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var o=r.inspect({length:this.length});return this.constructor.name+" "+o})})(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var t=requireProcessNextickArgs();function e(a,o){var l=this,c=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return c||u?(o?o(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(r,this,a)):t.nextTick(r,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(f){!o&&f?l._writableState?l._writableState.errorEmitted||(l._writableState.errorEmitted=!0,t.nextTick(r,l,f)):t.nextTick(r,l,f):o&&o(f)}),this)}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function r(a,o){a.emit("error",o)}return destroy_1={destroy:e,undestroy:s},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var t=requireProcessNextickArgs();_stream_writable=E;function e(R){var T=this;this.next=null,this.entry=null,this.finish=function(){N(T,R)}}var s=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:t.nextTick,r;E.WritableState=y;var a=Object.create(requireUtil());a.inherits=requireInherits_browser();var o={deprecate:requireBrowser$a()},l=requireStreamBrowser(),c=requireSafeBuffer().Buffer,u=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(R){return c.from(R)}function d(R){return c.isBuffer(R)||R instanceof u}var p=requireDestroy();a.inherits(E,l);function m(){}function y(R,T){r=r||require_stream_duplex(),R=R||{};var M=T instanceof r;this.objectMode=!!R.objectMode,M&&(this.objectMode=this.objectMode||!!R.writableObjectMode);var I=R.highWaterMark,$=R.writableHighWaterMark,A=this.objectMode?16:16*1024;I||I===0?this.highWaterMark=I:M&&($||$===0)?this.highWaterMark=$:this.highWaterMark=A,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=R.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Y){ee(T,Y)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}y.prototype.getBuffer=function(){for(var T=this.bufferedRequest,M=[];T;)M.push(T),T=T.next;return M},(function(){try{Object.defineProperty(y.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var b;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(R){return b.call(this,R)?!0:this!==E?!1:R&&R._writableState instanceof y}})):b=function(R){return R instanceof this};function E(R){if(r=r||require_stream_duplex(),!b.call(E,this)&&!(this instanceof r))return new E(R);this._writableState=new y(R,this),this.writable=!0,R&&(typeof R.write=="function"&&(this._write=R.write),typeof R.writev=="function"&&(this._writev=R.writev),typeof R.destroy=="function"&&(this._destroy=R.destroy),typeof R.final=="function"&&(this._final=R.final)),l.call(this)}E.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function C(R,T){var M=new Error("write after end");R.emit("error",M),t.nextTick(T,M)}function j(R,T,M,I){var $=!0,A=!1;return M===null?A=new TypeError("May not write null values to stream"):typeof M!="string"&&M!==void 0&&!T.objectMode&&(A=new TypeError("Invalid non-string/buffer chunk")),A&&(R.emit("error",A),t.nextTick(I,A),$=!1),$}E.prototype.write=function(R,T,M){var I=this._writableState,$=!1,A=!I.objectMode&&d(R);return A&&!c.isBuffer(R)&&(R=f(R)),typeof T=="function"&&(M=T,T=null),A?T="buffer":T||(T=I.defaultEncoding),typeof M!="function"&&(M=m),I.ended?C(this,M):(A||j(this,I,R,M))&&(I.pendingcb++,$=D(this,I,A,R,T,M)),$},E.prototype.cork=function(){var R=this._writableState;R.corked++},E.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,!R.writing&&!R.corked&&!R.bufferProcessing&&R.bufferedRequest&&Z(this,R))},E.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+T);return this._writableState.defaultEncoding=T,this};function B(R,T,M){return!R.objectMode&&R.decodeStrings!==!1&&typeof T=="string"&&(T=c.from(T,M)),T}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function D(R,T,M,I,$,A){if(!M){var L=B(T,I,$);I!==L&&(M=!0,$="buffer",I=L)}var Y=T.objectMode?1:I.length;T.length+=Y;var oe=T.length<T.highWaterMark;if(oe||(T.needDrain=!0),T.writing||T.corked){var J=T.lastBufferedRequest;T.lastBufferedRequest={chunk:I,encoding:$,isBuf:M,callback:A,next:null},J?J.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else F(R,T,!1,Y,I,$,A);return oe}function F(R,T,M,I,$,A,L){T.writelen=I,T.writecb=L,T.writing=!0,T.sync=!0,M?R._writev($,T.onwrite):R._write($,A,T.onwrite),T.sync=!1}function q(R,T,M,I,$){--T.pendingcb,M?(t.nextTick($,I),t.nextTick(v,R,T),R._writableState.errorEmitted=!0,R.emit("error",I)):($(I),R._writableState.errorEmitted=!0,R.emit("error",I),v(R,T))}function V(R){R.writing=!1,R.writecb=null,R.length-=R.writelen,R.writelen=0}function ee(R,T){var M=R._writableState,I=M.sync,$=M.writecb;if(V(M),T)q(R,M,I,T,$);else{var A=z(M);!A&&!M.corked&&!M.bufferProcessing&&M.bufferedRequest&&Z(R,M),I?s(Q,R,M,A,$):Q(R,M,A,$)}}function Q(R,T,M,I){M||W(R,T),T.pendingcb--,I(),v(R,T)}function W(R,T){T.length===0&&T.needDrain&&(T.needDrain=!1,R.emit("drain"))}function Z(R,T){T.bufferProcessing=!0;var M=T.bufferedRequest;if(R._writev&&M&&M.next){var I=T.bufferedRequestCount,$=new Array(I),A=T.corkedRequestsFree;A.entry=M;for(var L=0,Y=!0;M;)$[L]=M,M.isBuf||(Y=!1),M=M.next,L+=1;$.allBuffers=Y,F(R,T,!0,T.length,$,"",A.finish),T.pendingcb++,T.lastBufferedRequest=null,A.next?(T.corkedRequestsFree=A.next,A.next=null):T.corkedRequestsFree=new e(T),T.bufferedRequestCount=0}else{for(;M;){var oe=M.chunk,J=M.encoding,U=M.callback,G=T.objectMode?1:oe.length;if(F(R,T,!1,G,oe,J,U),M=M.next,T.bufferedRequestCount--,T.writing)break}M===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=M,T.bufferProcessing=!1}E.prototype._write=function(R,T,M){M(new Error("_write() is not implemented"))},E.prototype._writev=null,E.prototype.end=function(R,T,M){var I=this._writableState;typeof R=="function"?(M=R,R=null,T=null):typeof T=="function"&&(M=T,T=null),R!=null&&this.write(R,T),I.corked&&(I.corked=1,this.uncork()),I.ending||S(this,I,M)};function z(R){return R.ending&&R.length===0&&R.bufferedRequest===null&&!R.finished&&!R.writing}function O(R,T){R._final(function(M){T.pendingcb--,M&&R.emit("error",M),T.prefinished=!0,R.emit("prefinish"),v(R,T)})}function k(R,T){!T.prefinished&&!T.finalCalled&&(typeof R._final=="function"?(T.pendingcb++,T.finalCalled=!0,t.nextTick(O,R,T)):(T.prefinished=!0,R.emit("prefinish")))}function v(R,T){var M=z(T);return M&&(k(R,T),T.pendingcb===0&&(T.finished=!0,R.emit("finish"))),M}function S(R,T,M){T.ending=!0,v(R,T),M&&(T.finished?t.nextTick(M):R.once("finish",M)),T.ended=!0,R.writable=!1}function N(R,T,M){var I=R.entry;for(R.entry=null;I;){var $=I.callback;T.pendingcb--,$(M),I=I.next}T.corkedRequestsFree.next=R}return Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(R,T){this.end(),T(R)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=requireProcessNextickArgs(),e=Object.keys||function(p){var m=[];for(var y in p)m.push(y);return m};_stream_duplex=u;var s=Object.create(requireUtil());s.inherits=requireInherits_browser();var r=require_stream_readable(),a=require_stream_writable();s.inherits(u,r);for(var o=e(a.prototype),l=0;l<o.length;l++){var c=o[l];u.prototype[c]||(u.prototype[c]=a.prototype[c])}function u(p){if(!(this instanceof u))return new u(p);r.call(this,p),a.call(this,p),p&&p.readable===!1&&(this.readable=!1),p&&p.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,p&&p.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",f)}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function f(){this.allowHalfOpen||this._writableState.ended||t.nextTick(d,this)}function d(p){p.end()}return Object.defineProperty(u.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),u.prototype._destroy=function(p,m){this.push(null),this.end(),t.nextTick(m,p)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var t=requireProcessNextickArgs();_stream_readable=B;var e=requireIsarray(),s;B.ReadableState=j,requireEvents().EventEmitter;var r=function(U,G){return U.listeners(G).length},a=requireStreamBrowser(),o=requireSafeBuffer().Buffer,l=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(U){return o.from(U)}function u(U){return o.isBuffer(U)||U instanceof l}var f=Object.create(requireUtil());f.inherits=requireInherits_browser();var d=requireUtil$1(),p=void 0;d&&d.debuglog?p=d.debuglog("stream"):p=function(){};var m=requireBufferList(),y=requireDestroy(),b;f.inherits(B,a);var E=["error","close","destroy","pause","resume"];function C(U,G,ae){if(typeof U.prependListener=="function")return U.prependListener(G,ae);!U._events||!U._events[G]?U.on(G,ae):e(U._events[G])?U._events[G].unshift(ae):U._events[G]=[ae,U._events[G]]}function j(U,G){s=s||require_stream_duplex(),U=U||{};var ae=G instanceof s;this.objectMode=!!U.objectMode,ae&&(this.objectMode=this.objectMode||!!U.readableObjectMode);var he=U.highWaterMark,le=U.readableHighWaterMark,te=this.objectMode?16:16*1024;he||he===0?this.highWaterMark=he:ae&&(le||le===0)?this.highWaterMark=le:this.highWaterMark=te,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(b||(b=requireString_decoder().StringDecoder),this.decoder=new b(U.encoding),this.encoding=U.encoding)}function B(U){if(s=s||require_stream_duplex(),!(this instanceof B))return new B(U);this._readableState=new j(U,this),this.readable=!0,U&&(typeof U.read=="function"&&(this._read=U.read),typeof U.destroy=="function"&&(this._destroy=U.destroy)),a.call(this)}Object.defineProperty(B.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(U){this._readableState&&(this._readableState.destroyed=U)}}),B.prototype.destroy=y.destroy,B.prototype._undestroy=y.undestroy,B.prototype._destroy=function(U,G){this.push(null),G(U)},B.prototype.push=function(U,G){var ae=this._readableState,he;return ae.objectMode?he=!0:typeof U=="string"&&(G=G||ae.defaultEncoding,G!==ae.encoding&&(U=o.from(U,G),G=""),he=!0),D(this,U,G,!1,he)},B.prototype.unshift=function(U){return D(this,U,null,!0,!1)};function D(U,G,ae,he,le){var te=U._readableState;if(G===null)te.reading=!1,Z(U,te);else{var pe;le||(pe=q(te,G)),pe?U.emit("error",pe):te.objectMode||G&&G.length>0?(typeof G!="string"&&!te.objectMode&&Object.getPrototypeOf(G)!==o.prototype&&(G=c(G)),he?te.endEmitted?U.emit("error",new Error("stream.unshift() after end event")):F(U,te,G,!0):te.ended?U.emit("error",new Error("stream.push() after EOF")):(te.reading=!1,te.decoder&&!ae?(G=te.decoder.write(G),te.objectMode||G.length!==0?F(U,te,G,!1):k(U,te)):F(U,te,G,!1))):he||(te.reading=!1)}return V(te)}function F(U,G,ae,he){G.flowing&&G.length===0&&!G.sync?(U.emit("data",ae),U.read(0)):(G.length+=G.objectMode?1:ae.length,he?G.buffer.unshift(ae):G.buffer.push(ae),G.needReadable&&z(U)),k(U,G)}function q(U,G){var ae;return!u(G)&&typeof G!="string"&&G!==void 0&&!U.objectMode&&(ae=new TypeError("Invalid non-string/buffer chunk")),ae}function V(U){return!U.ended&&(U.needReadable||U.length<U.highWaterMark||U.length===0)}B.prototype.isPaused=function(){return this._readableState.flowing===!1},B.prototype.setEncoding=function(U){return b||(b=requireString_decoder().StringDecoder),this._readableState.decoder=new b(U),this._readableState.encoding=U,this};var ee=8388608;function Q(U){return U>=ee?U=ee:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}function W(U,G){return U<=0||G.length===0&&G.ended?0:G.objectMode?1:U!==U?G.flowing&&G.length?G.buffer.head.data.length:G.length:(U>G.highWaterMark&&(G.highWaterMark=Q(U)),U<=G.length?U:G.ended?G.length:(G.needReadable=!0,0))}B.prototype.read=function(U){p("read",U),U=parseInt(U,10);var G=this._readableState,ae=U;if(U!==0&&(G.emittedReadable=!1),U===0&&G.needReadable&&(G.length>=G.highWaterMark||G.ended))return p("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?Y(this):z(this),null;if(U=W(U,G),U===0&&G.ended)return G.length===0&&Y(this),null;var he=G.needReadable;p("need readable",he),(G.length===0||G.length-U<G.highWaterMark)&&(he=!0,p("length less than watermark",he)),G.ended||G.reading?(he=!1,p("reading or ended",he)):he&&(p("do read"),G.reading=!0,G.sync=!0,G.length===0&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1,G.reading||(U=W(ae,G)));var le;return U>0?le=I(U,G):le=null,le===null?(G.needReadable=!0,U=0):G.length-=U,G.length===0&&(G.ended||(G.needReadable=!0),ae!==U&&G.ended&&Y(this)),le!==null&&this.emit("data",le),le};function Z(U,G){if(!G.ended){if(G.decoder){var ae=G.decoder.end();ae&&ae.length&&(G.buffer.push(ae),G.length+=G.objectMode?1:ae.length)}G.ended=!0,z(U)}}function z(U){var G=U._readableState;G.needReadable=!1,G.emittedReadable||(p("emitReadable",G.flowing),G.emittedReadable=!0,G.sync?t.nextTick(O,U):O(U))}function O(U){p("emit readable"),U.emit("readable"),M(U)}function k(U,G){G.readingMore||(G.readingMore=!0,t.nextTick(v,U,G))}function v(U,G){for(var ae=G.length;!G.reading&&!G.flowing&&!G.ended&&G.length<G.highWaterMark&&(p("maybeReadMore read 0"),U.read(0),ae!==G.length);)ae=G.length;G.readingMore=!1}B.prototype._read=function(U){this.emit("error",new Error("_read() is not implemented"))},B.prototype.pipe=function(U,G){var ae=this,he=this._readableState;switch(he.pipesCount){case 0:he.pipes=U;break;case 1:he.pipes=[he.pipes,U];break;default:he.pipes.push(U);break}he.pipesCount+=1,p("pipe count=%d opts=%j",he.pipesCount,G);var le=(!G||G.end!==!1)&&U!==process$1.stdout&&U!==process$1.stderr,te=le?xe:Me;he.endEmitted?t.nextTick(te):ae.once("end",te),U.on("unpipe",pe);function pe(ke,Le){p("onunpipe"),ke===ae&&Le&&Le.hasUnpiped===!1&&(Le.hasUnpiped=!0,re())}function xe(){p("onend"),U.end()}var be=S(ae);U.on("drain",be);var ce=!1;function re(){p("cleanup"),U.removeListener("close",we),U.removeListener("finish",Re),U.removeListener("drain",be),U.removeListener("error",ye),U.removeListener("unpipe",pe),ae.removeListener("end",xe),ae.removeListener("end",Me),ae.removeListener("data",fe),ce=!0,he.awaitDrain&&(!U._writableState||U._writableState.needDrain)&&be()}var ie=!1;ae.on("data",fe);function fe(ke){p("ondata"),ie=!1;var Le=U.write(ke);Le===!1&&!ie&&((he.pipesCount===1&&he.pipes===U||he.pipesCount>1&&J(he.pipes,U)!==-1)&&!ce&&(p("false write response, pause",he.awaitDrain),he.awaitDrain++,ie=!0),ae.pause())}function ye(ke){p("onerror",ke),Me(),U.removeListener("error",ye),r(U,"error")===0&&U.emit("error",ke)}C(U,"error",ye);function we(){U.removeListener("finish",Re),Me()}U.once("close",we);function Re(){p("onfinish"),U.removeListener("close",we),Me()}U.once("finish",Re);function Me(){p("unpipe"),ae.unpipe(U)}return U.emit("pipe",ae),he.flowing||(p("pipe resume"),ae.resume()),U};function S(U){return function(){var G=U._readableState;p("pipeOnDrain",G.awaitDrain),G.awaitDrain&&G.awaitDrain--,G.awaitDrain===0&&r(U,"data")&&(G.flowing=!0,M(U))}}B.prototype.unpipe=function(U){var G=this._readableState,ae={hasUnpiped:!1};if(G.pipesCount===0)return this;if(G.pipesCount===1)return U&&U!==G.pipes?this:(U||(U=G.pipes),G.pipes=null,G.pipesCount=0,G.flowing=!1,U&&U.emit("unpipe",this,ae),this);if(!U){var he=G.pipes,le=G.pipesCount;G.pipes=null,G.pipesCount=0,G.flowing=!1;for(var te=0;te<le;te++)he[te].emit("unpipe",this,{hasUnpiped:!1});return this}var pe=J(G.pipes,U);return pe===-1?this:(G.pipes.splice(pe,1),G.pipesCount-=1,G.pipesCount===1&&(G.pipes=G.pipes[0]),U.emit("unpipe",this,ae),this)},B.prototype.on=function(U,G){var ae=a.prototype.on.call(this,U,G);if(U==="data")this._readableState.flowing!==!1&&this.resume();else if(U==="readable"){var he=this._readableState;!he.endEmitted&&!he.readableListening&&(he.readableListening=he.needReadable=!0,he.emittedReadable=!1,he.reading?he.length&&z(this):t.nextTick(N,this))}return ae},B.prototype.addListener=B.prototype.on;function N(U){p("readable nexttick read 0"),U.read(0)}B.prototype.resume=function(){var U=this._readableState;return U.flowing||(p("resume"),U.flowing=!0,R(this,U)),this};function R(U,G){G.resumeScheduled||(G.resumeScheduled=!0,t.nextTick(T,U,G))}function T(U,G){G.reading||(p("resume read 0"),U.read(0)),G.resumeScheduled=!1,G.awaitDrain=0,U.emit("resume"),M(U),G.flowing&&!G.reading&&U.read(0)}B.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function M(U){var G=U._readableState;for(p("flow",G.flowing);G.flowing&&U.read()!==null;);}B.prototype.wrap=function(U){var G=this,ae=this._readableState,he=!1;U.on("end",function(){if(p("wrapped end"),ae.decoder&&!ae.ended){var pe=ae.decoder.end();pe&&pe.length&&G.push(pe)}G.push(null)}),U.on("data",function(pe){if(p("wrapped data"),ae.decoder&&(pe=ae.decoder.write(pe)),!(ae.objectMode&&pe==null)&&!(!ae.objectMode&&(!pe||!pe.length))){var xe=G.push(pe);xe||(he=!0,U.pause())}});for(var le in U)this[le]===void 0&&typeof U[le]=="function"&&(this[le]=(function(pe){return function(){return U[pe].apply(U,arguments)}})(le));for(var te=0;te<E.length;te++)U.on(E[te],this.emit.bind(this,E[te]));return this._read=function(pe){p("wrapped _read",pe),he&&(he=!1,U.resume())},this},Object.defineProperty(B.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),B._fromList=I;function I(U,G){if(G.length===0)return null;var ae;return G.objectMode?ae=G.buffer.shift():!U||U>=G.length?(G.decoder?ae=G.buffer.join(""):G.buffer.length===1?ae=G.buffer.head.data:ae=G.buffer.concat(G.length),G.buffer.clear()):ae=$(U,G.buffer,G.decoder),ae}function $(U,G,ae){var he;return U<G.head.data.length?(he=G.head.data.slice(0,U),G.head.data=G.head.data.slice(U)):U===G.head.data.length?he=G.shift():he=ae?A(U,G):L(U,G),he}function A(U,G){var ae=G.head,he=1,le=ae.data;for(U-=le.length;ae=ae.next;){var te=ae.data,pe=U>te.length?te.length:U;if(pe===te.length?le+=te:le+=te.slice(0,U),U-=pe,U===0){pe===te.length?(++he,ae.next?G.head=ae.next:G.head=G.tail=null):(G.head=ae,ae.data=te.slice(pe));break}++he}return G.length-=he,le}function L(U,G){var ae=o.allocUnsafe(U),he=G.head,le=1;for(he.data.copy(ae),U-=he.data.length;he=he.next;){var te=he.data,pe=U>te.length?te.length:U;if(te.copy(ae,ae.length-U,0,pe),U-=pe,U===0){pe===te.length?(++le,he.next?G.head=he.next:G.head=G.tail=null):(G.head=he,he.data=te.slice(pe));break}++le}return G.length-=le,ae}function Y(U){var G=U._readableState;if(G.length>0)throw new Error('"endReadable()" called on non-empty stream');G.endEmitted||(G.ended=!0,t.nextTick(oe,G,U))}function oe(U,G){!U.endEmitted&&U.length===0&&(U.endEmitted=!0,G.readable=!1,G.emit("end"))}function J(U,G){for(var ae=0,he=U.length;ae<he;ae++)if(U[ae]===G)return ae;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=r;var t=require_stream_duplex(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(r,t);function s(l,c){var u=this._transformState;u.transforming=!1;var f=u.writecb;if(!f)return this.emit("error",new Error("write callback called multiple times"));u.writechunk=null,u.writecb=null,c!=null&&this.push(c),f(l);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function r(l){if(!(this instanceof r))return new r(l);t.call(this,l),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",a)}function a(){var l=this;typeof this._flush=="function"?this._flush(function(c,u){o(l,c,u)}):o(this,null,null)}r.prototype.push=function(l,c){return this._transformState.needTransform=!1,t.prototype.push.call(this,l,c)},r.prototype._transform=function(l,c,u){throw new Error("_transform() is not implemented")},r.prototype._write=function(l,c,u){var f=this._transformState;if(f.writecb=u,f.writechunk=l,f.writeencoding=c,!f.transforming){var d=this._readableState;(f.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},r.prototype._read=function(l){var c=this._transformState;c.writechunk!==null&&c.writecb&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0},r.prototype._destroy=function(l,c){var u=this;t.prototype._destroy.call(this,l,function(f){c(f),u.emit("close")})};function o(l,c,u){if(c)return l.emit("error",c);if(u!=null&&l.push(u),l._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(l._transformState.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=s;var t=require_stream_transform(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(s,t);function s(r){if(!(this instanceof s))return new s(r);t.call(this,r)}return s.prototype._transform=function(r,a,o){o(null,r)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,(function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough()})(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign$1={exports:{}},bn$3={exports:{}},bn$2=bn$3.exports,hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,(function(t){(function(e,s){function r(k,v){if(!k)throw new Error(v||"Assertion failed")}function a(k,v){k.super_=v;var S=function(){};S.prototype=v.prototype,k.prototype=new S,k.prototype.constructor=k}function o(k,v,S){if(o.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((v==="le"||v==="be")&&(S=v,v=10),this._init(k||0,v||10,S||"be"))}typeof e=="object"?e.exports=o:s.BN=o,o.BN=o,o.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=requireBuffer$1().Buffer}catch{}o.isBN=function(v){return v instanceof o?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===o.wordSize&&Array.isArray(v.words)},o.max=function(v,S){return v.cmp(S)>0?v:S},o.min=function(v,S){return v.cmp(S)<0?v:S},o.prototype._init=function(v,S,N){if(typeof v=="number")return this._initNumber(v,S,N);if(typeof v=="object")return this._initArray(v,S,N);S==="hex"&&(S=16),r(S===(S|0)&&S>=2&&S<=36),v=v.toString().replace(/\s+/g,"");var R=0;v[0]==="-"&&(R++,this.negative=1),R<v.length&&(S===16?this._parseHex(v,R,N):(this._parseBase(v,S,R),N==="le"&&this._initArray(this.toArray(),S,N)))},o.prototype._initNumber=function(v,S,N){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),S,N)},o.prototype._initArray=function(v,S,N){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,M,I=0;if(N==="be")for(R=v.length-1,T=0;R>=0;R-=3)M=v[R]|v[R-1]<<8|v[R-2]<<16,this.words[T]|=M<<I&67108863,this.words[T+1]=M>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);else if(N==="le")for(R=0,T=0;R<v.length;R+=3)M=v[R]|v[R+1]<<8|v[R+2]<<16,this.words[T]|=M<<I&67108863,this.words[T+1]=M>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);return this._strip()};function c(k,v){var S=k.charCodeAt(v);if(S>=48&&S<=57)return S-48;if(S>=65&&S<=70)return S-55;if(S>=97&&S<=102)return S-87;r(!1,"Invalid character in "+k)}function u(k,v,S){var N=c(k,S);return S-1>=v&&(N|=c(k,S-1)<<4),N}o.prototype._parseHex=function(v,S,N){this.length=Math.ceil((v.length-S)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,M=0,I;if(N==="be")for(R=v.length-1;R>=S;R-=2)I=u(v,S,R)<<T,this.words[M]|=I&67108863,T>=18?(T-=18,M+=1,this.words[M]|=I>>>26):T+=8;else{var $=v.length-S;for(R=$%2===0?S+1:S;R<v.length;R+=2)I=u(v,S,R)<<T,this.words[M]|=I&67108863,T>=18?(T-=18,M+=1,this.words[M]|=I>>>26):T+=8}this._strip()};function f(k,v,S,N){for(var R=0,T=0,M=Math.min(k.length,S),I=v;I<M;I++){var $=k.charCodeAt(I)-48;R*=N,$>=49?T=$-49+10:$>=17?T=$-17+10:T=$,r($>=0&&T<N,"Invalid character"),R+=T}return R}o.prototype._parseBase=function(v,S,N){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=S)R++;R--,T=T/S|0;for(var M=v.length-N,I=M%R,$=Math.min(M,M-I)+N,A=0,L=N;L<$;L+=R)A=f(v,L,L+R,S),this.imuln(T),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A);if(I!==0){var Y=1;for(A=f(v,L,v.length,S),L=0;L<I;L++)Y*=S;this.imuln(Y),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A)}this._strip()},o.prototype.copy=function(v){v.words=new Array(this.length);for(var S=0;S<this.length;S++)v.words[S]=this.words[S];v.length=this.length,v.negative=this.negative,v.red=this.red};function d(k,v){k.words=v.words,k.length=v.length,k.negative=v.negative,k.red=v.red}if(o.prototype._move=function(v){d(v,this)},o.prototype.clone=function(){var v=new o(null);return this.copy(v),v},o.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{o.prototype.inspect=p}else o.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(v,S){v=v||10,S=S|0||1;var N;if(v===16||v==="hex"){N="";for(var R=0,T=0,M=0;M<this.length;M++){var I=this.words[M],$=((I<<R|T)&16777215).toString(16);T=I>>>24-R&16777215,R+=2,R>=26&&(R-=26,M--),T!==0||M!==this.length-1?N=m[6-$.length]+$+N:N=$+N}for(T!==0&&(N=T.toString(16)+N);N.length%S!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(v===(v|0)&&v>=2&&v<=36){var A=y[v],L=b[v];N="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var oe=Y.modrn(L).toString(v);Y=Y.idivn(L),Y.isZero()?N=oe+N:N=m[A-oe.length]+oe+N}for(this.isZero()&&(N="0"+N);N.length%S!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},o.prototype.toJSON=function(){return this.toString(16,2)},l&&(o.prototype.toBuffer=function(v,S){return this.toArrayLike(l,v,S)}),o.prototype.toArray=function(v,S){return this.toArrayLike(Array,v,S)};var E=function(v,S){return v.allocUnsafe?v.allocUnsafe(S):new v(S)};o.prototype.toArrayLike=function(v,S,N){this._strip();var R=this.byteLength(),T=N||Math.max(1,R);r(R<=T,"byte array longer than desired length"),r(T>0,"Requested array length <= 0");var M=E(v,T),I=S==="le"?"LE":"BE";return this["_toArrayLike"+I](M,R),M},o.prototype._toArrayLikeLE=function(v,S){for(var N=0,R=0,T=0,M=0;T<this.length;T++){var I=this.words[T]<<M|R;v[N++]=I&255,N<v.length&&(v[N++]=I>>8&255),N<v.length&&(v[N++]=I>>16&255),M===6?(N<v.length&&(v[N++]=I>>24&255),R=0,M=0):(R=I>>>24,M+=2)}if(N<v.length)for(v[N++]=R;N<v.length;)v[N++]=0},o.prototype._toArrayLikeBE=function(v,S){for(var N=v.length-1,R=0,T=0,M=0;T<this.length;T++){var I=this.words[T]<<M|R;v[N--]=I&255,N>=0&&(v[N--]=I>>8&255),N>=0&&(v[N--]=I>>16&255),M===6?(N>=0&&(v[N--]=I>>24&255),R=0,M=0):(R=I>>>24,M+=2)}if(N>=0)for(v[N--]=R;N>=0;)v[N--]=0},Math.clz32?o.prototype._countBits=function(v){return 32-Math.clz32(v)}:o.prototype._countBits=function(v){var S=v,N=0;return S>=4096&&(N+=13,S>>>=13),S>=64&&(N+=7,S>>>=7),S>=8&&(N+=4,S>>>=4),S>=2&&(N+=2,S>>>=2),N+S},o.prototype._zeroBits=function(v){if(v===0)return 26;var S=v,N=0;return(S&8191)===0&&(N+=13,S>>>=13),(S&127)===0&&(N+=7,S>>>=7),(S&15)===0&&(N+=4,S>>>=4),(S&3)===0&&(N+=2,S>>>=2),(S&1)===0&&N++,N},o.prototype.bitLength=function(){var v=this.words[this.length-1],S=this._countBits(v);return(this.length-1)*26+S};function C(k){for(var v=new Array(k.bitLength()),S=0;S<v.length;S++){var N=S/26|0,R=S%26;v[S]=k.words[N]>>>R&1}return v}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,S=0;S<this.length;S++){var N=this._zeroBits(this.words[S]);if(v+=N,N!==26)break}return v},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},o.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var S=0;S<v.length;S++)this.words[S]=this.words[S]|v.words[S];return this._strip()},o.prototype.ior=function(v){return r((this.negative|v.negative)===0),this.iuor(v)},o.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},o.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},o.prototype.iuand=function(v){var S;this.length>v.length?S=v:S=this;for(var N=0;N<S.length;N++)this.words[N]=this.words[N]&v.words[N];return this.length=S.length,this._strip()},o.prototype.iand=function(v){return r((this.negative|v.negative)===0),this.iuand(v)},o.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},o.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},o.prototype.iuxor=function(v){var S,N;this.length>v.length?(S=this,N=v):(S=v,N=this);for(var R=0;R<N.length;R++)this.words[R]=S.words[R]^N.words[R];if(this!==S)for(;R<S.length;R++)this.words[R]=S.words[R];return this.length=S.length,this._strip()},o.prototype.ixor=function(v){return r((this.negative|v.negative)===0),this.iuxor(v)},o.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},o.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},o.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var S=Math.ceil(v/26)|0,N=v%26;this._expand(S),N>0&&S--;for(var R=0;R<S;R++)this.words[R]=~this.words[R]&67108863;return N>0&&(this.words[R]=~this.words[R]&67108863>>26-N),this._strip()},o.prototype.notn=function(v){return this.clone().inotn(v)},o.prototype.setn=function(v,S){r(typeof v=="number"&&v>=0);var N=v/26|0,R=v%26;return this._expand(N+1),S?this.words[N]=this.words[N]|1<<R:this.words[N]=this.words[N]&~(1<<R),this._strip()},o.prototype.iadd=function(v){var S;if(this.negative!==0&&v.negative===0)return this.negative=0,S=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,S=this.isub(v),v.negative=1,S._normSign();var N,R;this.length>v.length?(N=this,R=v):(N=v,R=this);for(var T=0,M=0;M<R.length;M++)S=(N.words[M]|0)+(R.words[M]|0)+T,this.words[M]=S&67108863,T=S>>>26;for(;T!==0&&M<N.length;M++)S=(N.words[M]|0)+T,this.words[M]=S&67108863,T=S>>>26;if(this.length=N.length,T!==0)this.words[this.length]=T,this.length++;else if(N!==this)for(;M<N.length;M++)this.words[M]=N.words[M];return this},o.prototype.add=function(v){var S;return v.negative!==0&&this.negative===0?(v.negative=0,S=this.sub(v),v.negative^=1,S):v.negative===0&&this.negative!==0?(this.negative=0,S=v.sub(this),this.negative=1,S):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},o.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var S=this.iadd(v);return v.negative=1,S._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var N=this.cmp(v);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;N>0?(R=this,T=v):(R=v,T=this);for(var M=0,I=0;I<T.length;I++)S=(R.words[I]|0)-(T.words[I]|0)+M,M=S>>26,this.words[I]=S&67108863;for(;M!==0&&I<R.length;I++)S=(R.words[I]|0)+M,M=S>>26,this.words[I]=S&67108863;if(M===0&&I<R.length&&R!==this)for(;I<R.length;I++)this.words[I]=R.words[I];return this.length=Math.max(this.length,I),R!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(v){return this.clone().isub(v)};function j(k,v,S){S.negative=v.negative^k.negative;var N=k.length+v.length|0;S.length=N,N=N-1|0;var R=k.words[0]|0,T=v.words[0]|0,M=R*T,I=M&67108863,$=M/67108864|0;S.words[0]=I;for(var A=1;A<N;A++){for(var L=$>>>26,Y=$&67108863,oe=Math.min(A,v.length-1),J=Math.max(0,A-k.length+1);J<=oe;J++){var U=A-J|0;R=k.words[U]|0,T=v.words[J]|0,M=R*T+Y,L+=M/67108864|0,Y=M&67108863}S.words[A]=Y|0,$=L|0}return $!==0?S.words[A]=$|0:S.length--,S._strip()}var B=function(v,S,N){var R=v.words,T=S.words,M=N.words,I=0,$,A,L,Y=R[0]|0,oe=Y&8191,J=Y>>>13,U=R[1]|0,G=U&8191,ae=U>>>13,he=R[2]|0,le=he&8191,te=he>>>13,pe=R[3]|0,xe=pe&8191,be=pe>>>13,ce=R[4]|0,re=ce&8191,ie=ce>>>13,fe=R[5]|0,ye=fe&8191,we=fe>>>13,Re=R[6]|0,Me=Re&8191,ke=Re>>>13,Le=R[7]|0,Fe=Le&8191,Te=Le>>>13,Be=R[8]|0,ze=Be&8191,de=Be>>>13,ne=R[9]|0,se=ne&8191,me=ne>>>13,Ee=T[0]|0,_e=Ee&8191,ve=Ee>>>13,Ae=T[1]|0,Oe=Ae&8191,Ue=Ae>>>13,Ke=T[2]|0,We=Ke&8191,Ve=Ke>>>13,xt=T[3]|0,lt=xt&8191,Xe=xt>>>13,St=T[4]|0,ct=St&8191,Pe=St>>>13,Qe=T[5]|0,Ze=Qe&8191,Ye=Qe>>>13,at=T[6]|0,it=at&8191,et=at>>>13,Ct=T[7]|0,ft=Ct&8191,tt=Ct>>>13,Et=T[8]|0,nt=Et&8191,Je=Et>>>13,Rt=T[9]|0,dt=Rt&8191,ht=Rt>>>13;N.negative=v.negative^S.negative,N.length=19,$=Math.imul(oe,_e),A=Math.imul(oe,ve),A=A+Math.imul(J,_e)|0,L=Math.imul(J,ve);var wr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(wr>>>26)|0,wr&=67108863,$=Math.imul(G,_e),A=Math.imul(G,ve),A=A+Math.imul(ae,_e)|0,L=Math.imul(ae,ve),$=$+Math.imul(oe,Oe)|0,A=A+Math.imul(oe,Ue)|0,A=A+Math.imul(J,Oe)|0,L=L+Math.imul(J,Ue)|0;var cr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(cr>>>26)|0,cr&=67108863,$=Math.imul(le,_e),A=Math.imul(le,ve),A=A+Math.imul(te,_e)|0,L=Math.imul(te,ve),$=$+Math.imul(G,Oe)|0,A=A+Math.imul(G,Ue)|0,A=A+Math.imul(ae,Oe)|0,L=L+Math.imul(ae,Ue)|0,$=$+Math.imul(oe,We)|0,A=A+Math.imul(oe,Ve)|0,A=A+Math.imul(J,We)|0,L=L+Math.imul(J,Ve)|0;var tr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(tr>>>26)|0,tr&=67108863,$=Math.imul(xe,_e),A=Math.imul(xe,ve),A=A+Math.imul(be,_e)|0,L=Math.imul(be,ve),$=$+Math.imul(le,Oe)|0,A=A+Math.imul(le,Ue)|0,A=A+Math.imul(te,Oe)|0,L=L+Math.imul(te,Ue)|0,$=$+Math.imul(G,We)|0,A=A+Math.imul(G,Ve)|0,A=A+Math.imul(ae,We)|0,L=L+Math.imul(ae,Ve)|0,$=$+Math.imul(oe,lt)|0,A=A+Math.imul(oe,Xe)|0,A=A+Math.imul(J,lt)|0,L=L+Math.imul(J,Xe)|0;var or=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(or>>>26)|0,or&=67108863,$=Math.imul(re,_e),A=Math.imul(re,ve),A=A+Math.imul(ie,_e)|0,L=Math.imul(ie,ve),$=$+Math.imul(xe,Oe)|0,A=A+Math.imul(xe,Ue)|0,A=A+Math.imul(be,Oe)|0,L=L+Math.imul(be,Ue)|0,$=$+Math.imul(le,We)|0,A=A+Math.imul(le,Ve)|0,A=A+Math.imul(te,We)|0,L=L+Math.imul(te,Ve)|0,$=$+Math.imul(G,lt)|0,A=A+Math.imul(G,Xe)|0,A=A+Math.imul(ae,lt)|0,L=L+Math.imul(ae,Xe)|0,$=$+Math.imul(oe,ct)|0,A=A+Math.imul(oe,Pe)|0,A=A+Math.imul(J,ct)|0,L=L+Math.imul(J,Pe)|0;var Jt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,$=Math.imul(ye,_e),A=Math.imul(ye,ve),A=A+Math.imul(we,_e)|0,L=Math.imul(we,ve),$=$+Math.imul(re,Oe)|0,A=A+Math.imul(re,Ue)|0,A=A+Math.imul(ie,Oe)|0,L=L+Math.imul(ie,Ue)|0,$=$+Math.imul(xe,We)|0,A=A+Math.imul(xe,Ve)|0,A=A+Math.imul(be,We)|0,L=L+Math.imul(be,Ve)|0,$=$+Math.imul(le,lt)|0,A=A+Math.imul(le,Xe)|0,A=A+Math.imul(te,lt)|0,L=L+Math.imul(te,Xe)|0,$=$+Math.imul(G,ct)|0,A=A+Math.imul(G,Pe)|0,A=A+Math.imul(ae,ct)|0,L=L+Math.imul(ae,Pe)|0,$=$+Math.imul(oe,Ze)|0,A=A+Math.imul(oe,Ye)|0,A=A+Math.imul(J,Ze)|0,L=L+Math.imul(J,Ye)|0;var Xt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,$=Math.imul(Me,_e),A=Math.imul(Me,ve),A=A+Math.imul(ke,_e)|0,L=Math.imul(ke,ve),$=$+Math.imul(ye,Oe)|0,A=A+Math.imul(ye,Ue)|0,A=A+Math.imul(we,Oe)|0,L=L+Math.imul(we,Ue)|0,$=$+Math.imul(re,We)|0,A=A+Math.imul(re,Ve)|0,A=A+Math.imul(ie,We)|0,L=L+Math.imul(ie,Ve)|0,$=$+Math.imul(xe,lt)|0,A=A+Math.imul(xe,Xe)|0,A=A+Math.imul(be,lt)|0,L=L+Math.imul(be,Xe)|0,$=$+Math.imul(le,ct)|0,A=A+Math.imul(le,Pe)|0,A=A+Math.imul(te,ct)|0,L=L+Math.imul(te,Pe)|0,$=$+Math.imul(G,Ze)|0,A=A+Math.imul(G,Ye)|0,A=A+Math.imul(ae,Ze)|0,L=L+Math.imul(ae,Ye)|0,$=$+Math.imul(oe,it)|0,A=A+Math.imul(oe,et)|0,A=A+Math.imul(J,it)|0,L=L+Math.imul(J,et)|0;var rr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(rr>>>26)|0,rr&=67108863,$=Math.imul(Fe,_e),A=Math.imul(Fe,ve),A=A+Math.imul(Te,_e)|0,L=Math.imul(Te,ve),$=$+Math.imul(Me,Oe)|0,A=A+Math.imul(Me,Ue)|0,A=A+Math.imul(ke,Oe)|0,L=L+Math.imul(ke,Ue)|0,$=$+Math.imul(ye,We)|0,A=A+Math.imul(ye,Ve)|0,A=A+Math.imul(we,We)|0,L=L+Math.imul(we,Ve)|0,$=$+Math.imul(re,lt)|0,A=A+Math.imul(re,Xe)|0,A=A+Math.imul(ie,lt)|0,L=L+Math.imul(ie,Xe)|0,$=$+Math.imul(xe,ct)|0,A=A+Math.imul(xe,Pe)|0,A=A+Math.imul(be,ct)|0,L=L+Math.imul(be,Pe)|0,$=$+Math.imul(le,Ze)|0,A=A+Math.imul(le,Ye)|0,A=A+Math.imul(te,Ze)|0,L=L+Math.imul(te,Ye)|0,$=$+Math.imul(G,it)|0,A=A+Math.imul(G,et)|0,A=A+Math.imul(ae,it)|0,L=L+Math.imul(ae,et)|0,$=$+Math.imul(oe,ft)|0,A=A+Math.imul(oe,tt)|0,A=A+Math.imul(J,ft)|0,L=L+Math.imul(J,tt)|0;var Qt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,$=Math.imul(ze,_e),A=Math.imul(ze,ve),A=A+Math.imul(de,_e)|0,L=Math.imul(de,ve),$=$+Math.imul(Fe,Oe)|0,A=A+Math.imul(Fe,Ue)|0,A=A+Math.imul(Te,Oe)|0,L=L+Math.imul(Te,Ue)|0,$=$+Math.imul(Me,We)|0,A=A+Math.imul(Me,Ve)|0,A=A+Math.imul(ke,We)|0,L=L+Math.imul(ke,Ve)|0,$=$+Math.imul(ye,lt)|0,A=A+Math.imul(ye,Xe)|0,A=A+Math.imul(we,lt)|0,L=L+Math.imul(we,Xe)|0,$=$+Math.imul(re,ct)|0,A=A+Math.imul(re,Pe)|0,A=A+Math.imul(ie,ct)|0,L=L+Math.imul(ie,Pe)|0,$=$+Math.imul(xe,Ze)|0,A=A+Math.imul(xe,Ye)|0,A=A+Math.imul(be,Ze)|0,L=L+Math.imul(be,Ye)|0,$=$+Math.imul(le,it)|0,A=A+Math.imul(le,et)|0,A=A+Math.imul(te,it)|0,L=L+Math.imul(te,et)|0,$=$+Math.imul(G,ft)|0,A=A+Math.imul(G,tt)|0,A=A+Math.imul(ae,ft)|0,L=L+Math.imul(ae,tt)|0,$=$+Math.imul(oe,nt)|0,A=A+Math.imul(oe,Je)|0,A=A+Math.imul(J,nt)|0,L=L+Math.imul(J,Je)|0;var Tt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,$=Math.imul(se,_e),A=Math.imul(se,ve),A=A+Math.imul(me,_e)|0,L=Math.imul(me,ve),$=$+Math.imul(ze,Oe)|0,A=A+Math.imul(ze,Ue)|0,A=A+Math.imul(de,Oe)|0,L=L+Math.imul(de,Ue)|0,$=$+Math.imul(Fe,We)|0,A=A+Math.imul(Fe,Ve)|0,A=A+Math.imul(Te,We)|0,L=L+Math.imul(Te,Ve)|0,$=$+Math.imul(Me,lt)|0,A=A+Math.imul(Me,Xe)|0,A=A+Math.imul(ke,lt)|0,L=L+Math.imul(ke,Xe)|0,$=$+Math.imul(ye,ct)|0,A=A+Math.imul(ye,Pe)|0,A=A+Math.imul(we,ct)|0,L=L+Math.imul(we,Pe)|0,$=$+Math.imul(re,Ze)|0,A=A+Math.imul(re,Ye)|0,A=A+Math.imul(ie,Ze)|0,L=L+Math.imul(ie,Ye)|0,$=$+Math.imul(xe,it)|0,A=A+Math.imul(xe,et)|0,A=A+Math.imul(be,it)|0,L=L+Math.imul(be,et)|0,$=$+Math.imul(le,ft)|0,A=A+Math.imul(le,tt)|0,A=A+Math.imul(te,ft)|0,L=L+Math.imul(te,tt)|0,$=$+Math.imul(G,nt)|0,A=A+Math.imul(G,Je)|0,A=A+Math.imul(ae,nt)|0,L=L+Math.imul(ae,Je)|0,$=$+Math.imul(oe,dt)|0,A=A+Math.imul(oe,ht)|0,A=A+Math.imul(J,dt)|0,L=L+Math.imul(J,ht)|0;var ur=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(ur>>>26)|0,ur&=67108863,$=Math.imul(se,Oe),A=Math.imul(se,Ue),A=A+Math.imul(me,Oe)|0,L=Math.imul(me,Ue),$=$+Math.imul(ze,We)|0,A=A+Math.imul(ze,Ve)|0,A=A+Math.imul(de,We)|0,L=L+Math.imul(de,Ve)|0,$=$+Math.imul(Fe,lt)|0,A=A+Math.imul(Fe,Xe)|0,A=A+Math.imul(Te,lt)|0,L=L+Math.imul(Te,Xe)|0,$=$+Math.imul(Me,ct)|0,A=A+Math.imul(Me,Pe)|0,A=A+Math.imul(ke,ct)|0,L=L+Math.imul(ke,Pe)|0,$=$+Math.imul(ye,Ze)|0,A=A+Math.imul(ye,Ye)|0,A=A+Math.imul(we,Ze)|0,L=L+Math.imul(we,Ye)|0,$=$+Math.imul(re,it)|0,A=A+Math.imul(re,et)|0,A=A+Math.imul(ie,it)|0,L=L+Math.imul(ie,et)|0,$=$+Math.imul(xe,ft)|0,A=A+Math.imul(xe,tt)|0,A=A+Math.imul(be,ft)|0,L=L+Math.imul(be,tt)|0,$=$+Math.imul(le,nt)|0,A=A+Math.imul(le,Je)|0,A=A+Math.imul(te,nt)|0,L=L+Math.imul(te,Je)|0,$=$+Math.imul(G,dt)|0,A=A+Math.imul(G,ht)|0,A=A+Math.imul(ae,dt)|0,L=L+Math.imul(ae,ht)|0;var dr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(dr>>>26)|0,dr&=67108863,$=Math.imul(se,We),A=Math.imul(se,Ve),A=A+Math.imul(me,We)|0,L=Math.imul(me,Ve),$=$+Math.imul(ze,lt)|0,A=A+Math.imul(ze,Xe)|0,A=A+Math.imul(de,lt)|0,L=L+Math.imul(de,Xe)|0,$=$+Math.imul(Fe,ct)|0,A=A+Math.imul(Fe,Pe)|0,A=A+Math.imul(Te,ct)|0,L=L+Math.imul(Te,Pe)|0,$=$+Math.imul(Me,Ze)|0,A=A+Math.imul(Me,Ye)|0,A=A+Math.imul(ke,Ze)|0,L=L+Math.imul(ke,Ye)|0,$=$+Math.imul(ye,it)|0,A=A+Math.imul(ye,et)|0,A=A+Math.imul(we,it)|0,L=L+Math.imul(we,et)|0,$=$+Math.imul(re,ft)|0,A=A+Math.imul(re,tt)|0,A=A+Math.imul(ie,ft)|0,L=L+Math.imul(ie,tt)|0,$=$+Math.imul(xe,nt)|0,A=A+Math.imul(xe,Je)|0,A=A+Math.imul(be,nt)|0,L=L+Math.imul(be,Je)|0,$=$+Math.imul(le,dt)|0,A=A+Math.imul(le,ht)|0,A=A+Math.imul(te,dt)|0,L=L+Math.imul(te,ht)|0;var Wt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,$=Math.imul(se,lt),A=Math.imul(se,Xe),A=A+Math.imul(me,lt)|0,L=Math.imul(me,Xe),$=$+Math.imul(ze,ct)|0,A=A+Math.imul(ze,Pe)|0,A=A+Math.imul(de,ct)|0,L=L+Math.imul(de,Pe)|0,$=$+Math.imul(Fe,Ze)|0,A=A+Math.imul(Fe,Ye)|0,A=A+Math.imul(Te,Ze)|0,L=L+Math.imul(Te,Ye)|0,$=$+Math.imul(Me,it)|0,A=A+Math.imul(Me,et)|0,A=A+Math.imul(ke,it)|0,L=L+Math.imul(ke,et)|0,$=$+Math.imul(ye,ft)|0,A=A+Math.imul(ye,tt)|0,A=A+Math.imul(we,ft)|0,L=L+Math.imul(we,tt)|0,$=$+Math.imul(re,nt)|0,A=A+Math.imul(re,Je)|0,A=A+Math.imul(ie,nt)|0,L=L+Math.imul(ie,Je)|0,$=$+Math.imul(xe,dt)|0,A=A+Math.imul(xe,ht)|0,A=A+Math.imul(be,dt)|0,L=L+Math.imul(be,ht)|0;var Zt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,$=Math.imul(se,ct),A=Math.imul(se,Pe),A=A+Math.imul(me,ct)|0,L=Math.imul(me,Pe),$=$+Math.imul(ze,Ze)|0,A=A+Math.imul(ze,Ye)|0,A=A+Math.imul(de,Ze)|0,L=L+Math.imul(de,Ye)|0,$=$+Math.imul(Fe,it)|0,A=A+Math.imul(Fe,et)|0,A=A+Math.imul(Te,it)|0,L=L+Math.imul(Te,et)|0,$=$+Math.imul(Me,ft)|0,A=A+Math.imul(Me,tt)|0,A=A+Math.imul(ke,ft)|0,L=L+Math.imul(ke,tt)|0,$=$+Math.imul(ye,nt)|0,A=A+Math.imul(ye,Je)|0,A=A+Math.imul(we,nt)|0,L=L+Math.imul(we,Je)|0,$=$+Math.imul(re,dt)|0,A=A+Math.imul(re,ht)|0,A=A+Math.imul(ie,dt)|0,L=L+Math.imul(ie,ht)|0;var Er=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Er>>>26)|0,Er&=67108863,$=Math.imul(se,Ze),A=Math.imul(se,Ye),A=A+Math.imul(me,Ze)|0,L=Math.imul(me,Ye),$=$+Math.imul(ze,it)|0,A=A+Math.imul(ze,et)|0,A=A+Math.imul(de,it)|0,L=L+Math.imul(de,et)|0,$=$+Math.imul(Fe,ft)|0,A=A+Math.imul(Fe,tt)|0,A=A+Math.imul(Te,ft)|0,L=L+Math.imul(Te,tt)|0,$=$+Math.imul(Me,nt)|0,A=A+Math.imul(Me,Je)|0,A=A+Math.imul(ke,nt)|0,L=L+Math.imul(ke,Je)|0,$=$+Math.imul(ye,dt)|0,A=A+Math.imul(ye,ht)|0,A=A+Math.imul(we,dt)|0,L=L+Math.imul(we,ht)|0;var fr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(fr>>>26)|0,fr&=67108863,$=Math.imul(se,it),A=Math.imul(se,et),A=A+Math.imul(me,it)|0,L=Math.imul(me,et),$=$+Math.imul(ze,ft)|0,A=A+Math.imul(ze,tt)|0,A=A+Math.imul(de,ft)|0,L=L+Math.imul(de,tt)|0,$=$+Math.imul(Fe,nt)|0,A=A+Math.imul(Fe,Je)|0,A=A+Math.imul(Te,nt)|0,L=L+Math.imul(Te,Je)|0,$=$+Math.imul(Me,dt)|0,A=A+Math.imul(Me,ht)|0,A=A+Math.imul(ke,dt)|0,L=L+Math.imul(ke,ht)|0;var hr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(hr>>>26)|0,hr&=67108863,$=Math.imul(se,ft),A=Math.imul(se,tt),A=A+Math.imul(me,ft)|0,L=Math.imul(me,tt),$=$+Math.imul(ze,nt)|0,A=A+Math.imul(ze,Je)|0,A=A+Math.imul(de,nt)|0,L=L+Math.imul(de,Je)|0,$=$+Math.imul(Fe,dt)|0,A=A+Math.imul(Fe,ht)|0,A=A+Math.imul(Te,dt)|0,L=L+Math.imul(Te,ht)|0;var _r=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(_r>>>26)|0,_r&=67108863,$=Math.imul(se,nt),A=Math.imul(se,Je),A=A+Math.imul(me,nt)|0,L=Math.imul(me,Je),$=$+Math.imul(ze,dt)|0,A=A+Math.imul(ze,ht)|0,A=A+Math.imul(de,dt)|0,L=L+Math.imul(de,ht)|0;var jr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(jr>>>26)|0,jr&=67108863,$=Math.imul(se,dt),A=Math.imul(se,ht),A=A+Math.imul(me,dt)|0,L=Math.imul(me,ht);var Nr=(I+$|0)+((A&8191)<<13)|0;return I=(L+(A>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,M[0]=wr,M[1]=cr,M[2]=tr,M[3]=or,M[4]=Jt,M[5]=Xt,M[6]=rr,M[7]=Qt,M[8]=Tt,M[9]=ur,M[10]=dr,M[11]=Wt,M[12]=Zt,M[13]=Er,M[14]=fr,M[15]=hr,M[16]=_r,M[17]=jr,M[18]=Nr,I!==0&&(M[19]=I,N.length++),N};Math.imul||(B=j);function D(k,v,S){S.negative=v.negative^k.negative,S.length=k.length+v.length;for(var N=0,R=0,T=0;T<S.length-1;T++){var M=R;R=0;for(var I=N&67108863,$=Math.min(T,v.length-1),A=Math.max(0,T-k.length+1);A<=$;A++){var L=T-A,Y=k.words[L]|0,oe=v.words[A]|0,J=Y*oe,U=J&67108863;M=M+(J/67108864|0)|0,U=U+I|0,I=U&67108863,M=M+(U>>>26)|0,R+=M>>>26,M&=67108863}S.words[T]=I,N=M,M=R}return N!==0?S.words[T]=N:S.length--,S._strip()}function F(k,v,S){return D(k,v,S)}o.prototype.mulTo=function(v,S){var N,R=this.length+v.length;return this.length===10&&v.length===10?N=B(this,v,S):R<63?N=j(this,v,S):R<1024?N=D(this,v,S):N=F(this,v,S),N},o.prototype.mul=function(v){var S=new o(null);return S.words=new Array(this.length+v.length),this.mulTo(v,S)},o.prototype.mulf=function(v){var S=new o(null);return S.words=new Array(this.length+v.length),F(this,v,S)},o.prototype.imul=function(v){return this.clone().mulTo(v,this)},o.prototype.imuln=function(v){var S=v<0;S&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var N=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*v,M=(T&67108863)+(N&67108863);N>>=26,N+=T/67108864|0,N+=M>>>26,this.words[R]=M&67108863}return N!==0&&(this.words[R]=N,this.length++),this.length=v===0?1:this.length,S?this.ineg():this},o.prototype.muln=function(v){return this.clone().imuln(v)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(v){var S=C(v);if(S.length===0)return new o(1);for(var N=this,R=0;R<S.length&&S[R]===0;R++,N=N.sqr());if(++R<S.length)for(var T=N.sqr();R<S.length;R++,T=T.sqr())S[R]!==0&&(N=N.mul(T));return N},o.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var S=v%26,N=(v-S)/26,R=67108863>>>26-S<<26-S,T;if(S!==0){var M=0;for(T=0;T<this.length;T++){var I=this.words[T]&R,$=(this.words[T]|0)-I<<S;this.words[T]=$|M,M=I>>>26-S}M&&(this.words[T]=M,this.length++)}if(N!==0){for(T=this.length-1;T>=0;T--)this.words[T+N]=this.words[T];for(T=0;T<N;T++)this.words[T]=0;this.length+=N}return this._strip()},o.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},o.prototype.iushrn=function(v,S,N){r(typeof v=="number"&&v>=0);var R;S?R=(S-S%26)/26:R=0;var T=v%26,M=Math.min((v-T)/26,this.length),I=67108863^67108863>>>T<<T,$=N;if(R-=M,R=Math.max(0,R),$){for(var A=0;A<M;A++)$.words[A]=this.words[A];$.length=M}if(M!==0)if(this.length>M)for(this.length-=M,A=0;A<this.length;A++)this.words[A]=this.words[A+M];else this.words[0]=0,this.length=1;var L=0;for(A=this.length-1;A>=0&&(L!==0||A>=R);A--){var Y=this.words[A]|0;this.words[A]=L<<26-T|Y>>>T,L=Y&I}return $&&L!==0&&($.words[$.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(v,S,N){return r(this.negative===0),this.iushrn(v,S,N)},o.prototype.shln=function(v){return this.clone().ishln(v)},o.prototype.ushln=function(v){return this.clone().iushln(v)},o.prototype.shrn=function(v){return this.clone().ishrn(v)},o.prototype.ushrn=function(v){return this.clone().iushrn(v)},o.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var S=v%26,N=(v-S)/26,R=1<<S;if(this.length<=N)return!1;var T=this.words[N];return!!(T&R)},o.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var S=v%26,N=(v-S)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(S!==0&&N++,this.length=Math.min(N,this.length),S!==0){var R=67108863^67108863>>>S<<S;this.words[this.length-1]&=R}return this._strip()},o.prototype.maskn=function(v){return this.clone().imaskn(v)},o.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},o.prototype._iaddn=function(v){this.words[0]+=v;for(var S=0;S<this.length&&this.words[S]>=67108864;S++)this.words[S]-=67108864,S===this.length-1?this.words[S+1]=1:this.words[S+1]++;return this.length=Math.max(this.length,S+1),this},o.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var S=0;S<this.length&&this.words[S]<0;S++)this.words[S]+=67108864,this.words[S+1]-=1;return this._strip()},o.prototype.addn=function(v){return this.clone().iaddn(v)},o.prototype.subn=function(v){return this.clone().isubn(v)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(v,S,N){var R=v.length+N,T;this._expand(R);var M,I=0;for(T=0;T<v.length;T++){M=(this.words[T+N]|0)+I;var $=(v.words[T]|0)*S;M-=$&67108863,I=(M>>26)-($/67108864|0),this.words[T+N]=M&67108863}for(;T<this.length-N;T++)M=(this.words[T+N]|0)+I,I=M>>26,this.words[T+N]=M&67108863;if(I===0)return this._strip();for(r(I===-1),I=0,T=0;T<this.length;T++)M=-(this.words[T]|0)+I,I=M>>26,this.words[T]=M&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(v,S){var N=this.length-v.length,R=this.clone(),T=v,M=T.words[T.length-1]|0,I=this._countBits(M);N=26-I,N!==0&&(T=T.ushln(N),R.iushln(N),M=T.words[T.length-1]|0);var $=R.length-T.length,A;if(S!=="mod"){A=new o(null),A.length=$+1,A.words=new Array(A.length);for(var L=0;L<A.length;L++)A.words[L]=0}var Y=R.clone()._ishlnsubmul(T,1,$);Y.negative===0&&(R=Y,A&&(A.words[$]=1));for(var oe=$-1;oe>=0;oe--){var J=(R.words[T.length+oe]|0)*67108864+(R.words[T.length+oe-1]|0);for(J=Math.min(J/M|0,67108863),R._ishlnsubmul(T,J,oe);R.negative!==0;)J--,R.negative=0,R._ishlnsubmul(T,1,oe),R.isZero()||(R.negative^=1);A&&(A.words[oe]=J)}return A&&A._strip(),R._strip(),S!=="div"&&N!==0&&R.iushrn(N),{div:A||null,mod:R}},o.prototype.divmod=function(v,S,N){if(r(!v.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var R,T,M;return this.negative!==0&&v.negative===0?(M=this.neg().divmod(v,S),S!=="mod"&&(R=M.div.neg()),S!=="div"&&(T=M.mod.neg(),N&&T.negative!==0&&T.iadd(v)),{div:R,mod:T}):this.negative===0&&v.negative!==0?(M=this.divmod(v.neg(),S),S!=="mod"&&(R=M.div.neg()),{div:R,mod:M.mod}):(this.negative&v.negative)!==0?(M=this.neg().divmod(v.neg(),S),S!=="div"&&(T=M.mod.neg(),N&&T.negative!==0&&T.isub(v)),{div:M.div,mod:T}):v.length>this.length||this.cmp(v)<0?{div:new o(0),mod:this}:v.length===1?S==="div"?{div:this.divn(v.words[0]),mod:null}:S==="mod"?{div:null,mod:new o(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new o(this.modrn(v.words[0]))}:this._wordDiv(v,S)},o.prototype.div=function(v){return this.divmod(v,"div",!1).div},o.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},o.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},o.prototype.divRound=function(v){var S=this.divmod(v);if(S.mod.isZero())return S.div;var N=S.div.negative!==0?S.mod.isub(v):S.mod,R=v.ushrn(1),T=v.andln(1),M=N.cmp(R);return M<0||T===1&&M===0?S.div:S.div.negative!==0?S.div.isubn(1):S.div.iaddn(1)},o.prototype.modrn=function(v){var S=v<0;S&&(v=-v),r(v<=67108863);for(var N=(1<<26)%v,R=0,T=this.length-1;T>=0;T--)R=(N*R+(this.words[T]|0))%v;return S?-R:R},o.prototype.modn=function(v){return this.modrn(v)},o.prototype.idivn=function(v){var S=v<0;S&&(v=-v),r(v<=67108863);for(var N=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+N*67108864;this.words[R]=T/v|0,N=T%v}return this._strip(),S?this.ineg():this},o.prototype.divn=function(v){return this.clone().idivn(v)},o.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var S=this,N=v.clone();S.negative!==0?S=S.umod(v):S=S.clone();for(var R=new o(1),T=new o(0),M=new o(0),I=new o(1),$=0;S.isEven()&&N.isEven();)S.iushrn(1),N.iushrn(1),++$;for(var A=N.clone(),L=S.clone();!S.isZero();){for(var Y=0,oe=1;(S.words[0]&oe)===0&&Y<26;++Y,oe<<=1);if(Y>0)for(S.iushrn(Y);Y-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(A),T.isub(L)),R.iushrn(1),T.iushrn(1);for(var J=0,U=1;(N.words[0]&U)===0&&J<26;++J,U<<=1);if(J>0)for(N.iushrn(J);J-- >0;)(M.isOdd()||I.isOdd())&&(M.iadd(A),I.isub(L)),M.iushrn(1),I.iushrn(1);S.cmp(N)>=0?(S.isub(N),R.isub(M),T.isub(I)):(N.isub(S),M.isub(R),I.isub(T))}return{a:M,b:I,gcd:N.iushln($)}},o.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var S=this,N=v.clone();S.negative!==0?S=S.umod(v):S=S.clone();for(var R=new o(1),T=new o(0),M=N.clone();S.cmpn(1)>0&&N.cmpn(1)>0;){for(var I=0,$=1;(S.words[0]&$)===0&&I<26;++I,$<<=1);if(I>0)for(S.iushrn(I);I-- >0;)R.isOdd()&&R.iadd(M),R.iushrn(1);for(var A=0,L=1;(N.words[0]&L)===0&&A<26;++A,L<<=1);if(A>0)for(N.iushrn(A);A-- >0;)T.isOdd()&&T.iadd(M),T.iushrn(1);S.cmp(N)>=0?(S.isub(N),R.isub(T)):(N.isub(S),T.isub(R))}var Y;return S.cmpn(1)===0?Y=R:Y=T,Y.cmpn(0)<0&&Y.iadd(v),Y},o.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var S=this.clone(),N=v.clone();S.negative=0,N.negative=0;for(var R=0;S.isEven()&&N.isEven();R++)S.iushrn(1),N.iushrn(1);do{for(;S.isEven();)S.iushrn(1);for(;N.isEven();)N.iushrn(1);var T=S.cmp(N);if(T<0){var M=S;S=N,N=M}else if(T===0||N.cmpn(1)===0)break;S.isub(N)}while(!0);return N.iushln(R)},o.prototype.invm=function(v){return this.egcd(v).a.umod(v)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(v){return this.words[0]&v},o.prototype.bincn=function(v){r(typeof v=="number");var S=v%26,N=(v-S)/26,R=1<<S;if(this.length<=N)return this._expand(N+1),this.words[N]|=R,this;for(var T=R,M=N;T!==0&&M<this.length;M++){var I=this.words[M]|0;I+=T,T=I>>>26,I&=67108863,this.words[M]=I}return T!==0&&(this.words[M]=T,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(v){var S=v<0;if(this.negative!==0&&!S)return-1;if(this.negative===0&&S)return 1;this._strip();var N;if(this.length>1)N=1;else{S&&(v=-v),r(v<=67108863,"Number is too big");var R=this.words[0]|0;N=R===v?0:R<v?-1:1}return this.negative!==0?-N|0:N},o.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var S=this.ucmp(v);return this.negative!==0?-S|0:S},o.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var S=0,N=this.length-1;N>=0;N--){var R=this.words[N]|0,T=v.words[N]|0;if(R!==T){R<T?S=-1:R>T&&(S=1);break}}return S},o.prototype.gtn=function(v){return this.cmpn(v)===1},o.prototype.gt=function(v){return this.cmp(v)===1},o.prototype.gten=function(v){return this.cmpn(v)>=0},o.prototype.gte=function(v){return this.cmp(v)>=0},o.prototype.ltn=function(v){return this.cmpn(v)===-1},o.prototype.lt=function(v){return this.cmp(v)===-1},o.prototype.lten=function(v){return this.cmpn(v)<=0},o.prototype.lte=function(v){return this.cmp(v)<=0},o.prototype.eqn=function(v){return this.cmpn(v)===0},o.prototype.eq=function(v){return this.cmp(v)===0},o.red=function(v){return new z(v)},o.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(v){return this.red=v,this},o.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},o.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},o.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},o.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},o.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},o.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},o.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},o.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var q={k256:null,p224:null,p192:null,p25519:null};function V(k,v){this.name=k,this.p=new o(v,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var v=new o(null);return v.words=new Array(Math.ceil(this.n/13)),v},V.prototype.ireduce=function(v){var S=v,N;do this.split(S,this.tmp),S=this.imulK(S),S=S.iadd(this.tmp),N=S.bitLength();while(N>this.n);var R=N<this.n?-1:S.ucmp(this.p);return R===0?(S.words[0]=0,S.length=1):R>0?S.isub(this.p):S.strip!==void 0?S.strip():S._strip(),S},V.prototype.split=function(v,S){v.iushrn(this.n,0,S)},V.prototype.imulK=function(v){return v.imul(this.k)};function ee(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(ee,V),ee.prototype.split=function(v,S){for(var N=4194303,R=Math.min(v.length,9),T=0;T<R;T++)S.words[T]=v.words[T];if(S.length=R,v.length<=9){v.words[0]=0,v.length=1;return}var M=v.words[9];for(S.words[S.length++]=M&N,T=10;T<v.length;T++){var I=v.words[T]|0;v.words[T-10]=(I&N)<<4|M>>>22,M=I}M>>>=22,v.words[T-10]=M,M===0&&v.length>10?v.length-=10:v.length-=9},ee.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var S=0,N=0;N<v.length;N++){var R=v.words[N]|0;S+=R*977,v.words[N]=S&67108863,S=R*64+(S/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function Q(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(Q,V);function W(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(W,V);function Z(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(Z,V),Z.prototype.imulK=function(v){for(var S=0,N=0;N<v.length;N++){var R=(v.words[N]|0)*19+S,T=R&67108863;R>>>=26,v.words[N]=T,S=R}return S!==0&&(v.words[v.length++]=S),v},o._prime=function(v){if(q[v])return q[v];var S;if(v==="k256")S=new ee;else if(v==="p224")S=new Q;else if(v==="p192")S=new W;else if(v==="p25519")S=new Z;else throw new Error("Unknown prime "+v);return q[v]=S,S};function z(k){if(typeof k=="string"){var v=o._prime(k);this.m=v.p,this.prime=v}else r(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}z.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},z.prototype._verify2=function(v,S){r((v.negative|S.negative)===0,"red works only with positives"),r(v.red&&v.red===S.red,"red works only with red numbers")},z.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(d(v,v.umod(this.m)._forceRed(this)),v)},z.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},z.prototype.add=function(v,S){this._verify2(v,S);var N=v.add(S);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},z.prototype.iadd=function(v,S){this._verify2(v,S);var N=v.iadd(S);return N.cmp(this.m)>=0&&N.isub(this.m),N},z.prototype.sub=function(v,S){this._verify2(v,S);var N=v.sub(S);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},z.prototype.isub=function(v,S){this._verify2(v,S);var N=v.isub(S);return N.cmpn(0)<0&&N.iadd(this.m),N},z.prototype.shl=function(v,S){return this._verify1(v),this.imod(v.ushln(S))},z.prototype.imul=function(v,S){return this._verify2(v,S),this.imod(v.imul(S))},z.prototype.mul=function(v,S){return this._verify2(v,S),this.imod(v.mul(S))},z.prototype.isqr=function(v){return this.imul(v,v.clone())},z.prototype.sqr=function(v){return this.mul(v,v)},z.prototype.sqrt=function(v){if(v.isZero())return v.clone();var S=this.m.andln(3);if(r(S%2===1),S===3){var N=this.m.add(new o(1)).iushrn(2);return this.pow(v,N)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);r(!R.isZero());var M=new o(1).toRed(this),I=M.redNeg(),$=this.m.subn(1).iushrn(1),A=this.m.bitLength();for(A=new o(2*A*A).toRed(this);this.pow(A,$).cmp(I)!==0;)A.redIAdd(I);for(var L=this.pow(A,R),Y=this.pow(v,R.addn(1).iushrn(1)),oe=this.pow(v,R),J=T;oe.cmp(M)!==0;){for(var U=oe,G=0;U.cmp(M)!==0;G++)U=U.redSqr();r(G<J);var ae=this.pow(L,new o(1).iushln(J-G-1));Y=Y.redMul(ae),L=ae.redSqr(),oe=oe.redMul(L),J=G}return Y},z.prototype.invm=function(v){var S=v._invmp(this.m);return S.negative!==0?(S.negative=0,this.imod(S).redNeg()):this.imod(S)},z.prototype.pow=function(v,S){if(S.isZero())return new o(1).toRed(this);if(S.cmpn(1)===0)return v.clone();var N=4,R=new Array(1<<N);R[0]=new o(1).toRed(this),R[1]=v;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],v);var M=R[0],I=0,$=0,A=S.bitLength()%26;for(A===0&&(A=26),T=S.length-1;T>=0;T--){for(var L=S.words[T],Y=A-1;Y>=0;Y--){var oe=L>>Y&1;if(M!==R[0]&&(M=this.sqr(M)),oe===0&&I===0){$=0;continue}I<<=1,I|=oe,$++,!($!==N&&(T!==0||Y!==0))&&(M=this.mul(M,R[I]),$=0,I=0)}A=26}return M},z.prototype.convertTo=function(v){var S=v.umod(this.m);return S===v?S.clone():S},z.prototype.convertFrom=function(v){var S=v.clone();return S.red=null,S},o.mont=function(v){return new O(v)};function O(k){z.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(O,z),O.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},O.prototype.convertFrom=function(v){var S=this.imod(v.mul(this.rinv));return S.red=null,S},O.prototype.imul=function(v,S){if(v.isZero()||S.isZero())return v.words[0]=0,v.length=1,v;var N=v.imul(S),R=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=N.isub(R).iushrn(this.shift),M=T;return T.cmp(this.m)>=0?M=T.isub(this.m):T.cmpn(0)<0&&(M=T.iadd(this.m)),M._forceRed(this)},O.prototype.mul=function(v,S){if(v.isZero()||S.isZero())return new o(0)._forceRed(this);var N=v.mul(S),R=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=N.isub(R).iushrn(this.shift),M=T;return T.cmp(this.m)>=0?M=T.isub(this.m):T.cmpn(0)<0&&(M=T.iadd(this.m)),M._forceRed(this)},O.prototype.invm=function(v){var S=this.imod(v._invmp(this.m).mul(this.r2));return S._forceRed(this)}})(t,bn$2)})(bn$3)),bn$3.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var t=requireBn$1(),e=requireBrowser$b(),s=requireSafeBuffer$2().Buffer;function r(l){var c=l.modulus.byteLength(),u;do u=new t(e(c));while(u.cmp(l.modulus)>=0||!u.umod(l.prime1)||!u.umod(l.prime2));return u}function a(l){var c=r(l),u=c.toRed(t.mont(l.modulus)).redPow(new t(l.publicExponent)).fromRed();return{blinder:u,unblinder:c.invm(l.modulus)}}function o(l,c){var u=a(c),f=c.modulus.byteLength(),d=new t(l).mul(u.blinder).umod(c.modulus),p=d.toRed(t.mont(c.prime1)),m=d.toRed(t.mont(c.prime2)),y=c.coefficient,b=c.prime1,E=c.prime2,C=p.redPow(c.exponent1).fromRed(),j=m.redPow(c.exponent2).fromRed(),B=C.isub(j).imul(y).umod(b).imul(E);return j.iadd(B).imul(u.unblinder).umod(c.modulus).toArrayLike(s,"be",f)}return o.getr=r,browserifyRsa=o,browserifyRsa}var elliptic$1={};const version="6.6.1",require$$0$1={version};var utils$4={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){return hasRequiredUtils$3||(hasRequiredUtils$3=1,(function(t){var e=t;function s(o,l){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)c[u]=o[u]|0;return c}if(l==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var u=0;u<o.length;u+=2)c.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var f=o.charCodeAt(u),d=f>>8,p=f&255;d?c.push(d,p):c.push(p)}return c}e.toArray=s;function r(o){return o.length===1?"0"+o:o}e.zero2=r;function a(o){for(var l="",c=0;c<o.length;c++)l+=r(o[c].toString(16));return l}e.toHex=a,e.encode=function(l,c){return c==="hex"?a(l):l}})(utils$3)),utils$3}var hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,(function(t){var e=t,s=requireBn$2(),r=requireMinimalisticAssert(),a=requireUtils$3();e.assert=r,e.toArray=a.toArray,e.zero2=a.zero2,e.toHex=a.toHex,e.encode=a.encode;function o(d,p,m){var y=new Array(Math.max(d.bitLength(),m)+1),b;for(b=0;b<y.length;b+=1)y[b]=0;var E=1<<p+1,C=d.clone();for(b=0;b<y.length;b++){var j,B=C.andln(E-1);C.isOdd()?(B>(E>>1)-1?j=(E>>1)-B:j=B,C.isubn(j)):j=0,y[b]=j,C.iushrn(1)}return y}e.getNAF=o;function l(d,p){var m=[[],[]];d=d.clone(),p=p.clone();for(var y=0,b=0,E;d.cmpn(-y)>0||p.cmpn(-b)>0;){var C=d.andln(3)+y&3,j=p.andln(3)+b&3;C===3&&(C=-1),j===3&&(j=-1);var B;(C&1)===0?B=0:(E=d.andln(7)+y&7,(E===3||E===5)&&j===2?B=-C:B=C),m[0].push(B);var D;(j&1)===0?D=0:(E=p.andln(7)+b&7,(E===3||E===5)&&C===2?D=-j:D=j),m[1].push(D),2*y===B+1&&(y=1-y),2*b===D+1&&(b=1-b),d.iushrn(1),p.iushrn(1)}return m}e.getJSF=l;function c(d,p,m){var y="_"+p;d.prototype[p]=function(){return this[y]!==void 0?this[y]:this[y]=m.call(this)}}e.cachedProperty=c;function u(d){return typeof d=="string"?e.toArray(d,"hex"):d}e.parseBytes=u;function f(d){return new s(d,"hex","le")}e.intFromLE=f})(utils$4)),utils$4}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var t=requireBn$2(),e=requireUtils$2(),s=e.getNAF,r=e.getJSF,a=e.assert;function o(c,u){this.type=c,this.p=new t(u.p,16),this.red=u.prime?t.red(u.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=u.n&&new t(u.n,16),this.g=u.g&&this.pointFromJSON(u.g,u.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var f=this.n&&this.p.div(this.n);!f||f.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=o,o.prototype.point=function(){throw new Error("Not implemented")},o.prototype.validate=function(){throw new Error("Not implemented")},o.prototype._fixedNafMul=function(u,f){a(u.precomputed);var d=u._getDoubles(),p=s(f,1,this._bitLength),m=(1<<d.step+1)-(d.step%2===0?2:1);m/=3;var y=[],b,E;for(b=0;b<p.length;b+=d.step){E=0;for(var C=b+d.step-1;C>=b;C--)E=(E<<1)+p[C];y.push(E)}for(var j=this.jpoint(null,null,null),B=this.jpoint(null,null,null),D=m;D>0;D--){for(b=0;b<y.length;b++)E=y[b],E===D?B=B.mixedAdd(d.points[b]):E===-D&&(B=B.mixedAdd(d.points[b].neg()));j=j.add(B)}return j.toP()},o.prototype._wnafMul=function(u,f){var d=4,p=u._getNAFPoints(d);d=p.wnd;for(var m=p.points,y=s(f,d,this._bitLength),b=this.jpoint(null,null,null),E=y.length-1;E>=0;E--){for(var C=0;E>=0&&y[E]===0;E--)C++;if(E>=0&&C++,b=b.dblp(C),E<0)break;var j=y[E];a(j!==0),u.type==="affine"?j>0?b=b.mixedAdd(m[j-1>>1]):b=b.mixedAdd(m[-j-1>>1].neg()):j>0?b=b.add(m[j-1>>1]):b=b.add(m[-j-1>>1].neg())}return u.type==="affine"?b.toP():b},o.prototype._wnafMulAdd=function(u,f,d,p,m){var y=this._wnafT1,b=this._wnafT2,E=this._wnafT3,C=0,j,B,D;for(j=0;j<p;j++){D=f[j];var F=D._getNAFPoints(u);y[j]=F.wnd,b[j]=F.points}for(j=p-1;j>=1;j-=2){var q=j-1,V=j;if(y[q]!==1||y[V]!==1){E[q]=s(d[q],y[q],this._bitLength),E[V]=s(d[V],y[V],this._bitLength),C=Math.max(E[q].length,C),C=Math.max(E[V].length,C);continue}var ee=[f[q],null,null,f[V]];f[q].y.cmp(f[V].y)===0?(ee[1]=f[q].add(f[V]),ee[2]=f[q].toJ().mixedAdd(f[V].neg())):f[q].y.cmp(f[V].y.redNeg())===0?(ee[1]=f[q].toJ().mixedAdd(f[V]),ee[2]=f[q].add(f[V].neg())):(ee[1]=f[q].toJ().mixedAdd(f[V]),ee[2]=f[q].toJ().mixedAdd(f[V].neg()));var Q=[-3,-1,-5,-7,0,7,5,1,3],W=r(d[q],d[V]);for(C=Math.max(W[0].length,C),E[q]=new Array(C),E[V]=new Array(C),B=0;B<C;B++){var Z=W[0][B]|0,z=W[1][B]|0;E[q][B]=Q[(Z+1)*3+(z+1)],E[V][B]=0,b[q]=ee}}var O=this.jpoint(null,null,null),k=this._wnafT4;for(j=C;j>=0;j--){for(var v=0;j>=0;){var S=!0;for(B=0;B<p;B++)k[B]=E[B][j]|0,k[B]!==0&&(S=!1);if(!S)break;v++,j--}if(j>=0&&v++,O=O.dblp(v),j<0)break;for(B=0;B<p;B++){var N=k[B];N!==0&&(N>0?D=b[B][N-1>>1]:N<0&&(D=b[B][-N-1>>1].neg()),D.type==="affine"?O=O.mixedAdd(D):O=O.add(D))}}for(j=0;j<p;j++)b[j]=null;return m?O:O.toP()};function l(c,u){this.curve=c,this.type=u,this.precomputed=null}return o.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},o.prototype.decodePoint=function(u,f){u=e.toArray(u,f);var d=this.p.byteLength();if((u[0]===4||u[0]===6||u[0]===7)&&u.length-1===2*d){u[0]===6?a(u[u.length-1]%2===0):u[0]===7&&a(u[u.length-1]%2===1);var p=this.point(u.slice(1,1+d),u.slice(1+d,1+2*d));return p}else if((u[0]===2||u[0]===3)&&u.length-1===d)return this.pointFromX(u.slice(1,1+d),u[0]===3);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(u){return this.encode(u,!0)},l.prototype._encode=function(u){var f=this.curve.p.byteLength(),d=this.getX().toArray("be",f);return u?[this.getY().isEven()?2:3].concat(d):[4].concat(d,this.getY().toArray("be",f))},l.prototype.encode=function(u,f){return e.encode(this._encode(f),u)},l.prototype.precompute=function(u){if(this.precomputed)return this;var f={doubles:null,naf:null,beta:null};return f.naf=this._getNAFPoints(8),f.doubles=this._getDoubles(4,u),f.beta=this._getBeta(),this.precomputed=f,this},l.prototype._hasDoubles=function(u){if(!this.precomputed)return!1;var f=this.precomputed.doubles;return f?f.points.length>=Math.ceil((u.bitLength()+1)/f.step):!1},l.prototype._getDoubles=function(u,f){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var d=[this],p=this,m=0;m<f;m+=u){for(var y=0;y<u;y++)p=p.dbl();d.push(p)}return{step:u,points:d}},l.prototype._getNAFPoints=function(u){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var f=[this],d=(1<<u)-1,p=d===1?null:this.dbl(),m=1;m<d;m++)f[m]=f[m-1].add(p);return{wnd:u,points:f}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(u){for(var f=this,d=0;d<u;d++)f=f.dbl();return f},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var t=requireUtils$2(),e=requireBn$2(),s=requireInherits_browser(),r=requireBase$1(),a=t.assert;function o(u){r.call(this,"short",u),this.a=new e(u.a,16).toRed(this.red),this.b=new e(u.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(u),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}s(o,r),short=o,o.prototype._getEndomorphism=function(f){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var d,p;if(f.beta)d=new e(f.beta,16).toRed(this.red);else{var m=this._getEndoRoots(this.p);d=m[0].cmp(m[1])<0?m[0]:m[1],d=d.toRed(this.red)}if(f.lambda)p=new e(f.lambda,16);else{var y=this._getEndoRoots(this.n);this.g.mul(y[0]).x.cmp(this.g.x.redMul(d))===0?p=y[0]:(p=y[1],a(this.g.mul(p).x.cmp(this.g.x.redMul(d))===0))}var b;return f.basis?b=f.basis.map(function(E){return{a:new e(E.a,16),b:new e(E.b,16)}}):b=this._getEndoBasis(p),{beta:d,lambda:p,basis:b}}},o.prototype._getEndoRoots=function(f){var d=f===this.p?this.red:e.mont(f),p=new e(2).toRed(d).redInvm(),m=p.redNeg(),y=new e(3).toRed(d).redNeg().redSqrt().redMul(p),b=m.redAdd(y).fromRed(),E=m.redSub(y).fromRed();return[b,E]},o.prototype._getEndoBasis=function(f){for(var d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),p=f,m=this.n.clone(),y=new e(1),b=new e(0),E=new e(0),C=new e(1),j,B,D,F,q,V,ee,Q=0,W,Z;p.cmpn(0)!==0;){var z=m.div(p);W=m.sub(z.mul(p)),Z=E.sub(z.mul(y));var O=C.sub(z.mul(b));if(!D&&W.cmp(d)<0)j=ee.neg(),B=y,D=W.neg(),F=Z;else if(D&&++Q===2)break;ee=W,m=p,p=W,E=y,y=Z,C=b,b=O}q=W.neg(),V=Z;var k=D.sqr().add(F.sqr()),v=q.sqr().add(V.sqr());return v.cmp(k)>=0&&(q=j,V=B),D.negative&&(D=D.neg(),F=F.neg()),q.negative&&(q=q.neg(),V=V.neg()),[{a:D,b:F},{a:q,b:V}]},o.prototype._endoSplit=function(f){var d=this.endo.basis,p=d[0],m=d[1],y=m.b.mul(f).divRound(this.n),b=p.b.neg().mul(f).divRound(this.n),E=y.mul(p.a),C=b.mul(m.a),j=y.mul(p.b),B=b.mul(m.b),D=f.sub(E).sub(C),F=j.add(B).neg();return{k1:D,k2:F}},o.prototype.pointFromX=function(f,d){f=new e(f,16),f.red||(f=f.toRed(this.red));var p=f.redSqr().redMul(f).redIAdd(f.redMul(this.a)).redIAdd(this.b),m=p.redSqrt();if(m.redSqr().redSub(p).cmp(this.zero)!==0)throw new Error("invalid point");var y=m.fromRed().isOdd();return(d&&!y||!d&&y)&&(m=m.redNeg()),this.point(f,m)},o.prototype.validate=function(f){if(f.inf)return!0;var d=f.x,p=f.y,m=this.a.redMul(d),y=d.redSqr().redMul(d).redIAdd(m).redIAdd(this.b);return p.redSqr().redISub(y).cmpn(0)===0},o.prototype._endoWnafMulAdd=function(f,d,p){for(var m=this._endoWnafT1,y=this._endoWnafT2,b=0;b<f.length;b++){var E=this._endoSplit(d[b]),C=f[b],j=C._getBeta();E.k1.negative&&(E.k1.ineg(),C=C.neg(!0)),E.k2.negative&&(E.k2.ineg(),j=j.neg(!0)),m[b*2]=C,m[b*2+1]=j,y[b*2]=E.k1,y[b*2+1]=E.k2}for(var B=this._wnafMulAdd(1,m,y,b*2,p),D=0;D<b*2;D++)m[D]=null,y[D]=null;return B};function l(u,f,d,p){r.BasePoint.call(this,u,"affine"),f===null&&d===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(f,16),this.y=new e(d,16),p&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}s(l,r.BasePoint),o.prototype.point=function(f,d,p){return new l(this,f,d,p)},o.prototype.pointFromJSON=function(f,d){return l.fromJSON(this,f,d)},l.prototype._getBeta=function(){if(this.curve.endo){var f=this.precomputed;if(f&&f.beta)return f.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(f){var p=this.curve,m=function(y){return p.point(y.x.redMul(p.endo.beta),y.y)};f.beta=d,d.precomputed={beta:null,naf:f.naf&&{wnd:f.naf.wnd,points:f.naf.points.map(m)},doubles:f.doubles&&{step:f.doubles.step,points:f.doubles.points.map(m)}}}return d}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(f,d,p){typeof d=="string"&&(d=JSON.parse(d));var m=f.point(d[0],d[1],p);if(!d[2])return m;function y(E){return f.point(E[0],E[1],p)}var b=d[2];return m.precomputed={beta:null,doubles:b.doubles&&{step:b.doubles.step,points:[m].concat(b.doubles.points.map(y))},naf:b.naf&&{wnd:b.naf.wnd,points:[m].concat(b.naf.points.map(y))}},m},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(f){if(this.inf)return f;if(f.inf)return this;if(this.eq(f))return this.dbl();if(this.neg().eq(f))return this.curve.point(null,null);if(this.x.cmp(f.x)===0)return this.curve.point(null,null);var d=this.y.redSub(f.y);d.cmpn(0)!==0&&(d=d.redMul(this.x.redSub(f.x).redInvm()));var p=d.redSqr().redISub(this.x).redISub(f.x),m=d.redMul(this.x.redSub(p)).redISub(this.y);return this.curve.point(p,m)},l.prototype.dbl=function(){if(this.inf)return this;var f=this.y.redAdd(this.y);if(f.cmpn(0)===0)return this.curve.point(null,null);var d=this.curve.a,p=this.x.redSqr(),m=f.redInvm(),y=p.redAdd(p).redIAdd(p).redIAdd(d).redMul(m),b=y.redSqr().redISub(this.x.redAdd(this.x)),E=y.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,E)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(f){return f=new e(f,16),this.isInfinity()?this:this._hasDoubles(f)?this.curve._fixedNafMul(this,f):this.curve.endo?this.curve._endoWnafMulAdd([this],[f]):this.curve._wnafMul(this,f)},l.prototype.mulAdd=function(f,d,p){var m=[this,d],y=[f,p];return this.curve.endo?this.curve._endoWnafMulAdd(m,y):this.curve._wnafMulAdd(1,m,y,2)},l.prototype.jmulAdd=function(f,d,p){var m=[this,d],y=[f,p];return this.curve.endo?this.curve._endoWnafMulAdd(m,y,!0):this.curve._wnafMulAdd(1,m,y,2,!0)},l.prototype.eq=function(f){return this===f||this.inf===f.inf&&(this.inf||this.x.cmp(f.x)===0&&this.y.cmp(f.y)===0)},l.prototype.neg=function(f){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(f&&this.precomputed){var p=this.precomputed,m=function(y){return y.neg()};d.precomputed={naf:p.naf&&{wnd:p.naf.wnd,points:p.naf.points.map(m)},doubles:p.doubles&&{step:p.doubles.step,points:p.doubles.points.map(m)}}}return d},l.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var f=this.curve.jpoint(this.x,this.y,this.curve.one);return f};function c(u,f,d,p){r.BasePoint.call(this,u,"jacobian"),f===null&&d===null&&p===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(f,16),this.y=new e(d,16),this.z=new e(p,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return s(c,r.BasePoint),o.prototype.jpoint=function(f,d,p){return new c(this,f,d,p)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var f=this.z.redInvm(),d=f.redSqr(),p=this.x.redMul(d),m=this.y.redMul(d).redMul(f);return this.curve.point(p,m)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(f){if(this.isInfinity())return f;if(f.isInfinity())return this;var d=f.z.redSqr(),p=this.z.redSqr(),m=this.x.redMul(d),y=f.x.redMul(p),b=this.y.redMul(d.redMul(f.z)),E=f.y.redMul(p.redMul(this.z)),C=m.redSub(y),j=b.redSub(E);if(C.cmpn(0)===0)return j.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var B=C.redSqr(),D=B.redMul(C),F=m.redMul(B),q=j.redSqr().redIAdd(D).redISub(F).redISub(F),V=j.redMul(F.redISub(q)).redISub(b.redMul(D)),ee=this.z.redMul(f.z).redMul(C);return this.curve.jpoint(q,V,ee)},c.prototype.mixedAdd=function(f){if(this.isInfinity())return f.toJ();if(f.isInfinity())return this;var d=this.z.redSqr(),p=this.x,m=f.x.redMul(d),y=this.y,b=f.y.redMul(d).redMul(this.z),E=p.redSub(m),C=y.redSub(b);if(E.cmpn(0)===0)return C.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var j=E.redSqr(),B=j.redMul(E),D=p.redMul(j),F=C.redSqr().redIAdd(B).redISub(D).redISub(D),q=C.redMul(D.redISub(F)).redISub(y.redMul(B)),V=this.z.redMul(E);return this.curve.jpoint(F,q,V)},c.prototype.dblp=function(f){if(f===0)return this;if(this.isInfinity())return this;if(!f)return this.dbl();var d;if(this.curve.zeroA||this.curve.threeA){var p=this;for(d=0;d<f;d++)p=p.dbl();return p}var m=this.curve.a,y=this.curve.tinv,b=this.x,E=this.y,C=this.z,j=C.redSqr().redSqr(),B=E.redAdd(E);for(d=0;d<f;d++){var D=b.redSqr(),F=B.redSqr(),q=F.redSqr(),V=D.redAdd(D).redIAdd(D).redIAdd(m.redMul(j)),ee=b.redMul(F),Q=V.redSqr().redISub(ee.redAdd(ee)),W=ee.redISub(Q),Z=V.redMul(W);Z=Z.redIAdd(Z).redISub(q);var z=B.redMul(C);d+1<f&&(j=j.redMul(q)),b=Q,C=z,B=Z}return this.curve.jpoint(b,B.redMul(y),C)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var f,d,p;if(this.zOne){var m=this.x.redSqr(),y=this.y.redSqr(),b=y.redSqr(),E=this.x.redAdd(y).redSqr().redISub(m).redISub(b);E=E.redIAdd(E);var C=m.redAdd(m).redIAdd(m),j=C.redSqr().redISub(E).redISub(E),B=b.redIAdd(b);B=B.redIAdd(B),B=B.redIAdd(B),f=j,d=C.redMul(E.redISub(j)).redISub(B),p=this.y.redAdd(this.y)}else{var D=this.x.redSqr(),F=this.y.redSqr(),q=F.redSqr(),V=this.x.redAdd(F).redSqr().redISub(D).redISub(q);V=V.redIAdd(V);var ee=D.redAdd(D).redIAdd(D),Q=ee.redSqr(),W=q.redIAdd(q);W=W.redIAdd(W),W=W.redIAdd(W),f=Q.redISub(V).redISub(V),d=ee.redMul(V.redISub(f)).redISub(W),p=this.y.redMul(this.z),p=p.redIAdd(p)}return this.curve.jpoint(f,d,p)},c.prototype._threeDbl=function(){var f,d,p;if(this.zOne){var m=this.x.redSqr(),y=this.y.redSqr(),b=y.redSqr(),E=this.x.redAdd(y).redSqr().redISub(m).redISub(b);E=E.redIAdd(E);var C=m.redAdd(m).redIAdd(m).redIAdd(this.curve.a),j=C.redSqr().redISub(E).redISub(E);f=j;var B=b.redIAdd(b);B=B.redIAdd(B),B=B.redIAdd(B),d=C.redMul(E.redISub(j)).redISub(B),p=this.y.redAdd(this.y)}else{var D=this.z.redSqr(),F=this.y.redSqr(),q=this.x.redMul(F),V=this.x.redSub(D).redMul(this.x.redAdd(D));V=V.redAdd(V).redIAdd(V);var ee=q.redIAdd(q);ee=ee.redIAdd(ee);var Q=ee.redAdd(ee);f=V.redSqr().redISub(Q),p=this.y.redAdd(this.z).redSqr().redISub(F).redISub(D);var W=F.redSqr();W=W.redIAdd(W),W=W.redIAdd(W),W=W.redIAdd(W),d=V.redMul(ee.redISub(f)).redISub(W)}return this.curve.jpoint(f,d,p)},c.prototype._dbl=function(){var f=this.curve.a,d=this.x,p=this.y,m=this.z,y=m.redSqr().redSqr(),b=d.redSqr(),E=p.redSqr(),C=b.redAdd(b).redIAdd(b).redIAdd(f.redMul(y)),j=d.redAdd(d);j=j.redIAdd(j);var B=j.redMul(E),D=C.redSqr().redISub(B.redAdd(B)),F=B.redISub(D),q=E.redSqr();q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var V=C.redMul(F).redISub(q),ee=p.redAdd(p).redMul(m);return this.curve.jpoint(D,V,ee)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var f=this.x.redSqr(),d=this.y.redSqr(),p=this.z.redSqr(),m=d.redSqr(),y=f.redAdd(f).redIAdd(f),b=y.redSqr(),E=this.x.redAdd(d).redSqr().redISub(f).redISub(m);E=E.redIAdd(E),E=E.redAdd(E).redIAdd(E),E=E.redISub(b);var C=E.redSqr(),j=m.redIAdd(m);j=j.redIAdd(j),j=j.redIAdd(j),j=j.redIAdd(j);var B=y.redIAdd(E).redSqr().redISub(b).redISub(C).redISub(j),D=d.redMul(B);D=D.redIAdd(D),D=D.redIAdd(D);var F=this.x.redMul(C).redISub(D);F=F.redIAdd(F),F=F.redIAdd(F);var q=this.y.redMul(B.redMul(j.redISub(B)).redISub(E.redMul(C)));q=q.redIAdd(q),q=q.redIAdd(q),q=q.redIAdd(q);var V=this.z.redAdd(E).redSqr().redISub(p).redISub(C);return this.curve.jpoint(F,q,V)},c.prototype.mul=function(f,d){return f=new e(f,d),this.curve._wnafMul(this,f)},c.prototype.eq=function(f){if(f.type==="affine")return this.eq(f.toJ());if(this===f)return!0;var d=this.z.redSqr(),p=f.z.redSqr();if(this.x.redMul(p).redISub(f.x.redMul(d)).cmpn(0)!==0)return!1;var m=d.redMul(this.z),y=p.redMul(f.z);return this.y.redMul(y).redISub(f.y.redMul(m)).cmpn(0)===0},c.prototype.eqXToP=function(f){var d=this.z.redSqr(),p=f.toRed(this.curve.red).redMul(d);if(this.x.cmp(p)===0)return!0;for(var m=f.clone(),y=this.curve.redN.redMul(d);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(p.redIAdd(y),this.x.cmp(p)===0)return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var t=requireBn$2(),e=requireInherits_browser(),s=requireBase$1(),r=requireUtils$2();function a(l){s.call(this,"mont",l),this.a=new t(l.a,16).toRed(this.red),this.b=new t(l.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(a,s),mont=a,a.prototype.validate=function(c){var u=c.normalize().x,f=u.redSqr(),d=f.redMul(u).redAdd(f.redMul(this.a)).redAdd(u),p=d.redSqrt();return p.redSqr().cmp(d)===0};function o(l,c,u){s.BasePoint.call(this,l,"projective"),c===null&&u===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(c,16),this.z=new t(u,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(o,s.BasePoint),a.prototype.decodePoint=function(c,u){return this.point(r.toArray(c,u),1)},a.prototype.point=function(c,u){return new o(this,c,u)},a.prototype.pointFromJSON=function(c){return o.fromJSON(this,c)},o.prototype.precompute=function(){},o.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},o.fromJSON=function(c,u){return new o(c,u[0],u[1]||c.one)},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.z.cmpn(0)===0},o.prototype.dbl=function(){var c=this.x.redAdd(this.z),u=c.redSqr(),f=this.x.redSub(this.z),d=f.redSqr(),p=u.redSub(d),m=u.redMul(d),y=p.redMul(d.redAdd(this.curve.a24.redMul(p)));return this.curve.point(m,y)},o.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},o.prototype.diffAdd=function(c,u){var f=this.x.redAdd(this.z),d=this.x.redSub(this.z),p=c.x.redAdd(c.z),m=c.x.redSub(c.z),y=m.redMul(f),b=p.redMul(d),E=u.z.redMul(y.redAdd(b).redSqr()),C=u.x.redMul(y.redISub(b).redSqr());return this.curve.point(E,C)},o.prototype.mul=function(c){for(var u=c.clone(),f=this,d=this.curve.point(null,null),p=this,m=[];u.cmpn(0)!==0;u.iushrn(1))m.push(u.andln(1));for(var y=m.length-1;y>=0;y--)m[y]===0?(f=f.diffAdd(d,p),d=d.dbl()):(d=f.diffAdd(d,p),f=f.dbl());return d},o.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},o.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},o.prototype.eq=function(c){return this.getX().cmp(c.getX())===0},o.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var t=requireUtils$2(),e=requireBn$2(),s=requireInherits_browser(),r=requireBase$1(),a=t.assert;function o(c){this.twisted=(c.a|0)!==1,this.mOneA=this.twisted&&(c.a|0)===-1,this.extended=this.mOneA,r.call(this,"edwards",c),this.a=new e(c.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(c.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(c.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(c.c|0)===1}s(o,r),edwards=o,o.prototype._mulA=function(u){return this.mOneA?u.redNeg():this.a.redMul(u)},o.prototype._mulC=function(u){return this.oneC?u:this.c.redMul(u)},o.prototype.jpoint=function(u,f,d,p){return this.point(u,f,d,p)},o.prototype.pointFromX=function(u,f){u=new e(u,16),u.red||(u=u.toRed(this.red));var d=u.redSqr(),p=this.c2.redSub(this.a.redMul(d)),m=this.one.redSub(this.c2.redMul(this.d).redMul(d)),y=p.redMul(m.redInvm()),b=y.redSqrt();if(b.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");var E=b.fromRed().isOdd();return(f&&!E||!f&&E)&&(b=b.redNeg()),this.point(u,b)},o.prototype.pointFromY=function(u,f){u=new e(u,16),u.red||(u=u.toRed(this.red));var d=u.redSqr(),p=d.redSub(this.c2),m=d.redMul(this.d).redMul(this.c2).redSub(this.a),y=p.redMul(m.redInvm());if(y.cmp(this.zero)===0){if(f)throw new Error("invalid point");return this.point(this.zero,u)}var b=y.redSqrt();if(b.redSqr().redSub(y).cmp(this.zero)!==0)throw new Error("invalid point");return b.fromRed().isOdd()!==f&&(b=b.redNeg()),this.point(b,u)},o.prototype.validate=function(u){if(u.isInfinity())return!0;u.normalize();var f=u.x.redSqr(),d=u.y.redSqr(),p=f.redMul(this.a).redAdd(d),m=this.c2.redMul(this.one.redAdd(this.d.redMul(f).redMul(d)));return p.cmp(m)===0};function l(c,u,f,d,p){r.BasePoint.call(this,c,"projective"),u===null&&f===null&&d===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(u,16),this.y=new e(f,16),this.z=d?new e(d,16):this.curve.one,this.t=p&&new e(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return s(l,r.BasePoint),o.prototype.pointFromJSON=function(u){return l.fromJSON(this,u)},o.prototype.point=function(u,f,d,p){return new l(this,u,f,d,p)},l.fromJSON=function(u,f){return new l(u,f[0],f[1],f[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},l.prototype._extDbl=function(){var u=this.x.redSqr(),f=this.y.redSqr(),d=this.z.redSqr();d=d.redIAdd(d);var p=this.curve._mulA(u),m=this.x.redAdd(this.y).redSqr().redISub(u).redISub(f),y=p.redAdd(f),b=y.redSub(d),E=p.redSub(f),C=m.redMul(b),j=y.redMul(E),B=m.redMul(E),D=b.redMul(y);return this.curve.point(C,j,D,B)},l.prototype._projDbl=function(){var u=this.x.redAdd(this.y).redSqr(),f=this.x.redSqr(),d=this.y.redSqr(),p,m,y,b,E,C;if(this.curve.twisted){b=this.curve._mulA(f);var j=b.redAdd(d);this.zOne?(p=u.redSub(f).redSub(d).redMul(j.redSub(this.curve.two)),m=j.redMul(b.redSub(d)),y=j.redSqr().redSub(j).redSub(j)):(E=this.z.redSqr(),C=j.redSub(E).redISub(E),p=u.redSub(f).redISub(d).redMul(C),m=j.redMul(b.redSub(d)),y=j.redMul(C))}else b=f.redAdd(d),E=this.curve._mulC(this.z).redSqr(),C=b.redSub(E).redSub(E),p=this.curve._mulC(u.redISub(b)).redMul(C),m=this.curve._mulC(b).redMul(f.redISub(d)),y=b.redMul(C);return this.curve.point(p,m,y)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(u){var f=this.y.redSub(this.x).redMul(u.y.redSub(u.x)),d=this.y.redAdd(this.x).redMul(u.y.redAdd(u.x)),p=this.t.redMul(this.curve.dd).redMul(u.t),m=this.z.redMul(u.z.redAdd(u.z)),y=d.redSub(f),b=m.redSub(p),E=m.redAdd(p),C=d.redAdd(f),j=y.redMul(b),B=E.redMul(C),D=y.redMul(C),F=b.redMul(E);return this.curve.point(j,B,F,D)},l.prototype._projAdd=function(u){var f=this.z.redMul(u.z),d=f.redSqr(),p=this.x.redMul(u.x),m=this.y.redMul(u.y),y=this.curve.d.redMul(p).redMul(m),b=d.redSub(y),E=d.redAdd(y),C=this.x.redAdd(this.y).redMul(u.x.redAdd(u.y)).redISub(p).redISub(m),j=f.redMul(b).redMul(C),B,D;return this.curve.twisted?(B=f.redMul(E).redMul(m.redSub(this.curve._mulA(p))),D=b.redMul(E)):(B=f.redMul(E).redMul(m.redSub(p)),D=this.curve._mulC(b).redMul(E)),this.curve.point(j,B,D)},l.prototype.add=function(u){return this.isInfinity()?u:u.isInfinity()?this:this.curve.extended?this._extAdd(u):this._projAdd(u)},l.prototype.mul=function(u){return this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve._wnafMul(this,u)},l.prototype.mulAdd=function(u,f,d){return this.curve._wnafMulAdd(1,[this,f],[u,d],2,!1)},l.prototype.jmulAdd=function(u,f,d){return this.curve._wnafMulAdd(1,[this,f],[u,d],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var u=this.z.redInvm();return this.x=this.x.redMul(u),this.y=this.y.redMul(u),this.t&&(this.t=this.t.redMul(u)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(u){return this===u||this.getX().cmp(u.getX())===0&&this.getY().cmp(u.getY())===0},l.prototype.eqXToP=function(u){var f=u.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(f)===0)return!0;for(var d=u.clone(),p=this.curve.redN.redMul(this.z);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(f.redIAdd(p),this.x.cmp(f)===0)return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,(function(t){var e=t;e.base=requireBase$1(),e.short=requireShort(),e.mont=requireMont(),e.edwards=requireEdwards()})(curve)),curve}var curves={},hash={},utils$2={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$2;hasRequiredUtils$1=1;var t=requireMinimalisticAssert(),e=requireInherits_browser();utils$2.inherits=e;function s(O,k){return(O.charCodeAt(k)&64512)!==55296||k<0||k+1>=O.length?!1:(O.charCodeAt(k+1)&64512)===56320}function r(O,k){if(Array.isArray(O))return O.slice();if(!O)return[];var v=[];if(typeof O=="string")if(k){if(k==="hex")for(O=O.replace(/[^a-z0-9]+/ig,""),O.length%2!==0&&(O="0"+O),N=0;N<O.length;N+=2)v.push(parseInt(O[N]+O[N+1],16))}else for(var S=0,N=0;N<O.length;N++){var R=O.charCodeAt(N);R<128?v[S++]=R:R<2048?(v[S++]=R>>6|192,v[S++]=R&63|128):s(O,N)?(R=65536+((R&1023)<<10)+(O.charCodeAt(++N)&1023),v[S++]=R>>18|240,v[S++]=R>>12&63|128,v[S++]=R>>6&63|128,v[S++]=R&63|128):(v[S++]=R>>12|224,v[S++]=R>>6&63|128,v[S++]=R&63|128)}else for(N=0;N<O.length;N++)v[N]=O[N]|0;return v}utils$2.toArray=r;function a(O){for(var k="",v=0;v<O.length;v++)k+=c(O[v].toString(16));return k}utils$2.toHex=a;function o(O){var k=O>>>24|O>>>8&65280|O<<8&16711680|(O&255)<<24;return k>>>0}utils$2.htonl=o;function l(O,k){for(var v="",S=0;S<O.length;S++){var N=O[S];k==="little"&&(N=o(N)),v+=u(N.toString(16))}return v}utils$2.toHex32=l;function c(O){return O.length===1?"0"+O:O}utils$2.zero2=c;function u(O){return O.length===7?"0"+O:O.length===6?"00"+O:O.length===5?"000"+O:O.length===4?"0000"+O:O.length===3?"00000"+O:O.length===2?"000000"+O:O.length===1?"0000000"+O:O}utils$2.zero8=u;function f(O,k,v,S){var N=v-k;t(N%4===0);for(var R=new Array(N/4),T=0,M=k;T<R.length;T++,M+=4){var I;S==="big"?I=O[M]<<24|O[M+1]<<16|O[M+2]<<8|O[M+3]:I=O[M+3]<<24|O[M+2]<<16|O[M+1]<<8|O[M],R[T]=I>>>0}return R}utils$2.join32=f;function d(O,k){for(var v=new Array(O.length*4),S=0,N=0;S<O.length;S++,N+=4){var R=O[S];k==="big"?(v[N]=R>>>24,v[N+1]=R>>>16&255,v[N+2]=R>>>8&255,v[N+3]=R&255):(v[N+3]=R>>>24,v[N+2]=R>>>16&255,v[N+1]=R>>>8&255,v[N]=R&255)}return v}utils$2.split32=d;function p(O,k){return O>>>k|O<<32-k}utils$2.rotr32=p;function m(O,k){return O<<k|O>>>32-k}utils$2.rotl32=m;function y(O,k){return O+k>>>0}utils$2.sum32=y;function b(O,k,v){return O+k+v>>>0}utils$2.sum32_3=b;function E(O,k,v,S){return O+k+v+S>>>0}utils$2.sum32_4=E;function C(O,k,v,S,N){return O+k+v+S+N>>>0}utils$2.sum32_5=C;function j(O,k,v,S){var N=O[k],R=O[k+1],T=S+R>>>0,M=(T<S?1:0)+v+N;O[k]=M>>>0,O[k+1]=T}utils$2.sum64=j;function B(O,k,v,S){var N=k+S>>>0,R=(N<k?1:0)+O+v;return R>>>0}utils$2.sum64_hi=B;function D(O,k,v,S){var N=k+S;return N>>>0}utils$2.sum64_lo=D;function F(O,k,v,S,N,R,T,M){var I=0,$=k;$=$+S>>>0,I+=$<k?1:0,$=$+R>>>0,I+=$<R?1:0,$=$+M>>>0,I+=$<M?1:0;var A=O+v+N+T+I;return A>>>0}utils$2.sum64_4_hi=F;function q(O,k,v,S,N,R,T,M){var I=k+S+R+M;return I>>>0}utils$2.sum64_4_lo=q;function V(O,k,v,S,N,R,T,M,I,$){var A=0,L=k;L=L+S>>>0,A+=L<k?1:0,L=L+R>>>0,A+=L<R?1:0,L=L+M>>>0,A+=L<M?1:0,L=L+$>>>0,A+=L<$?1:0;var Y=O+v+N+T+I+A;return Y>>>0}utils$2.sum64_5_hi=V;function ee(O,k,v,S,N,R,T,M,I,$){var A=k+S+R+M+$;return A>>>0}utils$2.sum64_5_lo=ee;function Q(O,k,v){var S=k<<32-v|O>>>v;return S>>>0}utils$2.rotr64_hi=Q;function W(O,k,v){var S=O<<32-v|k>>>v;return S>>>0}utils$2.rotr64_lo=W;function Z(O,k,v){return O>>>v}utils$2.shr64_hi=Z;function z(O,k,v){var S=O<<32-v|k>>>v;return S>>>0}return utils$2.shr64_lo=z,utils$2}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var t=requireUtils$1(),e=requireMinimalisticAssert();function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=s,s.prototype.update=function(a,o){if(a=t.toArray(a,o),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var l=a.length%this._delta8;this.pending=a.slice(a.length-l,a.length),this.pending.length===0&&(this.pending=null),a=t.join32(a,0,a.length-l,this.endian);for(var c=0;c<a.length;c+=this._delta32)this._update(a,c,c+this._delta32)}return this},s.prototype.digest=function(a){return this.update(this._pad()),e(this.pending===null),this._digest(a)},s.prototype._pad=function(){var a=this.pendingTotal,o=this._delta8,l=o-(a+this.padLength)%o,c=new Array(l+this.padLength);c[0]=128;for(var u=1;u<l;u++)c[u]=0;if(a<<=3,this.endian==="big"){for(var f=8;f<this.padLength;f++)c[u++]=0;c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=a>>>24&255,c[u++]=a>>>16&255,c[u++]=a>>>8&255,c[u++]=a&255}else for(c[u++]=a&255,c[u++]=a>>>8&255,c[u++]=a>>>16&255,c[u++]=a>>>24&255,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,f=8;f<this.padLength;f++)c[u++]=0;return c},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var t=requireUtils$1(),e=t.rotr32;function s(d,p,m,y){if(d===0)return r(p,m,y);if(d===1||d===3)return o(p,m,y);if(d===2)return a(p,m,y)}common.ft_1=s;function r(d,p,m){return d&p^~d&m}common.ch32=r;function a(d,p,m){return d&p^d&m^p&m}common.maj32=a;function o(d,p,m){return d^p^m}common.p32=o;function l(d){return e(d,2)^e(d,13)^e(d,22)}common.s0_256=l;function c(d){return e(d,6)^e(d,11)^e(d,25)}common.s1_256=c;function u(d){return e(d,7)^e(d,18)^d>>>3}common.g0_256=u;function f(d){return e(d,17)^e(d,19)^d>>>10}return common.g1_256=f,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var t=requireUtils$1(),e=requireCommon$1(),s=requireCommon(),r=t.rotl32,a=t.sum32,o=t.sum32_5,l=s.ft_1,c=e.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(f,c),_1=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(p,m){for(var y=this.W,b=0;b<16;b++)y[b]=p[m+b];for(;b<y.length;b++)y[b]=r(y[b-3]^y[b-8]^y[b-14]^y[b-16],1);var E=this.h[0],C=this.h[1],j=this.h[2],B=this.h[3],D=this.h[4];for(b=0;b<y.length;b++){var F=~~(b/20),q=o(r(E,5),l(F,C,j,B),D,y[b],u[F]);D=B,B=j,j=r(C,30),C=E,E=q}this.h[0]=a(this.h[0],E),this.h[1]=a(this.h[1],C),this.h[2]=a(this.h[2],j),this.h[3]=a(this.h[3],B),this.h[4]=a(this.h[4],D)},f.prototype._digest=function(p){return p==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var t=requireUtils$1(),e=requireCommon$1(),s=requireCommon(),r=requireMinimalisticAssert(),a=t.sum32,o=t.sum32_4,l=t.sum32_5,c=s.ch32,u=s.maj32,f=s.s0_256,d=s.s1_256,p=s.g0_256,m=s.g1_256,y=e.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function E(){if(!(this instanceof E))return new E;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}return t.inherits(E,y),_256=E,E.blockSize=512,E.outSize=256,E.hmacStrength=192,E.padLength=64,E.prototype._update=function(j,B){for(var D=this.W,F=0;F<16;F++)D[F]=j[B+F];for(;F<D.length;F++)D[F]=o(m(D[F-2]),D[F-7],p(D[F-15]),D[F-16]);var q=this.h[0],V=this.h[1],ee=this.h[2],Q=this.h[3],W=this.h[4],Z=this.h[5],z=this.h[6],O=this.h[7];for(r(this.k.length===D.length),F=0;F<D.length;F++){var k=l(O,d(W),c(W,Z,z),this.k[F],D[F]),v=a(f(q),u(q,V,ee));O=z,z=Z,Z=W,W=a(Q,k),Q=ee,ee=V,V=q,q=a(k,v)}this.h[0]=a(this.h[0],q),this.h[1]=a(this.h[1],V),this.h[2]=a(this.h[2],ee),this.h[3]=a(this.h[3],Q),this.h[4]=a(this.h[4],W),this.h[5]=a(this.h[5],Z),this.h[6]=a(this.h[6],z),this.h[7]=a(this.h[7],O)},E.prototype._digest=function(j){return j==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var t=requireUtils$1(),e=require_256();function s(){if(!(this instanceof s))return new s;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(s,e),_224=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(a){return a==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var t=requireUtils$1(),e=requireCommon$1(),s=requireMinimalisticAssert(),r=t.rotr64_hi,a=t.rotr64_lo,o=t.shr64_hi,l=t.shr64_lo,c=t.sum64,u=t.sum64_hi,f=t.sum64_lo,d=t.sum64_4_hi,p=t.sum64_4_lo,m=t.sum64_5_hi,y=t.sum64_5_lo,b=e.BlockHash,E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function C(){if(!(this instanceof C))return new C;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=E,this.W=new Array(160)}t.inherits(C,b),_512=C,C.blockSize=1024,C.outSize=512,C.hmacStrength=192,C.padLength=128,C.prototype._prepareBlock=function(v,S){for(var N=this.W,R=0;R<32;R++)N[R]=v[S+R];for(;R<N.length;R+=2){var T=z(N[R-4],N[R-3]),M=O(N[R-4],N[R-3]),I=N[R-14],$=N[R-13],A=W(N[R-30],N[R-29]),L=Z(N[R-30],N[R-29]),Y=N[R-32],oe=N[R-31];N[R]=d(T,M,I,$,A,L,Y,oe),N[R+1]=p(T,M,I,$,A,L,Y,oe)}},C.prototype._update=function(v,S){this._prepareBlock(v,S);var N=this.W,R=this.h[0],T=this.h[1],M=this.h[2],I=this.h[3],$=this.h[4],A=this.h[5],L=this.h[6],Y=this.h[7],oe=this.h[8],J=this.h[9],U=this.h[10],G=this.h[11],ae=this.h[12],he=this.h[13],le=this.h[14],te=this.h[15];s(this.k.length===N.length);for(var pe=0;pe<N.length;pe+=2){var xe=le,be=te,ce=ee(oe,J),re=Q(oe,J),ie=j(oe,J,U,G,ae),fe=B(oe,J,U,G,ae,he),ye=this.k[pe],we=this.k[pe+1],Re=N[pe],Me=N[pe+1],ke=m(xe,be,ce,re,ie,fe,ye,we,Re,Me),Le=y(xe,be,ce,re,ie,fe,ye,we,Re,Me);xe=q(R,T),be=V(R,T),ce=D(R,T,M,I,$),re=F(R,T,M,I,$,A);var Fe=u(xe,be,ce,re),Te=f(xe,be,ce,re);le=ae,te=he,ae=U,he=G,U=oe,G=J,oe=u(L,Y,ke,Le),J=f(Y,Y,ke,Le),L=$,Y=A,$=M,A=I,M=R,I=T,R=u(ke,Le,Fe,Te),T=f(ke,Le,Fe,Te)}c(this.h,0,R,T),c(this.h,2,M,I),c(this.h,4,$,A),c(this.h,6,L,Y),c(this.h,8,oe,J),c(this.h,10,U,G),c(this.h,12,ae,he),c(this.h,14,le,te)},C.prototype._digest=function(v){return v==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function j(k,v,S,N,R){var T=k&S^~k&R;return T<0&&(T+=4294967296),T}function B(k,v,S,N,R,T){var M=v&N^~v&T;return M<0&&(M+=4294967296),M}function D(k,v,S,N,R){var T=k&S^k&R^S&R;return T<0&&(T+=4294967296),T}function F(k,v,S,N,R,T){var M=v&N^v&T^N&T;return M<0&&(M+=4294967296),M}function q(k,v){var S=r(k,v,28),N=r(v,k,2),R=r(v,k,7),T=S^N^R;return T<0&&(T+=4294967296),T}function V(k,v){var S=a(k,v,28),N=a(v,k,2),R=a(v,k,7),T=S^N^R;return T<0&&(T+=4294967296),T}function ee(k,v){var S=r(k,v,14),N=r(k,v,18),R=r(v,k,9),T=S^N^R;return T<0&&(T+=4294967296),T}function Q(k,v){var S=a(k,v,14),N=a(k,v,18),R=a(v,k,9),T=S^N^R;return T<0&&(T+=4294967296),T}function W(k,v){var S=r(k,v,1),N=r(k,v,8),R=o(k,v,7),T=S^N^R;return T<0&&(T+=4294967296),T}function Z(k,v){var S=a(k,v,1),N=a(k,v,8),R=l(k,v,7),T=S^N^R;return T<0&&(T+=4294967296),T}function z(k,v){var S=r(k,v,19),N=r(v,k,29),R=o(k,v,6),T=S^N^R;return T<0&&(T+=4294967296),T}function O(k,v){var S=a(k,v,19),N=a(v,k,29),R=l(k,v,6),T=S^N^R;return T<0&&(T+=4294967296),T}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var t=requireUtils$1(),e=require_512();function s(){if(!(this instanceof s))return new s;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(s,e),_384=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(a){return a==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var t=requireUtils$1(),e=requireCommon$1(),s=t.rotl32,r=t.sum32,a=t.sum32_3,o=t.sum32_4,l=e.BlockHash;function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(c,l),ripemd.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(C,j){for(var B=this.h[0],D=this.h[1],F=this.h[2],q=this.h[3],V=this.h[4],ee=B,Q=D,W=F,Z=q,z=V,O=0;O<80;O++){var k=r(s(o(B,u(O,D,F,q),C[p[O]+j],f(O)),y[O]),V);B=V,V=q,q=s(F,10),F=D,D=k,k=r(s(o(ee,u(79-O,Q,W,Z),C[m[O]+j],d(O)),b[O]),z),ee=z,z=Z,Z=s(W,10),W=Q,Q=k}k=a(this.h[1],F,Z),this.h[1]=a(this.h[2],q,z),this.h[2]=a(this.h[3],V,ee),this.h[3]=a(this.h[4],B,Q),this.h[4]=a(this.h[0],D,W),this.h[0]=k},c.prototype._digest=function(C){return C==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function u(E,C,j,B){return E<=15?C^j^B:E<=31?C&j|~C&B:E<=47?(C|~j)^B:E<=63?C&B|j&~B:C^(j|~B)}function f(E){return E<=15?0:E<=31?1518500249:E<=47?1859775393:E<=63?2400959708:2840853838}function d(E){return E<=15?1352829926:E<=31?1548603684:E<=47?1836072691:E<=63?2053994217:0}var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac$7,hasRequiredHmac$2;function requireHmac$2(){if(hasRequiredHmac$2)return hmac$7;hasRequiredHmac$2=1;var t=requireUtils$1(),e=requireMinimalisticAssert();function s(r,a,o){if(!(this instanceof s))return new s(r,a,o);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(a,o))}return hmac$7=s,s.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),e(a.length<=this.blockSize);for(var o=a.length;o<this.blockSize;o++)a.push(0);for(o=0;o<a.length;o++)a[o]^=54;for(this.inner=new this.Hash().update(a),o=0;o<a.length;o++)a[o]^=106;this.outer=new this.Hash().update(a)},s.prototype.update=function(a,o){return this.inner.update(a,o),this},s.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)},hmac$7}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,(function(t){var e=t;e.utils=requireUtils$1(),e.common=requireCommon$1(),e.sha=requireSha(),e.ripemd=requireRipemd(),e.hmac=requireHmac$2(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash)),hash}var secp256k1$3,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$3={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$3}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,(function(t){var e=t,s=requireHash(),r=requireCurve(),a=requireUtils$2(),o=a.assert;function l(f){f.type==="short"?this.curve=new r.short(f):f.type==="edwards"?this.curve=new r.edwards(f):this.curve=new r.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=l;function c(f,d){Object.defineProperty(e,f,{configurable:!0,enumerable:!0,get:function(){var p=new l(d);return Object.defineProperty(e,f,{configurable:!0,enumerable:!0,value:p}),p}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=requireSecp256k1()}catch{u=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})})(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var t=requireHash(),e=requireUtils$3(),s=requireMinimalisticAssert();function r(a){if(!(this instanceof r))return new r(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var o=e.toArray(a.entropy,a.entropyEnc||"hex"),l=e.toArray(a.nonce,a.nonceEnc||"hex"),c=e.toArray(a.pers,a.persEnc||"hex");s(o.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(o,l,c)}return hmacDrbg=r,r.prototype._init=function(o,l,c){var u=o.concat(l).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var f=0;f<this.V.length;f++)this.K[f]=0,this.V[f]=1;this._update(u),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},r.prototype._update=function(o){var l=this._hmac().update(this.V).update([0]);o&&(l=l.update(o)),this.K=l.digest(),this.V=this._hmac().update(this.V).digest(),o&&(this.K=this._hmac().update(this.V).update([1]).update(o).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(o,l,c,u){typeof l!="string"&&(u=c,c=l,l=null),o=e.toArray(o,l),c=e.toArray(c,u),s(o.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(o.concat(c||[])),this._reseed=1},r.prototype.generate=function(o,l,c,u){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof l!="string"&&(u=c,c=l,l=null),c&&(c=e.toArray(c,u||"hex"),this._update(c));for(var f=[];f.length<o;)this.V=this._hmac().update(this.V).digest(),f=f.concat(this.V);var d=f.slice(0,o);return this._update(c),this._reseed++,e.encode(d,l)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var t=requireBn$2(),e=requireUtils$2(),s=e.assert;function r(a,o){this.ec=a,this.priv=null,this.pub=null,o.priv&&this._importPrivate(o.priv,o.privEnc),o.pub&&this._importPublic(o.pub,o.pubEnc)}return key$1=r,r.fromPublic=function(o,l,c){return l instanceof r?l:new r(o,{pub:l,pubEnc:c})},r.fromPrivate=function(o,l,c){return l instanceof r?l:new r(o,{priv:l,privEnc:c})},r.prototype.validate=function(){var o=this.getPublic();return o.isInfinity()?{result:!1,reason:"Invalid public key"}:o.validate()?o.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(o,l){return typeof o=="string"&&(l=o,o=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),l?this.pub.encode(l,o):this.pub},r.prototype.getPrivate=function(o){return o==="hex"?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(o,l){this.priv=new t(o,l||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(o,l){if(o.x||o.y){this.ec.curve.type==="mont"?s(o.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&s(o.x&&o.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(o.x,o.y);return}this.pub=this.ec.curve.decodePoint(o,l)},r.prototype.derive=function(o){return o.validate()||s(o.validate(),"public point not validated"),o.mul(this.priv).getX()},r.prototype.sign=function(o,l,c){return this.ec.sign(o,this,l,c)},r.prototype.verify=function(o,l,c){return this.ec.verify(o,l,this,void 0,c)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var t=requireBn$2(),e=requireUtils$2(),s=e.assert;function r(u,f){if(u instanceof r)return u;this._importDER(u,f)||(s(u.r&&u.s,"Signature without r or s"),this.r=new t(u.r,16),this.s=new t(u.s,16),u.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=u.recoveryParam)}signature$1=r;function a(){this.place=0}function o(u,f){var d=u[f.place++];if(!(d&128))return d;var p=d&15;if(p===0||p>4||u[f.place]===0)return!1;for(var m=0,y=0,b=f.place;y<p;y++,b++)m<<=8,m|=u[b],m>>>=0;return m<=127?!1:(f.place=b,m)}function l(u){for(var f=0,d=u.length-1;!u[f]&&!(u[f+1]&128)&&f<d;)f++;return f===0?u:u.slice(f)}r.prototype._importDER=function(f,d){f=e.toArray(f,d);var p=new a;if(f[p.place++]!==48)return!1;var m=o(f,p);if(m===!1||m+p.place!==f.length||f[p.place++]!==2)return!1;var y=o(f,p);if(y===!1||(f[p.place]&128)!==0)return!1;var b=f.slice(p.place,y+p.place);if(p.place+=y,f[p.place++]!==2)return!1;var E=o(f,p);if(E===!1||f.length!==E+p.place||(f[p.place]&128)!==0)return!1;var C=f.slice(p.place,E+p.place);if(b[0]===0)if(b[1]&128)b=b.slice(1);else return!1;if(C[0]===0)if(C[1]&128)C=C.slice(1);else return!1;return this.r=new t(b),this.s=new t(C),this.recoveryParam=null,!0};function c(u,f){if(f<128){u.push(f);return}var d=1+(Math.log(f)/Math.LN2>>>3);for(u.push(d|128);--d;)u.push(f>>>(d<<3)&255);u.push(f)}return r.prototype.toDER=function(f){var d=this.r.toArray(),p=this.s.toArray();for(d[0]&128&&(d=[0].concat(d)),p[0]&128&&(p=[0].concat(p)),d=l(d),p=l(p);!p[0]&&!(p[1]&128);)p=p.slice(1);var m=[2];c(m,d.length),m=m.concat(d),m.push(2),c(m,p.length);var y=m.concat(p),b=[48];return c(b,y.length),b=b.concat(y),e.encode(b,f)},signature$1}var ec$2,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec$2;hasRequiredEc=1;var t=requireBn$2(),e=requireHmacDrbg(),s=requireUtils$2(),r=requireCurves(),a=requireBrorand(),o=s.assert,l=requireKey$1(),c=requireSignature$1();function u(f){if(!(this instanceof u))return new u(f);typeof f=="string"&&(o(Object.prototype.hasOwnProperty.call(r,f),"Unknown curve "+f),f=r[f]),f instanceof r.PresetCurve&&(f={curve:f}),this.curve=f.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=f.curve.g,this.g.precompute(f.curve.n.bitLength()+1),this.hash=f.hash||f.curve.hash}return ec$2=u,u.prototype.keyPair=function(d){return new l(this,d)},u.prototype.keyFromPrivate=function(d,p){return l.fromPrivate(this,d,p)},u.prototype.keyFromPublic=function(d,p){return l.fromPublic(this,d,p)},u.prototype.genKeyPair=function(d){d||(d={});for(var p=new e({hash:this.hash,pers:d.pers,persEnc:d.persEnc||"utf8",entropy:d.entropy||a(this.hash.hmacStrength),entropyEnc:d.entropy&&d.entropyEnc||"utf8",nonce:this.n.toArray()}),m=this.n.byteLength(),y=this.n.sub(new t(2));;){var b=new t(p.generate(m));if(!(b.cmp(y)>0))return b.iaddn(1),this.keyFromPrivate(b)}},u.prototype._truncateToN=function(d,p,m){var y;if(t.isBN(d)||typeof d=="number")d=new t(d,16),y=d.byteLength();else if(typeof d=="object")y=d.length,d=new t(d,16);else{var b=d.toString();y=b.length+1>>>1,d=new t(b,16)}typeof m!="number"&&(m=y*8);var E=m-this.n.bitLength();return E>0&&(d=d.ushrn(E)),!p&&d.cmp(this.n)>=0?d.sub(this.n):d},u.prototype.sign=function(d,p,m,y){if(typeof m=="object"&&(y=m,m=null),y||(y={}),typeof d!="string"&&typeof d!="number"&&!t.isBN(d)){o(typeof d=="object"&&d&&typeof d.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),o(d.length>>>0===d.length);for(var b=0;b<d.length;b++)o((d[b]&255)===d[b])}p=this.keyFromPrivate(p,m),d=this._truncateToN(d,!1,y.msgBitLength),o(!d.isNeg(),"Can not sign a negative message");var E=this.n.byteLength(),C=p.getPrivate().toArray("be",E),j=d.toArray("be",E);o(new t(j).eq(d),"Can not sign message");for(var B=new e({hash:this.hash,entropy:C,nonce:j,pers:y.pers,persEnc:y.persEnc||"utf8"}),D=this.n.sub(new t(1)),F=0;;F++){var q=y.k?y.k(F):new t(B.generate(this.n.byteLength()));if(q=this._truncateToN(q,!0),!(q.cmpn(1)<=0||q.cmp(D)>=0)){var V=this.g.mul(q);if(!V.isInfinity()){var ee=V.getX(),Q=ee.umod(this.n);if(Q.cmpn(0)!==0){var W=q.invm(this.n).mul(Q.mul(p.getPrivate()).iadd(d));if(W=W.umod(this.n),W.cmpn(0)!==0){var Z=(V.getY().isOdd()?1:0)|(ee.cmp(Q)!==0?2:0);return y.canonical&&W.cmp(this.nh)>0&&(W=this.n.sub(W),Z^=1),new c({r:Q,s:W,recoveryParam:Z})}}}}}},u.prototype.verify=function(d,p,m,y,b){b||(b={}),d=this._truncateToN(d,!1,b.msgBitLength),m=this.keyFromPublic(m,y),p=new c(p,"hex");var E=p.r,C=p.s;if(E.cmpn(1)<0||E.cmp(this.n)>=0||C.cmpn(1)<0||C.cmp(this.n)>=0)return!1;var j=C.invm(this.n),B=j.mul(d).umod(this.n),D=j.mul(E).umod(this.n),F;return this.curve._maxwellTrick?(F=this.g.jmulAdd(B,m.getPublic(),D),F.isInfinity()?!1:F.eqXToP(E)):(F=this.g.mulAdd(B,m.getPublic(),D),F.isInfinity()?!1:F.getX().umod(this.n).cmp(E)===0)},u.prototype.recoverPubKey=function(f,d,p,m){o((3&p)===p,"The recovery param is more than two bits"),d=new c(d,m);var y=this.n,b=new t(f),E=d.r,C=d.s,j=p&1,B=p>>1;if(E.cmp(this.curve.p.umod(this.curve.n))>=0&&B)throw new Error("Unable to find sencond key candinate");B?E=this.curve.pointFromX(E.add(this.curve.n),j):E=this.curve.pointFromX(E,j);var D=d.r.invm(y),F=y.sub(b).mul(D).umod(y),q=C.mul(D).umod(y);return this.g.mulAdd(F,E,q)},u.prototype.getKeyRecoveryParam=function(f,d,p,m){if(d=new c(d,m),d.recoveryParam!==null)return d.recoveryParam;for(var y=0;y<4;y++){var b;try{b=this.recoverPubKey(f,d,y)}catch{continue}if(b.eq(p))return y}throw new Error("Unable to find valid recovery factor")},ec$2}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var t=requireUtils$2(),e=t.assert,s=t.parseBytes,r=t.cachedProperty;function a(o,l){this.eddsa=o,this._secret=s(l.secret),o.isPoint(l.pub)?this._pub=l.pub:this._pubBytes=s(l.pub)}return a.fromPublic=function(l,c){return c instanceof a?c:new a(l,{pub:c})},a.fromSecret=function(l,c){return c instanceof a?c:new a(l,{secret:c})},a.prototype.secret=function(){return this._secret},r(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),r(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),r(a,"privBytes",function(){var l=this.eddsa,c=this.hash(),u=l.encodingLength-1,f=c.slice(0,l.encodingLength);return f[0]&=248,f[u]&=127,f[u]|=64,f}),r(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),r(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),r(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(l){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(l,this)},a.prototype.verify=function(l,c){return this.eddsa.verify(l,c,this)},a.prototype.getSecret=function(l){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),l)},a.prototype.getPublic=function(l){return t.encode(this.pubBytes(),l)},key=a,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var t=requireBn$2(),e=requireUtils$2(),s=e.assert,r=e.cachedProperty,a=e.parseBytes;function o(l,c){this.eddsa=l,typeof c!="object"&&(c=a(c)),Array.isArray(c)&&(s(c.length===l.encodingLength*2,"Signature has invalid size"),c={R:c.slice(0,l.encodingLength),S:c.slice(l.encodingLength)}),s(c.R&&c.S,"Signature without R or S"),l.isPoint(c.R)&&(this._R=c.R),c.S instanceof t&&(this._S=c.S),this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded,this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}return r(o,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),r(o,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),r(o,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),r(o,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),o.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},o.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},signature=o,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var t=requireHash(),e=requireCurves(),s=requireUtils$2(),r=s.assert,a=s.parseBytes,o=requireKey(),l=requireSignature();function c(u){if(r(u==="ed25519","only tested with ed25519 so far"),!(this instanceof c))return new c(u);u=e[u].curve,this.curve=u,this.g=u.g,this.g.precompute(u.n.bitLength()+1),this.pointClass=u.point().constructor,this.encodingLength=Math.ceil(u.n.bitLength()/8),this.hash=t.sha512}return eddsa=c,c.prototype.sign=function(f,d){f=a(f);var p=this.keyFromSecret(d),m=this.hashInt(p.messagePrefix(),f),y=this.g.mul(m),b=this.encodePoint(y),E=this.hashInt(b,p.pubBytes(),f).mul(p.priv()),C=m.add(E).umod(this.curve.n);return this.makeSignature({R:y,S:C,Rencoded:b})},c.prototype.verify=function(f,d,p){if(f=a(f),d=this.makeSignature(d),d.S().gte(d.eddsa.curve.n)||d.S().isNeg())return!1;var m=this.keyFromPublic(p),y=this.hashInt(d.Rencoded(),m.pubBytes(),f),b=this.g.mul(d.S()),E=d.R().add(m.pub().mul(y));return E.eq(b)},c.prototype.hashInt=function(){for(var f=this.hash(),d=0;d<arguments.length;d++)f.update(arguments[d]);return s.intFromLE(f.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(f){return o.fromPublic(this,f)},c.prototype.keyFromSecret=function(f){return o.fromSecret(this,f)},c.prototype.makeSignature=function(f){return f instanceof l?f:new l(this,f)},c.prototype.encodePoint=function(f){var d=f.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=f.getX().isOdd()?128:0,d},c.prototype.decodePoint=function(f){f=s.parseBytes(f);var d=f.length-1,p=f.slice(0,d).concat(f[d]&-129),m=(f[d]&128)!==0,y=s.intFromLE(p);return this.curve.pointFromY(y,m)},c.prototype.encodeInt=function(f){return f.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(f){return s.intFromLE(f)},c.prototype.isPoint=function(f){return f instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,(function(t){var e=t;e.version=require$$0$1.version,e.utils=requireUtils$2(),e.rand=requireBrorand(),e.curve=requireCurve(),e.curves=requireCurves(),e.ec=requireEc(),e.eddsa=requireEddsa()})(elliptic$1)),elliptic$1}var bn$1={exports:{}},bn=bn$1.exports,hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,(function(t){(function(e,s){function r(k,v){if(!k)throw new Error(v||"Assertion failed")}function a(k,v){k.super_=v;var S=function(){};S.prototype=v.prototype,k.prototype=new S,k.prototype.constructor=k}function o(k,v,S){if(o.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((v==="le"||v==="be")&&(S=v,v=10),this._init(k||0,v||10,S||"be"))}typeof e=="object"?e.exports=o:s.BN=o,o.BN=o,o.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=requireBuffer$1().Buffer}catch{}o.isBN=function(v){return v instanceof o?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===o.wordSize&&Array.isArray(v.words)},o.max=function(v,S){return v.cmp(S)>0?v:S},o.min=function(v,S){return v.cmp(S)<0?v:S},o.prototype._init=function(v,S,N){if(typeof v=="number")return this._initNumber(v,S,N);if(typeof v=="object")return this._initArray(v,S,N);S==="hex"&&(S=16),r(S===(S|0)&&S>=2&&S<=36),v=v.toString().replace(/\s+/g,"");var R=0;v[0]==="-"&&(R++,this.negative=1),R<v.length&&(S===16?this._parseHex(v,R,N):(this._parseBase(v,S,R),N==="le"&&this._initArray(this.toArray(),S,N)))},o.prototype._initNumber=function(v,S,N){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(r(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),S,N)},o.prototype._initArray=function(v,S,N){if(r(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T,M,I=0;if(N==="be")for(R=v.length-1,T=0;R>=0;R-=3)M=v[R]|v[R-1]<<8|v[R-2]<<16,this.words[T]|=M<<I&67108863,this.words[T+1]=M>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);else if(N==="le")for(R=0,T=0;R<v.length;R+=3)M=v[R]|v[R+1]<<8|v[R+2]<<16,this.words[T]|=M<<I&67108863,this.words[T+1]=M>>>26-I&67108863,I+=24,I>=26&&(I-=26,T++);return this._strip()};function c(k,v){var S=k.charCodeAt(v);if(S>=48&&S<=57)return S-48;if(S>=65&&S<=70)return S-55;if(S>=97&&S<=102)return S-87;r(!1,"Invalid character in "+k)}function u(k,v,S){var N=c(k,S);return S-1>=v&&(N|=c(k,S-1)<<4),N}o.prototype._parseHex=function(v,S,N){this.length=Math.ceil((v.length-S)/6),this.words=new Array(this.length);for(var R=0;R<this.length;R++)this.words[R]=0;var T=0,M=0,I;if(N==="be")for(R=v.length-1;R>=S;R-=2)I=u(v,S,R)<<T,this.words[M]|=I&67108863,T>=18?(T-=18,M+=1,this.words[M]|=I>>>26):T+=8;else{var $=v.length-S;for(R=$%2===0?S+1:S;R<v.length;R+=2)I=u(v,S,R)<<T,this.words[M]|=I&67108863,T>=18?(T-=18,M+=1,this.words[M]|=I>>>26):T+=8}this._strip()};function f(k,v,S,N){for(var R=0,T=0,M=Math.min(k.length,S),I=v;I<M;I++){var $=k.charCodeAt(I)-48;R*=N,$>=49?T=$-49+10:$>=17?T=$-17+10:T=$,r($>=0&&T<N,"Invalid character"),R+=T}return R}o.prototype._parseBase=function(v,S,N){this.words=[0],this.length=1;for(var R=0,T=1;T<=67108863;T*=S)R++;R--,T=T/S|0;for(var M=v.length-N,I=M%R,$=Math.min(M,M-I)+N,A=0,L=N;L<$;L+=R)A=f(v,L,L+R,S),this.imuln(T),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A);if(I!==0){var Y=1;for(A=f(v,L,v.length,S),L=0;L<I;L++)Y*=S;this.imuln(Y),this.words[0]+A<67108864?this.words[0]+=A:this._iaddn(A)}this._strip()},o.prototype.copy=function(v){v.words=new Array(this.length);for(var S=0;S<this.length;S++)v.words[S]=this.words[S];v.length=this.length,v.negative=this.negative,v.red=this.red};function d(k,v){k.words=v.words,k.length=v.length,k.negative=v.negative,k.red=v.red}if(o.prototype._move=function(v){d(v,this)},o.prototype.clone=function(){var v=new o(null);return this.copy(v),v},o.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{o.prototype.inspect=p}else o.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(v,S){v=v||10,S=S|0||1;var N;if(v===16||v==="hex"){N="";for(var R=0,T=0,M=0;M<this.length;M++){var I=this.words[M],$=((I<<R|T)&16777215).toString(16);T=I>>>24-R&16777215,R+=2,R>=26&&(R-=26,M--),T!==0||M!==this.length-1?N=m[6-$.length]+$+N:N=$+N}for(T!==0&&(N=T.toString(16)+N);N.length%S!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(v===(v|0)&&v>=2&&v<=36){var A=y[v],L=b[v];N="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var oe=Y.modrn(L).toString(v);Y=Y.idivn(L),Y.isZero()?N=oe+N:N=m[A-oe.length]+oe+N}for(this.isZero()&&(N="0"+N);N.length%S!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},o.prototype.toJSON=function(){return this.toString(16,2)},l&&(o.prototype.toBuffer=function(v,S){return this.toArrayLike(l,v,S)}),o.prototype.toArray=function(v,S){return this.toArrayLike(Array,v,S)};var E=function(v,S){return v.allocUnsafe?v.allocUnsafe(S):new v(S)};o.prototype.toArrayLike=function(v,S,N){this._strip();var R=this.byteLength(),T=N||Math.max(1,R);r(R<=T,"byte array longer than desired length"),r(T>0,"Requested array length <= 0");var M=E(v,T),I=S==="le"?"LE":"BE";return this["_toArrayLike"+I](M,R),M},o.prototype._toArrayLikeLE=function(v,S){for(var N=0,R=0,T=0,M=0;T<this.length;T++){var I=this.words[T]<<M|R;v[N++]=I&255,N<v.length&&(v[N++]=I>>8&255),N<v.length&&(v[N++]=I>>16&255),M===6?(N<v.length&&(v[N++]=I>>24&255),R=0,M=0):(R=I>>>24,M+=2)}if(N<v.length)for(v[N++]=R;N<v.length;)v[N++]=0},o.prototype._toArrayLikeBE=function(v,S){for(var N=v.length-1,R=0,T=0,M=0;T<this.length;T++){var I=this.words[T]<<M|R;v[N--]=I&255,N>=0&&(v[N--]=I>>8&255),N>=0&&(v[N--]=I>>16&255),M===6?(N>=0&&(v[N--]=I>>24&255),R=0,M=0):(R=I>>>24,M+=2)}if(N>=0)for(v[N--]=R;N>=0;)v[N--]=0},Math.clz32?o.prototype._countBits=function(v){return 32-Math.clz32(v)}:o.prototype._countBits=function(v){var S=v,N=0;return S>=4096&&(N+=13,S>>>=13),S>=64&&(N+=7,S>>>=7),S>=8&&(N+=4,S>>>=4),S>=2&&(N+=2,S>>>=2),N+S},o.prototype._zeroBits=function(v){if(v===0)return 26;var S=v,N=0;return(S&8191)===0&&(N+=13,S>>>=13),(S&127)===0&&(N+=7,S>>>=7),(S&15)===0&&(N+=4,S>>>=4),(S&3)===0&&(N+=2,S>>>=2),(S&1)===0&&N++,N},o.prototype.bitLength=function(){var v=this.words[this.length-1],S=this._countBits(v);return(this.length-1)*26+S};function C(k){for(var v=new Array(k.bitLength()),S=0;S<v.length;S++){var N=S/26|0,R=S%26;v[S]=k.words[N]>>>R&1}return v}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,S=0;S<this.length;S++){var N=this._zeroBits(this.words[S]);if(v+=N,N!==26)break}return v},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},o.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var S=0;S<v.length;S++)this.words[S]=this.words[S]|v.words[S];return this._strip()},o.prototype.ior=function(v){return r((this.negative|v.negative)===0),this.iuor(v)},o.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},o.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},o.prototype.iuand=function(v){var S;this.length>v.length?S=v:S=this;for(var N=0;N<S.length;N++)this.words[N]=this.words[N]&v.words[N];return this.length=S.length,this._strip()},o.prototype.iand=function(v){return r((this.negative|v.negative)===0),this.iuand(v)},o.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},o.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},o.prototype.iuxor=function(v){var S,N;this.length>v.length?(S=this,N=v):(S=v,N=this);for(var R=0;R<N.length;R++)this.words[R]=S.words[R]^N.words[R];if(this!==S)for(;R<S.length;R++)this.words[R]=S.words[R];return this.length=S.length,this._strip()},o.prototype.ixor=function(v){return r((this.negative|v.negative)===0),this.iuxor(v)},o.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},o.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},o.prototype.inotn=function(v){r(typeof v=="number"&&v>=0);var S=Math.ceil(v/26)|0,N=v%26;this._expand(S),N>0&&S--;for(var R=0;R<S;R++)this.words[R]=~this.words[R]&67108863;return N>0&&(this.words[R]=~this.words[R]&67108863>>26-N),this._strip()},o.prototype.notn=function(v){return this.clone().inotn(v)},o.prototype.setn=function(v,S){r(typeof v=="number"&&v>=0);var N=v/26|0,R=v%26;return this._expand(N+1),S?this.words[N]=this.words[N]|1<<R:this.words[N]=this.words[N]&~(1<<R),this._strip()},o.prototype.iadd=function(v){var S;if(this.negative!==0&&v.negative===0)return this.negative=0,S=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,S=this.isub(v),v.negative=1,S._normSign();var N,R;this.length>v.length?(N=this,R=v):(N=v,R=this);for(var T=0,M=0;M<R.length;M++)S=(N.words[M]|0)+(R.words[M]|0)+T,this.words[M]=S&67108863,T=S>>>26;for(;T!==0&&M<N.length;M++)S=(N.words[M]|0)+T,this.words[M]=S&67108863,T=S>>>26;if(this.length=N.length,T!==0)this.words[this.length]=T,this.length++;else if(N!==this)for(;M<N.length;M++)this.words[M]=N.words[M];return this},o.prototype.add=function(v){var S;return v.negative!==0&&this.negative===0?(v.negative=0,S=this.sub(v),v.negative^=1,S):v.negative===0&&this.negative!==0?(this.negative=0,S=v.sub(this),this.negative=1,S):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},o.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var S=this.iadd(v);return v.negative=1,S._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var N=this.cmp(v);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;var R,T;N>0?(R=this,T=v):(R=v,T=this);for(var M=0,I=0;I<T.length;I++)S=(R.words[I]|0)-(T.words[I]|0)+M,M=S>>26,this.words[I]=S&67108863;for(;M!==0&&I<R.length;I++)S=(R.words[I]|0)+M,M=S>>26,this.words[I]=S&67108863;if(M===0&&I<R.length&&R!==this)for(;I<R.length;I++)this.words[I]=R.words[I];return this.length=Math.max(this.length,I),R!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(v){return this.clone().isub(v)};function j(k,v,S){S.negative=v.negative^k.negative;var N=k.length+v.length|0;S.length=N,N=N-1|0;var R=k.words[0]|0,T=v.words[0]|0,M=R*T,I=M&67108863,$=M/67108864|0;S.words[0]=I;for(var A=1;A<N;A++){for(var L=$>>>26,Y=$&67108863,oe=Math.min(A,v.length-1),J=Math.max(0,A-k.length+1);J<=oe;J++){var U=A-J|0;R=k.words[U]|0,T=v.words[J]|0,M=R*T+Y,L+=M/67108864|0,Y=M&67108863}S.words[A]=Y|0,$=L|0}return $!==0?S.words[A]=$|0:S.length--,S._strip()}var B=function(v,S,N){var R=v.words,T=S.words,M=N.words,I=0,$,A,L,Y=R[0]|0,oe=Y&8191,J=Y>>>13,U=R[1]|0,G=U&8191,ae=U>>>13,he=R[2]|0,le=he&8191,te=he>>>13,pe=R[3]|0,xe=pe&8191,be=pe>>>13,ce=R[4]|0,re=ce&8191,ie=ce>>>13,fe=R[5]|0,ye=fe&8191,we=fe>>>13,Re=R[6]|0,Me=Re&8191,ke=Re>>>13,Le=R[7]|0,Fe=Le&8191,Te=Le>>>13,Be=R[8]|0,ze=Be&8191,de=Be>>>13,ne=R[9]|0,se=ne&8191,me=ne>>>13,Ee=T[0]|0,_e=Ee&8191,ve=Ee>>>13,Ae=T[1]|0,Oe=Ae&8191,Ue=Ae>>>13,Ke=T[2]|0,We=Ke&8191,Ve=Ke>>>13,xt=T[3]|0,lt=xt&8191,Xe=xt>>>13,St=T[4]|0,ct=St&8191,Pe=St>>>13,Qe=T[5]|0,Ze=Qe&8191,Ye=Qe>>>13,at=T[6]|0,it=at&8191,et=at>>>13,Ct=T[7]|0,ft=Ct&8191,tt=Ct>>>13,Et=T[8]|0,nt=Et&8191,Je=Et>>>13,Rt=T[9]|0,dt=Rt&8191,ht=Rt>>>13;N.negative=v.negative^S.negative,N.length=19,$=Math.imul(oe,_e),A=Math.imul(oe,ve),A=A+Math.imul(J,_e)|0,L=Math.imul(J,ve);var wr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(wr>>>26)|0,wr&=67108863,$=Math.imul(G,_e),A=Math.imul(G,ve),A=A+Math.imul(ae,_e)|0,L=Math.imul(ae,ve),$=$+Math.imul(oe,Oe)|0,A=A+Math.imul(oe,Ue)|0,A=A+Math.imul(J,Oe)|0,L=L+Math.imul(J,Ue)|0;var cr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(cr>>>26)|0,cr&=67108863,$=Math.imul(le,_e),A=Math.imul(le,ve),A=A+Math.imul(te,_e)|0,L=Math.imul(te,ve),$=$+Math.imul(G,Oe)|0,A=A+Math.imul(G,Ue)|0,A=A+Math.imul(ae,Oe)|0,L=L+Math.imul(ae,Ue)|0,$=$+Math.imul(oe,We)|0,A=A+Math.imul(oe,Ve)|0,A=A+Math.imul(J,We)|0,L=L+Math.imul(J,Ve)|0;var tr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(tr>>>26)|0,tr&=67108863,$=Math.imul(xe,_e),A=Math.imul(xe,ve),A=A+Math.imul(be,_e)|0,L=Math.imul(be,ve),$=$+Math.imul(le,Oe)|0,A=A+Math.imul(le,Ue)|0,A=A+Math.imul(te,Oe)|0,L=L+Math.imul(te,Ue)|0,$=$+Math.imul(G,We)|0,A=A+Math.imul(G,Ve)|0,A=A+Math.imul(ae,We)|0,L=L+Math.imul(ae,Ve)|0,$=$+Math.imul(oe,lt)|0,A=A+Math.imul(oe,Xe)|0,A=A+Math.imul(J,lt)|0,L=L+Math.imul(J,Xe)|0;var or=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(or>>>26)|0,or&=67108863,$=Math.imul(re,_e),A=Math.imul(re,ve),A=A+Math.imul(ie,_e)|0,L=Math.imul(ie,ve),$=$+Math.imul(xe,Oe)|0,A=A+Math.imul(xe,Ue)|0,A=A+Math.imul(be,Oe)|0,L=L+Math.imul(be,Ue)|0,$=$+Math.imul(le,We)|0,A=A+Math.imul(le,Ve)|0,A=A+Math.imul(te,We)|0,L=L+Math.imul(te,Ve)|0,$=$+Math.imul(G,lt)|0,A=A+Math.imul(G,Xe)|0,A=A+Math.imul(ae,lt)|0,L=L+Math.imul(ae,Xe)|0,$=$+Math.imul(oe,ct)|0,A=A+Math.imul(oe,Pe)|0,A=A+Math.imul(J,ct)|0,L=L+Math.imul(J,Pe)|0;var Jt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,$=Math.imul(ye,_e),A=Math.imul(ye,ve),A=A+Math.imul(we,_e)|0,L=Math.imul(we,ve),$=$+Math.imul(re,Oe)|0,A=A+Math.imul(re,Ue)|0,A=A+Math.imul(ie,Oe)|0,L=L+Math.imul(ie,Ue)|0,$=$+Math.imul(xe,We)|0,A=A+Math.imul(xe,Ve)|0,A=A+Math.imul(be,We)|0,L=L+Math.imul(be,Ve)|0,$=$+Math.imul(le,lt)|0,A=A+Math.imul(le,Xe)|0,A=A+Math.imul(te,lt)|0,L=L+Math.imul(te,Xe)|0,$=$+Math.imul(G,ct)|0,A=A+Math.imul(G,Pe)|0,A=A+Math.imul(ae,ct)|0,L=L+Math.imul(ae,Pe)|0,$=$+Math.imul(oe,Ze)|0,A=A+Math.imul(oe,Ye)|0,A=A+Math.imul(J,Ze)|0,L=L+Math.imul(J,Ye)|0;var Xt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,$=Math.imul(Me,_e),A=Math.imul(Me,ve),A=A+Math.imul(ke,_e)|0,L=Math.imul(ke,ve),$=$+Math.imul(ye,Oe)|0,A=A+Math.imul(ye,Ue)|0,A=A+Math.imul(we,Oe)|0,L=L+Math.imul(we,Ue)|0,$=$+Math.imul(re,We)|0,A=A+Math.imul(re,Ve)|0,A=A+Math.imul(ie,We)|0,L=L+Math.imul(ie,Ve)|0,$=$+Math.imul(xe,lt)|0,A=A+Math.imul(xe,Xe)|0,A=A+Math.imul(be,lt)|0,L=L+Math.imul(be,Xe)|0,$=$+Math.imul(le,ct)|0,A=A+Math.imul(le,Pe)|0,A=A+Math.imul(te,ct)|0,L=L+Math.imul(te,Pe)|0,$=$+Math.imul(G,Ze)|0,A=A+Math.imul(G,Ye)|0,A=A+Math.imul(ae,Ze)|0,L=L+Math.imul(ae,Ye)|0,$=$+Math.imul(oe,it)|0,A=A+Math.imul(oe,et)|0,A=A+Math.imul(J,it)|0,L=L+Math.imul(J,et)|0;var rr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(rr>>>26)|0,rr&=67108863,$=Math.imul(Fe,_e),A=Math.imul(Fe,ve),A=A+Math.imul(Te,_e)|0,L=Math.imul(Te,ve),$=$+Math.imul(Me,Oe)|0,A=A+Math.imul(Me,Ue)|0,A=A+Math.imul(ke,Oe)|0,L=L+Math.imul(ke,Ue)|0,$=$+Math.imul(ye,We)|0,A=A+Math.imul(ye,Ve)|0,A=A+Math.imul(we,We)|0,L=L+Math.imul(we,Ve)|0,$=$+Math.imul(re,lt)|0,A=A+Math.imul(re,Xe)|0,A=A+Math.imul(ie,lt)|0,L=L+Math.imul(ie,Xe)|0,$=$+Math.imul(xe,ct)|0,A=A+Math.imul(xe,Pe)|0,A=A+Math.imul(be,ct)|0,L=L+Math.imul(be,Pe)|0,$=$+Math.imul(le,Ze)|0,A=A+Math.imul(le,Ye)|0,A=A+Math.imul(te,Ze)|0,L=L+Math.imul(te,Ye)|0,$=$+Math.imul(G,it)|0,A=A+Math.imul(G,et)|0,A=A+Math.imul(ae,it)|0,L=L+Math.imul(ae,et)|0,$=$+Math.imul(oe,ft)|0,A=A+Math.imul(oe,tt)|0,A=A+Math.imul(J,ft)|0,L=L+Math.imul(J,tt)|0;var Qt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,$=Math.imul(ze,_e),A=Math.imul(ze,ve),A=A+Math.imul(de,_e)|0,L=Math.imul(de,ve),$=$+Math.imul(Fe,Oe)|0,A=A+Math.imul(Fe,Ue)|0,A=A+Math.imul(Te,Oe)|0,L=L+Math.imul(Te,Ue)|0,$=$+Math.imul(Me,We)|0,A=A+Math.imul(Me,Ve)|0,A=A+Math.imul(ke,We)|0,L=L+Math.imul(ke,Ve)|0,$=$+Math.imul(ye,lt)|0,A=A+Math.imul(ye,Xe)|0,A=A+Math.imul(we,lt)|0,L=L+Math.imul(we,Xe)|0,$=$+Math.imul(re,ct)|0,A=A+Math.imul(re,Pe)|0,A=A+Math.imul(ie,ct)|0,L=L+Math.imul(ie,Pe)|0,$=$+Math.imul(xe,Ze)|0,A=A+Math.imul(xe,Ye)|0,A=A+Math.imul(be,Ze)|0,L=L+Math.imul(be,Ye)|0,$=$+Math.imul(le,it)|0,A=A+Math.imul(le,et)|0,A=A+Math.imul(te,it)|0,L=L+Math.imul(te,et)|0,$=$+Math.imul(G,ft)|0,A=A+Math.imul(G,tt)|0,A=A+Math.imul(ae,ft)|0,L=L+Math.imul(ae,tt)|0,$=$+Math.imul(oe,nt)|0,A=A+Math.imul(oe,Je)|0,A=A+Math.imul(J,nt)|0,L=L+Math.imul(J,Je)|0;var Tt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,$=Math.imul(se,_e),A=Math.imul(se,ve),A=A+Math.imul(me,_e)|0,L=Math.imul(me,ve),$=$+Math.imul(ze,Oe)|0,A=A+Math.imul(ze,Ue)|0,A=A+Math.imul(de,Oe)|0,L=L+Math.imul(de,Ue)|0,$=$+Math.imul(Fe,We)|0,A=A+Math.imul(Fe,Ve)|0,A=A+Math.imul(Te,We)|0,L=L+Math.imul(Te,Ve)|0,$=$+Math.imul(Me,lt)|0,A=A+Math.imul(Me,Xe)|0,A=A+Math.imul(ke,lt)|0,L=L+Math.imul(ke,Xe)|0,$=$+Math.imul(ye,ct)|0,A=A+Math.imul(ye,Pe)|0,A=A+Math.imul(we,ct)|0,L=L+Math.imul(we,Pe)|0,$=$+Math.imul(re,Ze)|0,A=A+Math.imul(re,Ye)|0,A=A+Math.imul(ie,Ze)|0,L=L+Math.imul(ie,Ye)|0,$=$+Math.imul(xe,it)|0,A=A+Math.imul(xe,et)|0,A=A+Math.imul(be,it)|0,L=L+Math.imul(be,et)|0,$=$+Math.imul(le,ft)|0,A=A+Math.imul(le,tt)|0,A=A+Math.imul(te,ft)|0,L=L+Math.imul(te,tt)|0,$=$+Math.imul(G,nt)|0,A=A+Math.imul(G,Je)|0,A=A+Math.imul(ae,nt)|0,L=L+Math.imul(ae,Je)|0,$=$+Math.imul(oe,dt)|0,A=A+Math.imul(oe,ht)|0,A=A+Math.imul(J,dt)|0,L=L+Math.imul(J,ht)|0;var ur=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(ur>>>26)|0,ur&=67108863,$=Math.imul(se,Oe),A=Math.imul(se,Ue),A=A+Math.imul(me,Oe)|0,L=Math.imul(me,Ue),$=$+Math.imul(ze,We)|0,A=A+Math.imul(ze,Ve)|0,A=A+Math.imul(de,We)|0,L=L+Math.imul(de,Ve)|0,$=$+Math.imul(Fe,lt)|0,A=A+Math.imul(Fe,Xe)|0,A=A+Math.imul(Te,lt)|0,L=L+Math.imul(Te,Xe)|0,$=$+Math.imul(Me,ct)|0,A=A+Math.imul(Me,Pe)|0,A=A+Math.imul(ke,ct)|0,L=L+Math.imul(ke,Pe)|0,$=$+Math.imul(ye,Ze)|0,A=A+Math.imul(ye,Ye)|0,A=A+Math.imul(we,Ze)|0,L=L+Math.imul(we,Ye)|0,$=$+Math.imul(re,it)|0,A=A+Math.imul(re,et)|0,A=A+Math.imul(ie,it)|0,L=L+Math.imul(ie,et)|0,$=$+Math.imul(xe,ft)|0,A=A+Math.imul(xe,tt)|0,A=A+Math.imul(be,ft)|0,L=L+Math.imul(be,tt)|0,$=$+Math.imul(le,nt)|0,A=A+Math.imul(le,Je)|0,A=A+Math.imul(te,nt)|0,L=L+Math.imul(te,Je)|0,$=$+Math.imul(G,dt)|0,A=A+Math.imul(G,ht)|0,A=A+Math.imul(ae,dt)|0,L=L+Math.imul(ae,ht)|0;var dr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(dr>>>26)|0,dr&=67108863,$=Math.imul(se,We),A=Math.imul(se,Ve),A=A+Math.imul(me,We)|0,L=Math.imul(me,Ve),$=$+Math.imul(ze,lt)|0,A=A+Math.imul(ze,Xe)|0,A=A+Math.imul(de,lt)|0,L=L+Math.imul(de,Xe)|0,$=$+Math.imul(Fe,ct)|0,A=A+Math.imul(Fe,Pe)|0,A=A+Math.imul(Te,ct)|0,L=L+Math.imul(Te,Pe)|0,$=$+Math.imul(Me,Ze)|0,A=A+Math.imul(Me,Ye)|0,A=A+Math.imul(ke,Ze)|0,L=L+Math.imul(ke,Ye)|0,$=$+Math.imul(ye,it)|0,A=A+Math.imul(ye,et)|0,A=A+Math.imul(we,it)|0,L=L+Math.imul(we,et)|0,$=$+Math.imul(re,ft)|0,A=A+Math.imul(re,tt)|0,A=A+Math.imul(ie,ft)|0,L=L+Math.imul(ie,tt)|0,$=$+Math.imul(xe,nt)|0,A=A+Math.imul(xe,Je)|0,A=A+Math.imul(be,nt)|0,L=L+Math.imul(be,Je)|0,$=$+Math.imul(le,dt)|0,A=A+Math.imul(le,ht)|0,A=A+Math.imul(te,dt)|0,L=L+Math.imul(te,ht)|0;var Wt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,$=Math.imul(se,lt),A=Math.imul(se,Xe),A=A+Math.imul(me,lt)|0,L=Math.imul(me,Xe),$=$+Math.imul(ze,ct)|0,A=A+Math.imul(ze,Pe)|0,A=A+Math.imul(de,ct)|0,L=L+Math.imul(de,Pe)|0,$=$+Math.imul(Fe,Ze)|0,A=A+Math.imul(Fe,Ye)|0,A=A+Math.imul(Te,Ze)|0,L=L+Math.imul(Te,Ye)|0,$=$+Math.imul(Me,it)|0,A=A+Math.imul(Me,et)|0,A=A+Math.imul(ke,it)|0,L=L+Math.imul(ke,et)|0,$=$+Math.imul(ye,ft)|0,A=A+Math.imul(ye,tt)|0,A=A+Math.imul(we,ft)|0,L=L+Math.imul(we,tt)|0,$=$+Math.imul(re,nt)|0,A=A+Math.imul(re,Je)|0,A=A+Math.imul(ie,nt)|0,L=L+Math.imul(ie,Je)|0,$=$+Math.imul(xe,dt)|0,A=A+Math.imul(xe,ht)|0,A=A+Math.imul(be,dt)|0,L=L+Math.imul(be,ht)|0;var Zt=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,$=Math.imul(se,ct),A=Math.imul(se,Pe),A=A+Math.imul(me,ct)|0,L=Math.imul(me,Pe),$=$+Math.imul(ze,Ze)|0,A=A+Math.imul(ze,Ye)|0,A=A+Math.imul(de,Ze)|0,L=L+Math.imul(de,Ye)|0,$=$+Math.imul(Fe,it)|0,A=A+Math.imul(Fe,et)|0,A=A+Math.imul(Te,it)|0,L=L+Math.imul(Te,et)|0,$=$+Math.imul(Me,ft)|0,A=A+Math.imul(Me,tt)|0,A=A+Math.imul(ke,ft)|0,L=L+Math.imul(ke,tt)|0,$=$+Math.imul(ye,nt)|0,A=A+Math.imul(ye,Je)|0,A=A+Math.imul(we,nt)|0,L=L+Math.imul(we,Je)|0,$=$+Math.imul(re,dt)|0,A=A+Math.imul(re,ht)|0,A=A+Math.imul(ie,dt)|0,L=L+Math.imul(ie,ht)|0;var Er=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(Er>>>26)|0,Er&=67108863,$=Math.imul(se,Ze),A=Math.imul(se,Ye),A=A+Math.imul(me,Ze)|0,L=Math.imul(me,Ye),$=$+Math.imul(ze,it)|0,A=A+Math.imul(ze,et)|0,A=A+Math.imul(de,it)|0,L=L+Math.imul(de,et)|0,$=$+Math.imul(Fe,ft)|0,A=A+Math.imul(Fe,tt)|0,A=A+Math.imul(Te,ft)|0,L=L+Math.imul(Te,tt)|0,$=$+Math.imul(Me,nt)|0,A=A+Math.imul(Me,Je)|0,A=A+Math.imul(ke,nt)|0,L=L+Math.imul(ke,Je)|0,$=$+Math.imul(ye,dt)|0,A=A+Math.imul(ye,ht)|0,A=A+Math.imul(we,dt)|0,L=L+Math.imul(we,ht)|0;var fr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(fr>>>26)|0,fr&=67108863,$=Math.imul(se,it),A=Math.imul(se,et),A=A+Math.imul(me,it)|0,L=Math.imul(me,et),$=$+Math.imul(ze,ft)|0,A=A+Math.imul(ze,tt)|0,A=A+Math.imul(de,ft)|0,L=L+Math.imul(de,tt)|0,$=$+Math.imul(Fe,nt)|0,A=A+Math.imul(Fe,Je)|0,A=A+Math.imul(Te,nt)|0,L=L+Math.imul(Te,Je)|0,$=$+Math.imul(Me,dt)|0,A=A+Math.imul(Me,ht)|0,A=A+Math.imul(ke,dt)|0,L=L+Math.imul(ke,ht)|0;var hr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(hr>>>26)|0,hr&=67108863,$=Math.imul(se,ft),A=Math.imul(se,tt),A=A+Math.imul(me,ft)|0,L=Math.imul(me,tt),$=$+Math.imul(ze,nt)|0,A=A+Math.imul(ze,Je)|0,A=A+Math.imul(de,nt)|0,L=L+Math.imul(de,Je)|0,$=$+Math.imul(Fe,dt)|0,A=A+Math.imul(Fe,ht)|0,A=A+Math.imul(Te,dt)|0,L=L+Math.imul(Te,ht)|0;var _r=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(_r>>>26)|0,_r&=67108863,$=Math.imul(se,nt),A=Math.imul(se,Je),A=A+Math.imul(me,nt)|0,L=Math.imul(me,Je),$=$+Math.imul(ze,dt)|0,A=A+Math.imul(ze,ht)|0,A=A+Math.imul(de,dt)|0,L=L+Math.imul(de,ht)|0;var jr=(I+$|0)+((A&8191)<<13)|0;I=(L+(A>>>13)|0)+(jr>>>26)|0,jr&=67108863,$=Math.imul(se,dt),A=Math.imul(se,ht),A=A+Math.imul(me,dt)|0,L=Math.imul(me,ht);var Nr=(I+$|0)+((A&8191)<<13)|0;return I=(L+(A>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,M[0]=wr,M[1]=cr,M[2]=tr,M[3]=or,M[4]=Jt,M[5]=Xt,M[6]=rr,M[7]=Qt,M[8]=Tt,M[9]=ur,M[10]=dr,M[11]=Wt,M[12]=Zt,M[13]=Er,M[14]=fr,M[15]=hr,M[16]=_r,M[17]=jr,M[18]=Nr,I!==0&&(M[19]=I,N.length++),N};Math.imul||(B=j);function D(k,v,S){S.negative=v.negative^k.negative,S.length=k.length+v.length;for(var N=0,R=0,T=0;T<S.length-1;T++){var M=R;R=0;for(var I=N&67108863,$=Math.min(T,v.length-1),A=Math.max(0,T-k.length+1);A<=$;A++){var L=T-A,Y=k.words[L]|0,oe=v.words[A]|0,J=Y*oe,U=J&67108863;M=M+(J/67108864|0)|0,U=U+I|0,I=U&67108863,M=M+(U>>>26)|0,R+=M>>>26,M&=67108863}S.words[T]=I,N=M,M=R}return N!==0?S.words[T]=N:S.length--,S._strip()}function F(k,v,S){return D(k,v,S)}o.prototype.mulTo=function(v,S){var N,R=this.length+v.length;return this.length===10&&v.length===10?N=B(this,v,S):R<63?N=j(this,v,S):R<1024?N=D(this,v,S):N=F(this,v,S),N},o.prototype.mul=function(v){var S=new o(null);return S.words=new Array(this.length+v.length),this.mulTo(v,S)},o.prototype.mulf=function(v){var S=new o(null);return S.words=new Array(this.length+v.length),F(this,v,S)},o.prototype.imul=function(v){return this.clone().mulTo(v,this)},o.prototype.imuln=function(v){var S=v<0;S&&(v=-v),r(typeof v=="number"),r(v<67108864);for(var N=0,R=0;R<this.length;R++){var T=(this.words[R]|0)*v,M=(T&67108863)+(N&67108863);N>>=26,N+=T/67108864|0,N+=M>>>26,this.words[R]=M&67108863}return N!==0&&(this.words[R]=N,this.length++),this.length=v===0?1:this.length,S?this.ineg():this},o.prototype.muln=function(v){return this.clone().imuln(v)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(v){var S=C(v);if(S.length===0)return new o(1);for(var N=this,R=0;R<S.length&&S[R]===0;R++,N=N.sqr());if(++R<S.length)for(var T=N.sqr();R<S.length;R++,T=T.sqr())S[R]!==0&&(N=N.mul(T));return N},o.prototype.iushln=function(v){r(typeof v=="number"&&v>=0);var S=v%26,N=(v-S)/26,R=67108863>>>26-S<<26-S,T;if(S!==0){var M=0;for(T=0;T<this.length;T++){var I=this.words[T]&R,$=(this.words[T]|0)-I<<S;this.words[T]=$|M,M=I>>>26-S}M&&(this.words[T]=M,this.length++)}if(N!==0){for(T=this.length-1;T>=0;T--)this.words[T+N]=this.words[T];for(T=0;T<N;T++)this.words[T]=0;this.length+=N}return this._strip()},o.prototype.ishln=function(v){return r(this.negative===0),this.iushln(v)},o.prototype.iushrn=function(v,S,N){r(typeof v=="number"&&v>=0);var R;S?R=(S-S%26)/26:R=0;var T=v%26,M=Math.min((v-T)/26,this.length),I=67108863^67108863>>>T<<T,$=N;if(R-=M,R=Math.max(0,R),$){for(var A=0;A<M;A++)$.words[A]=this.words[A];$.length=M}if(M!==0)if(this.length>M)for(this.length-=M,A=0;A<this.length;A++)this.words[A]=this.words[A+M];else this.words[0]=0,this.length=1;var L=0;for(A=this.length-1;A>=0&&(L!==0||A>=R);A--){var Y=this.words[A]|0;this.words[A]=L<<26-T|Y>>>T,L=Y&I}return $&&L!==0&&($.words[$.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(v,S,N){return r(this.negative===0),this.iushrn(v,S,N)},o.prototype.shln=function(v){return this.clone().ishln(v)},o.prototype.ushln=function(v){return this.clone().iushln(v)},o.prototype.shrn=function(v){return this.clone().ishrn(v)},o.prototype.ushrn=function(v){return this.clone().iushrn(v)},o.prototype.testn=function(v){r(typeof v=="number"&&v>=0);var S=v%26,N=(v-S)/26,R=1<<S;if(this.length<=N)return!1;var T=this.words[N];return!!(T&R)},o.prototype.imaskn=function(v){r(typeof v=="number"&&v>=0);var S=v%26,N=(v-S)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(S!==0&&N++,this.length=Math.min(N,this.length),S!==0){var R=67108863^67108863>>>S<<S;this.words[this.length-1]&=R}return this._strip()},o.prototype.maskn=function(v){return this.clone().imaskn(v)},o.prototype.iaddn=function(v){return r(typeof v=="number"),r(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},o.prototype._iaddn=function(v){this.words[0]+=v;for(var S=0;S<this.length&&this.words[S]>=67108864;S++)this.words[S]-=67108864,S===this.length-1?this.words[S+1]=1:this.words[S+1]++;return this.length=Math.max(this.length,S+1),this},o.prototype.isubn=function(v){if(r(typeof v=="number"),r(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var S=0;S<this.length&&this.words[S]<0;S++)this.words[S]+=67108864,this.words[S+1]-=1;return this._strip()},o.prototype.addn=function(v){return this.clone().iaddn(v)},o.prototype.subn=function(v){return this.clone().isubn(v)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(v,S,N){var R=v.length+N,T;this._expand(R);var M,I=0;for(T=0;T<v.length;T++){M=(this.words[T+N]|0)+I;var $=(v.words[T]|0)*S;M-=$&67108863,I=(M>>26)-($/67108864|0),this.words[T+N]=M&67108863}for(;T<this.length-N;T++)M=(this.words[T+N]|0)+I,I=M>>26,this.words[T+N]=M&67108863;if(I===0)return this._strip();for(r(I===-1),I=0,T=0;T<this.length;T++)M=-(this.words[T]|0)+I,I=M>>26,this.words[T]=M&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(v,S){var N=this.length-v.length,R=this.clone(),T=v,M=T.words[T.length-1]|0,I=this._countBits(M);N=26-I,N!==0&&(T=T.ushln(N),R.iushln(N),M=T.words[T.length-1]|0);var $=R.length-T.length,A;if(S!=="mod"){A=new o(null),A.length=$+1,A.words=new Array(A.length);for(var L=0;L<A.length;L++)A.words[L]=0}var Y=R.clone()._ishlnsubmul(T,1,$);Y.negative===0&&(R=Y,A&&(A.words[$]=1));for(var oe=$-1;oe>=0;oe--){var J=(R.words[T.length+oe]|0)*67108864+(R.words[T.length+oe-1]|0);for(J=Math.min(J/M|0,67108863),R._ishlnsubmul(T,J,oe);R.negative!==0;)J--,R.negative=0,R._ishlnsubmul(T,1,oe),R.isZero()||(R.negative^=1);A&&(A.words[oe]=J)}return A&&A._strip(),R._strip(),S!=="div"&&N!==0&&R.iushrn(N),{div:A||null,mod:R}},o.prototype.divmod=function(v,S,N){if(r(!v.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var R,T,M;return this.negative!==0&&v.negative===0?(M=this.neg().divmod(v,S),S!=="mod"&&(R=M.div.neg()),S!=="div"&&(T=M.mod.neg(),N&&T.negative!==0&&T.iadd(v)),{div:R,mod:T}):this.negative===0&&v.negative!==0?(M=this.divmod(v.neg(),S),S!=="mod"&&(R=M.div.neg()),{div:R,mod:M.mod}):(this.negative&v.negative)!==0?(M=this.neg().divmod(v.neg(),S),S!=="div"&&(T=M.mod.neg(),N&&T.negative!==0&&T.isub(v)),{div:M.div,mod:T}):v.length>this.length||this.cmp(v)<0?{div:new o(0),mod:this}:v.length===1?S==="div"?{div:this.divn(v.words[0]),mod:null}:S==="mod"?{div:null,mod:new o(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new o(this.modrn(v.words[0]))}:this._wordDiv(v,S)},o.prototype.div=function(v){return this.divmod(v,"div",!1).div},o.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},o.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},o.prototype.divRound=function(v){var S=this.divmod(v);if(S.mod.isZero())return S.div;var N=S.div.negative!==0?S.mod.isub(v):S.mod,R=v.ushrn(1),T=v.andln(1),M=N.cmp(R);return M<0||T===1&&M===0?S.div:S.div.negative!==0?S.div.isubn(1):S.div.iaddn(1)},o.prototype.modrn=function(v){var S=v<0;S&&(v=-v),r(v<=67108863);for(var N=(1<<26)%v,R=0,T=this.length-1;T>=0;T--)R=(N*R+(this.words[T]|0))%v;return S?-R:R},o.prototype.modn=function(v){return this.modrn(v)},o.prototype.idivn=function(v){var S=v<0;S&&(v=-v),r(v<=67108863);for(var N=0,R=this.length-1;R>=0;R--){var T=(this.words[R]|0)+N*67108864;this.words[R]=T/v|0,N=T%v}return this._strip(),S?this.ineg():this},o.prototype.divn=function(v){return this.clone().idivn(v)},o.prototype.egcd=function(v){r(v.negative===0),r(!v.isZero());var S=this,N=v.clone();S.negative!==0?S=S.umod(v):S=S.clone();for(var R=new o(1),T=new o(0),M=new o(0),I=new o(1),$=0;S.isEven()&&N.isEven();)S.iushrn(1),N.iushrn(1),++$;for(var A=N.clone(),L=S.clone();!S.isZero();){for(var Y=0,oe=1;(S.words[0]&oe)===0&&Y<26;++Y,oe<<=1);if(Y>0)for(S.iushrn(Y);Y-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(A),T.isub(L)),R.iushrn(1),T.iushrn(1);for(var J=0,U=1;(N.words[0]&U)===0&&J<26;++J,U<<=1);if(J>0)for(N.iushrn(J);J-- >0;)(M.isOdd()||I.isOdd())&&(M.iadd(A),I.isub(L)),M.iushrn(1),I.iushrn(1);S.cmp(N)>=0?(S.isub(N),R.isub(M),T.isub(I)):(N.isub(S),M.isub(R),I.isub(T))}return{a:M,b:I,gcd:N.iushln($)}},o.prototype._invmp=function(v){r(v.negative===0),r(!v.isZero());var S=this,N=v.clone();S.negative!==0?S=S.umod(v):S=S.clone();for(var R=new o(1),T=new o(0),M=N.clone();S.cmpn(1)>0&&N.cmpn(1)>0;){for(var I=0,$=1;(S.words[0]&$)===0&&I<26;++I,$<<=1);if(I>0)for(S.iushrn(I);I-- >0;)R.isOdd()&&R.iadd(M),R.iushrn(1);for(var A=0,L=1;(N.words[0]&L)===0&&A<26;++A,L<<=1);if(A>0)for(N.iushrn(A);A-- >0;)T.isOdd()&&T.iadd(M),T.iushrn(1);S.cmp(N)>=0?(S.isub(N),R.isub(T)):(N.isub(S),T.isub(R))}var Y;return S.cmpn(1)===0?Y=R:Y=T,Y.cmpn(0)<0&&Y.iadd(v),Y},o.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var S=this.clone(),N=v.clone();S.negative=0,N.negative=0;for(var R=0;S.isEven()&&N.isEven();R++)S.iushrn(1),N.iushrn(1);do{for(;S.isEven();)S.iushrn(1);for(;N.isEven();)N.iushrn(1);var T=S.cmp(N);if(T<0){var M=S;S=N,N=M}else if(T===0||N.cmpn(1)===0)break;S.isub(N)}while(!0);return N.iushln(R)},o.prototype.invm=function(v){return this.egcd(v).a.umod(v)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(v){return this.words[0]&v},o.prototype.bincn=function(v){r(typeof v=="number");var S=v%26,N=(v-S)/26,R=1<<S;if(this.length<=N)return this._expand(N+1),this.words[N]|=R,this;for(var T=R,M=N;T!==0&&M<this.length;M++){var I=this.words[M]|0;I+=T,T=I>>>26,I&=67108863,this.words[M]=I}return T!==0&&(this.words[M]=T,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(v){var S=v<0;if(this.negative!==0&&!S)return-1;if(this.negative===0&&S)return 1;this._strip();var N;if(this.length>1)N=1;else{S&&(v=-v),r(v<=67108863,"Number is too big");var R=this.words[0]|0;N=R===v?0:R<v?-1:1}return this.negative!==0?-N|0:N},o.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var S=this.ucmp(v);return this.negative!==0?-S|0:S},o.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var S=0,N=this.length-1;N>=0;N--){var R=this.words[N]|0,T=v.words[N]|0;if(R!==T){R<T?S=-1:R>T&&(S=1);break}}return S},o.prototype.gtn=function(v){return this.cmpn(v)===1},o.prototype.gt=function(v){return this.cmp(v)===1},o.prototype.gten=function(v){return this.cmpn(v)>=0},o.prototype.gte=function(v){return this.cmp(v)>=0},o.prototype.ltn=function(v){return this.cmpn(v)===-1},o.prototype.lt=function(v){return this.cmp(v)===-1},o.prototype.lten=function(v){return this.cmpn(v)<=0},o.prototype.lte=function(v){return this.cmp(v)<=0},o.prototype.eqn=function(v){return this.cmpn(v)===0},o.prototype.eq=function(v){return this.cmp(v)===0},o.red=function(v){return new z(v)},o.prototype.toRed=function(v){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(v){return this.red=v,this},o.prototype.forceRed=function(v){return r(!this.red,"Already a number in reduction context"),this._forceRed(v)},o.prototype.redAdd=function(v){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},o.prototype.redIAdd=function(v){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},o.prototype.redSub=function(v){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},o.prototype.redISub=function(v){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},o.prototype.redShl=function(v){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},o.prototype.redMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},o.prototype.redIMul=function(v){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(v){return r(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var q={k256:null,p224:null,p192:null,p25519:null};function V(k,v){this.name=k,this.p=new o(v,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}V.prototype._tmp=function(){var v=new o(null);return v.words=new Array(Math.ceil(this.n/13)),v},V.prototype.ireduce=function(v){var S=v,N;do this.split(S,this.tmp),S=this.imulK(S),S=S.iadd(this.tmp),N=S.bitLength();while(N>this.n);var R=N<this.n?-1:S.ucmp(this.p);return R===0?(S.words[0]=0,S.length=1):R>0?S.isub(this.p):S.strip!==void 0?S.strip():S._strip(),S},V.prototype.split=function(v,S){v.iushrn(this.n,0,S)},V.prototype.imulK=function(v){return v.imul(this.k)};function ee(){V.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(ee,V),ee.prototype.split=function(v,S){for(var N=4194303,R=Math.min(v.length,9),T=0;T<R;T++)S.words[T]=v.words[T];if(S.length=R,v.length<=9){v.words[0]=0,v.length=1;return}var M=v.words[9];for(S.words[S.length++]=M&N,T=10;T<v.length;T++){var I=v.words[T]|0;v.words[T-10]=(I&N)<<4|M>>>22,M=I}M>>>=22,v.words[T-10]=M,M===0&&v.length>10?v.length-=10:v.length-=9},ee.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var S=0,N=0;N<v.length;N++){var R=v.words[N]|0;S+=R*977,v.words[N]=S&67108863,S=R*64+(S/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function Q(){V.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(Q,V);function W(){V.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(W,V);function Z(){V.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(Z,V),Z.prototype.imulK=function(v){for(var S=0,N=0;N<v.length;N++){var R=(v.words[N]|0)*19+S,T=R&67108863;R>>>=26,v.words[N]=T,S=R}return S!==0&&(v.words[v.length++]=S),v},o._prime=function(v){if(q[v])return q[v];var S;if(v==="k256")S=new ee;else if(v==="p224")S=new Q;else if(v==="p192")S=new W;else if(v==="p25519")S=new Z;else throw new Error("Unknown prime "+v);return q[v]=S,S};function z(k){if(typeof k=="string"){var v=o._prime(k);this.m=v.p,this.prime=v}else r(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}z.prototype._verify1=function(v){r(v.negative===0,"red works only with positives"),r(v.red,"red works only with red numbers")},z.prototype._verify2=function(v,S){r((v.negative|S.negative)===0,"red works only with positives"),r(v.red&&v.red===S.red,"red works only with red numbers")},z.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(d(v,v.umod(this.m)._forceRed(this)),v)},z.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},z.prototype.add=function(v,S){this._verify2(v,S);var N=v.add(S);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},z.prototype.iadd=function(v,S){this._verify2(v,S);var N=v.iadd(S);return N.cmp(this.m)>=0&&N.isub(this.m),N},z.prototype.sub=function(v,S){this._verify2(v,S);var N=v.sub(S);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},z.prototype.isub=function(v,S){this._verify2(v,S);var N=v.isub(S);return N.cmpn(0)<0&&N.iadd(this.m),N},z.prototype.shl=function(v,S){return this._verify1(v),this.imod(v.ushln(S))},z.prototype.imul=function(v,S){return this._verify2(v,S),this.imod(v.imul(S))},z.prototype.mul=function(v,S){return this._verify2(v,S),this.imod(v.mul(S))},z.prototype.isqr=function(v){return this.imul(v,v.clone())},z.prototype.sqr=function(v){return this.mul(v,v)},z.prototype.sqrt=function(v){if(v.isZero())return v.clone();var S=this.m.andln(3);if(r(S%2===1),S===3){var N=this.m.add(new o(1)).iushrn(2);return this.pow(v,N)}for(var R=this.m.subn(1),T=0;!R.isZero()&&R.andln(1)===0;)T++,R.iushrn(1);r(!R.isZero());var M=new o(1).toRed(this),I=M.redNeg(),$=this.m.subn(1).iushrn(1),A=this.m.bitLength();for(A=new o(2*A*A).toRed(this);this.pow(A,$).cmp(I)!==0;)A.redIAdd(I);for(var L=this.pow(A,R),Y=this.pow(v,R.addn(1).iushrn(1)),oe=this.pow(v,R),J=T;oe.cmp(M)!==0;){for(var U=oe,G=0;U.cmp(M)!==0;G++)U=U.redSqr();r(G<J);var ae=this.pow(L,new o(1).iushln(J-G-1));Y=Y.redMul(ae),L=ae.redSqr(),oe=oe.redMul(L),J=G}return Y},z.prototype.invm=function(v){var S=v._invmp(this.m);return S.negative!==0?(S.negative=0,this.imod(S).redNeg()):this.imod(S)},z.prototype.pow=function(v,S){if(S.isZero())return new o(1).toRed(this);if(S.cmpn(1)===0)return v.clone();var N=4,R=new Array(1<<N);R[0]=new o(1).toRed(this),R[1]=v;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],v);var M=R[0],I=0,$=0,A=S.bitLength()%26;for(A===0&&(A=26),T=S.length-1;T>=0;T--){for(var L=S.words[T],Y=A-1;Y>=0;Y--){var oe=L>>Y&1;if(M!==R[0]&&(M=this.sqr(M)),oe===0&&I===0){$=0;continue}I<<=1,I|=oe,$++,!($!==N&&(T!==0||Y!==0))&&(M=this.mul(M,R[I]),$=0,I=0)}A=26}return M},z.prototype.convertTo=function(v){var S=v.umod(this.m);return S===v?S.clone():S},z.prototype.convertFrom=function(v){var S=v.clone();return S.red=null,S},o.mont=function(v){return new O(v)};function O(k){z.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(O,z),O.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},O.prototype.convertFrom=function(v){var S=this.imod(v.mul(this.rinv));return S.red=null,S},O.prototype.imul=function(v,S){if(v.isZero()||S.isZero())return v.words[0]=0,v.length=1,v;var N=v.imul(S),R=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=N.isub(R).iushrn(this.shift),M=T;return T.cmp(this.m)>=0?M=T.isub(this.m):T.cmpn(0)<0&&(M=T.iadd(this.m)),M._forceRed(this)},O.prototype.mul=function(v,S){if(v.isZero()||S.isZero())return new o(0)._forceRed(this);var N=v.mul(S),R=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=N.isub(R).iushrn(this.shift),M=T;return T.cmp(this.m)>=0?M=T.isub(this.m):T.cmpn(0)<0&&(M=T.iadd(this.m)),M._forceRed(this)},O.prototype.invm=function(v){var S=this.imod(v._invmp(this.m).mul(this.r2));return S._forceRed(this)}})(t,bn)})(bn$1)),bn$1.exports}var asn1$1={},asn1={},api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,(function(exports$1){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var s=0;s<t.length;s++)if(t[s]===e)return s;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var s in t)e.push(s);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var s=0;s<t.length;s++)e(t[s],s,t)},defineProp=(function(){try{return Object.defineProperty({},"_",{}),function(t,e,s){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:s})}}catch{return function(e,s,r){e[s]=r}}})(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports$1.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var s=e.contentWindow,r=s.eval,a=s.execScript;!r&&a&&(a.call(s,"null"),r=s.eval),forEach(Object_keys(t),function(c){s[c]=t[c]}),forEach(globals,function(c){t[c]&&(s[c]=t[c])});var o=Object_keys(s),l=r.call(s,this.code);return forEach(Object_keys(s),function(c){(c in t||indexOf(o,c)===-1)&&(t[c]=s[c])}),forEach(globals,function(c){c in t||defineProp(t,c,s[c])}),document.body.removeChild(e),l},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),s=this.runInContext(e);return t&&forEach(Object_keys(e),function(r){t[r]=e[r]}),s},forEach(Object_keys(Script.prototype),function(t){exports$1[t]=Script[t]=function(e){var s=Script(e);return s[t].apply(s,[].slice.call(arguments,1))}}),exports$1.isContext=function(t){return t instanceof Context},exports$1.createScript=function(t){return exports$1.Script(t)},exports$1.createContext=Script.createContext=function(t){var e=new Context;return typeof t=="object"&&forEach(Object_keys(t),function(s){e[s]=t[s]}),e}})(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,(function(t){var e=requireAsn1$1(),s=requireInherits_browser(),r=t;r.define=function(l,c){return new a(l,c)};function a(o,l){this.name=o,this.body=l,this.decoders={},this.encoders={}}a.prototype._createNamed=function(l){var c;try{c=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{c=function(f){this._initNamed(f)}}return s(c,l),c.prototype._initNamed=function(f){l.call(this,f)},new c(this)},a.prototype._getDecoder=function(l){return l=l||"der",this.decoders.hasOwnProperty(l)||(this.decoders[l]=this._createNamed(e.decoders[l])),this.decoders[l]},a.prototype.decode=function(l,c,u){return this._getDecoder(c).decode(l,u)},a.prototype._getEncoder=function(l){return l=l||"der",this.encoders.hasOwnProperty(l)||(this.encoders[l]=this._createNamed(e.encoders[l])),this.encoders[l]},a.prototype.encode=function(l,c,u){return this._getEncoder(c).encode(l,u)}})(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var t=requireInherits_browser();function e(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}reporter.Reporter=e,e.prototype.isError=function(a){return a instanceof s},e.prototype.save=function(){var a=this._reporterState;return{obj:a.obj,pathLen:a.path.length}},e.prototype.restore=function(a){var o=this._reporterState;o.obj=a.obj,o.path=o.path.slice(0,a.pathLen)},e.prototype.enterKey=function(a){return this._reporterState.path.push(a)},e.prototype.exitKey=function(a){var o=this._reporterState;o.path=o.path.slice(0,a-1)},e.prototype.leaveKey=function(a,o,l){var c=this._reporterState;this.exitKey(a),c.obj!==null&&(c.obj[o]=l)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var a=this._reporterState,o=a.obj;return a.obj={},o},e.prototype.leaveObject=function(a){var o=this._reporterState,l=o.obj;return o.obj=a,l},e.prototype.error=function(a){var o,l=this._reporterState,c=a instanceof s;if(c?o=a:o=new s(l.path.map(function(u){return"["+JSON.stringify(u)+"]"}).join(""),a.message||a,a.stack),!l.options.partial)throw o;return c||l.errors.push(o),o},e.prototype.wrapResult=function(a){var o=this._reporterState;return o.options.partial?{result:this.isError(a)?null:a,errors:o.errors}:a};function s(r,a){this.path=r,this.rethrow(a)}return t(s,Error),s.prototype.rethrow=function(a){if(this.message=a+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(o){this.stack=o.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var t=requireInherits_browser(),e=requireBase().Reporter,s=requireBuffer$1().Buffer;function r(o,l){if(e.call(this,l),!s.isBuffer(o)){this.error("Input not Buffer");return}this.base=o,this.offset=0,this.length=o.length}t(r,e),buffer.DecoderBuffer=r,r.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},r.prototype.restore=function(l){var c=new r(this.base);return c.offset=l.offset,c.length=this.offset,this.offset=l.offset,e.prototype.restore.call(this,l.reporter),c},r.prototype.isEmpty=function(){return this.offset===this.length},r.prototype.readUInt8=function(l){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(l||"DecoderBuffer overrun")},r.prototype.skip=function(l,c){if(!(this.offset+l<=this.length))return this.error(c||"DecoderBuffer overrun");var u=new r(this.base);return u._reporterState=this._reporterState,u.offset=this.offset,u.length=this.offset+l,this.offset+=l,u},r.prototype.raw=function(l){return this.base.slice(l?l.offset:this.offset,this.length)};function a(o,l){if(Array.isArray(o))this.length=0,this.value=o.map(function(c){return c instanceof a||(c=new a(c,l)),this.length+=c.length,c},this);else if(typeof o=="number"){if(!(0<=o&&o<=255))return l.error("non-byte EncoderBuffer value");this.value=o,this.length=1}else if(typeof o=="string")this.value=o,this.length=s.byteLength(o);else if(s.isBuffer(o))this.value=o,this.length=o.length;else return l.error("Unsupported type: "+typeof o)}return buffer.EncoderBuffer=a,a.prototype.join=function(l,c){return l||(l=new s(this.length)),c||(c=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(u){u.join(l,c),c+=u.length}):(typeof this.value=="number"?l[c]=this.value:typeof this.value=="string"?l.write(this.value,c):s.isBuffer(this.value)&&this.value.copy(l,c),c+=this.length)),l},buffer}var node$3,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node$3;hasRequiredNode=1;var t=requireBase().Reporter,e=requireBase().EncoderBuffer,s=requireBase().DecoderBuffer,r=requireMinimalisticAssert(),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],o=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a),l=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function c(f,d){var p={};this._baseState=p,p.enc=f,p.parent=d||null,p.children=null,p.tag=null,p.args=null,p.reverseArgs=null,p.choice=null,p.optional=!1,p.any=!1,p.obj=!1,p.use=null,p.useDecoder=null,p.key=null,p.default=null,p.explicit=null,p.implicit=null,p.contains=null,p.parent||(p.children=[],this._wrap())}node$3=c;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return c.prototype.clone=function(){var d=this._baseState,p={};u.forEach(function(y){p[y]=d[y]});var m=new this.constructor(p.parent);return m._baseState=p,m},c.prototype._wrap=function(){var d=this._baseState;o.forEach(function(p){this[p]=function(){var y=new this.constructor(this);return d.children.push(y),y[p].apply(y,arguments)}},this)},c.prototype._init=function(d){var p=this._baseState;r(p.parent===null),d.call(this),p.children=p.children.filter(function(m){return m._baseState.parent===this},this),r.equal(p.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(d){var p=this._baseState,m=d.filter(function(y){return y instanceof this.constructor},this);d=d.filter(function(y){return!(y instanceof this.constructor)},this),m.length!==0&&(r(p.children===null),p.children=m,m.forEach(function(y){y._baseState.parent=this},this)),d.length!==0&&(r(p.args===null),p.args=d,p.reverseArgs=d.map(function(y){if(typeof y!="object"||y.constructor!==Object)return y;var b={};return Object.keys(y).forEach(function(E){E==(E|0)&&(E|=0);var C=y[E];b[C]=E}),b}))},l.forEach(function(f){c.prototype[f]=function(){var p=this._baseState;throw new Error(f+" not implemented for encoding: "+p.enc)}}),a.forEach(function(f){c.prototype[f]=function(){var p=this._baseState,m=Array.prototype.slice.call(arguments);return r(p.tag===null),p.tag=f,this._useArgs(m),this}}),c.prototype.use=function(d){r(d);var p=this._baseState;return r(p.use===null),p.use=d,this},c.prototype.optional=function(){var d=this._baseState;return d.optional=!0,this},c.prototype.def=function(d){var p=this._baseState;return r(p.default===null),p.default=d,p.optional=!0,this},c.prototype.explicit=function(d){var p=this._baseState;return r(p.explicit===null&&p.implicit===null),p.explicit=d,this},c.prototype.implicit=function(d){var p=this._baseState;return r(p.explicit===null&&p.implicit===null),p.implicit=d,this},c.prototype.obj=function(){var d=this._baseState,p=Array.prototype.slice.call(arguments);return d.obj=!0,p.length!==0&&this._useArgs(p),this},c.prototype.key=function(d){var p=this._baseState;return r(p.key===null),p.key=d,this},c.prototype.any=function(){var d=this._baseState;return d.any=!0,this},c.prototype.choice=function(d){var p=this._baseState;return r(p.choice===null),p.choice=d,this._useArgs(Object.keys(d).map(function(m){return d[m]})),this},c.prototype.contains=function(d){var p=this._baseState;return r(p.use===null),p.contains=d,this},c.prototype._decode=function(d,p){var m=this._baseState;if(m.parent===null)return d.wrapResult(m.children[0]._decode(d,p));var y=m.default,b=!0,E=null;if(m.key!==null&&(E=d.enterKey(m.key)),m.optional){var C=null;if(m.explicit!==null?C=m.explicit:m.implicit!==null?C=m.implicit:m.tag!==null&&(C=m.tag),C===null&&!m.any){var j=d.save();try{m.choice===null?this._decodeGeneric(m.tag,d,p):this._decodeChoice(d,p),b=!0}catch{b=!1}d.restore(j)}else if(b=this._peekTag(d,C,m.any),d.isError(b))return b}var B;if(m.obj&&b&&(B=d.enterObject()),b){if(m.explicit!==null){var D=this._decodeTag(d,m.explicit);if(d.isError(D))return D;d=D}var F=d.offset;if(m.use===null&&m.choice===null){if(m.any)var j=d.save();var q=this._decodeTag(d,m.implicit!==null?m.implicit:m.tag,m.any);if(d.isError(q))return q;m.any?y=d.raw(j):d=q}if(p&&p.track&&m.tag!==null&&p.track(d.path(),F,d.length,"tagged"),p&&p.track&&m.tag!==null&&p.track(d.path(),d.offset,d.length,"content"),m.any?y=y:m.choice===null?y=this._decodeGeneric(m.tag,d,p):y=this._decodeChoice(d,p),d.isError(y))return y;if(!m.any&&m.choice===null&&m.children!==null&&m.children.forEach(function(Q){Q._decode(d,p)}),m.contains&&(m.tag==="octstr"||m.tag==="bitstr")){var V=new s(y);y=this._getUse(m.contains,d._reporterState.obj)._decode(V,p)}}return m.obj&&b&&(y=d.leaveObject(B)),m.key!==null&&(y!==null||b===!0)?d.leaveKey(E,m.key,y):E!==null&&d.exitKey(E),y},c.prototype._decodeGeneric=function(d,p,m){var y=this._baseState;return d==="seq"||d==="set"?null:d==="seqof"||d==="setof"?this._decodeList(p,d,y.args[0],m):/str$/.test(d)?this._decodeStr(p,d,m):d==="objid"&&y.args?this._decodeObjid(p,y.args[0],y.args[1],m):d==="objid"?this._decodeObjid(p,null,null,m):d==="gentime"||d==="utctime"?this._decodeTime(p,d,m):d==="null_"?this._decodeNull(p,m):d==="bool"?this._decodeBool(p,m):d==="objDesc"?this._decodeStr(p,d,m):d==="int"||d==="enum"?this._decodeInt(p,y.args&&y.args[0],m):y.use!==null?this._getUse(y.use,p._reporterState.obj)._decode(p,m):p.error("unknown tag: "+d)},c.prototype._getUse=function(d,p){var m=this._baseState;return m.useDecoder=this._use(d,p),r(m.useDecoder._baseState.parent===null),m.useDecoder=m.useDecoder._baseState.children[0],m.implicit!==m.useDecoder._baseState.implicit&&(m.useDecoder=m.useDecoder.clone(),m.useDecoder._baseState.implicit=m.implicit),m.useDecoder},c.prototype._decodeChoice=function(d,p){var m=this._baseState,y=null,b=!1;return Object.keys(m.choice).some(function(E){var C=d.save(),j=m.choice[E];try{var B=j._decode(d,p);if(d.isError(B))return!1;y={type:E,value:B},b=!0}catch{return d.restore(C),!1}return!0},this),b?y:d.error("Choice not matched")},c.prototype._createEncoderBuffer=function(d){return new e(d,this.reporter)},c.prototype._encode=function(d,p,m){var y=this._baseState;if(!(y.default!==null&&y.default===d)){var b=this._encodeValue(d,p,m);if(b!==void 0&&!this._skipDefault(b,p,m))return b}},c.prototype._encodeValue=function(d,p,m){var y=this._baseState;if(y.parent===null)return y.children[0]._encode(d,p||new t);var j=null;if(this.reporter=p,y.optional&&d===void 0)if(y.default!==null)d=y.default;else return;var b=null,E=!1;if(y.any)j=this._createEncoderBuffer(d);else if(y.choice)j=this._encodeChoice(d,p);else if(y.contains)b=this._getUse(y.contains,m)._encode(d,p),E=!0;else if(y.children)b=y.children.map(function(F){if(F._baseState.tag==="null_")return F._encode(null,p,d);if(F._baseState.key===null)return p.error("Child should have a key");var q=p.enterKey(F._baseState.key);if(typeof d!="object")return p.error("Child expected, but input is not object");var V=F._encode(d[F._baseState.key],p,d);return p.leaveKey(q),V},this).filter(function(F){return F}),b=this._createEncoderBuffer(b);else if(y.tag==="seqof"||y.tag==="setof"){if(!(y.args&&y.args.length===1))return p.error("Too many args for : "+y.tag);if(!Array.isArray(d))return p.error("seqof/setof, but data is not Array");var C=this.clone();C._baseState.implicit=null,b=this._createEncoderBuffer(d.map(function(F){var q=this._baseState;return this._getUse(q.args[0],d)._encode(F,p)},C))}else y.use!==null?j=this._getUse(y.use,m)._encode(d,p):(b=this._encodePrimitive(y.tag,d),E=!0);var j;if(!y.any&&y.choice===null){var B=y.implicit!==null?y.implicit:y.tag,D=y.implicit===null?"universal":"context";B===null?y.use===null&&p.error("Tag could be omitted only for .use()"):y.use===null&&(j=this._encodeComposite(B,E,D,b))}return y.explicit!==null&&(j=this._encodeComposite(y.explicit,!1,"context",j)),j},c.prototype._encodeChoice=function(d,p){var m=this._baseState,y=m.choice[d.type];return y||r(!1,d.type+" not found in "+JSON.stringify(Object.keys(m.choice))),y._encode(d.value,p)},c.prototype._encodePrimitive=function(d,p){var m=this._baseState;if(/str$/.test(d))return this._encodeStr(p,d);if(d==="objid"&&m.args)return this._encodeObjid(p,m.reverseArgs[0],m.args[1]);if(d==="objid")return this._encodeObjid(p,null,null);if(d==="gentime"||d==="utctime")return this._encodeTime(p,d);if(d==="null_")return this._encodeNull();if(d==="int"||d==="enum")return this._encodeInt(p,m.args&&m.reverseArgs[0]);if(d==="bool")return this._encodeBool(p);if(d==="objDesc")return this._encodeStr(p,d);throw new Error("Unsupported tag: "+d)},c.prototype._isNumstr=function(d){return/^[0-9 ]*$/.test(d)},c.prototype._isPrintstr=function(d){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(d)},node$3}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,(function(t){var e=t;e.Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()})(base)),base}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,(function(t){var e=requireConstants();t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e._reverse(t.tag)})(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,(function(t){var e=t;e._reverse=function(r){var a={};return Object.keys(r).forEach(function(o){(o|0)==o&&(o=o|0);var l=r[o];a[l]=o}),a},e.der=requireDer$2()})(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var t=requireInherits_browser(),e=requireAsn1$1(),s=e.base,r=e.bignum,a=e.constants.der;function o(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new l,this.tree._init(f.body)}der_1$1=o,o.prototype.decode=function(d,p){return d instanceof s.DecoderBuffer||(d=new s.DecoderBuffer(d,p)),this.tree._decode(d,p)};function l(f){s.Node.call(this,"der",f)}t(l,s.Node),l.prototype._peekTag=function(d,p,m){if(d.isEmpty())return!1;var y=d.save(),b=c(d,'Failed to peek tag: "'+p+'"');return d.isError(b)?b:(d.restore(y),b.tag===p||b.tagStr===p||b.tagStr+"of"===p||m)},l.prototype._decodeTag=function(d,p,m){var y=c(d,'Failed to decode tag of "'+p+'"');if(d.isError(y))return y;var b=u(d,y.primitive,'Failed to get length of "'+p+'"');if(d.isError(b))return b;if(!m&&y.tag!==p&&y.tagStr!==p&&y.tagStr+"of"!==p)return d.error('Failed to match tag: "'+p+'"');if(y.primitive||b!==null)return d.skip(b,'Failed to match body of: "'+p+'"');var E=d.save(),C=this._skipUntilEnd(d,'Failed to skip indefinite length body: "'+this.tag+'"');return d.isError(C)?C:(b=d.offset-E.offset,d.restore(E),d.skip(b,'Failed to match body of: "'+p+'"'))},l.prototype._skipUntilEnd=function(d,p){for(;;){var m=c(d,p);if(d.isError(m))return m;var y=u(d,m.primitive,p);if(d.isError(y))return y;var b;if(m.primitive||y!==null?b=d.skip(y):b=this._skipUntilEnd(d,p),d.isError(b))return b;if(m.tagStr==="end")break}},l.prototype._decodeList=function(d,p,m,y){for(var b=[];!d.isEmpty();){var E=this._peekTag(d,"end");if(d.isError(E))return E;var C=m.decode(d,"der",y);if(d.isError(C)&&E)break;b.push(C)}return b},l.prototype._decodeStr=function(d,p){if(p==="bitstr"){var m=d.readUInt8();return d.isError(m)?m:{unused:m,data:d.raw()}}else if(p==="bmpstr"){var y=d.raw();if(y.length%2===1)return d.error("Decoding of string type: bmpstr length mismatch");for(var b="",E=0;E<y.length/2;E++)b+=String.fromCharCode(y.readUInt16BE(E*2));return b}else if(p==="numstr"){var C=d.raw().toString("ascii");return this._isNumstr(C)?C:d.error("Decoding of string type: numstr unsupported characters")}else{if(p==="octstr")return d.raw();if(p==="objDesc")return d.raw();if(p==="printstr"){var j=d.raw().toString("ascii");return this._isPrintstr(j)?j:d.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(p)?d.raw().toString():d.error("Decoding of string type: "+p+" unsupported")}},l.prototype._decodeObjid=function(d,p,m){for(var y,b=[],E=0;!d.isEmpty();){var C=d.readUInt8();E<<=7,E|=C&127,(C&128)===0&&(b.push(E),E=0)}C&128&&b.push(E);var j=b[0]/40|0,B=b[0]%40;if(m?y=b:y=[j,B].concat(b.slice(1)),p){var D=p[y.join(" ")];D===void 0&&(D=p[y.join(".")]),D!==void 0&&(y=D)}return y},l.prototype._decodeTime=function(d,p){var m=d.raw().toString();if(p==="gentime")var y=m.slice(0,4)|0,b=m.slice(4,6)|0,E=m.slice(6,8)|0,C=m.slice(8,10)|0,j=m.slice(10,12)|0,B=m.slice(12,14)|0;else if(p==="utctime"){var y=m.slice(0,2)|0,b=m.slice(2,4)|0,E=m.slice(4,6)|0,C=m.slice(6,8)|0,j=m.slice(8,10)|0,B=m.slice(10,12)|0;y<70?y=2e3+y:y=1900+y}else return d.error("Decoding "+p+" time is not supported yet");return Date.UTC(y,b-1,E,C,j,B,0)},l.prototype._decodeNull=function(d){return null},l.prototype._decodeBool=function(d){var p=d.readUInt8();return d.isError(p)?p:p!==0},l.prototype._decodeInt=function(d,p){var m=d.raw(),y=new r(m);return p&&(y=p[y.toString(10)]||y),y},l.prototype._use=function(d,p){return typeof d=="function"&&(d=d(p)),d._getDecoder("der").tree};function c(f,d){var p=f.readUInt8(d);if(f.isError(p))return p;var m=a.tagClass[p>>6],y=(p&32)===0;if((p&31)===31){var b=p;for(p=0;(b&128)===128;){if(b=f.readUInt8(d),f.isError(b))return b;p<<=7,p|=b&127}}else p&=31;var E=a.tag[p];return{cls:m,primitive:y,tag:p,tagStr:E}}function u(f,d,p){var m=f.readUInt8(p);if(f.isError(m))return m;if(!d&&m===128)return null;if((m&128)===0)return m;var y=m&127;if(y>4)return f.error("length octect is too long");m=0;for(var b=0;b<y;b++){m<<=8;var E=f.readUInt8(p);if(f.isError(E))return E;m|=E}return m}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var t=requireInherits_browser(),e=requireBuffer$1().Buffer,s=requireDer$1();function r(a){s.call(this,a),this.enc="pem"}return t(r,s),pem$1=r,r.prototype.decode=function(o,l){for(var c=o.toString().split(/[\r\n]+/g),u=l.label.toUpperCase(),f=/^-----(BEGIN|END) ([^-]+)-----$/,d=-1,p=-1,m=0;m<c.length;m++){var y=c[m].match(f);if(y!==null&&y[2]===u)if(d===-1){if(y[1]!=="BEGIN")break;d=m}else{if(y[1]!=="END")break;p=m;break}}if(d===-1||p===-1)throw new Error("PEM section not found for: "+u);var b=c.slice(d+1,p).join("");b.replace(/[^a-z0-9\+\/=]+/gi,"");var E=new e(b,"base64");return s.prototype.decode.call(this,E,l)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,(function(t){var e=t;e.der=requireDer$1(),e.pem=requirePem$1()})(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var t=requireInherits_browser(),e=requireBuffer$1().Buffer,s=requireAsn1$1(),r=s.base,a=s.constants.der;function o(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new l,this.tree._init(f.body)}der_1=o,o.prototype.encode=function(d,p){return this.tree._encode(d,p).join()};function l(f){r.Node.call(this,"der",f)}t(l,r.Node),l.prototype._encodeComposite=function(d,p,m,y){var b=u(d,p,m,this.reporter);if(y.length<128){var j=new e(2);return j[0]=b,j[1]=y.length,this._createEncoderBuffer([j,y])}for(var E=1,C=y.length;C>=256;C>>=8)E++;var j=new e(2+E);j[0]=b,j[1]=128|E;for(var C=1+E,B=y.length;B>0;C--,B>>=8)j[C]=B&255;return this._createEncoderBuffer([j,y])},l.prototype._encodeStr=function(d,p){if(p==="bitstr")return this._createEncoderBuffer([d.unused|0,d.data]);if(p==="bmpstr"){for(var m=new e(d.length*2),y=0;y<d.length;y++)m.writeUInt16BE(d.charCodeAt(y),y*2);return this._createEncoderBuffer(m)}else return p==="numstr"?this._isNumstr(d)?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: numstr supports only digits and space"):p==="printstr"?this._isPrintstr(d)?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(p)?this._createEncoderBuffer(d):p==="objDesc"?this._createEncoderBuffer(d):this.reporter.error("Encoding of string type: "+p+" unsupported")},l.prototype._encodeObjid=function(d,p,m){if(typeof d=="string"){if(!p)return this.reporter.error("string objid given, but no values map found");if(!p.hasOwnProperty(d))return this.reporter.error("objid not found in values map");d=p[d].split(/[\s\.]+/g);for(var y=0;y<d.length;y++)d[y]|=0}else if(Array.isArray(d)){d=d.slice();for(var y=0;y<d.length;y++)d[y]|=0}if(!Array.isArray(d))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(d));if(!m){if(d[1]>=40)return this.reporter.error("Second objid identifier OOB");d.splice(0,2,d[0]*40+d[1])}for(var b=0,y=0;y<d.length;y++){var E=d[y];for(b++;E>=128;E>>=7)b++}for(var C=new e(b),j=C.length-1,y=d.length-1;y>=0;y--){var E=d[y];for(C[j--]=E&127;(E>>=7)>0;)C[j--]=128|E&127}return this._createEncoderBuffer(C)};function c(f){return f<10?"0"+f:f}l.prototype._encodeTime=function(d,p){var m,y=new Date(d);return p==="gentime"?m=[c(y.getFullYear()),c(y.getUTCMonth()+1),c(y.getUTCDate()),c(y.getUTCHours()),c(y.getUTCMinutes()),c(y.getUTCSeconds()),"Z"].join(""):p==="utctime"?m=[c(y.getFullYear()%100),c(y.getUTCMonth()+1),c(y.getUTCDate()),c(y.getUTCHours()),c(y.getUTCMinutes()),c(y.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+p+" time is not supported yet"),this._encodeStr(m,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(d,p){if(typeof d=="string"){if(!p)return this.reporter.error("String int or enum given, but no values map");if(!p.hasOwnProperty(d))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(d));d=p[d]}if(typeof d!="number"&&!e.isBuffer(d)){var m=d.toArray();!d.sign&&m[0]&128&&m.unshift(0),d=new e(m)}if(e.isBuffer(d)){var y=d.length;d.length===0&&y++;var E=new e(y);return d.copy(E),d.length===0&&(E[0]=0),this._createEncoderBuffer(E)}if(d<128)return this._createEncoderBuffer(d);if(d<256)return this._createEncoderBuffer([0,d]);for(var y=1,b=d;b>=256;b>>=8)y++;for(var E=new Array(y),b=E.length-1;b>=0;b--)E[b]=d&255,d>>=8;return E[0]&128&&E.unshift(0),this._createEncoderBuffer(new e(E))},l.prototype._encodeBool=function(d){return this._createEncoderBuffer(d?255:0)},l.prototype._use=function(d,p){return typeof d=="function"&&(d=d(p)),d._getEncoder("der").tree},l.prototype._skipDefault=function(d,p,m){var y=this._baseState,b;if(y.default===null)return!1;var E=d.join();if(y.defaultBuffer===void 0&&(y.defaultBuffer=this._encodeValue(y.default,p,m).join()),E.length!==y.defaultBuffer.length)return!1;for(b=0;b<E.length;b++)if(E[b]!==y.defaultBuffer[b])return!1;return!0};function u(f,d,p,m){var y;if(f==="seqof"?f="seq":f==="setof"&&(f="set"),a.tagByName.hasOwnProperty(f))y=a.tagByName[f];else if(typeof f=="number"&&(f|0)===f)y=f;else return m.error("Unknown tag: "+f);return y>=31?m.error("Multi-octet tag encoding unsupported"):(d||(y|=32),y|=a.tagClassByName[p||"universal"]<<6,y)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var t=requireInherits_browser(),e=requireDer();function s(r){e.call(this,r),this.enc="pem"}return t(s,e),pem=s,s.prototype.encode=function(a,o){for(var l=e.prototype.encode.call(this,a),c=l.toString("base64"),u=["-----BEGIN "+o.label+"-----"],f=0;f<c.length;f+=64)u.push(c.slice(f,f+64));return u.push("-----END "+o.label+"-----"),u.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,(function(t){var e=t;e.der=requireDer(),e.pem=requirePem()})(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,(function(t){var e=t;e.bignum=requireBn$2(),e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()})(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var t=requireAsn1$1(),e=t.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),s=t.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),r=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())}),o=t.define("RelativeDistinguishedName",function(){this.setof(s)}),l=t.define("RDNSequence",function(){this.seqof(o)}),c=t.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),u=t.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),f=t.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),d=t.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(r),this.key("issuer").use(c),this.key("validity").use(u),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())}),p=t.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(r),this.key("signatureValue").bitstr())});return certificate=p,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var t=requireAsn1$1();asn1$1.certificate=requireCertificate();var e=t.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=e;var s=t.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=s;var r=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),a=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=a;var o=t.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(r),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=o;var l=t.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=l;var c=t.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=c,asn1$1.DSAparam=t.define("DSAparam",function(){this.int()});var u=t.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),f=t.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(u),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=f,asn1$1.signature=t.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var t=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,r=requireEvp_bytestokey(),a=requireBrowser$6(),o=requireSafeBuffer$2().Buffer;return fixProc=function(l,c){var u=l.toString(),f=u.match(t),d;if(f){var m="aes"+f[1],y=o.from(f[2],"hex"),b=o.from(f[3].replace(/[\r\n]/g,""),"base64"),E=r(c,y.slice(0,8),parseInt(f[1],10)).key,C=[],j=a.createDecipheriv(m,E,y);C.push(j.update(b)),C.push(j.final()),d=o.concat(C)}else{var p=u.match(s);d=o.from(p[2].replace(/[\r\n]/g,""),"base64")}var B=u.match(e)[1];return{tag:B,data:d}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var t=requireAsn1(),e=require$$1$1,s=requireFixProc(),r=requireBrowser$6(),a=requireBrowser$7().pbkdf2Sync,o=requireSafeBuffer$2().Buffer;function l(u,f){var d=u.algorithm.decrypt.kde.kdeparams.salt,p=parseInt(u.algorithm.decrypt.kde.kdeparams.iters.toString(),10),m=e[u.algorithm.decrypt.cipher.algo.join(".")],y=u.algorithm.decrypt.cipher.iv,b=u.subjectPrivateKey,E=parseInt(m.split("-")[1],10)/8,C=a(f,d,p,E,"sha1"),j=r.createDecipheriv(m,C,y),B=[];return B.push(j.update(b)),B.push(j.final()),o.concat(B)}function c(u){var f;typeof u=="object"&&!o.isBuffer(u)&&(f=u.passphrase,u=u.key),typeof u=="string"&&(u=o.from(u));var d=s(u,f),p=d.tag,m=d.data,y,b;switch(p){case"CERTIFICATE":b=t.certificate.decode(m,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(b||(b=t.PublicKey.decode(m,"der")),y=b.algorithm.algorithm.join("."),y){case"1.2.840.113549.1.1.1":return t.RSAPublicKey.decode(b.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return b.subjectPrivateKey=b.subjectPublicKey,{type:"ec",data:b};case"1.2.840.10040.4.1":return b.algorithm.params.pub_key=t.DSAparam.decode(b.subjectPublicKey.data,"der"),{type:"dsa",data:b.algorithm.params};default:throw new Error("unknown key id "+y)}case"ENCRYPTED PRIVATE KEY":m=t.EncryptedPrivateKey.decode(m,"der"),m=l(m,f);case"PRIVATE KEY":switch(b=t.PrivateKey.decode(m,"der"),y=b.algorithm.algorithm.join("."),y){case"1.2.840.113549.1.1.1":return t.RSAPrivateKey.decode(b.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:b.algorithm.curve,privateKey:t.ECPrivateKey.decode(b.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return b.algorithm.params.priv_key=t.DSAparam.decode(b.subjectPrivateKey,"der"),{type:"dsa",params:b.algorithm.params};default:throw new Error("unknown key id "+y)}case"RSA PUBLIC KEY":return t.RSAPublicKey.decode(m,"der");case"RSA PRIVATE KEY":return t.RSAPrivateKey.decode(m,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:t.DSAPrivateKey.decode(m,"der")};case"EC PRIVATE KEY":return m=t.ECPrivateKey.decode(m,"der"),{curve:m.parameters.value,privateKey:m.privateKey};default:throw new Error("unknown key type "+p)}}return c.signature=t.signature,parseAsn1=c,parseAsn1}const require$$4$1={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$1.exports;hasRequiredSign=1;var t=requireSafeBuffer$2().Buffer,e=requireBrowser$8(),s=requireBrowserifyRsa(),r=requireElliptic().ec,a=requireBn(),o=requireParseAsn1(),l=require$$4$1,c=1;function u(j,B,D,F,q){var V=o(B);if(V.curve){if(F!=="ecdsa"&&F!=="ecdsa/rsa")throw new Error("wrong private key type");return f(j,V)}else if(V.type==="dsa"){if(F!=="dsa")throw new Error("wrong private key type");return d(j,V,D)}if(F!=="rsa"&&F!=="ecdsa/rsa")throw new Error("wrong private key type");if(B.padding!==void 0&&B.padding!==c)throw new Error("illegal or unsupported padding mode");j=t.concat([q,j]);for(var ee=V.modulus.byteLength(),Q=[0,1];j.length+Q.length+1<ee;)Q.push(255);Q.push(0);for(var W=-1;++W<j.length;)Q.push(j[W]);var Z=s(Q,V);return Z}function f(j,B){var D=l[B.curve.join(".")];if(!D)throw new Error("unknown curve "+B.curve.join("."));var F=new r(D),q=F.keyFromPrivate(B.privateKey),V=q.sign(j);return t.from(V.toDER())}function d(j,B,D){for(var F=B.params.priv_key,q=B.params.p,V=B.params.q,ee=B.params.g,Q=new a(0),W,Z=y(j,V).mod(V),z=!1,O=m(F,V,j,D);z===!1;)W=E(V,O,D),Q=C(ee,W,q,V),z=W.invm(V).imul(Z.add(F.mul(Q))).mod(V),z.cmpn(0)===0&&(z=!1,Q=new a(0));return p(Q,z)}function p(j,B){j=j.toArray(),B=B.toArray(),j[0]&128&&(j=[0].concat(j)),B[0]&128&&(B=[0].concat(B));var D=j.length+B.length+4,F=[48,D,2,j.length];return F=F.concat(j,[2,B.length],B),t.from(F)}function m(j,B,D,F){if(j=t.from(j.toArray()),j.length<B.byteLength()){var q=t.alloc(B.byteLength()-j.length);j=t.concat([q,j])}var V=D.length,ee=b(D,B),Q=t.alloc(V);Q.fill(1);var W=t.alloc(V);return W=e(F,W).update(Q).update(t.from([0])).update(j).update(ee).digest(),Q=e(F,W).update(Q).digest(),W=e(F,W).update(Q).update(t.from([1])).update(j).update(ee).digest(),Q=e(F,W).update(Q).digest(),{k:W,v:Q}}function y(j,B){var D=new a(j),F=(j.length<<3)-B.bitLength();return F>0&&D.ishrn(F),D}function b(j,B){j=y(j,B),j=j.mod(B);var D=t.from(j.toArray());if(D.length<B.byteLength()){var F=t.alloc(B.byteLength()-D.length);D=t.concat([F,D])}return D}function E(j,B,D){var F,q;do{for(F=t.alloc(0);F.length*8<j.bitLength();)B.v=e(D,B.k).update(B.v).digest(),F=t.concat([F,B.v]);q=y(F,j),B.k=e(D,B.k).update(B.v).update(t.from([0])).digest(),B.v=e(D,B.k).update(B.v).digest()}while(q.cmp(j)!==-1);return q}function C(j,B,D,F){return j.toRed(a.mont(D)).redPow(B).fromRed().mod(F)}return sign$1.exports=u,sign$1.exports.getKey=m,sign$1.exports.makeKey=E,sign$1.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var t=requireSafeBuffer$2().Buffer,e=requireBn(),s=requireElliptic().ec,r=requireParseAsn1(),a=require$$4$1;function o(f,d,p,m,y){var b=r(p);if(b.type==="ec"){if(m!=="ecdsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");return l(f,d,b)}else if(b.type==="dsa"){if(m!=="dsa")throw new Error("wrong public key type");return c(f,d,b)}if(m!=="rsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");d=t.concat([y,d]);for(var E=b.modulus.byteLength(),C=[1],j=0;d.length+C.length+2<E;)C.push(255),j+=1;C.push(0);for(var B=-1;++B<d.length;)C.push(d[B]);C=t.from(C);var D=e.mont(b.modulus);f=new e(f).toRed(D),f=f.redPow(new e(b.publicExponent)),f=t.from(f.fromRed().toArray());var F=j<8?1:0;for(E=Math.min(f.length,C.length),f.length!==C.length&&(F=1),B=-1;++B<E;)F|=f[B]^C[B];return F===0}function l(f,d,p){var m=a[p.data.algorithm.curve.join(".")];if(!m)throw new Error("unknown curve "+p.data.algorithm.curve.join("."));var y=new s(m),b=p.data.subjectPrivateKey.data;return y.verify(d,f,b)}function c(f,d,p){var m=p.data.p,y=p.data.q,b=p.data.g,E=p.data.pub_key,C=r.signature.decode(f,"der"),j=C.s,B=C.r;u(j,y),u(B,y);var D=e.mont(m),F=j.invm(y),q=b.toRed(D).redPow(new e(d).mul(F).mod(y)).fromRed().mul(E.toRed(D).redPow(B.mul(F).mod(y)).fromRed()).mod(m).mod(y);return q.cmp(B)===0}function u(f,d){if(f.cmpn(0)<=0)throw new Error("invalid sig");if(f.cmp(d)>=0)throw new Error("invalid sig")}return verify_1=o,verify_1}var browser$3,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;var t=requireSafeBuffer$2().Buffer,e=requireBrowser$9(),s=requireReadableBrowser(),r=requireInherits_browser(),a=requireSign(),o=requireVerify(),l=require$$6$1;Object.keys(l).forEach(function(p){l[p].id=t.from(l[p].id,"hex"),l[p.toLowerCase()]=l[p]});function c(p){s.Writable.call(this);var m=l[p];if(!m)throw new Error("Unknown message digest");this._hashType=m.hash,this._hash=e(m.hash),this._tag=m.id,this._signType=m.sign}r(c,s.Writable),c.prototype._write=function(m,y,b){this._hash.update(m),b()},c.prototype.update=function(m,y){return this._hash.update(typeof m=="string"?t.from(m,y):m),this},c.prototype.sign=function(m,y){this.end();var b=this._hash.digest(),E=a(b,m,this._hashType,this._signType,this._tag);return y?E.toString(y):E};function u(p){s.Writable.call(this);var m=l[p];if(!m)throw new Error("Unknown message digest");this._hash=e(m.hash),this._tag=m.id,this._signType=m.sign}r(u,s.Writable),u.prototype._write=function(m,y,b){this._hash.update(m),b()},u.prototype.update=function(m,y){return this._hash.update(typeof m=="string"?t.from(m,y):m),this},u.prototype.verify=function(m,y,b){var E=typeof y=="string"?t.from(y,b):y;this.end();var C=this._hash.digest();return o(E,C,m,this._signType,this._tag)};function f(p){return new c(p)}function d(p){return new u(p)}return browser$3={Sign:f,Verify:d,createSign:f,createVerify:d},browser$3}var browser$2,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$2;hasRequiredBrowser$2=1;var t=requireElliptic(),e=requireBn$2();browser$2=function(l){return new r(l)};var s={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};s.p224=s.secp224r1,s.p256=s.secp256r1=s.prime256v1,s.p192=s.secp192r1=s.prime192v1,s.p384=s.secp384r1,s.p521=s.secp521r1;function r(o){this.curveType=s[o],this.curveType||(this.curveType={name:o}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}r.prototype.generateKeys=function(o,l){return this.keys=this.curve.genKeyPair(),this.getPublicKey(o,l)},r.prototype.computeSecret=function(o,l,c){l=l||"utf8",Buffer.isBuffer(o)||(o=new Buffer(o,l));var u=this.curve.keyFromPublic(o).getPublic(),f=u.mul(this.keys.getPrivate()).getX();return a(f,c,this.curveType.byteLength)},r.prototype.getPublicKey=function(o,l){var c=this.keys.getPublic(l==="compressed",!0);return l==="hybrid"&&(c[c.length-1]%2?c[0]=7:c[0]=6),a(c,o)},r.prototype.getPrivateKey=function(o){return a(this.keys.getPrivate(),o)},r.prototype.setPublicKey=function(o,l){return l=l||"utf8",Buffer.isBuffer(o)||(o=new Buffer(o,l)),this.keys._importPublic(o),this},r.prototype.setPrivateKey=function(o,l){l=l||"utf8",Buffer.isBuffer(o)||(o=new Buffer(o,l));var c=new e(o);return c=c.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(c),this};function a(o,l,c){Array.isArray(o)||(o=o.toArray());var u=new Buffer(o);if(c&&u.length<c){var f=new Buffer(c-u.length);f.fill(0),u=Buffer.concat([f,u])}return l?u.toString(l):u}return browser$2}var browser$1={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var t=requireBrowser$9(),e=requireSafeBuffer$2().Buffer;mgf=function(r,a){for(var o=e.alloc(0),l=0,c;o.length<a;)c=s(l++),o=e.concat([o,t("sha1").update(r).update(c).digest()]);return o.slice(0,a)};function s(r){var a=e.allocUnsafe(4);return a.writeUInt32BE(r,0),a}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(e,s){for(var r=e.length,a=-1;++a<r;)e[a]^=s[a];return e}),xor}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var t=requireBn$2(),e=requireSafeBuffer$2().Buffer;function s(r,a){return e.from(r.toRed(t.mont(a.modulus)).redPow(new t(a.publicExponent)).fromRed().toArray())}return withPublic_1=s,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var t=requireParseAsn1(),e=requireBrowser$b(),s=requireBrowser$9(),r=requireMgf(),a=requireXor(),o=requireBn$2(),l=requireWithPublic(),c=requireBrowserifyRsa(),u=requireSafeBuffer$2().Buffer;publicEncrypt=function(y,b,E){var C;y.padding?C=y.padding:E?C=1:C=4;var j=t(y),B;if(C===4)B=f(j,b);else if(C===1)B=d(j,b,E);else if(C===3){if(B=new o(b),B.cmp(j.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return E?c(B,j):l(B,j)};function f(m,y){var b=m.modulus.byteLength(),E=y.length,C=s("sha1").update(u.alloc(0)).digest(),j=C.length,B=2*j;if(E>b-B-2)throw new Error("message too long");var D=u.alloc(b-E-B-2),F=b-j-1,q=e(j),V=a(u.concat([C,D,u.alloc(1,1),y],F),r(q,F)),ee=a(q,r(V,j));return new o(u.concat([u.alloc(1),ee,V],b))}function d(m,y,b){var E=y.length,C=m.modulus.byteLength();if(E>C-11)throw new Error("message too long");var j;return b?j=u.alloc(C-E-3,255):j=p(C-E-3),new o(u.concat([u.from([0,b?1:2]),j,u.alloc(1),y],C))}function p(m){for(var y=u.allocUnsafe(m),b=0,E=e(m*2),C=0,j;b<m;)C===E.length&&(E=e(m*2),C=0),j=E[C++],j&&(y[b++]=j);return y}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var t=requireParseAsn1(),e=requireMgf(),s=requireXor(),r=requireBn$2(),a=requireBrowserifyRsa(),o=requireBrowser$9(),l=requireWithPublic(),c=requireSafeBuffer$2().Buffer;privateDecrypt=function(m,y,b){var E;m.padding?E=m.padding:b?E=1:E=4;var C=t(m),j=C.modulus.byteLength();if(y.length>j||new r(y).cmp(C.modulus)>=0)throw new Error("decryption error");var B;b?B=l(new r(y),C):B=a(y,C);var D=c.alloc(j-B.length);if(B=c.concat([D,B],j),E===4)return u(C,B);if(E===1)return f(C,B,b);if(E===3)return B;throw new Error("unknown padding")};function u(p,m){var y=p.modulus.byteLength(),b=o("sha1").update(c.alloc(0)).digest(),E=b.length;if(m[0]!==0)throw new Error("decryption error");var C=m.slice(1,E+1),j=m.slice(E+1),B=s(C,e(j,E)),D=s(j,e(B,y-E-1));if(d(b,D.slice(0,E)))throw new Error("decryption error");for(var F=E;D[F]===0;)F++;if(D[F++]!==1)throw new Error("decryption error");return D.slice(F)}function f(p,m,y){for(var b=m.slice(0,2),E=2,C=0;m[E++]!==0;)if(E>=m.length){C++;break}var j=m.slice(2,E-1);if((b.toString("hex")!=="0002"&&!y||b.toString("hex")!=="0001"&&y)&&C++,j.length<8&&C++,C)throw new Error("decryption error");return m.slice(E)}function d(p,m){p=c.from(p),m=c.from(m);var y=0,b=p.length;p.length!==m.length&&(y++,b=Math.min(p.length,m.length));for(var E=-1;++E<b;)y+=p[E]^m[E];return y}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,(function(t){t.publicEncrypt=requirePublicEncrypt(),t.privateDecrypt=requirePrivateDecrypt(),t.privateEncrypt=function(s,r){return t.publicEncrypt(s,r,!0)},t.publicDecrypt=function(s,r){return t.privateDecrypt(s,r,!0)}})(browser$1)),browser$1}var browser={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;function t(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=requireSafeBuffer$2(),s=requireBrowser$b(),r=e.Buffer,a=e.kMaxLength,o=commonjsGlobal.crypto||commonjsGlobal.msCrypto,l=Math.pow(2,32)-1;function c(m,y){if(typeof m!="number"||m!==m)throw new TypeError("offset must be a number");if(m>l||m<0)throw new TypeError("offset must be a uint32");if(m>a||m>y)throw new RangeError("offset out of range")}function u(m,y,b){if(typeof m!="number"||m!==m)throw new TypeError("size must be a number");if(m>l||m<0)throw new TypeError("size must be a uint32");if(m+y>b||m>a)throw new RangeError("buffer too small")}o&&o.getRandomValues||!process$1.browser?(browser.randomFill=f,browser.randomFillSync=p):(browser.randomFill=t,browser.randomFillSync=t);function f(m,y,b,E){if(!r.isBuffer(m)&&!(m instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof y=="function")E=y,y=0,b=m.length;else if(typeof b=="function")E=b,b=m.length-y;else if(typeof E!="function")throw new TypeError('"cb" argument must be a function');return c(y,m.length),u(b,y,m.length),d(m,y,b,E)}function d(m,y,b,E){if(process$1.browser){var C=m.buffer,j=new Uint8Array(C,y,b);if(o.getRandomValues(j),E){process$1.nextTick(function(){E(null,m)});return}return m}if(E){s(b,function(D,F){if(D)return E(D);F.copy(m,y),E(null,m)});return}var B=s(b);return B.copy(m,y),m}function p(m,y,b){if(typeof y>"u"&&(y=0),!r.isBuffer(m)&&!(m instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return c(y,m.length),b===void 0&&(b=m.length-y),u(b,y,m.length),d(m,y,b)}return browser}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var t=requireAlgos(),e=Object.keys(t),s=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return s};var r=requireBrowser$7();cryptoBrowserify.pbkdf2=r.pbkdf2,cryptoBrowserify.pbkdf2Sync=r.pbkdf2Sync;var a=requireBrowser$5();cryptoBrowserify.Cipher=a.Cipher,cryptoBrowserify.createCipher=a.createCipher,cryptoBrowserify.Cipheriv=a.Cipheriv,cryptoBrowserify.createCipheriv=a.createCipheriv,cryptoBrowserify.Decipher=a.Decipher,cryptoBrowserify.createDecipher=a.createDecipher,cryptoBrowserify.Decipheriv=a.Decipheriv,cryptoBrowserify.createDecipheriv=a.createDecipheriv,cryptoBrowserify.getCiphers=a.getCiphers,cryptoBrowserify.listCiphers=a.listCiphers;var o=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=o.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=o.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=o.getDiffieHellman,cryptoBrowserify.createDiffieHellman=o.createDiffieHellman,cryptoBrowserify.DiffieHellman=o.DiffieHellman;var l=requireBrowser$3();cryptoBrowserify.createSign=l.createSign,cryptoBrowserify.Sign=l.Sign,cryptoBrowserify.createVerify=l.createVerify,cryptoBrowserify.Verify=l.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var c=requireBrowser$1();cryptoBrowserify.publicEncrypt=c.publicEncrypt,cryptoBrowserify.privateEncrypt=c.privateEncrypt,cryptoBrowserify.publicDecrypt=c.publicDecrypt,cryptoBrowserify.privateDecrypt=c.privateDecrypt;var u=requireBrowser();return cryptoBrowserify.randomFill=u.randomFill,cryptoBrowserify.randomFillSync=u.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var core=core$1.exports,hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,(function(t,e){(function(s,r){t.exports=r()})(core,function(){var s=s||(function(r,a){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(o=commonjsGlobal.crypto),!o&&typeof commonjsRequire=="function")try{o=requireCryptoBrowserify()}catch{}var l=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||(function(){function B(){}return function(D){var F;return B.prototype=D,F=new B,B.prototype=null,F}})(),u={},f=u.lib={},d=f.Base=(function(){return{extend:function(B){var D=c(this);return B&&D.mixIn(B),(!D.hasOwnProperty("init")||this.init===D.init)&&(D.init=function(){D.$super.init.apply(this,arguments)}),D.init.prototype=D,D.$super=this,D},create:function(){var B=this.extend();return B.init.apply(B,arguments),B},init:function(){},mixIn:function(B){for(var D in B)B.hasOwnProperty(D)&&(this[D]=B[D]);B.hasOwnProperty("toString")&&(this.toString=B.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),p=f.WordArray=d.extend({init:function(B,D){B=this.words=B||[],D!=a?this.sigBytes=D:this.sigBytes=B.length*4},toString:function(B){return(B||y).stringify(this)},concat:function(B){var D=this.words,F=B.words,q=this.sigBytes,V=B.sigBytes;if(this.clamp(),q%4)for(var ee=0;ee<V;ee++){var Q=F[ee>>>2]>>>24-ee%4*8&255;D[q+ee>>>2]|=Q<<24-(q+ee)%4*8}else for(var W=0;W<V;W+=4)D[q+W>>>2]=F[W>>>2];return this.sigBytes+=V,this},clamp:function(){var B=this.words,D=this.sigBytes;B[D>>>2]&=4294967295<<32-D%4*8,B.length=r.ceil(D/4)},clone:function(){var B=d.clone.call(this);return B.words=this.words.slice(0),B},random:function(B){for(var D=[],F=0;F<B;F+=4)D.push(l());return new p.init(D,B)}}),m=u.enc={},y=m.Hex={stringify:function(B){for(var D=B.words,F=B.sigBytes,q=[],V=0;V<F;V++){var ee=D[V>>>2]>>>24-V%4*8&255;q.push((ee>>>4).toString(16)),q.push((ee&15).toString(16))}return q.join("")},parse:function(B){for(var D=B.length,F=[],q=0;q<D;q+=2)F[q>>>3]|=parseInt(B.substr(q,2),16)<<24-q%8*4;return new p.init(F,D/2)}},b=m.Latin1={stringify:function(B){for(var D=B.words,F=B.sigBytes,q=[],V=0;V<F;V++){var ee=D[V>>>2]>>>24-V%4*8&255;q.push(String.fromCharCode(ee))}return q.join("")},parse:function(B){for(var D=B.length,F=[],q=0;q<D;q++)F[q>>>2]|=(B.charCodeAt(q)&255)<<24-q%4*8;return new p.init(F,D)}},E=m.Utf8={stringify:function(B){try{return decodeURIComponent(escape(b.stringify(B)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(B){return b.parse(unescape(encodeURIComponent(B)))}},C=f.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new p.init,this._nDataBytes=0},_append:function(B){typeof B=="string"&&(B=E.parse(B)),this._data.concat(B),this._nDataBytes+=B.sigBytes},_process:function(B){var D,F=this._data,q=F.words,V=F.sigBytes,ee=this.blockSize,Q=ee*4,W=V/Q;B?W=r.ceil(W):W=r.max((W|0)-this._minBufferSize,0);var Z=W*ee,z=r.min(Z*4,V);if(Z){for(var O=0;O<Z;O+=ee)this._doProcessBlock(q,O);D=q.splice(0,Z),F.sigBytes-=z}return new p.init(D,z)},clone:function(){var B=d.clone.call(this);return B._data=this._data.clone(),B},_minBufferSize:0});f.Hasher=C.extend({cfg:d.extend(),init:function(B){this.cfg=this.cfg.extend(B),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(B){return this._append(B),this._process(),this},finalize:function(B){B&&this._append(B);var D=this._doFinalize();return D},blockSize:16,_createHelper:function(B){return function(D,F){return new B.init(F).finalize(D)}},_createHmacHelper:function(B){return function(D,F){return new j.HMAC.init(B,F).finalize(D)}}});var j=u.algo={};return u})(Math);return s})})(core$1)),core$1.exports}var x64Core$1={exports:{}},x64Core=x64Core$1.exports,hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(x64Core,function(s){return(function(r){var a=s,o=a.lib,l=o.Base,c=o.WordArray,u=a.x64={};u.Word=l.extend({init:function(f,d){this.high=f,this.low=d}}),u.WordArray=l.extend({init:function(f,d){f=this.words=f||[],d!=r?this.sigBytes=d:this.sigBytes=f.length*8},toX32:function(){for(var f=this.words,d=f.length,p=[],m=0;m<d;m++){var y=f[m];p.push(y.high),p.push(y.low)}return c.create(p,this.sigBytes)},clone:function(){for(var f=l.clone.call(this),d=f.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return f}})})(),s})})(x64Core$1)),x64Core$1.exports}var libTypedarrays$1={exports:{}},libTypedarrays=libTypedarrays$1.exports,hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(libTypedarrays,function(s){return(function(){if(typeof ArrayBuffer=="function"){var r=s,a=r.lib,o=a.WordArray,l=o.init,c=o.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var f=u.byteLength,d=[],p=0;p<f;p++)d[p>>>2]|=u[p]<<24-p%4*8;l.call(this,d,f)}else l.apply(this,arguments)};c.prototype=o}})(),s.lib.WordArray})})(libTypedarrays$1)),libTypedarrays$1.exports}var encUtf16$1={exports:{}},encUtf16=encUtf16$1.exports,hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(encUtf16,function(s){return(function(){var r=s,a=r.lib,o=a.WordArray,l=r.enc;l.Utf16=l.Utf16BE={stringify:function(u){for(var f=u.words,d=u.sigBytes,p=[],m=0;m<d;m+=2){var y=f[m>>>2]>>>16-m%4*8&65535;p.push(String.fromCharCode(y))}return p.join("")},parse:function(u){for(var f=u.length,d=[],p=0;p<f;p++)d[p>>>1]|=u.charCodeAt(p)<<16-p%2*16;return o.create(d,f*2)}},l.Utf16LE={stringify:function(u){for(var f=u.words,d=u.sigBytes,p=[],m=0;m<d;m+=2){var y=c(f[m>>>2]>>>16-m%4*8&65535);p.push(String.fromCharCode(y))}return p.join("")},parse:function(u){for(var f=u.length,d=[],p=0;p<f;p++)d[p>>>1]|=c(u.charCodeAt(p)<<16-p%2*16);return o.create(d,f*2)}};function c(u){return u<<8&4278255360|u>>>8&16711935}})(),s.enc.Utf16})})(encUtf16$1)),encUtf16$1.exports}var encBase64$1={exports:{}},encBase64=encBase64$1.exports,hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(encBase64,function(s){return(function(){var r=s,a=r.lib,o=a.WordArray,l=r.enc;l.Base64={stringify:function(u){var f=u.words,d=u.sigBytes,p=this._map;u.clamp();for(var m=[],y=0;y<d;y+=3)for(var b=f[y>>>2]>>>24-y%4*8&255,E=f[y+1>>>2]>>>24-(y+1)%4*8&255,C=f[y+2>>>2]>>>24-(y+2)%4*8&255,j=b<<16|E<<8|C,B=0;B<4&&y+B*.75<d;B++)m.push(p.charAt(j>>>6*(3-B)&63));var D=p.charAt(64);if(D)for(;m.length%4;)m.push(D);return m.join("")},parse:function(u){var f=u.length,d=this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var y=d.charAt(64);if(y){var b=u.indexOf(y);b!==-1&&(f=b)}return c(u,f,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function c(u,f,d){for(var p=[],m=0,y=0;y<f;y++)if(y%4){var b=d[u.charCodeAt(y-1)]<<y%4*2,E=d[u.charCodeAt(y)]>>>6-y%4*2,C=b|E;p[m>>>2]|=C<<24-m%4*8,m++}return o.create(p,m)}})(),s.enc.Base64})})(encBase64$1)),encBase64$1.exports}var encBase64url$1={exports:{}},encBase64url=encBase64url$1.exports,hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(encBase64url,function(s){return(function(){var r=s,a=r.lib,o=a.WordArray,l=r.enc;l.Base64url={stringify:function(u,f){f===void 0&&(f=!0);var d=u.words,p=u.sigBytes,m=f?this._safe_map:this._map;u.clamp();for(var y=[],b=0;b<p;b+=3)for(var E=d[b>>>2]>>>24-b%4*8&255,C=d[b+1>>>2]>>>24-(b+1)%4*8&255,j=d[b+2>>>2]>>>24-(b+2)%4*8&255,B=E<<16|C<<8|j,D=0;D<4&&b+D*.75<p;D++)y.push(m.charAt(B>>>6*(3-D)&63));var F=m.charAt(64);if(F)for(;y.length%4;)y.push(F);return y.join("")},parse:function(u,f){f===void 0&&(f=!0);var d=u.length,p=f?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var y=0;y<p.length;y++)m[p.charCodeAt(y)]=y}var b=p.charAt(64);if(b){var E=u.indexOf(b);E!==-1&&(d=E)}return c(u,d,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function c(u,f,d){for(var p=[],m=0,y=0;y<f;y++)if(y%4){var b=d[u.charCodeAt(y-1)]<<y%4*2,E=d[u.charCodeAt(y)]>>>6-y%4*2,C=b|E;p[m>>>2]|=C<<24-m%4*8,m++}return o.create(p,m)}})(),s.enc.Base64url})})(encBase64url$1)),encBase64url$1.exports}var md5$1={exports:{}},md5=md5$1.exports,hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(md5,function(s){return(function(r){var a=s,o=a.lib,l=o.WordArray,c=o.Hasher,u=a.algo,f=[];(function(){for(var E=0;E<64;E++)f[E]=r.abs(r.sin(E+1))*4294967296|0})();var d=u.MD5=c.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(E,C){for(var j=0;j<16;j++){var B=C+j,D=E[B];E[B]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}var F=this._hash.words,q=E[C+0],V=E[C+1],ee=E[C+2],Q=E[C+3],W=E[C+4],Z=E[C+5],z=E[C+6],O=E[C+7],k=E[C+8],v=E[C+9],S=E[C+10],N=E[C+11],R=E[C+12],T=E[C+13],M=E[C+14],I=E[C+15],$=F[0],A=F[1],L=F[2],Y=F[3];$=p($,A,L,Y,q,7,f[0]),Y=p(Y,$,A,L,V,12,f[1]),L=p(L,Y,$,A,ee,17,f[2]),A=p(A,L,Y,$,Q,22,f[3]),$=p($,A,L,Y,W,7,f[4]),Y=p(Y,$,A,L,Z,12,f[5]),L=p(L,Y,$,A,z,17,f[6]),A=p(A,L,Y,$,O,22,f[7]),$=p($,A,L,Y,k,7,f[8]),Y=p(Y,$,A,L,v,12,f[9]),L=p(L,Y,$,A,S,17,f[10]),A=p(A,L,Y,$,N,22,f[11]),$=p($,A,L,Y,R,7,f[12]),Y=p(Y,$,A,L,T,12,f[13]),L=p(L,Y,$,A,M,17,f[14]),A=p(A,L,Y,$,I,22,f[15]),$=m($,A,L,Y,V,5,f[16]),Y=m(Y,$,A,L,z,9,f[17]),L=m(L,Y,$,A,N,14,f[18]),A=m(A,L,Y,$,q,20,f[19]),$=m($,A,L,Y,Z,5,f[20]),Y=m(Y,$,A,L,S,9,f[21]),L=m(L,Y,$,A,I,14,f[22]),A=m(A,L,Y,$,W,20,f[23]),$=m($,A,L,Y,v,5,f[24]),Y=m(Y,$,A,L,M,9,f[25]),L=m(L,Y,$,A,Q,14,f[26]),A=m(A,L,Y,$,k,20,f[27]),$=m($,A,L,Y,T,5,f[28]),Y=m(Y,$,A,L,ee,9,f[29]),L=m(L,Y,$,A,O,14,f[30]),A=m(A,L,Y,$,R,20,f[31]),$=y($,A,L,Y,Z,4,f[32]),Y=y(Y,$,A,L,k,11,f[33]),L=y(L,Y,$,A,N,16,f[34]),A=y(A,L,Y,$,M,23,f[35]),$=y($,A,L,Y,V,4,f[36]),Y=y(Y,$,A,L,W,11,f[37]),L=y(L,Y,$,A,O,16,f[38]),A=y(A,L,Y,$,S,23,f[39]),$=y($,A,L,Y,T,4,f[40]),Y=y(Y,$,A,L,q,11,f[41]),L=y(L,Y,$,A,Q,16,f[42]),A=y(A,L,Y,$,z,23,f[43]),$=y($,A,L,Y,v,4,f[44]),Y=y(Y,$,A,L,R,11,f[45]),L=y(L,Y,$,A,I,16,f[46]),A=y(A,L,Y,$,ee,23,f[47]),$=b($,A,L,Y,q,6,f[48]),Y=b(Y,$,A,L,O,10,f[49]),L=b(L,Y,$,A,M,15,f[50]),A=b(A,L,Y,$,Z,21,f[51]),$=b($,A,L,Y,R,6,f[52]),Y=b(Y,$,A,L,Q,10,f[53]),L=b(L,Y,$,A,S,15,f[54]),A=b(A,L,Y,$,V,21,f[55]),$=b($,A,L,Y,k,6,f[56]),Y=b(Y,$,A,L,I,10,f[57]),L=b(L,Y,$,A,z,15,f[58]),A=b(A,L,Y,$,T,21,f[59]),$=b($,A,L,Y,W,6,f[60]),Y=b(Y,$,A,L,N,10,f[61]),L=b(L,Y,$,A,ee,15,f[62]),A=b(A,L,Y,$,v,21,f[63]),F[0]=F[0]+$|0,F[1]=F[1]+A|0,F[2]=F[2]+L|0,F[3]=F[3]+Y|0},_doFinalize:function(){var E=this._data,C=E.words,j=this._nDataBytes*8,B=E.sigBytes*8;C[B>>>5]|=128<<24-B%32;var D=r.floor(j/4294967296),F=j;C[(B+64>>>9<<4)+15]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,C[(B+64>>>9<<4)+14]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360,E.sigBytes=(C.length+1)*4,this._process();for(var q=this._hash,V=q.words,ee=0;ee<4;ee++){var Q=V[ee];V[ee]=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360}return q},clone:function(){var E=c.clone.call(this);return E._hash=this._hash.clone(),E}});function p(E,C,j,B,D,F,q){var V=E+(C&j|~C&B)+D+q;return(V<<F|V>>>32-F)+C}function m(E,C,j,B,D,F,q){var V=E+(C&B|j&~B)+D+q;return(V<<F|V>>>32-F)+C}function y(E,C,j,B,D,F,q){var V=E+(C^j^B)+D+q;return(V<<F|V>>>32-F)+C}function b(E,C,j,B,D,F,q){var V=E+(j^(C|~B))+D+q;return(V<<F|V>>>32-F)+C}a.MD5=c._createHelper(d),a.HmacMD5=c._createHmacHelper(d)})(Math),s.MD5})})(md5$1)),md5$1.exports}var sha1$1={exports:{}},sha1=sha1$1.exports,hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(sha1,function(s){return(function(){var r=s,a=r.lib,o=a.WordArray,l=a.Hasher,c=r.algo,u=[],f=c.SHA1=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,p){for(var m=this._hash.words,y=m[0],b=m[1],E=m[2],C=m[3],j=m[4],B=0;B<80;B++){if(B<16)u[B]=d[p+B]|0;else{var D=u[B-3]^u[B-8]^u[B-14]^u[B-16];u[B]=D<<1|D>>>31}var F=(y<<5|y>>>27)+j+u[B];B<20?F+=(b&E|~b&C)+1518500249:B<40?F+=(b^E^C)+1859775393:B<60?F+=(b&E|b&C|E&C)-1894007588:F+=(b^E^C)-899497514,j=C,C=E,E=b<<30|b>>>2,b=y,y=F}m[0]=m[0]+y|0,m[1]=m[1]+b|0,m[2]=m[2]+E|0,m[3]=m[3]+C|0,m[4]=m[4]+j|0},_doFinalize:function(){var d=this._data,p=d.words,m=this._nDataBytes*8,y=d.sigBytes*8;return p[y>>>5]|=128<<24-y%32,p[(y+64>>>9<<4)+14]=Math.floor(m/4294967296),p[(y+64>>>9<<4)+15]=m,d.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var d=l.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA1=l._createHelper(f),r.HmacSHA1=l._createHmacHelper(f)})(),s.SHA1})})(sha1$1)),sha1$1.exports}var sha256$6={exports:{}},sha256$5=sha256$6.exports,hasRequiredSha256$1;function requireSha256$1(){return hasRequiredSha256$1||(hasRequiredSha256$1=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(sha256$5,function(s){return(function(r){var a=s,o=a.lib,l=o.WordArray,c=o.Hasher,u=a.algo,f=[],d=[];(function(){function y(j){for(var B=r.sqrt(j),D=2;D<=B;D++)if(!(j%D))return!1;return!0}function b(j){return(j-(j|0))*4294967296|0}for(var E=2,C=0;C<64;)y(E)&&(C<8&&(f[C]=b(r.pow(E,1/2))),d[C]=b(r.pow(E,1/3)),C++),E++})();var p=[],m=u.SHA256=c.extend({_doReset:function(){this._hash=new l.init(f.slice(0))},_doProcessBlock:function(y,b){for(var E=this._hash.words,C=E[0],j=E[1],B=E[2],D=E[3],F=E[4],q=E[5],V=E[6],ee=E[7],Q=0;Q<64;Q++){if(Q<16)p[Q]=y[b+Q]|0;else{var W=p[Q-15],Z=(W<<25|W>>>7)^(W<<14|W>>>18)^W>>>3,z=p[Q-2],O=(z<<15|z>>>17)^(z<<13|z>>>19)^z>>>10;p[Q]=Z+p[Q-7]+O+p[Q-16]}var k=F&q^~F&V,v=C&j^C&B^j&B,S=(C<<30|C>>>2)^(C<<19|C>>>13)^(C<<10|C>>>22),N=(F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25),R=ee+N+k+d[Q]+p[Q],T=S+v;ee=V,V=q,q=F,F=D+R|0,D=B,B=j,j=C,C=R+T|0}E[0]=E[0]+C|0,E[1]=E[1]+j|0,E[2]=E[2]+B|0,E[3]=E[3]+D|0,E[4]=E[4]+F|0,E[5]=E[5]+q|0,E[6]=E[6]+V|0,E[7]=E[7]+ee|0},_doFinalize:function(){var y=this._data,b=y.words,E=this._nDataBytes*8,C=y.sigBytes*8;return b[C>>>5]|=128<<24-C%32,b[(C+64>>>9<<4)+14]=r.floor(E/4294967296),b[(C+64>>>9<<4)+15]=E,y.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var y=c.clone.call(this);return y._hash=this._hash.clone(),y}});a.SHA256=c._createHelper(m),a.HmacSHA256=c._createHmacHelper(m)})(Math),s.SHA256})})(sha256$6)),sha256$6.exports}var sha224$2={exports:{}},sha224$1=sha224$2.exports,hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireSha256$1())})(sha224$1,function(s){return(function(){var r=s,a=r.lib,o=a.WordArray,l=r.algo,c=l.SHA256,u=l.SHA224=c.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var f=c._doFinalize.call(this);return f.sigBytes-=4,f}});r.SHA224=c._createHelper(u),r.HmacSHA224=c._createHmacHelper(u)})(),s.SHA224})})(sha224$2)),sha224$2.exports}var sha512$3={exports:{}},sha512$2=sha512$3.exports,hasRequiredSha512$1;function requireSha512$1(){return hasRequiredSha512$1||(hasRequiredSha512$1=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireX64Core())})(sha512$2,function(s){return(function(){var r=s,a=r.lib,o=a.Hasher,l=r.x64,c=l.Word,u=l.WordArray,f=r.algo;function d(){return c.create.apply(c,arguments)}var p=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],m=[];(function(){for(var b=0;b<80;b++)m[b]=d()})();var y=f.SHA512=o.extend({_doReset:function(){this._hash=new u.init([new c.init(1779033703,4089235720),new c.init(3144134277,2227873595),new c.init(1013904242,4271175723),new c.init(2773480762,1595750129),new c.init(1359893119,2917565137),new c.init(2600822924,725511199),new c.init(528734635,4215389547),new c.init(1541459225,327033209)])},_doProcessBlock:function(b,E){for(var C=this._hash.words,j=C[0],B=C[1],D=C[2],F=C[3],q=C[4],V=C[5],ee=C[6],Q=C[7],W=j.high,Z=j.low,z=B.high,O=B.low,k=D.high,v=D.low,S=F.high,N=F.low,R=q.high,T=q.low,M=V.high,I=V.low,$=ee.high,A=ee.low,L=Q.high,Y=Q.low,oe=W,J=Z,U=z,G=O,ae=k,he=v,le=S,te=N,pe=R,xe=T,be=M,ce=I,re=$,ie=A,fe=L,ye=Y,we=0;we<80;we++){var Re,Me,ke=m[we];if(we<16)Me=ke.high=b[E+we*2]|0,Re=ke.low=b[E+we*2+1]|0;else{var Le=m[we-15],Fe=Le.high,Te=Le.low,Be=(Fe>>>1|Te<<31)^(Fe>>>8|Te<<24)^Fe>>>7,ze=(Te>>>1|Fe<<31)^(Te>>>8|Fe<<24)^(Te>>>7|Fe<<25),de=m[we-2],ne=de.high,se=de.low,me=(ne>>>19|se<<13)^(ne<<3|se>>>29)^ne>>>6,Ee=(se>>>19|ne<<13)^(se<<3|ne>>>29)^(se>>>6|ne<<26),_e=m[we-7],ve=_e.high,Ae=_e.low,Oe=m[we-16],Ue=Oe.high,Ke=Oe.low;Re=ze+Ae,Me=Be+ve+(Re>>>0<ze>>>0?1:0),Re=Re+Ee,Me=Me+me+(Re>>>0<Ee>>>0?1:0),Re=Re+Ke,Me=Me+Ue+(Re>>>0<Ke>>>0?1:0),ke.high=Me,ke.low=Re}var We=pe&be^~pe&re,Ve=xe&ce^~xe&ie,xt=oe&U^oe&ae^U&ae,lt=J&G^J&he^G&he,Xe=(oe>>>28|J<<4)^(oe<<30|J>>>2)^(oe<<25|J>>>7),St=(J>>>28|oe<<4)^(J<<30|oe>>>2)^(J<<25|oe>>>7),ct=(pe>>>14|xe<<18)^(pe>>>18|xe<<14)^(pe<<23|xe>>>9),Pe=(xe>>>14|pe<<18)^(xe>>>18|pe<<14)^(xe<<23|pe>>>9),Qe=p[we],Ze=Qe.high,Ye=Qe.low,at=ye+Pe,it=fe+ct+(at>>>0<ye>>>0?1:0),at=at+Ve,it=it+We+(at>>>0<Ve>>>0?1:0),at=at+Ye,it=it+Ze+(at>>>0<Ye>>>0?1:0),at=at+Re,it=it+Me+(at>>>0<Re>>>0?1:0),et=St+lt,Ct=Xe+xt+(et>>>0<St>>>0?1:0);fe=re,ye=ie,re=be,ie=ce,be=pe,ce=xe,xe=te+at|0,pe=le+it+(xe>>>0<te>>>0?1:0)|0,le=ae,te=he,ae=U,he=G,U=oe,G=J,J=at+et|0,oe=it+Ct+(J>>>0<at>>>0?1:0)|0}Z=j.low=Z+J,j.high=W+oe+(Z>>>0<J>>>0?1:0),O=B.low=O+G,B.high=z+U+(O>>>0<G>>>0?1:0),v=D.low=v+he,D.high=k+ae+(v>>>0<he>>>0?1:0),N=F.low=N+te,F.high=S+le+(N>>>0<te>>>0?1:0),T=q.low=T+xe,q.high=R+pe+(T>>>0<xe>>>0?1:0),I=V.low=I+ce,V.high=M+be+(I>>>0<ce>>>0?1:0),A=ee.low=A+ie,ee.high=$+re+(A>>>0<ie>>>0?1:0),Y=Q.low=Y+ye,Q.high=L+fe+(Y>>>0<ye>>>0?1:0)},_doFinalize:function(){var b=this._data,E=b.words,C=this._nDataBytes*8,j=b.sigBytes*8;E[j>>>5]|=128<<24-j%32,E[(j+128>>>10<<5)+30]=Math.floor(C/4294967296),E[(j+128>>>10<<5)+31]=C,b.sigBytes=E.length*4,this._process();var B=this._hash.toX32();return B},clone:function(){var b=o.clone.call(this);return b._hash=this._hash.clone(),b},blockSize:1024/32});r.SHA512=o._createHelper(y),r.HmacSHA512=o._createHmacHelper(y)})(),s.SHA512})})(sha512$3)),sha512$3.exports}var sha384$2={exports:{}},sha384$1=sha384$2.exports,hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireX64Core(),requireSha512$1())})(sha384$1,function(s){return(function(){var r=s,a=r.x64,o=a.Word,l=a.WordArray,c=r.algo,u=c.SHA512,f=c.SHA384=u.extend({_doReset:function(){this._hash=new l.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var d=u._doFinalize.call(this);return d.sigBytes-=16,d}});r.SHA384=u._createHelper(f),r.HmacSHA384=u._createHmacHelper(f)})(),s.SHA384})})(sha384$2)),sha384$2.exports}var sha3$1={exports:{}},sha3=sha3$1.exports,hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireX64Core())})(sha3,function(s){return(function(r){var a=s,o=a.lib,l=o.WordArray,c=o.Hasher,u=a.x64,f=u.Word,d=a.algo,p=[],m=[],y=[];(function(){for(var C=1,j=0,B=0;B<24;B++){p[C+5*j]=(B+1)*(B+2)/2%64;var D=j%5,F=(2*C+3*j)%5;C=D,j=F}for(var C=0;C<5;C++)for(var j=0;j<5;j++)m[C+5*j]=j+(2*C+3*j)%5*5;for(var q=1,V=0;V<24;V++){for(var ee=0,Q=0,W=0;W<7;W++){if(q&1){var Z=(1<<W)-1;Z<32?Q^=1<<Z:ee^=1<<Z-32}q&128?q=q<<1^113:q<<=1}y[V]=f.create(ee,Q)}})();var b=[];(function(){for(var C=0;C<25;C++)b[C]=f.create()})();var E=d.SHA3=c.extend({cfg:c.cfg.extend({outputLength:512}),_doReset:function(){for(var C=this._state=[],j=0;j<25;j++)C[j]=new f.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(C,j){for(var B=this._state,D=this.blockSize/2,F=0;F<D;F++){var q=C[j+2*F],V=C[j+2*F+1];q=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360,V=(V<<8|V>>>24)&16711935|(V<<24|V>>>8)&4278255360;var ee=B[F];ee.high^=V,ee.low^=q}for(var Q=0;Q<24;Q++){for(var W=0;W<5;W++){for(var Z=0,z=0,O=0;O<5;O++){var ee=B[W+5*O];Z^=ee.high,z^=ee.low}var k=b[W];k.high=Z,k.low=z}for(var W=0;W<5;W++)for(var v=b[(W+4)%5],S=b[(W+1)%5],N=S.high,R=S.low,Z=v.high^(N<<1|R>>>31),z=v.low^(R<<1|N>>>31),O=0;O<5;O++){var ee=B[W+5*O];ee.high^=Z,ee.low^=z}for(var T=1;T<25;T++){var Z,z,ee=B[T],M=ee.high,I=ee.low,$=p[T];$<32?(Z=M<<$|I>>>32-$,z=I<<$|M>>>32-$):(Z=I<<$-32|M>>>64-$,z=M<<$-32|I>>>64-$);var A=b[m[T]];A.high=Z,A.low=z}var L=b[0],Y=B[0];L.high=Y.high,L.low=Y.low;for(var W=0;W<5;W++)for(var O=0;O<5;O++){var T=W+5*O,ee=B[T],oe=b[T],J=b[(W+1)%5+5*O],U=b[(W+2)%5+5*O];ee.high=oe.high^~J.high&U.high,ee.low=oe.low^~J.low&U.low}var ee=B[0],G=y[Q];ee.high^=G.high,ee.low^=G.low}},_doFinalize:function(){var C=this._data,j=C.words;this._nDataBytes*8;var B=C.sigBytes*8,D=this.blockSize*32;j[B>>>5]|=1<<24-B%32,j[(r.ceil((B+1)/D)*D>>>5)-1]|=128,C.sigBytes=j.length*4,this._process();for(var F=this._state,q=this.cfg.outputLength/8,V=q/8,ee=[],Q=0;Q<V;Q++){var W=F[Q],Z=W.high,z=W.low;Z=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360,z=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360,ee.push(z),ee.push(Z)}return new l.init(ee,q)},clone:function(){for(var C=c.clone.call(this),j=C._state=this._state.slice(0),B=0;B<25;B++)j[B]=j[B].clone();return C}});a.SHA3=c._createHelper(E),a.HmacSHA3=c._createHmacHelper(E)})(Math),s.SHA3})})(sha3$1)),sha3$1.exports}var ripemd160$4={exports:{}},ripemd160$3=ripemd160$4.exports,hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(ripemd160$3,function(s){return(function(r){var a=s,o=a.lib,l=o.WordArray,c=o.Hasher,u=a.algo,f=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),p=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),m=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),y=l.create([0,1518500249,1859775393,2400959708,2840853838]),b=l.create([1352829926,1548603684,1836072691,2053994217,0]),E=u.RIPEMD160=c.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(V,ee){for(var Q=0;Q<16;Q++){var W=ee+Q,Z=V[W];V[W]=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360}var z=this._hash.words,O=y.words,k=b.words,v=f.words,S=d.words,N=p.words,R=m.words,T,M,I,$,A,L,Y,oe,J,U;L=T=z[0],Y=M=z[1],oe=I=z[2],J=$=z[3],U=A=z[4];for(var G,Q=0;Q<80;Q+=1)G=T+V[ee+v[Q]]|0,Q<16?G+=C(M,I,$)+O[0]:Q<32?G+=j(M,I,$)+O[1]:Q<48?G+=B(M,I,$)+O[2]:Q<64?G+=D(M,I,$)+O[3]:G+=F(M,I,$)+O[4],G=G|0,G=q(G,N[Q]),G=G+A|0,T=A,A=$,$=q(I,10),I=M,M=G,G=L+V[ee+S[Q]]|0,Q<16?G+=F(Y,oe,J)+k[0]:Q<32?G+=D(Y,oe,J)+k[1]:Q<48?G+=B(Y,oe,J)+k[2]:Q<64?G+=j(Y,oe,J)+k[3]:G+=C(Y,oe,J)+k[4],G=G|0,G=q(G,R[Q]),G=G+U|0,L=U,U=J,J=q(oe,10),oe=Y,Y=G;G=z[1]+I+J|0,z[1]=z[2]+$+U|0,z[2]=z[3]+A+L|0,z[3]=z[4]+T+Y|0,z[4]=z[0]+M+oe|0,z[0]=G},_doFinalize:function(){var V=this._data,ee=V.words,Q=this._nDataBytes*8,W=V.sigBytes*8;ee[W>>>5]|=128<<24-W%32,ee[(W+64>>>9<<4)+14]=(Q<<8|Q>>>24)&16711935|(Q<<24|Q>>>8)&4278255360,V.sigBytes=(ee.length+1)*4,this._process();for(var Z=this._hash,z=Z.words,O=0;O<5;O++){var k=z[O];z[O]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return Z},clone:function(){var V=c.clone.call(this);return V._hash=this._hash.clone(),V}});function C(V,ee,Q){return V^ee^Q}function j(V,ee,Q){return V&ee|~V&Q}function B(V,ee,Q){return(V|~ee)^Q}function D(V,ee,Q){return V&Q|ee&~Q}function F(V,ee,Q){return V^(ee|~Q)}function q(V,ee){return V<<ee|V>>>32-ee}a.RIPEMD160=c._createHelper(E),a.HmacRIPEMD160=c._createHmacHelper(E)})(),s.RIPEMD160})})(ripemd160$4)),ripemd160$4.exports}var hmac$6={exports:{}},hmac$5=hmac$6.exports,hasRequiredHmac$1;function requireHmac$1(){return hasRequiredHmac$1||(hasRequiredHmac$1=1,(function(t,e){(function(s,r){t.exports=r(requireCore())})(hmac$5,function(s){(function(){var r=s,a=r.lib,o=a.Base,l=r.enc,c=l.Utf8,u=r.algo;u.HMAC=o.extend({init:function(f,d){f=this._hasher=new f.init,typeof d=="string"&&(d=c.parse(d));var p=f.blockSize,m=p*4;d.sigBytes>m&&(d=f.finalize(d)),d.clamp();for(var y=this._oKey=d.clone(),b=this._iKey=d.clone(),E=y.words,C=b.words,j=0;j<p;j++)E[j]^=1549556828,C[j]^=909522486;y.sigBytes=b.sigBytes=m,this.reset()},reset:function(){var f=this._hasher;f.reset(),f.update(this._iKey)},update:function(f){return this._hasher.update(f),this},finalize:function(f){var d=this._hasher,p=d.finalize(f);d.reset();var m=d.finalize(this._oKey.clone().concat(p));return m}})})()})})(hmac$6)),hmac$6.exports}var pbkdf2$2={exports:{}},pbkdf2$1=pbkdf2$2.exports,hasRequiredPbkdf2$1;function requirePbkdf2$1(){return hasRequiredPbkdf2$1||(hasRequiredPbkdf2$1=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireSha256$1(),requireHmac$1())})(pbkdf2$1,function(s){return(function(){var r=s,a=r.lib,o=a.Base,l=a.WordArray,c=r.algo,u=c.SHA256,f=c.HMAC,d=c.PBKDF2=o.extend({cfg:o.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(p){this.cfg=this.cfg.extend(p)},compute:function(p,m){for(var y=this.cfg,b=f.create(y.hasher,p),E=l.create(),C=l.create([1]),j=E.words,B=C.words,D=y.keySize,F=y.iterations;j.length<D;){var q=b.update(m).finalize(C);b.reset();for(var V=q.words,ee=V.length,Q=q,W=1;W<F;W++){Q=b.finalize(Q),b.reset();for(var Z=Q.words,z=0;z<ee;z++)V[z]^=Z[z]}E.concat(q),B[0]++}return E.sigBytes=D*4,E}});r.PBKDF2=function(p,m,y){return d.create(y).compute(p,m)}})(),s.PBKDF2})})(pbkdf2$2)),pbkdf2$2.exports}var evpkdf$1={exports:{}},evpkdf=evpkdf$1.exports,hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireSha1(),requireHmac$1())})(evpkdf,function(s){return(function(){var r=s,a=r.lib,o=a.Base,l=a.WordArray,c=r.algo,u=c.MD5,f=c.EvpKDF=o.extend({cfg:o.extend({keySize:128/32,hasher:u,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,p){for(var m,y=this.cfg,b=y.hasher.create(),E=l.create(),C=E.words,j=y.keySize,B=y.iterations;C.length<j;){m&&b.update(m),m=b.update(d).finalize(p),b.reset();for(var D=1;D<B;D++)m=b.finalize(m),b.reset();E.concat(m)}return E.sigBytes=j*4,E}});r.EvpKDF=function(d,p,m){return f.create(m).compute(d,p)}})(),s.EvpKDF})})(evpkdf$1)),evpkdf$1.exports}var cipherCore$1={exports:{}},cipherCore=cipherCore$1.exports,hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireEvpkdf())})(cipherCore,function(s){s.lib.Cipher||(function(r){var a=s,o=a.lib,l=o.Base,c=o.WordArray,u=o.BufferedBlockAlgorithm,f=a.enc;f.Utf8;var d=f.Base64,p=a.algo,m=p.EvpKDF,y=o.Cipher=u.extend({cfg:l.extend(),createEncryptor:function(Z,z){return this.create(this._ENC_XFORM_MODE,Z,z)},createDecryptor:function(Z,z){return this.create(this._DEC_XFORM_MODE,Z,z)},init:function(Z,z,O){this.cfg=this.cfg.extend(O),this._xformMode=Z,this._key=z,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(Z){return this._append(Z),this._process()},finalize:function(Z){Z&&this._append(Z);var z=this._doFinalize();return z},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function Z(z){return typeof z=="string"?W:V}return function(z){return{encrypt:function(O,k,v){return Z(k).encrypt(z,O,k,v)},decrypt:function(O,k,v){return Z(k).decrypt(z,O,k,v)}}}})()});o.StreamCipher=y.extend({_doFinalize:function(){var Z=this._process(!0);return Z},blockSize:1});var b=a.mode={},E=o.BlockCipherMode=l.extend({createEncryptor:function(Z,z){return this.Encryptor.create(Z,z)},createDecryptor:function(Z,z){return this.Decryptor.create(Z,z)},init:function(Z,z){this._cipher=Z,this._iv=z}}),C=b.CBC=(function(){var Z=E.extend();Z.Encryptor=Z.extend({processBlock:function(O,k){var v=this._cipher,S=v.blockSize;z.call(this,O,k,S),v.encryptBlock(O,k),this._prevBlock=O.slice(k,k+S)}}),Z.Decryptor=Z.extend({processBlock:function(O,k){var v=this._cipher,S=v.blockSize,N=O.slice(k,k+S);v.decryptBlock(O,k),z.call(this,O,k,S),this._prevBlock=N}});function z(O,k,v){var S,N=this._iv;N?(S=N,this._iv=r):S=this._prevBlock;for(var R=0;R<v;R++)O[k+R]^=S[R]}return Z})(),j=a.pad={},B=j.Pkcs7={pad:function(Z,z){for(var O=z*4,k=O-Z.sigBytes%O,v=k<<24|k<<16|k<<8|k,S=[],N=0;N<k;N+=4)S.push(v);var R=c.create(S,k);Z.concat(R)},unpad:function(Z){var z=Z.words[Z.sigBytes-1>>>2]&255;Z.sigBytes-=z}};o.BlockCipher=y.extend({cfg:y.cfg.extend({mode:C,padding:B}),reset:function(){var Z;y.reset.call(this);var z=this.cfg,O=z.iv,k=z.mode;this._xformMode==this._ENC_XFORM_MODE?Z=k.createEncryptor:(Z=k.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==Z?this._mode.init(this,O&&O.words):(this._mode=Z.call(k,this,O&&O.words),this._mode.__creator=Z)},_doProcessBlock:function(Z,z){this._mode.processBlock(Z,z)},_doFinalize:function(){var Z,z=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(z.pad(this._data,this.blockSize),Z=this._process(!0)):(Z=this._process(!0),z.unpad(Z)),Z},blockSize:128/32});var D=o.CipherParams=l.extend({init:function(Z){this.mixIn(Z)},toString:function(Z){return(Z||this.formatter).stringify(this)}}),F=a.format={},q=F.OpenSSL={stringify:function(Z){var z,O=Z.ciphertext,k=Z.salt;return k?z=c.create([1398893684,1701076831]).concat(k).concat(O):z=O,z.toString(d)},parse:function(Z){var z,O=d.parse(Z),k=O.words;return k[0]==1398893684&&k[1]==1701076831&&(z=c.create(k.slice(2,4)),k.splice(0,4),O.sigBytes-=16),D.create({ciphertext:O,salt:z})}},V=o.SerializableCipher=l.extend({cfg:l.extend({format:q}),encrypt:function(Z,z,O,k){k=this.cfg.extend(k);var v=Z.createEncryptor(O,k),S=v.finalize(z),N=v.cfg;return D.create({ciphertext:S,key:O,iv:N.iv,algorithm:Z,mode:N.mode,padding:N.padding,blockSize:Z.blockSize,formatter:k.format})},decrypt:function(Z,z,O,k){k=this.cfg.extend(k),z=this._parse(z,k.format);var v=Z.createDecryptor(O,k).finalize(z.ciphertext);return v},_parse:function(Z,z){return typeof Z=="string"?z.parse(Z,this):Z}}),ee=a.kdf={},Q=ee.OpenSSL={execute:function(Z,z,O,k,v){if(k||(k=c.random(64/8)),v)var S=m.create({keySize:z+O,hasher:v}).compute(Z,k);else var S=m.create({keySize:z+O}).compute(Z,k);var N=c.create(S.words.slice(z),O*4);return S.sigBytes=z*4,D.create({key:S,iv:N,salt:k})}},W=o.PasswordBasedCipher=V.extend({cfg:V.cfg.extend({kdf:Q}),encrypt:function(Z,z,O,k){k=this.cfg.extend(k);var v=k.kdf.execute(O,Z.keySize,Z.ivSize,k.salt,k.hasher);k.iv=v.iv;var S=V.encrypt.call(this,Z,z,v.key,k);return S.mixIn(v),S},decrypt:function(Z,z,O,k){k=this.cfg.extend(k),z=this._parse(z,k.format);var v=k.kdf.execute(O,Z.keySize,Z.ivSize,z.salt,k.hasher);k.iv=v.iv;var S=V.decrypt.call(this,Z,z,v.key,k);return S}})})()})})(cipherCore$1)),cipherCore$1.exports}var modeCfb$1={exports:{}},modeCfb=modeCfb$1.exports,hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(modeCfb,function(s){return s.mode.CFB=(function(){var r=s.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize;a.call(this,o,l,u,c),this._prevBlock=o.slice(l,l+u)}}),r.Decryptor=r.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,f=o.slice(l,l+u);a.call(this,o,l,u,c),this._prevBlock=f}});function a(o,l,c,u){var f,d=this._iv;d?(f=d.slice(0),this._iv=void 0):f=this._prevBlock,u.encryptBlock(f,0);for(var p=0;p<c;p++)o[l+p]^=f[p]}return r})(),s.mode.CFB})})(modeCfb$1)),modeCfb$1.exports}var modeCtr$1={exports:{}},modeCtr=modeCtr$1.exports,hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(modeCtr,function(s){return s.mode.CTR=(function(){var r=s.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0);var p=d.slice(0);c.encryptBlock(p,0),d[u-1]=d[u-1]+1|0;for(var m=0;m<u;m++)o[l+m]^=p[m]}});return r.Decryptor=a,r})(),s.mode.CTR})})(modeCtr$1)),modeCtr$1.exports}var modeCtrGladman$1={exports:{}},modeCtrGladman=modeCtrGladman$1.exports,hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(modeCtrGladman,function(s){return s.mode.CTRGladman=(function(){var r=s.lib.BlockCipherMode.extend();function a(c){if((c>>24&255)===255){var u=c>>16&255,f=c>>8&255,d=c&255;u===255?(u=0,f===255?(f=0,d===255?d=0:++d):++f):++u,c=0,c+=u<<16,c+=f<<8,c+=d}else c+=1<<24;return c}function o(c){return(c[0]=a(c[0]))===0&&(c[1]=a(c[1])),c}var l=r.Encryptor=r.extend({processBlock:function(c,u){var f=this._cipher,d=f.blockSize,p=this._iv,m=this._counter;p&&(m=this._counter=p.slice(0),this._iv=void 0),o(m);var y=m.slice(0);f.encryptBlock(y,0);for(var b=0;b<d;b++)c[u+b]^=y[b]}});return r.Decryptor=l,r})(),s.mode.CTRGladman})})(modeCtrGladman$1)),modeCtrGladman$1.exports}var modeOfb$1={exports:{}},modeOfb=modeOfb$1.exports,hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(modeOfb,function(s){return s.mode.OFB=(function(){var r=s.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(o,l){var c=this._cipher,u=c.blockSize,f=this._iv,d=this._keystream;f&&(d=this._keystream=f.slice(0),this._iv=void 0),c.encryptBlock(d,0);for(var p=0;p<u;p++)o[l+p]^=d[p]}});return r.Decryptor=a,r})(),s.mode.OFB})})(modeOfb$1)),modeOfb$1.exports}var modeEcb$1={exports:{}},modeEcb=modeEcb$1.exports,hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(modeEcb,function(s){return s.mode.ECB=(function(){var r=s.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(a,o){this._cipher.encryptBlock(a,o)}}),r.Decryptor=r.extend({processBlock:function(a,o){this._cipher.decryptBlock(a,o)}}),r})(),s.mode.ECB})})(modeEcb$1)),modeEcb$1.exports}var padAnsix923$1={exports:{}},padAnsix923=padAnsix923$1.exports,hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(padAnsix923,function(s){return s.pad.AnsiX923={pad:function(r,a){var o=r.sigBytes,l=a*4,c=l-o%l,u=o+c-1;r.clamp(),r.words[u>>>2]|=c<<24-u%4*8,r.sigBytes+=c},unpad:function(r){var a=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=a}},s.pad.Ansix923})})(padAnsix923$1)),padAnsix923$1.exports}var padIso10126$1={exports:{}},padIso10126=padIso10126$1.exports,hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(padIso10126,function(s){return s.pad.Iso10126={pad:function(r,a){var o=a*4,l=o-r.sigBytes%o;r.concat(s.lib.WordArray.random(l-1)).concat(s.lib.WordArray.create([l<<24],1))},unpad:function(r){var a=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=a}},s.pad.Iso10126})})(padIso10126$1)),padIso10126$1.exports}var padIso97971$1={exports:{}},padIso97971=padIso97971$1.exports,hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(padIso97971,function(s){return s.pad.Iso97971={pad:function(r,a){r.concat(s.lib.WordArray.create([2147483648],1)),s.pad.ZeroPadding.pad(r,a)},unpad:function(r){s.pad.ZeroPadding.unpad(r),r.sigBytes--}},s.pad.Iso97971})})(padIso97971$1)),padIso97971$1.exports}var padZeropadding$1={exports:{}},padZeropadding=padZeropadding$1.exports,hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(padZeropadding,function(s){return s.pad.ZeroPadding={pad:function(r,a){var o=a*4;r.clamp(),r.sigBytes+=o-(r.sigBytes%o||o)},unpad:function(r){for(var a=r.words,o=r.sigBytes-1,o=r.sigBytes-1;o>=0;o--)if(a[o>>>2]>>>24-o%4*8&255){r.sigBytes=o+1;break}}},s.pad.ZeroPadding})})(padZeropadding$1)),padZeropadding$1.exports}var padNopadding$1={exports:{}},padNopadding=padNopadding$1.exports,hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(padNopadding,function(s){return s.pad.NoPadding={pad:function(){},unpad:function(){}},s.pad.NoPadding})})(padNopadding$1)),padNopadding$1.exports}var formatHex$1={exports:{}},formatHex=formatHex$1.exports,hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireCipherCore())})(formatHex,function(s){return(function(r){var a=s,o=a.lib,l=o.CipherParams,c=a.enc,u=c.Hex,f=a.format;f.Hex={stringify:function(d){return d.ciphertext.toString(u)},parse:function(d){var p=u.parse(d);return l.create({ciphertext:p})}}})(),s.format.Hex})})(formatHex$1)),formatHex$1.exports}var aes$1={exports:{}},aes=aes$1.exports,hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(aes,function(s){return(function(){var r=s,a=r.lib,o=a.BlockCipher,l=r.algo,c=[],u=[],f=[],d=[],p=[],m=[],y=[],b=[],E=[],C=[];(function(){for(var D=[],F=0;F<256;F++)F<128?D[F]=F<<1:D[F]=F<<1^283;for(var q=0,V=0,F=0;F<256;F++){var ee=V^V<<1^V<<2^V<<3^V<<4;ee=ee>>>8^ee&255^99,c[q]=ee,u[ee]=q;var Q=D[q],W=D[Q],Z=D[W],z=D[ee]*257^ee*16843008;f[q]=z<<24|z>>>8,d[q]=z<<16|z>>>16,p[q]=z<<8|z>>>24,m[q]=z;var z=Z*16843009^W*65537^Q*257^q*16843008;y[ee]=z<<24|z>>>8,b[ee]=z<<16|z>>>16,E[ee]=z<<8|z>>>24,C[ee]=z,q?(q=Q^D[D[D[Z^Q]]],V^=D[D[V]]):q=V=1}})();var j=[0,1,2,4,8,16,32,64,128,27,54],B=l.AES=o.extend({_doReset:function(){var D;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var F=this._keyPriorReset=this._key,q=F.words,V=F.sigBytes/4,ee=this._nRounds=V+6,Q=(ee+1)*4,W=this._keySchedule=[],Z=0;Z<Q;Z++)Z<V?W[Z]=q[Z]:(D=W[Z-1],Z%V?V>6&&Z%V==4&&(D=c[D>>>24]<<24|c[D>>>16&255]<<16|c[D>>>8&255]<<8|c[D&255]):(D=D<<8|D>>>24,D=c[D>>>24]<<24|c[D>>>16&255]<<16|c[D>>>8&255]<<8|c[D&255],D^=j[Z/V|0]<<24),W[Z]=W[Z-V]^D);for(var z=this._invKeySchedule=[],O=0;O<Q;O++){var Z=Q-O;if(O%4)var D=W[Z];else var D=W[Z-4];O<4||Z<=4?z[O]=D:z[O]=y[c[D>>>24]]^b[c[D>>>16&255]]^E[c[D>>>8&255]]^C[c[D&255]]}}},encryptBlock:function(D,F){this._doCryptBlock(D,F,this._keySchedule,f,d,p,m,c)},decryptBlock:function(D,F){var q=D[F+1];D[F+1]=D[F+3],D[F+3]=q,this._doCryptBlock(D,F,this._invKeySchedule,y,b,E,C,u);var q=D[F+1];D[F+1]=D[F+3],D[F+3]=q},_doCryptBlock:function(D,F,q,V,ee,Q,W,Z){for(var z=this._nRounds,O=D[F]^q[0],k=D[F+1]^q[1],v=D[F+2]^q[2],S=D[F+3]^q[3],N=4,R=1;R<z;R++){var T=V[O>>>24]^ee[k>>>16&255]^Q[v>>>8&255]^W[S&255]^q[N++],M=V[k>>>24]^ee[v>>>16&255]^Q[S>>>8&255]^W[O&255]^q[N++],I=V[v>>>24]^ee[S>>>16&255]^Q[O>>>8&255]^W[k&255]^q[N++],$=V[S>>>24]^ee[O>>>16&255]^Q[k>>>8&255]^W[v&255]^q[N++];O=T,k=M,v=I,S=$}var T=(Z[O>>>24]<<24|Z[k>>>16&255]<<16|Z[v>>>8&255]<<8|Z[S&255])^q[N++],M=(Z[k>>>24]<<24|Z[v>>>16&255]<<16|Z[S>>>8&255]<<8|Z[O&255])^q[N++],I=(Z[v>>>24]<<24|Z[S>>>16&255]<<16|Z[O>>>8&255]<<8|Z[k&255])^q[N++],$=(Z[S>>>24]<<24|Z[O>>>16&255]<<16|Z[k>>>8&255]<<8|Z[v&255])^q[N++];D[F]=T,D[F+1]=M,D[F+2]=I,D[F+3]=$},keySize:256/32});r.AES=o._createHelper(B)})(),s.AES})})(aes$1)),aes$1.exports}var tripledes$1={exports:{}},tripledes=tripledes$1.exports,hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(tripledes,function(s){return(function(){var r=s,a=r.lib,o=a.WordArray,l=a.BlockCipher,c=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],f=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],p=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],m=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],y=c.DES=l.extend({_doReset:function(){for(var j=this._key,B=j.words,D=[],F=0;F<56;F++){var q=u[F]-1;D[F]=B[q>>>5]>>>31-q%32&1}for(var V=this._subKeys=[],ee=0;ee<16;ee++){for(var Q=V[ee]=[],W=d[ee],F=0;F<24;F++)Q[F/6|0]|=D[(f[F]-1+W)%28]<<31-F%6,Q[4+(F/6|0)]|=D[28+(f[F+24]-1+W)%28]<<31-F%6;Q[0]=Q[0]<<1|Q[0]>>>31;for(var F=1;F<7;F++)Q[F]=Q[F]>>>(F-1)*4+3;Q[7]=Q[7]<<5|Q[7]>>>27}for(var Z=this._invSubKeys=[],F=0;F<16;F++)Z[F]=V[15-F]},encryptBlock:function(j,B){this._doCryptBlock(j,B,this._subKeys)},decryptBlock:function(j,B){this._doCryptBlock(j,B,this._invSubKeys)},_doCryptBlock:function(j,B,D){this._lBlock=j[B],this._rBlock=j[B+1],b.call(this,4,252645135),b.call(this,16,65535),E.call(this,2,858993459),E.call(this,8,16711935),b.call(this,1,1431655765);for(var F=0;F<16;F++){for(var q=D[F],V=this._lBlock,ee=this._rBlock,Q=0,W=0;W<8;W++)Q|=p[W][((ee^q[W])&m[W])>>>0];this._lBlock=ee,this._rBlock=V^Q}var Z=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Z,b.call(this,1,1431655765),E.call(this,8,16711935),E.call(this,2,858993459),b.call(this,16,65535),b.call(this,4,252645135),j[B]=this._lBlock,j[B+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function b(j,B){var D=(this._lBlock>>>j^this._rBlock)&B;this._rBlock^=D,this._lBlock^=D<<j}function E(j,B){var D=(this._rBlock>>>j^this._lBlock)&B;this._lBlock^=D,this._rBlock^=D<<j}r.DES=l._createHelper(y);var C=c.TripleDES=l.extend({_doReset:function(){var j=this._key,B=j.words;if(B.length!==2&&B.length!==4&&B.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var D=B.slice(0,2),F=B.length<4?B.slice(0,2):B.slice(2,4),q=B.length<6?B.slice(0,2):B.slice(4,6);this._des1=y.createEncryptor(o.create(D)),this._des2=y.createEncryptor(o.create(F)),this._des3=y.createEncryptor(o.create(q))},encryptBlock:function(j,B){this._des1.encryptBlock(j,B),this._des2.decryptBlock(j,B),this._des3.encryptBlock(j,B)},decryptBlock:function(j,B){this._des3.decryptBlock(j,B),this._des2.encryptBlock(j,B),this._des1.decryptBlock(j,B)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=l._createHelper(C)})(),s.TripleDES})})(tripledes$1)),tripledes$1.exports}var rc4$1={exports:{}},rc4=rc4$1.exports,hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(rc4,function(s){return(function(){var r=s,a=r.lib,o=a.StreamCipher,l=r.algo,c=l.RC4=o.extend({_doReset:function(){for(var d=this._key,p=d.words,m=d.sigBytes,y=this._S=[],b=0;b<256;b++)y[b]=b;for(var b=0,E=0;b<256;b++){var C=b%m,j=p[C>>>2]>>>24-C%4*8&255;E=(E+y[b]+j)%256;var B=y[b];y[b]=y[E],y[E]=B}this._i=this._j=0},_doProcessBlock:function(d,p){d[p]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var d=this._S,p=this._i,m=this._j,y=0,b=0;b<4;b++){p=(p+1)%256,m=(m+d[p])%256;var E=d[p];d[p]=d[m],d[m]=E,y|=d[(d[p]+d[m])%256]<<24-b*8}return this._i=p,this._j=m,y}r.RC4=o._createHelper(c);var f=l.RC4Drop=c.extend({cfg:c.cfg.extend({drop:192}),_doReset:function(){c._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)u.call(this)}});r.RC4Drop=o._createHelper(f)})(),s.RC4})})(rc4$1)),rc4$1.exports}var rabbit$1={exports:{}},rabbit=rabbit$1.exports,hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(rabbit,function(s){return(function(){var r=s,a=r.lib,o=a.StreamCipher,l=r.algo,c=[],u=[],f=[],d=l.Rabbit=o.extend({_doReset:function(){for(var m=this._key.words,y=this.cfg.iv,b=0;b<4;b++)m[b]=(m[b]<<8|m[b]>>>24)&16711935|(m[b]<<24|m[b]>>>8)&4278255360;var E=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],C=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var b=0;b<4;b++)p.call(this);for(var b=0;b<8;b++)C[b]^=E[b+4&7];if(y){var j=y.words,B=j[0],D=j[1],F=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,q=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,V=F>>>16|q&4294901760,ee=q<<16|F&65535;C[0]^=F,C[1]^=V,C[2]^=q,C[3]^=ee,C[4]^=F,C[5]^=V,C[6]^=q,C[7]^=ee;for(var b=0;b<4;b++)p.call(this)}},_doProcessBlock:function(m,y){var b=this._X;p.call(this),c[0]=b[0]^b[5]>>>16^b[3]<<16,c[1]=b[2]^b[7]>>>16^b[5]<<16,c[2]=b[4]^b[1]>>>16^b[7]<<16,c[3]=b[6]^b[3]>>>16^b[1]<<16;for(var E=0;E<4;E++)c[E]=(c[E]<<8|c[E]>>>24)&16711935|(c[E]<<24|c[E]>>>8)&4278255360,m[y+E]^=c[E]},blockSize:128/32,ivSize:64/32});function p(){for(var m=this._X,y=this._C,b=0;b<8;b++)u[b]=y[b];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<u[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<u[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<u[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<u[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<u[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<u[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<u[6]>>>0?1:0)|0,this._b=y[7]>>>0<u[7]>>>0?1:0;for(var b=0;b<8;b++){var E=m[b]+y[b],C=E&65535,j=E>>>16,B=((C*C>>>17)+C*j>>>15)+j*j,D=((E&4294901760)*E|0)+((E&65535)*E|0);f[b]=B^D}m[0]=f[0]+(f[7]<<16|f[7]>>>16)+(f[6]<<16|f[6]>>>16)|0,m[1]=f[1]+(f[0]<<8|f[0]>>>24)+f[7]|0,m[2]=f[2]+(f[1]<<16|f[1]>>>16)+(f[0]<<16|f[0]>>>16)|0,m[3]=f[3]+(f[2]<<8|f[2]>>>24)+f[1]|0,m[4]=f[4]+(f[3]<<16|f[3]>>>16)+(f[2]<<16|f[2]>>>16)|0,m[5]=f[5]+(f[4]<<8|f[4]>>>24)+f[3]|0,m[6]=f[6]+(f[5]<<16|f[5]>>>16)+(f[4]<<16|f[4]>>>16)|0,m[7]=f[7]+(f[6]<<8|f[6]>>>24)+f[5]|0}r.Rabbit=o._createHelper(d)})(),s.Rabbit})})(rabbit$1)),rabbit$1.exports}var rabbitLegacy$1={exports:{}},rabbitLegacy=rabbitLegacy$1.exports,hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(rabbitLegacy,function(s){return(function(){var r=s,a=r.lib,o=a.StreamCipher,l=r.algo,c=[],u=[],f=[],d=l.RabbitLegacy=o.extend({_doReset:function(){var m=this._key.words,y=this.cfg.iv,b=this._X=[m[0],m[3]<<16|m[2]>>>16,m[1],m[0]<<16|m[3]>>>16,m[2],m[1]<<16|m[0]>>>16,m[3],m[2]<<16|m[1]>>>16],E=this._C=[m[2]<<16|m[2]>>>16,m[0]&4294901760|m[1]&65535,m[3]<<16|m[3]>>>16,m[1]&4294901760|m[2]&65535,m[0]<<16|m[0]>>>16,m[2]&4294901760|m[3]&65535,m[1]<<16|m[1]>>>16,m[3]&4294901760|m[0]&65535];this._b=0;for(var C=0;C<4;C++)p.call(this);for(var C=0;C<8;C++)E[C]^=b[C+4&7];if(y){var j=y.words,B=j[0],D=j[1],F=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,q=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360,V=F>>>16|q&4294901760,ee=q<<16|F&65535;E[0]^=F,E[1]^=V,E[2]^=q,E[3]^=ee,E[4]^=F,E[5]^=V,E[6]^=q,E[7]^=ee;for(var C=0;C<4;C++)p.call(this)}},_doProcessBlock:function(m,y){var b=this._X;p.call(this),c[0]=b[0]^b[5]>>>16^b[3]<<16,c[1]=b[2]^b[7]>>>16^b[5]<<16,c[2]=b[4]^b[1]>>>16^b[7]<<16,c[3]=b[6]^b[3]>>>16^b[1]<<16;for(var E=0;E<4;E++)c[E]=(c[E]<<8|c[E]>>>24)&16711935|(c[E]<<24|c[E]>>>8)&4278255360,m[y+E]^=c[E]},blockSize:128/32,ivSize:64/32});function p(){for(var m=this._X,y=this._C,b=0;b<8;b++)u[b]=y[b];y[0]=y[0]+1295307597+this._b|0,y[1]=y[1]+3545052371+(y[0]>>>0<u[0]>>>0?1:0)|0,y[2]=y[2]+886263092+(y[1]>>>0<u[1]>>>0?1:0)|0,y[3]=y[3]+1295307597+(y[2]>>>0<u[2]>>>0?1:0)|0,y[4]=y[4]+3545052371+(y[3]>>>0<u[3]>>>0?1:0)|0,y[5]=y[5]+886263092+(y[4]>>>0<u[4]>>>0?1:0)|0,y[6]=y[6]+1295307597+(y[5]>>>0<u[5]>>>0?1:0)|0,y[7]=y[7]+3545052371+(y[6]>>>0<u[6]>>>0?1:0)|0,this._b=y[7]>>>0<u[7]>>>0?1:0;for(var b=0;b<8;b++){var E=m[b]+y[b],C=E&65535,j=E>>>16,B=((C*C>>>17)+C*j>>>15)+j*j,D=((E&4294901760)*E|0)+((E&65535)*E|0);f[b]=B^D}m[0]=f[0]+(f[7]<<16|f[7]>>>16)+(f[6]<<16|f[6]>>>16)|0,m[1]=f[1]+(f[0]<<8|f[0]>>>24)+f[7]|0,m[2]=f[2]+(f[1]<<16|f[1]>>>16)+(f[0]<<16|f[0]>>>16)|0,m[3]=f[3]+(f[2]<<8|f[2]>>>24)+f[1]|0,m[4]=f[4]+(f[3]<<16|f[3]>>>16)+(f[2]<<16|f[2]>>>16)|0,m[5]=f[5]+(f[4]<<8|f[4]>>>24)+f[3]|0,m[6]=f[6]+(f[5]<<16|f[5]>>>16)+(f[4]<<16|f[4]>>>16)|0,m[7]=f[7]+(f[6]<<8|f[6]>>>24)+f[5]|0}r.RabbitLegacy=o._createHelper(d)})(),s.RabbitLegacy})})(rabbitLegacy$1)),rabbitLegacy$1.exports}var blowfish$1={exports:{}},blowfish=blowfish$1.exports,hasRequiredBlowfish;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(blowfish,function(s){return(function(){var r=s,a=r.lib,o=a.BlockCipher,l=r.algo;const c=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],f=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var d={pbox:[],sbox:[]};function p(C,j){let B=j>>24&255,D=j>>16&255,F=j>>8&255,q=j&255,V=C.sbox[0][B]+C.sbox[1][D];return V=V^C.sbox[2][F],V=V+C.sbox[3][q],V}function m(C,j,B){let D=j,F=B,q;for(let V=0;V<c;++V)D=D^C.pbox[V],F=p(C,D)^F,q=D,D=F,F=q;return q=D,D=F,F=q,F=F^C.pbox[c],D=D^C.pbox[c+1],{left:D,right:F}}function y(C,j,B){let D=j,F=B,q;for(let V=c+1;V>1;--V)D=D^C.pbox[V],F=p(C,D)^F,q=D,D=F,F=q;return q=D,D=F,F=q,F=F^C.pbox[1],D=D^C.pbox[0],{left:D,right:F}}function b(C,j,B){for(let ee=0;ee<4;ee++){C.sbox[ee]=[];for(let Q=0;Q<256;Q++)C.sbox[ee][Q]=f[ee][Q]}let D=0;for(let ee=0;ee<c+2;ee++)C.pbox[ee]=u[ee]^j[D],D++,D>=B&&(D=0);let F=0,q=0,V=0;for(let ee=0;ee<c+2;ee+=2)V=m(C,F,q),F=V.left,q=V.right,C.pbox[ee]=F,C.pbox[ee+1]=q;for(let ee=0;ee<4;ee++)for(let Q=0;Q<256;Q+=2)V=m(C,F,q),F=V.left,q=V.right,C.sbox[ee][Q]=F,C.sbox[ee][Q+1]=q;return!0}var E=l.Blowfish=o.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var C=this._keyPriorReset=this._key,j=C.words,B=C.sigBytes/4;b(d,j,B)}},encryptBlock:function(C,j){var B=m(d,C[j],C[j+1]);C[j]=B.left,C[j+1]=B.right},decryptBlock:function(C,j){var B=y(d,C[j],C[j+1]);C[j]=B.left,C[j+1]=B.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=o._createHelper(E)})(),s.Blowfish})})(blowfish$1)),blowfish$1.exports}var cryptoJs=cryptoJs$1.exports,hasRequiredCryptoJs;function requireCryptoJs(){return hasRequiredCryptoJs||(hasRequiredCryptoJs=1,(function(t,e){(function(s,r,a){t.exports=r(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256$1(),requireSha224(),requireSha512$1(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac$1(),requirePbkdf2$1(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish())})(cryptoJs,function(s){return s})})(cryptoJs$1)),cryptoJs$1.exports}var cryptoJsExports=requireCryptoJs();const CryptoJS=getDefaultExportFromCjs$4(cryptoJsExports);var src={},sha256$4={},sha2={},_md={},utils$1={},crypto$2={},hasRequiredCrypto;function requireCrypto(){return hasRequiredCrypto||(hasRequiredCrypto=1,Object.defineProperty(crypto$2,"__esModule",{value:!0}),crypto$2.crypto=void 0,crypto$2.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),crypto$2}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=s,t.anumber=r,t.abytes=a,t.ahash=o,t.aexists=l,t.aoutput=c,t.u8=u,t.u32=f,t.clean=d,t.createView=p,t.rotr=m,t.rotl=y,t.byteSwap=b,t.byteSwap32=E,t.bytesToHex=B,t.hexToBytes=q,t.asyncLoop=ee,t.utf8ToBytes=Q,t.bytesToUtf8=W,t.toBytes=Z,t.kdfInputToBytes=z,t.concatBytes=O,t.checkOpts=k,t.createHasher=S,t.createOptHasher=N,t.createXOFer=R,t.randomBytes=T;const e=requireCrypto();function s(M){return M instanceof Uint8Array||ArrayBuffer.isView(M)&&M.constructor.name==="Uint8Array"}function r(M){if(!Number.isSafeInteger(M)||M<0)throw new Error("positive integer expected, got "+M)}function a(M,...I){if(!s(M))throw new Error("Uint8Array expected");if(I.length>0&&!I.includes(M.length))throw new Error("Uint8Array expected of length "+I+", got length="+M.length)}function o(M){if(typeof M!="function"||typeof M.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");r(M.outputLen),r(M.blockLen)}function l(M,I=!0){if(M.destroyed)throw new Error("Hash instance has been destroyed");if(I&&M.finished)throw new Error("Hash#digest() has already been called")}function c(M,I){a(M);const $=I.outputLen;if(M.length<$)throw new Error("digestInto() expects output buffer of length at least "+$)}function u(M){return new Uint8Array(M.buffer,M.byteOffset,M.byteLength)}function f(M){return new Uint32Array(M.buffer,M.byteOffset,Math.floor(M.byteLength/4))}function d(...M){for(let I=0;I<M.length;I++)M[I].fill(0)}function p(M){return new DataView(M.buffer,M.byteOffset,M.byteLength)}function m(M,I){return M<<32-I|M>>>I}function y(M,I){return M<<I|M>>>32-I>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function b(M){return M<<24&4278190080|M<<8&16711680|M>>>8&65280|M>>>24&255}t.swap8IfBE=t.isLE?M=>M:M=>b(M),t.byteSwapIfBE=t.swap8IfBE;function E(M){for(let I=0;I<M.length;I++)M[I]=b(M[I]);return M}t.swap32IfBE=t.isLE?M=>M:E;const C=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",j=Array.from({length:256},(M,I)=>I.toString(16).padStart(2,"0"));function B(M){if(a(M),C)return M.toHex();let I="";for(let $=0;$<M.length;$++)I+=j[M[$]];return I}const D={_0:48,_9:57,A:65,F:70,a:97,f:102};function F(M){if(M>=D._0&&M<=D._9)return M-D._0;if(M>=D.A&&M<=D.F)return M-(D.A-10);if(M>=D.a&&M<=D.f)return M-(D.a-10)}function q(M){if(typeof M!="string")throw new Error("hex string expected, got "+typeof M);if(C)return Uint8Array.fromHex(M);const I=M.length,$=I/2;if(I%2)throw new Error("hex string expected, got unpadded hex of length "+I);const A=new Uint8Array($);for(let L=0,Y=0;L<$;L++,Y+=2){const oe=F(M.charCodeAt(Y)),J=F(M.charCodeAt(Y+1));if(oe===void 0||J===void 0){const U=M[Y]+M[Y+1];throw new Error('hex string expected, got non-hex character "'+U+'" at index '+Y)}A[L]=oe*16+J}return A}const V=async()=>{};t.nextTick=V;async function ee(M,I,$){let A=Date.now();for(let L=0;L<M;L++){$(L);const Y=Date.now()-A;Y>=0&&Y<I||(await(0,t.nextTick)(),A+=Y)}}function Q(M){if(typeof M!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(M))}function W(M){return new TextDecoder().decode(M)}function Z(M){return typeof M=="string"&&(M=Q(M)),a(M),M}function z(M){return typeof M=="string"&&(M=Q(M)),a(M),M}function O(...M){let I=0;for(let A=0;A<M.length;A++){const L=M[A];a(L),I+=L.length}const $=new Uint8Array(I);for(let A=0,L=0;A<M.length;A++){const Y=M[A];$.set(Y,L),L+=Y.length}return $}function k(M,I){if(I!==void 0&&{}.toString.call(I)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(M,I)}class v{}t.Hash=v;function S(M){const I=A=>M().update(Z(A)).digest(),$=M();return I.outputLen=$.outputLen,I.blockLen=$.blockLen,I.create=()=>M(),I}function N(M){const I=(A,L)=>M(L).update(Z(A)).digest(),$=M({});return I.outputLen=$.outputLen,I.blockLen=$.blockLen,I.create=A=>M(A),I}function R(M){const I=(A,L)=>M(L).update(Z(A)).digest(),$=M({});return I.outputLen=$.outputLen,I.blockLen=$.blockLen,I.create=A=>M(A),I}t.wrapConstructor=S,t.wrapConstructorWithOpts=N,t.wrapXOFConstructorWithOpts=R;function T(M=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(M));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(M));throw new Error("crypto.getRandomValues must be defined")}})(utils$1)),utils$1}var hasRequired_md;function require_md(){if(hasRequired_md)return _md;hasRequired_md=1,Object.defineProperty(_md,"__esModule",{value:!0}),_md.SHA512_IV=_md.SHA384_IV=_md.SHA224_IV=_md.SHA256_IV=_md.HashMD=void 0,_md.setBigUint64=e,_md.Chi=s,_md.Maj=r;const t=requireUtils();function e(o,l,c,u){if(typeof o.setBigUint64=="function")return o.setBigUint64(l,c,u);const f=BigInt(32),d=BigInt(4294967295),p=Number(c>>f&d),m=Number(c&d),y=u?4:0,b=u?0:4;o.setUint32(l+y,p,u),o.setUint32(l+b,m,u)}function s(o,l,c){return o&l^~o&c}function r(o,l,c){return o&l^o&c^l&c}class a extends t.Hash{constructor(l,c,u,f){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=l,this.outputLen=c,this.padOffset=u,this.isLE=f,this.buffer=new Uint8Array(l),this.view=(0,t.createView)(this.buffer)}update(l){(0,t.aexists)(this),l=(0,t.toBytes)(l),(0,t.abytes)(l);const{view:c,buffer:u,blockLen:f}=this,d=l.length;for(let p=0;p<d;){const m=Math.min(f-this.pos,d-p);if(m===f){const y=(0,t.createView)(l);for(;f<=d-p;p+=f)this.process(y,p);continue}u.set(l.subarray(p,p+m),this.pos),this.pos+=m,p+=m,this.pos===f&&(this.process(c,0),this.pos=0)}return this.length+=l.length,this.roundClean(),this}digestInto(l){(0,t.aexists)(this),(0,t.aoutput)(l,this),this.finished=!0;const{buffer:c,view:u,blockLen:f,isLE:d}=this;let{pos:p}=this;c[p++]=128,(0,t.clean)(this.buffer.subarray(p)),this.padOffset>f-p&&(this.process(u,0),p=0);for(let C=p;C<f;C++)c[C]=0;e(u,f-8,BigInt(this.length*8),d),this.process(u,0);const m=(0,t.createView)(l),y=this.outputLen;if(y%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=y/4,E=this.get();if(b>E.length)throw new Error("_sha2: outputLen bigger than state");for(let C=0;C<b;C++)m.setUint32(4*C,E[C],d)}digest(){const{buffer:l,outputLen:c}=this;this.digestInto(l);const u=l.slice(0,c);return this.destroy(),u}_cloneInto(l){l||(l=new this.constructor),l.set(...this.get());const{blockLen:c,buffer:u,length:f,finished:d,destroyed:p,pos:m}=this;return l.destroyed=p,l.finished=d,l.length=f,l.pos=m,f%c&&l.buffer.set(u),l}clone(){return this._cloneInto()}}return _md.HashMD=a,_md.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_md.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),_md.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),_md.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),_md}var _u64={},hasRequired_u64;function require_u64(){if(hasRequired_u64)return _u64;hasRequired_u64=1,Object.defineProperty(_u64,"__esModule",{value:!0}),_u64.toBig=_u64.shrSL=_u64.shrSH=_u64.rotrSL=_u64.rotrSH=_u64.rotrBL=_u64.rotrBH=_u64.rotr32L=_u64.rotr32H=_u64.rotlSL=_u64.rotlSH=_u64.rotlBL=_u64.rotlBH=_u64.add5L=_u64.add5H=_u64.add4L=_u64.add4H=_u64.add3L=_u64.add3H=void 0,_u64.add=j,_u64.fromBig=s,_u64.split=r;const t=BigInt(2**32-1),e=BigInt(32);function s(W,Z=!1){return Z?{h:Number(W&t),l:Number(W>>e&t)}:{h:Number(W>>e&t)|0,l:Number(W&t)|0}}function r(W,Z=!1){const z=W.length;let O=new Uint32Array(z),k=new Uint32Array(z);for(let v=0;v<z;v++){const{h:S,l:N}=s(W[v],Z);[O[v],k[v]]=[S,N]}return[O,k]}const a=(W,Z)=>BigInt(W>>>0)<<e|BigInt(Z>>>0);_u64.toBig=a;const o=(W,Z,z)=>W>>>z;_u64.shrSH=o;const l=(W,Z,z)=>W<<32-z|Z>>>z;_u64.shrSL=l;const c=(W,Z,z)=>W>>>z|Z<<32-z;_u64.rotrSH=c;const u=(W,Z,z)=>W<<32-z|Z>>>z;_u64.rotrSL=u;const f=(W,Z,z)=>W<<64-z|Z>>>z-32;_u64.rotrBH=f;const d=(W,Z,z)=>W>>>z-32|Z<<64-z;_u64.rotrBL=d;const p=(W,Z)=>Z;_u64.rotr32H=p;const m=(W,Z)=>W;_u64.rotr32L=m;const y=(W,Z,z)=>W<<z|Z>>>32-z;_u64.rotlSH=y;const b=(W,Z,z)=>Z<<z|W>>>32-z;_u64.rotlSL=b;const E=(W,Z,z)=>Z<<z-32|W>>>64-z;_u64.rotlBH=E;const C=(W,Z,z)=>W<<z-32|Z>>>64-z;_u64.rotlBL=C;function j(W,Z,z,O){const k=(Z>>>0)+(O>>>0);return{h:W+z+(k/2**32|0)|0,l:k|0}}const B=(W,Z,z)=>(W>>>0)+(Z>>>0)+(z>>>0);_u64.add3L=B;const D=(W,Z,z,O)=>Z+z+O+(W/2**32|0)|0;_u64.add3H=D;const F=(W,Z,z,O)=>(W>>>0)+(Z>>>0)+(z>>>0)+(O>>>0);_u64.add4L=F;const q=(W,Z,z,O,k)=>Z+z+O+k+(W/2**32|0)|0;_u64.add4H=q;const V=(W,Z,z,O,k)=>(W>>>0)+(Z>>>0)+(z>>>0)+(O>>>0)+(k>>>0);_u64.add5L=V;const ee=(W,Z,z,O,k,v)=>Z+z+O+k+v+(W/2**32|0)|0;_u64.add5H=ee;const Q={fromBig:s,split:r,toBig:a,shrSH:o,shrSL:l,rotrSH:c,rotrSL:u,rotrBH:f,rotrBL:d,rotr32H:p,rotr32L:m,rotlSH:y,rotlSL:b,rotlBH:E,rotlBL:C,add:j,add3L:B,add3H:D,add4L:F,add4H:q,add5H:ee,add5L:V};return _u64.default=Q,_u64}var hasRequiredSha2;function requireSha2(){if(hasRequiredSha2)return sha2;hasRequiredSha2=1,Object.defineProperty(sha2,"__esModule",{value:!0}),sha2.sha512_224=sha2.sha512_256=sha2.sha384=sha2.sha512=sha2.sha224=sha2.sha256=sha2.SHA512_256=sha2.SHA512_224=sha2.SHA384=sha2.SHA512=sha2.SHA224=sha2.SHA256=void 0;const t=require_md(),e=require_u64(),s=requireUtils(),r=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array(64);class o extends t.HashMD{constructor(D=32){super(64,D,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:D,B:F,C:q,D:V,E:ee,F:Q,G:W,H:Z}=this;return[D,F,q,V,ee,Q,W,Z]}set(D,F,q,V,ee,Q,W,Z){this.A=D|0,this.B=F|0,this.C=q|0,this.D=V|0,this.E=ee|0,this.F=Q|0,this.G=W|0,this.H=Z|0}process(D,F){for(let k=0;k<16;k++,F+=4)a[k]=D.getUint32(F,!1);for(let k=16;k<64;k++){const v=a[k-15],S=a[k-2],N=(0,s.rotr)(v,7)^(0,s.rotr)(v,18)^v>>>3,R=(0,s.rotr)(S,17)^(0,s.rotr)(S,19)^S>>>10;a[k]=R+a[k-7]+N+a[k-16]|0}let{A:q,B:V,C:ee,D:Q,E:W,F:Z,G:z,H:O}=this;for(let k=0;k<64;k++){const v=(0,s.rotr)(W,6)^(0,s.rotr)(W,11)^(0,s.rotr)(W,25),S=O+v+(0,t.Chi)(W,Z,z)+r[k]+a[k]|0,R=((0,s.rotr)(q,2)^(0,s.rotr)(q,13)^(0,s.rotr)(q,22))+(0,t.Maj)(q,V,ee)|0;O=z,z=Z,Z=W,W=Q+S|0,Q=ee,ee=V,V=q,q=S+R|0}q=q+this.A|0,V=V+this.B|0,ee=ee+this.C|0,Q=Q+this.D|0,W=W+this.E|0,Z=Z+this.F|0,z=z+this.G|0,O=O+this.H|0,this.set(q,V,ee,Q,W,Z,z,O)}roundClean(){(0,s.clean)(a)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,s.clean)(this.buffer)}}sha2.SHA256=o;class l extends o{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}sha2.SHA224=l;const c=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(B=>BigInt(B))),u=c[0],f=c[1],d=new Uint32Array(80),p=new Uint32Array(80);class m extends t.HashMD{constructor(D=64){super(128,D,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:D,Al:F,Bh:q,Bl:V,Ch:ee,Cl:Q,Dh:W,Dl:Z,Eh:z,El:O,Fh:k,Fl:v,Gh:S,Gl:N,Hh:R,Hl:T}=this;return[D,F,q,V,ee,Q,W,Z,z,O,k,v,S,N,R,T]}set(D,F,q,V,ee,Q,W,Z,z,O,k,v,S,N,R,T){this.Ah=D|0,this.Al=F|0,this.Bh=q|0,this.Bl=V|0,this.Ch=ee|0,this.Cl=Q|0,this.Dh=W|0,this.Dl=Z|0,this.Eh=z|0,this.El=O|0,this.Fh=k|0,this.Fl=v|0,this.Gh=S|0,this.Gl=N|0,this.Hh=R|0,this.Hl=T|0}process(D,F){for(let $=0;$<16;$++,F+=4)d[$]=D.getUint32(F),p[$]=D.getUint32(F+=4);for(let $=16;$<80;$++){const A=d[$-15]|0,L=p[$-15]|0,Y=e.rotrSH(A,L,1)^e.rotrSH(A,L,8)^e.shrSH(A,L,7),oe=e.rotrSL(A,L,1)^e.rotrSL(A,L,8)^e.shrSL(A,L,7),J=d[$-2]|0,U=p[$-2]|0,G=e.rotrSH(J,U,19)^e.rotrBH(J,U,61)^e.shrSH(J,U,6),ae=e.rotrSL(J,U,19)^e.rotrBL(J,U,61)^e.shrSL(J,U,6),he=e.add4L(oe,ae,p[$-7],p[$-16]),le=e.add4H(he,Y,G,d[$-7],d[$-16]);d[$]=le|0,p[$]=he|0}let{Ah:q,Al:V,Bh:ee,Bl:Q,Ch:W,Cl:Z,Dh:z,Dl:O,Eh:k,El:v,Fh:S,Fl:N,Gh:R,Gl:T,Hh:M,Hl:I}=this;for(let $=0;$<80;$++){const A=e.rotrSH(k,v,14)^e.rotrSH(k,v,18)^e.rotrBH(k,v,41),L=e.rotrSL(k,v,14)^e.rotrSL(k,v,18)^e.rotrBL(k,v,41),Y=k&S^~k&R,oe=v&N^~v&T,J=e.add5L(I,L,oe,f[$],p[$]),U=e.add5H(J,M,A,Y,u[$],d[$]),G=J|0,ae=e.rotrSH(q,V,28)^e.rotrBH(q,V,34)^e.rotrBH(q,V,39),he=e.rotrSL(q,V,28)^e.rotrBL(q,V,34)^e.rotrBL(q,V,39),le=q&ee^q&W^ee&W,te=V&Q^V&Z^Q&Z;M=R|0,I=T|0,R=S|0,T=N|0,S=k|0,N=v|0,{h:k,l:v}=e.add(z|0,O|0,U|0,G|0),z=W|0,O=Z|0,W=ee|0,Z=Q|0,ee=q|0,Q=V|0;const pe=e.add3L(G,he,te);q=e.add3H(pe,U,ae,le),V=pe|0}({h:q,l:V}=e.add(this.Ah|0,this.Al|0,q|0,V|0)),{h:ee,l:Q}=e.add(this.Bh|0,this.Bl|0,ee|0,Q|0),{h:W,l:Z}=e.add(this.Ch|0,this.Cl|0,W|0,Z|0),{h:z,l:O}=e.add(this.Dh|0,this.Dl|0,z|0,O|0),{h:k,l:v}=e.add(this.Eh|0,this.El|0,k|0,v|0),{h:S,l:N}=e.add(this.Fh|0,this.Fl|0,S|0,N|0),{h:R,l:T}=e.add(this.Gh|0,this.Gl|0,R|0,T|0),{h:M,l:I}=e.add(this.Hh|0,this.Hl|0,M|0,I|0),this.set(q,V,ee,Q,W,Z,z,O,k,v,S,N,R,T,M,I)}roundClean(){(0,s.clean)(d,p)}destroy(){(0,s.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}sha2.SHA512=m;class y extends m{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}sha2.SHA384=y;const b=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),E=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class C extends m{constructor(){super(28),this.Ah=b[0]|0,this.Al=b[1]|0,this.Bh=b[2]|0,this.Bl=b[3]|0,this.Ch=b[4]|0,this.Cl=b[5]|0,this.Dh=b[6]|0,this.Dl=b[7]|0,this.Eh=b[8]|0,this.El=b[9]|0,this.Fh=b[10]|0,this.Fl=b[11]|0,this.Gh=b[12]|0,this.Gl=b[13]|0,this.Hh=b[14]|0,this.Hl=b[15]|0}}sha2.SHA512_224=C;class j extends m{constructor(){super(32),this.Ah=E[0]|0,this.Al=E[1]|0,this.Bh=E[2]|0,this.Bl=E[3]|0,this.Ch=E[4]|0,this.Cl=E[5]|0,this.Dh=E[6]|0,this.Dl=E[7]|0,this.Eh=E[8]|0,this.El=E[9]|0,this.Fh=E[10]|0,this.Fl=E[11]|0,this.Gh=E[12]|0,this.Gl=E[13]|0,this.Hh=E[14]|0,this.Hl=E[15]|0}}return sha2.SHA512_256=j,sha2.sha256=(0,s.createHasher)(()=>new o),sha2.sha224=(0,s.createHasher)(()=>new l),sha2.sha512=(0,s.createHasher)(()=>new m),sha2.sha384=(0,s.createHasher)(()=>new y),sha2.sha512_256=(0,s.createHasher)(()=>new j),sha2.sha512_224=(0,s.createHasher)(()=>new C),sha2}var hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$4;hasRequiredSha256=1,Object.defineProperty(sha256$4,"__esModule",{value:!0}),sha256$4.sha224=sha256$4.SHA224=sha256$4.sha256=sha256$4.SHA256=void 0;const t=requireSha2();return sha256$4.SHA256=t.SHA256,sha256$4.sha256=t.sha256,sha256$4.SHA224=t.SHA224,sha256$4.sha224=t.sha224,sha256$4}var sha512$1={},hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1,Object.defineProperty(sha512$1,"__esModule",{value:!0}),sha512$1.sha512_256=sha512$1.SHA512_256=sha512$1.sha512_224=sha512$1.SHA512_224=sha512$1.sha384=sha512$1.SHA384=sha512$1.sha512=sha512$1.SHA512=void 0;const t=requireSha2();return sha512$1.SHA512=t.SHA512,sha512$1.sha512=t.sha512,sha512$1.SHA384=t.SHA384,sha512$1.sha384=t.sha384,sha512$1.SHA512_224=t.SHA512_224,sha512$1.sha512_224=t.sha512_224,sha512$1.SHA512_256=t.SHA512_256,sha512$1.sha512_256=t.sha512_256,sha512$1}var pbkdf2={},hmac$4={},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=requireUtils();class s extends e.Hash{constructor(o,l){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(o);const c=(0,e.toBytes)(l);if(this.iHash=o.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,f=new Uint8Array(u);f.set(c.length>u?o.create().update(c).digest():c);for(let d=0;d<f.length;d++)f[d]^=54;this.iHash.update(f),this.oHash=o.create();for(let d=0;d<f.length;d++)f[d]^=106;this.oHash.update(f),(0,e.clean)(f)}update(o){return(0,e.aexists)(this),this.iHash.update(o),this}digestInto(o){(0,e.aexists)(this),(0,e.abytes)(o,this.outputLen),this.finished=!0,this.iHash.digestInto(o),this.oHash.update(o),this.oHash.digestInto(o),this.destroy()}digest(){const o=new Uint8Array(this.oHash.outputLen);return this.digestInto(o),o}_cloneInto(o){o||(o=Object.create(Object.getPrototypeOf(this),{}));const{oHash:l,iHash:c,finished:u,destroyed:f,blockLen:d,outputLen:p}=this;return o=o,o.finished=u,o.destroyed=f,o.blockLen=d,o.outputLen=p,o.oHash=l._cloneInto(o.oHash),o.iHash=c._cloneInto(o.iHash),o}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=s;const r=(a,o,l)=>new s(a,o).update(l).digest();t.hmac=r,t.hmac.create=(a,o)=>new s(a,o)})(hmac$4)),hmac$4}var hasRequiredPbkdf2;function requirePbkdf2(){if(hasRequiredPbkdf2)return pbkdf2;hasRequiredPbkdf2=1,Object.defineProperty(pbkdf2,"__esModule",{value:!0}),pbkdf2.pbkdf2=a,pbkdf2.pbkdf2Async=o;const t=requireHmac(),e=requireUtils();function s(l,c,u,f){(0,e.ahash)(l);const d=(0,e.checkOpts)({dkLen:32,asyncTick:10},f),{c:p,dkLen:m,asyncTick:y}=d;if((0,e.anumber)(p),(0,e.anumber)(m),(0,e.anumber)(y),p<1)throw new Error("iterations (c) should be >= 1");const b=(0,e.kdfInputToBytes)(c),E=(0,e.kdfInputToBytes)(u),C=new Uint8Array(m),j=t.hmac.create(l,b),B=j._cloneInto().update(E);return{c:p,dkLen:m,asyncTick:y,DK:C,PRF:j,PRFSalt:B}}function r(l,c,u,f,d){return l.destroy(),c.destroy(),f&&f.destroy(),(0,e.clean)(d),u}function a(l,c,u,f){const{c:d,dkLen:p,DK:m,PRF:y,PRFSalt:b}=s(l,c,u,f);let E;const C=new Uint8Array(4),j=(0,e.createView)(C),B=new Uint8Array(y.outputLen);for(let D=1,F=0;F<p;D++,F+=y.outputLen){const q=m.subarray(F,F+y.outputLen);j.setInt32(0,D,!1),(E=b._cloneInto(E)).update(C).digestInto(B),q.set(B.subarray(0,q.length));for(let V=1;V<d;V++){y._cloneInto(E).update(B).digestInto(B);for(let ee=0;ee<q.length;ee++)q[ee]^=B[ee]}}return r(y,b,m,E,B)}async function o(l,c,u,f){const{c:d,dkLen:p,asyncTick:m,DK:y,PRF:b,PRFSalt:E}=s(l,c,u,f);let C;const j=new Uint8Array(4),B=(0,e.createView)(j),D=new Uint8Array(b.outputLen);for(let F=1,q=0;q<p;F++,q+=b.outputLen){const V=y.subarray(q,q+b.outputLen);B.setInt32(0,F,!1),(C=E._cloneInto(C)).update(j).digestInto(D),V.set(D.subarray(0,V.length)),await(0,e.asyncLoop)(d-1,m,()=>{b._cloneInto(C).update(D).digestInto(D);for(let ee=0;ee<V.length;ee++)V[ee]^=D[ee]})}return r(b,E,y,C,D)}return pbkdf2}var _wordlists={};const require$$0=JSON.parse('["abdikace","abeceda","adresa","agrese","akce","aktovka","alej","alkohol","amputace","ananas","andulka","anekdota","anketa","antika","anulovat","archa","arogance","asfalt","asistent","aspirace","astma","astronom","atlas","atletika","atol","autobus","azyl","babka","bachor","bacil","baculka","badatel","bageta","bagr","bahno","bakterie","balada","baletka","balkon","balonek","balvan","balza","bambus","bankomat","barbar","baret","barman","baroko","barva","baterka","batoh","bavlna","bazalka","bazilika","bazuka","bedna","beran","beseda","bestie","beton","bezinka","bezmoc","beztak","bicykl","bidlo","biftek","bikiny","bilance","biograf","biolog","bitva","bizon","blahobyt","blatouch","blecha","bledule","blesk","blikat","blizna","blokovat","bloudit","blud","bobek","bobr","bodlina","bodnout","bohatost","bojkot","bojovat","bokorys","bolest","borec","borovice","bota","boubel","bouchat","bouda","boule","bourat","boxer","bradavka","brambora","branka","bratr","brepta","briketa","brko","brloh","bronz","broskev","brunetka","brusinka","brzda","brzy","bublina","bubnovat","buchta","buditel","budka","budova","bufet","bujarost","bukvice","buldok","bulva","bunda","bunkr","burza","butik","buvol","buzola","bydlet","bylina","bytovka","bzukot","capart","carevna","cedr","cedule","cejch","cejn","cela","celer","celkem","celnice","cenina","cennost","cenovka","centrum","cenzor","cestopis","cetka","chalupa","chapadlo","charita","chata","chechtat","chemie","chichot","chirurg","chlad","chleba","chlubit","chmel","chmura","chobot","chochol","chodba","cholera","chomout","chopit","choroba","chov","chrapot","chrlit","chrt","chrup","chtivost","chudina","chutnat","chvat","chvilka","chvost","chyba","chystat","chytit","cibule","cigareta","cihelna","cihla","cinkot","cirkus","cisterna","citace","citrus","cizinec","cizost","clona","cokoliv","couvat","ctitel","ctnost","cudnost","cuketa","cukr","cupot","cvaknout","cval","cvik","cvrkot","cyklista","daleko","dareba","datel","datum","dcera","debata","dechovka","decibel","deficit","deflace","dekl","dekret","demokrat","deprese","derby","deska","detektiv","dikobraz","diktovat","dioda","diplom","disk","displej","divadlo","divoch","dlaha","dlouho","dluhopis","dnes","dobro","dobytek","docent","dochutit","dodnes","dohled","dohoda","dohra","dojem","dojnice","doklad","dokola","doktor","dokument","dolar","doleva","dolina","doma","dominant","domluvit","domov","donutit","dopad","dopis","doplnit","doposud","doprovod","dopustit","dorazit","dorost","dort","dosah","doslov","dostatek","dosud","dosyta","dotaz","dotek","dotknout","doufat","doutnat","dovozce","dozadu","doznat","dozorce","drahota","drak","dramatik","dravec","draze","drdol","drobnost","drogerie","drozd","drsnost","drtit","drzost","duben","duchovno","dudek","duha","duhovka","dusit","dusno","dutost","dvojice","dvorec","dynamit","ekolog","ekonomie","elektron","elipsa","email","emise","emoce","empatie","epizoda","epocha","epopej","epos","esej","esence","eskorta","eskymo","etiketa","euforie","evoluce","exekuce","exkurze","expedice","exploze","export","extrakt","facka","fajfka","fakulta","fanatik","fantazie","farmacie","favorit","fazole","federace","fejeton","fenka","fialka","figurant","filozof","filtr","finance","finta","fixace","fjord","flanel","flirt","flotila","fond","fosfor","fotbal","fotka","foton","frakce","freska","fronta","fukar","funkce","fyzika","galeje","garant","genetika","geolog","gilotina","glazura","glejt","golem","golfista","gotika","graf","gramofon","granule","grep","gril","grog","groteska","guma","hadice","hadr","hala","halenka","hanba","hanopis","harfa","harpuna","havran","hebkost","hejkal","hejno","hejtman","hektar","helma","hematom","herec","herna","heslo","hezky","historik","hladovka","hlasivky","hlava","hledat","hlen","hlodavec","hloh","hloupost","hltat","hlubina","hluchota","hmat","hmota","hmyz","hnis","hnojivo","hnout","hoblina","hoboj","hoch","hodiny","hodlat","hodnota","hodovat","hojnost","hokej","holinka","holka","holub","homole","honitba","honorace","horal","horda","horizont","horko","horlivec","hormon","hornina","horoskop","horstvo","hospoda","hostina","hotovost","houba","houf","houpat","houska","hovor","hradba","hranice","hravost","hrazda","hrbolek","hrdina","hrdlo","hrdost","hrnek","hrobka","hromada","hrot","hrouda","hrozen","hrstka","hrubost","hryzat","hubenost","hubnout","hudba","hukot","humr","husita","hustota","hvozd","hybnost","hydrant","hygiena","hymna","hysterik","idylka","ihned","ikona","iluze","imunita","infekce","inflace","inkaso","inovace","inspekce","internet","invalida","investor","inzerce","ironie","jablko","jachta","jahoda","jakmile","jakost","jalovec","jantar","jarmark","jaro","jasan","jasno","jatka","javor","jazyk","jedinec","jedle","jednatel","jehlan","jekot","jelen","jelito","jemnost","jenom","jepice","jeseter","jevit","jezdec","jezero","jinak","jindy","jinoch","jiskra","jistota","jitrnice","jizva","jmenovat","jogurt","jurta","kabaret","kabel","kabinet","kachna","kadet","kadidlo","kahan","kajak","kajuta","kakao","kaktus","kalamita","kalhoty","kalibr","kalnost","kamera","kamkoliv","kamna","kanibal","kanoe","kantor","kapalina","kapela","kapitola","kapka","kaple","kapota","kapr","kapusta","kapybara","karamel","karotka","karton","kasa","katalog","katedra","kauce","kauza","kavalec","kazajka","kazeta","kazivost","kdekoliv","kdesi","kedluben","kemp","keramika","kino","klacek","kladivo","klam","klapot","klasika","klaun","klec","klenba","klepat","klesnout","klid","klima","klisna","klobouk","klokan","klopa","kloub","klubovna","klusat","kluzkost","kmen","kmitat","kmotr","kniha","knot","koalice","koberec","kobka","kobliha","kobyla","kocour","kohout","kojenec","kokos","koktejl","kolaps","koleda","kolize","kolo","komando","kometa","komik","komnata","komora","kompas","komunita","konat","koncept","kondice","konec","konfese","kongres","konina","konkurs","kontakt","konzerva","kopanec","kopie","kopnout","koprovka","korbel","korektor","kormidlo","koroptev","korpus","koruna","koryto","korzet","kosatec","kostka","kotel","kotleta","kotoul","koukat","koupelna","kousek","kouzlo","kovboj","koza","kozoroh","krabice","krach","krajina","kralovat","krasopis","kravata","kredit","krejcar","kresba","kreveta","kriket","kritik","krize","krkavec","krmelec","krmivo","krocan","krok","kronika","kropit","kroupa","krovka","krtek","kruhadlo","krupice","krutost","krvinka","krychle","krypta","krystal","kryt","kudlanka","kufr","kujnost","kukla","kulajda","kulich","kulka","kulomet","kultura","kuna","kupodivu","kurt","kurzor","kutil","kvalita","kvasinka","kvestor","kynolog","kyselina","kytara","kytice","kytka","kytovec","kyvadlo","labrador","lachtan","ladnost","laik","lakomec","lamela","lampa","lanovka","lasice","laso","lastura","latinka","lavina","lebka","leckdy","leden","lednice","ledovka","ledvina","legenda","legie","legrace","lehce","lehkost","lehnout","lektvar","lenochod","lentilka","lepenka","lepidlo","letadlo","letec","letmo","letokruh","levhart","levitace","levobok","libra","lichotka","lidojed","lidskost","lihovina","lijavec","lilek","limetka","linie","linka","linoleum","listopad","litina","litovat","lobista","lodivod","logika","logoped","lokalita","loket","lomcovat","lopata","lopuch","lord","losos","lotr","loudal","louh","louka","louskat","lovec","lstivost","lucerna","lucifer","lump","lusk","lustrace","lvice","lyra","lyrika","lysina","madam","madlo","magistr","mahagon","majetek","majitel","majorita","makak","makovice","makrela","malba","malina","malovat","malvice","maminka","mandle","manko","marnost","masakr","maskot","masopust","matice","matrika","maturita","mazanec","mazivo","mazlit","mazurka","mdloba","mechanik","meditace","medovina","melasa","meloun","mentolka","metla","metoda","metr","mezera","migrace","mihnout","mihule","mikina","mikrofon","milenec","milimetr","milost","mimika","mincovna","minibar","minomet","minulost","miska","mistr","mixovat","mladost","mlha","mlhovina","mlok","mlsat","mluvit","mnich","mnohem","mobil","mocnost","modelka","modlitba","mohyla","mokro","molekula","momentka","monarcha","monokl","monstrum","montovat","monzun","mosaz","moskyt","most","motivace","motorka","motyka","moucha","moudrost","mozaika","mozek","mozol","mramor","mravenec","mrkev","mrtvola","mrzet","mrzutost","mstitel","mudrc","muflon","mulat","mumie","munice","muset","mutace","muzeum","muzikant","myslivec","mzda","nabourat","nachytat","nadace","nadbytek","nadhoz","nadobro","nadpis","nahlas","nahnat","nahodile","nahradit","naivita","najednou","najisto","najmout","naklonit","nakonec","nakrmit","nalevo","namazat","namluvit","nanometr","naoko","naopak","naostro","napadat","napevno","naplnit","napnout","naposled","naprosto","narodit","naruby","narychlo","nasadit","nasekat","naslepo","nastat","natolik","navenek","navrch","navzdory","nazvat","nebe","nechat","necky","nedaleko","nedbat","neduh","negace","nehet","nehoda","nejen","nejprve","neklid","nelibost","nemilost","nemoc","neochota","neonka","nepokoj","nerost","nerv","nesmysl","nesoulad","netvor","neuron","nevina","nezvykle","nicota","nijak","nikam","nikdy","nikl","nikterak","nitro","nocleh","nohavice","nominace","nora","norek","nositel","nosnost","nouze","noviny","novota","nozdra","nuda","nudle","nuget","nutit","nutnost","nutrie","nymfa","obal","obarvit","obava","obdiv","obec","obehnat","obejmout","obezita","obhajoba","obilnice","objasnit","objekt","obklopit","oblast","oblek","obliba","obloha","obluda","obnos","obohatit","obojek","obout","obrazec","obrna","obruba","obrys","obsah","obsluha","obstarat","obuv","obvaz","obvinit","obvod","obvykle","obyvatel","obzor","ocas","ocel","ocenit","ochladit","ochota","ochrana","ocitnout","odboj","odbyt","odchod","odcizit","odebrat","odeslat","odevzdat","odezva","odhadce","odhodit","odjet","odjinud","odkaz","odkoupit","odliv","odluka","odmlka","odolnost","odpad","odpis","odplout","odpor","odpustit","odpykat","odrazka","odsoudit","odstup","odsun","odtok","odtud","odvaha","odveta","odvolat","odvracet","odznak","ofina","ofsajd","ohlas","ohnisko","ohrada","ohrozit","ohryzek","okap","okenice","oklika","okno","okouzlit","okovy","okrasa","okres","okrsek","okruh","okupant","okurka","okusit","olejnina","olizovat","omak","omeleta","omezit","omladina","omlouvat","omluva","omyl","onehdy","opakovat","opasek","operace","opice","opilost","opisovat","opora","opozice","opravdu","oproti","orbital","orchestr","orgie","orlice","orloj","ortel","osada","oschnout","osika","osivo","oslava","oslepit","oslnit","oslovit","osnova","osoba","osolit","ospalec","osten","ostraha","ostuda","ostych","osvojit","oteplit","otisk","otop","otrhat","otrlost","otrok","otruby","otvor","ovanout","ovar","oves","ovlivnit","ovoce","oxid","ozdoba","pachatel","pacient","padouch","pahorek","pakt","palanda","palec","palivo","paluba","pamflet","pamlsek","panenka","panika","panna","panovat","panstvo","pantofle","paprika","parketa","parodie","parta","paruka","paryba","paseka","pasivita","pastelka","patent","patrona","pavouk","pazneht","pazourek","pecka","pedagog","pejsek","peklo","peloton","penalta","pendrek","penze","periskop","pero","pestrost","petarda","petice","petrolej","pevnina","pexeso","pianista","piha","pijavice","pikle","piknik","pilina","pilnost","pilulka","pinzeta","pipeta","pisatel","pistole","pitevna","pivnice","pivovar","placenta","plakat","plamen","planeta","plastika","platit","plavidlo","plaz","plech","plemeno","plenta","ples","pletivo","plevel","plivat","plnit","plno","plocha","plodina","plomba","plout","pluk","plyn","pobavit","pobyt","pochod","pocit","poctivec","podat","podcenit","podepsat","podhled","podivit","podklad","podmanit","podnik","podoba","podpora","podraz","podstata","podvod","podzim","poezie","pohanka","pohnutka","pohovor","pohroma","pohyb","pointa","pojistka","pojmout","pokazit","pokles","pokoj","pokrok","pokuta","pokyn","poledne","polibek","polknout","poloha","polynom","pomalu","pominout","pomlka","pomoc","pomsta","pomyslet","ponechat","ponorka","ponurost","popadat","popel","popisek","poplach","poprosit","popsat","popud","poradce","porce","porod","porucha","poryv","posadit","posed","posila","poskok","poslanec","posoudit","pospolu","postava","posudek","posyp","potah","potkan","potlesk","potomek","potrava","potupa","potvora","poukaz","pouto","pouzdro","povaha","povidla","povlak","povoz","povrch","povstat","povyk","povzdech","pozdrav","pozemek","poznatek","pozor","pozvat","pracovat","prahory","praktika","prales","praotec","praporek","prase","pravda","princip","prkno","probudit","procento","prodej","profese","prohra","projekt","prolomit","promile","pronikat","propad","prorok","prosba","proton","proutek","provaz","prskavka","prsten","prudkost","prut","prvek","prvohory","psanec","psovod","pstruh","ptactvo","puberta","puch","pudl","pukavec","puklina","pukrle","pult","pumpa","punc","pupen","pusa","pusinka","pustina","putovat","putyka","pyramida","pysk","pytel","racek","rachot","radiace","radnice","radon","raft","ragby","raketa","rakovina","rameno","rampouch","rande","rarach","rarita","rasovna","rastr","ratolest","razance","razidlo","reagovat","reakce","recept","redaktor","referent","reflex","rejnok","reklama","rekord","rekrut","rektor","reputace","revize","revma","revolver","rezerva","riskovat","riziko","robotika","rodokmen","rohovka","rokle","rokoko","romaneto","ropovod","ropucha","rorejs","rosol","rostlina","rotmistr","rotoped","rotunda","roubenka","roucho","roup","roura","rovina","rovnice","rozbor","rozchod","rozdat","rozeznat","rozhodce","rozinka","rozjezd","rozkaz","rozloha","rozmar","rozpad","rozruch","rozsah","roztok","rozum","rozvod","rubrika","ruchadlo","rukavice","rukopis","ryba","rybolov","rychlost","rydlo","rypadlo","rytina","ryzost","sadista","sahat","sako","samec","samizdat","samota","sanitka","sardinka","sasanka","satelit","sazba","sazenice","sbor","schovat","sebranka","secese","sedadlo","sediment","sedlo","sehnat","sejmout","sekera","sekta","sekunda","sekvoje","semeno","seno","servis","sesadit","seshora","seskok","seslat","sestra","sesuv","sesypat","setba","setina","setkat","setnout","setrvat","sever","seznam","shoda","shrnout","sifon","silnice","sirka","sirotek","sirup","situace","skafandr","skalisko","skanzen","skaut","skeptik","skica","skladba","sklenice","sklo","skluz","skoba","skokan","skoro","skripta","skrz","skupina","skvost","skvrna","slabika","sladidlo","slanina","slast","slavnost","sledovat","slepec","sleva","slezina","slib","slina","sliznice","slon","sloupek","slovo","sluch","sluha","slunce","slupka","slza","smaragd","smetana","smilstvo","smlouva","smog","smrad","smrk","smrtka","smutek","smysl","snad","snaha","snob","sobota","socha","sodovka","sokol","sopka","sotva","souboj","soucit","soudce","souhlas","soulad","soumrak","souprava","soused","soutok","souviset","spalovna","spasitel","spis","splav","spodek","spojenec","spolu","sponzor","spornost","spousta","sprcha","spustit","sranda","sraz","srdce","srna","srnec","srovnat","srpen","srst","srub","stanice","starosta","statika","stavba","stehno","stezka","stodola","stolek","stopa","storno","stoupat","strach","stres","strhnout","strom","struna","studna","stupnice","stvol","styk","subjekt","subtropy","suchar","sudost","sukno","sundat","sunout","surikata","surovina","svah","svalstvo","svetr","svatba","svazek","svisle","svitek","svoboda","svodidlo","svorka","svrab","sykavka","sykot","synek","synovec","sypat","sypkost","syrovost","sysel","sytost","tabletka","tabule","tahoun","tajemno","tajfun","tajga","tajit","tajnost","taktika","tamhle","tampon","tancovat","tanec","tanker","tapeta","tavenina","tazatel","technika","tehdy","tekutina","telefon","temnota","tendence","tenista","tenor","teplota","tepna","teprve","terapie","termoska","textil","ticho","tiskopis","titulek","tkadlec","tkanina","tlapka","tleskat","tlukot","tlupa","tmel","toaleta","topinka","topol","torzo","touha","toulec","tradice","traktor","tramp","trasa","traverza","trefit","trest","trezor","trhavina","trhlina","trochu","trojice","troska","trouba","trpce","trpitel","trpkost","trubec","truchlit","truhlice","trus","trvat","tudy","tuhnout","tuhost","tundra","turista","turnaj","tuzemsko","tvaroh","tvorba","tvrdost","tvrz","tygr","tykev","ubohost","uboze","ubrat","ubrousek","ubrus","ubytovna","ucho","uctivost","udivit","uhradit","ujednat","ujistit","ujmout","ukazatel","uklidnit","uklonit","ukotvit","ukrojit","ulice","ulita","ulovit","umyvadlo","unavit","uniforma","uniknout","upadnout","uplatnit","uplynout","upoutat","upravit","uran","urazit","usednout","usilovat","usmrtit","usnadnit","usnout","usoudit","ustlat","ustrnout","utahovat","utkat","utlumit","utonout","utopenec","utrousit","uvalit","uvolnit","uvozovka","uzdravit","uzel","uzenina","uzlina","uznat","vagon","valcha","valoun","vana","vandal","vanilka","varan","varhany","varovat","vcelku","vchod","vdova","vedro","vegetace","vejce","velbloud","veletrh","velitel","velmoc","velryba","venkov","veranda","verze","veselka","veskrze","vesnice","vespodu","vesta","veterina","veverka","vibrace","vichr","videohra","vidina","vidle","vila","vinice","viset","vitalita","vize","vizitka","vjezd","vklad","vkus","vlajka","vlak","vlasec","vlevo","vlhkost","vliv","vlnovka","vloupat","vnucovat","vnuk","voda","vodivost","vodoznak","vodstvo","vojensky","vojna","vojsko","volant","volba","volit","volno","voskovka","vozidlo","vozovna","vpravo","vrabec","vracet","vrah","vrata","vrba","vrcholek","vrhat","vrstva","vrtule","vsadit","vstoupit","vstup","vtip","vybavit","vybrat","vychovat","vydat","vydra","vyfotit","vyhledat","vyhnout","vyhodit","vyhradit","vyhubit","vyjasnit","vyjet","vyjmout","vyklopit","vykonat","vylekat","vymazat","vymezit","vymizet","vymyslet","vynechat","vynikat","vynutit","vypadat","vyplatit","vypravit","vypustit","vyrazit","vyrovnat","vyrvat","vyslovit","vysoko","vystavit","vysunout","vysypat","vytasit","vytesat","vytratit","vyvinout","vyvolat","vyvrhel","vyzdobit","vyznat","vzadu","vzbudit","vzchopit","vzdor","vzduch","vzdychat","vzestup","vzhledem","vzkaz","vzlykat","vznik","vzorek","vzpoura","vztah","vztek","xylofon","zabrat","zabydlet","zachovat","zadarmo","zadusit","zafoukat","zahltit","zahodit","zahrada","zahynout","zajatec","zajet","zajistit","zaklepat","zakoupit","zalepit","zamezit","zamotat","zamyslet","zanechat","zanikat","zaplatit","zapojit","zapsat","zarazit","zastavit","zasunout","zatajit","zatemnit","zatknout","zaujmout","zavalit","zavelet","zavinit","zavolat","zavrtat","zazvonit","zbavit","zbrusu","zbudovat","zbytek","zdaleka","zdarma","zdatnost","zdivo","zdobit","zdroj","zdvih","zdymadlo","zelenina","zeman","zemina","zeptat","zezadu","zezdola","zhatit","zhltnout","zhluboka","zhotovit","zhruba","zima","zimnice","zjemnit","zklamat","zkoumat","zkratka","zkumavka","zlato","zlehka","zloba","zlom","zlost","zlozvyk","zmapovat","zmar","zmatek","zmije","zmizet","zmocnit","zmodrat","zmrzlina","zmutovat","znak","znalost","znamenat","znovu","zobrazit","zotavit","zoubek","zoufale","zplodit","zpomalit","zprava","zprostit","zprudka","zprvu","zrada","zranit","zrcadlo","zrnitost","zrno","zrovna","zrychlit","zrzavost","zticha","ztratit","zubovina","zubr","zvednout","zvenku","zvesela","zvon","zvrat","zvukovod","zvyk"]'),require$$1=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),require$$2$3=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),require$$3=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),require$$4=JSON.parse('["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","academie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquerir","acronyme","acteur","actif","actuel","adepte","adequat","adhesif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aerer","aeronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agreable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algebre","algue","aliener","aliment","alleger","alliage","allouer","allumer","alourdir","alpaga","altesse","alveole","amateur","ambigu","ambre","amenager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","aneantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","aperitif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arteriel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","banniere","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","belier","belote","benefice","berceau","berger","berline","bermuda","besace","besogne","betail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","breche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafeine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","camera","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cedille","ceinture","celeste","cellule","cendrier","censurer","central","cercle","cerebral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chequier","chercher","cheval","chien","chiffre","chignon","chimere","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinema","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohesion","coiffer","coincer","colere","colibri","colline","colmater","colonel","combat","comedie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortege","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","creature","crediter","cremeux","creuser","crevette","cribler","crier","cristal","critere","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillere","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","debattre","debiter","deborder","debrider","debutant","decaler","decembre","dechirer","decider","declarer","decorer","decrire","decupler","dedale","deductif","deesse","defensif","defiler","defrayer","degager","degivrer","deglutir","degrafer","dejeuner","delice","deloger","demander","demeurer","demolir","denicher","denouer","dentelle","denuder","depart","depenser","dephaser","deplacer","deposer","deranger","derober","desastre","descente","desert","designer","desobeir","dessiner","destrier","detacher","detester","detourer","detresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","differer","digerer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","eblouir","ecarter","echarpe","echelle","eclairer","eclipse","eclore","ecluse","ecole","economie","ecorce","ecouter","ecraser","ecremer","ecrivain","ecrou","ecume","ecureuil","edifier","eduquer","effacer","effectif","effigie","effort","effrayer","effusion","egaliser","egarer","ejecter","elaborer","elargir","electron","elegant","elephant","eleve","eligible","elitisme","eloge","elucider","eluder","emballer","embellir","embryon","emeraude","emission","emmener","emotion","emouvoir","empereur","employer","emporter","emprise","emulsion","encadrer","enchere","enclave","encoche","endiguer","endosser","endroit","enduire","energie","enfance","enfermer","enfouir","engager","engin","englober","enigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","enumerer","envahir","enviable","envoyer","enzyme","eolien","epaissir","epargne","epatant","epaule","epicerie","epidemie","epier","epilogue","epine","episode","epitaphe","epoque","epreuve","eprouver","epuisant","equerre","equipe","eriger","erosion","erreur","eruption","escalier","espadon","espece","espiegle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","etagere","etaler","etanche","etatique","eteindre","etendoir","eternel","ethanol","ethique","ethnie","etirer","etoffer","etoile","etonnant","etourdir","etrange","etroit","etude","euphorie","evaluer","evasion","eventail","evidence","eviter","evolutif","evoquer","exact","exagerer","exaucer","exceller","excitant","exclusif","excuse","executer","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expedier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","febrile","feconder","federer","felin","femme","femur","fendoir","feodal","fermer","feroce","ferveur","festival","feuille","feutre","fevrier","fiasco","ficeler","fictif","fidele","figure","filature","filetage","filiere","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fleau","fleche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougere","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fregate","freiner","frelon","fremir","frenesie","frere","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","geant","gelatine","gelule","gendarme","general","genie","genou","gentil","geologie","geometre","geranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyere","guepard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","helium","hematome","herbe","herisson","hermine","heron","hesiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogene","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiene","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","imperial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inedit","ineptie","inexact","infini","infliger","informer","infusion","ingerer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irreel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvenile","kayak","kimono","kiosque","label","labial","labourer","lacerer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","legal","leger","legume","lessive","lettre","levier","lexique","lezard","liasse","liberer","libre","licence","licorne","liege","lievre","ligature","ligoter","ligue","limer","limite","limonade","limpide","lineaire","lingot","lionceau","liquide","lisiere","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumiere","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","malefice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","materiel","matiere","matraque","maudire","maussade","mauve","maximal","mechant","meconnu","medaille","medecin","mediter","meduse","meilleur","melange","melodie","membre","memoire","menacer","mener","menhir","mensonge","mentor","mercredi","merite","merle","messager","mesure","metal","meteore","methode","metier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mineral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murene","murmure","muscle","museum","musicien","mutation","muter","mutuel","myriade","myrtille","mystere","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nebuleux","nectar","nefaste","negation","negliger","negocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numero","nuptial","nuque","nutritif","obeir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","ocean","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onereux","onirique","opale","opaque","operer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygene","ozone","paisible","palace","palmares","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pasteque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pelican","pelle","pelouse","peluche","pendule","penetrer","penible","pensif","penurie","pepite","peplum","perdrix","perforer","periode","permuter","perplexe","persil","perte","peser","petale","petit","petrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","piece","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poesie","poete","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponderer","poney","portique","position","posseder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","precieux","predire","prefixe","prelude","prenom","presence","pretexte","prevoir","primitif","prince","prison","priver","probleme","proceder","prodige","profond","progres","proie","projeter","prologue","promener","propre","prospere","proteger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quietude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","reactif","reagir","realiser","reanimer","recevoir","reciter","reclamer","recolter","recruter","reculer","recycler","rediger","redouter","refaire","reflexe","reformer","refrain","refuge","regalien","region","reglage","regulier","reiterer","rejeter","rejouer","relatif","relever","relief","remarque","remede","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","reserve","resineux","resoudre","respect","rester","resultat","retablir","retenir","reticule","retomber","retracer","reunion","reussir","revanche","revivre","revolte","revulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","riviere","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scelerat","scenario","sceptre","schema","science","scinder","score","scrutin","sculpter","seance","secable","secher","secouer","secreter","sedatif","seduire","seigneur","sejour","selectif","semaine","sembler","semence","seminal","senateur","sensible","sentence","separer","sequence","serein","sergent","serieux","serrure","serum","service","sesame","sevir","sevrage","sextuple","sideral","siecle","sieger","siffler","sigle","signal","silence","silicium","simple","sincere","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","special","sphere","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succes","sucre","suffixe","suggerer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symetrie","synapse","syntaxe","systeme","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","temoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tetine","texte","theme","theorie","therapie","thorax","tibia","tiede","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolerant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trefle","tremper","tresor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","vegetal","vehicule","veinard","veloce","vendredi","venerer","venger","venimeux","ventouse","verdure","verin","vernir","verrou","verser","vertu","veston","veteran","vetuste","vexant","vexer","viaduc","viande","victoire","vidange","video","vignette","vigueur","vilain","village","vinaigre","violon","vipere","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xenon","yacht","zebre","zenith","zeste","zoologie"]'),require$$5=JSON.parse('["abaco","abbaglio","abbinato","abete","abisso","abolire","abrasivo","abrogato","accadere","accenno","accusato","acetone","achille","acido","acqua","acre","acrilico","acrobata","acuto","adagio","addebito","addome","adeguato","aderire","adipe","adottare","adulare","affabile","affetto","affisso","affranto","aforisma","afoso","africano","agave","agente","agevole","aggancio","agire","agitare","agonismo","agricolo","agrumeto","aguzzo","alabarda","alato","albatro","alberato","albo","albume","alce","alcolico","alettone","alfa","algebra","aliante","alibi","alimento","allagato","allegro","allievo","allodola","allusivo","almeno","alogeno","alpaca","alpestre","altalena","alterno","alticcio","altrove","alunno","alveolo","alzare","amalgama","amanita","amarena","ambito","ambrato","ameba","america","ametista","amico","ammasso","ammenda","ammirare","ammonito","amore","ampio","ampliare","amuleto","anacardo","anagrafe","analista","anarchia","anatra","anca","ancella","ancora","andare","andrea","anello","angelo","angolare","angusto","anima","annegare","annidato","anno","annuncio","anonimo","anticipo","anzi","apatico","apertura","apode","apparire","appetito","appoggio","approdo","appunto","aprile","arabica","arachide","aragosta","araldica","arancio","aratura","arazzo","arbitro","archivio","ardito","arenile","argento","argine","arguto","aria","armonia","arnese","arredato","arringa","arrosto","arsenico","arso","artefice","arzillo","asciutto","ascolto","asepsi","asettico","asfalto","asino","asola","aspirato","aspro","assaggio","asse","assoluto","assurdo","asta","astenuto","astice","astratto","atavico","ateismo","atomico","atono","attesa","attivare","attorno","attrito","attuale","ausilio","austria","autista","autonomo","autunno","avanzato","avere","avvenire","avviso","avvolgere","azione","azoto","azzimo","azzurro","babele","baccano","bacino","baco","badessa","badilata","bagnato","baita","balcone","baldo","balena","ballata","balzano","bambino","bandire","baraonda","barbaro","barca","baritono","barlume","barocco","basilico","basso","batosta","battuto","baule","bava","bavosa","becco","beffa","belgio","belva","benda","benevole","benigno","benzina","bere","berlina","beta","bibita","bici","bidone","bifido","biga","bilancia","bimbo","binocolo","biologo","bipede","bipolare","birbante","birra","biscotto","bisesto","bisnonno","bisonte","bisturi","bizzarro","blando","blatta","bollito","bonifico","bordo","bosco","botanico","bottino","bozzolo","braccio","bradipo","brama","branca","bravura","bretella","brevetto","brezza","briglia","brillante","brindare","broccolo","brodo","bronzina","brullo","bruno","bubbone","buca","budino","buffone","buio","bulbo","buono","burlone","burrasca","bussola","busta","cadetto","caduco","calamaro","calcolo","calesse","calibro","calmo","caloria","cambusa","camerata","camicia","cammino","camola","campale","canapa","candela","cane","canino","canotto","cantina","capace","capello","capitolo","capogiro","cappero","capra","capsula","carapace","carcassa","cardo","carisma","carovana","carretto","cartolina","casaccio","cascata","caserma","caso","cassone","castello","casuale","catasta","catena","catrame","cauto","cavillo","cedibile","cedrata","cefalo","celebre","cellulare","cena","cenone","centesimo","ceramica","cercare","certo","cerume","cervello","cesoia","cespo","ceto","chela","chiaro","chicca","chiedere","chimera","china","chirurgo","chitarra","ciao","ciclismo","cifrare","cigno","cilindro","ciottolo","circa","cirrosi","citrico","cittadino","ciuffo","civetta","civile","classico","clinica","cloro","cocco","codardo","codice","coerente","cognome","collare","colmato","colore","colposo","coltivato","colza","coma","cometa","commando","comodo","computer","comune","conciso","condurre","conferma","congelare","coniuge","connesso","conoscere","consumo","continuo","convegno","coperto","copione","coppia","copricapo","corazza","cordata","coricato","cornice","corolla","corpo","corredo","corsia","cortese","cosmico","costante","cottura","covato","cratere","cravatta","creato","credere","cremoso","crescita","creta","criceto","crinale","crisi","critico","croce","cronaca","crostata","cruciale","crusca","cucire","cuculo","cugino","cullato","cupola","curatore","cursore","curvo","cuscino","custode","dado","daino","dalmata","damerino","daniela","dannoso","danzare","datato","davanti","davvero","debutto","decennio","deciso","declino","decollo","decreto","dedicato","definito","deforme","degno","delegare","delfino","delirio","delta","demenza","denotato","dentro","deposito","derapata","derivare","deroga","descritto","deserto","desiderio","desumere","detersivo","devoto","diametro","dicembre","diedro","difeso","diffuso","digerire","digitale","diluvio","dinamico","dinnanzi","dipinto","diploma","dipolo","diradare","dire","dirotto","dirupo","disagio","discreto","disfare","disgelo","disposto","distanza","disumano","dito","divano","divelto","dividere","divorato","doblone","docente","doganale","dogma","dolce","domato","domenica","dominare","dondolo","dono","dormire","dote","dottore","dovuto","dozzina","drago","druido","dubbio","dubitare","ducale","duna","duomo","duplice","duraturo","ebano","eccesso","ecco","eclissi","economia","edera","edicola","edile","editoria","educare","egemonia","egli","egoismo","egregio","elaborato","elargire","elegante","elencato","eletto","elevare","elfico","elica","elmo","elsa","eluso","emanato","emblema","emesso","emiro","emotivo","emozione","empirico","emulo","endemico","enduro","energia","enfasi","enoteca","entrare","enzima","epatite","epilogo","episodio","epocale","eppure","equatore","erario","erba","erboso","erede","eremita","erigere","ermetico","eroe","erosivo","errante","esagono","esame","esanime","esaudire","esca","esempio","esercito","esibito","esigente","esistere","esito","esofago","esortato","esoso","espanso","espresso","essenza","esso","esteso","estimare","estonia","estroso","esultare","etilico","etnico","etrusco","etto","euclideo","europa","evaso","evidenza","evitato","evoluto","evviva","fabbrica","faccenda","fachiro","falco","famiglia","fanale","fanfara","fango","fantasma","fare","farfalla","farinoso","farmaco","fascia","fastoso","fasullo","faticare","fato","favoloso","febbre","fecola","fede","fegato","felpa","feltro","femmina","fendere","fenomeno","fermento","ferro","fertile","fessura","festivo","fetta","feudo","fiaba","fiducia","fifa","figurato","filo","finanza","finestra","finire","fiore","fiscale","fisico","fiume","flacone","flamenco","flebo","flemma","florido","fluente","fluoro","fobico","focaccia","focoso","foderato","foglio","folata","folclore","folgore","fondente","fonetico","fonia","fontana","forbito","forchetta","foresta","formica","fornaio","foro","fortezza","forzare","fosfato","fosso","fracasso","frana","frassino","fratello","freccetta","frenata","fresco","frigo","frollino","fronde","frugale","frutta","fucilata","fucsia","fuggente","fulmine","fulvo","fumante","fumetto","fumoso","fune","funzione","fuoco","furbo","furgone","furore","fuso","futile","gabbiano","gaffe","galateo","gallina","galoppo","gambero","gamma","garanzia","garbo","garofano","garzone","gasdotto","gasolio","gastrico","gatto","gaudio","gazebo","gazzella","geco","gelatina","gelso","gemello","gemmato","gene","genitore","gennaio","genotipo","gergo","ghepardo","ghiaccio","ghisa","giallo","gilda","ginepro","giocare","gioiello","giorno","giove","girato","girone","gittata","giudizio","giurato","giusto","globulo","glutine","gnomo","gobba","golf","gomito","gommone","gonfio","gonna","governo","gracile","grado","grafico","grammo","grande","grattare","gravoso","grazia","greca","gregge","grifone","grigio","grinza","grotta","gruppo","guadagno","guaio","guanto","guardare","gufo","guidare","ibernato","icona","identico","idillio","idolo","idra","idrico","idrogeno","igiene","ignaro","ignorato","ilare","illeso","illogico","illudere","imballo","imbevuto","imbocco","imbuto","immane","immerso","immolato","impacco","impeto","impiego","importo","impronta","inalare","inarcare","inattivo","incanto","incendio","inchino","incisivo","incluso","incontro","incrocio","incubo","indagine","india","indole","inedito","infatti","infilare","inflitto","ingaggio","ingegno","inglese","ingordo","ingrosso","innesco","inodore","inoltrare","inondato","insano","insetto","insieme","insonnia","insulina","intasato","intero","intonaco","intuito","inumidire","invalido","invece","invito","iperbole","ipnotico","ipotesi","ippica","iride","irlanda","ironico","irrigato","irrorare","isolato","isotopo","isterico","istituto","istrice","italia","iterare","labbro","labirinto","lacca","lacerato","lacrima","lacuna","laddove","lago","lampo","lancetta","lanterna","lardoso","larga","laringe","lastra","latenza","latino","lattuga","lavagna","lavoro","legale","leggero","lembo","lentezza","lenza","leone","lepre","lesivo","lessato","lesto","letterale","leva","levigato","libero","lido","lievito","lilla","limatura","limitare","limpido","lineare","lingua","liquido","lira","lirica","lisca","lite","litigio","livrea","locanda","lode","logica","lombare","londra","longevo","loquace","lorenzo","loto","lotteria","luce","lucidato","lumaca","luminoso","lungo","lupo","luppolo","lusinga","lusso","lutto","macabro","macchina","macero","macinato","madama","magico","maglia","magnete","magro","maiolica","malafede","malgrado","malinteso","malsano","malto","malumore","mana","mancia","mandorla","mangiare","manifesto","mannaro","manovra","mansarda","mantide","manubrio","mappa","maratona","marcire","maretta","marmo","marsupio","maschera","massaia","mastino","materasso","matricola","mattone","maturo","mazurca","meandro","meccanico","mecenate","medesimo","meditare","mega","melassa","melis","melodia","meninge","meno","mensola","mercurio","merenda","merlo","meschino","mese","messere","mestolo","metallo","metodo","mettere","miagolare","mica","micelio","michele","microbo","midollo","miele","migliore","milano","milite","mimosa","minerale","mini","minore","mirino","mirtillo","miscela","missiva","misto","misurare","mitezza","mitigare","mitra","mittente","mnemonico","modello","modifica","modulo","mogano","mogio","mole","molosso","monastero","monco","mondina","monetario","monile","monotono","monsone","montato","monviso","mora","mordere","morsicato","mostro","motivato","motosega","motto","movenza","movimento","mozzo","mucca","mucosa","muffa","mughetto","mugnaio","mulatto","mulinello","multiplo","mummia","munto","muovere","murale","musa","muscolo","musica","mutevole","muto","nababbo","nafta","nanometro","narciso","narice","narrato","nascere","nastrare","naturale","nautica","naviglio","nebulosa","necrosi","negativo","negozio","nemmeno","neofita","neretto","nervo","nessuno","nettuno","neutrale","neve","nevrotico","nicchia","ninfa","nitido","nobile","nocivo","nodo","nome","nomina","nordico","normale","norvegese","nostrano","notare","notizia","notturno","novella","nucleo","nulla","numero","nuovo","nutrire","nuvola","nuziale","oasi","obbedire","obbligo","obelisco","oblio","obolo","obsoleto","occasione","occhio","occidente","occorrere","occultare","ocra","oculato","odierno","odorare","offerta","offrire","offuscato","oggetto","oggi","ognuno","olandese","olfatto","oliato","oliva","ologramma","oltre","omaggio","ombelico","ombra","omega","omissione","ondoso","onere","onice","onnivoro","onorevole","onta","operato","opinione","opposto","oracolo","orafo","ordine","orecchino","orefice","orfano","organico","origine","orizzonte","orma","ormeggio","ornativo","orologio","orrendo","orribile","ortensia","ortica","orzata","orzo","osare","oscurare","osmosi","ospedale","ospite","ossa","ossidare","ostacolo","oste","otite","otre","ottagono","ottimo","ottobre","ovale","ovest","ovino","oviparo","ovocito","ovunque","ovviare","ozio","pacchetto","pace","pacifico","padella","padrone","paese","paga","pagina","palazzina","palesare","pallido","palo","palude","pandoro","pannello","paolo","paonazzo","paprica","parabola","parcella","parere","pargolo","pari","parlato","parola","partire","parvenza","parziale","passivo","pasticca","patacca","patologia","pattume","pavone","peccato","pedalare","pedonale","peggio","peloso","penare","pendice","penisola","pennuto","penombra","pensare","pentola","pepe","pepita","perbene","percorso","perdonato","perforare","pergamena","periodo","permesso","perno","perplesso","persuaso","pertugio","pervaso","pesatore","pesista","peso","pestifero","petalo","pettine","petulante","pezzo","piacere","pianta","piattino","piccino","picozza","piega","pietra","piffero","pigiama","pigolio","pigro","pila","pilifero","pillola","pilota","pimpante","pineta","pinna","pinolo","pioggia","piombo","piramide","piretico","pirite","pirolisi","pitone","pizzico","placebo","planare","plasma","platano","plenario","pochezza","poderoso","podismo","poesia","poggiare","polenta","poligono","pollice","polmonite","polpetta","polso","poltrona","polvere","pomice","pomodoro","ponte","popoloso","porfido","poroso","porpora","porre","portata","posa","positivo","possesso","postulato","potassio","potere","pranzo","prassi","pratica","precluso","predica","prefisso","pregiato","prelievo","premere","prenotare","preparato","presenza","pretesto","prevalso","prima","principe","privato","problema","procura","produrre","profumo","progetto","prolunga","promessa","pronome","proposta","proroga","proteso","prova","prudente","prugna","prurito","psiche","pubblico","pudica","pugilato","pugno","pulce","pulito","pulsante","puntare","pupazzo","pupilla","puro","quadro","qualcosa","quasi","querela","quota","raccolto","raddoppio","radicale","radunato","raffica","ragazzo","ragione","ragno","ramarro","ramingo","ramo","randagio","rantolare","rapato","rapina","rappreso","rasatura","raschiato","rasente","rassegna","rastrello","rata","ravveduto","reale","recepire","recinto","recluta","recondito","recupero","reddito","redimere","regalato","registro","regola","regresso","relazione","remare","remoto","renna","replica","reprimere","reputare","resa","residente","responso","restauro","rete","retina","retorica","rettifica","revocato","riassunto","ribadire","ribelle","ribrezzo","ricarica","ricco","ricevere","riciclato","ricordo","ricreduto","ridicolo","ridurre","rifasare","riflesso","riforma","rifugio","rigare","rigettato","righello","rilassato","rilevato","rimanere","rimbalzo","rimedio","rimorchio","rinascita","rincaro","rinforzo","rinnovo","rinomato","rinsavito","rintocco","rinuncia","rinvenire","riparato","ripetuto","ripieno","riportare","ripresa","ripulire","risata","rischio","riserva","risibile","riso","rispetto","ristoro","risultato","risvolto","ritardo","ritegno","ritmico","ritrovo","riunione","riva","riverso","rivincita","rivolto","rizoma","roba","robotico","robusto","roccia","roco","rodaggio","rodere","roditore","rogito","rollio","romantico","rompere","ronzio","rosolare","rospo","rotante","rotondo","rotula","rovescio","rubizzo","rubrica","ruga","rullino","rumine","rumoroso","ruolo","rupe","russare","rustico","sabato","sabbiare","sabotato","sagoma","salasso","saldatura","salgemma","salivare","salmone","salone","saltare","saluto","salvo","sapere","sapido","saporito","saraceno","sarcasmo","sarto","sassoso","satellite","satira","satollo","saturno","savana","savio","saziato","sbadiglio","sbalzo","sbancato","sbarra","sbattere","sbavare","sbendare","sbirciare","sbloccato","sbocciato","sbrinare","sbruffone","sbuffare","scabroso","scadenza","scala","scambiare","scandalo","scapola","scarso","scatenare","scavato","scelto","scenico","scettro","scheda","schiena","sciarpa","scienza","scindere","scippo","sciroppo","scivolo","sclerare","scodella","scolpito","scomparto","sconforto","scoprire","scorta","scossone","scozzese","scriba","scrollare","scrutinio","scuderia","scultore","scuola","scuro","scusare","sdebitare","sdoganare","seccatura","secondo","sedano","seggiola","segnalato","segregato","seguito","selciato","selettivo","sella","selvaggio","semaforo","sembrare","seme","seminato","sempre","senso","sentire","sepolto","sequenza","serata","serbato","sereno","serio","serpente","serraglio","servire","sestina","setola","settimana","sfacelo","sfaldare","sfamato","sfarzoso","sfaticato","sfera","sfida","sfilato","sfinge","sfocato","sfoderare","sfogo","sfoltire","sforzato","sfratto","sfruttato","sfuggito","sfumare","sfuso","sgabello","sgarbato","sgonfiare","sgorbio","sgrassato","sguardo","sibilo","siccome","sierra","sigla","signore","silenzio","sillaba","simbolo","simpatico","simulato","sinfonia","singolo","sinistro","sino","sintesi","sinusoide","sipario","sisma","sistole","situato","slitta","slogatura","sloveno","smarrito","smemorato","smentito","smeraldo","smilzo","smontare","smottato","smussato","snellire","snervato","snodo","sobbalzo","sobrio","soccorso","sociale","sodale","soffitto","sogno","soldato","solenne","solido","sollazzo","solo","solubile","solvente","somatico","somma","sonda","sonetto","sonnifero","sopire","soppeso","sopra","sorgere","sorpasso","sorriso","sorso","sorteggio","sorvolato","sospiro","sosta","sottile","spada","spalla","spargere","spatola","spavento","spazzola","specie","spedire","spegnere","spelatura","speranza","spessore","spettrale","spezzato","spia","spigoloso","spillato","spinoso","spirale","splendido","sportivo","sposo","spranga","sprecare","spronato","spruzzo","spuntino","squillo","sradicare","srotolato","stabile","stacco","staffa","stagnare","stampato","stantio","starnuto","stasera","statuto","stelo","steppa","sterzo","stiletto","stima","stirpe","stivale","stizzoso","stonato","storico","strappo","stregato","stridulo","strozzare","strutto","stuccare","stufo","stupendo","subentro","succoso","sudore","suggerito","sugo","sultano","suonare","superbo","supporto","surgelato","surrogato","sussurro","sutura","svagare","svedese","sveglio","svelare","svenuto","svezia","sviluppo","svista","svizzera","svolta","svuotare","tabacco","tabulato","tacciare","taciturno","tale","talismano","tampone","tannino","tara","tardivo","targato","tariffa","tarpare","tartaruga","tasto","tattico","taverna","tavolata","tazza","teca","tecnico","telefono","temerario","tempo","temuto","tendone","tenero","tensione","tentacolo","teorema","terme","terrazzo","terzetto","tesi","tesserato","testato","tetro","tettoia","tifare","tigella","timbro","tinto","tipico","tipografo","tiraggio","tiro","titanio","titolo","titubante","tizio","tizzone","toccare","tollerare","tolto","tombola","tomo","tonfo","tonsilla","topazio","topologia","toppa","torba","tornare","torrone","tortora","toscano","tossire","tostatura","totano","trabocco","trachea","trafila","tragedia","tralcio","tramonto","transito","trapano","trarre","trasloco","trattato","trave","treccia","tremolio","trespolo","tributo","tricheco","trifoglio","trillo","trincea","trio","tristezza","triturato","trivella","tromba","trono","troppo","trottola","trovare","truccato","tubatura","tuffato","tulipano","tumulto","tunisia","turbare","turchino","tuta","tutela","ubicato","uccello","uccisore","udire","uditivo","uffa","ufficio","uguale","ulisse","ultimato","umano","umile","umorismo","uncinetto","ungere","ungherese","unicorno","unificato","unisono","unitario","unte","uovo","upupa","uragano","urgenza","urlo","usanza","usato","uscito","usignolo","usuraio","utensile","utilizzo","utopia","vacante","vaccinato","vagabondo","vagliato","valanga","valgo","valico","valletta","valoroso","valutare","valvola","vampata","vangare","vanitoso","vano","vantaggio","vanvera","vapore","varano","varcato","variante","vasca","vedetta","vedova","veduto","vegetale","veicolo","velcro","velina","velluto","veloce","venato","vendemmia","vento","verace","verbale","vergogna","verifica","vero","verruca","verticale","vescica","vessillo","vestale","veterano","vetrina","vetusto","viandante","vibrante","vicenda","vichingo","vicinanza","vidimare","vigilia","vigneto","vigore","vile","villano","vimini","vincitore","viola","vipera","virgola","virologo","virulento","viscoso","visione","vispo","vissuto","visura","vita","vitello","vittima","vivanda","vivido","viziare","voce","voga","volatile","volere","volpe","voragine","vulcano","zampogna","zanna","zappato","zattera","zavorra","zefiro","zelante","zelo","zenzero","zerbino","zibetto","zinco","zircone","zitto","zolla","zotico","zucchero","zufolo","zulu","zuppa"]'),require$$6=JSON.parse('["abaco","abdomen","abeja","abierto","abogado","abono","aborto","abrazo","abrir","abuelo","abuso","acabar","academia","acceso","accion","aceite","acelga","acento","aceptar","acido","aclarar","acne","acoger","acoso","activo","acto","actriz","actuar","acudir","acuerdo","acusar","adicto","admitir","adoptar","adorno","aduana","adulto","aereo","afectar","aficion","afinar","afirmar","agil","agitar","agonia","agosto","agotar","agregar","agrio","agua","agudo","aguila","aguja","ahogo","ahorro","aire","aislar","ajedrez","ajeno","ajuste","alacran","alambre","alarma","alba","album","alcalde","aldea","alegre","alejar","alerta","aleta","alfiler","alga","algodon","aliado","aliento","alivio","alma","almeja","almibar","altar","alteza","altivo","alto","altura","alumno","alzar","amable","amante","amapola","amargo","amasar","ambar","ambito","ameno","amigo","amistad","amor","amparo","amplio","ancho","anciano","ancla","andar","anden","anemia","angulo","anillo","animo","anis","anotar","antena","antiguo","antojo","anual","anular","anuncio","anadir","anejo","ano","apagar","aparato","apetito","apio","aplicar","apodo","aporte","apoyo","aprender","aprobar","apuesta","apuro","arado","arana","arar","arbitro","arbol","arbusto","archivo","arco","arder","ardilla","arduo","area","arido","aries","armonia","arnes","aroma","arpa","arpon","arreglo","arroz","arruga","arte","artista","asa","asado","asalto","ascenso","asegurar","aseo","asesor","asiento","asilo","asistir","asno","asombro","aspero","astilla","astro","astuto","asumir","asunto","atajo","ataque","atar","atento","ateo","atico","atleta","atomo","atraer","atroz","atun","audaz","audio","auge","aula","aumento","ausente","autor","aval","avance","avaro","ave","avellana","avena","avestruz","avion","aviso","ayer","ayuda","ayuno","azafran","azar","azote","azucar","azufre","azul","baba","babor","bache","bahia","baile","bajar","balanza","balcon","balde","bambu","banco","banda","bano","barba","barco","barniz","barro","bascula","baston","basura","batalla","bateria","batir","batuta","baul","bazar","bebe","bebida","bello","besar","beso","bestia","bicho","bien","bingo","blanco","bloque","blusa","boa","bobina","bobo","boca","bocina","boda","bodega","boina","bola","bolero","bolsa","bomba","bondad","bonito","bono","bonsai","borde","borrar","bosque","bote","botin","boveda","bozal","bravo","brazo","brecha","breve","brillo","brinco","brisa","broca","broma","bronce","brote","bruja","brusco","bruto","buceo","bucle","bueno","buey","bufanda","bufon","buho","buitre","bulto","burbuja","burla","burro","buscar","butaca","buzon","caballo","cabeza","cabina","cabra","cacao","cadaver","cadena","caer","cafe","caida","caiman","caja","cajon","cal","calamar","calcio","caldo","calidad","calle","calma","calor","calvo","cama","cambio","camello","camino","campo","cancer","candil","canela","canguro","canica","canto","cana","canon","caoba","caos","capaz","capitan","capote","captar","capucha","cara","carbon","carcel","careta","carga","carino","carne","carpeta","carro","carta","casa","casco","casero","caspa","castor","catorce","catre","caudal","causa","cazo","cebolla","ceder","cedro","celda","celebre","celoso","celula","cemento","ceniza","centro","cerca","cerdo","cereza","cero","cerrar","certeza","cesped","cetro","chacal","chaleco","champu","chancla","chapa","charla","chico","chiste","chivo","choque","choza","chuleta","chupar","ciclon","ciego","cielo","cien","cierto","cifra","cigarro","cima","cinco","cine","cinta","cipres","circo","ciruela","cisne","cita","ciudad","clamor","clan","claro","clase","clave","cliente","clima","clinica","cobre","coccion","cochino","cocina","coco","codigo","codo","cofre","coger","cohete","cojin","cojo","cola","colcha","colegio","colgar","colina","collar","colmo","columna","combate","comer","comida","comodo","compra","conde","conejo","conga","conocer","consejo","contar","copa","copia","corazon","corbata","corcho","cordon","corona","correr","coser","cosmos","costa","craneo","crater","crear","crecer","creido","crema","cria","crimen","cripta","crisis","cromo","cronica","croqueta","crudo","cruz","cuadro","cuarto","cuatro","cubo","cubrir","cuchara","cuello","cuento","cuerda","cuesta","cueva","cuidar","culebra","culpa","culto","cumbre","cumplir","cuna","cuneta","cuota","cupon","cupula","curar","curioso","curso","curva","cutis","dama","danza","dar","dardo","datil","deber","debil","decada","decir","dedo","defensa","definir","dejar","delfin","delgado","delito","demora","denso","dental","deporte","derecho","derrota","desayuno","deseo","desfile","desnudo","destino","desvio","detalle","detener","deuda","dia","diablo","diadema","diamante","diana","diario","dibujo","dictar","diente","dieta","diez","dificil","digno","dilema","diluir","dinero","directo","dirigir","disco","diseno","disfraz","diva","divino","doble","doce","dolor","domingo","don","donar","dorado","dormir","dorso","dos","dosis","dragon","droga","ducha","duda","duelo","dueno","dulce","duo","duque","durar","dureza","duro","ebano","ebrio","echar","eco","ecuador","edad","edicion","edificio","editor","educar","efecto","eficaz","eje","ejemplo","elefante","elegir","elemento","elevar","elipse","elite","elixir","elogio","eludir","embudo","emitir","emocion","empate","empeno","empleo","empresa","enano","encargo","enchufe","encia","enemigo","enero","enfado","enfermo","engano","enigma","enlace","enorme","enredo","ensayo","ensenar","entero","entrar","envase","envio","epoca","equipo","erizo","escala","escena","escolar","escribir","escudo","esencia","esfera","esfuerzo","espada","espejo","espia","esposa","espuma","esqui","estar","este","estilo","estufa","etapa","eterno","etica","etnia","evadir","evaluar","evento","evitar","exacto","examen","exceso","excusa","exento","exigir","exilio","existir","exito","experto","explicar","exponer","extremo","fabrica","fabula","fachada","facil","factor","faena","faja","falda","fallo","falso","faltar","fama","familia","famoso","faraon","farmacia","farol","farsa","fase","fatiga","fauna","favor","fax","febrero","fecha","feliz","feo","feria","feroz","fertil","fervor","festin","fiable","fianza","fiar","fibra","ficcion","ficha","fideo","fiebre","fiel","fiera","fiesta","figura","fijar","fijo","fila","filete","filial","filtro","fin","finca","fingir","finito","firma","flaco","flauta","flecha","flor","flota","fluir","flujo","fluor","fobia","foca","fogata","fogon","folio","folleto","fondo","forma","forro","fortuna","forzar","fosa","foto","fracaso","fragil","franja","frase","fraude","freir","freno","fresa","frio","frito","fruta","fuego","fuente","fuerza","fuga","fumar","funcion","funda","furgon","furia","fusil","futbol","futuro","gacela","gafas","gaita","gajo","gala","galeria","gallo","gamba","ganar","gancho","ganga","ganso","garaje","garza","gasolina","gastar","gato","gavilan","gemelo","gemir","gen","genero","genio","gente","geranio","gerente","germen","gesto","gigante","gimnasio","girar","giro","glaciar","globo","gloria","gol","golfo","goloso","golpe","goma","gordo","gorila","gorra","gota","goteo","gozar","grada","grafico","grano","grasa","gratis","grave","grieta","grillo","gripe","gris","grito","grosor","grua","grueso","grumo","grupo","guante","guapo","guardia","guerra","guia","guino","guion","guiso","guitarra","gusano","gustar","haber","habil","hablar","hacer","hacha","hada","hallar","hamaca","harina","haz","hazana","hebilla","hebra","hecho","helado","helio","hembra","herir","hermano","heroe","hervir","hielo","hierro","higado","higiene","hijo","himno","historia","hocico","hogar","hoguera","hoja","hombre","hongo","honor","honra","hora","hormiga","horno","hostil","hoyo","hueco","huelga","huerta","hueso","huevo","huida","huir","humano","humedo","humilde","humo","hundir","huracan","hurto","icono","ideal","idioma","idolo","iglesia","iglu","igual","ilegal","ilusion","imagen","iman","imitar","impar","imperio","imponer","impulso","incapaz","indice","inerte","infiel","informe","ingenio","inicio","inmenso","inmune","innato","insecto","instante","interes","intimo","intuir","inutil","invierno","ira","iris","ironia","isla","islote","jabali","jabon","jamon","jarabe","jardin","jarra","jaula","jazmin","jefe","jeringa","jinete","jornada","joroba","joven","joya","juerga","jueves","juez","jugador","jugo","juguete","juicio","junco","jungla","junio","juntar","jupiter","jurar","justo","juvenil","juzgar","kilo","koala","labio","lacio","lacra","lado","ladron","lagarto","lagrima","laguna","laico","lamer","lamina","lampara","lana","lancha","langosta","lanza","lapiz","largo","larva","lastima","lata","latex","latir","laurel","lavar","lazo","leal","leccion","leche","lector","leer","legion","legumbre","lejano","lengua","lento","lena","leon","leopardo","lesion","letal","letra","leve","leyenda","libertad","libro","licor","lider","lidiar","lienzo","liga","ligero","lima","limite","limon","limpio","lince","lindo","linea","lingote","lino","linterna","liquido","liso","lista","litera","litio","litro","llaga","llama","llanto","llave","llegar","llenar","llevar","llorar","llover","lluvia","lobo","locion","loco","locura","logica","logro","lombriz","lomo","lonja","lote","lucha","lucir","lugar","lujo","luna","lunes","lupa","lustro","luto","luz","maceta","macho","madera","madre","maduro","maestro","mafia","magia","mago","maiz","maldad","maleta","malla","malo","mama","mambo","mamut","manco","mando","manejar","manga","maniqui","manjar","mano","manso","manta","manana","mapa","maquina","mar","marco","marea","marfil","margen","marido","marmol","marron","martes","marzo","masa","mascara","masivo","matar","materia","matiz","matriz","maximo","mayor","mazorca","mecha","medalla","medio","medula","mejilla","mejor","melena","melon","memoria","menor","mensaje","mente","menu","mercado","merengue","merito","mes","meson","meta","meter","metodo","metro","mezcla","miedo","miel","miembro","miga","mil","milagro","militar","millon","mimo","mina","minero","minimo","minuto","miope","mirar","misa","miseria","misil","mismo","mitad","mito","mochila","mocion","moda","modelo","moho","mojar","molde","moler","molino","momento","momia","monarca","moneda","monja","monto","mono","morada","morder","moreno","morir","morro","morsa","mortal","mosca","mostrar","motivo","mover","movil","mozo","mucho","mudar","mueble","muela","muerte","muestra","mugre","mujer","mula","muleta","multa","mundo","muneca","mural","muro","musculo","museo","musgo","musica","muslo","nacar","nacion","nadar","naipe","naranja","nariz","narrar","nasal","natal","nativo","natural","nausea","naval","nave","navidad","necio","nectar","negar","negocio","negro","neon","nervio","neto","neutro","nevar","nevera","nicho","nido","niebla","nieto","ninez","nino","nitido","nivel","nobleza","noche","nomina","noria","norma","norte","nota","noticia","novato","novela","novio","nube","nuca","nucleo","nudillo","nudo","nuera","nueve","nuez","nulo","numero","nutria","oasis","obeso","obispo","objeto","obra","obrero","observar","obtener","obvio","oca","ocaso","oceano","ochenta","ocho","ocio","ocre","octavo","octubre","oculto","ocupar","ocurrir","odiar","odio","odisea","oeste","ofensa","oferta","oficio","ofrecer","ogro","oido","oir","ojo","ola","oleada","olfato","olivo","olla","olmo","olor","olvido","ombligo","onda","onza","opaco","opcion","opera","opinar","oponer","optar","optica","opuesto","oracion","orador","oral","orbita","orca","orden","oreja","organo","orgia","orgullo","oriente","origen","orilla","oro","orquesta","oruga","osadia","oscuro","osezno","oso","ostra","otono","otro","oveja","ovulo","oxido","oxigeno","oyente","ozono","pacto","padre","paella","pagina","pago","pais","pajaro","palabra","palco","paleta","palido","palma","paloma","palpar","pan","panal","panico","pantera","panuelo","papa","papel","papilla","paquete","parar","parcela","pared","parir","paro","parpado","parque","parrafo","parte","pasar","paseo","pasion","paso","pasta","pata","patio","patria","pausa","pauta","pavo","payaso","peaton","pecado","pecera","pecho","pedal","pedir","pegar","peine","pelar","peldano","pelea","peligro","pellejo","pelo","peluca","pena","pensar","penon","peon","peor","pepino","pequeno","pera","percha","perder","pereza","perfil","perico","perla","permiso","perro","persona","pesa","pesca","pesimo","pestana","petalo","petroleo","pez","pezuna","picar","pichon","pie","piedra","pierna","pieza","pijama","pilar","piloto","pimienta","pino","pintor","pinza","pina","piojo","pipa","pirata","pisar","piscina","piso","pista","piton","pizca","placa","plan","plata","playa","plaza","pleito","pleno","plomo","pluma","plural","pobre","poco","poder","podio","poema","poesia","poeta","polen","policia","pollo","polvo","pomada","pomelo","pomo","pompa","poner","porcion","portal","posada","poseer","posible","poste","potencia","potro","pozo","prado","precoz","pregunta","premio","prensa","preso","previo","primo","principe","prision","privar","proa","probar","proceso","producto","proeza","profesor","programa","prole","promesa","pronto","propio","proximo","prueba","publico","puchero","pudor","pueblo","puerta","puesto","pulga","pulir","pulmon","pulpo","pulso","puma","punto","punal","puno","pupa","pupila","pure","quedar","queja","quemar","querer","queso","quieto","quimica","quince","quitar","rabano","rabia","rabo","racion","radical","raiz","rama","rampa","rancho","rango","rapaz","rapido","rapto","rasgo","raspa","rato","rayo","raza","razon","reaccion","realidad","rebano","rebote","recaer","receta","rechazo","recoger","recreo","recto","recurso","red","redondo","reducir","reflejo","reforma","refran","refugio","regalo","regir","regla","regreso","rehen","reino","reir","reja","relato","relevo","relieve","relleno","reloj","remar","remedio","remo","rencor","rendir","renta","reparto","repetir","reposo","reptil","res","rescate","resina","respeto","resto","resumen","retiro","retorno","retrato","reunir","reves","revista","rey","rezar","rico","riego","rienda","riesgo","rifa","rigido","rigor","rincon","rinon","rio","riqueza","risa","ritmo","rito","rizo","roble","roce","rociar","rodar","rodeo","rodilla","roer","rojizo","rojo","romero","romper","ron","ronco","ronda","ropa","ropero","rosa","rosca","rostro","rotar","rubi","rubor","rudo","rueda","rugir","ruido","ruina","ruleta","rulo","rumbo","rumor","ruptura","ruta","rutina","sabado","saber","sabio","sable","sacar","sagaz","sagrado","sala","saldo","salero","salir","salmon","salon","salsa","salto","salud","salvar","samba","sancion","sandia","sanear","sangre","sanidad","sano","santo","sapo","saque","sardina","sarten","sastre","satan","sauna","saxofon","seccion","seco","secreto","secta","sed","seguir","seis","sello","selva","semana","semilla","senda","sensor","senal","senor","separar","sepia","sequia","ser","serie","sermon","servir","sesenta","sesion","seta","setenta","severo","sexo","sexto","sidra","siesta","siete","siglo","signo","silaba","silbar","silencio","silla","simbolo","simio","sirena","sistema","sitio","situar","sobre","socio","sodio","sol","solapa","soldado","soledad","solido","soltar","solucion","sombra","sondeo","sonido","sonoro","sonrisa","sopa","soplar","soporte","sordo","sorpresa","sorteo","sosten","sotano","suave","subir","suceso","sudor","suegra","suelo","sueno","suerte","sufrir","sujeto","sultan","sumar","superar","suplir","suponer","supremo","sur","surco","sureno","surgir","susto","sutil","tabaco","tabique","tabla","tabu","taco","tacto","tajo","talar","talco","talento","talla","talon","tamano","tambor","tango","tanque","tapa","tapete","tapia","tapon","taquilla","tarde","tarea","tarifa","tarjeta","tarot","tarro","tarta","tatuaje","tauro","taza","tazon","teatro","techo","tecla","tecnica","tejado","tejer","tejido","tela","telefono","tema","temor","templo","tenaz","tender","tener","tenis","tenso","teoria","terapia","terco","termino","ternura","terror","tesis","tesoro","testigo","tetera","texto","tez","tibio","tiburon","tiempo","tienda","tierra","tieso","tigre","tijera","tilde","timbre","timido","timo","tinta","tio","tipico","tipo","tira","tiron","titan","titere","titulo","tiza","toalla","tobillo","tocar","tocino","todo","toga","toldo","tomar","tono","tonto","topar","tope","toque","torax","torero","tormenta","torneo","toro","torpedo","torre","torso","tortuga","tos","tosco","toser","toxico","trabajo","tractor","traer","trafico","trago","traje","tramo","trance","trato","trauma","trazar","trebol","tregua","treinta","tren","trepar","tres","tribu","trigo","tripa","triste","triunfo","trofeo","trompa","tronco","tropa","trote","trozo","truco","trueno","trufa","tuberia","tubo","tuerto","tumba","tumor","tunel","tunica","turbina","turismo","turno","tutor","ubicar","ulcera","umbral","unidad","unir","universo","uno","untar","una","urbano","urbe","urgente","urna","usar","usuario","util","utopia","uva","vaca","vacio","vacuna","vagar","vago","vaina","vajilla","vale","valido","valle","valor","valvula","vampiro","vara","variar","varon","vaso","vecino","vector","vehiculo","veinte","vejez","vela","velero","veloz","vena","vencer","venda","veneno","vengar","venir","venta","venus","ver","verano","verbo","verde","vereda","verja","verso","verter","via","viaje","vibrar","vicio","victima","vida","video","vidrio","viejo","viernes","vigor","vil","villa","vinagre","vino","vinedo","violin","viral","virgo","virtud","visor","vispera","vista","vitamina","viudo","vivaz","vivero","vivir","vivo","volcan","volumen","volver","voraz","votar","voto","voz","vuelo","vulgar","yacer","yate","yegua","yema","yerno","yeso","yodo","yoga","yogur","zafiro","zanja","zapato","zarza","zona","zorro","zumo","zurdo"]'),require$$7=JSON.parse('["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]'),require$$8=JSON.parse('["abacate","abaixo","abalar","abater","abduzir","abelha","aberto","abismo","abotoar","abranger","abreviar","abrigar","abrupto","absinto","absoluto","absurdo","abutre","acabado","acalmar","acampar","acanhar","acaso","aceitar","acelerar","acenar","acervo","acessar","acetona","achatar","acidez","acima","acionado","acirrar","aclamar","aclive","acolhida","acomodar","acoplar","acordar","acumular","acusador","adaptar","adega","adentro","adepto","adequar","aderente","adesivo","adeus","adiante","aditivo","adjetivo","adjunto","admirar","adorar","adquirir","adubo","adverso","advogado","aeronave","afastar","aferir","afetivo","afinador","afivelar","aflito","afluente","afrontar","agachar","agarrar","agasalho","agenciar","agilizar","agiota","agitado","agora","agradar","agreste","agrupar","aguardar","agulha","ajoelhar","ajudar","ajustar","alameda","alarme","alastrar","alavanca","albergue","albino","alcatra","aldeia","alecrim","alegria","alertar","alface","alfinete","algum","alheio","aliar","alicate","alienar","alinhar","aliviar","almofada","alocar","alpiste","alterar","altitude","alucinar","alugar","aluno","alusivo","alvo","amaciar","amador","amarelo","amassar","ambas","ambiente","ameixa","amenizar","amido","amistoso","amizade","amolador","amontoar","amoroso","amostra","amparar","ampliar","ampola","anagrama","analisar","anarquia","anatomia","andaime","anel","anexo","angular","animar","anjo","anomalia","anotado","ansioso","anterior","anuidade","anunciar","anzol","apagador","apalpar","apanhado","apego","apelido","apertada","apesar","apetite","apito","aplauso","aplicada","apoio","apontar","aposta","aprendiz","aprovar","aquecer","arame","aranha","arara","arcada","ardente","areia","arejar","arenito","aresta","argiloso","argola","arma","arquivo","arraial","arrebate","arriscar","arroba","arrumar","arsenal","arterial","artigo","arvoredo","asfaltar","asilado","aspirar","assador","assinar","assoalho","assunto","astral","atacado","atadura","atalho","atarefar","atear","atender","aterro","ateu","atingir","atirador","ativo","atoleiro","atracar","atrevido","atriz","atual","atum","auditor","aumentar","aura","aurora","autismo","autoria","autuar","avaliar","avante","avaria","avental","avesso","aviador","avisar","avulso","axila","azarar","azedo","azeite","azulejo","babar","babosa","bacalhau","bacharel","bacia","bagagem","baiano","bailar","baioneta","bairro","baixista","bajular","baleia","baliza","balsa","banal","bandeira","banho","banir","banquete","barato","barbado","baronesa","barraca","barulho","baseado","bastante","batata","batedor","batida","batom","batucar","baunilha","beber","beijo","beirada","beisebol","beldade","beleza","belga","beliscar","bendito","bengala","benzer","berimbau","berlinda","berro","besouro","bexiga","bezerro","bico","bicudo","bienal","bifocal","bifurcar","bigorna","bilhete","bimestre","bimotor","biologia","biombo","biosfera","bipolar","birrento","biscoito","bisneto","bispo","bissexto","bitola","bizarro","blindado","bloco","bloquear","boato","bobagem","bocado","bocejo","bochecha","boicotar","bolada","boletim","bolha","bolo","bombeiro","bonde","boneco","bonita","borbulha","borda","boreal","borracha","bovino","boxeador","branco","brasa","braveza","breu","briga","brilho","brincar","broa","brochura","bronzear","broto","bruxo","bucha","budismo","bufar","bule","buraco","busca","busto","buzina","cabana","cabelo","cabide","cabo","cabrito","cacau","cacetada","cachorro","cacique","cadastro","cadeado","cafezal","caiaque","caipira","caixote","cajado","caju","calafrio","calcular","caldeira","calibrar","calmante","calota","camada","cambista","camisa","camomila","campanha","camuflar","canavial","cancelar","caneta","canguru","canhoto","canivete","canoa","cansado","cantar","canudo","capacho","capela","capinar","capotar","capricho","captador","capuz","caracol","carbono","cardeal","careca","carimbar","carneiro","carpete","carreira","cartaz","carvalho","casaco","casca","casebre","castelo","casulo","catarata","cativar","caule","causador","cautelar","cavalo","caverna","cebola","cedilha","cegonha","celebrar","celular","cenoura","censo","centeio","cercar","cerrado","certeiro","cerveja","cetim","cevada","chacota","chaleira","chamado","chapada","charme","chatice","chave","chefe","chegada","cheiro","cheque","chicote","chifre","chinelo","chocalho","chover","chumbo","chutar","chuva","cicatriz","ciclone","cidade","cidreira","ciente","cigana","cimento","cinto","cinza","ciranda","circuito","cirurgia","citar","clareza","clero","clicar","clone","clube","coado","coagir","cobaia","cobertor","cobrar","cocada","coelho","coentro","coeso","cogumelo","coibir","coifa","coiote","colar","coleira","colher","colidir","colmeia","colono","coluna","comando","combinar","comentar","comitiva","comover","complexo","comum","concha","condor","conectar","confuso","congelar","conhecer","conjugar","consumir","contrato","convite","cooperar","copeiro","copiador","copo","coquetel","coragem","cordial","corneta","coronha","corporal","correio","cortejo","coruja","corvo","cosseno","costela","cotonete","couro","couve","covil","cozinha","cratera","cravo","creche","credor","creme","crer","crespo","criada","criminal","crioulo","crise","criticar","crosta","crua","cruzeiro","cubano","cueca","cuidado","cujo","culatra","culminar","culpar","cultura","cumprir","cunhado","cupido","curativo","curral","cursar","curto","cuspir","custear","cutelo","damasco","datar","debater","debitar","deboche","debulhar","decalque","decimal","declive","decote","decretar","dedal","dedicado","deduzir","defesa","defumar","degelo","degrau","degustar","deitado","deixar","delator","delegado","delinear","delonga","demanda","demitir","demolido","dentista","depenado","depilar","depois","depressa","depurar","deriva","derramar","desafio","desbotar","descanso","desenho","desfiado","desgaste","desigual","deslize","desmamar","desova","despesa","destaque","desviar","detalhar","detentor","detonar","detrito","deusa","dever","devido","devotado","dezena","diagrama","dialeto","didata","difuso","digitar","dilatado","diluente","diminuir","dinastia","dinheiro","diocese","direto","discreta","disfarce","disparo","disquete","dissipar","distante","ditador","diurno","diverso","divisor","divulgar","dizer","dobrador","dolorido","domador","dominado","donativo","donzela","dormente","dorsal","dosagem","dourado","doutor","drenagem","drible","drogaria","duelar","duende","dueto","duplo","duquesa","durante","duvidoso","eclodir","ecoar","ecologia","edificar","edital","educado","efeito","efetivar","ejetar","elaborar","eleger","eleitor","elenco","elevador","eliminar","elogiar","embargo","embolado","embrulho","embutido","emenda","emergir","emissor","empatia","empenho","empinado","empolgar","emprego","empurrar","emulador","encaixe","encenado","enchente","encontro","endeusar","endossar","enfaixar","enfeite","enfim","engajado","engenho","englobar","engomado","engraxar","enguia","enjoar","enlatar","enquanto","enraizar","enrolado","enrugar","ensaio","enseada","ensino","ensopado","entanto","enteado","entidade","entortar","entrada","entulho","envergar","enviado","envolver","enxame","enxerto","enxofre","enxuto","epiderme","equipar","ereto","erguido","errata","erva","ervilha","esbanjar","esbelto","escama","escola","escrita","escuta","esfinge","esfolar","esfregar","esfumado","esgrima","esmalte","espanto","espelho","espiga","esponja","espreita","espumar","esquerda","estaca","esteira","esticar","estofado","estrela","estudo","esvaziar","etanol","etiqueta","euforia","europeu","evacuar","evaporar","evasivo","eventual","evidente","evoluir","exagero","exalar","examinar","exato","exausto","excesso","excitar","exclamar","executar","exemplo","exibir","exigente","exonerar","expandir","expelir","expirar","explanar","exposto","expresso","expulsar","externo","extinto","extrato","fabricar","fabuloso","faceta","facial","fada","fadiga","faixa","falar","falta","familiar","fandango","fanfarra","fantoche","fardado","farelo","farinha","farofa","farpa","fartura","fatia","fator","favorita","faxina","fazenda","fechado","feijoada","feirante","felino","feminino","fenda","feno","fera","feriado","ferrugem","ferver","festejar","fetal","feudal","fiapo","fibrose","ficar","ficheiro","figurado","fileira","filho","filme","filtrar","firmeza","fisgada","fissura","fita","fivela","fixador","fixo","flacidez","flamingo","flanela","flechada","flora","flutuar","fluxo","focal","focinho","fofocar","fogo","foguete","foice","folgado","folheto","forjar","formiga","forno","forte","fosco","fossa","fragata","fralda","frango","frasco","fraterno","freira","frente","fretar","frieza","friso","fritura","fronha","frustrar","fruteira","fugir","fulano","fuligem","fundar","fungo","funil","furador","furioso","futebol","gabarito","gabinete","gado","gaiato","gaiola","gaivota","galega","galho","galinha","galocha","ganhar","garagem","garfo","gargalo","garimpo","garoupa","garrafa","gasoduto","gasto","gata","gatilho","gaveta","gazela","gelado","geleia","gelo","gemada","gemer","gemido","generoso","gengiva","genial","genoma","genro","geologia","gerador","germinar","gesso","gestor","ginasta","gincana","gingado","girafa","girino","glacial","glicose","global","glorioso","goela","goiaba","golfe","golpear","gordura","gorjeta","gorro","gostoso","goteira","governar","gracejo","gradual","grafite","gralha","grampo","granada","gratuito","graveto","graxa","grego","grelhar","greve","grilo","grisalho","gritaria","grosso","grotesco","grudado","grunhido","gruta","guache","guarani","guaxinim","guerrear","guiar","guincho","guisado","gula","guloso","guru","habitar","harmonia","haste","haver","hectare","herdar","heresia","hesitar","hiato","hibernar","hidratar","hiena","hino","hipismo","hipnose","hipoteca","hoje","holofote","homem","honesto","honrado","hormonal","hospedar","humorado","iate","ideia","idoso","ignorado","igreja","iguana","ileso","ilha","iludido","iluminar","ilustrar","imagem","imediato","imenso","imersivo","iminente","imitador","imortal","impacto","impedir","implante","impor","imprensa","impune","imunizar","inalador","inapto","inativo","incenso","inchar","incidir","incluir","incolor","indeciso","indireto","indutor","ineficaz","inerente","infantil","infestar","infinito","inflamar","informal","infrator","ingerir","inibido","inicial","inimigo","injetar","inocente","inodoro","inovador","inox","inquieto","inscrito","inseto","insistir","inspetor","instalar","insulto","intacto","integral","intimar","intocado","intriga","invasor","inverno","invicto","invocar","iogurte","iraniano","ironizar","irreal","irritado","isca","isento","isolado","isqueiro","italiano","janeiro","jangada","janta","jararaca","jardim","jarro","jasmim","jato","javali","jazida","jejum","joaninha","joelhada","jogador","joia","jornal","jorrar","jovem","juba","judeu","judoca","juiz","julgador","julho","jurado","jurista","juro","justa","labareda","laboral","lacre","lactante","ladrilho","lagarta","lagoa","laje","lamber","lamentar","laminar","lampejo","lanche","lapidar","lapso","laranja","lareira","largura","lasanha","lastro","lateral","latido","lavanda","lavoura","lavrador","laxante","lazer","lealdade","lebre","legado","legendar","legista","leigo","leiloar","leitura","lembrete","leme","lenhador","lentilha","leoa","lesma","leste","letivo","letreiro","levar","leveza","levitar","liberal","libido","liderar","ligar","ligeiro","limitar","limoeiro","limpador","linda","linear","linhagem","liquidez","listagem","lisura","litoral","livro","lixa","lixeira","locador","locutor","lojista","lombo","lona","longe","lontra","lorde","lotado","loteria","loucura","lousa","louvar","luar","lucidez","lucro","luneta","lustre","lutador","luva","macaco","macete","machado","macio","madeira","madrinha","magnata","magreza","maior","mais","malandro","malha","malote","maluco","mamilo","mamoeiro","mamute","manada","mancha","mandato","manequim","manhoso","manivela","manobrar","mansa","manter","manusear","mapeado","maquinar","marcador","maresia","marfim","margem","marinho","marmita","maroto","marquise","marreco","martelo","marujo","mascote","masmorra","massagem","mastigar","matagal","materno","matinal","matutar","maxilar","medalha","medida","medusa","megafone","meiga","melancia","melhor","membro","memorial","menino","menos","mensagem","mental","merecer","mergulho","mesada","mesclar","mesmo","mesquita","mestre","metade","meteoro","metragem","mexer","mexicano","micro","migalha","migrar","milagre","milenar","milhar","mimado","minerar","minhoca","ministro","minoria","miolo","mirante","mirtilo","misturar","mocidade","moderno","modular","moeda","moer","moinho","moita","moldura","moleza","molho","molinete","molusco","montanha","moqueca","morango","morcego","mordomo","morena","mosaico","mosquete","mostarda","motel","motim","moto","motriz","muda","muito","mulata","mulher","multar","mundial","munido","muralha","murcho","muscular","museu","musical","nacional","nadador","naja","namoro","narina","narrado","nascer","nativa","natureza","navalha","navegar","navio","neblina","nebuloso","negativa","negociar","negrito","nervoso","neta","neural","nevasca","nevoeiro","ninar","ninho","nitidez","nivelar","nobreza","noite","noiva","nomear","nominal","nordeste","nortear","notar","noticiar","noturno","novelo","novilho","novo","nublado","nudez","numeral","nupcial","nutrir","nuvem","obcecado","obedecer","objetivo","obrigado","obscuro","obstetra","obter","obturar","ocidente","ocioso","ocorrer","oculista","ocupado","ofegante","ofensiva","oferenda","oficina","ofuscado","ogiva","olaria","oleoso","olhar","oliveira","ombro","omelete","omisso","omitir","ondulado","oneroso","ontem","opcional","operador","oponente","oportuno","oposto","orar","orbitar","ordem","ordinal","orfanato","orgasmo","orgulho","oriental","origem","oriundo","orla","ortodoxo","orvalho","oscilar","ossada","osso","ostentar","otimismo","ousadia","outono","outubro","ouvido","ovelha","ovular","oxidar","oxigenar","pacato","paciente","pacote","pactuar","padaria","padrinho","pagar","pagode","painel","pairar","paisagem","palavra","palestra","palheta","palito","palmada","palpitar","pancada","panela","panfleto","panqueca","pantanal","papagaio","papelada","papiro","parafina","parcial","pardal","parede","partida","pasmo","passado","pastel","patamar","patente","patinar","patrono","paulada","pausar","peculiar","pedalar","pedestre","pediatra","pedra","pegada","peitoral","peixe","pele","pelicano","penca","pendurar","peneira","penhasco","pensador","pente","perceber","perfeito","pergunta","perito","permitir","perna","perplexo","persiana","pertence","peruca","pescado","pesquisa","pessoa","petiscar","piada","picado","piedade","pigmento","pilastra","pilhado","pilotar","pimenta","pincel","pinguim","pinha","pinote","pintar","pioneiro","pipoca","piquete","piranha","pires","pirueta","piscar","pistola","pitanga","pivete","planta","plaqueta","platina","plebeu","plumagem","pluvial","pneu","poda","poeira","poetisa","polegada","policiar","poluente","polvilho","pomar","pomba","ponderar","pontaria","populoso","porta","possuir","postal","pote","poupar","pouso","povoar","praia","prancha","prato","praxe","prece","predador","prefeito","premiar","prensar","preparar","presilha","pretexto","prevenir","prezar","primata","princesa","prisma","privado","processo","produto","profeta","proibido","projeto","prometer","propagar","prosa","protetor","provador","publicar","pudim","pular","pulmonar","pulseira","punhal","punir","pupilo","pureza","puxador","quadra","quantia","quarto","quase","quebrar","queda","queijo","quente","querido","quimono","quina","quiosque","rabanada","rabisco","rachar","racionar","radial","raiar","rainha","raio","raiva","rajada","ralado","ramal","ranger","ranhura","rapadura","rapel","rapidez","raposa","raquete","raridade","rasante","rascunho","rasgar","raspador","rasteira","rasurar","ratazana","ratoeira","realeza","reanimar","reaver","rebaixar","rebelde","rebolar","recado","recente","recheio","recibo","recordar","recrutar","recuar","rede","redimir","redonda","reduzida","reenvio","refinar","refletir","refogar","refresco","refugiar","regalia","regime","regra","reinado","reitor","rejeitar","relativo","remador","remendo","remorso","renovado","reparo","repelir","repleto","repolho","represa","repudiar","requerer","resenha","resfriar","resgatar","residir","resolver","respeito","ressaca","restante","resumir","retalho","reter","retirar","retomada","retratar","revelar","revisor","revolta","riacho","rica","rigidez","rigoroso","rimar","ringue","risada","risco","risonho","robalo","rochedo","rodada","rodeio","rodovia","roedor","roleta","romano","roncar","rosado","roseira","rosto","rota","roteiro","rotina","rotular","rouco","roupa","roxo","rubro","rugido","rugoso","ruivo","rumo","rupestre","russo","sabor","saciar","sacola","sacudir","sadio","safira","saga","sagrada","saibro","salada","saleiro","salgado","saliva","salpicar","salsicha","saltar","salvador","sambar","samurai","sanar","sanfona","sangue","sanidade","sapato","sarda","sargento","sarjeta","saturar","saudade","saxofone","sazonal","secar","secular","seda","sedento","sediado","sedoso","sedutor","segmento","segredo","segundo","seiva","seleto","selvagem","semanal","semente","senador","senhor","sensual","sentado","separado","sereia","seringa","serra","servo","setembro","setor","sigilo","silhueta","silicone","simetria","simpatia","simular","sinal","sincero","singular","sinopse","sintonia","sirene","siri","situado","soberano","sobra","socorro","sogro","soja","solda","soletrar","solteiro","sombrio","sonata","sondar","sonegar","sonhador","sono","soprano","soquete","sorrir","sorteio","sossego","sotaque","soterrar","sovado","sozinho","suavizar","subida","submerso","subsolo","subtrair","sucata","sucesso","suco","sudeste","sufixo","sugador","sugerir","sujeito","sulfato","sumir","suor","superior","suplicar","suposto","suprimir","surdina","surfista","surpresa","surreal","surtir","suspiro","sustento","tabela","tablete","tabuada","tacho","tagarela","talher","talo","talvez","tamanho","tamborim","tampa","tangente","tanto","tapar","tapioca","tardio","tarefa","tarja","tarraxa","tatuagem","taurino","taxativo","taxista","teatral","tecer","tecido","teclado","tedioso","teia","teimar","telefone","telhado","tempero","tenente","tensor","tentar","termal","terno","terreno","tese","tesoura","testado","teto","textura","texugo","tiara","tigela","tijolo","timbrar","timidez","tingido","tinteiro","tiragem","titular","toalha","tocha","tolerar","tolice","tomada","tomilho","tonel","tontura","topete","tora","torcido","torneio","torque","torrada","torto","tostar","touca","toupeira","toxina","trabalho","tracejar","tradutor","trafegar","trajeto","trama","trancar","trapo","traseiro","tratador","travar","treino","tremer","trepidar","trevo","triagem","tribo","triciclo","tridente","trilogia","trindade","triplo","triturar","triunfal","trocar","trombeta","trova","trunfo","truque","tubular","tucano","tudo","tulipa","tupi","turbo","turma","turquesa","tutelar","tutorial","uivar","umbigo","unha","unidade","uniforme","urologia","urso","urtiga","urubu","usado","usina","usufruir","vacina","vadiar","vagaroso","vaidoso","vala","valente","validade","valores","vantagem","vaqueiro","varanda","vareta","varrer","vascular","vasilha","vassoura","vazar","vazio","veado","vedar","vegetar","veicular","veleiro","velhice","veludo","vencedor","vendaval","venerar","ventre","verbal","verdade","vereador","vergonha","vermelho","verniz","versar","vertente","vespa","vestido","vetorial","viaduto","viagem","viajar","viatura","vibrador","videira","vidraria","viela","viga","vigente","vigiar","vigorar","vilarejo","vinco","vinheta","vinil","violeta","virada","virtude","visitar","visto","vitral","viveiro","vizinho","voador","voar","vogal","volante","voleibol","voltagem","volumoso","vontade","vulto","vuvuzela","xadrez","xarope","xeque","xeretar","xerife","xingar","zangado","zarpar","zebu","zelador","zombar","zoologia","zumbido"]'),require$$9=JSON.parse('["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"]');var hasRequired_wordlists;function require_wordlists(){if(hasRequired_wordlists)return _wordlists;hasRequired_wordlists=1,Object.defineProperty(_wordlists,"__esModule",{value:!0});const t={};_wordlists.wordlists=t;let e;_wordlists._default=e;try{_wordlists._default=e=require$$0,t.czech=e}catch{}try{_wordlists._default=e=require$$1,t.chinese_simplified=e}catch{}try{_wordlists._default=e=require$$2$3,t.chinese_traditional=e}catch{}try{_wordlists._default=e=require$$3,t.korean=e}catch{}try{_wordlists._default=e=require$$4,t.french=e}catch{}try{_wordlists._default=e=require$$5,t.italian=e}catch{}try{_wordlists._default=e=require$$6,t.spanish=e}catch{}try{_wordlists._default=e=require$$7,t.japanese=e,t.JA=e}catch{}try{_wordlists._default=e=require$$8,t.portuguese=e}catch{}try{_wordlists._default=e=require$$9,t.english=e,t.EN=e}catch{}return _wordlists}var hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1,Object.defineProperty(src,"__esModule",{value:!0});const t=requireSha256(),e=requireSha512(),s=requirePbkdf2(),r=requireUtils(),a=require_wordlists();let o=a._default;const l="Invalid mnemonic",c="Invalid entropy",u="Invalid mnemonic checksum",f=`A wordlist is required but a default could not be found.
Please pass a 2048 word array explicitly.`;function d(W){return(W||"").normalize("NFKD")}function p(W,Z,z){for(;W.length<z;)W=Z+W;return W}function m(W){return parseInt(W,2)}function y(W){return W.map(Z=>p(Z.toString(2),"0",8)).join("")}function b(W){const z=W.length*8/32,O=t.sha256(Uint8Array.from(W));return y(Array.from(O)).slice(0,z)}function E(W){return"mnemonic"+(W||"")}function C(W,Z){const z=Uint8Array.from(Buffer.from(d(W),"utf8")),O=Uint8Array.from(Buffer.from(E(d(Z)),"utf8")),k=s.pbkdf2(e.sha512,z,O,{c:2048,dkLen:64});return Buffer.from(k)}src.mnemonicToSeedSync=C;function j(W,Z){const z=Uint8Array.from(Buffer.from(d(W),"utf8")),O=Uint8Array.from(Buffer.from(E(d(Z)),"utf8"));return s.pbkdf2Async(e.sha512,z,O,{c:2048,dkLen:64}).then(k=>Buffer.from(k))}src.mnemonicToSeed=j;function B(W,Z){if(Z=Z||o,!Z)throw new Error(f);const z=d(W).split(" ");if(z.length%3!==0)throw new Error(l);const O=z.map(M=>{const I=Z.indexOf(M);if(I===-1)throw new Error(l);return p(I.toString(2),"0",11)}).join(""),k=Math.floor(O.length/33)*32,v=O.slice(0,k),S=O.slice(k),N=v.match(/(.{1,8})/g).map(m);if(N.length<16)throw new Error(c);if(N.length>32)throw new Error(c);if(N.length%4!==0)throw new Error(c);const R=Buffer.from(N);if(b(R)!==S)throw new Error(u);return R.toString("hex")}src.mnemonicToEntropy=B;function D(W,Z){if(Buffer.isBuffer(W)||(W=Buffer.from(W,"hex")),Z=Z||o,!Z)throw new Error(f);if(W.length<16)throw new TypeError(c);if(W.length>32)throw new TypeError(c);if(W.length%4!==0)throw new TypeError(c);const z=y(Array.from(W)),O=b(W),S=(z+O).match(/(.{1,11})/g).map(N=>{const R=m(N);return Z[R]});return Z[0]===""?S.join(""):S.join(" ")}src.entropyToMnemonic=D;function F(W,Z,z){if(W=W||128,W%32!==0)throw new TypeError(c);return Z=Z||(O=>Buffer.from(r.randomBytes(O))),D(Z(W/8),z)}src.generateMnemonic=F;function q(W,Z){try{B(W,Z)}catch{return!1}return!0}src.validateMnemonic=q;function V(W){const Z=a.wordlists[W];if(Z)o=Z;else throw new Error('Could not find wordlist for language "'+W+'"')}src.setDefaultWordlist=V;function ee(){if(!o)throw new Error("No Default Wordlist set");return Object.keys(a.wordlists).filter(W=>W==="JA"||W==="EN"?!1:a.wordlists[W].every((Z,z)=>Z===o[z]))[0]}src.getDefaultWordlist=ee;var Q=require_wordlists();return src.wordlists=Q.wordlists,src}var srcExports=requireSrc(),ellipticExports=requireElliptic();const elliptic=getDefaultExportFromCjs$4(ellipticExports);function isBytes$3(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function anumber$3(t,e=""){if(!Number.isSafeInteger(t)||t<0){const s=e&&`"${e}" `;throw new Error(`${s}expected integer >= 0, got ${t}`)}}function abytes$3(t,e,s=""){const r=isBytes$3(t),a=t?.length,o=e!==void 0;if(!r||o&&a!==e){const l=s&&`"${s}" `,c=o?` of length ${e}`:"",u=r?`length=${a}`:`type=${typeof t}`;throw new Error(l+"expected Uint8Array"+c+", got "+u)}return t}function ahash$3(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");anumber$3(t.outputLen),anumber$3(t.blockLen)}function aexists$3(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aoutput$3(t,e){abytes$3(t,void 0,"digestInto() output");const s=e.outputLen;if(t.length<s)throw new Error('"digestInto() output" expected to be of length >='+s)}function clean$3(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function createView$3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rotr$3(t,e){return t<<32-e|t>>>e}function rotl$1(t,e){return t<<e|t>>>32-e>>>0}const hasHexBuiltin$3=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes$3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$3(t){if(abytes$3(t),hasHexBuiltin$3)return t.toHex();let e="";for(let s=0;s<t.length;s++)e+=hexes$3[t[s]];return e}const asciis$3={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16$3(t){if(t>=asciis$3._0&&t<=asciis$3._9)return t-asciis$3._0;if(t>=asciis$3.A&&t<=asciis$3.F)return t-(asciis$3.A-10);if(t>=asciis$3.a&&t<=asciis$3.f)return t-(asciis$3.a-10)}function hexToBytes$2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hasHexBuiltin$3)return Uint8Array.fromHex(t);const e=t.length,s=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(s);for(let a=0,o=0;a<s;a++,o+=2){const l=asciiToBase16$3(t.charCodeAt(o)),c=asciiToBase16$3(t.charCodeAt(o+1));if(l===void 0||c===void 0){const u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}r[a]=l*16+c}return r}function concatBytes$2(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];abytes$3(a),e+=a.length}const s=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const o=t[r];s.set(o,a),a+=o.length}return s}function createHasher$3(t,e={}){const s=(a,o)=>t(o).update(a).digest(),r=t(void 0);return s.outputLen=r.outputLen,s.blockLen=r.blockLen,s.create=a=>t(a),Object.assign(s,e),Object.freeze(s)}function randomBytes$1(t=32){const e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}const oidNist$2=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});function Chi$3(t,e,s){return t&e^~t&s}function Maj$3(t,e,s){return t&e^t&s^e&s}let HashMD$3=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,s,r,a){this.blockLen=e,this.outputLen=s,this.padOffset=r,this.isLE=a,this.buffer=new Uint8Array(e),this.view=createView$3(this.buffer)}update(e){aexists$3(this),abytes$3(e);const{view:s,buffer:r,blockLen:a}=this,o=e.length;for(let l=0;l<o;){const c=Math.min(a-this.pos,o-l);if(c===a){const u=createView$3(e);for(;a<=o-l;l+=a)this.process(u,l);continue}r.set(e.subarray(l,l+c),this.pos),this.pos+=c,l+=c,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists$3(this),aoutput$3(e,this),this.finished=!0;const{buffer:s,view:r,blockLen:a,isLE:o}=this;let{pos:l}=this;s[l++]=128,clean$3(this.buffer.subarray(l)),this.padOffset>a-l&&(this.process(r,0),l=0);for(let p=l;p<a;p++)s[p]=0;r.setBigUint64(a-8,BigInt(this.length*8),o),this.process(r,0);const c=createView$3(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],o)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const r=e.slice(0,s);return this.destroy(),r}_cloneInto(e){e||=new this.constructor,e.set(...this.get());const{blockLen:s,buffer:r,length:a,finished:o,destroyed:l,pos:c}=this;return e.destroyed=l,e.finished=o,e.length=a,e.pos=c,a%s&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const SHA256_IV$3=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Rho160=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Id160=Uint8Array.from(new Array(16).fill(0).map((t,e)=>e)),Pi160=Id160.map(t=>(9*t+5)%16),idxLR=(()=>{const s=[[Id160],[Pi160]];for(let r=0;r<4;r++)for(let a of s)a.push(a[r].map(o=>Rho160[o]));return s})(),idxL=idxLR[0],idxR=idxLR[1],shifts160=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>Uint8Array.from(t)),shiftsL160=idxL.map((t,e)=>t.map(s=>shifts160[e][s])),shiftsR160=idxR.map((t,e)=>t.map(s=>shifts160[e][s])),Kl160=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),Kr160=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function ripemd_f(t,e,s,r){return t===0?e^s^r:t===1?e&s|~e&r:t===2?(e|~s)^r:t===3?e&r|s&~r:e^(s|~r)}const BUF_160=new Uint32Array(16);class _RIPEMD160 extends HashMD$3{h0=1732584193;h1=-271733879;h2=-1732584194;h3=271733878;h4=-1009589776;constructor(){super(64,20,8,!0)}get(){const{h0:e,h1:s,h2:r,h3:a,h4:o}=this;return[e,s,r,a,o]}set(e,s,r,a,o){this.h0=e|0,this.h1=s|0,this.h2=r|0,this.h3=a|0,this.h4=o|0}process(e,s){for(let y=0;y<16;y++,s+=4)BUF_160[y]=e.getUint32(s,!0);let r=this.h0|0,a=r,o=this.h1|0,l=o,c=this.h2|0,u=c,f=this.h3|0,d=f,p=this.h4|0,m=p;for(let y=0;y<5;y++){const b=4-y,E=Kl160[y],C=Kr160[y],j=idxL[y],B=idxR[y],D=shiftsL160[y],F=shiftsR160[y];for(let q=0;q<16;q++){const V=rotl$1(r+ripemd_f(y,o,c,f)+BUF_160[j[q]]+E,D[q])+p|0;r=p,p=f,f=rotl$1(c,10)|0,c=o,o=V}for(let q=0;q<16;q++){const V=rotl$1(a+ripemd_f(b,l,u,d)+BUF_160[B[q]]+C,F[q])+m|0;a=m,m=d,d=rotl$1(u,10)|0,u=l,l=V}}this.set(this.h1+c+d|0,this.h2+f+m|0,this.h3+p+a|0,this.h4+r+l|0,this.h0+o+u|0)}roundClean(){clean$3(BUF_160)}destroy(){this.destroyed=!0,clean$3(this.buffer),this.set(0,0,0,0,0)}}const ripemd160$2=createHasher$3(()=>new _RIPEMD160),U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(t,e=!1){return e?{h:Number(t&U32_MASK64),l:Number(t>>_32n&U32_MASK64)}:{h:Number(t>>_32n&U32_MASK64)|0,l:Number(t&U32_MASK64)|0}}function split(t,e=!1){const s=t.length;let r=new Uint32Array(s),a=new Uint32Array(s);for(let o=0;o<s;o++){const{h:l,l:c}=fromBig(t[o],e);[r[o],a[o]]=[l,c]}return[r,a]}const shrSH=(t,e,s)=>t>>>s,shrSL=(t,e,s)=>t<<32-s|e>>>s,rotrSH=(t,e,s)=>t>>>s|e<<32-s,rotrSL=(t,e,s)=>t<<32-s|e>>>s,rotrBH=(t,e,s)=>t<<64-s|e>>>s-32,rotrBL=(t,e,s)=>t>>>s-32|e<<64-s;function add(t,e,s,r){const a=(e>>>0)+(r>>>0);return{h:t+s+(a/2**32|0)|0,l:a|0}}const add3L=(t,e,s)=>(t>>>0)+(e>>>0)+(s>>>0),add3H=(t,e,s,r)=>e+s+r+(t/2**32|0)|0,add4L=(t,e,s,r)=>(t>>>0)+(e>>>0)+(s>>>0)+(r>>>0),add4H=(t,e,s,r,a)=>e+s+r+a+(t/2**32|0)|0,add5L=(t,e,s,r,a)=>(t>>>0)+(e>>>0)+(s>>>0)+(r>>>0)+(a>>>0),add5H=(t,e,s,r,a,o)=>e+s+r+a+o+(t/2**32|0)|0,SHA256_K$3=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W$3=new Uint32Array(64);let SHA2_32B$2=class extends HashMD$3{constructor(e){super(64,e,8,!1)}get(){const{A:e,B:s,C:r,D:a,E:o,F:l,G:c,H:u}=this;return[e,s,r,a,o,l,c,u]}set(e,s,r,a,o,l,c,u){this.A=e|0,this.B=s|0,this.C=r|0,this.D=a|0,this.E=o|0,this.F=l|0,this.G=c|0,this.H=u|0}process(e,s){for(let p=0;p<16;p++,s+=4)SHA256_W$3[p]=e.getUint32(s,!1);for(let p=16;p<64;p++){const m=SHA256_W$3[p-15],y=SHA256_W$3[p-2],b=rotr$3(m,7)^rotr$3(m,18)^m>>>3,E=rotr$3(y,17)^rotr$3(y,19)^y>>>10;SHA256_W$3[p]=E+SHA256_W$3[p-7]+b+SHA256_W$3[p-16]|0}let{A:r,B:a,C:o,D:l,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const m=rotr$3(c,6)^rotr$3(c,11)^rotr$3(c,25),y=d+m+Chi$3(c,u,f)+SHA256_K$3[p]+SHA256_W$3[p]|0,E=(rotr$3(r,2)^rotr$3(r,13)^rotr$3(r,22))+Maj$3(r,a,o)|0;d=f,f=u,u=c,c=l+y|0,l=o,o=a,a=r,r=y+E|0}r=r+this.A|0,a=a+this.B|0,o=o+this.C|0,l=l+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,a,o,l,c,u,f,d)}roundClean(){clean$3(SHA256_W$3)}destroy(){this.set(0,0,0,0,0,0,0,0),clean$3(this.buffer)}},_SHA256$2=class extends SHA2_32B$2{A=SHA256_IV$3[0]|0;B=SHA256_IV$3[1]|0;C=SHA256_IV$3[2]|0;D=SHA256_IV$3[3]|0;E=SHA256_IV$3[4]|0;F=SHA256_IV$3[5]|0;G=SHA256_IV$3[6]|0;H=SHA256_IV$3[7]|0;constructor(){super(32)}};class _SHA224 extends SHA2_32B$2{A=SHA224_IV[0]|0;B=SHA224_IV[1]|0;C=SHA224_IV[2]|0;D=SHA224_IV[3]|0;E=SHA224_IV[4]|0;F=SHA224_IV[5]|0;G=SHA224_IV[6]|0;H=SHA224_IV[7]|0;constructor(){super(28)}}const K512=split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),SHA512_Kh=K512[0],SHA512_Kl=K512[1],SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA2_64B extends HashMD$3{constructor(e){super(128,e,16,!1)}get(){const{Ah:e,Al:s,Bh:r,Bl:a,Ch:o,Cl:l,Dh:c,Dl:u,Eh:f,El:d,Fh:p,Fl:m,Gh:y,Gl:b,Hh:E,Hl:C}=this;return[e,s,r,a,o,l,c,u,f,d,p,m,y,b,E,C]}set(e,s,r,a,o,l,c,u,f,d,p,m,y,b,E,C){this.Ah=e|0,this.Al=s|0,this.Bh=r|0,this.Bl=a|0,this.Ch=o|0,this.Cl=l|0,this.Dh=c|0,this.Dl=u|0,this.Eh=f|0,this.El=d|0,this.Fh=p|0,this.Fl=m|0,this.Gh=y|0,this.Gl=b|0,this.Hh=E|0,this.Hl=C|0}process(e,s){for(let D=0;D<16;D++,s+=4)SHA512_W_H[D]=e.getUint32(s),SHA512_W_L[D]=e.getUint32(s+=4);for(let D=16;D<80;D++){const F=SHA512_W_H[D-15]|0,q=SHA512_W_L[D-15]|0,V=rotrSH(F,q,1)^rotrSH(F,q,8)^shrSH(F,q,7),ee=rotrSL(F,q,1)^rotrSL(F,q,8)^shrSL(F,q,7),Q=SHA512_W_H[D-2]|0,W=SHA512_W_L[D-2]|0,Z=rotrSH(Q,W,19)^rotrBH(Q,W,61)^shrSH(Q,W,6),z=rotrSL(Q,W,19)^rotrBL(Q,W,61)^shrSL(Q,W,6),O=add4L(ee,z,SHA512_W_L[D-7],SHA512_W_L[D-16]),k=add4H(O,V,Z,SHA512_W_H[D-7],SHA512_W_H[D-16]);SHA512_W_H[D]=k|0,SHA512_W_L[D]=O|0}let{Ah:r,Al:a,Bh:o,Bl:l,Ch:c,Cl:u,Dh:f,Dl:d,Eh:p,El:m,Fh:y,Fl:b,Gh:E,Gl:C,Hh:j,Hl:B}=this;for(let D=0;D<80;D++){const F=rotrSH(p,m,14)^rotrSH(p,m,18)^rotrBH(p,m,41),q=rotrSL(p,m,14)^rotrSL(p,m,18)^rotrBL(p,m,41),V=p&y^~p&E,ee=m&b^~m&C,Q=add5L(B,q,ee,SHA512_Kl[D],SHA512_W_L[D]),W=add5H(Q,j,F,V,SHA512_Kh[D],SHA512_W_H[D]),Z=Q|0,z=rotrSH(r,a,28)^rotrBH(r,a,34)^rotrBH(r,a,39),O=rotrSL(r,a,28)^rotrBL(r,a,34)^rotrBL(r,a,39),k=r&o^r&c^o&c,v=a&l^a&u^l&u;j=E|0,B=C|0,E=y|0,C=b|0,y=p|0,b=m|0,{h:p,l:m}=add(f|0,d|0,W|0,Z|0),f=c|0,d=u|0,c=o|0,u=l|0,o=r|0,l=a|0;const S=add3L(Z,O,v);r=add3H(S,W,z,k),a=S|0}({h:r,l:a}=add(this.Ah|0,this.Al|0,r|0,a|0)),{h:o,l}=add(this.Bh|0,this.Bl|0,o|0,l|0),{h:c,l:u}=add(this.Ch|0,this.Cl|0,c|0,u|0),{h:f,l:d}=add(this.Dh|0,this.Dl|0,f|0,d|0),{h:p,l:m}=add(this.Eh|0,this.El|0,p|0,m|0),{h:y,l:b}=add(this.Fh|0,this.Fl|0,y|0,b|0),{h:E,l:C}=add(this.Gh|0,this.Gl|0,E|0,C|0),{h:j,l:B}=add(this.Hh|0,this.Hl|0,j|0,B|0),this.set(r,a,o,l,c,u,f,d,p,m,y,b,E,C,j,B)}roundClean(){clean$3(SHA512_W_H,SHA512_W_L)}destroy(){clean$3(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class _SHA512 extends SHA2_64B{Ah=SHA512_IV[0]|0;Al=SHA512_IV[1]|0;Bh=SHA512_IV[2]|0;Bl=SHA512_IV[3]|0;Ch=SHA512_IV[4]|0;Cl=SHA512_IV[5]|0;Dh=SHA512_IV[6]|0;Dl=SHA512_IV[7]|0;Eh=SHA512_IV[8]|0;El=SHA512_IV[9]|0;Fh=SHA512_IV[10]|0;Fl=SHA512_IV[11]|0;Gh=SHA512_IV[12]|0;Gl=SHA512_IV[13]|0;Hh=SHA512_IV[14]|0;Hl=SHA512_IV[15]|0;constructor(){super(64)}}class _SHA384 extends SHA2_64B{Ah=SHA384_IV[0]|0;Al=SHA384_IV[1]|0;Bh=SHA384_IV[2]|0;Bl=SHA384_IV[3]|0;Ch=SHA384_IV[4]|0;Cl=SHA384_IV[5]|0;Dh=SHA384_IV[6]|0;Dl=SHA384_IV[7]|0;Eh=SHA384_IV[8]|0;El=SHA384_IV[9]|0;Fh=SHA384_IV[10]|0;Fl=SHA384_IV[11]|0;Gh=SHA384_IV[12]|0;Gl=SHA384_IV[13]|0;Hh=SHA384_IV[14]|0;Hl=SHA384_IV[15]|0;constructor(){super(48)}}const sha256$3=createHasher$3(()=>new _SHA256$2,oidNist$2(1)),sha224=createHasher$3(()=>new _SHA224,oidNist$2(4)),sha512=createHasher$3(()=>new _SHA512,oidNist$2(3)),sha384=createHasher$3(()=>new _SHA384,oidNist$2(2));var HashAlgorithm;(function(t){t[t.SHA256=0]="SHA256",t[t.SHA224=1]="SHA224",t[t.SHA384=2]="SHA384",t[t.SHA512=3]="SHA512",t[t.RIPEMD160=4]="RIPEMD160"})(HashAlgorithm||(HashAlgorithm={}));class HashError extends Error{constructor(e){super(e),this.name="HashError"}}class CborError extends Error{}class CborMapEntry{_key;_value;constructor(e,s){this._key=e,this._value=s,this._key=new Uint8Array(e),this._value=new Uint8Array(s)}get key(){return new Uint8Array(this._key)}get value(){return new Uint8Array(this._value)}}var MajorType;(function(t){t[t.UNSIGNED_INTEGER=0]="UNSIGNED_INTEGER",t[t.NEGATIVE_INTEGER=32]="NEGATIVE_INTEGER",t[t.BYTE_STRING=64]="BYTE_STRING",t[t.TEXT_STRING=96]="TEXT_STRING",t[t.ARRAY=128]="ARRAY",t[t.MAP=160]="MAP",t[t.TAG=192]="TAG",t[t.FLOAT_SIMPLE_BREAK=224]="FLOAT_SIMPLE_BREAK"})(MajorType||(MajorType={}));class CborReader{data;static MAJOR_TYPE_MASK=224;static ADDITIONAL_INFORMATION_MASK=31;position=0;constructor(e){this.data=e}readByte(){if(this.position>=this.data.length)throw new CborError("Premature end of data.");return this.data[this.position++]}read(e){try{if(this.position+e>this.data.length)throw new CborError("Premature end of data.");return this.data.slice(this.position,this.position+e)}finally{this.position+=e}}readLength(e){const s=this.readByte();if((s&CborReader.MAJOR_TYPE_MASK)!==e)throw new CborError("Major type mismatch.");const r=s&CborReader.ADDITIONAL_INFORMATION_MASK;if(r<24)return BigInt(r);switch(e){case MajorType.ARRAY:case MajorType.BYTE_STRING:case MajorType.TEXT_STRING:if(r==31)throw new CborError("Indefinite length array not supported.");break}if(r>27)throw new CborError("Encoded item is not well-formed.");let a=0n;const o=Math.pow(2,r-24);for(let l=0;l<o;++l)a=a<<8n|BigInt(this.readByte());return a}readRawCbor(){if(this.position>=this.data.length)throw new CborError("Premature end of data.");const e=this.data[this.position]&CborReader.MAJOR_TYPE_MASK,s=this.position,r=this.readLength(e);switch(e){case MajorType.BYTE_STRING:case MajorType.TEXT_STRING:this.read(Number(r));break;case MajorType.ARRAY:for(let a=0;a<r;a++)this.readRawCbor();break;case MajorType.MAP:for(let a=0;a<r;a++)this.readRawCbor(),this.readRawCbor();break;case MajorType.TAG:this.readRawCbor();break}return this.data.slice(s,this.position)}}class HexConverter{static encode(e){return bytesToHex$3(e)}static decode(e){return(e.startsWith("0x")||e.startsWith("0X"))&&(e=e.slice(2)),hexToBytes$2(e)}}class CborDeserializer{static readOptional(e,s){return new CborReader(e).readByte()===246?null:s(e)}static readUnsignedInteger(e){return new CborReader(e).readLength(MajorType.UNSIGNED_INTEGER)}static readNegativeInteger(){throw new CborError("Not implemented.")}static readByteString(e){const s=new CborReader(e),r=s.readLength(MajorType.BYTE_STRING);if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new CborError("Byte string too long.");return s.read(Number(r))}static readTextString(e){const s=new CborReader(e),r=s.readLength(MajorType.TEXT_STRING);if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new CborError("Text string too long.");return new TextDecoder().decode(s.read(Number(r)))}static readArray(e){const s=new CborReader(e),r=s.readLength(MajorType.ARRAY);if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new CborError("Array too long.");const a=[];for(let o=0;o<r;o++)a.push(s.readRawCbor());return a}static readMap(e){const s=new CborReader(e),r=s.readLength(MajorType.MAP);if(r>BigInt(Number.MAX_SAFE_INTEGER))throw new CborError("Map too long.");const a=[],o=new Set;for(let l=0;l<r;l++){const c=s.readRawCbor(),u=s.readRawCbor(),f=HexConverter.encode(c);if(o.has(f))throw new CborError("Duplicate map key found.");o.add(f),a.push(new CborMapEntry(c,u))}return a}static readTag(e){const s=new CborReader(e),r=s.readLength(MajorType.TAG);return{data:s.readRawCbor(),tag:r}}static readBoolean(e){const s=new CborReader(e).readByte();if(s===245)return!0;if(s===244)return!1;throw new CborError("Type mismatch, expected boolean.")}}class CborSerializer{static encodeOptional(e,s){return e==null?new Uint8Array([246]):s(e)}static encodeUnsignedInteger(e){if(e<0)throw new CborError("Only unsigned numbers are allowed.");if(e<24)return new Uint8Array([MajorType.UNSIGNED_INTEGER|Number(e)]);const s=CborSerializer.getUnsignedIntegerAsPaddedBytes(e);return new Uint8Array([MajorType.UNSIGNED_INTEGER|CborSerializer.getAdditionalInformationBits(s.length),...s])}static encodeByteString(e){if(e.length<24)return new Uint8Array([MajorType.BYTE_STRING|e.length,...e]);const s=CborSerializer.getUnsignedIntegerAsPaddedBytes(e.length);return new Uint8Array([MajorType.BYTE_STRING|CborSerializer.getAdditionalInformationBits(s.length),...s,...e])}static encodeTextString(e){const s=new TextEncoder().encode(e);if(s.length<24)return new Uint8Array([MajorType.TEXT_STRING|s.length,...s]);const r=CborSerializer.getUnsignedIntegerAsPaddedBytes(s.length);return new Uint8Array([MajorType.TEXT_STRING|CborSerializer.getAdditionalInformationBits(r.length),...r,...s])}static encodeArray(...e){const s=new Uint8Array(e.reduce((o,l)=>o+l.length,0));let r=0;for(const o of e)s.set(o,r),r+=o.length;if(e.length<24)return new Uint8Array([MajorType.ARRAY|e.length,...s]);const a=CborSerializer.getUnsignedIntegerAsPaddedBytes(e.length);return new Uint8Array([MajorType.ARRAY|CborSerializer.getAdditionalInformationBits(a.length),...a,...s])}static encodeMap(e){const s=e.entries,r=s.reduce((c,u)=>c+u.key.length+u.value.length,0),a=new Uint8Array(r);let o=0;for(const c of s)a.set(c.key,o),o+=c.key.length,a.set(c.value,o),o+=c.value.length;if(s.length<24)return new Uint8Array([MajorType.MAP|s.length,...a]);const l=CborSerializer.getUnsignedIntegerAsPaddedBytes(s.length);return new Uint8Array([MajorType.MAP|CborSerializer.getAdditionalInformationBits(l.length),...l,...a])}static encodeTag(e,s){if(e<24)return new Uint8Array([MajorType.TAG|Number(e),...s]);const r=CborSerializer.getUnsignedIntegerAsPaddedBytes(e);return new Uint8Array([MajorType.TAG|CborSerializer.getAdditionalInformationBits(r.length),...r,...s])}static encodeBoolean(e){return e?new Uint8Array([245]):new Uint8Array([244])}static encodeNull(){return new Uint8Array([246])}static getAdditionalInformationBits(e){return 24+Math.ceil(Math.log2(e))}static getUnsignedIntegerAsPaddedBytes(e){if(e<0)throw new CborError("Only unsigned numbers are allowed.");let s;const r=[];for(s=BigInt(e);s>0;s=s>>8n)r.push(Number(s&255n));if(r.length>8)throw new CborError("Number is not unsigned long.");r.length===0&&r.push(0),r.reverse();const a=new Uint8Array(Math.pow(2,Math.ceil(Math.log2(r.length))));return a.set(r,a.length-r.length),a}}class DataHash{algorithm;_data;_imprint;constructor(e,s){this.algorithm=e,this._data=s,this._data=new Uint8Array(s),this._imprint=new Uint8Array(s.length+2),this._imprint.set([(e&65280)>>8,e&255]),this._imprint.set(new Uint8Array(s),2)}get data(){return new Uint8Array(this._data)}get imprint(){return new Uint8Array(this._imprint)}static fromImprint(e){if(e.length<3)throw new HashError("Imprint must have 2 bytes of algorithm and at least 1 byte of data.");const s=e[0]<<8|e[1];return new DataHash(s,e.subarray(2))}static fromJSON(e){return DataHash.fromImprint(HexConverter.decode(e))}static fromCBOR(e){return DataHash.fromImprint(CborDeserializer.readByteString(e))}toJSON(){return HexConverter.encode(this._imprint)}toCBOR(){return CborSerializer.encodeByteString(this._imprint)}equals(e){return HexConverter.encode(this._imprint)===HexConverter.encode(e._imprint)}toString(){return`[${HashAlgorithm[this.algorithm]}]${HexConverter.encode(this._data)}`}}class UnsupportedHashAlgorithmError extends Error{constructor(e){super(`Unsupported hash algorithm: ${e}`),this.name="UnsupportedHashAlgorithm"}}const Algorithm={[HashAlgorithm.RIPEMD160]:ripemd160$2,[HashAlgorithm.SHA224]:sha224,[HashAlgorithm.SHA256]:sha256$3,[HashAlgorithm.SHA384]:sha384,[HashAlgorithm.SHA512]:sha512};class DataHasher{algorithm;_messageDigest;constructor(e){if(this.algorithm=e,!Algorithm[e])throw new UnsupportedHashAlgorithmError(e);this._messageDigest=Algorithm[e].create()}update(e){return this._messageDigest.update(e),this}digest(){return Promise.resolve(new DataHash(this.algorithm,this._messageDigest.digest()))}}class InvalidJsonStructureError extends Error{constructor(){super("Invalid JSON structure.")}}var PredicateEngineType;(function(t){t[t.EMBEDDED=0]="EMBEDDED"})(PredicateEngineType||(PredicateEngineType={}));class EncodedPredicate{engine;_code;_parameters;constructor(e,s,r){this.engine=e,this._code=s,this._parameters=r,this._code=s.slice(),this._parameters=r.slice()}static fromCBOR(e){const s=CborDeserializer.readArray(e),r=CborDeserializer.readUnsignedInteger(s[0]);if(r>Number.MAX_SAFE_INTEGER||!PredicateEngineType[Number(r)])throw new CborError("Invalid predicate engine type");return new EncodedPredicate(Number(r),CborDeserializer.readByteString(s[1]),CborDeserializer.readByteString(s[2]))}encode(){return this._code.slice()}encodeParameters(){return this._parameters.slice()}}function dedent(t,...e){if(t.length===0)return"";let s=t[0].split(`
`);if(s.shift()?.length!==0)throw new Error("First line must be empty");const r=s[0].length-s[0].trimStart().length,a=[];for(let o=0;o<t.length;o++){a.push(`${a.pop()||""}${s[0].slice(Math.min(s[0].length-s[0].trim().length,r))}`);for(let f=1;f<s.length;f++)a.push(s[f].slice(r));const l=a.pop(),c=l.length-l.trimStart().length,u=o<e.length?String(e[o]).split(`
`):[""];a.push(`${l}${u[0]}`);for(let f=1;f<u.length;f++)a.push(`${" ".repeat(c)}${u[f]}`);s=o+1<t.length?t[o+1].split(`
`):[]}return a.join(`
`)}class TokenState{predicate;_data;constructor(e,s){this.predicate=e,this._data=s,this._data=s?new Uint8Array(s):null}get data(){return this._data?new Uint8Array(this._data):null}static fromCBOR(e){const s=CborDeserializer.readArray(e);return new TokenState(EncodedPredicate.fromCBOR(s[0]),CborDeserializer.readOptional(s[1],CborDeserializer.readByteString))}static isJSON(e){return typeof e=="object"&&e!=null&&"predicate"in e&&typeof e.predicate=="string"&&"data"in e&&(typeof e.data=="string"||e.data===null)}static fromJSON(e){if(!TokenState.isJSON(e))throw new InvalidJsonStructureError;return new TokenState(EncodedPredicate.fromCBOR(HexConverter.decode(e.predicate)),e.data?HexConverter.decode(e.data):null)}toCBOR(){return CborSerializer.encodeArray(CborSerializer.encodeArray(CborSerializer.encodeUnsignedInteger(this.predicate.engine),CborSerializer.encodeByteString(this.predicate.encode()),CborSerializer.encodeByteString(this.predicate.encodeParameters())),CborSerializer.encodeOptional(this.data,CborSerializer.encodeByteString))}toJSON(){return{data:this._data?HexConverter.encode(this._data):null,predicate:HexConverter.encode(CborSerializer.encodeArray(CborSerializer.encodeUnsignedInteger(this.predicate.engine),CborSerializer.encodeByteString(this.predicate.encode()),CborSerializer.encodeByteString(this.predicate.encodeParameters())))}}calculateHash(){return new DataHasher(HashAlgorithm.SHA256).update(this.toCBOR()).digest()}toString(){return dedent`
        TokenState:
          ${this.predicate.toString()}
          Data: ${this._data?HexConverter.encode(this._data):null}`}}var AddressScheme;(function(t){t.DIRECT="DIRECT",t.PROXY="PROXY"})(AddressScheme||(AddressScheme={}));class DirectAddress{data;checksum;constructor(e,s){this.data=e,this.checksum=s,this.checksum=new Uint8Array(s.slice(0,4))}get scheme(){return AddressScheme.DIRECT}get address(){return this.toString()}static async create(e){const s=await new DataHasher(HashAlgorithm.SHA256).update(e.imprint).digest();return new DirectAddress(e,s.data.slice(0,4))}toString(){return`${this.scheme}://${HexConverter.encode(this.data.imprint)}${HexConverter.encode(this.checksum)}`}}class BigintConverter{static decode(e,s,r){if(s=s??0,r=r??e.length,s<0||r<0||s+r>e.length)throw new Error("Index out of bounds");let a=0n;for(let o=0;o<r;++o)a=a<<8n|BigInt(e[s+o]&255);return a}static encode(e){const s=[];for(let r=e;r>0n;r>>=8n)s.unshift(Number(r&0xffn));return new Uint8Array(s)}}class BitString{value;constructor(e){this.value=BigInt(`0x01${HexConverter.encode(e)}`)}static fromDataHash(e){return new BitString(e.imprint)}toBigInt(){return this.value}toBytes(){return BigintConverter.encode(this.value).slice(1)}toString(){return this.value.toString(2).slice(1)}}function areUint8ArraysEqual(t,e){return t===e?!0:!t||!e?!1:compareUint8Arrays(t,e)===0}function compareUint8Arrays(t,e){if(t.length!==e.length)return t.length-e.length;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return t[s]-e[s];return 0}const textEncoder$1=new TextEncoder;class TokenId{_bytes;constructor(e){this._bytes=e,this._bytes=new Uint8Array(e)}get bytes(){return new Uint8Array(this._bytes)}static async fromNameTag(e){const s=await new DataHasher(HashAlgorithm.SHA256).update(textEncoder$1.encode(e)).digest();return new TokenId(s.imprint)}static fromJSON(e){return new TokenId(HexConverter.decode(e))}static fromCBOR(e){return new TokenId(CborDeserializer.readByteString(e))}toJSON(){return HexConverter.encode(this._bytes)}toCBOR(){return CborSerializer.encodeByteString(this._bytes)}toString(){return`TokenId[${HexConverter.encode(this._bytes)}]`}toBitString(){return new BitString(this._bytes)}equals(e){return this===e?!0:e instanceof TokenId?areUint8ArraysEqual(this._bytes,e._bytes):!1}}class AddressFactory{static async createAddress(e){const s=e.split("://",2);if(s.length!=2)throw new Error("Invalid address format");let r;const a=HexConverter.decode(s[1]);switch(s.at(0)){case AddressScheme.DIRECT:r=await DirectAddress.create(DataHash.fromImprint(a.slice(0,-4)));break;case AddressScheme.PROXY:r=await ProxyAddress.fromTokenId(new TokenId(a.slice(0,-4)));break;default:throw new Error(`Invalid address format: ${s.at(0)}`)}if(r.address!==e)throw new Error("Address checksum mismatch");return r}}const AddressFactory$1=Object.freeze(Object.defineProperty({__proto__:null,AddressFactory},Symbol.toStringTag,{value:"Module"})),textDecoder=new TextDecoder;class ProxyAddress{data;checksum;constructor(e,s){this.data=e,this.checksum=s,this.checksum=s.slice()}get scheme(){return AddressScheme.PROXY}get address(){return this.toString()}static async fromNameTag(e){return ProxyAddress.fromTokenId(await TokenId.fromNameTag(e))}static async fromTokenId(e){const s=await new DataHasher(HashAlgorithm.SHA256).update(e.bytes).digest();return new ProxyAddress(e,s.data.slice(0,4))}static async resolve(e,s){const r=new Map;for(const o of s){if(o==null)throw new Error("Nametag tokens list cannot contain null elements");const l=await ProxyAddress.fromTokenId(o.id).then(c=>c.address);if(r.has(l))throw new Error(`Nametag tokens list contains duplicate addresses: ${l}`);if(o.data==null)throw new Error("Nametag token data cannot be null");r.set(l,await AddressFactory.createAddress(textDecoder.decode(o.data)))}let a=e;for(;a!==null&&a.scheme!=AddressScheme.DIRECT;)a=r.get(a.address)??null;return a}toString(){return`${AddressScheme.PROXY}://${HexConverter.encode(this.data.bytes)}${HexConverter.encode(this.checksum)}`}}const ProxyAddress$1=Object.freeze(Object.defineProperty({__proto__:null,ProxyAddress},Symbol.toStringTag,{value:"Module"}));var EmbeddedPredicateType;(function(t){t[t.UNMASKED=0]="UNMASKED",t[t.MASKED=1]="MASKED",t[t.BURN=2]="BURN"})(EmbeddedPredicateType||(EmbeddedPredicateType={}));class BurnPredicateReference{hash;constructor(e){this.hash=e}static async create(e,s){return new BurnPredicateReference(await new DataHasher(HashAlgorithm.SHA256).update(CborSerializer.encodeArray(CborSerializer.encodeByteString(new Uint8Array([EmbeddedPredicateType.BURN])),CborSerializer.encodeByteString(e.toCBOR()),CborSerializer.encodeByteString(s.imprint))).digest())}toAddress(){return DirectAddress.create(this.hash)}}class TokenType{_bytes;constructor(e){this._bytes=e,this._bytes=new Uint8Array(e)}get bytes(){return new Uint8Array(this._bytes)}static fromJSON(e){return new TokenType(HexConverter.decode(e))}static fromCBOR(e){return new TokenType(CborDeserializer.readByteString(e))}toJSON(){return HexConverter.encode(this._bytes)}toCBOR(){return CborSerializer.encodeByteString(this._bytes)}toString(){return`TokenType[${HexConverter.encode(this._bytes)}]`}equals(e){return this===e?!0:e instanceof TokenType?areUint8ArraysEqual(this._bytes,e._bytes):!1}}const TokenType$1=Object.freeze(Object.defineProperty({__proto__:null,TokenType},Symbol.toStringTag,{value:"Module"}));class BurnPredicate{tokenId;tokenType;reason;constructor(e,s,r){this.tokenId=e,this.tokenType=s,this.reason=r}get engine(){return PredicateEngineType.EMBEDDED}static fromCBOR(e){const s=CborDeserializer.readArray(e);return new BurnPredicate(TokenId.fromCBOR(s[0]),TokenType.fromCBOR(s[1]),DataHash.fromCBOR(s[2]))}verify(){return Promise.resolve(!1)}isOwner(){return Promise.resolve(!1)}getReference(){return BurnPredicateReference.create(this.tokenType,this.reason)}encode(){return new Uint8Array([EmbeddedPredicateType.BURN])}encodeParameters(){return CborSerializer.encodeArray(this.tokenId.toCBOR(),this.tokenType.toCBOR(),this.reason.toCBOR())}async calculateHash(){const e=await this.getReference();return new DataHasher(HashAlgorithm.SHA256).update(CborSerializer.encodeArray(e.hash.toCBOR(),this.tokenId.toCBOR())).digest()}toString(){return dedent`
          Predicate[${EmbeddedPredicateType[EmbeddedPredicateType.BURN]}]:
            TokenId: ${this.tokenId.toString()}
            TokenType: ${this.tokenType.toString()}
            Reason: ${this.reason.toString()}`}}class RequestId extends DataHash{hash;constructor(e){super(e.algorithm,e.data),this.hash=e}static create(e,s){return RequestId.createFromImprint(e,s.imprint)}static async createFromImprint(e,s){const r=await new DataHasher(HashAlgorithm.SHA256).update(e).update(s).digest();return new RequestId(r)}static fromCBOR(e){return new RequestId(DataHash.fromCBOR(e))}static fromJSON(e){return new RequestId(DataHash.fromJSON(e))}toBitString(){return BitString.fromDataHash(this)}toString(){return`RequestId[${this.hash.toString()}]`}}class Signature{_bytes;recovery;algorithm="secp256k1";constructor(e,s){this._bytes=e,this.recovery=s,this._bytes=new Uint8Array(e)}get bytes(){return new Uint8Array(this._bytes)}static fromCBOR(e){return Signature.decode(CborDeserializer.readByteString(e))}static decode(e){if(e.length!==65)throw new Error("Signature must contain signature and recovery byte.");return new Signature(e.slice(0,-1),e[e.length-1])}static fromJSON(e){return Signature.decode(HexConverter.decode(e))}toJSON(){return HexConverter.encode(this.encode())}toCBOR(){return CborSerializer.encodeByteString(this.encode())}encode(){return new Uint8Array([...this._bytes,this.recovery])}toString(){return`${HexConverter.encode(this.encode())}`}}const _0n$9=BigInt(0),_1n$9=BigInt(1);function abool$2(t,e=""){if(typeof t!="boolean"){const s=e&&`"${e}" `;throw new Error(s+"expected boolean, got type="+typeof t)}return t}function abignumber$1(t){if(typeof t=="bigint"){if(!isPosBig$2(t))throw new Error("positive bigint expected, got "+t)}else anumber$3(t);return t}function numberToHexUnpadded$2(t){const e=abignumber$1(t).toString(16);return e.length&1?"0"+e:e}function hexToNumber$2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_0n$9:BigInt("0x"+t)}function bytesToNumberBE$2(t){return hexToNumber$2(bytesToHex$3(t))}function bytesToNumberLE$2(t){return hexToNumber$2(bytesToHex$3(copyBytes$2(abytes$3(t)).reverse()))}function numberToBytesBE$2(t,e){anumber$3(e),t=abignumber$1(t);const s=hexToBytes$2(t.toString(16).padStart(e*2,"0"));if(s.length!==e)throw new Error("number too large");return s}function numberToBytesLE$2(t,e){return numberToBytesBE$2(t,e).reverse()}function copyBytes$2(t){return Uint8Array.from(t)}const isPosBig$2=t=>typeof t=="bigint"&&_0n$9<=t;function inRange$2(t,e,s){return isPosBig$2(t)&&isPosBig$2(e)&&isPosBig$2(s)&&e<=t&&t<s}function aInRange$2(t,e,s,r){if(!inRange$2(e,s,r))throw new Error("expected valid "+t+": "+s+" <= n < "+r+", got "+e)}function bitLen$2(t){let e;for(e=0;t>_0n$9;t>>=_1n$9,e+=1);return e}const bitMask$2=t=>(_1n$9<<BigInt(t))-_1n$9;function createHmacDrbg$2(t,e,s){if(anumber$3(t,"hashLen"),anumber$3(e,"qByteLen"),typeof s!="function")throw new Error("hmacFn must be a function");const r=C=>new Uint8Array(C),a=Uint8Array.of(),o=Uint8Array.of(0),l=Uint8Array.of(1),c=1e3;let u=r(t),f=r(t),d=0;const p=()=>{u.fill(1),f.fill(0),d=0},m=(...C)=>s(f,concatBytes$2(u,...C)),y=(C=a)=>{f=m(o,C),u=m(),C.length!==0&&(f=m(l,C),u=m())},b=()=>{if(d++>=c)throw new Error("drbg: tried max amount of iterations");let C=0;const j=[];for(;C<e;){u=m();const B=u.slice();j.push(B),C+=u.length}return concatBytes$2(...j)};return(C,j)=>{p(),y(C);let B;for(;!(B=j(b()));)y();return p(),B}}function validateObject$1(t,e={},s={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(o,l,c){const u=t[o];if(c&&u===void 0)return;const f=typeof u;if(f!==l||u===null)throw new Error(`param "${o}" is invalid: expected ${l}, got ${f}`)}const a=(o,l)=>Object.entries(o).forEach(([c,u])=>r(c,u,l));a(e,!1),a(s,!0)}function memoized$2(t){const e=new WeakMap;return(s,...r)=>{const a=e.get(s);if(a!==void 0)return a;const o=t(s,...r);return e.set(s,o),o}}const _0n$8=BigInt(0),_1n$8=BigInt(1),_2n$6=BigInt(2),_3n$4=BigInt(3),_4n$4=BigInt(4),_5n$2=BigInt(5),_7n$2=BigInt(7),_8n$2=BigInt(8),_9n$2=BigInt(9),_16n$2=BigInt(16);function mod$2(t,e){const s=t%e;return s>=_0n$8?s:e+s}function pow2$2(t,e,s){let r=t;for(;e-- >_0n$8;)r*=r,r%=s;return r}function invert$2(t,e){if(t===_0n$8)throw new Error("invert: expected non-zero number");if(e<=_0n$8)throw new Error("invert: expected positive modulus, got "+e);let s=mod$2(t,e),r=e,a=_0n$8,o=_1n$8;for(;s!==_0n$8;){const c=r/s,u=r%s,f=a-o*c;r=s,s=u,a=o,o=f}if(r!==_1n$8)throw new Error("invert: does not exist");return mod$2(a,e)}function assertIsSquare$2(t,e,s){if(!t.eql(t.sqr(e),s))throw new Error("Cannot find square root")}function sqrt3mod4$2(t,e){const s=(t.ORDER+_1n$8)/_4n$4,r=t.pow(e,s);return assertIsSquare$2(t,r,e),r}function sqrt5mod8$2(t,e){const s=(t.ORDER-_5n$2)/_8n$2,r=t.mul(e,_2n$6),a=t.pow(r,s),o=t.mul(e,a),l=t.mul(t.mul(o,_2n$6),a),c=t.mul(o,t.sub(l,t.ONE));return assertIsSquare$2(t,c,e),c}function sqrt9mod16$2(t){const e=Field$2(t),s=tonelliShanks$2(t),r=s(e,e.neg(e.ONE)),a=s(e,r),o=s(e,e.neg(r)),l=(t+_7n$2)/_16n$2;return(c,u)=>{let f=c.pow(u,l),d=c.mul(f,r);const p=c.mul(f,a),m=c.mul(f,o),y=c.eql(c.sqr(d),u),b=c.eql(c.sqr(p),u);f=c.cmov(f,d,y),d=c.cmov(m,p,b);const E=c.eql(c.sqr(d),u),C=c.cmov(f,d,E);return assertIsSquare$2(c,C,u),C}}function tonelliShanks$2(t){if(t<_3n$4)throw new Error("sqrt is not defined for small field");let e=t-_1n$8,s=0;for(;e%_2n$6===_0n$8;)e/=_2n$6,s++;let r=_2n$6;const a=Field$2(t);for(;FpLegendre$2(a,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(s===1)return sqrt3mod4$2;let o=a.pow(r,e);const l=(e+_1n$8)/_2n$6;return function(u,f){if(u.is0(f))return f;if(FpLegendre$2(u,f)!==1)throw new Error("Cannot find square root");let d=s,p=u.mul(u.ONE,o),m=u.pow(f,e),y=u.pow(f,l);for(;!u.eql(m,u.ONE);){if(u.is0(m))return u.ZERO;let b=1,E=u.sqr(m);for(;!u.eql(E,u.ONE);)if(b++,E=u.sqr(E),b===d)throw new Error("Cannot find square root");const C=_1n$8<<BigInt(d-b-1),j=u.pow(p,C);d=b,p=u.sqr(j),m=u.mul(m,p),y=u.mul(y,j)}return y}}function FpSqrt$2(t){return t%_4n$4===_3n$4?sqrt3mod4$2:t%_8n$2===_5n$2?sqrt5mod8$2:t%_16n$2===_9n$2?sqrt9mod16$2(t):tonelliShanks$2(t)}const isNegativeLE=(t,e)=>(mod$2(t,e)&_1n$8)===_1n$8,FIELD_FIELDS$2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$2(t){const e={ORDER:"bigint",BYTES:"number",BITS:"number"},s=FIELD_FIELDS$2.reduce((r,a)=>(r[a]="function",r),e);return validateObject$1(t,s),t}function FpPow$2(t,e,s){if(s<_0n$8)throw new Error("invalid exponent, negatives unsupported");if(s===_0n$8)return t.ONE;if(s===_1n$8)return e;let r=t.ONE,a=e;for(;s>_0n$8;)s&_1n$8&&(r=t.mul(r,a)),a=t.sqr(a),s>>=_1n$8;return r}function FpInvertBatch$2(t,e,s=!1){const r=new Array(e.length).fill(s?t.ZERO:void 0),a=e.reduce((l,c,u)=>t.is0(c)?l:(r[u]=l,t.mul(l,c)),t.ONE),o=t.inv(a);return e.reduceRight((l,c,u)=>t.is0(c)?l:(r[u]=t.mul(l,r[u]),t.mul(l,c)),o),r}function FpLegendre$2(t,e){const s=(t.ORDER-_1n$8)/_2n$6,r=t.pow(e,s),a=t.eql(r,t.ONE),o=t.eql(r,t.ZERO),l=t.eql(r,t.neg(t.ONE));if(!a&&!o&&!l)throw new Error("invalid Legendre symbol result");return a?1:o?0:-1}function nLength$2(t,e){e!==void 0&&anumber$3(e);const s=e!==void 0?e:t.toString(2).length,r=Math.ceil(s/8);return{nBitLength:s,nByteLength:r}}let _Field$1=class{ORDER;BITS;BYTES;isLE;ZERO=_0n$8;ONE=_1n$8;_lengths;_sqrt;_mod;constructor(e,s={}){if(e<=_0n$8)throw new Error("invalid field: expected ORDER > 0, got "+e);let r;this.isLE=!1,s!=null&&typeof s=="object"&&(typeof s.BITS=="number"&&(r=s.BITS),typeof s.sqrt=="function"&&(this.sqrt=s.sqrt),typeof s.isLE=="boolean"&&(this.isLE=s.isLE),s.allowedLengths&&(this._lengths=s.allowedLengths?.slice()),typeof s.modFromBytes=="boolean"&&(this._mod=s.modFromBytes));const{nBitLength:a,nByteLength:o}=nLength$2(e,r);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=e,this.BITS=a,this.BYTES=o,this._sqrt=void 0,Object.preventExtensions(this)}create(e){return mod$2(e,this.ORDER)}isValid(e){if(typeof e!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof e);return _0n$8<=e&&e<this.ORDER}is0(e){return e===_0n$8}isValidNot0(e){return!this.is0(e)&&this.isValid(e)}isOdd(e){return(e&_1n$8)===_1n$8}neg(e){return mod$2(-e,this.ORDER)}eql(e,s){return e===s}sqr(e){return mod$2(e*e,this.ORDER)}add(e,s){return mod$2(e+s,this.ORDER)}sub(e,s){return mod$2(e-s,this.ORDER)}mul(e,s){return mod$2(e*s,this.ORDER)}pow(e,s){return FpPow$2(this,e,s)}div(e,s){return mod$2(e*invert$2(s,this.ORDER),this.ORDER)}sqrN(e){return e*e}addN(e,s){return e+s}subN(e,s){return e-s}mulN(e,s){return e*s}inv(e){return invert$2(e,this.ORDER)}sqrt(e){return this._sqrt||(this._sqrt=FpSqrt$2(this.ORDER)),this._sqrt(this,e)}toBytes(e){return this.isLE?numberToBytesLE$2(e,this.BYTES):numberToBytesBE$2(e,this.BYTES)}fromBytes(e,s=!1){abytes$3(e);const{_lengths:r,BYTES:a,isLE:o,ORDER:l,_mod:c}=this;if(r){if(!r.includes(e.length)||e.length>a)throw new Error("Field.fromBytes: expected "+r+" bytes, got "+e.length);const f=new Uint8Array(a);f.set(e,o?0:f.length-e.length),e=f}if(e.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+e.length);let u=o?bytesToNumberLE$2(e):bytesToNumberBE$2(e);if(c&&(u=mod$2(u,l)),!s&&!this.isValid(u))throw new Error("invalid field element: outside of range 0..ORDER");return u}invertBatch(e){return FpInvertBatch$2(this,e)}cmov(e,s,r){return r?s:e}};function Field$2(t,e={}){return new _Field$1(t,e)}function getFieldBytesLength$2(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength$2(t){const e=getFieldBytesLength$2(t);return e+Math.ceil(e/2)}function mapHashToField$2(t,e,s=!1){abytes$3(t);const r=t.length,a=getFieldBytesLength$2(e),o=getMinHashLength$2(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const l=s?bytesToNumberLE$2(t):bytesToNumberBE$2(t),c=mod$2(l,e-_1n$8)+_1n$8;return s?numberToBytesLE$2(c,a):numberToBytesBE$2(c,a)}const _0n$7=BigInt(0),_1n$7=BigInt(1);function negateCt$2(t,e){const s=e.negate();return t?s:e}function normalizeZ$2(t,e){const s=FpInvertBatch$2(t.Fp,e.map(r=>r.Z));return e.map((r,a)=>t.fromAffine(r.toAffine(s[a])))}function validateW$2(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function calcWOpts$2(t,e){validateW$2(t,e);const s=Math.ceil(e/t)+1,r=2**(t-1),a=2**t,o=bitMask$2(t),l=BigInt(t);return{windows:s,windowSize:r,mask:o,maxNumber:a,shiftBy:l}}function calcOffsets$2(t,e,s){const{windowSize:r,mask:a,maxNumber:o,shiftBy:l}=s;let c=Number(t&a),u=t>>l;c>r&&(c-=o,u+=_1n$7);const f=e*r,d=f+Math.abs(c)-1,p=c===0,m=c<0,y=e%2!==0;return{nextN:u,offset:d,isZero:p,isNeg:m,isNegF:y,offsetF:f}}const pointPrecomputes$2=new WeakMap,pointWindowSizes$2=new WeakMap;function getW$2(t){return pointWindowSizes$2.get(t)||1}function assert0$2(t){if(t!==_0n$7)throw new Error("invalid wNAF")}let wNAF$2=class{BASE;ZERO;Fn;bits;constructor(e,s){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=s}_unsafeLadder(e,s,r=this.ZERO){let a=e;for(;s>_0n$7;)s&_1n$7&&(r=r.add(a)),a=a.double(),s>>=_1n$7;return r}precomputeWindow(e,s){const{windows:r,windowSize:a}=calcWOpts$2(s,this.bits),o=[];let l=e,c=l;for(let u=0;u<r;u++){c=l,o.push(c);for(let f=1;f<a;f++)c=c.add(l),o.push(c);l=c.double()}return o}wNAF(e,s,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let a=this.ZERO,o=this.BASE;const l=calcWOpts$2(e,this.bits);for(let c=0;c<l.windows;c++){const{nextN:u,offset:f,isZero:d,isNeg:p,isNegF:m,offsetF:y}=calcOffsets$2(r,c,l);r=u,d?o=o.add(negateCt$2(m,s[y])):a=a.add(negateCt$2(p,s[f]))}return assert0$2(r),{p:a,f:o}}wNAFUnsafe(e,s,r,a=this.ZERO){const o=calcWOpts$2(e,this.bits);for(let l=0;l<o.windows&&r!==_0n$7;l++){const{nextN:c,offset:u,isZero:f,isNeg:d}=calcOffsets$2(r,l,o);if(r=c,!f){const p=s[u];a=a.add(d?p.negate():p)}}return assert0$2(r),a}getPrecomputes(e,s,r){let a=pointPrecomputes$2.get(s);return a||(a=this.precomputeWindow(s,e),e!==1&&(typeof r=="function"&&(a=r(a)),pointPrecomputes$2.set(s,a))),a}cached(e,s,r){const a=getW$2(e);return this.wNAF(a,this.getPrecomputes(a,e,r),s)}unsafe(e,s,r,a){const o=getW$2(e);return o===1?this._unsafeLadder(e,s,a):this.wNAFUnsafe(o,this.getPrecomputes(o,e,r),s,a)}createCache(e,s){validateW$2(s,this.bits),pointWindowSizes$2.set(e,s),pointPrecomputes$2.delete(e)}hasCache(e){return getW$2(e)!==1}};function mulEndoUnsafe$2(t,e,s,r){let a=e,o=t.ZERO,l=t.ZERO;for(;s>_0n$7||r>_0n$7;)s&_1n$7&&(o=o.add(a)),r&_1n$7&&(l=l.add(a)),a=a.double(),s>>=_1n$7,r>>=_1n$7;return{p1:o,p2:l}}function createField$2(t,e,s){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return validateField$2(e),e}else return Field$2(t,{isLE:s})}function createCurveFields$1(t,e,s={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const u of["p","n","h"]){const f=e[u];if(!(typeof f=="bigint"&&f>_0n$7))throw new Error(`CURVE.${u} must be positive bigint`)}const a=createField$2(e.p,s.Fp,r),o=createField$2(e.n,s.Fn,r),c=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const u of c)if(!a.isValid(e[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:a,Fn:o}}function createKeygen$1(t,e){return function(r){const a=t(r);return{secretKey:a,publicKey:e(a)}}}let _HMAC$2=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,s){if(ahash$3(e),abytes$3(s,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,a=new Uint8Array(r);a.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=e.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),clean$3(a)}update(e){return aexists$3(this),this.iHash.update(e),this}digestInto(e){aexists$3(this),abytes$3(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});const{oHash:s,iHash:r,finished:a,destroyed:o,blockLen:l,outputLen:c}=this;return e=e,e.finished=a,e.destroyed=o,e.blockLen=l,e.outputLen=c,e.oHash=s._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$3=(t,e,s)=>new _HMAC$2(t,e).update(s).digest();hmac$3.create=(t,e)=>new _HMAC$2(t,e);const divNearest$2=(t,e)=>(t+(t>=0?e:-e)/_2n$5)/e;function _splitEndoScalar$2(t,e,s){const[[r,a],[o,l]]=e,c=divNearest$2(l*t,s),u=divNearest$2(-a*t,s);let f=t-c*r-u*o,d=-c*a-u*l;const p=f<_0n$6,m=d<_0n$6;p&&(f=-f),m&&(d=-d);const y=bitMask$2(Math.ceil(bitLen$2(s)/2))+_1n$6;if(f<_0n$6||f>=y||d<_0n$6||d>=y)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:p,k1:f,k2neg:m,k2:d}}function validateSigFormat$2(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function validateSigOpts$2(t,e){const s={};for(let r of Object.keys(e))s[r]=t[r]===void 0?e[r]:t[r];return abool$2(s.lowS,"lowS"),abool$2(s.prehash,"prehash"),s.format!==void 0&&validateSigFormat$2(s.format),s}let DERErr$2=class extends Error{constructor(e=""){super(e)}};const DER$2={Err:DERErr$2,_tlv:{encode:(t,e)=>{const{Err:s}=DER$2;if(t<0||t>256)throw new s("tlv.encode: wrong tag");if(e.length&1)throw new s("tlv.encode: unpadded data");const r=e.length/2,a=numberToHexUnpadded$2(r);if(a.length/2&128)throw new s("tlv.encode: long form length too big");const o=r>127?numberToHexUnpadded$2(a.length/2|128):"";return numberToHexUnpadded$2(t)+o+a+e},decode(t,e){const{Err:s}=DER$2;let r=0;if(t<0||t>256)throw new s("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new s("tlv.decode: wrong tlv");const a=e[r++],o=!!(a&128);let l=0;if(!o)l=a;else{const u=a&127;if(!u)throw new s("tlv.decode(long): indefinite length not supported");if(u>4)throw new s("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new s("tlv.decode: length bytes not complete");if(f[0]===0)throw new s("tlv.decode(long): zero leftmost byte");for(const d of f)l=l<<8|d;if(r+=u,l<128)throw new s("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+l);if(c.length!==l)throw new s("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+l)}}},_int:{encode(t){const{Err:e}=DER$2;if(t<_0n$6)throw new e("integer: negative integers are not allowed");let s=numberToHexUnpadded$2(t);if(Number.parseInt(s[0],16)&8&&(s="00"+s),s.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return s},decode(t){const{Err:e}=DER$2;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bytesToNumberBE$2(t)}},toSig(t){const{Err:e,_int:s,_tlv:r}=DER$2,a=abytes$3(t,void 0,"signature"),{v:o,l}=r.decode(48,a);if(l.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,o),{v:f,l:d}=r.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:s.decode(c),s:s.decode(f)}},hexFromSig(t){const{_tlv:e,_int:s}=DER$2,r=e.encode(2,s.encode(t.r)),a=e.encode(2,s.encode(t.s)),o=r+a;return e.encode(48,o)}},_0n$6=BigInt(0),_1n$6=BigInt(1),_2n$5=BigInt(2),_3n$3=BigInt(3),_4n$3=BigInt(4);function weierstrass$2(t,e={}){const s=createCurveFields$1("weierstrass",t,e),{Fp:r,Fn:a}=s;let o=s.CURVE;const{h:l,n:c}=o;validateObject$1(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:u}=e;if(u&&(!r.is0(o.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=getWLengths$2(r,a);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(O,k,v){const{x:S,y:N}=k.toAffine(),R=r.toBytes(S);if(abool$2(v,"isCompressed"),v){d();const T=!r.isOdd(N);return concatBytes$2(pprefix$2(T),R)}else return concatBytes$2(Uint8Array.of(4),R,r.toBytes(N))}function m(O){abytes$3(O,void 0,"Point");const{publicKey:k,publicKeyUncompressed:v}=f,S=O.length,N=O[0],R=O.subarray(1);if(S===k&&(N===2||N===3)){const T=r.fromBytes(R);if(!r.isValid(T))throw new Error("bad point: is not on curve, wrong x");const M=E(T);let I;try{I=r.sqrt(M)}catch(L){const Y=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}d();const $=r.isOdd(I);return(N&1)===1!==$&&(I=r.neg(I)),{x:T,y:I}}else if(S===v&&N===4){const T=r.BYTES,M=r.fromBytes(R.subarray(0,T)),I=r.fromBytes(R.subarray(T,T*2));if(!C(M,I))throw new Error("bad point: is not on curve");return{x:M,y:I}}else throw new Error(`bad point: got length ${S}, expected compressed=${k} or uncompressed=${v}`)}const y=e.toBytes||p,b=e.fromBytes||m;function E(O){const k=r.sqr(O),v=r.mul(k,O);return r.add(r.add(v,r.mul(O,o.a)),o.b)}function C(O,k){const v=r.sqr(k),S=E(O);return r.eql(v,S)}if(!C(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const j=r.mul(r.pow(o.a,_3n$3),_4n$3),B=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(j,B)))throw new Error("bad curve params: a or b");function D(O,k,v=!1){if(!r.isValid(k)||v&&r.is0(k))throw new Error(`bad point coordinate ${O}`);return k}function F(O){if(!(O instanceof W))throw new Error("Weierstrass Point expected")}function q(O){if(!u||!u.basises)throw new Error("no endo");return _splitEndoScalar$2(O,u.basises,a.ORDER)}const V=memoized$2((O,k)=>{const{X:v,Y:S,Z:N}=O;if(r.eql(N,r.ONE))return{x:v,y:S};const R=O.is0();k==null&&(k=R?r.ONE:r.inv(N));const T=r.mul(v,k),M=r.mul(S,k),I=r.mul(N,k);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:T,y:M}}),ee=memoized$2(O=>{if(O.is0()){if(e.allowInfinityPoint&&!r.is0(O.Y))return;throw new Error("bad point: ZERO")}const{x:k,y:v}=O.toAffine();if(!r.isValid(k)||!r.isValid(v))throw new Error("bad point: x or y not field elements");if(!C(k,v))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Q(O,k,v,S,N){return v=new W(r.mul(v.X,O),v.Y,v.Z),k=negateCt$2(S,k),v=negateCt$2(N,v),k.add(v)}class W{static BASE=new W(o.Gx,o.Gy,r.ONE);static ZERO=new W(r.ZERO,r.ONE,r.ZERO);static Fp=r;static Fn=a;X;Y;Z;constructor(k,v,S){this.X=D("x",k),this.Y=D("y",v,!0),this.Z=D("z",S),Object.freeze(this)}static CURVE(){return o}static fromAffine(k){const{x:v,y:S}=k||{};if(!k||!r.isValid(v)||!r.isValid(S))throw new Error("invalid affine point");if(k instanceof W)throw new Error("projective point not allowed");return r.is0(v)&&r.is0(S)?W.ZERO:new W(v,S,r.ONE)}static fromBytes(k){const v=W.fromAffine(b(abytes$3(k,void 0,"point")));return v.assertValidity(),v}static fromHex(k){return W.fromBytes(hexToBytes$2(k))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(k=8,v=!0){return z.createCache(this,k),v||this.multiply(_3n$3),this}assertValidity(){ee(this)}hasEvenY(){const{y:k}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(k)}equals(k){F(k);const{X:v,Y:S,Z:N}=this,{X:R,Y:T,Z:M}=k,I=r.eql(r.mul(v,M),r.mul(R,N)),$=r.eql(r.mul(S,M),r.mul(T,N));return I&&$}negate(){return new W(this.X,r.neg(this.Y),this.Z)}double(){const{a:k,b:v}=o,S=r.mul(v,_3n$3),{X:N,Y:R,Z:T}=this;let M=r.ZERO,I=r.ZERO,$=r.ZERO,A=r.mul(N,N),L=r.mul(R,R),Y=r.mul(T,T),oe=r.mul(N,R);return oe=r.add(oe,oe),$=r.mul(N,T),$=r.add($,$),M=r.mul(k,$),I=r.mul(S,Y),I=r.add(M,I),M=r.sub(L,I),I=r.add(L,I),I=r.mul(M,I),M=r.mul(oe,M),$=r.mul(S,$),Y=r.mul(k,Y),oe=r.sub(A,Y),oe=r.mul(k,oe),oe=r.add(oe,$),$=r.add(A,A),A=r.add($,A),A=r.add(A,Y),A=r.mul(A,oe),I=r.add(I,A),Y=r.mul(R,T),Y=r.add(Y,Y),A=r.mul(Y,oe),M=r.sub(M,A),$=r.mul(Y,L),$=r.add($,$),$=r.add($,$),new W(M,I,$)}add(k){F(k);const{X:v,Y:S,Z:N}=this,{X:R,Y:T,Z:M}=k;let I=r.ZERO,$=r.ZERO,A=r.ZERO;const L=o.a,Y=r.mul(o.b,_3n$3);let oe=r.mul(v,R),J=r.mul(S,T),U=r.mul(N,M),G=r.add(v,S),ae=r.add(R,T);G=r.mul(G,ae),ae=r.add(oe,J),G=r.sub(G,ae),ae=r.add(v,N);let he=r.add(R,M);return ae=r.mul(ae,he),he=r.add(oe,U),ae=r.sub(ae,he),he=r.add(S,N),I=r.add(T,M),he=r.mul(he,I),I=r.add(J,U),he=r.sub(he,I),A=r.mul(L,ae),I=r.mul(Y,U),A=r.add(I,A),I=r.sub(J,A),A=r.add(J,A),$=r.mul(I,A),J=r.add(oe,oe),J=r.add(J,oe),U=r.mul(L,U),ae=r.mul(Y,ae),J=r.add(J,U),U=r.sub(oe,U),U=r.mul(L,U),ae=r.add(ae,U),oe=r.mul(J,ae),$=r.add($,oe),oe=r.mul(he,ae),I=r.mul(G,I),I=r.sub(I,oe),oe=r.mul(G,J),A=r.mul(he,A),A=r.add(A,oe),new W(I,$,A)}subtract(k){return this.add(k.negate())}is0(){return this.equals(W.ZERO)}multiply(k){const{endo:v}=e;if(!a.isValidNot0(k))throw new Error("invalid scalar: out of range");let S,N;const R=T=>z.cached(this,T,M=>normalizeZ$2(W,M));if(v){const{k1neg:T,k1:M,k2neg:I,k2:$}=q(k),{p:A,f:L}=R(M),{p:Y,f:oe}=R($);N=L.add(oe),S=Q(v.beta,A,Y,T,I)}else{const{p:T,f:M}=R(k);S=T,N=M}return normalizeZ$2(W,[S,N])[0]}multiplyUnsafe(k){const{endo:v}=e,S=this;if(!a.isValid(k))throw new Error("invalid scalar: out of range");if(k===_0n$6||S.is0())return W.ZERO;if(k===_1n$6)return S;if(z.hasCache(this))return this.multiply(k);if(v){const{k1neg:N,k1:R,k2neg:T,k2:M}=q(k),{p1:I,p2:$}=mulEndoUnsafe$2(W,S,R,M);return Q(v.beta,I,$,N,T)}else return z.unsafe(S,k)}toAffine(k){return V(this,k)}isTorsionFree(){const{isTorsionFree:k}=e;return l===_1n$6?!0:k?k(W,this):z.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:k}=e;return l===_1n$6?this:k?k(W,this):this.multiplyUnsafe(l)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}toBytes(k=!0){return abool$2(k,"isCompressed"),this.assertValidity(),y(W,this,k)}toHex(k=!0){return bytesToHex$3(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const Z=a.BITS,z=new wNAF$2(W,e.endo?Math.ceil(Z/2):Z);return W.BASE.precompute(8),W}function pprefix$2(t){return Uint8Array.of(t?2:3)}function getWLengths$2(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function ecdh$2(t,e={}){const{Fn:s}=t,r=e.randomBytes||randomBytes$1,a=Object.assign(getWLengths$2(t.Fp,s),{seed:getMinHashLength$2(s.ORDER)});function o(y){try{const b=s.fromBytes(y);return s.isValidNot0(b)}catch{return!1}}function l(y,b){const{publicKey:E,publicKeyUncompressed:C}=a;try{const j=y.length;return b===!0&&j!==E||b===!1&&j!==C?!1:!!t.fromBytes(y)}catch{return!1}}function c(y=r(a.seed)){return mapHashToField$2(abytes$3(y,a.seed,"seed"),s.ORDER)}function u(y,b=!0){return t.BASE.multiply(s.fromBytes(y)).toBytes(b)}function f(y){const{secretKey:b,publicKey:E,publicKeyUncompressed:C}=a;if(!isBytes$3(y)||"_lengths"in s&&s._lengths||b===E)return;const j=abytes$3(y,void 0,"key").length;return j===E||j===C}function d(y,b,E=!0){if(f(y)===!0)throw new Error("first arg must be private key");if(f(b)===!1)throw new Error("second arg must be public key");const C=s.fromBytes(y);return t.fromBytes(b).multiply(C).toBytes(E)}const p={isValidSecretKey:o,isValidPublicKey:l,randomSecretKey:c},m=createKeygen$1(c,u);return Object.freeze({getPublicKey:u,getSharedSecret:d,keygen:m,Point:t,utils:p,lengths:a})}function ecdsa$2(t,e,s={}){ahash$3(e),validateObject$1(s,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),s=Object.assign({},s);const r=s.randomBytes||randomBytes$1,a=s.hmac||((v,S)=>hmac$3(e,v,S)),{Fp:o,Fn:l}=t,{ORDER:c,BITS:u}=l,{keygen:f,getPublicKey:d,getSharedSecret:p,utils:m,lengths:y}=ecdh$2(t,s),b={prehash:!0,lowS:typeof s.lowS=="boolean"?s.lowS:!0,format:"compact",extraEntropy:!1},E=c*_2n$5<o.ORDER;function C(v){const S=c>>_1n$6;return v>S}function j(v,S){if(!l.isValidNot0(S))throw new Error(`invalid signature ${v}: out of range 1..Point.Fn.ORDER`);return S}function B(){if(E)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function D(v,S){validateSigFormat$2(S);const N=y.signature,R=S==="compact"?N:S==="recovered"?N+1:void 0;return abytes$3(v,R)}class F{r;s;recovery;constructor(S,N,R){if(this.r=j("r",S),this.s=j("s",N),R!=null){if(B(),![0,1,2,3].includes(R))throw new Error("invalid recovery id");this.recovery=R}Object.freeze(this)}static fromBytes(S,N=b.format){D(S,N);let R;if(N==="der"){const{r:$,s:A}=DER$2.toSig(abytes$3(S));return new F($,A)}N==="recovered"&&(R=S[0],N="compact",S=S.subarray(1));const T=y.signature/2,M=S.subarray(0,T),I=S.subarray(T,T*2);return new F(l.fromBytes(M),l.fromBytes(I),R)}static fromHex(S,N){return this.fromBytes(hexToBytes$2(S),N)}assertRecovery(){const{recovery:S}=this;if(S==null)throw new Error("invalid recovery id: must be present");return S}addRecoveryBit(S){return new F(this.r,this.s,S)}recoverPublicKey(S){const{r:N,s:R}=this,T=this.assertRecovery(),M=T===2||T===3?N+c:N;if(!o.isValid(M))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const I=o.toBytes(M),$=t.fromBytes(concatBytes$2(pprefix$2((T&1)===0),I)),A=l.inv(M),L=V(abytes$3(S,void 0,"msgHash")),Y=l.create(-L*A),oe=l.create(R*A),J=t.BASE.multiplyUnsafe(Y).add($.multiplyUnsafe(oe));if(J.is0())throw new Error("invalid recovery: point at infinify");return J.assertValidity(),J}hasHighS(){return C(this.s)}toBytes(S=b.format){if(validateSigFormat$2(S),S==="der")return hexToBytes$2(DER$2.hexFromSig(this));const{r:N,s:R}=this,T=l.toBytes(N),M=l.toBytes(R);return S==="recovered"?(B(),concatBytes$2(Uint8Array.of(this.assertRecovery()),T,M)):concatBytes$2(T,M)}toHex(S){return bytesToHex$3(this.toBytes(S))}}const q=s.bits2int||function(S){if(S.length>8192)throw new Error("input is too large");const N=bytesToNumberBE$2(S),R=S.length*8-u;return R>0?N>>BigInt(R):N},V=s.bits2int_modN||function(S){return l.create(q(S))},ee=bitMask$2(u);function Q(v){return aInRange$2("num < 2^"+u,v,_0n$6,ee),l.toBytes(v)}function W(v,S){return abytes$3(v,void 0,"message"),S?abytes$3(e(v),void 0,"prehashed message"):v}function Z(v,S,N){const{lowS:R,prehash:T,extraEntropy:M}=validateSigOpts$2(N,b);v=W(v,T);const I=V(v),$=l.fromBytes(S);if(!l.isValidNot0($))throw new Error("invalid private key");const A=[Q($),Q(I)];if(M!=null&&M!==!1){const J=M===!0?r(y.secretKey):M;A.push(abytes$3(J,void 0,"extraEntropy"))}const L=concatBytes$2(...A),Y=I;function oe(J){const U=q(J);if(!l.isValidNot0(U))return;const G=l.inv(U),ae=t.BASE.multiply(U).toAffine(),he=l.create(ae.x);if(he===_0n$6)return;const le=l.create(G*l.create(Y+he*$));if(le===_0n$6)return;let te=(ae.x===he?0:2)|Number(ae.y&_1n$6),pe=le;return R&&C(le)&&(pe=l.neg(le),te^=1),new F(he,pe,E?void 0:te)}return{seed:L,k2sig:oe}}function z(v,S,N={}){const{seed:R,k2sig:T}=Z(v,S,N);return createHmacDrbg$2(e.outputLen,l.BYTES,a)(R,T).toBytes(N.format)}function O(v,S,N,R={}){const{lowS:T,prehash:M,format:I}=validateSigOpts$2(R,b);if(N=abytes$3(N,void 0,"publicKey"),S=W(S,M),!isBytes$3(v)){const $=v instanceof F?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+$)}D(v,I);try{const $=F.fromBytes(v,I),A=t.fromBytes(N);if(T&&$.hasHighS())return!1;const{r:L,s:Y}=$,oe=V(S),J=l.inv(Y),U=l.create(oe*J),G=l.create(L*J),ae=t.BASE.multiplyUnsafe(U).add(A.multiplyUnsafe(G));return ae.is0()?!1:l.create(ae.x)===L}catch{return!1}}function k(v,S,N={}){const{prehash:R}=validateSigOpts$2(N,b);return S=W(S,R),F.fromBytes(v,"recovered").recoverPublicKey(S).toBytes()}return Object.freeze({keygen:f,getPublicKey:d,getSharedSecret:p,utils:m,lengths:y,Point:t,sign:z,verify:O,recoverPublicKey:k,Signature:F,hash:e})}const secp256k1_CURVE$2={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},secp256k1_ENDO$2={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},_2n$4=BigInt(2);function sqrtMod$2(t){const e=secp256k1_CURVE$2.p,s=BigInt(3),r=BigInt(6),a=BigInt(11),o=BigInt(22),l=BigInt(23),c=BigInt(44),u=BigInt(88),f=t*t*t%e,d=f*f*t%e,p=pow2$2(d,s,e)*d%e,m=pow2$2(p,s,e)*d%e,y=pow2$2(m,_2n$4,e)*f%e,b=pow2$2(y,a,e)*y%e,E=pow2$2(b,o,e)*b%e,C=pow2$2(E,c,e)*E%e,j=pow2$2(C,u,e)*C%e,B=pow2$2(j,c,e)*E%e,D=pow2$2(B,s,e)*d%e,F=pow2$2(D,l,e)*b%e,q=pow2$2(F,r,e)*f%e,V=pow2$2(q,_2n$4,e);if(!Fpk1$2.eql(Fpk1$2.sqr(V),t))throw new Error("Cannot find square root");return V}const Fpk1$2=Field$2(secp256k1_CURVE$2.p,{sqrt:sqrtMod$2}),Pointk1$2=weierstrass$2(secp256k1_CURVE$2,{Fp:Fpk1$2,endo:secp256k1_ENDO$2}),secp256k1$2=ecdsa$2(Pointk1$2,sha256$3);class SigningService{privateKey;_publicKey;constructor(e){this.privateKey=e,this.privateKey=new Uint8Array(e),this._publicKey=secp256k1$2.getPublicKey(this.privateKey,!0)}get publicKey(){return new Uint8Array(this._publicKey)}get algorithm(){return"secp256k1"}static generatePrivateKey(){return secp256k1$2.utils.randomSecretKey()}static async createFromSecret(e,s){const r=new DataHasher(HashAlgorithm.SHA256);r.update(e),s&&r.update(s);const a=await r.digest();return new SigningService(a.data)}static verifySignatureWithRecoveredPublicKey(e,s){const r=secp256k1$2.Signature.fromBytes(new Uint8Array([s.recovery,...s.bytes]),"recovered").recoverPublicKey(e.data).toBytes();return SigningService.verifyWithPublicKey(e,s.bytes,r)}static verifyWithPublicKey(e,s,r){return Promise.resolve(secp256k1$2.verify(s,e.data,r,{format:"compact",prehash:!1}))}verify(e,s){return SigningService.verifyWithPublicKey(e,s.bytes,this._publicKey)}sign(e){const s=secp256k1$2.sign(e.data,this.privateKey,{format:"recovered",prehash:!1});return Promise.resolve(new Signature(s.slice(1),s[0]))}}class Authenticator{algorithm;_publicKey;signature;stateHash;constructor(e,s,r,a){this.algorithm=e,this._publicKey=s,this.signature=r,this.stateHash=a,this._publicKey=new Uint8Array(s)}get publicKey(){return new Uint8Array(this._publicKey)}static async create(e,s,r){return new Authenticator(e.algorithm,e.publicKey,await e.sign(s),r)}static fromJSON(e){if(!Authenticator.isJSON(e))throw new InvalidJsonStructureError;return new Authenticator(e.algorithm,HexConverter.decode(e.publicKey),Signature.fromJSON(e.signature),DataHash.fromJSON(e.stateHash))}static isJSON(e){return typeof e=="object"&&e!==null&&"publicKey"in e&&typeof e.publicKey=="string"&&"algorithm"in e&&typeof e.algorithm=="string"&&"signature"in e&&typeof e.signature=="string"&&"stateHash"in e&&typeof e.stateHash=="string"}static fromCBOR(e){const s=CborDeserializer.readArray(e);return new Authenticator(CborDeserializer.readTextString(s[0]),CborDeserializer.readByteString(s[1]),Signature.decode(CborDeserializer.readByteString(s[2])),DataHash.fromImprint(CborDeserializer.readByteString(s[3])))}toCBOR(){return CborSerializer.encodeArray(CborSerializer.encodeTextString(this.algorithm),CborSerializer.encodeByteString(this.publicKey),CborSerializer.encodeByteString(this.signature.encode()),CborSerializer.encodeByteString(this.stateHash.imprint))}toJSON(){return{algorithm:this.algorithm,publicKey:HexConverter.encode(this.publicKey),signature:this.signature.toJSON(),stateHash:this.stateHash.toJSON()}}verify(e){return SigningService.verifyWithPublicKey(e,this.signature.bytes,this.publicKey)}calculateRequestId(){return RequestId.create(this._publicKey,this.stateHash)}toString(){return dedent`
      Authenticator
        Public Key: ${HexConverter.encode(this._publicKey)}
        Signature Algorithm: ${this.algorithm}
        Signature: ${this.signature.toString()}
        State Hash: ${this.stateHash.toString()}`}}class LeafValue{_bytes;constructor(e){this._bytes=e,this._bytes=new Uint8Array(e)}get bytes(){return new Uint8Array(this._bytes)}static async create(e,s){const r=await new DataHasher(HashAlgorithm.SHA256).update(e.toCBOR()).update(s.imprint).digest();return new LeafValue(r.imprint)}equals(e){return ArrayBuffer.isView(e)?HexConverter.encode(this.bytes)===HexConverter.encode(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)):!1}toString(){return`LeafValue[${HexConverter.encode(this.bytes)}]`}}class InputRecord{version;roundNumber;epoch;_previousHash;_hash;_summaryValue;timestamp;_blockHash;sumOfEarnedFees;_executedTransactionsHash;constructor(e,s,r,a,o,l,c,u,f,d){this.version=e,this.roundNumber=s,this.epoch=r,this._previousHash=a,this._hash=o,this._summaryValue=l,this.timestamp=c,this._blockHash=u,this.sumOfEarnedFees=f,this._executedTransactionsHash=d,this._previousHash=a?new Uint8Array(a):null,this._hash=new Uint8Array(o),this._summaryValue=new Uint8Array(l),this._blockHash=u?new Uint8Array(u):null,this._executedTransactionsHash=d?new Uint8Array(d):null}get previousHash(){return this._previousHash?new Uint8Array(this._previousHash):null}get hash(){return new Uint8Array(this._hash)}get summaryValue(){return new Uint8Array(this._summaryValue)}get blockHash(){return this._blockHash?new Uint8Array(this._blockHash):null}get executedTransactionsHash(){return this._executedTransactionsHash?new Uint8Array(this._executedTransactionsHash):null}static fromCBOR(e){const s=CborDeserializer.readTag(e),r=CborDeserializer.readArray(s.data);return new InputRecord(CborDeserializer.readUnsignedInteger(r[0]),CborDeserializer.readUnsignedInteger(r[1]),CborDeserializer.readUnsignedInteger(r[2]),CborDeserializer.readOptional(r[3],CborDeserializer.readByteString),CborDeserializer.readByteString(r[4]),CborDeserializer.readByteString(r[5]),CborDeserializer.readUnsignedInteger(r[6]),CborDeserializer.readOptional(r[7],CborDeserializer.readByteString),CborDeserializer.readUnsignedInteger(r[8]),CborDeserializer.readOptional(r[9],CborDeserializer.readByteString))}toCBOR(){return CborSerializer.encodeTag(1008,CborSerializer.encodeArray(CborSerializer.encodeUnsignedInteger(this.version),CborSerializer.encodeUnsignedInteger(this.roundNumber),CborSerializer.encodeUnsignedInteger(this.epoch),CborSerializer.encodeOptional(this.previousHash,CborSerializer.encodeByteString),CborSerializer.encodeByteString(this.hash),CborSerializer.encodeByteString(this.summaryValue),CborSerializer.encodeUnsignedInteger(this.timestamp),CborSerializer.encodeOptional(this.blockHash,CborSerializer.encodeByteString),CborSerializer.encodeUnsignedInteger(this.sumOfEarnedFees),CborSerializer.encodeOptional(this.executedTransactionsHash,CborSerializer.encodeByteString)))}}class ShardTreeCertificate{_shard;_siblingHashList;constructor(e,s){this._shard=e,this._siblingHashList=s,this._shard=new Uint8Array(e),this._siblingHashList=s.map(r=>new Uint8Array(r))}get shard(){return new Uint8Array(this._shard)}get siblingHashList(){return this._siblingHashList.map(e=>new Uint8Array(e))}static fromCBOR(e){const s=CborDeserializer.readArray(e);return new ShardTreeCertificate(CborDeserializer.readByteString(s[0]),CborDeserializer.readArray(s[1]).map(r=>CborDeserializer.readByteString(r)))}toCBOR(){return CborSerializer.encodeArray(CborSerializer.encodeByteString(this.shard),CborSerializer.encodeArray(...this._siblingHashList.map(e=>CborSerializer.encodeByteString(e))))}}class CborMap{_entries;constructor(e){this._entries=e.slice(),this._entries.sort((s,r)=>{if(s.key.length!=r.key.length)return s.key.length-r.key.length;for(let a=0;a<s.key.length;a++)if(s.key[a]!=r.key[a])return s.key[a]-r.key[a];return 0})}get entries(){return this._entries.slice()}}class UnicitySeal{version;networkId;rootChainRoundNumber;epoch;timestamp;_previousHash;_hash;_signatures;constructor(e,s,r,a,o,l,c,u){this.version=e,this.networkId=s,this.rootChainRoundNumber=r,this.epoch=a,this.timestamp=o,this._previousHash=l,this._hash=c,this._signatures=u}get previousHash(){return this._previousHash?new Uint8Array(this._previousHash):null}get hash(){return new Uint8Array(this._hash)}get signatures(){return this._signatures?new Map(Array.from(this._signatures.entries()).map(([e,s])=>[e,new Uint8Array(s)])):null}static fromCBOR(e){const s=CborDeserializer.readTag(e),r=CborDeserializer.readArray(s.data);return new UnicitySeal(CborDeserializer.readUnsignedInteger(r[0]),CborDeserializer.readUnsignedInteger(r[1]),CborDeserializer.readUnsignedInteger(r[2]),CborDeserializer.readUnsignedInteger(r[3]),CborDeserializer.readUnsignedInteger(r[4]),CborDeserializer.readOptional(r[5],CborDeserializer.readByteString),CborDeserializer.readByteString(r[6]),new Map(CborDeserializer.readMap(r[7]).map(a=>[CborDeserializer.readTextString(a.key),CborDeserializer.readByteString(a.value)])))}withoutSignatures(){return new UnicitySeal(this.version,this.networkId,this.rootChainRoundNumber,this.epoch,this.timestamp,this.previousHash,this.hash,null)}toCBOR(){return CborSerializer.encodeTag(1001,CborSerializer.encodeArray(CborSerializer.encodeUnsignedInteger(this.version),CborSerializer.encodeUnsignedInteger(this.networkId),CborSerializer.encodeUnsignedInteger(this.rootChainRoundNumber),CborSerializer.encodeUnsignedInteger(this.epoch),CborSerializer.encodeUnsignedInteger(this.timestamp),CborSerializer.encodeOptional(this.previousHash,CborSerializer.encodeByteString),CborSerializer.encodeByteString(this.hash),CborSerializer.encodeOptional(this.signatures,e=>CborSerializer.encodeMap(new CborMap(Array.from(e.entries()).map(([s,r])=>new CborMapEntry(CborSerializer.encodeTextString(s),CborSerializer.encodeByteString(r))))))))}}class HashStep{key;_hash;constructor(e,s){this.key=e,this._hash=s,this._hash=new Uint8Array(s)}get hash(){return new Uint8Array(this._hash)}static fromCBOR(e){const s=CborDeserializer.readArray(e);return new HashStep(CborDeserializer.readUnsignedInteger(s[0]),CborDeserializer.readByteString(s[1]))}toCBOR(){return CborSerializer.encodeArray(CborSerializer.encodeUnsignedInteger(this.key),CborSerializer.encodeByteString(this.hash))}}class UnicityTreeCertificate{version;partitionIdentifier;_steps;constructor(e,s,r){this.version=e,this.partitionIdentifier=s,this._steps=r,this._steps=r.slice()}get steps(){return this._steps.slice()}static fromCBOR(e){const s=CborDeserializer.readTag(e),r=CborDeserializer.readArray(s.data);return new UnicityTreeCertificate(CborDeserializer.readUnsignedInteger(r[0]),CborDeserializer.readUnsignedInteger(r[1]),CborDeserializer.readArray(r[2]).map(a=>HashStep.fromCBOR(a)))}toCBOR(){return CborSerializer.encodeTag(1014,CborSerializer.encodeArray(CborSerializer.encodeUnsignedInteger(this.version),CborSerializer.encodeUnsignedInteger(this.partitionIdentifier),CborSerializer.encodeArray(...this.steps.map(e=>e.toCBOR()))))}}class UnicityCertificate{version;inputRecord;_technicalRecordHash;_shardConfigurationHash;shardTreeCertificate;unicityTreeCertificate;unicitySeal;constructor(e,s,r,a,o,l,c){this.version=e,this.inputRecord=s,this._technicalRecordHash=r,this._shardConfigurationHash=a,this.shardTreeCertificate=o,this.unicityTreeCertificate=l,this.unicitySeal=c,this._technicalRecordHash=r?new Uint8Array(r):null,this._shardConfigurationHash=new Uint8Array(a)}get technicalRecordHash(){return this._technicalRecordHash?new Uint8Array(this._technicalRecordHash):null}get shardConfigurationHash(){return new Uint8Array(this._shardConfigurationHash)}static async calculateShardTreeCertificateRootHash(e,s,r,a){let o=await new DataHasher(HashAlgorithm.SHA256).update(e.toCBOR()).update(CborSerializer.encodeOptional(s,CborSerializer.encodeByteString)).update(CborSerializer.encodeByteString(r)).digest();const l=a.shard,c=a.siblingHashList;for(let u=0;u<c.length;u++)l[l.length-1-Math.floor(u/8)]===1?o=await new DataHasher(HashAlgorithm.SHA256).update(c[u]).update(o.data).digest():o=await new DataHasher(HashAlgorithm.SHA256).update(o.data).update(c[u]).digest();return o}static fromCBOR(e){const s=CborDeserializer.readTag(e),r=CborDeserializer.readArray(s.data);return new UnicityCertificate(CborDeserializer.readUnsignedInteger(r[0]),InputRecord.fromCBOR(r[1]),CborDeserializer.readOptional(r[2],CborDeserializer.readByteString),CborDeserializer.readByteString(r[3]),ShardTreeCertificate.fromCBOR(r[4]),UnicityTreeCertificate.fromCBOR(r[5]),UnicitySeal.fromCBOR(r[6]))}static fromJSON(e){if(!UnicityCertificate.isJSON(e))throw new InvalidJsonStructureError;return UnicityCertificate.fromCBOR(HexConverter.decode(e))}static isJSON(e){return typeof e=="string"}toCBOR(){return CborSerializer.encodeTag(1007,CborSerializer.encodeArray(CborSerializer.encodeUnsignedInteger(this.version),this.inputRecord.toCBOR(),CborSerializer.encodeOptional(this.technicalRecordHash,CborSerializer.encodeByteString),CborSerializer.encodeByteString(this.shardConfigurationHash),this.shardTreeCertificate.toCBOR(),this.unicityTreeCertificate.toCBOR(),this.unicitySeal.toCBOR()))}toJSON(){return HexConverter.encode(this.toCBOR())}}class UnicityCertificateVerificationContext{inputHash;unicityCertificate;trustBase;constructor(e,s,r){this.inputHash=e,this.unicityCertificate=s,this.trustBase=r}}var VerificationResultCode;(function(t){t[t.OK=0]="OK",t[t.FAIL=1]="FAIL"})(VerificationResultCode||(VerificationResultCode={}));class VerificationResult{status;message;results;constructor(e,s="",r=[]){this.status=e,this.message=s,this.results=r,this.results=r.slice()}get isSuccessful(){return this.status==VerificationResultCode.OK}static fromChildren(e,s){return new VerificationResult(s.reduce((r,a)=>a.isSuccessful?r:VerificationResultCode.FAIL,VerificationResultCode.OK),e,s)}toString(){return dedent`
      VerificationResult:
        status: ${this.status}
        message: ${this.message}
        results: ${this.results.map(e=>e.toString()).join(`
`)}
    `}}class VerificationRule{message;onSuccessRule;onFailureRule;constructor(e,s=null,r=null){this.message=e,this.onSuccessRule=s,this.onFailureRule=r}getNextRule(e){switch(e){case VerificationResultCode.OK:return this.onSuccessRule;case VerificationResultCode.FAIL:return this.onFailureRule;default:return null}}}class InputRecordCurrentHashVerificationRule extends VerificationRule{constructor(e=null,s=null){super("Verifying input record if current hash matches input hash.",e,s)}verify(e){return e.inputHash.equals(DataHash.fromImprint(e.unicityCertificate.inputRecord.hash))?Promise.resolve(new VerificationResult(VerificationResultCode.OK)):Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,"Input record current hash does not match input hash."))}}class UnicitySealHashMatchesWithRootHashRule extends VerificationRule{constructor(e=null,s=null){super("Verifying UnicitySeal hash matches with tree root hash.",e,s)}async verify(e){const s=await UnicityCertificate.calculateShardTreeCertificateRootHash(e.unicityCertificate.inputRecord,e.unicityCertificate.technicalRecordHash,e.unicityCertificate.shardConfigurationHash,e.unicityCertificate.shardTreeCertificate);if(s==null)return new VerificationResult(VerificationResultCode.FAIL,"Could not calculate shard tree certificate root hash.");const r=e.unicityCertificate.unicityTreeCertificate,a=numberToBytesBE$2(r.partitionIdentifier,4);let o=await new DataHasher(HashAlgorithm.SHA256).update(CborSerializer.encodeByteString(new Uint8Array([1]))).update(CborSerializer.encodeByteString(a)).update(CborSerializer.encodeByteString((await new DataHasher(HashAlgorithm.SHA256).update(CborSerializer.encodeByteString(s.data)).digest()).data)).digest();for(const c of r.steps){const u=numberToBytesBE$2(c.key,4),f=new DataHasher(HashAlgorithm.SHA256).update(CborSerializer.encodeByteString(new Uint8Array([0]))).update(CborSerializer.encodeByteString(u));compareUint8Arrays(a,u)>0?f.update(CborSerializer.encodeByteString(c.hash)).update(CborSerializer.encodeByteString(o.data)):f.update(CborSerializer.encodeByteString(o.data)).update(CborSerializer.encodeByteString(c.hash)),o=await f.digest()}const l=e.unicityCertificate.unicitySeal.hash;return areUint8ArraysEqual(l,o.data)?new VerificationResult(VerificationResultCode.OK):new VerificationResult(VerificationResultCode.FAIL,"Unicity seal hash does not match tree root.")}}class UnicitySealQuorumSignaturesVerificationRule extends VerificationRule{constructor(e=null,s=null){super("Verifying UnicitySeal hash matches with tree root hash.",e,s)}static verifySignature(e,s,r){return e==null?new VerificationResult(VerificationResultCode.FAIL,"No root node defined"):SigningService.verifyWithPublicKey(r,s.slice(0,-1),e.signingKey)?new VerificationResult(VerificationResultCode.OK):new VerificationResult(VerificationResultCode.FAIL,"Signature verification failed.")}async verify(e){const s=e.unicityCertificate.unicitySeal,r=e.trustBase,a=[],o=await new DataHasher(HashAlgorithm.SHA256).update(s.withoutSignatures().toCBOR()).digest();let l=0;for(const[c,u]of s.signatures?.entries()??[]){const f=UnicitySealQuorumSignaturesVerificationRule.verifySignature(r.rootNodes.find(d=>d.nodeId===c)??null,u,o);a.push(VerificationResult.fromChildren(`Verifying node '${c}' signature.`,[f])),f.isSuccessful&&l++}return l>=r.quorumThreshold?new VerificationResult(VerificationResultCode.OK,"",a):new VerificationResult(VerificationResultCode.FAIL,"Quorum threshold not reached.",a)}}class CompositeVerificationRule extends VerificationRule{firstRule;constructor(e,s,r=null,a=null){super(s,r,a),this.firstRule=e,this.firstRule=e}async verify(e){let s=this.firstRule;const r=[];for(;s!=null;){const a=await s.verify(e);r.push(a),s=s.getNextRule(a.isSuccessful?VerificationResultCode.OK:VerificationResultCode.FAIL)}return VerificationResult.fromChildren(this.message,r)}}class UnicityCertificateVerificationRule extends CompositeVerificationRule{constructor(){super(new InputRecordCurrentHashVerificationRule(new UnicitySealHashMatchesWithRootHashRule(new UnicitySealQuorumSignaturesVerificationRule,null),null),"Verify unicity certificate")}}class PathVerificationResult{isPathValid;isPathIncluded;isSuccessful;constructor(e,s){this.isPathValid=e,this.isPathIncluded=s,this.isSuccessful=e&&s}}class SparseMerkleTreePathStep{path;_data;constructor(e,s){if(this.path=e,this._data=s,e<0n)throw new Error("Path should be non negative.")}get data(){return this._data?new Uint8Array(this._data):null}static isJSON(e){return typeof e=="object"&&e!==null&&"path"in e&&typeof e.path=="string"&&"data"in e&&(e.data===null||typeof e.data=="string")}static fromJSON(e){if(!SparseMerkleTreePathStep.isJSON(e))throw new InvalidJsonStructureError;return new SparseMerkleTreePathStep(BigInt(e.path),e.data?HexConverter.decode(e.data):null)}static fromCBOR(e){const s=CborDeserializer.readArray(e);return new SparseMerkleTreePathStep(BigintConverter.decode(CborDeserializer.readByteString(s[0])),CborDeserializer.readOptional(s[1],CborDeserializer.readByteString))}toCBOR(){return CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(this.path)),CborSerializer.encodeOptional(this._data,CborSerializer.encodeByteString))}toJSON(){return{data:this._data?HexConverter.encode(this._data):null,path:this.path.toString()}}toString(){return dedent`
      Merkle Tree Path Step
        Path: ${this.path.toString(2)}
        Data: ${this._data?HexConverter.encode(this._data):"null"}`}}class SparseMerkleTreePath{root;steps;constructor(e,s){this.root=e,this.steps=s}static fromJSON(e){if(!SparseMerkleTreePath.isJSON(e))throw new InvalidJsonStructureError;return new SparseMerkleTreePath(DataHash.fromJSON(e.root),e.steps.map(s=>SparseMerkleTreePathStep.fromJSON(s)))}static isJSON(e){return typeof e=="object"&&e!==null&&"root"in e&&typeof e.root=="string"&&"steps"in e&&Array.isArray(e.steps)&&e.steps.length>0}static fromCBOR(e){const s=CborDeserializer.readArray(e),r=CborDeserializer.readArray(s[1]);return new SparseMerkleTreePath(DataHash.fromCBOR(s[0]),r.map(a=>SparseMerkleTreePathStep.fromCBOR(a)))}toCBOR(){return CborSerializer.encodeArray(this.root.toCBOR(),CborSerializer.encodeArray(...this.steps.map(e=>e.toCBOR())))}toJSON(){return{root:this.root.toJSON(),steps:this.steps.map(e=>e.toJSON())}}async verify(e){let s=this.steps[0],r,a=s.path;s.path>1n?r=(await new DataHasher(this.root.algorithm).update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(s.path)),CborSerializer.encodeOptional(s.data,CborSerializer.encodeByteString))).digest()).data:(a=1n,r=s.data);for(let c=1;c<this.steps.length;c++){s=this.steps[c];const u=this.steps[c-1].path&1n,f=u?s.data:r,d=u?r:s.data;r=(await new DataHasher(this.root.algorithm).update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(s.path)),CborSerializer.encodeOptional(f,CborSerializer.encodeByteString),CborSerializer.encodeOptional(d,CborSerializer.encodeByteString))).digest()).data;const m=BigInt(bitLen$2(s.path)-1);if(m<0n)return new PathVerificationResult(!1,!1);a=a<<m|s.path&(1n<<m)-1n}const o=r!=null&&this.root.equals(new DataHash(this.root.algorithm,r)),l=e===a;return new PathVerificationResult(o,l)}toString(){return dedent`
      Merkle Tree Path
        Root: ${this.root.toString()} 
        Steps: [
          ${this.steps.map(e=>e?.toString()??"null").join(`
`)}
        ]`}}var InclusionProofVerificationStatus;(function(t){t.NOT_AUTHENTICATED="NOT_AUTHENTICATED",t.PATH_NOT_INCLUDED="PATH_NOT_INCLUDED",t.PATH_INVALID="PATH_INVALID",t.OK="OK"})(InclusionProofVerificationStatus||(InclusionProofVerificationStatus={}));class InclusionProof{merkleTreePath;authenticator;transactionHash;unicityCertificate;constructor(e,s,r,a){if(this.merkleTreePath=e,this.authenticator=s,this.transactionHash=r,this.unicityCertificate=a,!this.authenticator!=!this.transactionHash)throw new Error("Authenticator and transaction hash must be both set or both null.")}static isJSON(e){return typeof e=="object"&&e!==null&&"merkleTreePath"in e&&"unicityCertificate"in e}static fromJSON(e){if(!InclusionProof.isJSON(e))throw new InvalidJsonStructureError;return new InclusionProof(SparseMerkleTreePath.fromJSON(e.merkleTreePath),e.authenticator?Authenticator.fromJSON(e.authenticator):null,e.transactionHash?DataHash.fromJSON(e.transactionHash):null,UnicityCertificate.fromJSON(e.unicityCertificate))}static fromCBOR(e){const s=CborDeserializer.readArray(e),r=CborDeserializer.readOptional(s[1],Authenticator.fromCBOR),a=CborDeserializer.readOptional(s[2],DataHash.fromCBOR),o=UnicityCertificate.fromCBOR(s[3]);return new InclusionProof(SparseMerkleTreePath.fromCBOR(s[0]),r,a,o)}toJSON(){return{authenticator:this.authenticator?.toJSON()??null,merkleTreePath:this.merkleTreePath.toJSON(),transactionHash:this.transactionHash?.toJSON()??null,unicityCertificate:this.unicityCertificate.toJSON()}}toCBOR(){return CborSerializer.encodeArray(this.merkleTreePath.toCBOR(),this.authenticator?.toCBOR()??CborSerializer.encodeNull(),this.transactionHash?.toCBOR()??CborSerializer.encodeNull(),this.unicityCertificate.toCBOR())}async verify(e,s){if(!(await new UnicityCertificateVerificationRule().verify(new UnicityCertificateVerificationContext(this.merkleTreePath.root,this.unicityCertificate,e))).isSuccessful)return InclusionProofVerificationStatus.NOT_AUTHENTICATED;const a=await this.merkleTreePath.verify(s.toBitString().toBigInt());if(!a.isPathValid)return InclusionProofVerificationStatus.PATH_INVALID;if(this.authenticator&&this.transactionHash){if(!await this.authenticator.verify(this.transactionHash))return InclusionProofVerificationStatus.NOT_AUTHENTICATED;if(!(await LeafValue.create(this.authenticator,this.transactionHash)).equals(this.merkleTreePath.steps.at(0)?.data))return InclusionProofVerificationStatus.PATH_NOT_INCLUDED}return a.isPathIncluded?InclusionProofVerificationStatus.OK:InclusionProofVerificationStatus.PATH_NOT_INCLUDED}toString(){return dedent`
      Inclusion Proof
        ${this.merkleTreePath.toString()}
        ${this.authenticator?.toString()}
        Transaction Hash: ${this.transactionHash?.toString()??null}`}}class DefaultPredicate{type;tokenId;tokenType;_publicKey;signingAlgorithm;hashAlgorithm;_nonce;constructor(e,s,r,a,o,l,c){this.type=e,this.tokenId=s,this.tokenType=r,this._publicKey=a,this.signingAlgorithm=o,this.hashAlgorithm=l,this._nonce=c,this._publicKey=new Uint8Array(a),this._nonce=new Uint8Array(c)}get publicKey(){return this._publicKey}get nonce(){return this._nonce}get engine(){return PredicateEngineType.EMBEDDED}async calculateHash(){const e=await this.getReference();return new DataHasher(HashAlgorithm.SHA256).update(CborSerializer.encodeArray(e.hash.toCBOR(),this.tokenId.toCBOR(),CborSerializer.encodeByteString(this._nonce))).digest()}encode(){return new Uint8Array([this.type])}encodeParameters(){return CborSerializer.encodeArray(this.tokenId.toCBOR(),this.tokenType.toCBOR(),CborSerializer.encodeByteString(this.publicKey),CborSerializer.encodeTextString(this.signingAlgorithm),CborSerializer.encodeUnsignedInteger(this.hashAlgorithm),CborSerializer.encodeByteString(this.nonce))}async verify(e,s,r){if(!this.tokenId.equals(s.id)||!this.tokenType.equals(s.type))return!1;const a=r.inclusionProof.authenticator;if(a==null||!areUint8ArraysEqual(a.publicKey,this.publicKey))return!1;const o=await r.data.calculateHash();if(!await a.verify(o))return!1;const l=await RequestId.create(this.publicKey,await r.data.sourceState.calculateHash());return await r.inclusionProof.verify(e,l)==InclusionProofVerificationStatus.OK}toString(){return dedent`
          Predicate[${this.type}]:
            PublicKey: ${HexConverter.encode(this.publicKey)}
            Algorithm: ${this.signingAlgorithm}
            Hash Algorithm: ${HashAlgorithm[this.hashAlgorithm]}
            Nonce: ${HexConverter.encode(this.nonce)}`}isOwner(e){return Promise.resolve(HexConverter.encode(e)===HexConverter.encode(this.publicKey))}}class MaskedPredicateReference{hash;constructor(e){this.hash=e}static async create(e,s,r,a,o){return new MaskedPredicateReference(await new DataHasher(HashAlgorithm.SHA256).update(CborSerializer.encodeArray(CborSerializer.encodeByteString(new Uint8Array([EmbeddedPredicateType.MASKED])),CborSerializer.encodeByteString(e.toCBOR()),CborSerializer.encodeTextString(s),CborSerializer.encodeUnsignedInteger(a),CborSerializer.encodeByteString(r),CborSerializer.encodeByteString(o))).digest())}static createFromSigningService(e,s,r,a){return MaskedPredicateReference.create(e,s.algorithm,s.publicKey,r,a)}toAddress(){return DirectAddress.create(this.hash)}}class MaskedPredicate extends DefaultPredicate{constructor(e,s,r,a,o,l){super(EmbeddedPredicateType.MASKED,e,s,r,a,o,l)}static create(e,s,r,a,o){return new MaskedPredicate(e,s,r.publicKey,r.algorithm,a,o)}static fromCBOR(e){const s=CborDeserializer.readArray(e),r=CborDeserializer.readUnsignedInteger(s[4]);if(!HashAlgorithm[Number(r)])throw new CborError("Invalid hash algorithm");return new MaskedPredicate(TokenId.fromCBOR(s[0]),TokenType.fromCBOR(s[1]),CborDeserializer.readByteString(s[2]),CborDeserializer.readTextString(s[3]),Number(r),CborDeserializer.readByteString(s[5]))}getReference(){return MaskedPredicateReference.create(this.tokenType,this.signingAlgorithm,this.publicKey,this.hashAlgorithm,this.nonce)}}class UnmaskedPredicateReference{hash;constructor(e){this.hash=e}static async create(e,s,r,a){return new UnmaskedPredicateReference(await new DataHasher(HashAlgorithm.SHA256).update(CborSerializer.encodeArray(CborSerializer.encodeByteString(new Uint8Array([EmbeddedPredicateType.UNMASKED])),CborSerializer.encodeByteString(e.toCBOR()),CborSerializer.encodeTextString(s),CborSerializer.encodeUnsignedInteger(a),CborSerializer.encodeByteString(r))).digest())}static createFromSigningService(e,s,r){return UnmaskedPredicateReference.create(e,s.algorithm,s.publicKey,r)}toAddress(){return DirectAddress.create(this.hash)}}const UnmaskedPredicateReference$1=Object.freeze(Object.defineProperty({__proto__:null,UnmaskedPredicateReference},Symbol.toStringTag,{value:"Module"}));class UnmaskedPredicate extends DefaultPredicate{constructor(e,s,r,a,o,l){super(EmbeddedPredicateType.UNMASKED,e,s,r,a,o,l)}static async create(e,s,r,a,o){const l=await r.sign(await new DataHasher(HashAlgorithm.SHA256).update(o).digest());return new UnmaskedPredicate(e,s,r.publicKey,r.algorithm,a,l.bytes)}static fromCBOR(e){const s=CborDeserializer.readArray(e),r=CborDeserializer.readUnsignedInteger(s[4]);if(!HashAlgorithm[Number(r)])throw new CborError("Invalid hash algorithm");return new UnmaskedPredicate(TokenId.fromCBOR(s[0]),TokenType.fromCBOR(s[1]),CborDeserializer.readByteString(s[2]),CborDeserializer.readTextString(s[3]),Number(r),CborDeserializer.readByteString(s[5]))}async verify(e,s,r){return super.verify(e,s,r)?SigningService.verifyWithPublicKey(await new DataHasher(HashAlgorithm.SHA256).update(s.transactions.length?s.transactions.at(-1)?.data.salt:s.genesis.data.salt).digest(),this.nonce,this.publicKey):!1}getReference(){return UnmaskedPredicateReference.create(this.tokenType,this.signingAlgorithm,this.publicKey,this.hashAlgorithm)}}class EmbeddedPredicateEngine{create(e){const s=e.encode().at(0);switch(s){case EmbeddedPredicateType.MASKED:return e instanceof MaskedPredicate?Promise.resolve(e):Promise.resolve(MaskedPredicate.fromCBOR(e.encodeParameters()));case EmbeddedPredicateType.UNMASKED:return e instanceof UnmaskedPredicate?Promise.resolve(e):Promise.resolve(UnmaskedPredicate.fromCBOR(e.encodeParameters()));case EmbeddedPredicateType.BURN:return e instanceof BurnPredicate?Promise.resolve(e):Promise.resolve(BurnPredicate.fromCBOR(e.encodeParameters()));default:throw new Error(`Unsupported embedded predicate type ${s}`)}}}class PredicateEngineService{static ENGINES=new Map([[PredicateEngineType.EMBEDDED,new EmbeddedPredicateEngine]]);static createPredicate(e){const s=PredicateEngineService.ENGINES.get(e.engine);if(s==null)throw new Error(`Unsupported predicate engine type: ${e.engine}`);return s.create(e)}}class MintTransactionState extends DataHash{static MINT_SUFFIX=HexConverter.decode("9e82002c144d7c5796c50f6db50a0c7bbd7f717ae3af6c6c71a3e9eba3022730");constructor(e){super(e.algorithm,e.data)}static async create(e){return new MintTransactionState(await RequestId.createFromImprint(e.bytes,MintTransactionState.MINT_SUFFIX))}}class CoinId{data;constructor(e){this.data=e,this.data=new Uint8Array(e)}get bytes(){return new Uint8Array(this.data)}static fromJSON(e){return new CoinId(HexConverter.decode(e))}static fromCBOR(e){return new CoinId(CborDeserializer.readByteString(e))}toJSON(){return HexConverter.encode(this.data)}toCBOR(){return CborSerializer.encodeByteString(this.data)}toBitString(){return new BitString(this.data)}}class SparseMerkleSumTreePathStep{path;_data;value;constructor(e,s,r){if(this.path=e,this._data=s,this.value=r,e<0n)throw new Error("Path should be non negative.");if(r<0n)throw new Error("Value must be non-negative.")}get data(){return this._data?new Uint8Array(this._data):null}static isJSON(e){return typeof e=="object"&&e!==null&&"path"in e&&typeof e.path=="string"&&"data"in e&&(e.data===null||typeof e.data=="string")&&"value"in e&&typeof e.value=="string"}static fromJSON(e){if(!SparseMerkleSumTreePathStep.isJSON(e))throw new InvalidJsonStructureError;return new SparseMerkleSumTreePathStep(BigInt(e.path),e.data?HexConverter.decode(e.data):null,BigInt(e.value))}static fromCBOR(e){const s=CborDeserializer.readArray(e);return new SparseMerkleSumTreePathStep(BigintConverter.decode(CborDeserializer.readByteString(s[0])),CborDeserializer.readOptional(s[1],CborDeserializer.readByteString),BigintConverter.decode(CborDeserializer.readByteString(s[2])))}toCBOR(){return CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(this.path)),CborSerializer.encodeOptional(this._data,CborSerializer.encodeByteString),CborSerializer.encodeByteString(BigintConverter.encode(this.value)))}toJSON(){return{data:this._data?HexConverter.encode(this._data):null,path:this.path.toString(),value:this.value.toString()}}toString(){return dedent`
      Merkle Tree Path Step
        Path: ${this.path.toString(2)}
        Data: ${this._data?HexConverter.encode(this._data):"null"}
        Value: ${this.value}`}}class SparseMerkleSumTreePath{root;steps;constructor(e,s){this.root=e,this.steps=s}static fromJSON(e){if(!SparseMerkleSumTreePath.isJSON(e))throw new InvalidJsonStructureError;return new SparseMerkleSumTreePath(DataHash.fromJSON(e.root),e.steps.map(s=>SparseMerkleSumTreePathStep.fromJSON(s)))}static isJSON(e){return typeof e=="object"&&e!==null&&"root"in e&&typeof e.root=="string"&&"steps"in e&&Array.isArray(e.steps)&&e.steps.length>0}static fromCBOR(e){const s=CborDeserializer.readArray(e),r=CborDeserializer.readArray(s[1]);return new SparseMerkleSumTreePath(DataHash.fromCBOR(s[0]),r.map(a=>SparseMerkleSumTreePathStep.fromCBOR(a)))}toCBOR(){return CborSerializer.encodeArray(this.root.toCBOR(),CborSerializer.encodeArray(...this.steps.map(e=>e.toCBOR())))}toJSON(){return{root:this.root.toJSON(),steps:this.steps.map(e=>e.toJSON())}}async verify(e){let s=this.steps[0],r,a=s.path,o=s.value;s.path>0?r=(await new DataHasher(this.root.algorithm).update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(s.path)),CborSerializer.encodeOptional(s.data,CborSerializer.encodeByteString),CborSerializer.encodeByteString(BigintConverter.encode(s.value)))).digest()).data:(a=1n,r=s.data);for(let u=1;u<this.steps.length;u++){s=this.steps[u];const f=this.steps[u-1].path&1n,d={data:f?s.data:r,value:f?s.value:o},p={data:f?r:s.data,value:f?o:s.value};r=(await new DataHasher(this.root.algorithm).update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(s.path)),CborSerializer.encodeOptional(d.data,CborSerializer.encodeByteString),CborSerializer.encodeByteString(BigintConverter.encode(d.value)),CborSerializer.encodeOptional(p.data,CborSerializer.encodeByteString),CborSerializer.encodeByteString(BigintConverter.encode(p.value)))).digest()).data;const y=BigInt(bitLen$2(s.path)-1);if(y<0n)return new PathVerificationResult(!1,!1);a=a<<y|s.path&(1n<<y)-1n,o+=s.value}const l=r!=null&&this.root.equals(new DataHash(this.root.algorithm,r)),c=e===a;return new PathVerificationResult(l,c)}toString(){return dedent`
      Merkle Tree Path
        Root: ${this.root.toString()} 
        Steps: [
          ${this.steps.map(e=>e?.toString()??"null").join(`
`)}
        ]`}}class SplitMintReasonProof{coinId;aggregationPath;coinTreePath;constructor(e,s,r){this.coinId=e,this.aggregationPath=s,this.coinTreePath=r}static fromCBOR(e){const s=CborDeserializer.readArray(e);return new SplitMintReasonProof(CoinId.fromCBOR(s[0]),SparseMerkleTreePath.fromCBOR(s[1]),SparseMerkleSumTreePath.fromCBOR(s[2]))}static isJSON(e){return typeof e=="object"&&e!==null&&"coinId"in e&&"aggregationPath"in e&&"coinTreePath"in e}static fromJSON(e){if(!SplitMintReasonProof.isJSON(e))throw new InvalidJsonStructureError;return new SplitMintReasonProof(CoinId.fromJSON(e.coinId),SparseMerkleTreePath.fromJSON(e.aggregationPath),SparseMerkleSumTreePath.fromJSON(e.coinTreePath))}toJSON(){return{aggregationPath:this.aggregationPath.toJSON(),coinId:this.coinId.toJSON(),coinTreePath:this.coinTreePath.toJSON()}}toCBOR(){return CborSerializer.encodeArray(this.coinId.toCBOR(),this.aggregationPath.toCBOR(),this.coinTreePath.toCBOR())}}var MintReasonType;(function(t){t.TOKEN_SPLIT="TOKEN_SPLIT"})(MintReasonType||(MintReasonType={}));class SplitMintReason{token;_proofs;constructor(e,s){this.token=e,this._proofs=s,this._proofs=s.slice()}get proofs(){return this._proofs.slice()}static async fromCBOR(e){const s=CborDeserializer.readArray(e);return new SplitMintReason(await Token.fromCBOR(s[0]),CborDeserializer.readArray(s[1]).map(r=>SplitMintReasonProof.fromCBOR(r)))}static isJSON(e){return typeof e=="object"&&e!==null&&"token"in e&&"proofs"in e}static async fromJSON(e){if(!SplitMintReason.isJSON(e))throw new InvalidJsonStructureError;return new SplitMintReason(await Token.fromJSON(e.token),e.proofs.map(s=>SplitMintReasonProof.fromJSON(s)))}async verify(e){if(e.data.coinData==null)return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,"Coin data is missing."));const s=await PredicateEngineService.createPredicate(this.token.state.predicate);if(!(s instanceof BurnPredicate))return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,"Token is not burned."));if(e.data.coinData.length!==this._proofs.length)return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,"Total amount of coins differ in token and proofs."));for(const r of this._proofs){if(!(await r.aggregationPath.verify(r.coinId.toBitString().toBigInt())).isSuccessful)return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,`Aggregation path verification failed for coin: ${r.coinId}`));if(!(await r.coinTreePath.verify(e.data.tokenId.toBitString().toBigInt())).isSuccessful)return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,`Coin tree path verification failed for token: ${e.data.tokenId}`));if(!areUint8ArraysEqual(r.coinTreePath.root.imprint,r.aggregationPath.steps.at(0)?.data))return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,"Coin tree root does not match aggregation path leaf."));const l=e.data.coinData.get(r.coinId);if(l===null)return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,`Coin id ${r.coinId} not found in coin data.`));if(r.coinTreePath.steps.at(0)?.value!==l)return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,`Coin amount for coin id ${r.coinId} does not match coin tree leaf.`));if(!r.aggregationPath.root.equals(s.reason))return Promise.resolve(new VerificationResult(VerificationResultCode.FAIL,"Aggregation path root does not match burn reason."))}return Promise.resolve(new VerificationResult(VerificationResultCode.OK))}toCBOR(){return CborSerializer.encodeArray(this.token.toCBOR(),CborSerializer.encodeArray(...this._proofs.map(e=>e.toCBOR())))}toJSON(){return{proofs:this._proofs.map(e=>e.toJSON()),token:this.token.toJSON(),type:MintReasonType.TOKEN_SPLIT}}}class TokenCoinData{_coins;constructor(e){this._coins=e}get coins(){return Array.from(this._coins.entries()).map(([e,s])=>[CoinId.fromJSON(e),s])}get length(){return this._coins.size}static create(e){const s=new Map;for(const[r,a]of e)s.set(r.toJSON(),a);return new TokenCoinData(s)}static fromCBOR(e){const s=new Map,r=CborDeserializer.readArray(e);for(const a of r){const[o,l]=CborDeserializer.readArray(a);s.set(HexConverter.encode(CborDeserializer.readByteString(o)),BigintConverter.decode(CborDeserializer.readByteString(l)))}return new TokenCoinData(s)}static fromJSON(e){if(!Array.isArray(e)||!e.every(s=>Array.isArray(s)&&s.length===2&&typeof s[0]=="string"&&typeof s[1]=="string"))throw new InvalidJsonStructureError;return new TokenCoinData(new Map(e.map(([s,r])=>[s,BigInt(r)])))}get(e){return this._coins.get(e.toJSON())??null}toCBOR(){return CborSerializer.encodeArray(...Array.from(this._coins.entries()).map(([e,s])=>CborSerializer.encodeArray(CborSerializer.encodeByteString(HexConverter.decode(e)),CborSerializer.encodeByteString(BigintConverter.encode(s)))))}toJSON(){return Array.from(this._coins.entries()).map(([e,s])=>[e.toString(),s.toString()])}toString(){return dedent`
      TokenCoinData:
        ${Array.from(this._coins.entries()).map(([e,s])=>`${e}: ${s}`).join(`
`)}`}}const textEncoder=new TextEncoder;class MintTransactionData{tokenId;tokenType;sourceState;_tokenData;coinData;recipient;_salt;recipientDataHash;reason;constructor(e,s,r,a,o,l,c,u,f){this.tokenId=e,this.tokenType=s,this.sourceState=r,this._tokenData=a,this.coinData=o,this.recipient=l,this._salt=c,this.recipientDataHash=u,this.reason=f}get tokenData(){return this._tokenData?new Uint8Array(this._tokenData):null}get salt(){return new Uint8Array(this._salt)}static async create(e,s,r,a,o,l,c,u){const f=r?new Uint8Array(r):null,d=new Uint8Array(l);return new MintTransactionData(e,s,await MintTransactionState.create(e),f,a,o,d,c,u)}static async createFromNametag(e,s,r,a,o){return MintTransactionData.create(await TokenId.fromNameTag(e),s,textEncoder.encode(o.address),null,r,a,null,null)}static async fromCBOR(e){const s=CborDeserializer.readArray(e);return MintTransactionData.create(TokenId.fromCBOR(s[0]),TokenType.fromCBOR(s[1]),CborDeserializer.readOptional(s[2],CborDeserializer.readByteString),CborDeserializer.readOptional(s[3],TokenCoinData.fromCBOR),await AddressFactory.createAddress(CborDeserializer.readTextString(s[4])),CborDeserializer.readByteString(s[5]),CborDeserializer.readOptional(s[6],DataHash.fromCBOR),await CborDeserializer.readOptional(s[7],SplitMintReason.fromCBOR))}static isJSON(e){return typeof e=="object"&&e!==null&&"tokenId"in e&&"tokenType"in e&&"recipient"in e&&"salt"in e}static async fromJSON(e){if(!MintTransactionData.isJSON(e))throw new InvalidJsonStructureError;return MintTransactionData.create(TokenId.fromJSON(e.tokenId),TokenType.fromJSON(e.tokenType),e.tokenData?HexConverter.decode(e.tokenData):null,e.coinData?TokenCoinData.fromJSON(e.coinData):null,await AddressFactory.createAddress(e.recipient),HexConverter.decode(e.salt),e.recipientDataHash?DataHash.fromJSON(e.recipientDataHash):null,e.reason?await SplitMintReason.fromJSON(e.reason):null)}toCBOR(){return CborSerializer.encodeArray(this.tokenId.toCBOR(),this.tokenType.toCBOR(),CborSerializer.encodeOptional(this.tokenData,CborSerializer.encodeByteString),CborSerializer.encodeOptional(this.coinData,e=>e.toCBOR()),CborSerializer.encodeTextString(this.recipient.address),CborSerializer.encodeByteString(this.salt),CborSerializer.encodeOptional(this.recipientDataHash,e=>e.toCBOR()),CborSerializer.encodeOptional(this.reason,e=>e.toCBOR()))}toJSON(){return{coinData:this.coinData?.toJSON()??null,reason:this.reason?.toJSON()??null,recipient:this.recipient.address,recipientDataHash:this.recipientDataHash?.toJSON()??null,salt:HexConverter.encode(this.salt),tokenData:this.tokenData?HexConverter.encode(this.tokenData):null,tokenId:this.tokenId.toJSON(),tokenType:this.tokenType.toJSON()}}calculateHash(){return new DataHasher(HashAlgorithm.SHA256).update(this.toCBOR()).digest()}toString(){return dedent`
      MintTransactionData:
        Token ID: ${this.tokenId.toString()}
        Token Type: ${this.tokenType.toString()}
        Token Data: ${this._tokenData?HexConverter.encode(this._tokenData):null}
        Coins: ${this.coinData?.toString()??null}
        Recipient: ${this.recipient}
        Salt: ${HexConverter.encode(this.salt)}
        Data: ${this.recipientDataHash?.toString()??null}
        Reason: ${this.reason?.toString()??null}`}}class Transaction{data;inclusionProof;constructor(e,s){this.data=e,this.inclusionProof=s}async containsRecipientData(e){return this.data.recipientDataHash?e?(await new DataHasher(this.data.recipientDataHash.algorithm).update(e).digest()).equals(this.data.recipientDataHash):!1:!e}toString(){return dedent`
        Transaction:
          ${this.data.toString()}
          ${this.inclusionProof.toString()}`}}class MintSigningService{static MINTER_SECRET=HexConverter.decode("495f414d5f554e4956455253414c5f4d494e5445525f464f525f");constructor(){}static create(e){return SigningService.createFromSecret(MintSigningService.MINTER_SECRET,e.bytes)}}class MintTransaction extends Transaction{constructor(e,s){super(e,s)}static async fromCBOR(e){const s=CborDeserializer.readArray(e);return new MintTransaction(await MintTransactionData.fromCBOR(s[0]),InclusionProof.fromCBOR(s[1]))}static isJSON(e){return typeof e=="object"&&e!==null&&"data"in e&&"inclusionProof"in e}static async fromJSON(e){if(!MintTransaction.isJSON(e))throw new InvalidJsonStructureError;return new MintTransaction(await MintTransactionData.fromJSON(e.data),InclusionProof.fromJSON(e.inclusionProof))}async verify(e){if(!this.inclusionProof.authenticator)return new VerificationResult(VerificationResultCode.FAIL,"Missing authenticator.");if(!this.inclusionProof.transactionHash)return new VerificationResult(VerificationResultCode.FAIL,"Missing transaction hash.");if(!this.data.sourceState.equals(await MintTransactionState.create(this.data.tokenId)))return new VerificationResult(VerificationResultCode.FAIL,"Invalid source state");const s=await MintSigningService.create(this.data.tokenId);if(HexConverter.encode(this.inclusionProof.authenticator.publicKey)!==HexConverter.encode(s.publicKey))return new VerificationResult(VerificationResultCode.FAIL,"Authenticator public key mismatch.");if(!await this.inclusionProof.authenticator.verify(this.inclusionProof.transactionHash))return new VerificationResult(VerificationResultCode.FAIL,"Authenticator verification failed.");const r=await this.data.reason?.verify(this)??new VerificationResult(VerificationResultCode.OK);return r.isSuccessful?await this.inclusionProof.verify(e,await RequestId.create(s.publicKey,this.data.sourceState))!==InclusionProofVerificationStatus.OK?new VerificationResult(VerificationResultCode.FAIL,"Inclusion proof verification failed."):new VerificationResult(VerificationResultCode.OK):new VerificationResult(VerificationResultCode.FAIL,"Mint reason verification",[r])}toJSON(){return{data:this.data.toJSON(),inclusionProof:this.inclusionProof.toJSON()}}toCBOR(){return CborSerializer.encodeArray(this.data.toCBOR(),this.inclusionProof.toCBOR())}}class TransferTransactionData{sourceState;recipient;_salt;recipientDataHash;_message;_nametagTokens;constructor(e,s,r,a,o,l=[]){this.sourceState=e,this.recipient=s,this._salt=r,this.recipientDataHash=a,this._message=o,this._nametagTokens=l,this._message=o?new Uint8Array(o):null,this._nametagTokens=Array.from(l)}get salt(){return new Uint8Array(this._salt)}get message(){return this._message?new Uint8Array(this._message):null}get nametagTokens(){return this._nametagTokens.slice()}static create(e,s,r,a,o,l=[]){return new TransferTransactionData(e,s,r,a,o,l)}static async fromCBOR(e){const s=CborDeserializer.readArray(e);return new TransferTransactionData(TokenState.fromCBOR(s[0]),await AddressFactory.createAddress(CborDeserializer.readTextString(s[1])),CborDeserializer.readByteString(s[2]),CborDeserializer.readOptional(s[3],DataHash.fromCBOR),CborDeserializer.readOptional(s[4],CborDeserializer.readByteString),await Promise.all(CborDeserializer.readArray(s[5]).map(r=>Token.fromCBOR(r))))}static isJSON(e){return typeof e=="object"&&e!==null&&"sourceState"in e&&"recipient"in e&&"salt"in e&&"recipientDataHash"in e&&"message"in e&&"nametags"in e}static async fromJSON(e){if(!TransferTransactionData.isJSON(e))throw new InvalidJsonStructureError;return new TransferTransactionData(TokenState.fromJSON(e.sourceState),await AddressFactory.createAddress(e.recipient),HexConverter.decode(e.salt),e.recipientDataHash?DataHash.fromJSON(e.recipientDataHash):null,e.message?HexConverter.decode(e.message):null,await Promise.all(e.nametags.map(s=>Token.fromJSON(s))))}calculateHash(){return new DataHasher(HashAlgorithm.SHA256).update(this.toCBOR()).digest()}toCBOR(){return CborSerializer.encodeArray(this.sourceState.toCBOR(),CborSerializer.encodeTextString(this.recipient.address),CborSerializer.encodeByteString(this.salt),CborSerializer.encodeOptional(this.recipientDataHash,e=>e.toCBOR()),CborSerializer.encodeOptional(this.message,CborSerializer.encodeByteString),CborSerializer.encodeArray(...this.nametagTokens.map(e=>e.toCBOR())))}toJSON(){return{message:this._message?HexConverter.encode(this._message):null,nametags:this._nametagTokens.map(e=>e.toJSON()),recipient:this.recipient.address,recipientDataHash:this.recipientDataHash?.toJSON()??null,salt:HexConverter.encode(this.salt),sourceState:this.sourceState.toJSON()}}toString(){return dedent`
      TransactionData:
        ${this.sourceState.toString()}
        Recipient: ${this.recipient.toString()}
        Salt: ${HexConverter.encode(this._salt)}
        Data: ${this.recipientDataHash?.toString()??null}
        Message: ${this._message?HexConverter.encode(this._message):null}
        NameTags: [
          ${this._nametagTokens.map(e=>e.toString()).join(`
`)}
        ]`}}class TransferTransaction extends Transaction{constructor(e,s){super(e,s)}static async fromCBOR(e){const s=CborDeserializer.readArray(e);return new TransferTransaction(await TransferTransactionData.fromCBOR(s[0]),InclusionProof.fromCBOR(s[1]))}static isJSON(e){return typeof e=="object"&&e!==null&&"data"in e&&"inclusionProof"in e}static async fromJSON(e){if(!TransferTransaction.isJSON(e))throw new InvalidJsonStructureError;return new TransferTransaction(await TransferTransactionData.fromJSON(e.data),InclusionProof.fromJSON(e.inclusionProof))}async verify(e,s){let r=await s.verifyNametagTokens(e);return r.isSuccessful?(r=await s.verifyRecipient(),!r.isSuccessful||(r=await s.verifyRecipientData(),!r.isSuccessful)?r:await(await PredicateEngineService.createPredicate(s.state.predicate)).verify(e,s,this)?new VerificationResult(VerificationResultCode.OK):new VerificationResult(VerificationResultCode.FAIL,"Predicate verification failed")):new VerificationResult(VerificationResultCode.FAIL,"Nametag tokens verification failed",[r])}toJSON(){return{data:this.data.toJSON(),inclusionProof:this.inclusionProof.toJSON()}}toCBOR(){return CborSerializer.encodeArray(this.data.toCBOR(),this.inclusionProof.toCBOR())}}class VerificationError extends Error{verificationResult;constructor(e,s){super(e),this.verificationResult=s}}const TOKEN_VERSION="2.0";class Token{state;genesis;_transactions;_nametagTokens;version;constructor(e,s,r=[],a=[],o=TOKEN_VERSION){this.state=e,this.genesis=s,this._transactions=r,this._nametagTokens=a,this.version=o,this._nametagTokens=a.slice(),this._transactions=r.slice()}get id(){return this.genesis.data.tokenId}get type(){return this.genesis.data.tokenType}get data(){return this.genesis.data.tokenData}get coins(){return this.genesis.data.coinData}get nametagTokens(){return this._nametagTokens.slice()}get transactions(){return this._transactions.slice()}static async fromCBOR(e){const s=CborDeserializer.readArray(e),r=CborDeserializer.readTextString(s[0]);if(r!==TOKEN_VERSION)throw new Error(`Unsupported token version: ${r}`);return new Token(TokenState.fromCBOR(s[1]),await MintTransaction.fromCBOR(s[2]),await Promise.all(CborDeserializer.readArray(s[3]).map(a=>TransferTransaction.fromCBOR(a))),await Promise.all(CborDeserializer.readArray(s[4]).map(a=>Token.fromCBOR(a))))}static isJSON(e){return typeof e=="object"&&e!==null&&"version"in e&&e.version===TOKEN_VERSION&&"state"in e&&"genesis"in e&&"transactions"in e&&"nametags"in e}static async fromJSON(e){if(!Token.isJSON(e))throw new InvalidJsonStructureError;return new Token(TokenState.fromJSON(e.state),await MintTransaction.fromJSON(e.genesis),await Promise.all(e.transactions.map(s=>TransferTransaction.fromJSON(s))),await Promise.all(e.nametags.map(s=>Token.fromJSON(s))))}static async mint(e,s,r,a=[]){const o=new Token(s,r,[],a),l=await o.verify(e);if(!l.isSuccessful)throw new VerificationError("Token verification failed",l);return o}async update(e,s,r,a=[]){let o=await r.verify(e,this);if(!o.isSuccessful)throw new VerificationError("Transaction verification failed",o);const l=this._transactions.slice();l.push(r);const c=new Token(s,this.genesis,l,a);if(o=await c.verifyNametagTokens(e),!o.isSuccessful)throw new VerificationError("Nametag tokens verification failed",o);if(o=await c.verifyRecipient(),!o.isSuccessful)throw new VerificationError("Recipient verification failed",o);if(o=await c.verifyRecipientData(),!o.isSuccessful)throw new VerificationError("Recipient data verification failed",o);return c}async verify(e){const s=[];s.push(VerificationResult.fromChildren("Genesis verification",[await this.genesis.verify(e)]));for(let r=0;r<this._transactions.length;r++){const a=this._transactions[r];s.push(VerificationResult.fromChildren("Transaction verification",[await a.verify(e,new Token(a.data.sourceState,this.genesis,this._transactions.slice(0,r),a.data.nametagTokens))]))}return s.push(VerificationResult.fromChildren("Current state verification",await Promise.all([this.verifyNametagTokens(e),this.verifyRecipient(),this.verifyRecipientData()]))),VerificationResult.fromChildren("Token verification",s)}async verifyNametagTokens(e){const s=[];for(const r of this._nametagTokens)s.push(await r.verify(e));return VerificationResult.fromChildren("Nametag verification",s)}async verifyRecipient(){const r=await(await(await PredicateEngineService.createPredicate(this.state.predicate)).getReference()).toAddress(),a=this.transactions.length?this.transactions.at(-1):this.genesis,o=await ProxyAddress.resolve(a.data.recipient,this.nametagTokens);return r.address!==o?.address?new VerificationResult(VerificationResultCode.FAIL,"Recipient address mismatch"):new VerificationResult(VerificationResultCode.OK,"Recipient verification")}async verifyRecipientData(){return await(this.transactions.length?this.transactions.at(-1):this.genesis).containsRecipientData(this.state.data)?new VerificationResult(VerificationResultCode.OK,"Recipient data verification"):new VerificationResult(VerificationResultCode.FAIL,"State data hash does not match previous transaction recipient data hash")}toJSON(){return{genesis:this.genesis.toJSON(),nametags:this._nametagTokens.map(e=>e.toJSON()),state:this.state.toJSON(),transactions:this._transactions.map(e=>e.toJSON()),version:this.version}}toCBOR(){return CborSerializer.encodeArray(CborSerializer.encodeTextString(this.version),this.state.toCBOR(),this.genesis.toCBOR(),CborSerializer.encodeArray(...this._transactions.map(e=>e.toCBOR())),CborSerializer.encodeArray(...this._nametagTokens.map(e=>e.toCBOR())))}toString(){return dedent`
        Token[${this.version}]:
          State: 
            ${this.state.toString()}
          Genesis: 
            ${this.genesis.toString()}
          Transactions: [
            ${this.transactions.map(e=>e.toString()).join(`
`)}
          ]
          Nametag Tokens: [ 
            ${this.nametagTokens.map(e=>e.toString()).join(`
`)}
          ]
      `}}class DataHasherFactory{algorithm;_hasherConstructor;constructor(e,s){this.algorithm=e,this._hasherConstructor=s}create(){return new this._hasherConstructor(this.algorithm)}}let FinalizedLeafBranch$1=class{path;_data;hash;constructor(e,s,r){this.path=e,this._data=s,this.hash=r,this._data=new Uint8Array(s)}get data(){return new Uint8Array(this._data)}finalize(){return Promise.resolve(this)}toString(){return dedent`
      Leaf[${this.path.toString(2)}]
        Data: ${HexConverter.encode(this._data)}
        Hash: ${this.hash.toString()}`}};class LeafInBranchError extends Error{constructor(){super("Cannot add leaf inside branch."),this.name="LeafInBranchError"}}class LeafOutOfBoundsError extends Error{constructor(){super("Cannot extend tree through leaf."),this.name="LeafOutOfBoundsError"}}let PendingLeafBranch$1=class{path;_data;constructor(e,s){this.path=e,this._data=s,this._data=new Uint8Array(s)}get data(){return new Uint8Array(this._data)}async finalize(e){const s=await e.create().update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(this.path)),CborSerializer.encodeByteString(this._data))).digest();return new FinalizedLeafBranch$1(this.path,this._data,s)}},FinalizedNodeBranch$1=class{path;left;right;hash;constructor(e,s,r,a){this.path=e,this.left=s,this.right=r,this.hash=a}finalize(){return Promise.resolve(this)}toString(){return dedent`
      Node[${this.path.toString(2)}]
        Hash: ${this.hash.toString()}
        Left: ${this.left.toString()}
        Right: ${this.right.toString()}`}},PendingNodeBranch$1=class{path;left;right;constructor(e,s,r){this.path=e,this.left=s,this.right=r}async finalize(e){const[s,r]=await Promise.all([this.left.finalize(e),this.right.finalize(e)]),a=await e.create().update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(this.path)),CborSerializer.encodeByteString(s.hash.data),CborSerializer.encodeByteString(r.hash.data))).digest();return new FinalizedNodeBranch$1(this.path,s,r,a)}};function calculateCommonPath(t,e){let s=1n,r=1n,a=0n;for(;(t&r)===(e&r)&&s<t&&s<e;)r<<=1n,a+=1n,s=r|r-1n&t;return{length:a,path:s}}class SparseMerkleTreeRootNode{left;right;hash;path=1n;constructor(e,s,r){this.left=e,this.right=s,this.hash=r}static async create(e,s,r){const a=await r.create().update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(1n)),CborSerializer.encodeOptional(e?.hash.data,CborSerializer.encodeByteString),CborSerializer.encodeOptional(s?.hash.data,CborSerializer.encodeByteString))).digest();return new SparseMerkleTreeRootNode(e??null,s??null,a)}static generatePath(e,s){if(s instanceof FinalizedLeafBranch$1)return[new SparseMerkleTreePathStep(s.path,s.data)];const r=calculateCommonPath(e,s.path);if(e=e>>r.length,r.path!==s.path||e===1n)return[new SparseMerkleTreePathStep(0n,s.left?.hash.data??null),new SparseMerkleTreePathStep(s.path,s.right?.hash.data??null)];const a=e&1n,o=a?s.right:s.left,l=a?s.left:s.right,c=new SparseMerkleTreePathStep(s.path,l?.hash.data??null);return o===null?[new SparseMerkleTreePathStep(a,null),c]:[...this.generatePath(e,o),c]}getPath(e){return new SparseMerkleTreePath(this.hash,SparseMerkleTreeRootNode.generatePath(e,this))}toString(){return dedent`
      Root: 
        Hash: ${this.hash.toString()}
      Left: 
        ${this.left?this.left.toString():"null"}
      Right: 
        ${this.right?this.right.toString():"null"}`}}class SparseMerkleTree{factory;left=Promise.resolve(null);right=Promise.resolve(null);constructor(e){this.factory=e}async addLeaf(e,s){if(e<1n)throw new Error("Path must be greater than 0.");const r=e&1n;s=new Uint8Array(s);const a=r?this.right:this.left,o=a.then(l=>l?this.buildTree(l,e,s):new PendingLeafBranch$1(e,s));r?this.right=o.catch(()=>a):this.left=o.catch(()=>a),await o}async calculateRoot(){this.left=this.left.then(r=>r?r.finalize(this.factory):Promise.resolve(null)),this.right=this.right?.then(r=>r?r.finalize(this.factory):Promise.resolve(null));const[e,s]=await Promise.all([this.left,this.right]);return SparseMerkleTreeRootNode.create(e,s,this.factory)}buildTree(e,s,r){const a=calculateCommonPath(s,e.path),o=s>>a.length&1n;if(a.path===s)throw new LeafInBranchError;if(e instanceof PendingLeafBranch$1||e instanceof FinalizedLeafBranch$1){if(a.path===e.path)throw new LeafOutOfBoundsError;const l=new PendingLeafBranch$1(e.path>>a.length,e.data),c=new PendingLeafBranch$1(s>>a.length,r);return new PendingNodeBranch$1(a.path,o?l:c,o?c:l)}if(a.path<e.path){const l=new PendingLeafBranch$1(s>>a.length,r),c=new PendingNodeBranch$1(e.path>>a.length,e.left,e.right);return new PendingNodeBranch$1(a.path,o?c:l,o?l:c)}return o?new PendingNodeBranch$1(e.path,e.left,this.buildTree(e.right,s>>a.length,r)):new PendingNodeBranch$1(e.path,this.buildTree(e.left,s>>a.length,r),e.right)}}class FinalizedLeafBranch{path;_data;value;hash;constructor(e,s,r,a){this.path=e,this._data=s,this.value=r,this.hash=a,this._data=new Uint8Array(s)}get data(){return new Uint8Array(this._data)}finalize(){return Promise.resolve(this)}toString(){return dedent`
      Leaf[${this.path.toString(2)}]
        Hash: ${this.hash.toString()}
        Data: ${HexConverter.encode(this._data)}
        Sum: ${this.value}`}}class PendingLeafBranch{path;_data;value;constructor(e,s,r){this.path=e,this._data=s,this.value=r,this._data=new Uint8Array(s)}get data(){return new Uint8Array(this._data)}async finalize(e){const s=await e.create().update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(this.path)),CborSerializer.encodeByteString(this._data),CborSerializer.encodeByteString(BigintConverter.encode(this.value)))).digest();return new FinalizedLeafBranch(this.path,this._data,this.value,s)}}class FinalizedNodeBranch{path;left;right;value;hash;constructor(e,s,r,a,o){this.path=e,this.left=s,this.right=r,this.value=a,this.hash=o}finalize(){return Promise.resolve(this)}toString(){return dedent`
      Node[${this.path.toString(2)}]
        Hash: ${this.hash.toString()}
        Value: ${this.value}
        Left: ${this.left.toString()}
        Right: ${this.right.toString()}`}}class PendingNodeBranch{path;left;right;constructor(e,s,r){this.path=e,this.left=s,this.right=r}async finalize(e){const[s,r]=await Promise.all([this.left.finalize(e),this.right.finalize(e)]),a=await e.create().update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(this.path)),CborSerializer.encodeByteString(s.hash.data),CborSerializer.encodeByteString(BigintConverter.encode(s.value)),CborSerializer.encodeByteString(r.hash.data),CborSerializer.encodeByteString(BigintConverter.encode(r.value)))).digest();return new FinalizedNodeBranch(this.path,s,r,s.value+r.value,a)}}class SparseMerkleSumTreeRootNode{left;right;value;hash;path=1n;constructor(e,s,r,a){this.left=e,this.right=s,this.value=r,this.hash=a}static async create(e,s,r){const a=await r.create().update(CborSerializer.encodeArray(CborSerializer.encodeByteString(BigintConverter.encode(1n)),CborSerializer.encodeOptional(e?.hash.data,CborSerializer.encodeByteString),CborSerializer.encodeByteString(BigintConverter.encode(e?.value??0n)),CborSerializer.encodeOptional(s?.hash.data,CborSerializer.encodeByteString),CborSerializer.encodeByteString(BigintConverter.encode(s?.value??0n)))).digest();return new SparseMerkleSumTreeRootNode(e??null,s??null,(e?.value??0n)+(s?.value??0n),a)}static generatePath(e,s){if(s instanceof FinalizedLeafBranch)return[new SparseMerkleSumTreePathStep(s.path,s.data,s.value)];const r=calculateCommonPath(e,s.path);if(e=e>>r.length,r.path!==s.path||e===1n)return[new SparseMerkleSumTreePathStep(0n,s.left?.hash.data??null,s.left?.value??0n),new SparseMerkleSumTreePathStep(s.path,s.right?.hash.data??null,s.right?.value??0n)];const a=e&1n,o=a?s.right:s.left,l=a?s.left:s.right,c=new SparseMerkleSumTreePathStep(s.path,l?.hash.data??null,l?.value??0n);return o===null?[new SparseMerkleSumTreePathStep(a,null,0n),c]:[...this.generatePath(e,o),c]}getPath(e){return new SparseMerkleSumTreePath(this.hash,SparseMerkleSumTreeRootNode.generatePath(e,this))}toString(){return dedent`
      Left: 
        ${this.left?this.left.toString():"null"}
      Right: 
        ${this.right?this.right.toString():"null"}`}}class SparseMerkleSumTree{factory;left=Promise.resolve(null);right=Promise.resolve(null);constructor(e){this.factory=e}async addLeaf(e,s,r){if(r<0n)throw new Error("Value must be an unsigned bigint.");if(e<1n)throw new Error("Path must be greater than 0.");const a=e&1n;s=new Uint8Array(s);const o=a?this.right:this.left,l=o.then(c=>c?this.buildTree(c,e,s,r):new PendingLeafBranch(e,s,r));a?this.right=l.catch(()=>o):this.left=l.catch(()=>o),await l}async calculateRoot(){this.left=this.left.then(r=>r?r.finalize(this.factory):Promise.resolve(null)),this.right=this.right?.then(r=>r?r.finalize(this.factory):Promise.resolve(null));const[e,s]=await Promise.all([this.left,this.right]);return SparseMerkleSumTreeRootNode.create(e,s,this.factory)}buildTree(e,s,r,a){const o=calculateCommonPath(s,e.path),l=s>>o.length&1n;if(o.path===s)throw new LeafInBranchError;if(e instanceof PendingLeafBranch||e instanceof FinalizedLeafBranch){if(o.path===e.path)throw new LeafOutOfBoundsError;const c=new PendingLeafBranch(e.path>>o.length,e.data,e.value),u=new PendingLeafBranch(s>>o.length,r,a);return new PendingNodeBranch(o.path,l?c:u,l?u:c)}if(o.path<e.path){const c=new PendingLeafBranch(s>>o.length,r,a),u=new PendingNodeBranch(e.path>>o.length,e.left,e.right);return new PendingNodeBranch(o.path,l?u:c,l?c:u)}return l?new PendingNodeBranch(e.path,e.left,this.buildTree(e.right,s>>o.length,r,a)):new PendingNodeBranch(e.path,this.buildTree(e.left,s>>o.length,r,a),e.right)}}class Commitment{requestId;transactionData;authenticator;constructor(e,s,r){this.requestId=e,this.transactionData=s,this.authenticator=r}}class MintCommitment extends Commitment{constructor(e,s,r){super(e,s,r)}static async create(e){const s=await MintSigningService.create(e.tokenId),r=await e.calculateHash(),a=await RequestId.create(s.publicKey,e.sourceState),o=await Authenticator.create(s,r,e.sourceState);return new MintCommitment(a,e,o)}toTransaction(e){return new MintTransaction(this.transactionData,e)}}class TransferCommitment extends Commitment{constructor(e,s,r){super(e,s,r)}static async create(e,s,r,a,o,l){const c=TransferTransactionData.create(e.state,s,r,a,o,e.nametagTokens),u=await c.sourceState.calculateHash(),f=await c.calculateHash(),d=await RequestId.create(l.publicKey,u),p=await Authenticator.create(l,f,u);return new TransferCommitment(d,c,p)}static async fromCBOR(e){const s=CborDeserializer.readArray(e);return new TransferCommitment(RequestId.fromCBOR(s[0]),await TransferTransactionData.fromCBOR(s[1]),Authenticator.fromCBOR(s[2]))}static isJSON(e){return typeof e=="object"&&e!==null&&"requestId"in e&&"transactionData"in e&&"authenticator"in e}static async fromJSON(e){if(!TransferCommitment.isJSON(e))throw new InvalidJsonStructureError;return new TransferCommitment(RequestId.fromJSON(e.requestId),await TransferTransactionData.fromJSON(e.transactionData),Authenticator.fromJSON(e.authenticator))}toCBOR(){return CborSerializer.encodeArray(this.requestId.toCBOR(),this.transactionData.toCBOR(),this.authenticator.toCBOR())}toJSON(){return{authenticator:this.authenticator.toJSON(),requestId:this.requestId.toJSON(),transactionData:this.transactionData.toJSON()}}toTransaction(e){return new TransferTransaction(this.transactionData,e)}}class TokenRequest{id;type;data;coinData;recipient;salt;recipientDataHash;constructor(e,s,r,a,o,l,c){if(this.id=e,this.type=s,this.data=r,this.coinData=a,this.recipient=o,this.salt=l,this.recipientDataHash=c,a?.length==0)throw new Error("Token must have at least one coin")}}class TokenSplit{token;aggregationRoot;coinRoots;tokens;constructor(e,s,r,a){this.token=e,this.aggregationRoot=s,this.coinRoots=r,this.tokens=a}async createBurnCommitment(e,s){const r=await BurnPredicateReference.create(this.token.type,this.aggregationRoot.hash);return TransferCommitment.create(this.token,await r.toAddress(),e,null,null,s)}async createSplitMintCommitments(e,s){const r=await this.token.update(e,new TokenState(new BurnPredicate(this.token.id,this.token.type,this.aggregationRoot.hash),null),s);return Promise.all(this.tokens.map(a=>MintTransactionData.create(a.id,a.type,a.data,a.coinData,a.recipient,a.salt,a.recipientDataHash,new SplitMintReason(r,a.coinData.coins.map(([o])=>new SplitMintReasonProof(o,this.aggregationRoot.getPath(o.toBitString().toBigInt()),this.coinRoots.get(o.toJSON()).getPath(a.id.toBitString().toBigInt()))))).then(o=>MintCommitment.create(o))))}}class TokenSplitBuilder{tokens=new Map;createToken(e,s,r,a,o,l,c){return this.tokens.set(e.toJSON(),new TokenRequest(e,s,r,a,o,l,c)),this}async build(e){const s=new Map;for(const o of this.tokens.values())for(const[l,c]of o.coinData.coins){let u=s.get(l.toJSON())?.[1];u||(u=new SparseMerkleSumTree(new DataHasherFactory(HashAlgorithm.SHA256,DataHasher)),s.set(l.toJSON(),[l,u])),await u.addLeaf(o.id.toBitString().toBigInt(),l.bytes,c)}if(s.size!==e.coins?.length)throw new Error("Token has different number of coins than expected");const r=new SparseMerkleTree(new DataHasherFactory(HashAlgorithm.SHA256,DataHasher)),a=new Map;for(const[o,l]of s.values()){const c=e.coins.get(o),u=await l.calculateRoot();if(u.value!==c)throw new Error(`Token contained ${c} ${o} coins, but tree has ${u.value}`);a.set(o.toJSON(),u),await r.addLeaf(o.toBitString().toBigInt(),u.hash.imprint)}return new TokenSplit(e,await r.calculateRoot(),a,Array.from(this.tokens.values()))}}class JsonRpcNetworkError{status;message;name="JsonRpcNetworkError";constructor(e,s){this.status=e,this.message=s}}class SleepError extends Error{constructor(e){super(e),this.name="SleepError"}}function sleep(t,e){return new Promise((s,r)=>{const a=setTimeout(s,t);e.addEventListener("abort",()=>{clearTimeout(a),r(e.reason)},{once:!0})})}async function waitInclusionProof(t,e,s,r=AbortSignal.timeout(1e4),a=1e3){for(;;){try{const o=await e.getInclusionProof(s.requestId).then(c=>c.inclusionProof),l=await o.verify(t,s.requestId);switch(l){case InclusionProofVerificationStatus.OK:return o;case InclusionProofVerificationStatus.PATH_NOT_INCLUDED:break;default:throw new Error(`Invalid inclusion proof status: ${l}`)}}catch(o){if(!(o instanceof JsonRpcNetworkError&&o.status===404))throw o}try{await sleep(a,r)}catch(o){throw new SleepError(String(o||"Sleep was aborted"))}}}const crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function isBytes$1$1(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function anumber$1$1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function abytes$1$1(t,...e){if(!isBytes$1$1(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ahash$2(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");anumber$1$1(t.outputLen),anumber$1$1(t.blockLen)}function aexists$1$1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aoutput$1$1(t,e){abytes$1$1(t);const s=e.outputLen;if(t.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}function clean$1$1(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function createView$1$1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rotr$2(t,e){return t<<32-e|t>>>e}const hasHexBuiltin$2=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes$2=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$2(t){if(abytes$1$1(t),hasHexBuiltin$2)return t.toHex();let e="";for(let s=0;s<t.length;s++)e+=hexes$2[t[s]];return e}const asciis$2={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16$2(t){if(t>=asciis$2._0&&t<=asciis$2._9)return t-asciis$2._0;if(t>=asciis$2.A&&t<=asciis$2.F)return t-(asciis$2.A-10);if(t>=asciis$2.a&&t<=asciis$2.f)return t-(asciis$2.a-10)}function hexToBytes$1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hasHexBuiltin$2)return Uint8Array.fromHex(t);const e=t.length,s=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(s);for(let a=0,o=0;a<s;a++,o+=2){const l=asciiToBase16$2(t.charCodeAt(o)),c=asciiToBase16$2(t.charCodeAt(o+1));if(l===void 0||c===void 0){const u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}r[a]=l*16+c}return r}function utf8ToBytes$1(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function toBytes$1(t){return typeof t=="string"&&(t=utf8ToBytes$1(t)),abytes$1$1(t),t}function concatBytes$1(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];abytes$1$1(a),e+=a.length}const s=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const o=t[r];s.set(o,a),a+=o.length}return s}class Hash{}function createHasher$2(t){const e=r=>t().update(toBytes$1(r)).digest(),s=t();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>t(),e}function randomBytes(t=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(t));if(crypto$1&&typeof crypto$1.randomBytes=="function")return Uint8Array.from(crypto$1.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}var utils=Object.freeze({__proto__:null,Hash,abytes:abytes$1$1,aexists:aexists$1$1,ahash:ahash$2,anumber:anumber$1$1,aoutput:aoutput$1$1,bytesToHex:bytesToHex$2,clean:clean$1$1,concatBytes:concatBytes$1,createHasher:createHasher$2,createView:createView$1$1,hexToBytes:hexToBytes$1,isBytes:isBytes$1$1,randomBytes,rotr:rotr$2,toBytes:toBytes$1,utf8ToBytes:utf8ToBytes$1});const CHARSET$2="qpzry9x8gf2tvdw0s3jn54khce6mua7l",GENERATOR$2=[996825010,642813549,513874426,1027748829,705979059];function polymod(t){let e=1;for(const s of t){const r=e>>25;e=(e&33554431)<<5^s;for(let a=0;a<5;a++)r>>a&1&&(e^=GENERATOR$2[a])}return e}function hrpExpand$2(t){const e=[];for(let s=0;s<t.length;s++)e.push(t.charCodeAt(s)>>5);e.push(0);for(let s=0;s<t.length;s++)e.push(t.charCodeAt(s)&31);return e}function verifyChecksum(t,e){return polymod(hrpExpand$2(t).concat(e))===1}function createChecksum(t,e){const s=hrpExpand$2(t).concat(e).concat([0,0,0,0,0,0]),r=polymod(s)^1,a=[];for(let o=0;o<6;o++)a.push(r>>5*(5-o)&31);return a}function convertBits$2(t,e,s,r){let a=0,o=0;const l=[],c=(1<<s)-1;for(const u of t){if(u<0||u>>e!==0)return null;for(a=a<<e|u,o+=e;o>=s;)o-=s,l.push(a>>o&c)}if(r)o>0&&l.push(a<<s-o&c);else if(o>=e||(a<<s-o&c)!==0)return null;return l}function encode$1(t,e){const s=convertBits$2(Array.from(e),8,5,!0);if(s===null)throw new Error("Failed to convert bits for Bech32 encoding");const r=createChecksum(t,s),a=s.concat(r);let o=t+"1";for(const l of a)o+=CHARSET$2.charAt(l);return o}function decode(t){const e=t.toLowerCase(),s=e.lastIndexOf("1");if(s<1||s+7>e.length||e.length>90)throw new Error("Invalid Bech32 string");const r=e.slice(0,s),a=e.slice(s+1),o=[];for(const u of a){const f=CHARSET$2.indexOf(u);if(f===-1)throw new Error(`Invalid character '${u}' in Bech32 string`);o.push(f)}if(!verifyChecksum(r,o))throw new Error("Invalid Bech32 checksum");const l=o.slice(0,-6),c=convertBits$2(l,5,8,!1);if(c===null)throw new Error("Failed to convert bits in Bech32 decoding");return{hrp:r,data:new Uint8Array(c)}}function encodeNpub(t){if(t.length!==32)throw new Error("Public key must be 32 bytes");return encode$1("npub",t)}function encodeNsec(t){if(t.length!==32)throw new Error("Private key must be 32 bytes");return encode$1("nsec",t)}function decodeNsec(t){const e=decode(t);if(e.hrp!=="nsec")throw new Error(`Expected 'nsec' prefix, got '${e.hrp}'`);if(e.data.length!==32)throw new Error(`Expected 32 bytes, got ${e.data.length}`);return e.data}function setBigUint64$1(t,e,s,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,s,r);const a=BigInt(32),o=BigInt(4294967295),l=Number(s>>a&o),c=Number(s&o),u=r?4:0,f=r?0:4;t.setUint32(e+u,l,r),t.setUint32(e+f,c,r)}function Chi$2(t,e,s){return t&e^~t&s}function Maj$2(t,e,s){return t&e^t&s^e&s}let HashMD$2=class extends Hash{constructor(e,s,r,a){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=s,this.padOffset=r,this.isLE=a,this.buffer=new Uint8Array(e),this.view=createView$1$1(this.buffer)}update(e){aexists$1$1(this),e=toBytes$1(e),abytes$1$1(e);const{view:s,buffer:r,blockLen:a}=this,o=e.length;for(let l=0;l<o;){const c=Math.min(a-this.pos,o-l);if(c===a){const u=createView$1$1(e);for(;a<=o-l;l+=a)this.process(u,l);continue}r.set(e.subarray(l,l+c),this.pos),this.pos+=c,l+=c,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists$1$1(this),aoutput$1$1(e,this),this.finished=!0;const{buffer:s,view:r,blockLen:a,isLE:o}=this;let{pos:l}=this;s[l++]=128,clean$1$1(this.buffer.subarray(l)),this.padOffset>a-l&&(this.process(r,0),l=0);for(let p=l;p<a;p++)s[p]=0;setBigUint64$1(r,a-8,BigInt(this.length*8),o),this.process(r,0);const c=createView$1$1(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],o)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const r=e.slice(0,s);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:s,buffer:r,length:a,finished:o,destroyed:l,pos:c}=this;return e.destroyed=l,e.finished=o,e.length=a,e.pos=c,a%s&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const SHA256_IV$2=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_K$2=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W$2=new Uint32Array(64);class SHA256 extends HashMD$2{constructor(e=32){super(64,e,8,!1),this.A=SHA256_IV$2[0]|0,this.B=SHA256_IV$2[1]|0,this.C=SHA256_IV$2[2]|0,this.D=SHA256_IV$2[3]|0,this.E=SHA256_IV$2[4]|0,this.F=SHA256_IV$2[5]|0,this.G=SHA256_IV$2[6]|0,this.H=SHA256_IV$2[7]|0}get(){const{A:e,B:s,C:r,D:a,E:o,F:l,G:c,H:u}=this;return[e,s,r,a,o,l,c,u]}set(e,s,r,a,o,l,c,u){this.A=e|0,this.B=s|0,this.C=r|0,this.D=a|0,this.E=o|0,this.F=l|0,this.G=c|0,this.H=u|0}process(e,s){for(let p=0;p<16;p++,s+=4)SHA256_W$2[p]=e.getUint32(s,!1);for(let p=16;p<64;p++){const m=SHA256_W$2[p-15],y=SHA256_W$2[p-2],b=rotr$2(m,7)^rotr$2(m,18)^m>>>3,E=rotr$2(y,17)^rotr$2(y,19)^y>>>10;SHA256_W$2[p]=E+SHA256_W$2[p-7]+b+SHA256_W$2[p-16]|0}let{A:r,B:a,C:o,D:l,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const m=rotr$2(c,6)^rotr$2(c,11)^rotr$2(c,25),y=d+m+Chi$2(c,u,f)+SHA256_K$2[p]+SHA256_W$2[p]|0,E=(rotr$2(r,2)^rotr$2(r,13)^rotr$2(r,22))+Maj$2(r,a,o)|0;d=f,f=u,u=c,c=l+y|0,l=o,o=a,a=r,r=y+E|0}r=r+this.A|0,a=a+this.B|0,o=o+this.C|0,l=l+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,a,o,l,c,u,f,d)}roundClean(){clean$1$1(SHA256_W$2)}destroy(){this.set(0,0,0,0,0,0,0,0),clean$1$1(this.buffer)}}const sha256$1$1=createHasher$2(()=>new SHA256);class HMAC extends Hash{constructor(e,s){super(),this.finished=!1,this.destroyed=!1,ahash$2(e);const r=toBytes$1(s);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,o=new Uint8Array(a);o.set(r.length>a?e.create().update(r).digest():r);for(let l=0;l<o.length;l++)o[l]^=54;this.iHash.update(o),this.oHash=e.create();for(let l=0;l<o.length;l++)o[l]^=106;this.oHash.update(o),clean$1$1(o)}update(e){return aexists$1$1(this),this.iHash.update(e),this}digestInto(e){aexists$1$1(this),abytes$1$1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:r,finished:a,destroyed:o,blockLen:l,outputLen:c}=this;return e=e,e.finished=a,e.destroyed=o,e.blockLen=l,e.outputLen=c,e.oHash=s._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac$2=(t,e,s)=>new HMAC(t,e).update(s).digest();hmac$2.create=(t,e)=>new HMAC(t,e);const _0n$4=BigInt(0),_1n$4=BigInt(1);function _abool2(t,e=""){if(typeof t!="boolean"){const s=e&&`"${e}"`;throw new Error(s+"expected boolean, got type="+typeof t)}return t}function _abytes2(t,e,s=""){const r=isBytes$1$1(t),a=t?.length,o=e!==void 0;if(!r||o&&a!==e){const l=s&&`"${s}" `,c=o?` of length ${e}`:"",u=r?`length=${a}`:`type=${typeof t}`;throw new Error(l+"expected Uint8Array"+c+", got "+u)}return t}function numberToHexUnpadded$1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function hexToNumber$1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_0n$4:BigInt("0x"+t)}function bytesToNumberBE$1(t){return hexToNumber$1(bytesToHex$2(t))}function bytesToNumberLE$1(t){return abytes$1$1(t),hexToNumber$1(bytesToHex$2(Uint8Array.from(t).reverse()))}function numberToBytesBE$1(t,e){return hexToBytes$1(t.toString(16).padStart(e*2,"0"))}function numberToBytesLE$1(t,e){return numberToBytesBE$1(t,e).reverse()}function ensureBytes(t,e,s){let r;if(typeof e=="string")try{r=hexToBytes$1(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(isBytes$1$1(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const a=r.length;if(typeof s=="number"&&a!==s)throw new Error(t+" of length "+s+" expected, got "+a);return r}const isPosBig$1=t=>typeof t=="bigint"&&_0n$4<=t;function inRange$1(t,e,s){return isPosBig$1(t)&&isPosBig$1(e)&&isPosBig$1(s)&&e<=t&&t<s}function aInRange$1(t,e,s,r){if(!inRange$1(e,s,r))throw new Error("expected valid "+t+": "+s+" <= n < "+r+", got "+e)}function bitLen$1(t){let e;for(e=0;t>_0n$4;t>>=_1n$4,e+=1);return e}const bitMask$1=t=>(_1n$4<<BigInt(t))-_1n$4;function createHmacDrbg$1(t,e,s){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof s!="function")throw new Error("hmacFn must be a function");const r=y=>new Uint8Array(y),a=y=>Uint8Array.of(y);let o=r(t),l=r(t),c=0;const u=()=>{o.fill(1),l.fill(0),c=0},f=(...y)=>s(l,o,...y),d=(y=r(0))=>{l=f(a(0),y),o=f(),y.length!==0&&(l=f(a(1),y),o=f())},p=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let y=0;const b=[];for(;y<e;){o=f();const E=o.slice();b.push(E),y+=o.length}return concatBytes$1(...b)};return(y,b)=>{u(),d(y);let E;for(;!(E=b(p()));)d();return u(),E}}function _validateObject(t,e,s={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(a,o,l){const c=t[a];if(l&&c===void 0)return;const u=typeof c;if(u!==o||c===null)throw new Error(`param "${a}" is invalid: expected ${o}, got ${u}`)}Object.entries(e).forEach(([a,o])=>r(a,o,!1)),Object.entries(s).forEach(([a,o])=>r(a,o,!0))}function memoized$1(t){const e=new WeakMap;return(s,...r)=>{const a=e.get(s);if(a!==void 0)return a;const o=t(s,...r);return e.set(s,o),o}}const _0n$3=BigInt(0),_1n$3=BigInt(1),_2n$2=BigInt(2),_3n$1=BigInt(3),_4n$1=BigInt(4),_5n$1=BigInt(5),_7n$1=BigInt(7),_8n$1=BigInt(8),_9n$1=BigInt(9),_16n$1=BigInt(16);function mod$1(t,e){const s=t%e;return s>=_0n$3?s:e+s}function pow2$1(t,e,s){let r=t;for(;e-- >_0n$3;)r*=r,r%=s;return r}function invert$1(t,e){if(t===_0n$3)throw new Error("invert: expected non-zero number");if(e<=_0n$3)throw new Error("invert: expected positive modulus, got "+e);let s=mod$1(t,e),r=e,a=_0n$3,o=_1n$3;for(;s!==_0n$3;){const c=r/s,u=r%s,f=a-o*c;r=s,s=u,a=o,o=f}if(r!==_1n$3)throw new Error("invert: does not exist");return mod$1(a,e)}function assertIsSquare$1(t,e,s){if(!t.eql(t.sqr(e),s))throw new Error("Cannot find square root")}function sqrt3mod4$1(t,e){const s=(t.ORDER+_1n$3)/_4n$1,r=t.pow(e,s);return assertIsSquare$1(t,r,e),r}function sqrt5mod8$1(t,e){const s=(t.ORDER-_5n$1)/_8n$1,r=t.mul(e,_2n$2),a=t.pow(r,s),o=t.mul(e,a),l=t.mul(t.mul(o,_2n$2),a),c=t.mul(o,t.sub(l,t.ONE));return assertIsSquare$1(t,c,e),c}function sqrt9mod16$1(t){const e=Field$1(t),s=tonelliShanks$1(t),r=s(e,e.neg(e.ONE)),a=s(e,r),o=s(e,e.neg(r)),l=(t+_7n$1)/_16n$1;return(c,u)=>{let f=c.pow(u,l),d=c.mul(f,r);const p=c.mul(f,a),m=c.mul(f,o),y=c.eql(c.sqr(d),u),b=c.eql(c.sqr(p),u);f=c.cmov(f,d,y),d=c.cmov(m,p,b);const E=c.eql(c.sqr(d),u),C=c.cmov(f,d,E);return assertIsSquare$1(c,C,u),C}}function tonelliShanks$1(t){if(t<_3n$1)throw new Error("sqrt is not defined for small field");let e=t-_1n$3,s=0;for(;e%_2n$2===_0n$3;)e/=_2n$2,s++;let r=_2n$2;const a=Field$1(t);for(;FpLegendre$1(a,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(s===1)return sqrt3mod4$1;let o=a.pow(r,e);const l=(e+_1n$3)/_2n$2;return function(u,f){if(u.is0(f))return f;if(FpLegendre$1(u,f)!==1)throw new Error("Cannot find square root");let d=s,p=u.mul(u.ONE,o),m=u.pow(f,e),y=u.pow(f,l);for(;!u.eql(m,u.ONE);){if(u.is0(m))return u.ZERO;let b=1,E=u.sqr(m);for(;!u.eql(E,u.ONE);)if(b++,E=u.sqr(E),b===d)throw new Error("Cannot find square root");const C=_1n$3<<BigInt(d-b-1),j=u.pow(p,C);d=b,p=u.sqr(j),m=u.mul(m,p),y=u.mul(y,j)}return y}}function FpSqrt$1(t){return t%_4n$1===_3n$1?sqrt3mod4$1:t%_8n$1===_5n$1?sqrt5mod8$1:t%_16n$1===_9n$1?sqrt9mod16$1(t):tonelliShanks$1(t)}const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},s=FIELD_FIELDS$1.reduce((r,a)=>(r[a]="function",r),e);return _validateObject(t,s),t}function FpPow$1(t,e,s){if(s<_0n$3)throw new Error("invalid exponent, negatives unsupported");if(s===_0n$3)return t.ONE;if(s===_1n$3)return e;let r=t.ONE,a=e;for(;s>_0n$3;)s&_1n$3&&(r=t.mul(r,a)),a=t.sqr(a),s>>=_1n$3;return r}function FpInvertBatch$1(t,e,s=!1){const r=new Array(e.length).fill(s?t.ZERO:void 0),a=e.reduce((l,c,u)=>t.is0(c)?l:(r[u]=l,t.mul(l,c)),t.ONE),o=t.inv(a);return e.reduceRight((l,c,u)=>t.is0(c)?l:(r[u]=t.mul(l,r[u]),t.mul(l,c)),o),r}function FpLegendre$1(t,e){const s=(t.ORDER-_1n$3)/_2n$2,r=t.pow(e,s),a=t.eql(r,t.ONE),o=t.eql(r,t.ZERO),l=t.eql(r,t.neg(t.ONE));if(!a&&!o&&!l)throw new Error("invalid Legendre symbol result");return a?1:o?0:-1}function nLength$1(t,e){e!==void 0&&anumber$1$1(e);const s=e!==void 0?e:t.toString(2).length,r=Math.ceil(s/8);return{nBitLength:s,nByteLength:r}}function Field$1(t,e,s=!1,r={}){if(t<=_0n$3)throw new Error("invalid field: expected ORDER > 0, got "+t);let a,o,l=!1,c;if(typeof e=="object"&&e!=null){if(r.sqrt||s)throw new Error("cannot specify opts in two arguments");const m=e;m.BITS&&(a=m.BITS),m.sqrt&&(o=m.sqrt),typeof m.isLE=="boolean"&&(s=m.isLE),typeof m.modFromBytes=="boolean"&&(l=m.modFromBytes),c=m.allowedLengths}else typeof e=="number"&&(a=e),r.sqrt&&(o=r.sqrt);const{nBitLength:u,nByteLength:f}=nLength$1(t,a);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const p=Object.freeze({ORDER:t,isLE:s,BITS:u,BYTES:f,MASK:bitMask$1(u),ZERO:_0n$3,ONE:_1n$3,allowedLengths:c,create:m=>mod$1(m,t),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return _0n$3<=m&&m<t},is0:m=>m===_0n$3,isValidNot0:m=>!p.is0(m)&&p.isValid(m),isOdd:m=>(m&_1n$3)===_1n$3,neg:m=>mod$1(-m,t),eql:(m,y)=>m===y,sqr:m=>mod$1(m*m,t),add:(m,y)=>mod$1(m+y,t),sub:(m,y)=>mod$1(m-y,t),mul:(m,y)=>mod$1(m*y,t),pow:(m,y)=>FpPow$1(p,m,y),div:(m,y)=>mod$1(m*invert$1(y,t),t),sqrN:m=>m*m,addN:(m,y)=>m+y,subN:(m,y)=>m-y,mulN:(m,y)=>m*y,inv:m=>invert$1(m,t),sqrt:o||(m=>(d||(d=FpSqrt$1(t)),d(p,m))),toBytes:m=>s?numberToBytesLE$1(m,f):numberToBytesBE$1(m,f),fromBytes:(m,y=!0)=>{if(c){if(!c.includes(m.length)||m.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+m.length);const E=new Uint8Array(f);E.set(m,s?0:E.length-m.length),m=E}if(m.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+m.length);let b=s?bytesToNumberLE$1(m):bytesToNumberBE$1(m);if(l&&(b=mod$1(b,t)),!y&&!p.isValid(b))throw new Error("invalid field element: outside of range 0..ORDER");return b},invertBatch:m=>FpInvertBatch$1(p,m),cmov:(m,y,b)=>b?y:m});return Object.freeze(p)}function getFieldBytesLength$1(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength$1(t){const e=getFieldBytesLength$1(t);return e+Math.ceil(e/2)}function mapHashToField$1(t,e,s=!1){const r=t.length,a=getFieldBytesLength$1(e),o=getMinHashLength$1(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const l=s?bytesToNumberLE$1(t):bytesToNumberBE$1(t),c=mod$1(l,e-_1n$3)+_1n$3;return s?numberToBytesLE$1(c,a):numberToBytesBE$1(c,a)}const _0n$2=BigInt(0),_1n$2=BigInt(1);function negateCt$1(t,e){const s=e.negate();return t?s:e}function normalizeZ$1(t,e){const s=FpInvertBatch$1(t.Fp,e.map(r=>r.Z));return e.map((r,a)=>t.fromAffine(r.toAffine(s[a])))}function validateW$1(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function calcWOpts$1(t,e){validateW$1(t,e);const s=Math.ceil(e/t)+1,r=2**(t-1),a=2**t,o=bitMask$1(t),l=BigInt(t);return{windows:s,windowSize:r,mask:o,maxNumber:a,shiftBy:l}}function calcOffsets$1(t,e,s){const{windowSize:r,mask:a,maxNumber:o,shiftBy:l}=s;let c=Number(t&a),u=t>>l;c>r&&(c-=o,u+=_1n$2);const f=e*r,d=f+Math.abs(c)-1,p=c===0,m=c<0,y=e%2!==0;return{nextN:u,offset:d,isZero:p,isNeg:m,isNegF:y,offsetF:f}}function validateMSMPoints(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((s,r)=>{if(!(s instanceof e))throw new Error("invalid point at index "+r)})}function validateMSMScalars(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((s,r)=>{if(!e.isValid(s))throw new Error("invalid scalar at index "+r)})}const pointPrecomputes$1=new WeakMap,pointWindowSizes$1=new WeakMap;function getW$1(t){return pointWindowSizes$1.get(t)||1}function assert0$1(t){if(t!==_0n$2)throw new Error("invalid wNAF")}let wNAF$1=class{constructor(e,s){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=s}_unsafeLadder(e,s,r=this.ZERO){let a=e;for(;s>_0n$2;)s&_1n$2&&(r=r.add(a)),a=a.double(),s>>=_1n$2;return r}precomputeWindow(e,s){const{windows:r,windowSize:a}=calcWOpts$1(s,this.bits),o=[];let l=e,c=l;for(let u=0;u<r;u++){c=l,o.push(c);for(let f=1;f<a;f++)c=c.add(l),o.push(c);l=c.double()}return o}wNAF(e,s,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let a=this.ZERO,o=this.BASE;const l=calcWOpts$1(e,this.bits);for(let c=0;c<l.windows;c++){const{nextN:u,offset:f,isZero:d,isNeg:p,isNegF:m,offsetF:y}=calcOffsets$1(r,c,l);r=u,d?o=o.add(negateCt$1(m,s[y])):a=a.add(negateCt$1(p,s[f]))}return assert0$1(r),{p:a,f:o}}wNAFUnsafe(e,s,r,a=this.ZERO){const o=calcWOpts$1(e,this.bits);for(let l=0;l<o.windows&&r!==_0n$2;l++){const{nextN:c,offset:u,isZero:f,isNeg:d}=calcOffsets$1(r,l,o);if(r=c,!f){const p=s[u];a=a.add(d?p.negate():p)}}return assert0$1(r),a}getPrecomputes(e,s,r){let a=pointPrecomputes$1.get(s);return a||(a=this.precomputeWindow(s,e),e!==1&&(typeof r=="function"&&(a=r(a)),pointPrecomputes$1.set(s,a))),a}cached(e,s,r){const a=getW$1(e);return this.wNAF(a,this.getPrecomputes(a,e,r),s)}unsafe(e,s,r,a){const o=getW$1(e);return o===1?this._unsafeLadder(e,s,a):this.wNAFUnsafe(o,this.getPrecomputes(o,e,r),s,a)}createCache(e,s){validateW$1(s,this.bits),pointWindowSizes$1.set(e,s),pointPrecomputes$1.delete(e)}hasCache(e){return getW$1(e)!==1}};function mulEndoUnsafe$1(t,e,s,r){let a=e,o=t.ZERO,l=t.ZERO;for(;s>_0n$2||r>_0n$2;)s&_1n$2&&(o=o.add(a)),r&_1n$2&&(l=l.add(a)),a=a.double(),s>>=_1n$2,r>>=_1n$2;return{p1:o,p2:l}}function pippenger(t,e,s,r){validateMSMPoints(s,t),validateMSMScalars(r,e);const a=s.length,o=r.length;if(a!==o)throw new Error("arrays of points and scalars must have equal length");const l=t.ZERO,c=bitLen$1(BigInt(a));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const f=bitMask$1(u),d=new Array(Number(f)+1).fill(l),p=Math.floor((e.BITS-1)/u)*u;let m=l;for(let y=p;y>=0;y-=u){d.fill(l);for(let E=0;E<o;E++){const C=r[E],j=Number(C>>BigInt(y)&f);d[j]=d[j].add(s[E])}let b=l;for(let E=d.length-1,C=l;E>0;E--)C=C.add(d[E]),b=b.add(C);if(m=m.add(b),y!==0)for(let E=0;E<u;E++)m=m.double()}return m}function createField$1(t,e,s){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return validateField$1(e),e}else return Field$1(t,{isLE:s})}function _createCurveFields(t,e,s={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const u of["p","n","h"]){const f=e[u];if(!(typeof f=="bigint"&&f>_0n$2))throw new Error(`CURVE.${u} must be positive bigint`)}const a=createField$1(e.p,s.Fp,r),o=createField$1(e.n,s.Fn,r),c=["Gx","Gy","a","b"];for(const u of c)if(!a.isValid(e[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:a,Fn:o}}const divNearest$1=(t,e)=>(t+(t>=0?e:-e)/_2n$1)/e;function _splitEndoScalar$1(t,e,s){const[[r,a],[o,l]]=e,c=divNearest$1(l*t,s),u=divNearest$1(-a*t,s);let f=t-c*r-u*o,d=-c*a-u*l;const p=f<_0n$1,m=d<_0n$1;p&&(f=-f),m&&(d=-d);const y=bitMask$1(Math.ceil(bitLen$1(s)/2))+_1n$1;if(f<_0n$1||f>=y||d<_0n$1||d>=y)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:p,k1:f,k2neg:m,k2:d}}function validateSigFormat$1(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function validateSigOpts$1(t,e){const s={};for(let r of Object.keys(e))s[r]=t[r]===void 0?e[r]:t[r];return _abool2(s.lowS,"lowS"),_abool2(s.prehash,"prehash"),s.format!==void 0&&validateSigFormat$1(s.format),s}let DERErr$1=class extends Error{constructor(e=""){super(e)}};const DER$1={Err:DERErr$1,_tlv:{encode:(t,e)=>{const{Err:s}=DER$1;if(t<0||t>256)throw new s("tlv.encode: wrong tag");if(e.length&1)throw new s("tlv.encode: unpadded data");const r=e.length/2,a=numberToHexUnpadded$1(r);if(a.length/2&128)throw new s("tlv.encode: long form length too big");const o=r>127?numberToHexUnpadded$1(a.length/2|128):"";return numberToHexUnpadded$1(t)+o+a+e},decode(t,e){const{Err:s}=DER$1;let r=0;if(t<0||t>256)throw new s("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new s("tlv.decode: wrong tlv");const a=e[r++],o=!!(a&128);let l=0;if(!o)l=a;else{const u=a&127;if(!u)throw new s("tlv.decode(long): indefinite length not supported");if(u>4)throw new s("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new s("tlv.decode: length bytes not complete");if(f[0]===0)throw new s("tlv.decode(long): zero leftmost byte");for(const d of f)l=l<<8|d;if(r+=u,l<128)throw new s("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+l);if(c.length!==l)throw new s("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+l)}}},_int:{encode(t){const{Err:e}=DER$1;if(t<_0n$1)throw new e("integer: negative integers are not allowed");let s=numberToHexUnpadded$1(t);if(Number.parseInt(s[0],16)&8&&(s="00"+s),s.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return s},decode(t){const{Err:e}=DER$1;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bytesToNumberBE$1(t)}},toSig(t){const{Err:e,_int:s,_tlv:r}=DER$1,a=ensureBytes("signature",t),{v:o,l}=r.decode(48,a);if(l.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,o),{v:f,l:d}=r.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:s.decode(c),s:s.decode(f)}},hexFromSig(t){const{_tlv:e,_int:s}=DER$1,r=e.encode(2,s.encode(t.r)),a=e.encode(2,s.encode(t.s)),o=r+a;return e.encode(48,o)}},_0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_3n$2=BigInt(3),_4n$2=BigInt(4);function _normFnElement(t,e){const{BYTES:s}=t;let r;if(typeof e=="bigint")r=e;else{let a=ensureBytes("private key",e);try{r=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${s}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function weierstrassN(t,e={}){const s=_createCurveFields("weierstrass",t,e),{Fp:r,Fn:a}=s;let o=s.CURVE;const{h:l,n:c}=o;_validateObject(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=e;if(u&&(!r.is0(o.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=getWLengths$1(r,a);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(O,k,v){const{x:S,y:N}=k.toAffine(),R=r.toBytes(S);if(_abool2(v,"isCompressed"),v){d();const T=!r.isOdd(N);return concatBytes$1(pprefix$1(T),R)}else return concatBytes$1(Uint8Array.of(4),R,r.toBytes(N))}function m(O){_abytes2(O,void 0,"Point");const{publicKey:k,publicKeyUncompressed:v}=f,S=O.length,N=O[0],R=O.subarray(1);if(S===k&&(N===2||N===3)){const T=r.fromBytes(R);if(!r.isValid(T))throw new Error("bad point: is not on curve, wrong x");const M=E(T);let I;try{I=r.sqrt(M)}catch(L){const Y=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}d();const $=r.isOdd(I);return(N&1)===1!==$&&(I=r.neg(I)),{x:T,y:I}}else if(S===v&&N===4){const T=r.BYTES,M=r.fromBytes(R.subarray(0,T)),I=r.fromBytes(R.subarray(T,T*2));if(!C(M,I))throw new Error("bad point: is not on curve");return{x:M,y:I}}else throw new Error(`bad point: got length ${S}, expected compressed=${k} or uncompressed=${v}`)}const y=e.toBytes||p,b=e.fromBytes||m;function E(O){const k=r.sqr(O),v=r.mul(k,O);return r.add(r.add(v,r.mul(O,o.a)),o.b)}function C(O,k){const v=r.sqr(k),S=E(O);return r.eql(v,S)}if(!C(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const j=r.mul(r.pow(o.a,_3n$2),_4n$2),B=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(j,B)))throw new Error("bad curve params: a or b");function D(O,k,v=!1){if(!r.isValid(k)||v&&r.is0(k))throw new Error(`bad point coordinate ${O}`);return k}function F(O){if(!(O instanceof W))throw new Error("ProjectivePoint expected")}function q(O){if(!u||!u.basises)throw new Error("no endo");return _splitEndoScalar$1(O,u.basises,a.ORDER)}const V=memoized$1((O,k)=>{const{X:v,Y:S,Z:N}=O;if(r.eql(N,r.ONE))return{x:v,y:S};const R=O.is0();k==null&&(k=R?r.ONE:r.inv(N));const T=r.mul(v,k),M=r.mul(S,k),I=r.mul(N,k);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:T,y:M}}),ee=memoized$1(O=>{if(O.is0()){if(e.allowInfinityPoint&&!r.is0(O.Y))return;throw new Error("bad point: ZERO")}const{x:k,y:v}=O.toAffine();if(!r.isValid(k)||!r.isValid(v))throw new Error("bad point: x or y not field elements");if(!C(k,v))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Q(O,k,v,S,N){return v=new W(r.mul(v.X,O),v.Y,v.Z),k=negateCt$1(S,k),v=negateCt$1(N,v),k.add(v)}class W{constructor(k,v,S){this.X=D("x",k),this.Y=D("y",v,!0),this.Z=D("z",S),Object.freeze(this)}static CURVE(){return o}static fromAffine(k){const{x:v,y:S}=k||{};if(!k||!r.isValid(v)||!r.isValid(S))throw new Error("invalid affine point");if(k instanceof W)throw new Error("projective point not allowed");return r.is0(v)&&r.is0(S)?W.ZERO:new W(v,S,r.ONE)}static fromBytes(k){const v=W.fromAffine(b(_abytes2(k,void 0,"point")));return v.assertValidity(),v}static fromHex(k){return W.fromBytes(ensureBytes("pointHex",k))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(k=8,v=!0){return z.createCache(this,k),v||this.multiply(_3n$2),this}assertValidity(){ee(this)}hasEvenY(){const{y:k}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(k)}equals(k){F(k);const{X:v,Y:S,Z:N}=this,{X:R,Y:T,Z:M}=k,I=r.eql(r.mul(v,M),r.mul(R,N)),$=r.eql(r.mul(S,M),r.mul(T,N));return I&&$}negate(){return new W(this.X,r.neg(this.Y),this.Z)}double(){const{a:k,b:v}=o,S=r.mul(v,_3n$2),{X:N,Y:R,Z:T}=this;let M=r.ZERO,I=r.ZERO,$=r.ZERO,A=r.mul(N,N),L=r.mul(R,R),Y=r.mul(T,T),oe=r.mul(N,R);return oe=r.add(oe,oe),$=r.mul(N,T),$=r.add($,$),M=r.mul(k,$),I=r.mul(S,Y),I=r.add(M,I),M=r.sub(L,I),I=r.add(L,I),I=r.mul(M,I),M=r.mul(oe,M),$=r.mul(S,$),Y=r.mul(k,Y),oe=r.sub(A,Y),oe=r.mul(k,oe),oe=r.add(oe,$),$=r.add(A,A),A=r.add($,A),A=r.add(A,Y),A=r.mul(A,oe),I=r.add(I,A),Y=r.mul(R,T),Y=r.add(Y,Y),A=r.mul(Y,oe),M=r.sub(M,A),$=r.mul(Y,L),$=r.add($,$),$=r.add($,$),new W(M,I,$)}add(k){F(k);const{X:v,Y:S,Z:N}=this,{X:R,Y:T,Z:M}=k;let I=r.ZERO,$=r.ZERO,A=r.ZERO;const L=o.a,Y=r.mul(o.b,_3n$2);let oe=r.mul(v,R),J=r.mul(S,T),U=r.mul(N,M),G=r.add(v,S),ae=r.add(R,T);G=r.mul(G,ae),ae=r.add(oe,J),G=r.sub(G,ae),ae=r.add(v,N);let he=r.add(R,M);return ae=r.mul(ae,he),he=r.add(oe,U),ae=r.sub(ae,he),he=r.add(S,N),I=r.add(T,M),he=r.mul(he,I),I=r.add(J,U),he=r.sub(he,I),A=r.mul(L,ae),I=r.mul(Y,U),A=r.add(I,A),I=r.sub(J,A),A=r.add(J,A),$=r.mul(I,A),J=r.add(oe,oe),J=r.add(J,oe),U=r.mul(L,U),ae=r.mul(Y,ae),J=r.add(J,U),U=r.sub(oe,U),U=r.mul(L,U),ae=r.add(ae,U),oe=r.mul(J,ae),$=r.add($,oe),oe=r.mul(he,ae),I=r.mul(G,I),I=r.sub(I,oe),oe=r.mul(G,J),A=r.mul(he,A),A=r.add(A,oe),new W(I,$,A)}subtract(k){return this.add(k.negate())}is0(){return this.equals(W.ZERO)}multiply(k){const{endo:v}=e;if(!a.isValidNot0(k))throw new Error("invalid scalar: out of range");let S,N;const R=T=>z.cached(this,T,M=>normalizeZ$1(W,M));if(v){const{k1neg:T,k1:M,k2neg:I,k2:$}=q(k),{p:A,f:L}=R(M),{p:Y,f:oe}=R($);N=L.add(oe),S=Q(v.beta,A,Y,T,I)}else{const{p:T,f:M}=R(k);S=T,N=M}return normalizeZ$1(W,[S,N])[0]}multiplyUnsafe(k){const{endo:v}=e,S=this;if(!a.isValid(k))throw new Error("invalid scalar: out of range");if(k===_0n$1||S.is0())return W.ZERO;if(k===_1n$1)return S;if(z.hasCache(this))return this.multiply(k);if(v){const{k1neg:N,k1:R,k2neg:T,k2:M}=q(k),{p1:I,p2:$}=mulEndoUnsafe$1(W,S,R,M);return Q(v.beta,I,$,N,T)}else return z.unsafe(S,k)}multiplyAndAddUnsafe(k,v,S){const N=this.multiplyUnsafe(v).add(k.multiplyUnsafe(S));return N.is0()?void 0:N}toAffine(k){return V(this,k)}isTorsionFree(){const{isTorsionFree:k}=e;return l===_1n$1?!0:k?k(W,this):z.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:k}=e;return l===_1n$1?this:k?k(W,this):this.multiplyUnsafe(l)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}toBytes(k=!0){return _abool2(k,"isCompressed"),this.assertValidity(),y(W,this,k)}toHex(k=!0){return bytesToHex$2(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(k=!0){return this.toBytes(k)}_setWindowSize(k){this.precompute(k)}static normalizeZ(k){return normalizeZ$1(W,k)}static msm(k,v){return pippenger(W,a,k,v)}static fromPrivateKey(k){return W.BASE.multiply(_normFnElement(a,k))}}W.BASE=new W(o.Gx,o.Gy,r.ONE),W.ZERO=new W(r.ZERO,r.ONE,r.ZERO),W.Fp=r,W.Fn=a;const Z=a.BITS,z=new wNAF$1(W,e.endo?Math.ceil(Z/2):Z);return W.BASE.precompute(8),W}function pprefix$1(t){return Uint8Array.of(t?2:3)}function getWLengths$1(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function ecdh$1(t,e={}){const{Fn:s}=t,r=e.randomBytes||randomBytes,a=Object.assign(getWLengths$1(t.Fp,s),{seed:getMinHashLength$1(s.ORDER)});function o(y){try{return!!_normFnElement(s,y)}catch{return!1}}function l(y,b){const{publicKey:E,publicKeyUncompressed:C}=a;try{const j=y.length;return b===!0&&j!==E||b===!1&&j!==C?!1:!!t.fromBytes(y)}catch{return!1}}function c(y=r(a.seed)){return mapHashToField$1(_abytes2(y,a.seed,"seed"),s.ORDER)}function u(y,b=!0){return t.BASE.multiply(_normFnElement(s,y)).toBytes(b)}function f(y){const b=c(y);return{secretKey:b,publicKey:u(b)}}function d(y){if(typeof y=="bigint")return!1;if(y instanceof t)return!0;const{secretKey:b,publicKey:E,publicKeyUncompressed:C}=a;if(s.allowedLengths||b===E)return;const j=ensureBytes("key",y).length;return j===E||j===C}function p(y,b,E=!0){if(d(y)===!0)throw new Error("first arg must be private key");if(d(b)===!1)throw new Error("second arg must be public key");const C=_normFnElement(s,y);return t.fromHex(b).multiply(C).toBytes(E)}return Object.freeze({getPublicKey:u,getSharedSecret:p,keygen:f,Point:t,utils:{isValidSecretKey:o,isValidPublicKey:l,randomSecretKey:c,isValidPrivateKey:o,randomPrivateKey:c,normPrivateKeyToScalar:y=>_normFnElement(s,y),precompute(y=8,b=t.BASE){return b.precompute(y,!1)}},lengths:a})}function ecdsa$1(t,e,s={}){ahash$2(e),_validateObject(s,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=s.randomBytes||randomBytes,a=s.hmac||((v,...S)=>hmac$2(e,v,concatBytes$1(...S))),{Fp:o,Fn:l}=t,{ORDER:c,BITS:u}=l,{keygen:f,getPublicKey:d,getSharedSecret:p,utils:m,lengths:y}=ecdh$1(t,s),b={prehash:!1,lowS:typeof s.lowS=="boolean"?s.lowS:!1,format:void 0,extraEntropy:!1},E="compact";function C(v){const S=c>>_1n$1;return v>S}function j(v,S){if(!l.isValidNot0(S))throw new Error(`invalid signature ${v}: out of range 1..Point.Fn.ORDER`);return S}function B(v,S){validateSigFormat$1(S);const N=y.signature,R=S==="compact"?N:S==="recovered"?N+1:void 0;return _abytes2(v,R,`${S} signature`)}class D{constructor(S,N,R){this.r=j("r",S),this.s=j("s",N),R!=null&&(this.recovery=R),Object.freeze(this)}static fromBytes(S,N=E){B(S,N);let R;if(N==="der"){const{r:$,s:A}=DER$1.toSig(_abytes2(S));return new D($,A)}N==="recovered"&&(R=S[0],N="compact",S=S.subarray(1));const T=l.BYTES,M=S.subarray(0,T),I=S.subarray(T,T*2);return new D(l.fromBytes(M),l.fromBytes(I),R)}static fromHex(S,N){return this.fromBytes(hexToBytes$1(S),N)}addRecoveryBit(S){return new D(this.r,this.s,S)}recoverPublicKey(S){const N=o.ORDER,{r:R,s:T,recovery:M}=this;if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");if(c*_2n$1<N&&M>1)throw new Error("recovery id is ambiguous for h>1 curve");const $=M===2||M===3?R+c:R;if(!o.isValid($))throw new Error("recovery id 2 or 3 invalid");const A=o.toBytes($),L=t.fromBytes(concatBytes$1(pprefix$1((M&1)===0),A)),Y=l.inv($),oe=q(ensureBytes("msgHash",S)),J=l.create(-oe*Y),U=l.create(T*Y),G=t.BASE.multiplyUnsafe(J).add(L.multiplyUnsafe(U));if(G.is0())throw new Error("point at infinify");return G.assertValidity(),G}hasHighS(){return C(this.s)}toBytes(S=E){if(validateSigFormat$1(S),S==="der")return hexToBytes$1(DER$1.hexFromSig(this));const N=l.toBytes(this.r),R=l.toBytes(this.s);if(S==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return concatBytes$1(Uint8Array.of(this.recovery),N,R)}return concatBytes$1(N,R)}toHex(S){return bytesToHex$2(this.toBytes(S))}assertValidity(){}static fromCompact(S){return D.fromBytes(ensureBytes("sig",S),"compact")}static fromDER(S){return D.fromBytes(ensureBytes("sig",S),"der")}normalizeS(){return this.hasHighS()?new D(this.r,l.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bytesToHex$2(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bytesToHex$2(this.toBytes("compact"))}}const F=s.bits2int||function(S){if(S.length>8192)throw new Error("input is too large");const N=bytesToNumberBE$1(S),R=S.length*8-u;return R>0?N>>BigInt(R):N},q=s.bits2int_modN||function(S){return l.create(F(S))},V=bitMask$1(u);function ee(v){return aInRange$1("num < 2^"+u,v,_0n$1,V),l.toBytes(v)}function Q(v,S){return _abytes2(v,void 0,"message"),S?_abytes2(e(v),void 0,"prehashed message"):v}function W(v,S,N){if(["recovered","canonical"].some(J=>J in N))throw new Error("sign() legacy options not supported");const{lowS:R,prehash:T,extraEntropy:M}=validateSigOpts$1(N,b);v=Q(v,T);const I=q(v),$=_normFnElement(l,S),A=[ee($),ee(I)];if(M!=null&&M!==!1){const J=M===!0?r(y.secretKey):M;A.push(ensureBytes("extraEntropy",J))}const L=concatBytes$1(...A),Y=I;function oe(J){const U=F(J);if(!l.isValidNot0(U))return;const G=l.inv(U),ae=t.BASE.multiply(U).toAffine(),he=l.create(ae.x);if(he===_0n$1)return;const le=l.create(G*l.create(Y+he*$));if(le===_0n$1)return;let te=(ae.x===he?0:2)|Number(ae.y&_1n$1),pe=le;return R&&C(le)&&(pe=l.neg(le),te^=1),new D(he,pe,te)}return{seed:L,k2sig:oe}}function Z(v,S,N={}){v=ensureBytes("message",v);const{seed:R,k2sig:T}=W(v,S,N);return createHmacDrbg$1(e.outputLen,l.BYTES,a)(R,T)}function z(v){let S;const N=typeof v=="string"||isBytes$1$1(v),R=!N&&v!==null&&typeof v=="object"&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!N&&!R)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(R)S=new D(v.r,v.s);else if(N){try{S=D.fromBytes(ensureBytes("sig",v),"der")}catch(T){if(!(T instanceof DER$1.Err))throw T}if(!S)try{S=D.fromBytes(ensureBytes("sig",v),"compact")}catch{return!1}}return S||!1}function O(v,S,N,R={}){const{lowS:T,prehash:M,format:I}=validateSigOpts$1(R,b);if(N=ensureBytes("publicKey",N),S=Q(ensureBytes("message",S),M),"strict"in R)throw new Error("options.strict was renamed to lowS");const $=I===void 0?z(v):D.fromBytes(ensureBytes("sig",v),I);if($===!1)return!1;try{const A=t.fromBytes(N);if(T&&$.hasHighS())return!1;const{r:L,s:Y}=$,oe=q(S),J=l.inv(Y),U=l.create(oe*J),G=l.create(L*J),ae=t.BASE.multiplyUnsafe(U).add(A.multiplyUnsafe(G));return ae.is0()?!1:l.create(ae.x)===L}catch{return!1}}function k(v,S,N={}){const{prehash:R}=validateSigOpts$1(N,b);return S=Q(S,R),D.fromBytes(v,"recovered").recoverPublicKey(S).toBytes()}return Object.freeze({keygen:f,getPublicKey:d,getSharedSecret:p,utils:m,lengths:y,Point:t,sign:Z,verify:O,recoverPublicKey:k,Signature:D,hash:e})}function _weierstrass_legacy_opts_to_new(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},s=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(l=>Math.ceil(l/2)))):void 0;const a=Field$1(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),o={Fp:s,Fn:a,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:o}}function _ecdsa_legacy_opts_to_new(t){const{CURVE:e,curveOpts:s}=_weierstrass_legacy_opts_to_new(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:s,hash:t.hash,ecdsaOpts:r}}function _ecdsa_new_output_to_legacy(t,e){const s=e.Point;return Object.assign({},e,{ProjectivePoint:s,CURVE:Object.assign({},t,nLength$1(s.Fn.ORDER,s.Fn.BITS))})}function weierstrass$1(t){const{CURVE:e,curveOpts:s,hash:r,ecdsaOpts:a}=_ecdsa_legacy_opts_to_new(t),o=weierstrassN(e,s),l=ecdsa$1(o,r,a);return _ecdsa_new_output_to_legacy(t,l)}function createCurve(t,e){const s=r=>weierstrass$1({...t,hash:r});return{...s(e),create:s}}const secp256k1_CURVE$1={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},secp256k1_ENDO$1={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},_0n$5=BigInt(0),_1n$5=BigInt(1),_2n$3=BigInt(2);function sqrtMod$1(t){const e=secp256k1_CURVE$1.p,s=BigInt(3),r=BigInt(6),a=BigInt(11),o=BigInt(22),l=BigInt(23),c=BigInt(44),u=BigInt(88),f=t*t*t%e,d=f*f*t%e,p=pow2$1(d,s,e)*d%e,m=pow2$1(p,s,e)*d%e,y=pow2$1(m,_2n$3,e)*f%e,b=pow2$1(y,a,e)*y%e,E=pow2$1(b,o,e)*b%e,C=pow2$1(E,c,e)*E%e,j=pow2$1(C,u,e)*C%e,B=pow2$1(j,c,e)*E%e,D=pow2$1(B,s,e)*d%e,F=pow2$1(D,l,e)*b%e,q=pow2$1(F,r,e)*f%e,V=pow2$1(q,_2n$3,e);if(!Fpk1$1.eql(Fpk1$1.sqr(V),t))throw new Error("Cannot find square root");return V}const Fpk1$1=Field$1(secp256k1_CURVE$1.p,{sqrt:sqrtMod$1}),secp256k1$1=createCurve({...secp256k1_CURVE$1,Fp:Fpk1$1,lowS:!0,endo:secp256k1_ENDO$1},sha256$1$1),TAGGED_HASH_PREFIXES={};function taggedHash(t,...e){let s=TAGGED_HASH_PREFIXES[t];if(s===void 0){const r=sha256$1$1(utf8ToBytes$1(t));s=concatBytes$1(r,r),TAGGED_HASH_PREFIXES[t]=s}return sha256$1$1(concatBytes$1(s,...e))}const pointToBytes=t=>t.toBytes(!0).slice(1),Pointk1$1=secp256k1$1.Point,hasEven=t=>t%_2n$3===_0n$5;function schnorrGetExtPubKey(t){const{Fn:e,BASE:s}=Pointk1$1,r=_normFnElement(e,t),a=s.multiply(r);return{scalar:hasEven(a.y)?r:e.neg(r),bytes:pointToBytes(a)}}function lift_x(t){const e=Fpk1$1;if(!e.isValidNot0(t))throw new Error("invalid x: Fail if x  p");const s=e.create(t*t),r=e.create(s*t+BigInt(7));let a=e.sqrt(r);hasEven(a)||(a=e.neg(a));const o=Pointk1$1.fromAffine({x:t,y:a});return o.assertValidity(),o}const num=bytesToNumberBE$1;function challenge(...t){return Pointk1$1.Fn.create(num(taggedHash("BIP0340/challenge",...t)))}function schnorrGetPublicKey(t){return schnorrGetExtPubKey(t).bytes}function schnorrSign(t,e,s=randomBytes(32)){const{Fn:r}=Pointk1$1,a=ensureBytes("message",t),{bytes:o,scalar:l}=schnorrGetExtPubKey(e),c=ensureBytes("auxRand",s,32),u=r.toBytes(l^num(taggedHash("BIP0340/aux",c))),f=taggedHash("BIP0340/nonce",u,o,a),{bytes:d,scalar:p}=schnorrGetExtPubKey(f),m=challenge(d,o,a),y=new Uint8Array(64);if(y.set(d,0),y.set(r.toBytes(r.create(p+m*l)),32),!schnorrVerify(y,a,o))throw new Error("sign: Invalid signature produced");return y}function schnorrVerify(t,e,s){const{Fn:r,BASE:a}=Pointk1$1,o=ensureBytes("signature",t,64),l=ensureBytes("message",e),c=ensureBytes("publicKey",s,32);try{const u=lift_x(num(c)),f=num(o.subarray(0,32));if(!inRange$1(f,_1n$5,secp256k1_CURVE$1.p))return!1;const d=num(o.subarray(32,64));if(!inRange$1(d,_1n$5,secp256k1_CURVE$1.n))return!1;const p=challenge(r.toBytes(f),pointToBytes(u),l),m=a.multiplyUnsafe(d).add(u.multiplyUnsafe(r.neg(p))),{x:y,y:b}=m.toAffine();return!(m.is0()||!hasEven(b)||y!==f)}catch{return!1}}const schnorr$1=(()=>{const s=(a=randomBytes(48))=>mapHashToField$1(a,secp256k1_CURVE$1.n);secp256k1$1.utils.randomSecretKey;function r(a){const o=s(a);return{secretKey:o,publicKey:schnorrGetPublicKey(o)}}return{keygen:r,getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,Point:Pointk1$1,utils:{randomSecretKey:s,randomPrivateKey:s,taggedHash,lift_x,pointToBytes,numberToBytesBE:numberToBytesBE$1,bytesToNumberBE:bytesToNumberBE$1,mod:mod$1},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})();function getPublicKey$2(t){if(t.length!==32)throw new Error("Private key must be 32 bytes");return schnorr$1.getPublicKey(t)}function sign(t,e){if(t.length!==32)throw new Error("Message must be 32 bytes");if(e.length!==32)throw new Error("Private key must be 32 bytes");return schnorr$1.sign(t,e)}function signHex(t,e){return bytesToHex$2(sign(t,e))}function verify(t,e,s){if(t.length!==64||e.length!==32||s.length!==32)return!1;try{return schnorr$1.verify(t,e,s)}catch{return!1}}function verifyHex(t,e,s){try{const r=hexToBytes$1(t),a=hexToBytes$1(s);return verify(r,e,a)}catch{return!1}}const sha256$2=sha256$1$1;async function getWebCrypto(){return typeof globalThis.crypto?.subtle<"u"?globalThis.crypto:(await __vitePreload(()=>import("./index-DNk-v9wP.js").then(e=>e.i),[])).webcrypto}const COMPRESSION_THRESHOLD=1024,COMPRESSION_PREFIX="gz:";function toBase64$1(t){if(typeof Buffer<"u")return Buffer.from(t).toString("base64");let e="";for(let s=0;s<t.length;s++)e+=String.fromCharCode(t[s]);return btoa(e)}function fromBase64$1$1(t){if(typeof Buffer<"u")return new Uint8Array(Buffer.from(t,"base64"));const e=atob(t),s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return s}function toBufferSource(t){const e=new ArrayBuffer(t.length);return new Uint8Array(e).set(t),e}async function compress(t){if(typeof process$1<"u"&&process$1.versions?.node){const{gzipSync:e}=await __vitePreload(async()=>{const{gzipSync:s}=await import("./index-DR5FAVvS.js").then(r=>r.i);return{gzipSync:s}},[]);return new Uint8Array(e(Buffer.from(t)))}else if(typeof CompressionStream<"u"){const e=new CompressionStream("gzip"),s=e.writable.getWriter();s.write(toBufferSource(t)),s.close();const r=[],a=e.readable.getReader();for(;;){const{done:u,value:f}=await a.read();if(u)break;r.push(f)}const o=r.reduce((u,f)=>u+f.length,0),l=new Uint8Array(o);let c=0;for(const u of r)l.set(u,c),c+=u.length;return l}throw new Error("GZIP compression not supported in this environment")}async function decompress(t){if(typeof process$1<"u"&&process$1.versions?.node){const{gunzipSync:e}=await __vitePreload(async()=>{const{gunzipSync:s}=await import("./index-DR5FAVvS.js").then(r=>r.i);return{gunzipSync:s}},[]);return new Uint8Array(e(Buffer.from(t)))}else if(typeof DecompressionStream<"u"){const e=new DecompressionStream("gzip"),s=e.writable.getWriter();s.write(toBufferSource(t)),s.close();const r=[],a=e.readable.getReader();for(;;){const{done:u,value:f}=await a.read();if(u)break;r.push(f)}const o=r.reduce((u,f)=>u+f.length,0),l=new Uint8Array(o);let c=0;for(const u of r)l.set(u,c),c+=u.length;return l}throw new Error("GZIP decompression not supported in this environment")}async function importKey(t){return(await getWebCrypto()).subtle.importKey("raw",toBufferSource(t),{name:"AES-CBC"},!1,["encrypt","decrypt"])}async function aesEncrypt(t,e,s){const r=await getWebCrypto(),a=await importKey(e),o=await r.subtle.encrypt({name:"AES-CBC",iv:toBufferSource(s)},a,toBufferSource(t));return new Uint8Array(o)}async function aesDecrypt(t,e,s){const r=await getWebCrypto(),a=await importKey(e),o=await r.subtle.decrypt({name:"AES-CBC",iv:toBufferSource(s)},a,toBufferSource(t));return new Uint8Array(o)}function deriveSharedSecret(t,e){if(t.length!==32)throw new Error("Private key must be 32 bytes");if(e.length!==32)throw new Error("Public key must be 32 bytes");const s=new Uint8Array(33);s[0]=2,s.set(e,1);const a=secp256k1$1.getSharedSecret(t,s).slice(1,33);return sha256$2(a)}function deriveSharedSecretHex(t,e){const s=hexToBytes$1(t),r=hexToBytes$1(e);return bytesToHex$2(deriveSharedSecret(s,r))}async function encrypt$1(t,e,s){let a=new TextEncoder().encode(t),o=!1,l=a;if(a.length>COMPRESSION_THRESHOLD){const m=await compress(a);m.length<a.length&&(l=new Uint8Array(m),o=!0)}const c=deriveSharedSecret(e,s),u=randomBytes(16),f=await aesEncrypt(l,c,u),d=toBase64$1(f),p=toBase64$1(u);return o?`${COMPRESSION_PREFIX}${d}?iv=${p}`:`${d}?iv=${p}`}async function encryptHex$1(t,e,s){const r=hexToBytes$1(e),a=hexToBytes$1(s);return encrypt$1(t,r,a)}async function decrypt$1(t,e,s){let r=t,a=!1;r.startsWith(COMPRESSION_PREFIX)&&(r=r.slice(COMPRESSION_PREFIX.length),a=!0);const o=r.split("?iv=");if(o.length!==2)throw new Error("Invalid encrypted content format");const l=o[0],c=o[1],u=fromBase64$1$1(l),f=fromBase64$1$1(c);if(f.length!==16)throw new Error("Invalid IV length");const d=deriveSharedSecret(e,s);let p=await aesDecrypt(u,d,f);return a&&(p=await decompress(p)),new TextDecoder().decode(p)}async function decryptHex$1(t,e,s){const r=hexToBytes$1(e),a=hexToBytes$1(s);return decrypt$1(t,r,a)}var nip04=Object.freeze({__proto__:null,decrypt:decrypt$1,decryptHex:decryptHex$1,deriveSharedSecret,deriveSharedSecretHex,encrypt:encrypt$1,encryptHex:encryptHex$1});function isBytes$2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function abool$1(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function anumber$2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function abytes$2(t,...e){if(!isBytes$2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function aexists$2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aoutput$2(t,e){abytes$2(t);const s=e.outputLen;if(t.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}function u32(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function clean$2(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function createView$2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function utf8ToBytes(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function toBytes(t){if(typeof t=="string")t=utf8ToBytes(t);else if(isBytes$2(t))t=copyBytes$1(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function checkOpts(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function equalBytes(t,e){if(t.length!==e.length)return!1;let s=0;for(let r=0;r<t.length;r++)s|=t[r]^e[r];return s===0}const wrapCipher=(t,e)=>{function s(r,...a){if(abytes$2(r),!isLE)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const d=a[0];if(!d)throw new Error("nonce / iv required");t.varSizeNonce?abytes$2(d):abytes$2(d,t.nonceLength)}const o=t.tagLength;o&&a[1]!==void 0&&abytes$2(a[1]);const l=e(r,...a),c=(d,p)=>{if(p!==void 0){if(d!==2)throw new Error("cipher output not supported");abytes$2(p)}};let u=!1;return{encrypt(d,p){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,abytes$2(d),c(l.encrypt.length,p),l.encrypt(d,p)},decrypt(d,p){if(abytes$2(d),o&&d.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return c(l.decrypt.length,p),l.decrypt(d,p)}}}return Object.assign(s,t),s};function getOutput(t,e,s=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(s&&!isAligned32$1(e))throw new Error("invalid output, must be aligned");return e}function setBigUint64(t,e,s,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,s,r);const a=BigInt(32),o=BigInt(4294967295),l=Number(s>>a&o),c=Number(s&o),u=4,f=0;t.setUint32(e+u,l,r),t.setUint32(e+f,c,r)}function u64Lengths(t,e,s){abool$1(s);const r=new Uint8Array(16),a=createView$2(r);return setBigUint64(a,0,BigInt(e),s),setBigUint64(a,8,BigInt(t),s),r}function isAligned32$1(t){return t.byteOffset%4===0}function copyBytes$1(t){return Uint8Array.from(t)}const _utf8ToBytes=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),sigma16=_utf8ToBytes("expand 16-byte k"),sigma32=_utf8ToBytes("expand 32-byte k"),sigma16_32=u32(sigma16),sigma32_32=u32(sigma32);function rotl(t,e){return t<<e|t>>>32-e}function isAligned32(t){return t.byteOffset%4===0}const BLOCK_LEN=64,BLOCK_LEN32=16,MAX_COUNTER=2**32-1,U32_EMPTY=new Uint32Array;function runCipher(t,e,s,r,a,o,l,c){const u=a.length,f=new Uint8Array(BLOCK_LEN),d=u32(f),p=isAligned32(a)&&isAligned32(o),m=p?u32(a):U32_EMPTY,y=p?u32(o):U32_EMPTY;for(let b=0;b<u;l++){if(t(e,s,r,d,l,c),l>=MAX_COUNTER)throw new Error("arx: counter overflow");const E=Math.min(BLOCK_LEN,u-b);if(p&&E===BLOCK_LEN){const C=b/4;if(b%4!==0)throw new Error("arx: invalid block position");for(let j=0,B;j<BLOCK_LEN32;j++)B=C+j,y[B]=m[B]^d[j];b+=BLOCK_LEN;continue}for(let C=0,j;C<E;C++)j=b+C,o[j]=a[j]^f[C];b+=E}}function createCipher(t,e){const{allowShortKeys:s,extendNonceFn:r,counterLength:a,counterRight:o,rounds:l}=checkOpts({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return anumber$2(a),anumber$2(l),abool$1(o),abool$1(s),(c,u,f,d,p=0)=>{abytes$2(c),abytes$2(u),abytes$2(f);const m=f.length;if(d===void 0&&(d=new Uint8Array(m)),abytes$2(d),anumber$2(p),p<0||p>=MAX_COUNTER)throw new Error("arx: counter overflow");if(d.length<m)throw new Error(`arx: output (${d.length}) is shorter than data (${m})`);const y=[];let b=c.length,E,C;if(b===32)y.push(E=copyBytes$1(c)),C=sigma32_32;else if(b===16&&s)E=new Uint8Array(32),E.set(c),E.set(c,16),C=sigma16_32,y.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${b}`);isAligned32(u)||y.push(u=copyBytes$1(u));const j=u32(E);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(C,j,u32(u.subarray(0,16)),j),u=u.subarray(16)}const B=16-a;if(B!==u.length)throw new Error(`arx: nonce must be ${B} or 16 bytes`);if(B!==12){const F=new Uint8Array(12);F.set(u,o?0:12-u.length),u=F,y.push(u)}const D=u32(u);return runCipher(t,C,j,D,f,d,p,l),clean$2(...y),d}}const u8to16=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Poly1305{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=toBytes(e),abytes$2(e,32);const s=u8to16(e,0),r=u8to16(e,2),a=u8to16(e,4),o=u8to16(e,6),l=u8to16(e,8),c=u8to16(e,10),u=u8to16(e,12),f=u8to16(e,14);this.r[0]=s&8191,this.r[1]=(s>>>13|r<<3)&8191,this.r[2]=(r>>>10|a<<6)&7939,this.r[3]=(a>>>7|o<<9)&8191,this.r[4]=(o>>>4|l<<12)&255,this.r[5]=l>>>1&8190,this.r[6]=(l>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let d=0;d<8;d++)this.pad[d]=u8to16(e,16+2*d)}process(e,s,r=!1){const a=r?0:2048,{h:o,r:l}=this,c=l[0],u=l[1],f=l[2],d=l[3],p=l[4],m=l[5],y=l[6],b=l[7],E=l[8],C=l[9],j=u8to16(e,s+0),B=u8to16(e,s+2),D=u8to16(e,s+4),F=u8to16(e,s+6),q=u8to16(e,s+8),V=u8to16(e,s+10),ee=u8to16(e,s+12),Q=u8to16(e,s+14);let W=o[0]+(j&8191),Z=o[1]+((j>>>13|B<<3)&8191),z=o[2]+((B>>>10|D<<6)&8191),O=o[3]+((D>>>7|F<<9)&8191),k=o[4]+((F>>>4|q<<12)&8191),v=o[5]+(q>>>1&8191),S=o[6]+((q>>>14|V<<2)&8191),N=o[7]+((V>>>11|ee<<5)&8191),R=o[8]+((ee>>>8|Q<<8)&8191),T=o[9]+(Q>>>5|a),M=0,I=M+W*c+Z*(5*C)+z*(5*E)+O*(5*b)+k*(5*y);M=I>>>13,I&=8191,I+=v*(5*m)+S*(5*p)+N*(5*d)+R*(5*f)+T*(5*u),M+=I>>>13,I&=8191;let $=M+W*u+Z*c+z*(5*C)+O*(5*E)+k*(5*b);M=$>>>13,$&=8191,$+=v*(5*y)+S*(5*m)+N*(5*p)+R*(5*d)+T*(5*f),M+=$>>>13,$&=8191;let A=M+W*f+Z*u+z*c+O*(5*C)+k*(5*E);M=A>>>13,A&=8191,A+=v*(5*b)+S*(5*y)+N*(5*m)+R*(5*p)+T*(5*d),M+=A>>>13,A&=8191;let L=M+W*d+Z*f+z*u+O*c+k*(5*C);M=L>>>13,L&=8191,L+=v*(5*E)+S*(5*b)+N*(5*y)+R*(5*m)+T*(5*p),M+=L>>>13,L&=8191;let Y=M+W*p+Z*d+z*f+O*u+k*c;M=Y>>>13,Y&=8191,Y+=v*(5*C)+S*(5*E)+N*(5*b)+R*(5*y)+T*(5*m),M+=Y>>>13,Y&=8191;let oe=M+W*m+Z*p+z*d+O*f+k*u;M=oe>>>13,oe&=8191,oe+=v*c+S*(5*C)+N*(5*E)+R*(5*b)+T*(5*y),M+=oe>>>13,oe&=8191;let J=M+W*y+Z*m+z*p+O*d+k*f;M=J>>>13,J&=8191,J+=v*u+S*c+N*(5*C)+R*(5*E)+T*(5*b),M+=J>>>13,J&=8191;let U=M+W*b+Z*y+z*m+O*p+k*d;M=U>>>13,U&=8191,U+=v*f+S*u+N*c+R*(5*C)+T*(5*E),M+=U>>>13,U&=8191;let G=M+W*E+Z*b+z*y+O*m+k*p;M=G>>>13,G&=8191,G+=v*d+S*f+N*u+R*c+T*(5*C),M+=G>>>13,G&=8191;let ae=M+W*C+Z*E+z*b+O*y+k*m;M=ae>>>13,ae&=8191,ae+=v*p+S*d+N*f+R*u+T*c,M+=ae>>>13,ae&=8191,M=(M<<2)+M|0,M=M+I|0,I=M&8191,M=M>>>13,$+=M,o[0]=I,o[1]=$,o[2]=A,o[3]=L,o[4]=Y,o[5]=oe,o[6]=J,o[7]=U,o[8]=G,o[9]=ae}finalize(){const{h:e,pad:s}=this,r=new Uint16Array(10);let a=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=a,a=e[c]>>>13,e[c]&=8191;e[0]+=a*5,a=e[0]>>>13,e[0]&=8191,e[1]+=a,a=e[1]>>>13,e[1]&=8191,e[2]+=a,r[0]=e[0]+5,a=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+a,a=r[c]>>>13,r[c]&=8191;r[9]-=8192;let o=(a^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)e[c]=e[c]&o|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let l=e[0]+s[0];e[0]=l&65535;for(let c=1;c<8;c++)l=(e[c]+s[c]|0)+(l>>>16)|0,e[c]=l&65535;clean$2(r)}update(e){aexists$2(this),e=toBytes(e),abytes$2(e);const{buffer:s,blockLen:r}=this,a=e.length;for(let o=0;o<a;){const l=Math.min(r-this.pos,a-o);if(l===r){for(;r<=a-o;o+=r)this.process(e,o);continue}s.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===r&&(this.process(s,0,!1),this.pos=0)}return this}destroy(){clean$2(this.h,this.r,this.buffer,this.pad)}digestInto(e){aexists$2(this),aoutput$2(e,this),this.finished=!0;const{buffer:s,h:r}=this;let{pos:a}=this;if(a){for(s[a++]=1;a<16;a++)s[a]=0;this.process(s,0,!0)}this.finalize();let o=0;for(let l=0;l<8;l++)e[o++]=r[l]>>>0,e[o++]=r[l]>>>8;return e}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const r=e.slice(0,s);return this.destroy(),r}}function wrapConstructorWithKey(t){const e=(r,a)=>t(a).update(toBytes(r)).digest(),s=t(new Uint8Array(32));return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=r=>t(r),e}const poly1305=wrapConstructorWithKey(t=>new Poly1305(t));function chachaCore(t,e,s,r,a,o=20){let l=t[0],c=t[1],u=t[2],f=t[3],d=e[0],p=e[1],m=e[2],y=e[3],b=e[4],E=e[5],C=e[6],j=e[7],B=a,D=s[0],F=s[1],q=s[2],V=l,ee=c,Q=u,W=f,Z=d,z=p,O=m,k=y,v=b,S=E,N=C,R=j,T=B,M=D,I=F,$=q;for(let L=0;L<o;L+=2)V=V+Z|0,T=rotl(T^V,16),v=v+T|0,Z=rotl(Z^v,12),V=V+Z|0,T=rotl(T^V,8),v=v+T|0,Z=rotl(Z^v,7),ee=ee+z|0,M=rotl(M^ee,16),S=S+M|0,z=rotl(z^S,12),ee=ee+z|0,M=rotl(M^ee,8),S=S+M|0,z=rotl(z^S,7),Q=Q+O|0,I=rotl(I^Q,16),N=N+I|0,O=rotl(O^N,12),Q=Q+O|0,I=rotl(I^Q,8),N=N+I|0,O=rotl(O^N,7),W=W+k|0,$=rotl($^W,16),R=R+$|0,k=rotl(k^R,12),W=W+k|0,$=rotl($^W,8),R=R+$|0,k=rotl(k^R,7),V=V+z|0,$=rotl($^V,16),N=N+$|0,z=rotl(z^N,12),V=V+z|0,$=rotl($^V,8),N=N+$|0,z=rotl(z^N,7),ee=ee+O|0,T=rotl(T^ee,16),R=R+T|0,O=rotl(O^R,12),ee=ee+O|0,T=rotl(T^ee,8),R=R+T|0,O=rotl(O^R,7),Q=Q+k|0,M=rotl(M^Q,16),v=v+M|0,k=rotl(k^v,12),Q=Q+k|0,M=rotl(M^Q,8),v=v+M|0,k=rotl(k^v,7),W=W+Z|0,I=rotl(I^W,16),S=S+I|0,Z=rotl(Z^S,12),W=W+Z|0,I=rotl(I^W,8),S=S+I|0,Z=rotl(Z^S,7);let A=0;r[A++]=l+V|0,r[A++]=c+ee|0,r[A++]=u+Q|0,r[A++]=f+W|0,r[A++]=d+Z|0,r[A++]=p+z|0,r[A++]=m+O|0,r[A++]=y+k|0,r[A++]=b+v|0,r[A++]=E+S|0,r[A++]=C+N|0,r[A++]=j+R|0,r[A++]=B+T|0,r[A++]=D+M|0,r[A++]=F+I|0,r[A++]=q+$|0}const chacha20=createCipher(chachaCore,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ZEROS16=new Uint8Array(16),updatePadded=(t,e)=>{t.update(e);const s=e.length%16;s&&t.update(ZEROS16.subarray(s))},ZEROS32=new Uint8Array(32);function computeTag(t,e,s,r,a){const o=t(e,s,ZEROS32),l=poly1305.create(o);a&&updatePadded(l,a),updatePadded(l,r);const c=u64Lengths(r.length,a?a.length:0,!0);l.update(c);const u=l.digest();return clean$2(o,c),u}const _poly1305_aead=t=>(e,s,r)=>({encrypt(o,l){const c=o.length;l=getOutput(c+16,l,!1),l.set(o);const u=l.subarray(0,-16);t(e,s,u,u,1);const f=computeTag(t,e,s,u,r);return l.set(f,c),clean$2(f),l},decrypt(o,l){l=getOutput(o.length-16,l,!1);const c=o.subarray(0,-16),u=o.subarray(-16),f=computeTag(t,e,s,c,r);if(!equalBytes(u,f))throw new Error("invalid tag");return l.set(o.subarray(0,-16)),t(e,s,l,l,1),clean$2(f),l}}),chacha20poly1305=wrapCipher({blockSize:64,nonceLength:12,tagLength:16},_poly1305_aead(chacha20));function extract$1(t,e,s){return ahash$2(t),s===void 0&&(s=new Uint8Array(t.outputLen)),hmac$2(t,toBytes$1(s),toBytes$1(e))}const HKDF_COUNTER$1=Uint8Array.from([0]),EMPTY_BUFFER$1=Uint8Array.of();function expand$1(t,e,s,r=32){ahash$2(t),anumber$1$1(r);const a=t.outputLen;if(r>255*a)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/a);s===void 0&&(s=EMPTY_BUFFER$1);const l=new Uint8Array(o*a),c=hmac$2.create(t,e),u=c._cloneInto(),f=new Uint8Array(c.outputLen);for(let d=0;d<o;d++)HKDF_COUNTER$1[0]=d+1,u.update(d===0?EMPTY_BUFFER$1:f).update(s).update(HKDF_COUNTER$1).digestInto(f),l.set(f,a*d),c._cloneInto(u);return c.destroy(),u.destroy(),clean$1$1(f,HKDF_COUNTER$1),l.slice(0,r)}const hkdf$1=(t,e,s,r,a)=>expand$1(t,extract$1(t,e,s),r,a),VERSION=2,NONCE_SIZE=24,MAC_SIZE=16,MIN_PADDED_LEN=32,MAX_MESSAGE_LEN=65535,HKDF_SALT=new TextEncoder().encode("nip44-v2");function deriveConversationKey(t,e){if(t.length!==32)throw new Error("Private key must be 32 bytes");if(e.length!==32)throw new Error("Public key must be 32 bytes");const s=computeSharedX(t,e),r=secp256k1$1.getPublicKey(t,!0).slice(1),a=createSortedKeysSalt(r,e);return hkdf$1(sha256$2,s,a,HKDF_SALT,32)}function deriveConversationKeyHex(t,e){const s=hexToBytes$1(t),r=hexToBytes$1(e);return bytesToHex$2(deriveConversationKey(s,r))}function computeSharedX(t,e){const s=new Uint8Array(33);return s[0]=2,s.set(e,1),secp256k1$1.getSharedSecret(t,s).slice(1,33)}function createSortedKeysSalt(t,e){return compareBytes(t,e)<=0?concatBytes$1(t,e):concatBytes$1(e,t)}function compareBytes(t,e){const s=Math.min(t.length,e.length);for(let r=0;r<s;r++){const a=t[r]-e[r];if(a!==0)return a}return t.length-e.length}function calcPaddedLen(t){if(t<=0)throw new Error("Message too short");if(t>MAX_MESSAGE_LEN)throw new Error("Message too long");if(t<=32)return 32;const e=1<<Math.ceil(Math.log2(t)),s=Math.max(32,e>>3);return Math.ceil(t/s)*s}function pad(t){const e=t.length;if(e<1)throw new Error("Message too short");if(e>MAX_MESSAGE_LEN)throw new Error("Message too long");const s=calcPaddedLen(e),r=new Uint8Array(2+s);return r[0]=e>>8&255,r[1]=e&255,r.set(t,2),r}function unpad(t){if(t.length<2+MIN_PADDED_LEN)throw new Error("Padded message too short");const e=t[0]<<8|t[1];if(e<1||e>MAX_MESSAGE_LEN)throw new Error(`Invalid message length: ${e}`);const s=calcPaddedLen(e);if(t.length!==2+s)throw new Error("Invalid padding");return t.slice(2,2+e)}function encrypt$2(t,e,s){const r=deriveConversationKey(e,s);return encryptWithKey(t,r)}function encryptWithKey(t,e){const r=new TextEncoder().encode(t);if(r.length>MAX_MESSAGE_LEN)throw new Error(`Message too long (max ${MAX_MESSAGE_LEN} bytes)`);const a=pad(r),o=randomBytes(NONCE_SIZE),l=hkdf$1(sha256$2,e,o,new Uint8Array(0),76),c=l.slice(0,32),u=l.slice(32,44),d=chacha20poly1305(c,u).encrypt(a),p=new Uint8Array(1+NONCE_SIZE+d.length);return p[0]=VERSION,p.set(o,1),p.set(d,1+NONCE_SIZE),toBase64(p)}function decrypt$2(t,e,s){const r=deriveConversationKey(e,s);return decryptWithKey(t,r)}function decryptWithKey(t,e){const s=fromBase64$3(t);if(s.length<1+NONCE_SIZE+MIN_PADDED_LEN+MAC_SIZE)throw new Error("Payload too short");if(s[0]!==VERSION)throw new Error(`Unsupported NIP-44 version: ${s[0]}`);const r=s.slice(1,1+NONCE_SIZE),a=s.slice(1+NONCE_SIZE),o=hkdf$1(sha256$2,e,r,new Uint8Array(0),76),l=o.slice(0,32),c=o.slice(32,44),f=chacha20poly1305(l,c).decrypt(a),d=unpad(f);return new TextDecoder().decode(d)}function encryptHex(t,e,s){const r=hexToBytes$1(e),a=hexToBytes$1(s);return encrypt$2(t,r,a)}function decryptHex(t,e,s){const r=hexToBytes$1(e),a=hexToBytes$1(s);return decrypt$2(t,r,a)}function toBase64(t){if(typeof Buffer<"u")return Buffer.from(t).toString("base64");let e="";for(let s=0;s<t.length;s++)e+=String.fromCharCode(t[s]);return btoa(e)}function fromBase64$3(t){if(typeof Buffer<"u")return new Uint8Array(Buffer.from(t,"base64"));const e=atob(t),s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return s}var nip44=Object.freeze({__proto__:null,VERSION,calcPaddedLen,decrypt:decrypt$2,decryptHex,decryptWithKey,deriveConversationKey,deriveConversationKeyHex,encrypt:encrypt$2,encryptHex,encryptWithKey,pad,unpad});class NostrKeyManager{privateKey;publicKey;cleared=!1;constructor(e){if(e.length!==32)throw new Error("Private key must be 32 bytes");this.privateKey=new Uint8Array(e),this.publicKey=getPublicKey$2(this.privateKey)}static fromPrivateKey(e){return new NostrKeyManager(e)}static fromPrivateKeyHex(e){const s=hexToBytes$1(e);return new NostrKeyManager(s)}static fromNsec(e){const s=decodeNsec(e);return new NostrKeyManager(s)}static generate(){const e=randomBytes(32);return new NostrKeyManager(e)}ensureNotCleared(){if(this.cleared)throw new Error("KeyManager has been cleared")}getPrivateKey(){return this.ensureNotCleared(),new Uint8Array(this.privateKey)}getPrivateKeyHex(){return this.ensureNotCleared(),bytesToHex$2(this.privateKey)}getNsec(){return this.ensureNotCleared(),encodeNsec(this.privateKey)}getPublicKey(){return this.ensureNotCleared(),new Uint8Array(this.publicKey)}getPublicKeyHex(){return this.ensureNotCleared(),bytesToHex$2(this.publicKey)}getNpub(){return this.ensureNotCleared(),encodeNpub(this.publicKey)}sign(e){return this.ensureNotCleared(),sign(e,this.privateKey)}signHex(e){return this.ensureNotCleared(),signHex(e,this.privateKey)}static verify(e,s,r){return verify(e,s,r)}static verifyHex(e,s,r){return verifyHex(e,s,r)}async encrypt(e,s){return this.ensureNotCleared(),encrypt$1(e,this.privateKey,s)}async encryptHex(e,s){this.ensureNotCleared();const r=hexToBytes$1(s);return encrypt$1(e,this.privateKey,r)}async decrypt(e,s){return this.ensureNotCleared(),decrypt$1(e,this.privateKey,s)}async decryptHex(e,s){this.ensureNotCleared();const r=hexToBytes$1(s);return decrypt$1(e,this.privateKey,r)}deriveSharedSecret(e){return this.ensureNotCleared(),deriveSharedSecret(this.privateKey,e)}encryptNip44(e,s){return this.ensureNotCleared(),encrypt$2(e,this.privateKey,s)}encryptNip44Hex(e,s){this.ensureNotCleared();const r=hexToBytes$1(s);return encrypt$2(e,this.privateKey,r)}decryptNip44(e,s){return this.ensureNotCleared(),decrypt$2(e,this.privateKey,s)}decryptNip44Hex(e,s){this.ensureNotCleared();const r=hexToBytes$1(s);return decrypt$2(e,this.privateKey,r)}deriveConversationKey(e){return this.ensureNotCleared(),deriveConversationKey(this.privateKey,e)}isMyPublicKey(e){return this.ensureNotCleared(),this.getPublicKeyHex()===e.toLowerCase()}clear(){this.privateKey.fill(0),this.cleared=!0}}let Event$1=class Oi{id;pubkey;created_at;kind;tags;content;sig;constructor(e){this.id=e.id,this.pubkey=e.pubkey,this.created_at=e.created_at,this.kind=e.kind,this.tags=e.tags,this.content=e.content,this.sig=e.sig}static create(e,s){const r=e.getPublicKeyHex(),a=s.created_at??Math.floor(Date.now()/1e3),o=Oi.calculateId(r,a,s.kind,s.tags,s.content),l=hexToBytes$1(o),c=e.signHex(l);return new Oi({id:o,pubkey:r,created_at:a,kind:s.kind,tags:s.tags,content:s.content,sig:c})}static calculateId(e,s,r,a,o){const l=JSON.stringify([0,e,s,r,a,o]),c=sha256$2(new TextEncoder().encode(l));return bytesToHex$2(c)}verify(){try{if(Oi.calculateId(this.pubkey,this.created_at,this.kind,this.tags,this.content)!==this.id)return!1;const s=hexToBytes$1(this.id),r=hexToBytes$1(this.sig),a=hexToBytes$1(this.pubkey);return verify(r,s,a)}catch{return!1}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(!Oi.isValidEventData(s))throw new Error("Invalid event data");return new Oi(s)}static isValidEventData(e){if(typeof e!="object"||e===null)return!1;const s=e;return typeof s.id=="string"&&typeof s.pubkey=="string"&&typeof s.created_at=="number"&&typeof s.kind=="number"&&Array.isArray(s.tags)&&typeof s.content=="string"&&typeof s.sig=="string"}toJSON(){return{id:this.id,pubkey:this.pubkey,created_at:this.created_at,kind:this.kind,tags:this.tags,content:this.content,sig:this.sig}}getTagValue(e){return this.tags.find(r=>r[0]===e)?.[1]}getTagValues(e){return this.tags.filter(s=>s[0]===e).map(s=>s[1]??"")}hasTag(e){return this.tags.some(s=>s[0]===e)}getTagEntryValues(e){const s=this.tags.find(r=>r[0]===e);return s?s.slice(1):[]}};class Filter{ids;authors;kinds;"#e";"#p";"#t";"#d";"#h";since;until;limit;constructor(e){e&&(e.ids&&(this.ids=[...e.ids]),e.authors&&(this.authors=[...e.authors]),e.kinds&&(this.kinds=[...e.kinds]),e["#e"]&&(this["#e"]=[...e["#e"]]),e["#p"]&&(this["#p"]=[...e["#p"]]),e["#t"]&&(this["#t"]=[...e["#t"]]),e["#d"]&&(this["#d"]=[...e["#d"]]),e["#h"]&&(this["#h"]=[...e["#h"]]),e.since!==void 0&&(this.since=e.since),e.until!==void 0&&(this.until=e.until),e.limit!==void 0&&(this.limit=e.limit))}static builder(){return new FilterBuilder}toJSON(){const e={};return this.ids&&this.ids.length>0&&(e.ids=this.ids),this.authors&&this.authors.length>0&&(e.authors=this.authors),this.kinds&&this.kinds.length>0&&(e.kinds=this.kinds),this["#e"]&&this["#e"].length>0&&(e["#e"]=this["#e"]),this["#p"]&&this["#p"].length>0&&(e["#p"]=this["#p"]),this["#t"]&&this["#t"].length>0&&(e["#t"]=this["#t"]),this["#d"]&&this["#d"].length>0&&(e["#d"]=this["#d"]),this["#h"]&&this["#h"].length>0&&(e["#h"]=this["#h"]),this.since!==void 0&&(e.since=this.since),this.until!==void 0&&(e.until=this.until),this.limit!==void 0&&(e.limit=this.limit),e}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;return new Filter(s)}}class FilterBuilder{data={};ids(e,...s){return Array.isArray(e)?this.data.ids=[...e]:this.data.ids=[e,...s],this}authors(e,...s){return Array.isArray(e)?this.data.authors=[...e]:this.data.authors=[e,...s],this}kinds(e,...s){return Array.isArray(e)?this.data.kinds=[...e]:this.data.kinds=[e,...s],this}eTags(e,...s){return Array.isArray(e)?this.data["#e"]=[...e]:this.data["#e"]=[e,...s],this}pTags(e,...s){return Array.isArray(e)?this.data["#p"]=[...e]:this.data["#p"]=[e,...s],this}tTags(e,...s){return Array.isArray(e)?this.data["#t"]=[...e]:this.data["#t"]=[e,...s],this}dTags(e,...s){return Array.isArray(e)?this.data["#d"]=[...e]:this.data["#d"]=[e,...s],this}hTags(e,...s){return Array.isArray(e)?this.data["#h"]=[...e]:this.data["#h"]=[e,...s],this}since(e){return this.data.since=e,this}until(e){return this.data.until=e,this}limit(e){return this.data.limit=e,this}build(){return new Filter(this.data)}}const PROFILE=0,TEXT_NOTE=1,RECOMMEND_RELAY=2,CONTACTS=3,ENCRYPTED_DM=4,DELETION=5,SEAL=13,CHAT_MESSAGE=14,READ_RECEIPT=15,REACTION=7,GIFT_WRAP=1059,RELAY_LIST=10002,AUTH=22242,APP_DATA=30078,AGENT_PROFILE=31111,AGENT_LOCATION=31112,TOKEN_TRANSFER=31113,FILE_METADATA=31114,PAYMENT_REQUEST=31115,PAYMENT_REQUEST_RESPONSE=31116;function isReplaceable(t){return t===0||t===3||t>=1e4&&t<2e4}function isEphemeral(t){return t>=2e4&&t<3e4}function isParameterizedReplaceable(t){return t>=3e4&&t<4e4}function getName(t){switch(t){case PROFILE:return"Profile";case TEXT_NOTE:return"Text Note";case RECOMMEND_RELAY:return"Recommend Relay";case CONTACTS:return"Contacts";case ENCRYPTED_DM:return"Encrypted DM";case DELETION:return"Deletion";case SEAL:return"Seal";case CHAT_MESSAGE:return"Chat Message";case READ_RECEIPT:return"Read Receipt";case REACTION:return"Reaction";case GIFT_WRAP:return"Gift Wrap";case RELAY_LIST:return"Relay List";case APP_DATA:return"App Data";case AGENT_PROFILE:return"Agent Profile";case AGENT_LOCATION:return"Agent Location";case TOKEN_TRANSFER:return"Token Transfer";case FILE_METADATA:return"File Metadata";case PAYMENT_REQUEST:return"Payment Request";case PAYMENT_REQUEST_RESPONSE:return"Payment Request Response";default:return isReplaceable(t)?`Replaceable (${t})`:isEphemeral(t)?`Ephemeral (${t})`:isParameterizedReplaceable(t)?`Parameterized Replaceable (${t})`:`Unknown (${t})`}}var EventKinds=Object.freeze({__proto__:null,AGENT_LOCATION,AGENT_PROFILE,APP_DATA,AUTH,CHAT_MESSAGE,CONTACTS,DELETION,ENCRYPTED_DM,FILE_METADATA,GIFT_WRAP,PAYMENT_REQUEST,PAYMENT_REQUEST_RESPONSE,PROFILE,REACTION,READ_RECEIPT,RECOMMEND_RELAY,RELAY_LIST,SEAL,TEXT_NOTE,TOKEN_TRANSFER,getName,isEphemeral,isParameterizedReplaceable,isReplaceable});const OPEN=1,CLOSED=3;async function createWebSocket(t){if(typeof WebSocket>"u")throw new Error("WebSocket not available in this environment");return new WebSocket(t)}function extractMessageData(t){if(typeof t.data=="string")return t.data;if(t.data instanceof ArrayBuffer)return new TextDecoder().decode(t.data);if(typeof Blob<"u"&&t.data instanceof Blob)throw new Error("Blob messages are not supported");return String(t.data)}const TIMESTAMP_RANDOMIZATION$1=2880*60;function createGiftWrap(t,e,s,r){const a=createRumor(t.getPublicKeyHex(),e,s,CHAT_MESSAGE,r?.replyToEventId),o=createSeal(t,e,a);return wrapSeal(o,e)}function createReadReceipt(t,e,s){const r=[["p",e],["e",s]],a=Math.floor(Date.now()/1e3),o={id:"",pubkey:t.getPublicKeyHex(),created_at:a,kind:READ_RECEIPT,tags:r,content:""};o.id=computeRumorId(o);const l=createSeal(t,e,o);return wrapSeal(l,e)}function unwrap(t,e){if(t.kind!==GIFT_WRAP)throw new Error(`Event is not a gift wrap (kind ${t.kind})`);const s=t.pubkey,r=hexToBytes$1(s),a=decrypt$2(t.content,e.getPrivateKey(),r),o=JSON.parse(a);if(o.kind!==SEAL)throw new Error(`Inner event is not a seal (kind ${o.kind})`);const l=o.pubkey,c=hexToBytes$1(o.id),u=hexToBytes$1(o.sig),f=hexToBytes$1(l);if(!verify(u,c,f))throw new Error("Seal signature verification failed");const d=decrypt$2(o.content,e.getPrivateKey(),f),p=JSON.parse(d),m=getTagValue(p.tags,"e");return{eventId:t.id,senderPubkey:l,recipientPubkey:e.getPublicKeyHex(),content:p.content,timestamp:p.created_at,kind:p.kind,replyToEventId:m}}function createRumor(t,e,s,r,a){const o=[["p",e]];a&&o.push(["e",a,"","reply"]);const l=Math.floor(Date.now()/1e3),c={id:"",pubkey:t,created_at:l,kind:r,tags:o,content:s};return c.id=computeRumorId(c),c}function computeRumorId(t){const e=JSON.stringify([0,t.pubkey,t.created_at,t.kind,t.tags,t.content]),s=sha256$2(new TextEncoder().encode(e));return bytesToHex$2(s)}function createSeal(t,e,s){const r=JSON.stringify(s),a=hexToBytes$1(e),o=encrypt$2(r,t.getPrivateKey(),a),l=t.getPublicKeyHex(),c=randomizeTimestamp(),u=SEAL,f=[],d=o,p=Event$1.calculateId(l,c,u,f,d),m=hexToBytes$1(p),y=t.signHex(m);return new Event$1({id:p,pubkey:l,created_at:c,kind:u,tags:f,content:d,sig:y})}function wrapSeal(t,e){const s=NostrKeyManager.generate(),r=JSON.stringify(t.toJSON()),a=hexToBytes$1(e),o=encrypt$2(r,s.getPrivateKey(),a),l=s.getPublicKeyHex(),c=randomizeTimestamp(),u=GIFT_WRAP,f=[["p",e]],d=o,p=Event$1.calculateId(l,c,u,f,d),m=hexToBytes$1(p),y=s.signHex(m);return s.clear(),new Event$1({id:p,pubkey:l,created_at:c,kind:u,tags:f,content:d,sig:y})}function randomizeTimestamp(){const t=Math.floor(Date.now()/1e3),e=Math.floor(Math.random()*2*TIMESTAMP_RANDOMIZATION$1)-TIMESTAMP_RANDOMIZATION$1;return t+e}function getTagValue(t,e){return t.find(r=>r[0]===e)?.[1]}var nip17=Object.freeze({__proto__:null,createGiftWrap,createReadReceipt,unwrap});const CONNECTION_TIMEOUT_MS=3e4,DEFAULT_QUERY_TIMEOUT_MS=5e3,DEFAULT_RECONNECT_INTERVAL_MS=1e3,DEFAULT_MAX_RECONNECT_INTERVAL_MS=3e4,DEFAULT_PING_INTERVAL_MS=3e4,AUTH_RESUBSCRIBE_DELAY_MS=100;class NostrClient{keyManager;relays=new Map;subscriptions=new Map;eventQueue=[];pendingOks=new Map;subscriptionCounter=0;closed=!1;queryTimeoutMs;autoReconnect;reconnectIntervalMs;maxReconnectIntervalMs;pingIntervalMs;connectionListeners=[];constructor(e,s){this.keyManager=e,this.queryTimeoutMs=s?.queryTimeoutMs??DEFAULT_QUERY_TIMEOUT_MS,this.autoReconnect=s?.autoReconnect??!0,this.reconnectIntervalMs=s?.reconnectIntervalMs??DEFAULT_RECONNECT_INTERVAL_MS,this.maxReconnectIntervalMs=s?.maxReconnectIntervalMs??DEFAULT_MAX_RECONNECT_INTERVAL_MS,this.pingIntervalMs=s?.pingIntervalMs??DEFAULT_PING_INTERVAL_MS}addConnectionListener(e){this.connectionListeners.push(e)}removeConnectionListener(e){const s=this.connectionListeners.indexOf(e);s!==-1&&this.connectionListeners.splice(s,1)}emitConnectionEvent(e,s,r){for(const a of this.connectionListeners)try{switch(e){case"connect":a.onConnect?.(s);break;case"disconnect":a.onDisconnect?.(s,r);break;case"reconnecting":a.onReconnecting?.(s,r);break;case"reconnected":a.onReconnected?.(s);break}}catch{}}getKeyManager(){return this.keyManager}getQueryTimeout(){return this.queryTimeoutMs}setQueryTimeout(e){this.queryTimeoutMs=e}async connect(...e){if(this.closed)throw new Error("Client has been disconnected");const s=e.map(r=>this.connectToRelay(r));await Promise.all(s)}async connectToRelay(e,s=!1){const r=this.relays.get(e);if(!r?.connected)return new Promise((a,o)=>{const l=setTimeout(()=>{o(new Error(`Connection to ${e} timed out`))},CONNECTION_TIMEOUT_MS);createWebSocket(e).then(c=>{const u={url:e,socket:c,connected:!1,reconnecting:!1,reconnectAttempts:0,reconnectTimer:null,pingTimer:null,lastPongTime:Date.now(),wasConnected:r?.wasConnected??!1};c.onopen=()=>{clearTimeout(l),u.connected=!0,u.reconnectAttempts=0,u.lastPongTime=Date.now(),this.relays.set(e,u),s&&u.wasConnected?this.emitConnectionEvent("reconnected",e):this.emitConnectionEvent("connect",e),u.wasConnected=!0,this.startPingTimer(e),this.resubscribeAll(e),this.flushEventQueue(),a()},c.onmessage=f=>{try{const d=extractMessageData(f),p=this.relays.get(e);p&&(p.lastPongTime=Date.now()),this.handleRelayMessage(e,d)}catch(d){console.error(`Error handling message from ${e}:`,d)}},c.onclose=f=>{const d=u.connected;if(u.connected=!1,this.stopPingTimer(e),d){const p=f?.reason||"Connection closed";this.emitConnectionEvent("disconnect",e,p)}!this.closed&&this.autoReconnect&&!u.reconnecting&&this.scheduleReconnect(e)},c.onerror=f=>{u.connected||(clearTimeout(l),o(new Error(`Failed to connect to ${e}: ${f.message||"Unknown error"}`)))},this.relays.set(e,u)}).catch(c=>{clearTimeout(l),o(c)})})}scheduleReconnect(e){const s=this.relays.get(e);if(!s||this.closed||!this.autoReconnect)return;s.reconnectTimer&&clearTimeout(s.reconnectTimer),s.reconnecting=!0,s.reconnectAttempts++;const a=this.reconnectIntervalMs*Math.pow(2,s.reconnectAttempts-1),o=Math.min(a,this.maxReconnectIntervalMs);this.emitConnectionEvent("reconnecting",e,s.reconnectAttempts),s.reconnectTimer=setTimeout(async()=>{if(!this.closed){s.reconnectTimer=null;try{s.reconnecting=!1,await this.connectToRelay(e,!0)}catch{!this.closed&&this.autoReconnect&&this.scheduleReconnect(e)}}},o)}startPingTimer(e){if(this.pingIntervalMs<=0)return;const s=this.relays.get(e);s&&(this.stopPingTimer(e),s.pingTimer=setInterval(()=>{if(!s.connected||!s.socket){this.stopPingTimer(e);return}const r=Date.now()-s.lastPongTime;if(r>this.pingIntervalMs*2){console.warn(`Relay ${e} appears stale (no response for ${r}ms), reconnecting...`),this.stopPingTimer(e);try{s.socket.close()}catch{}return}try{const a="ping",o=JSON.stringify(["CLOSE",a]);s.socket.send(o);const l=JSON.stringify(["REQ",a,{limit:1}]);s.socket.send(l)}catch{console.warn(`Ping to ${e} failed, reconnecting...`),this.stopPingTimer(e);try{s.socket.close()}catch{}}},this.pingIntervalMs))}stopPingTimer(e){const s=this.relays.get(e);s?.pingTimer&&(clearInterval(s.pingTimer),s.pingTimer=null)}resubscribeAll(e){const s=this.relays.get(e);if(!(!s?.socket||!s.connected))for(const[r,a]of this.subscriptions){const o=JSON.stringify(["REQ",r,a.filter.toJSON()]);s.socket.send(o)}}flushEventQueue(){const e=[...this.eventQueue];this.eventQueue=[];for(const s of e)this.broadcastEvent(s.event).then(()=>s.resolve(s.event.id)).catch(s.reject)}handleRelayMessage(e,s){try{const r=JSON.parse(s);if(!Array.isArray(r)||r.length<2)return;switch(r[0]){case"EVENT":this.handleEventMessage(r);break;case"OK":this.handleOkMessage(r);break;case"EOSE":this.handleEOSEMessage(r);break;case"NOTICE":this.handleNoticeMessage(r);break;case"CLOSED":this.handleClosedMessage(r);break;case"AUTH":this.handleAuthMessage(e,r);break}}catch{}}handleEventMessage(e){if(e.length<3)return;const s=e[1],r=e[2],a=this.subscriptions.get(s);if(a)try{const o=Event$1.fromJSON(r);a.listener.onEvent(o)}catch{}}handleOkMessage(e){if(e.length<4)return;const s=e[1],r=e[2],a=e[3],o=this.pendingOks.get(s);o&&(clearTimeout(o.timer),this.pendingOks.delete(s),r?o.resolve(s):o.reject(new Error(`Event rejected: ${a}`)))}handleEOSEMessage(e){if(e.length<2)return;const s=e[1],r=this.subscriptions.get(s);r?.listener.onEndOfStoredEvents&&r.listener.onEndOfStoredEvents(s)}handleNoticeMessage(e){if(e.length<2)return;const s=e[1];console.warn("Relay notice:",s)}handleClosedMessage(e){if(e.length<3)return;const s=e[1],r=e[2],a=this.subscriptions.get(s);a?.listener.onError&&a.listener.onError(s,`Subscription closed: ${r}`)}handleAuthMessage(e,s){if(s.length<2)return;const r=s[1],a=this.relays.get(e);if(!a?.socket||!a.connected)return;const o=Event$1.create(this.keyManager,{kind:AUTH,tags:[["relay",e],["challenge",r]],content:""}),l=JSON.stringify(["AUTH",o.toJSON()]);a.socket.send(l),setTimeout(()=>{this.resubscribeAll(e)},AUTH_RESUBSCRIBE_DELAY_MS)}disconnect(){this.closed=!0;for(const[,e]of this.pendingOks)clearTimeout(e.timer),e.reject(new Error("Client disconnected"));this.pendingOks.clear();for(const e of this.eventQueue)e.reject(new Error("Client disconnected"));this.eventQueue=[];for(const[e,s]of this.relays)s.pingTimer&&(clearInterval(s.pingTimer),s.pingTimer=null),s.reconnectTimer&&(clearTimeout(s.reconnectTimer),s.reconnectTimer=null),s.socket&&s.socket.readyState!==CLOSED&&s.socket.close(1e3,"Client disconnected"),this.emitConnectionEvent("disconnect",e,"Client disconnected");this.relays.clear(),this.subscriptions.clear()}isConnected(){for(const[,e]of this.relays)if(e.connected)return!0;return!1}getConnectedRelays(){const e=new Set;for(const[s,r]of this.relays)r.connected&&e.add(s);return e}async publishEvent(e){if(this.closed)throw new Error("Client has been disconnected");return this.isConnected()?this.broadcastEvent(e):new Promise((s,r)=>{this.eventQueue.push({event:e,timestamp:Date.now(),resolve:s,reject:r})})}async broadcastEvent(e){const s=JSON.stringify(["EVENT",e.toJSON()]);let r=!1;for(const[,a]of this.relays)a.connected&&a.socket?.readyState===OPEN&&(a.socket.send(s),r=!0);if(!r)throw new Error("No connected relays");return new Promise((a,o)=>{const l=setTimeout(()=>{this.pendingOks.delete(e.id),a(e.id)},5e3);this.pendingOks.set(e.id,{resolve:a,reject:o,timer:l})})}async publishEncryptedMessage(e,s){const r=await this.keyManager.encryptHex(s,e),a=Event$1.create(this.keyManager,{kind:ENCRYPTED_DM,tags:[["p",e]],content:r});return this.publishEvent(a)}async sendTokenTransfer(e,s,r){const o=await(await Promise.resolve().then(function(){return TokenTransferProtocol})).createTokenTransferEvent(this.keyManager,e,s,r);return this.publishEvent(o)}async sendPaymentRequest(e,s){const a=await(await Promise.resolve().then(function(){return PaymentRequestProtocol})).createPaymentRequestEvent(this.keyManager,e,s);return this.publishEvent(a)}async sendPaymentRequestResponse(e,s){const r=await Promise.resolve().then(function(){return PaymentRequestProtocol}),a=await r.createPaymentRequestResponseEvent(this.keyManager,e,{requestId:s.requestId,originalEventId:s.originalEventId,status:s.status==="DECLINED"?r.ResponseStatus.DECLINED:r.ResponseStatus.EXPIRED,reason:s.reason});return this.publishEvent(a)}async sendPaymentRequestDecline(e,s,r,a){return this.sendPaymentRequestResponse(e,{requestId:r,originalEventId:s,status:"DECLINED",reason:a})}async publishNametagBinding(e,s){const a=await(await Promise.resolve().then(function(){return NametagBinding})).createBindingEvent(this.keyManager,e,s);try{return await this.publishEvent(a),!0}catch{return!1}}subscribe(e,s,r){let a,o,l;typeof e=="string"?(a=e,o=s,l=r):(a=`sub_${++this.subscriptionCounter}`,o=e,l=s),this.subscriptions.set(a,{filter:o,listener:l});const c=JSON.stringify(["REQ",a,o.toJSON()]);for(const[,u]of this.relays)u.connected&&u.socket?.readyState===OPEN&&u.socket.send(c);return a}unsubscribe(e){if(!this.subscriptions.has(e))return;this.subscriptions.delete(e);const s=JSON.stringify(["CLOSE",e]);for(const[,r]of this.relays)r.connected&&r.socket?.readyState===OPEN&&r.socket.send(s)}async queryPubkeyByNametag(e){const r=(await Promise.resolve().then(function(){return NametagBinding})).createNametagToPubkeyFilter(e);return new Promise(a=>{const o=setTimeout(()=>{this.unsubscribe(u),a(null)},this.queryTimeoutMs);let l=null,c=0;const u=this.subscribe(r,{onEvent:f=>{f.created_at>c&&(c=f.created_at,l=f.pubkey)},onEndOfStoredEvents:()=>{clearTimeout(o),this.unsubscribe(u),a(l)}})})}async createAndPublishEvent(e){const s=Event$1.create(this.keyManager,e);return this.publishEvent(s)}async sendPrivateMessage(e,s,r){const a=createGiftWrap(this.keyManager,e,s,r);return this.publishEvent(a)}async sendPrivateMessageToNametag(e,s,r){const a=await this.queryPubkeyByNametag(e);if(!a)throw new Error(`Nametag not found: ${e}`);return this.sendPrivateMessage(a,s,r)}async sendReadReceipt(e,s){const r=createReadReceipt(this.keyManager,e,s);return this.publishEvent(r)}unwrapPrivateMessage(e){return unwrap(e,this.keyManager)}}var metadata={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:48|5[0-3579]|[6-9])|7(?:20|32|8)|[89]","(?:31|4)6|51|6(?:485|5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:241|349)0\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|[34]\\d\\d)|91(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79]))))\\d{3}|(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8])|8(?:55|6[0-8]|[78]\\d|9[02-9]))\\d{6}",[9]],["4(?:79[01]|83[0-36-9]|95[0-3])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-47-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","(?:[025-7]\\d|44)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[024-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:01\\d|8)\\d{7}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["0"]]]],BL:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","[1-467]\\d{9,10}|55[0-46-9]\\d{8}|[34]\\d{7}|55\\d{7,8}|(?:5[0-46-9]|[89]\\d)\\d{7,9}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37|86)","300|4(?:0(?:0|20)|370|864)"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[178]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-6]|7[246]|8[2-4]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|[78]"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","[2-9]\\d{9}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|5[07]|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:2[125-9]|33|44|66|77|88)|6(?:22|33))[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-36-9]|95[0-3])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-47-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["60|809"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9(?:10|[2-9])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-8]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:46|60\\d\\d)\\d{6}|(?:1\\d|[39])\\d{9}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["46"]],["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|9[14]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-36-9]|95[0-3])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-47-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|3[13])"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,"0|180020",0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-5])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|5[01]))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94\\d|7093)\\d{5}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0|180020","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","[2-69]\\d{8}|80\\d{5,7}|[1-79]\\d{7}|6\\d{6}",[7,8,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-589]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0|180020","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|8(?:28[235-7]|3))|73179|807(?:1|9[1-3])|(?:1552|6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689])\\d|8(?:[14-6]\\d|2[0-79]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,11}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[03]"]]],0,0,0,0,0,0,[["0(?:669[0-79]\\d{1,6}|831\\d{2,8})|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[2356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0|180020","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|427|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[47]"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[25-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]","3|4(?:2(?:0|9[02-69])|7(?:0[019]|1))|6[1-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[25-9]"],"0$1"]],"0",0,"(000[2569]\\d{4,6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33622|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["3"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-6]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[2457]\\d|33|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|78|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2679]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:[19]|2[2-46-9]|3[3-9])|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:(?:18|4[0679]|5[03])\\d|2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9]))\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[016-8]\\d|2[0-8]|5[0-5]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|[67]\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[67]"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["4(?:[2-46]|5[3-5])|5|6(?:[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-5]|(?:60|86)[23]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|452|678|86","[12]|452|6788|86"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","(?:596\\d|7091)\\d{5}|(?:69|[89]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]|8(?:0[6-9]|[36])"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:20|9\\d)\\d{8}|[78]\\d{9,13}",[10,11,12,13,14],[["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:222|444|(?:55|8\\d)\\d|666|777|999)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[24-9]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|8\\d\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[136]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","709\\d{6}|(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["(?:69(?:2\\d\\d|3(?:[06][0-6]|1[0-3]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))|7092[0-3])\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-6]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,0,[["336(?:[013-9]\\d|2[013-9])\\d{5}|(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15-7]|6[0-35-79]|7[1-37-9]))\\d{7}",[10]],["9\\d{9}",[10]],["8(?:0[04]|108\\d{3})\\d{7}"],["80[39]\\d{7}",[10]],["808\\d{7}",[10]]],"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","(?:[15]\\d|800|92)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|7[67]|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|[6-8]\\d|90)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-9]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[25-7]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[25-7]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-359]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-4]|5[1-3]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[59]"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|30|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[236-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:[0-57-9]\\d|66)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["\\d"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["3052(?:0[0-8]|[1-9]\\d)\\d{4}|(?:2742|305[3-9])\\d{6}|(?:472|983)[2-47-9]\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-269])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[0378]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[0168]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-3589]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|2\\d{3,4}|(?:[49]\\d|80)\\d{5}",[4,5,6,7,8,9,10,11,12,13],[["(\\d{4,5})","$1",["21"]],["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-9]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72|8\\d{4})\\d{4}|[89]\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[47-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","7093\\d{5}|(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["(?:639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])|7093[5-7])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|[579]\\d|63)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[579]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[235-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"],0,0,0,0,0,0,["2\\d{8}",[9]]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function withMetadataArgument(t,e){var s=Array.prototype.slice.call(e);return s.push(metadata),t.apply(this,s)}function compare(t,e){t=t.split("-"),e=e.split("-");for(var s=t[0].split("."),r=e[0].split("."),a=0;a<3;a++){var o=Number(s[a]),l=Number(r[a]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return t[1]&&e[1]?t[1]>e[1]?1:t[1]<e[1]?-1:0:!t[1]&&e[1]?1:t[1]&&!e[1]?-1:0}var objectConstructor={}.constructor;function isObject$1(t){return t!=null&&t.constructor===objectConstructor}function _typeof$6(t){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(t)}function _classCallCheck$2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey$5(r.key),r)}}function _createClass$2(t,e,s){return e&&_defineProperties$1(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey$5(t){var e=_toPrimitive$5(t,"string");return _typeof$6(e)=="symbol"?e:e+""}function _toPrimitive$5(t,e){if(_typeof$6(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(_typeof$6(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var V3="1.2.0",V4="1.7.35",DEFAULT_EXT_PREFIX=" ext. ",CALLING_CODE_REG_EXP=/^\d+$/,Metadata=(function(){function t(e){_classCallCheck$2(this,t),validateMetadata(e),this.metadata=e,setVersion.call(this,e)}return _createClass$2(t,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(s){return s!=="001"})}},{key:"getCountryMetadata",value:function(s){return this.metadata.countries[s]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(s){return this.getCountryMetadata(s)!==void 0}},{key:"hasCallingCode",value:function(s){if(this.getCountryCodesForCallingCode(s))return!0;if(this.nonGeographic()){if(this.nonGeographic()[s])return!0}else{var r=this.countryCallingCodes()[s];if(r&&r.length===1&&r[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(s){return this.nonGeographic()?!!this.nonGeographic()[s]:!this.getCountryCodesForCallingCode(s)}},{key:"country",value:function(s){return this.selectNumberingPlan(s)}},{key:"selectNumberingPlan",value:function(s,r){if(s&&CALLING_CODE_REG_EXP.test(s)&&(r=s,s=null),s&&s!=="001"){if(!this.hasCountry(s))throw new Error("Unknown country: ".concat(s));this.numberingPlan=new NumberingPlan(this.getCountryMetadata(s),this)}else if(r){if(!this.hasCallingCode(r))throw new Error("Unknown calling code: ".concat(r));this.numberingPlan=new NumberingPlan(this.getNumberingPlanMetadata(r),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(s){var r=this.countryCallingCodes()[s];if(r)return r.length===1&&r[0].length===3?void 0:r}},{key:"getCountryCodeForCallingCode",value:function(s){var r=this.getCountryCodesForCallingCode(s);if(r)return r[0]}},{key:"getNumberingPlanMetadata",value:function(s){var r=this.getCountryCodeForCallingCode(s);if(r)return this.getCountryMetadata(r);if(this.nonGeographic()){var a=this.nonGeographic()[s];if(a)return a}else{var o=this.countryCallingCodes()[s];if(o&&o.length===1&&o[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(s){return this.numberingPlan.type(s)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(s){return this.selectNumberingPlan(s)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}])})(),NumberingPlan=(function(){function t(e,s){_classCallCheck$2(this,t),this.globalMetadataObject=s,this.metadata=e,setVersion.call(this,s.metadata)}return _createClass$2(t,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(s){return s[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var s=this,r=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return r.map(function(a){return new Format(a,s)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(s){return s[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(s){if(this.hasTypes()&&getType(this.types(),s))return new Type(getType(this.types(),s),this)}},{key:"ext",value:function(){return this.v1||this.v2?DEFAULT_EXT_PREFIX:this.metadata[13]||DEFAULT_EXT_PREFIX}}])})(),Format=(function(){function t(e,s){_classCallCheck$2(this,t),this._format=e,this.metadata=s}return _createClass$2(t,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!FIRST_GROUP_ONLY_PREFIX_PATTERN.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}])})(),FIRST_GROUP_ONLY_PREFIX_PATTERN=/^\(?\$1\)?$/,Type=(function(){function t(e,s){_classCallCheck$2(this,t),this.type=e,this.metadata=s}return _createClass$2(t,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}])})();function getType(t,e){switch(e){case"FIXED_LINE":return t[0];case"MOBILE":return t[1];case"TOLL_FREE":return t[2];case"PREMIUM_RATE":return t[3];case"PERSONAL_NUMBER":return t[4];case"VOICEMAIL":return t[5];case"UAN":return t[6];case"PAGER":return t[7];case"VOIP":return t[8];case"SHARED_COST":return t[9]}}function validateMetadata(t){if(!t)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!isObject$1(t)||!isObject$1(t.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(isObject$1(t)?"an object of shape: { "+Object.keys(t).join(", ")+" }":"a "+typeOf(t)+": "+t,"."))}var typeOf=function t(e){return _typeof$6(e)};function getCountryCallingCode(t,e){if(e=new Metadata(e),e.hasCountry(t))return e.selectNumberingPlan(t).countryCallingCode();throw new Error("Unknown country: ".concat(t))}function isSupportedCountry(t,e){return e.countries.hasOwnProperty(t)}function setVersion(t){var e=t.version;typeof e=="number"?(this.v1=e===1,this.v2=e===2,this.v3=e===3,this.v4=e===4):e?compare(e,V3)===-1?this.v2=!0:compare(e,V4)===-1?this.v3=!0:this.v4=!0:this.v1=!0}function checkNumberLength(t,e,s){return checkNumberLengthForType(t,e,void 0,s)}function checkNumberLengthForType(t,e,s,r){e&&(r=new Metadata(r.metadata),r.selectNumberingPlan(e));var a=r.type(s),o=a&&a.possibleLengths()||r.possibleLengths();if(!o)return"IS_POSSIBLE";var l=t.length,c=o[0];return c===l?"IS_POSSIBLE":c>l?"TOO_SHORT":o[o.length-1]<l?"TOO_LONG":o.indexOf(l,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function isPossiblePhoneNumber(t,e,s){if(e===void 0&&(e={}),s=new Metadata(s),e.v2){if(!t.countryCallingCode)throw new Error("Invalid phone number object passed");s.selectNumberingPlan(t.countryCallingCode)}else{if(!t.phone)return!1;if(t.country){if(!s.hasCountry(t.country))throw new Error("Unknown country: ".concat(t.country));s.selectNumberingPlan(t.country)}else{if(!t.countryCallingCode)throw new Error("Invalid phone number object passed");s.selectNumberingPlan(t.countryCallingCode)}}if(s.possibleLengths())return isPossibleNumber(t.phone||t.nationalNumber,t.country,s);if(t.countryCallingCode&&s.isNonGeographicCallingCode(t.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function isPossibleNumber(t,e,s){return checkNumberLength(t,e,s)==="IS_POSSIBLE"}function matchesEntirely(t,e){return t=t||"",new RegExp("^(?:"+e+")$").test(t)}function _createForOfIteratorHelperLoose$2(t,e){var s=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s)return(s=s.call(t)).next.bind(s);if(Array.isArray(t)||(s=_unsupportedIterableToArray$3(t))||e){s&&(t=s);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$3(t,e);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray$3(t,e):void 0}}function _arrayLikeToArray$3(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,r=Array(e);s<e;s++)r[s]=t[s];return r}var NON_FIXED_LINE_PHONE_TYPES=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function getNumberType(t,e,s){if(e=e||{},!(!t.country&&!t.countryCallingCode)){s=new Metadata(s),s.selectNumberingPlan(t.country,t.countryCallingCode);var r=e.v2?t.nationalNumber:t.phone;if(matchesEntirely(r,s.nationalNumberPattern())){if(isNumberTypeEqualTo(r,"FIXED_LINE",s))return s.type("MOBILE")&&s.type("MOBILE").pattern()===""||!s.type("MOBILE")||isNumberTypeEqualTo(r,"MOBILE",s)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var a=_createForOfIteratorHelperLoose$2(NON_FIXED_LINE_PHONE_TYPES),o;!(o=a()).done;){var l=o.value;if(isNumberTypeEqualTo(r,l,s))return l}}}}function isNumberTypeEqualTo(t,e,s){return e=s.type(e),!e||!e.pattern()||e.possibleLengths()&&e.possibleLengths().indexOf(t.length)<0?!1:matchesEntirely(t,e.pattern())}function isValidNumber(t,e,s){if(e=e||{},s=new Metadata(s),s.selectNumberingPlan(t.country,t.countryCallingCode),s.hasTypes())return getNumberType(t,e,s.metadata)!==void 0;var r=e.v2?t.nationalNumber:t.phone;return matchesEntirely(r,s.nationalNumberPattern())}function getPossibleCountriesForNumber(t,e,s){var r=new Metadata(s),a=r.getCountryCodesForCallingCode(t);return a?a.filter(function(o){return couldNationalNumberBelongToCountry(e,o,s)}):[]}function couldNationalNumberBelongToCountry(t,e,s){var r=new Metadata(s);return r.selectNumberingPlan(e),r.numberingPlan.possibleLengths().indexOf(t.length)>=0}var MIN_LENGTH_FOR_NSN=2,MAX_LENGTH_FOR_NSN=17,MAX_LENGTH_COUNTRY_CODE=3,VALID_DIGITS="0-9---",DASHES="--",SLASHES="/",DOTS=".",WHITESPACE=" ",BRACKETS="()\\[\\]",TILDES="~",VALID_PUNCTUATION="".concat(DASHES).concat(SLASHES).concat(DOTS).concat(WHITESPACE).concat(BRACKETS).concat(TILDES),PLUS_CHARS="+",CAPTURING_DIGIT_PATTERN=new RegExp("(["+VALID_DIGITS+"])");function stripIddPrefix(t,e,s,r){if(e){var a=new Metadata(r);a.selectNumberingPlan(e,s);var o=new RegExp(a.IDDPrefix());if(t.search(o)===0){t=t.slice(t.match(o)[0].length);var l=t.match(CAPTURING_DIGIT_PATTERN);if(!(l&&l[1]!=null&&l[1].length>0&&l[1]==="0"))return t}}}function extractNationalNumberFromPossiblyIncompleteNumber(t,e){if(t&&e.numberingPlan.nationalPrefixForParsing()){var s=new RegExp("^(?:"+e.numberingPlan.nationalPrefixForParsing()+")"),r=s.exec(t);if(r){var a,o,l=r.length-1,c=l>0&&r[l];if(e.nationalPrefixTransformRule()&&c)a=t.replace(s,e.nationalPrefixTransformRule()),l>1&&(o=r[1]);else{var u=r[0];a=t.slice(u.length),c&&(o=r[1])}var f;if(c){var d=t.indexOf(r[1]),p=t.slice(0,d);p===e.numberingPlan.nationalPrefix()&&(f=e.numberingPlan.nationalPrefix())}else f=r[0];return{nationalNumber:a,nationalPrefix:f,carrierCode:o}}}return{nationalNumber:t}}function _createForOfIteratorHelperLoose$1(t,e){var s=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s)return(s=s.call(t)).next.bind(s);if(Array.isArray(t)||(s=_unsupportedIterableToArray$2(t))||e){s&&(t=s);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$2(t,e);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray$2(t,e):void 0}}function _arrayLikeToArray$2(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,r=Array(e);s<e;s++)r[s]=t[s];return r}function getCountryByNationalNumber(t,e){var s=e.countries,r=e.metadata;r=new Metadata(r);for(var a=_createForOfIteratorHelperLoose$1(s),o;!(o=a()).done;){var l=o.value;if(r.selectNumberingPlan(l),r.leadingDigits()){if(t&&t.search(r.leadingDigits())===0)return l}else if(getNumberType({phone:t,country:l},void 0,r.metadata))return l}}function getCountryByCallingCode(t,e){var s=e.nationalNumber,r=e.metadata,a=r.getCountryCodesForCallingCode(t);if(a)return a.length===1?a[0]:getCountryByNationalNumber(s,{countries:a,metadata:r.metadata})}function extractNationalNumber(t,e,s){var r=extractNationalNumberFromPossiblyIncompleteNumber(t,s),a=r.carrierCode,o=r.nationalNumber;if(o!==t){if(!shouldHaveExtractedNationalPrefix(t,o,s))return{nationalNumber:t};if(s.numberingPlan.possibleLengths()&&(e||(e=getCountryByCallingCode(s.numberingPlan.callingCode(),{nationalNumber:o,metadata:s})),!isPossibleIncompleteNationalNumber(o,e,s)))return{nationalNumber:t}}return{nationalNumber:o,carrierCode:a}}function shouldHaveExtractedNationalPrefix(t,e,s){return!(matchesEntirely(t,s.nationalNumberPattern())&&!matchesEntirely(e,s.nationalNumberPattern()))}function isPossibleIncompleteNationalNumber(t,e,s){switch(checkNumberLength(t,e,s)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function extractCountryCallingCodeFromInternationalNumberWithoutPlusSign(t,e,s,r,a){var o=s?getCountryCallingCode(s,a):r;if(t.indexOf(o)===0){a=new Metadata(a),a.selectNumberingPlan(s,o);var l=t.slice(o.length),c=extractNationalNumber(l,e,a),u=c.nationalNumber,f=extractNationalNumber(t,e,a),d=f.nationalNumber;if(!matchesEntirely(d,a.nationalNumberPattern())&&matchesEntirely(u,a.nationalNumberPattern())||checkNumberLength(d,e,a)==="TOO_LONG")return{countryCallingCode:o,number:l}}return{number:t}}function extractCountryCallingCode(t,e,s,r,a){if(!t)return{};var o;if(t[0]!=="+"){var l=stripIddPrefix(t,s,r,a);if(l&&l!==t)o=!0,t="+"+l;else{if(s||r){var c=extractCountryCallingCodeFromInternationalNumberWithoutPlusSign(t,e,s,r,a),u=c.countryCallingCode,f=c.number;if(u)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:u,number:f}}return{number:t}}}if(t[1]==="0")return{};a=new Metadata(a);for(var d=2;d-1<=MAX_LENGTH_COUNTRY_CODE&&d<=t.length;){var p=t.slice(1,d);if(a.hasCallingCode(p))return a.selectNumberingPlan(p),{countryCallingCodeSource:o?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:p,number:t.slice(d)};d++}return{}}function applyInternationalSeparatorStyle(t){return t.replace(new RegExp("[".concat(VALID_PUNCTUATION,"]+"),"g")," ").trim()}var FIRST_GROUP_PATTERN=/(\$\d)/;function formatNationalNumberUsingFormat(t,e,s){var r=s.useInternationalFormat,a=s.withNationalPrefix,o=t.replace(new RegExp(e.pattern()),r?e.internationalFormat():a&&e.nationalPrefixFormattingRule()?e.format().replace(FIRST_GROUP_PATTERN,e.nationalPrefixFormattingRule()):e.format());return r?applyInternationalSeparatorStyle(o):o}var SINGLE_IDD_PREFIX_REG_EXP=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function getIddPrefix(t,e,s){var r=new Metadata(s);if(r.selectNumberingPlan(t,e),r.defaultIDDPrefix())return r.defaultIDDPrefix();if(SINGLE_IDD_PREFIX_REG_EXP.test(r.IDDPrefix()))return r.IDDPrefix()}var RFC3966_EXTN_PREFIX=";ext=",getExtensionDigitsPattern=function t(e){return"([".concat(VALID_DIGITS,"]{1,").concat(e,"})")};function createExtensionPattern(t){var e="20",s="15",r="9",a="6",o="[ \\t,]*",l="[:\\.]?[ \\t,-]*",c="#?",u="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",f="(?:[x#~]|int|)",d="[- ]+",p="[ \\t]*",m="(?:,{2}|;)",y=RFC3966_EXTN_PREFIX+getExtensionDigitsPattern(e),b=o+u+l+getExtensionDigitsPattern(e)+c,E=o+f+l+getExtensionDigitsPattern(r)+c,C=d+getExtensionDigitsPattern(a)+"#",j=p+m+l+getExtensionDigitsPattern(s)+c,B=p+"(?:,)+"+l+getExtensionDigitsPattern(r)+c;return y+"|"+b+"|"+E+"|"+C+"|"+j+"|"+B}var MIN_LENGTH_PHONE_NUMBER_PATTERN="["+VALID_DIGITS+"]{"+MIN_LENGTH_FOR_NSN+"}",VALID_PHONE_NUMBER="["+PLUS_CHARS+"]{0,1}(?:["+VALID_PUNCTUATION+"]*["+VALID_DIGITS+"]){3,}["+VALID_PUNCTUATION+VALID_DIGITS+"]*",VALID_PHONE_NUMBER_START_REG_EXP=new RegExp("^["+PLUS_CHARS+"]{0,1}(?:["+VALID_PUNCTUATION+"]*["+VALID_DIGITS+"]){1,2}$","i"),VALID_PHONE_NUMBER_WITH_EXTENSION=VALID_PHONE_NUMBER+"(?:"+createExtensionPattern()+")?",VALID_PHONE_NUMBER_PATTERN=new RegExp("^"+MIN_LENGTH_PHONE_NUMBER_PATTERN+"$|^"+VALID_PHONE_NUMBER_WITH_EXTENSION+"$","i");function isViablePhoneNumber(t){return t.length>=MIN_LENGTH_FOR_NSN&&VALID_PHONE_NUMBER_PATTERN.test(t)}function isViablePhoneNumberStart(t){return VALID_PHONE_NUMBER_START_REG_EXP.test(t)}function formatRFC3966(t){var e=t.number,s=t.ext;if(!e)return"";if(e[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(e).concat(s?";ext="+s:"")}var DEFAULT_OPTIONS={formatExtension:function t(e,s,r){return"".concat(e).concat(r.ext()).concat(s)}};function formatNumber(t,e,s,r){if(s?s=merge({},DEFAULT_OPTIONS,s):s=DEFAULT_OPTIONS,r=new Metadata(r),t.country&&t.country!=="001"){if(!r.hasCountry(t.country))throw new Error("Unknown country: ".concat(t.country));r.selectNumberingPlan(t.country)}else if(t.countryCallingCode)r.selectNumberingPlan(t.countryCallingCode);else return t.phone||"";var a=r.countryCallingCode(),o=s.v2?t.nationalNumber:t.phone,l;switch(e){case"NATIONAL":return o?(l=formatNationalNumber(o,t.carrierCode,"NATIONAL",r,s),addExtension(l,t.ext,r,s.formatExtension)):"";case"INTERNATIONAL":return o?(l=formatNationalNumber(o,null,"INTERNATIONAL",r,s),l="+".concat(a," ").concat(l),addExtension(l,t.ext,r,s.formatExtension)):"+".concat(a);case"E.164":return"+".concat(a).concat(o);case"RFC3966":return formatRFC3966({number:"+".concat(a).concat(o),ext:t.ext});case"IDD":if(!s.fromCountry)return;var c=formatIDD(o,t.carrierCode,a,s.fromCountry,r);return addExtension(c,t.ext,r,s.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(e,'"'))}}function formatNationalNumber(t,e,s,r,a){var o=chooseFormatForNumber(r.formats(),t);return o?formatNationalNumberUsingFormat(t,o,{useInternationalFormat:s==="INTERNATIONAL",withNationalPrefix:!(o.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&a&&a.nationalPrefix===!1)}):t}function chooseFormatForNumber(t,e){return pickFirstMatchingElement(t,function(s){if(s.leadingDigitsPatterns().length>0){var r=s.leadingDigitsPatterns()[s.leadingDigitsPatterns().length-1];if(e.search(r)!==0)return!1}return matchesEntirely(e,s.pattern())})}function addExtension(t,e,s,r){return e?r(t,e,s):t}function formatIDD(t,e,s,r,a){var o=getCountryCallingCode(r,a.metadata);if(o===s){var l=formatNationalNumber(t,e,"NATIONAL",a);return s==="1"?s+" "+l:l}var c=getIddPrefix(r,void 0,a.metadata);if(c)return"".concat(c," ").concat(s," ").concat(formatNationalNumber(t,null,"INTERNATIONAL",a))}function merge(){for(var t=1,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];for(;t<s.length;){if(s[t])for(var a in s[t])s[0][a]=s[t][a];t++}return s[0]}function pickFirstMatchingElement(t,e){for(var s=0;s<t.length;){if(e(t[s]))return t[s];s++}}function _typeof$5(t){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(t)}function ownKeys$4(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,r)}return s}function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$4(Object(s),!0).forEach(function(r){_defineProperty$4(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ownKeys$4(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function _defineProperty$4(t,e,s){return(e=_toPropertyKey$4(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey$4(r.key),r)}}function _createClass$1(t,e,s){return e&&_defineProperties$2(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey$4(t){var e=_toPrimitive$4(t,"string");return _typeof$5(e)=="symbol"?e:e+""}function _toPrimitive$4(t,e){if(_typeof$5(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(_typeof$5(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var PhoneNumber=(function(){function t(e,s,r){if(_classCallCheck$1(this,t),!e)throw new TypeError("First argument is required");if(typeof e!="string")throw new TypeError("First argument must be a string");if(e[0]==="+"&&!s)throw new TypeError("`metadata` argument not passed");if(isObject$1(s)&&isObject$1(s.countries)){r=s;var a=e;if(!E164_NUMBER_REGEXP.test(a))throw new Error('Invalid `number` argument passed: must consist of a "+" followed by digits');var o=extractCountryCallingCode(a,void 0,void 0,void 0,r),l=o.countryCallingCode,c=o.number;if(s=c,e=l,!s)throw new Error("Invalid `number` argument passed: too short")}if(!s)throw new TypeError("`nationalNumber` argument is required");if(typeof s!="string")throw new TypeError("`nationalNumber` argument must be a string");validateMetadata(r);var u=getCountryAndCountryCallingCode(e,r),f=u.country,d=u.countryCallingCode;this.country=f,this.countryCallingCode=d,this.nationalNumber=s,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return r}}return _createClass$1(t,[{key:"setExt",value:function(s){this.ext=s}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:getPossibleCountriesForNumber(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return isPossiblePhoneNumber(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return isValidNumber(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var s=new Metadata(this.getMetadata());return s.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(s){return this.number===s.number&&this.ext===s.ext}},{key:"getType",value:function(){return getNumberType(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(s,r){return formatNumber(this,s,r?_objectSpread$4(_objectSpread$4({},r),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(s){return this.format("NATIONAL",s)}},{key:"formatInternational",value:function(s){return this.format("INTERNATIONAL",s)}},{key:"getURI",value:function(s){return this.format("RFC3966",s)}}])})(),isCountryCode=function t(e){return/^[A-Z]{2}$/.test(e)};function getCountryAndCountryCallingCode(t,e){var s,r,a=new Metadata(e);return isCountryCode(t)?(s=t,a.selectNumberingPlan(s),r=a.countryCallingCode()):r=t,{country:s,countryCallingCode:r}}var E164_NUMBER_REGEXP=/^\+\d+$/;function _typeof$4(t){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(t)}function _createClass(t,e,s){return Object.defineProperty(t,"prototype",{writable:!1}),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _callSuper(t,e,s){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,s||[],_getPrototypeOf(t).constructor):e.apply(t,s))}function _possibleConstructorReturn(t,e){if(e&&(_typeof$4(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inherits$1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _wrapNativeSuper(t){var e=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(r){if(r===null||!_isNativeFunction(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,a)}function a(){return _construct$1(r,arguments,_getPrototypeOf(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(a,r)},_wrapNativeSuper(t)}function _construct$1(t,e,s){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var a=new(t.bind.apply(t,r));return s&&_setPrototypeOf(a,s.prototype),a}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!t})()}function _isNativeFunction(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},_setPrototypeOf(t,e)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(t)}var ParseError=(function(t){function e(s){var r;return _classCallCheck(this,e),r=_callSuper(this,e,[s]),Object.setPrototypeOf(r,e.prototype),r.name=r.constructor.name,r}return _inherits$1(e,t),_createClass(e)})(_wrapNativeSuper(Error)),EXTN_PATTERN=new RegExp("(?:"+createExtensionPattern()+")$","i");function extractExtension(t){var e=t.search(EXTN_PATTERN);if(e<0)return{};for(var s=t.slice(0,e),r=t.match(EXTN_PATTERN),a=1;a<r.length;){if(r[a])return{number:s,ext:r[a]};a++}}var DIGITS={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function parseDigit(t){return DIGITS[t]}function _createForOfIteratorHelperLoose(t,e){var s=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s)return(s=s.call(t)).next.bind(s);if(Array.isArray(t)||(s=_unsupportedIterableToArray$1(t))||e){s&&(t=s);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$1(t,e);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray$1(t,e):void 0}}function _arrayLikeToArray$1(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,r=Array(e);s<e;s++)r[s]=t[s];return r}function parseIncompletePhoneNumber(t){for(var e="",s=_createForOfIteratorHelperLoose(t.split("")),r;!(r=s()).done;){var a=r.value;e+=parsePhoneNumberCharacter(a,e)||""}return e}function parsePhoneNumberCharacter(t,e,s){return t==="+"?e?void 0:"+":parseDigit(t)}var PLUS_SIGN="+",RFC3966_VISUAL_SEPARATOR_="[\\-\\.\\(\\)]?",RFC3966_PHONE_DIGIT_="(["+VALID_DIGITS+"]|"+RFC3966_VISUAL_SEPARATOR_+")",RFC3966_GLOBAL_NUMBER_DIGITS_="^\\"+PLUS_SIGN+RFC3966_PHONE_DIGIT_+"*["+VALID_DIGITS+"]"+RFC3966_PHONE_DIGIT_+"*$",RFC3966_GLOBAL_NUMBER_DIGITS_PATTERN_=new RegExp(RFC3966_GLOBAL_NUMBER_DIGITS_,"g"),ALPHANUM_=VALID_DIGITS,RFC3966_DOMAINLABEL_="["+ALPHANUM_+"]+((\\-)*["+ALPHANUM_+"])*",VALID_ALPHA_="a-zA-Z",RFC3966_TOPLABEL_="["+VALID_ALPHA_+"]+((\\-)*["+ALPHANUM_+"])*",RFC3966_DOMAINNAME_="^("+RFC3966_DOMAINLABEL_+"\\.)*"+RFC3966_TOPLABEL_+"\\.?$",RFC3966_DOMAINNAME_PATTERN_=new RegExp(RFC3966_DOMAINNAME_,"g"),RFC3966_PREFIX_="tel:",RFC3966_PHONE_CONTEXT_=";phone-context=",RFC3966_ISDN_SUBADDRESS_=";isub=";function extractPhoneContext(t){var e=t.indexOf(RFC3966_PHONE_CONTEXT_);if(e<0)return null;var s=e+RFC3966_PHONE_CONTEXT_.length;if(s>=t.length)return"";var r=t.indexOf(";",s);return r>=0?t.substring(s,r):t.substring(s)}function isPhoneContextValid(t){return t===null?!0:t.length===0?!1:RFC3966_GLOBAL_NUMBER_DIGITS_PATTERN_.test(t)||RFC3966_DOMAINNAME_PATTERN_.test(t)}function extractFormattedPhoneNumberFromPossibleRfc3966NumberUri(t,e){var s=e.extractFormattedPhoneNumber,r=extractPhoneContext(t);if(!isPhoneContextValid(r))throw new ParseError("NOT_A_NUMBER");var a;if(r===null)a=s(t)||"";else{a="",r.charAt(0)===PLUS_SIGN&&(a+=r);var o=t.indexOf(RFC3966_PREFIX_),l;o>=0?l=o+RFC3966_PREFIX_.length:l=0;var c=t.indexOf(RFC3966_PHONE_CONTEXT_);a+=t.substring(l,c)}var u=a.indexOf(RFC3966_ISDN_SUBADDRESS_);if(u>0&&(a=a.substring(0,u)),a!=="")return a}var MAX_INPUT_STRING_LENGTH=250,PHONE_NUMBER_START_PATTERN=new RegExp("["+PLUS_CHARS+VALID_DIGITS+"]"),AFTER_PHONE_NUMBER_END_PATTERN=new RegExp("[^"+VALID_DIGITS+"#]+$");function parse$7(t,e,s){if(e=e||{},s=new Metadata(s),e.defaultCountry&&!s.hasCountry(e.defaultCountry))throw e.v2?new ParseError("INVALID_COUNTRY"):new Error("Unknown country: ".concat(e.defaultCountry));var r=parseInput(t,e.v2,e.extract),a=r.number,o=r.ext,l=r.error;if(!a){if(e.v2)throw l==="TOO_SHORT"?new ParseError("TOO_SHORT"):new ParseError("NOT_A_NUMBER");return{}}var c=parsePhoneNumber$1(a,e.defaultCountry,e.defaultCallingCode,s),u=c.country,f=c.nationalNumber,d=c.countryCallingCode,p=c.countryCallingCodeSource,m=c.carrierCode;if(!s.hasSelectedNumberingPlan()){if(e.v2)throw new ParseError("INVALID_COUNTRY");return{}}if(!f||f.length<MIN_LENGTH_FOR_NSN){if(e.v2)throw new ParseError("TOO_SHORT");return{}}if(f.length>MAX_LENGTH_FOR_NSN){if(e.v2)throw new ParseError("TOO_LONG");return{}}if(e.v2){var y=new PhoneNumber(d,f,s.metadata);return u&&(y.country=u),m&&(y.carrierCode=m),o&&(y.ext=o),y.__countryCallingCodeSource=p,y}var b=(e.extended?s.hasSelectedNumberingPlan():u)?matchesEntirely(f,s.nationalNumberPattern()):!1;return e.extended?{country:u,countryCallingCode:d,carrierCode:m,valid:b,possible:b?!0:!!(e.extended===!0&&s.possibleLengths()&&isPossibleNumber(f,u,s)),phone:f,ext:o}:b?result$3(u,f,o):{}}function _extractFormattedPhoneNumber(t,e,s){if(t){if(t.length>MAX_INPUT_STRING_LENGTH){if(s)throw new ParseError("TOO_LONG");return}if(e===!1)return t;var r=t.search(PHONE_NUMBER_START_PATTERN);if(!(r<0))return t.slice(r).replace(AFTER_PHONE_NUMBER_END_PATTERN,"")}}function parseInput(t,e,s){var r=extractFormattedPhoneNumberFromPossibleRfc3966NumberUri(t,{extractFormattedPhoneNumber:function(l){return _extractFormattedPhoneNumber(l,s,e)}});if(!r)return{};if(!isViablePhoneNumber(r))return isViablePhoneNumberStart(r)?{error:"TOO_SHORT"}:{};var a=extractExtension(r);return a.ext?a:{number:r}}function result$3(t,e,s){var r={country:t,phone:e};return s&&(r.ext=s),r}function parsePhoneNumber$1(t,e,s,r){var a=extractCountryCallingCode(parseIncompletePhoneNumber(t),void 0,e,s,r.metadata),o=a.countryCallingCodeSource,l=a.countryCallingCode,c=a.number,u;if(l)r.selectNumberingPlan(l);else if(c&&(e||s))r.selectNumberingPlan(e,s),e&&(u=e),l=s||getCountryCallingCode(e,r.metadata);else return{};if(!c)return{countryCallingCodeSource:o,countryCallingCode:l};var f=extractNationalNumber(parseIncompletePhoneNumber(c),u,r),d=f.nationalNumber,p=f.carrierCode,m=getCountryByCallingCode(l,{nationalNumber:d,metadata:r});return m&&(u=m,m==="001"||r.selectNumberingPlan(u)),{country:u,countryCallingCode:l,countryCallingCodeSource:o,nationalNumber:d,carrierCode:p}}function _typeof$3(t){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(t)}function ownKeys$3(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,r)}return s}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$3(Object(s),!0).forEach(function(r){_defineProperty$3(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ownKeys$3(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function _defineProperty$3(t,e,s){return(e=_toPropertyKey$3(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function _toPropertyKey$3(t){var e=_toPrimitive$3(t,"string");return _typeof$3(e)=="symbol"?e:e+""}function _toPrimitive$3(t,e){if(_typeof$3(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(_typeof$3(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function parsePhoneNumberWithError$2(t,e,s){return parse$7(t,_objectSpread$3(_objectSpread$3({},e),{},{v2:!0}),s)}function _typeof$2(t){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}function ownKeys$2(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,r)}return s}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(Object(s),!0).forEach(function(r){_defineProperty$2(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ownKeys$2(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function _defineProperty$2(t,e,s){return(e=_toPropertyKey$2(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function _toPropertyKey$2(t){var e=_toPrimitive$2(t,"string");return _typeof$2(e)=="symbol"?e:e+""}function _toPrimitive$2(t,e){if(_typeof$2(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(_typeof$2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,r=Array(e);s<e;s++)r[s]=t[s];return r}function _iterableToArrayLimit(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var r,a,o,l,c=[],u=!0,f=!1;try{if(o=(s=s.call(t)).next,e!==0)for(;!(u=(r=o.call(s)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(d){f=!0,a=d}finally{try{if(!u&&s.return!=null&&(l=s.return(),Object(l)!==l))return}finally{if(f)throw a}}return c}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function normalizeArguments(t){var e=Array.prototype.slice.call(t),s=_slicedToArray(e,4),r=s[0],a=s[1],o=s[2],l=s[3],c,u,f;if(typeof r=="string")c=r;else throw new TypeError("A text for parsing must be a string.");if(!a||typeof a=="string")l?(u=o,f=l):(u=void 0,f=o),a&&(u=_objectSpread$2({defaultCountry:a},u));else if(isObject$1(a))o?(u=a,f=o):f=a;else throw new Error("Invalid second argument: ".concat(a));return{text:c,options:u,metadata:f}}function parsePhoneNumberWithError$1(){var t=normalizeArguments(arguments),e=t.text,s=t.options,r=t.metadata;return parsePhoneNumberWithError$2(e,s,r)}function _typeof$1(t){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}function ownKeys$1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,r)}return s}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(s),!0).forEach(function(r){_defineProperty$1(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ownKeys$1(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function _defineProperty$1(t,e,s){return(e=_toPropertyKey$1(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function _toPropertyKey$1(t){var e=_toPrimitive$1(t,"string");return _typeof$1(e)=="symbol"?e:e+""}function _toPrimitive$1(t,e){if(_typeof$1(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(_typeof$1(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function parsePhoneNumber(t,e,s){e&&e.defaultCountry&&!isSupportedCountry(e.defaultCountry,s)&&(e=_objectSpread$1(_objectSpread$1({},e),{},{defaultCountry:void 0}));try{return parsePhoneNumberWithError$2(t,e,s)}catch(r){if(!(r instanceof ParseError))throw r}}function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}function ownKeys(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),s.push.apply(s,r)}return s}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(s),!0).forEach(function(r){_defineProperty(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function _defineProperty(t,e,s){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return _typeof(e)=="symbol"?e:e+""}function _toPrimitive(t,e){if(_typeof(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(_typeof(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function isValidPhoneNumber$1(){var t=normalizeArguments(arguments),e=t.text,s=t.options,r=t.metadata;s=_objectSpread(_objectSpread({},s),{},{extract:!1});var a=parsePhoneNumber(e,s,r);return a&&a.isValid()||!1}function parsePhoneNumberWithError(){return withMetadataArgument(parsePhoneNumberWithError$1,arguments)}function isValidPhoneNumber(){return withMetadataArgument(isValidPhoneNumber$1,arguments)}const NAMETAG_SALT="unicity:nametag:",DEFAULT_COUNTRY$1="US";function sha256Hex(t){const e=new TextEncoder().encode(t);return bytesToHex$2(sha256$2(e))}function isLikelyPhoneNumber(t){if(t.startsWith("+"))return!0;const s=t.replace(/\D/g,"").length;if(s<7)return!1;const r=t.replace(/[\s\-().]/g,"").length;return s/r>.5}function normalizePhoneNumber(t,e){try{return isValidPhoneNumber(t,e)?parsePhoneNumberWithError(t,e).format("E.164"):isValidPhoneNumber(t)?parsePhoneNumberWithError(t).format("E.164"):null}catch{return null}}function normalizeNametag(t,e=DEFAULT_COUNTRY$1){const s=t.trim();if(isLikelyPhoneNumber(s)){const a=normalizePhoneNumber(s,e);if(a)return a}let r=s.toLowerCase();return r.endsWith("@unicity")&&(r=r.slice(0,-8)),r}function hashNametag(t,e=DEFAULT_COUNTRY$1){const s=normalizeNametag(t,e);return sha256Hex(NAMETAG_SALT+s)}function isPhoneNumber(t,e=DEFAULT_COUNTRY$1){try{return isValidPhoneNumber(t,e)||isValidPhoneNumber(t)}catch{return!1}}const DEFAULT_COUNTRY="US";async function createBindingEvent(t,e,s,r=DEFAULT_COUNTRY){const a=hashNametag(e,r),o={nametag_hash:a,address:s,verified:Date.now()};return Event$1.create(t,{kind:APP_DATA,tags:[["d",a],["nametag",a],["t",a],["address",s]],content:JSON.stringify(o)})}function createNametagToPubkeyFilter(t,e=DEFAULT_COUNTRY){const s=hashNametag(t,e);return Filter.builder().kinds(APP_DATA).tTags(s).build()}function createPubkeyToNametagFilter(t){return Filter.builder().kinds(APP_DATA).authors(t).limit(10).build()}function parseNametagHashFromEvent(t){const e=t.getTagValue("nametag");if(e)return e;const s=t.getTagValue("d");if(s)return s;try{return JSON.parse(t.content).nametag_hash}catch{return}}function parseAddressFromEvent(t){const e=t.getTagValue("address");if(e)return e;try{return JSON.parse(t.content).address}catch{return}}function isValidBindingEvent(t){if(t.kind!==APP_DATA||!t.hasTag("d"))return!1;try{const e=JSON.parse(t.content);if(!e.nametag_hash||!e.address)return!1}catch{return!1}return t.verify()}var NametagBinding=Object.freeze({__proto__:null,createBindingEvent,createNametagToPubkeyFilter,createPubkeyToNametagFilter,isValidBindingEvent,parseAddressFromEvent,parseNametagHashFromEvent});const MESSAGE_PREFIX$1="token_transfer:";async function createTokenTransferEvent(t,e,s,r,a){let o,l,c;r!==void 0&&typeof r=="object"?(o=r.amount,l=r.symbol,c=r.replyToEventId):(o=r,l=a);const u=MESSAGE_PREFIX$1+s,f=await t.encryptHex(u,e),d=[["p",e],["type","token_transfer"]];return o!==void 0&&d.push(["amount",String(o)]),l!==void 0&&d.push(["symbol",l]),c!==void 0&&c.length>0&&d.push(["e",c,"","reply"]),Event$1.create(t,{kind:TOKEN_TRANSFER,tags:d,content:f})}async function parseTokenTransfer(t,e){if(t.kind!==TOKEN_TRANSFER)throw new Error("Event is not a token transfer");if(t.getTagValue("type")!=="token_transfer")throw new Error("Event type is not token_transfer");let r;if(e.isMyPublicKey(t.pubkey)){const o=t.getTagValue("p");if(!o)throw new Error("No recipient found in event");r=o}else r=t.pubkey;let a;try{a=await e.decryptHex(t.content,r)}catch(o){try{const{hexToBytes:l}=await Promise.resolve().then(function(){return utils});a=new TextDecoder().decode(l(t.content))}catch{throw o}}if(!a.startsWith(MESSAGE_PREFIX$1))throw new Error("Invalid token transfer format");return a.slice(MESSAGE_PREFIX$1.length)}function getAmount$1(t){const e=t.getTagValue("amount");if(e!==void 0)try{return BigInt(e)}catch{return}}function getSymbol(t){return t.getTagValue("symbol")}function getReplyToEventId(t){return t.getTagValue("e")}function isTokenTransfer(t){return t.kind===TOKEN_TRANSFER&&t.getTagValue("type")==="token_transfer"}function getRecipient(t){return t.getTagValue("p")}function getSender$1(t){return t.pubkey}var TokenTransferProtocol=Object.freeze({__proto__:null,createTokenTransferEvent,getAmount:getAmount$1,getRecipient,getReplyToEventId,getSender:getSender$1,getSymbol,isTokenTransfer,parseTokenTransfer});const MESSAGE_PREFIX="payment_request:",RESPONSE_PREFIX="payment_request_response:",DEFAULT_DEADLINE_MS=300*1e3;var ResponseStatus;(function(t){t.DECLINED="DECLINED",t.EXPIRED="EXPIRED"})(ResponseStatus||(ResponseStatus={}));function generateRequestId(){const t=new Uint8Array(4);if(typeof crypto<"u"&&crypto.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<t.length;e++)t[e]=Math.floor(Math.random()*256);return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function createPaymentRequestEvent(t,e,s){const r=s.requestId||generateRequestId(),a=s.deadline===null?null:s.deadline!==void 0?s.deadline:Date.now()+DEFAULT_DEADLINE_MS,o=JSON.stringify({amount:String(s.amount),coinId:s.coinId,message:s.message,recipientNametag:s.recipientNametag,requestId:r,deadline:a}),l=MESSAGE_PREFIX+o,c=await t.encryptHex(l,e),u=[["p",e],["type","payment_request"],["amount",String(s.amount)]];return s.recipientNametag&&u.push(["recipient",s.recipientNametag]),Event$1.create(t,{kind:PAYMENT_REQUEST,tags:u,content:c})}async function parsePaymentRequest(t,e){if(t.kind!==PAYMENT_REQUEST)throw new Error("Event is not a payment request");if(t.getTagValue("type")!=="payment_request")throw new Error("Event type is not payment_request");let r;if(e.isMyPublicKey(t.pubkey)){const c=t.getTagValue("p");if(!c)throw new Error("No target found in event");r=c}else r=t.pubkey;const a=await e.decryptHex(t.content,r);if(!a.startsWith(MESSAGE_PREFIX))throw new Error("Invalid payment request format: missing prefix");const o=a.slice(MESSAGE_PREFIX.length),l=JSON.parse(o);return{amount:BigInt(l.amount),coinId:l.coinId,message:l.message,recipientNametag:l.recipientNametag,requestId:l.requestId,senderPubkey:t.pubkey,timestamp:t.created_at*1e3,eventId:t.id,deadline:l.deadline!==void 0?l.deadline:null}}function isPaymentRequest(t){return t.kind===PAYMENT_REQUEST&&t.getTagValue("type")==="payment_request"}function getAmount(t){const e=t.getTagValue("amount");if(e!==void 0)try{return BigInt(e)}catch{return}}function getRecipientNametag(t){return t.getTagValue("recipient")}function getTarget(t){return t.getTagValue("p")}function getSender(t){return t.pubkey}function formatAmount$1(t,e=8){const s=typeof t=="bigint"?t:BigInt(t),r=BigInt(10)**BigInt(e),a=s/r,o=s%r;if(o===BigInt(0))return a.toString();const c=o.toString().padStart(e,"0").replace(/0+$/,"");return`${a}.${c}`}function parseAmount(t,e=8){const s=BigInt(10)**BigInt(e),r=t.split("."),a=BigInt(r[0]||"0");if(r.length===1)return a*s;let o=r[1]||"0";o.length<e?o=o.padEnd(e,"0"):o.length>e&&(o=o.slice(0,e));const l=BigInt(o);return a*s+l}function isExpired(t){return t.deadline!==null&&Date.now()>t.deadline}function getRemainingTimeMs(t){if(t.deadline===null)return null;const e=t.deadline-Date.now();return e>0?e:0}async function createPaymentRequestResponseEvent(t,e,s){const r=JSON.stringify({requestId:s.requestId,originalEventId:s.originalEventId,status:s.status,reason:s.reason}),a=RESPONSE_PREFIX+r,o=await t.encryptHex(a,e),l=[["p",e],["type","payment_request_response"],["status",s.status]];return s.originalEventId&&l.push(["e",s.originalEventId,"","reply"]),Event$1.create(t,{kind:PAYMENT_REQUEST_RESPONSE,tags:l,content:o})}async function parsePaymentRequestResponse(t,e){if(t.kind!==PAYMENT_REQUEST_RESPONSE)throw new Error("Event is not a payment request response");let s;if(e.isMyPublicKey(t.pubkey)){const l=t.getTagValue("p");if(!l)throw new Error("No target found in event");s=l}else s=t.pubkey;const r=await e.decryptHex(t.content,s);if(!r.startsWith(RESPONSE_PREFIX))throw new Error("Invalid payment request response format: missing prefix");const a=r.slice(RESPONSE_PREFIX.length),o=JSON.parse(a);return{requestId:o.requestId,originalEventId:o.originalEventId,status:o.status,reason:o.reason,senderPubkey:t.pubkey,eventId:t.id,timestamp:t.created_at*1e3}}function isPaymentRequestResponse(t){return t.kind===PAYMENT_REQUEST_RESPONSE&&t.getTagValue("type")==="payment_request_response"}function getResponseStatus(t){return t.getTagValue("status")}function getOriginalEventId(t){return t.getTagValue("e")}var PaymentRequestProtocol=Object.freeze({__proto__:null,DEFAULT_DEADLINE_MS,get ResponseStatus(){return ResponseStatus},createPaymentRequestEvent,createPaymentRequestResponseEvent,formatAmount:formatAmount$1,getAmount,getOriginalEventId,getRecipientNametag,getRemainingTimeMs,getResponseStatus,getSender,getTarget,isExpired,isPaymentRequest,isPaymentRequestResponse,parseAmount,parsePaymentRequest,parsePaymentRequestResponse});function isChatMessage(t){return t.kind===14}function isReadReceipt(t){return t.kind===15}var __defProp$2=Object.defineProperty,__getOwnPropNames=Object.getOwnPropertyNames,__esm=(t,e)=>function(){return t&&(e=(0,t[__getOwnPropNames(t)[0]])(t=0)),e},__export=(t,e)=>{for(var s in e)__defProp$2(t,s,{get:e[s],enumerable:!0})};function convertBits$1(t,e,s,r){let a=0,o=0;const l=[],c=(1<<s)-1;for(let u=0;u<t.length;u++){const f=t[u];if(f<0||f>>e!==0)return null;for(a=a<<e|f,o+=e;o>=s;)o-=s,l.push(a>>o&c)}if(r)o>0&&l.push(a<<s-o&c);else if(o>=e||a<<s-o&c)return null;return l}function hrpExpand$1(t){const e=[];for(let s=0;s<t.length;s++)e.push(t.charCodeAt(s)>>5);e.push(0);for(let s=0;s<t.length;s++)e.push(t.charCodeAt(s)&31);return e}function bech32Polymod$1(t){let e=1;for(let s=0;s<t.length;s++){const r=e>>25;e=(e&33554431)<<5^t[s];for(let a=0;a<5;a++)r>>a&1&&(e^=GENERATOR$1[a])}return e}function bech32Checksum$1(t,e){const s=hrpExpand$1(t).concat(e).concat([0,0,0,0,0,0]),r=bech32Polymod$1(s)^1,a=[];for(let o=0;o<6;o++)a.push(r>>5*(5-o)&31);return a}function encodeBech32$1(t,e,s){if(e<0||e>16)throw new Error("Invalid witness version");const r=convertBits$1(Array.from(s),8,5,!0);if(!r)throw new Error("Failed to convert bits");const a=[e].concat(r),o=bech32Checksum$1(t,a),l=a.concat(o);let c=t+"1";for(let u=0;u<l.length;u++)c+=CHARSET$1[l[u]];return c}function decodeBech32(t){t=t.toLowerCase();const e=t.lastIndexOf("1");if(e<1)return null;const s=t.substring(0,e),r=t.substring(e+1),a=[];for(let u=0;u<r.length;u++){const f=CHARSET$1.indexOf(r[u]);if(f===-1)return null;a.push(f)}const o=bech32Checksum$1(s,a.slice(0,-6));for(let u=0;u<6;u++)if(o[u]!==a[a.length-6+u])return null;const l=a[0],c=convertBits$1(a.slice(1,-6),5,8,!1);return c?{hrp:s,witnessVersion:l,data:Uint8Array.from(c)}:null}var CHARSET$1,GENERATOR$1,createBech32,init_bech32=__esm({"core/bech32.ts"(){CHARSET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l",GENERATOR$1=[996825010,642813549,513874426,1027748829,705979059],createBech32=encodeBech32$1}});function bytesToHex$1(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}function addressToScriptHash(t){const e=decodeBech32(t);if(!e)throw new Error("Invalid bech32 address: "+t);const s="0014"+bytesToHex$1(e.data);return CryptoJS.SHA256(CryptoJS.enc.Hex.parse(s)).toString().match(/../g).reverse().join("")}var init_addressToScriptHash=__esm({"l1/addressToScriptHash.ts"(){init_bech32()}}),network_exports={};__export(network_exports,{broadcast:()=>broadcast,connect:()=>connect,disconnect:()=>disconnect,getBalance:()=>getBalance,getBlockHeader:()=>getBlockHeader,getCurrentBlockHeight:()=>getCurrentBlockHeight,getTransaction:()=>getTransaction,getTransactionHistory:()=>getTransactionHistory,getUtxo:()=>getUtxo,isWebSocketConnected:()=>isWebSocketConnected,rpc:()=>rpc,subscribeBlocks:()=>subscribeBlocks,waitForConnection:()=>waitForConnection});function isWebSocketConnected(){return isConnected&&ws!==null&&ws.readyState===WebSocket.OPEN}function waitForConnection(){return isWebSocketConnected()?Promise.resolve():new Promise((t,e)=>{const s={resolve:()=>{s.timeoutId&&clearTimeout(s.timeoutId),t()},reject:r=>{s.timeoutId&&clearTimeout(s.timeoutId),e(r)}};s.timeoutId=setTimeout(()=>{const r=connectionCallbacks.indexOf(s);r>-1&&connectionCallbacks.splice(r,1),e(new Error("Connection timeout"))},CONNECTION_TIMEOUT),connectionCallbacks.push(s)})}function connect(t=DEFAULT_ENDPOINT){return isConnected?Promise.resolve():isConnecting?waitForConnection():(isConnecting=!0,new Promise((e,s)=>{let r=!1;try{ws=new WebSocket(t)}catch(a){console.error("[L1] WebSocket constructor threw exception:",a),isConnecting=!1,s(a);return}ws.onopen=()=>{isConnected=!0,isConnecting=!1,reconnectAttempts=0,r=!0,e(),connectionCallbacks.forEach(a=>{a.timeoutId&&clearTimeout(a.timeoutId),a.resolve()}),connectionCallbacks.length=0},ws.onclose=()=>{if(isConnected=!1,isBlockSubscribed=!1,Object.values(pending).forEach(o=>{o.timeoutId&&clearTimeout(o.timeoutId),o.reject(new Error("WebSocket connection closed"))}),Object.keys(pending).forEach(o=>delete pending[Number(o)]),intentionalClose){intentionalClose=!1,isConnecting=!1,reconnectAttempts=0,r||(r=!0,s(new Error("WebSocket connection closed intentionally")));return}if(reconnectAttempts>=MAX_RECONNECT_ATTEMPTS$1){console.error("[L1] Max reconnect attempts reached. Giving up."),isConnecting=!1;const o=new Error("Max reconnect attempts reached");connectionCallbacks.forEach(l=>{l.timeoutId&&clearTimeout(l.timeoutId),l.reject(o)}),connectionCallbacks.length=0,r||(r=!0,s(o));return}const a=Math.min(BASE_DELAY*Math.pow(2,reconnectAttempts),MAX_DELAY);reconnectAttempts++,console.warn(`[L1] WebSocket closed unexpectedly. Reconnecting in ${a}ms (attempt ${reconnectAttempts}/${MAX_RECONNECT_ATTEMPTS$1})...`),setTimeout(()=>{connect(t).then(()=>{r||(r=!0,e())}).catch(o=>{r||(r=!0,s(o))})},a)},ws.onerror=a=>{console.error("[L1] WebSocket error:",a)},ws.onmessage=a=>handleMessage(a)}))}function handleMessage(t){const e=JSON.parse(t.data);if(e.id&&pending[e.id]){const s=pending[e.id];delete pending[e.id],e.error?s.reject(e.error):s.resolve(e.result)}if(e.method==="blockchain.headers.subscribe"){const s=e.params[0];lastBlockHeader=s,blockSubscribers.forEach(r=>r(s))}}async function rpc(t,e=[]){return!isConnected&&!isConnecting&&await connect(),isWebSocketConnected()||await waitForConnection(),new Promise((s,r)=>{if(!ws||ws.readyState!==WebSocket.OPEN)return r(new Error("WebSocket not connected (OPEN)"));const a=++requestId,o=setTimeout(()=>{pending[a]&&(delete pending[a],r(new Error(`RPC timeout: ${t}`)))},RPC_TIMEOUT);pending[a]={resolve:l=>{clearTimeout(o),s(l)},reject:l=>{clearTimeout(o),r(l)},timeoutId:o},ws.send(JSON.stringify({jsonrpc:"2.0",id:a,method:t,params:e}))})}async function getUtxo(t){const e=addressToScriptHash(t),s=await rpc("blockchain.scripthash.listunspent",[e]);return Array.isArray(s)?s.map(r=>({tx_hash:r.tx_hash,tx_pos:r.tx_pos,value:r.value,height:r.height,address:t})):(console.warn("listunspent returned non-array:",s),[])}async function getBalance(t){const e=addressToScriptHash(t),s=await rpc("blockchain.scripthash.get_balance",[e]),r=s.confirmed||0,a=s.unconfirmed||0;return(r+a)/1e8}async function broadcast(t){return await rpc("blockchain.transaction.broadcast",[t])}async function subscribeBlocks(t){if(!isConnected&&!isConnecting&&await connect(),isWebSocketConnected()||await waitForConnection(),blockSubscribers.push(t),isBlockSubscribed)lastBlockHeader&&t(lastBlockHeader);else{isBlockSubscribed=!0;const e=await rpc("blockchain.headers.subscribe",[]);e&&(lastBlockHeader=e,blockSubscribers.forEach(s=>s(e)))}return()=>{const e=blockSubscribers.indexOf(t);e>-1&&blockSubscribers.splice(e,1)}}async function getTransactionHistory(t){const e=addressToScriptHash(t),s=await rpc("blockchain.scripthash.get_history",[e]);return Array.isArray(s)?s:(console.warn("get_history returned non-array:",s),[])}async function getTransaction(t){return await rpc("blockchain.transaction.get",[t,!0])}async function getBlockHeader(t){return await rpc("blockchain.block.header",[t,t])}async function getCurrentBlockHeight(){try{return(await rpc("blockchain.headers.subscribe",[]))?.height||0}catch(t){return console.error("Error getting current block height:",t),0}}function disconnect(){ws&&(intentionalClose=!0,ws.close(),ws=null),isConnected=!1,isConnecting=!1,reconnectAttempts=0,isBlockSubscribed=!1,Object.values(pending).forEach(t=>{t.timeoutId&&clearTimeout(t.timeoutId)}),Object.keys(pending).forEach(t=>delete pending[Number(t)]),connectionCallbacks.forEach(t=>{t.timeoutId&&clearTimeout(t.timeoutId)}),connectionCallbacks.length=0}var DEFAULT_ENDPOINT,ws,isConnected,isConnecting,requestId,intentionalClose,reconnectAttempts,isBlockSubscribed,lastBlockHeader,pending,blockSubscribers,connectionCallbacks,MAX_RECONNECT_ATTEMPTS$1,BASE_DELAY,MAX_DELAY,RPC_TIMEOUT,CONNECTION_TIMEOUT,init_network=__esm({"l1/network.ts"(){init_addressToScriptHash(),DEFAULT_ENDPOINT="wss://fulcrum.unicity.network:50004",ws=null,isConnected=!1,isConnecting=!1,requestId=0,intentionalClose=!1,reconnectAttempts=0,isBlockSubscribed=!1,lastBlockHeader=null,pending={},blockSubscribers=[],connectionCallbacks=[],MAX_RECONNECT_ATTEMPTS$1=10,BASE_DELAY=2e3,MAX_DELAY=6e4,RPC_TIMEOUT=3e4,CONNECTION_TIMEOUT=3e4}}),l1_exports={};__export(l1_exports,{CHARSET:()=>CHARSET$1,VESTING_THRESHOLD:()=>VESTING_THRESHOLD,WalletAddressHelper:()=>WalletAddressHelper,addressToScriptHash:()=>addressToScriptHash,broadcast:()=>broadcast,buildSegWitTransaction:()=>buildSegWitTransaction,collectUtxosForAmount:()=>collectUtxosForAmount,computeHash160:()=>computeHash160,connect:()=>connect,convertBits:()=>convertBits$1,createAndSignTransaction:()=>createAndSignTransaction,createBech32:()=>createBech32,createScriptPubKey:()=>createScriptPubKey,createTransactionPlan:()=>createTransactionPlan,decodeBech32:()=>decodeBech32,decrypt:()=>decrypt,decryptWallet:()=>decryptWallet,deriveChildKey:()=>deriveChildKey2,deriveChildKeyBIP32:()=>deriveChildKeyBIP32,deriveKeyAtPath:()=>deriveKeyAtPath2,disconnect:()=>disconnect,domIdToPath:()=>domIdToPath,ec:()=>ec$1,encodeBech32:()=>encodeBech32$1,encrypt:()=>encrypt,encryptWallet:()=>encryptWallet,generateAddressFromMasterKey:()=>generateAddressFromMasterKey,generateAddressInfo:()=>generateAddressInfo,generateHDAddress:()=>generateHDAddress,generateHDAddressBIP32:()=>generateHDAddressBIP32,generateMasterKeyFromSeed:()=>generateMasterKeyFromSeed,generatePrivateKey:()=>generatePrivateKey,getBalance:()=>getBalance,getBlockHeader:()=>getBlockHeader,getCurrentBlockHeight:()=>getCurrentBlockHeight,getIndexFromPath:()=>getIndexFromPath,getTransaction:()=>getTransaction,getTransactionHistory:()=>getTransactionHistory,getUtxo:()=>getUtxo,hash160:()=>hash160$1,hash160ToBytes:()=>hash160ToBytes$1,hexToWIF:()=>hexToWIF,isChangePath:()=>isChangePath,isWebSocketConnected:()=>isWebSocketConnected,parsePathComponents:()=>parsePathComponents,pathToDOMId:()=>pathToDOMId,privateKeyToAddressInfo:()=>privateKeyToAddressInfo,publicKeyToAddress:()=>publicKeyToAddress$1,rpc:()=>rpc,sendAlpha:()=>sendAlpha,subscribeBlocks:()=>subscribeBlocks,vestingClassifier:()=>vestingClassifier,vestingState:()=>vestingState,waitForConnection:()=>waitForConnection});function parsePathComponents(t){const e=t.match(/m\/\d+'\/\d+'\/\d+'\/(\d+)\/(\d+)/);return e?{chain:parseInt(e[1],10),index:parseInt(e[2],10)}:null}function isChangePath(t){return parsePathComponents(t)?.chain===1}function getIndexFromPath(t){return parsePathComponents(t)?.index??0}function pathToDOMId(t){return t.replace(/'/g,"h").replace(/\//g,"-")}function domIdToPath(t){return t.split("-").map((s,r)=>r===0?s:s.endsWith("h")?`${s.slice(0,-1)}'`:s).join("/")}init_bech32();init_addressToScriptHash();init_bech32();var ec$1=new elliptic.ec("secp256k1"),CURVE_ORDER=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");function generateMnemonic2(t=128){return srcExports.generateMnemonic(t)}function validateMnemonic2(t){return srcExports.validateMnemonic(t)}function mnemonicToSeedSync2(t,e=""){const s=srcExports.mnemonicToSeedSync(t,e);return Buffer.from(s).toString("hex")}function generateMasterKey(t){const e=CryptoJS.HmacSHA512(CryptoJS.enc.Hex.parse(t),CryptoJS.enc.Utf8.parse("Bitcoin seed")).toString(),s=e.substring(0,64),r=e.substring(64),a=BigInt("0x"+s);if(a===0n||a>=CURVE_ORDER)throw new Error("Invalid master key generated");return{privateKey:s,chainCode:r}}function deriveChildKey(t,e,s){const r=s>=2147483648;let a;if(r){const m=s.toString(16).padStart(8,"0");a="00"+t+m}else{const y=ec$1.keyFromPrivate(t,"hex").getPublic(!0,"hex"),b=s.toString(16).padStart(8,"0");a=y+b}const o=CryptoJS.HmacSHA512(CryptoJS.enc.Hex.parse(a),CryptoJS.enc.Hex.parse(e)).toString(),l=o.substring(0,64),c=o.substring(64),u=BigInt("0x"+l),f=BigInt("0x"+t);if(u>=CURVE_ORDER)throw new Error("Invalid key: IL >= curve order");const d=(u+f)%CURVE_ORDER;if(d===0n)throw new Error("Invalid key: child key is zero");return{privateKey:d.toString(16).padStart(64,"0"),chainCode:c}}function deriveKeyAtPath(t,e,s){const r=s.replace("m/","").split("/");let a=t,o=e;for(const l of r){const c=l.endsWith("'")||l.endsWith("h"),u=l.replace(/['h]$/,"");let f=parseInt(u,10);c&&(f+=2147483648);const d=deriveChildKey(a,o,f);a=d.privateKey,o=d.chainCode}return{privateKey:a,chainCode:o}}function getPublicKey$1(t,e=!0){return ec$1.keyFromPrivate(t,"hex").getPublic(e,"hex")}function sha256$1(t,e="hex"){const s=e==="hex"?CryptoJS.enc.Hex.parse(t):CryptoJS.enc.Utf8.parse(t);return CryptoJS.SHA256(s).toString()}function ripemd160$1(t,e="hex"){const s=e==="hex"?CryptoJS.enc.Hex.parse(t):CryptoJS.enc.Utf8.parse(t);return CryptoJS.RIPEMD160(s).toString()}function hash160$1(t){const e=sha256$1(t,"hex");return ripemd160$1(e,"hex")}var computeHash160=hash160$1;function hash160ToBytes$1(t){const e=t.match(/../g);return e?Uint8Array.from(e.map(s=>parseInt(s,16))):new Uint8Array(0)}function publicKeyToAddress$1(t,e="alpha",s=0){const r=hash160$1(t),a=hash160ToBytes$1(r);return encodeBech32$1(e,s,a)}function privateKeyToAddressInfo(t,e="alpha"){const s=getPublicKey$1(t);return{address:publicKeyToAddress$1(s,e),publicKey:s}}function bytesToHex2(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}function identityFromMnemonicSync(t,e=""){if(!validateMnemonic2(t))throw new Error("Invalid mnemonic phrase");const s=mnemonicToSeedSync2(t,e);return generateMasterKey(s)}function deriveAddressInfo(t,e,s,r=!1,a="alpha"){const l=`${e}/${r?1:0}/${s}`,c=deriveKeyAtPath(t.privateKey,t.chainCode,l),u=getPublicKey$1(c.privateKey),f=publicKeyToAddress$1(u,a);return{privateKey:c.privateKey,publicKey:u,address:f,path:l,index:s}}function generateAddressInfo(t,e,s,r="alpha"){const{address:a,publicKey:o}=privateKeyToAddressInfo(t,r);return{privateKey:t,publicKey:o,address:a,path:s,index:e}}var SALT="alpha_wallet_salt",PBKDF2_ITERATIONS=1e5;function encrypt(t,e){return CryptoJS.AES.encrypt(t,e).toString()}function decrypt(t,e){return CryptoJS.AES.decrypt(t,e).toString(CryptoJS.enc.Utf8)}function generatePrivateKey(){return CryptoJS.lib.WordArray.random(32).toString()}function encryptWallet(t,e){const s=CryptoJS.PBKDF2(e,SALT,{keySize:8,iterations:PBKDF2_ITERATIONS}).toString();return CryptoJS.AES.encrypt(t,s).toString()}function decryptWallet(t,e){const s=CryptoJS.PBKDF2(e,SALT,{keySize:8,iterations:PBKDF2_ITERATIONS}).toString();return CryptoJS.AES.decrypt(t,s).toString(CryptoJS.enc.Utf8)}function hexToWIF(t){const s="80"+t,r=CryptoJS.SHA256(CryptoJS.enc.Hex.parse(s)).toString(),o=CryptoJS.SHA256(CryptoJS.enc.Hex.parse(r)).toString().substring(0,8),l=s+o;return base58Encode(l)}function base58Encode(t){const e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let s=BigInt("0x"+t),r="";for(;s>0n;){const a=Number(s%58n);s=s/58n,r=e[a]+r}for(let a=0;a<t.length&&t.substring(a,a+2)==="00";a+=2)r="1"+r;return r}var deriveChildKeyBIP32=deriveChildKey,deriveKeyAtPath2=deriveKeyAtPath;function generateMasterKeyFromSeed(t){const e=generateMasterKey(t);return{masterPrivateKey:e.privateKey,masterChainCode:e.chainCode}}function generateHDAddressBIP32(t,e,s,r="m/44'/0'/0'",a=!1){const l=`${r}/${a?1:0}/${s}`,c=deriveKeyAtPath(t,e,l);return generateAddressInfo(c.privateKey,s,l)}function generateAddressFromMasterKey(t,e){const s=`m/44'/0'/${e}'`,r=CryptoJS.enc.Hex.parse(t),a=CryptoJS.enc.Utf8.parse(s),l=CryptoJS.HmacSHA512(r,a).toString().substring(0,64);return generateAddressInfo(l,e,s)}function deriveChildKey2(t,e,s){const r=t+s.toString(16).padStart(8,"0"),a=CryptoJS.HmacSHA512(CryptoJS.enc.Hex.parse(r),CryptoJS.enc.Hex.parse(e)).toString();return{privateKey:a.substring(0,64),nextChainCode:a.substring(64)}}function generateHDAddress(t,e,s){const r=deriveChildKey2(t,e,s),a=`m/44'/0'/0'/${s}`;return generateAddressInfo(r.privateKey,s,a)}init_network();init_network();init_bech32();init_network();var VESTING_THRESHOLD=28e4,currentBlockHeight=null,VestingClassifier=class{memoryCache=new Map;dbName="SphereVestingCacheV5";storeName="vestingCache";db=null;async initDB(){if(!(typeof indexedDB>"u"))return new Promise((t,e)=>{const s=indexedDB.open(this.dbName,1);s.onupgradeneeded=r=>{const a=r.target.result;a.objectStoreNames.contains(this.storeName)||a.createObjectStore(this.storeName,{keyPath:"txHash"})},s.onsuccess=r=>{this.db=r.target.result,t()},s.onerror=()=>e(s.error)})}isCoinbaseTransaction(t){if(t.vin&&t.vin.length===1){const e=t.vin[0];if(e.coinbase||!e.txid&&e.coinbase!==void 0||e.txid==="0000000000000000000000000000000000000000000000000000000000000000")return!0}return!1}async loadFromDB(t){return this.db?new Promise(e=>{const a=this.db.transaction(this.storeName,"readonly").objectStore(this.storeName).get(t);a.onsuccess=()=>{a.result?e({blockHeight:a.result.blockHeight,isCoinbase:a.result.isCoinbase,inputTxId:a.result.inputTxId}):e(null)},a.onerror=()=>e(null)}):null}async saveToDB(t,e){if(this.db)return new Promise(s=>{const r=this.db.transaction(this.storeName,"readwrite");r.objectStore(this.storeName).put({txHash:t,...e}),r.oncomplete=()=>s(),r.onerror=()=>s()})}async traceToOrigin(t){let e=t,s=0;const r=1e4;for(;s<r;){s++;const a=this.memoryCache.get(e);if(a){if(a.isCoinbase){if(a.blockHeight!==null&&a.blockHeight!==void 0)return{coinbaseHeight:a.blockHeight}}else if(a.inputTxId){e=a.inputTxId;continue}}const o=await this.loadFromDB(e);if(o){if(this.memoryCache.set(e,o),o.isCoinbase){if(o.blockHeight!==null&&o.blockHeight!==void 0)return{coinbaseHeight:o.blockHeight}}else if(o.inputTxId){e=o.inputTxId;continue}}const l=await getTransaction(e);if(!l||!l.txid)return{coinbaseHeight:null,error:`Failed to fetch tx ${e}`};const c=this.isCoinbaseTransaction(l);let u=null;l.confirmations&&currentBlockHeight!==null&&currentBlockHeight!==void 0&&(u=currentBlockHeight-l.confirmations+1);let f=null;!c&&l.vin&&l.vin.length>0&&l.vin[0].txid&&(f=l.vin[0].txid);const d={blockHeight:u,isCoinbase:c,inputTxId:f};if(this.memoryCache.set(e,d),await this.saveToDB(e,d),c)return{coinbaseHeight:u};if(!f)return{coinbaseHeight:null,error:"Could not find input transaction"};e=f}return{coinbaseHeight:null,error:"Max iterations exceeded"}}async classifyUtxo(t){const e=t.tx_hash||t.txid;if(!e)return{isVested:!1,coinbaseHeight:null,error:"No transaction hash"};try{const s=await this.traceToOrigin(e);return s.error||s.coinbaseHeight===null?{isVested:!1,coinbaseHeight:null,error:s.error||"Could not trace to origin"}:{isVested:s.coinbaseHeight<=VESTING_THRESHOLD,coinbaseHeight:s.coinbaseHeight}}catch(s){return{isVested:!1,coinbaseHeight:null,error:s instanceof Error?s.message:String(s)}}}async classifyUtxos(t,e){currentBlockHeight=await getCurrentBlockHeight(),this.memoryCache.clear();const s=[],r=[],a=[];for(let o=0;o<t.length;o++){const l=t[o],c=await this.classifyUtxo(l);c.error?(a.push({utxo:l,error:c.error}),r.push({...l,vestingStatus:"error",coinbaseHeight:null})):c.isVested?s.push({...l,vestingStatus:"vested",coinbaseHeight:c.coinbaseHeight}):r.push({...l,vestingStatus:"unvested",coinbaseHeight:c.coinbaseHeight}),e&&e(o+1,t.length),o%5===0&&await new Promise(u=>setTimeout(u,0))}return{vested:s,unvested:r,errors:a}}clearCaches(){this.memoryCache.clear(),this.db&&this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear()}async destroy(){this.memoryCache.clear(),this.db&&(this.db.close(),this.db=null),typeof indexedDB<"u"&&await new Promise(t=>{const e=indexedDB.deleteDatabase(this.dbName);e.onsuccess=()=>t(),e.onerror=()=>t(),e.onblocked=()=>t()})}},vestingClassifier=new VestingClassifier,VestingStateManager=class{currentMode="all";addressCache=new Map;classificationInProgress=!1;setMode(t){if(!["all","vested","unvested"].includes(t))throw new Error(`Invalid vesting mode: ${t}`);this.currentMode=t}getMode(){return this.currentMode}async classifyAddressUtxos(t,e,s){if(!this.classificationInProgress){this.classificationInProgress=!0;try{await vestingClassifier.initDB();const r=await vestingClassifier.classifyUtxos(e,s),a=r.vested.reduce((l,c)=>l+BigInt(c.value),0n),o=r.unvested.reduce((l,c)=>l+BigInt(c.value),0n);this.addressCache.set(t,{classifiedUtxos:{vested:r.vested,unvested:r.unvested,all:[...r.vested,...r.unvested]},vestingBalances:{vested:a,unvested:o,all:a+o}}),r.errors.length>0&&(console.warn(`Vesting classification errors: ${r.errors.length}`),r.errors.slice(0,5).forEach(l=>{const c=l.utxo.tx_hash||l.utxo.txid;console.warn(`  ${c}: ${l.error}`)}))}finally{this.classificationInProgress=!1}}}getFilteredUtxos(t){const e=this.addressCache.get(t);if(!e)return[];switch(this.currentMode){case"vested":return e.classifiedUtxos.vested;case"unvested":return e.classifiedUtxos.unvested;default:return e.classifiedUtxos.all}}getAllUtxos(t){const e=this.addressCache.get(t);return e?e.classifiedUtxos.all:[]}getBalance(t){const e=this.addressCache.get(t);return e?e.vestingBalances[this.currentMode]:0n}getAllBalances(t){const e=this.addressCache.get(t);return e?e.vestingBalances:{vested:0n,unvested:0n,all:0n}}hasClassifiedData(t){return this.addressCache.has(t)}isClassifying(){return this.classificationInProgress}clearAddressCache(t){this.addressCache.delete(t)}clearAllCaches(){this.addressCache.clear(),vestingClassifier.clearCaches()}},vestingState=new VestingStateManager,WalletAddressHelper=class{static findByPath(t,e){return t.addresses.find(s=>s.path===e)}static getDefault(t){return t.addresses.find(e=>!e.isChange)??t.addresses[0]}static getDefaultOrNull(t){if(!(!t.addresses||t.addresses.length===0))return t.addresses.find(e=>!e.isChange)??t.addresses[0]}static add(t,e){if(!e.path)throw new Error("Cannot add address without a path");const s=this.findByPath(t,e.path);if(s){if(s.address!==e.address)throw new Error(`CRITICAL: Attempted to overwrite address for path ${e.path}
Existing: ${s.address}
New: ${e.address}
This indicates master key corruption or derivation logic error.`);return t}return{...t,addresses:[...t.addresses,e]}}static removeByPath(t,e){return{...t,addresses:t.addresses.filter(s=>s.path!==e)}}static getExternal(t){return t.addresses.filter(e=>!e.isChange)}static getChange(t){return t.addresses.filter(e=>e.isChange)}static hasPath(t,e){return t.addresses.some(s=>s.path===e)}static validate(t){const e=t.addresses.map(r=>r.path).filter(Boolean),s=new Set(e);if(e.length!==s.size){const r=e.filter((a,o)=>e.indexOf(a)!==o);throw new Error(`CRITICAL: Wallet has duplicate paths: ${r.join(", ")}
This indicates data corruption. Please restore from backup.`)}}static sortAddresses(t){const e=[...t.addresses].sort((s,r)=>{const a=s.isChange?1:0,o=r.isChange?1:0;return a!==o?a-o:s.index-r.index});return{...t,addresses:e}}},ec2=new elliptic.ec("secp256k1"),FEE=1e4,DUST=546,SAT=1e8;function createScriptPubKey(t){if(!t||typeof t!="string")throw new Error("Invalid address: must be a string");const e=decodeBech32(t);if(!e)throw new Error("Invalid bech32 address: "+t);return"0014"+Array.from(e.data).map(r=>r.toString(16).padStart(2,"0")).join("")}function createSignatureHash(t,e){let s="";s+="02000000";const r=t.input.tx_hash.match(/../g).reverse().join(""),a=("00000000"+t.input.tx_pos.toString(16)).slice(-8).match(/../g).reverse().join(""),o=r+a,l=CryptoJS.SHA256(CryptoJS.SHA256(CryptoJS.enc.Hex.parse(o))).toString();s+=l;const c="feffffff",u=CryptoJS.SHA256(CryptoJS.SHA256(CryptoJS.enc.Hex.parse(c))).toString();s+=u,s+=t.input.tx_hash.match(/../g).reverse().join(""),s+=("00000000"+t.input.tx_pos.toString(16)).slice(-8).match(/../g).reverse().join("");const d="1976a914"+CryptoJS.RIPEMD160(CryptoJS.SHA256(CryptoJS.enc.Hex.parse(e))).toString()+"88ac";s+=d;const p=t.input.value.toString(16).padStart(16,"0");s+=p.match(/../g).reverse().join(""),s+=c;let m="";for(const C of t.outputs){const j=C.value.toString(16).padStart(16,"0");m+=j.match(/../g).reverse().join("");const B=createScriptPubKey(C.address),D=(B.length/2).toString(16).padStart(2,"0");m+=D,m+=B}const y=CryptoJS.SHA256(CryptoJS.SHA256(CryptoJS.enc.Hex.parse(m))).toString();s+=y,s+="00000000",s+="01000000";const b=CryptoJS.SHA256(CryptoJS.enc.Hex.parse(s));return CryptoJS.SHA256(b).toString()}function createWitnessData(t,e,s){const r=createSignatureHash(t,s),a=e.sign(r),o=ec2.curve.n.shrn(1);a.s.cmp(o)>0&&(a.s=ec2.curve.n.sub(a.s));const l=a.toDER("hex")+"01";let c="";c+="02";const u=(l.length/2).toString(16).padStart(2,"0");c+=u,c+=l;const f=(s.length/2).toString(16).padStart(2,"0");return c+=f,c+=s,c}function buildSegWitTransaction(t,e,s){let r="";r+="02000000",r+="00",r+="01",r+="01";const o=t.input.tx_hash.match(/../g).reverse().join("");r+=o;const l=t.input.tx_pos;r+=("00000000"+l.toString(16)).slice(-8).match(/../g).reverse().join(""),r+="00",r+="feffffff";const c=t.outputs.length;r+=("0"+c.toString(16)).slice(-2);for(const b of t.outputs){const E=b.value.toString(16).padStart(16,"0");r+=E.match(/../g).reverse().join("");const C=createScriptPubKey(b.address),j=(C.length/2).toString(16).padStart(2,"0");r+=j,r+=C}const u=createWitnessData(t,e,s);r+=u,r+="00000000";let f="";f+="02000000",f+="01";const d=t.input.tx_hash.match(/../g).reverse().join("");f+=d,f+=("00000000"+t.input.tx_pos.toString(16)).slice(-8).match(/../g).reverse().join(""),f+="00",f+="feffffff",f+=("0"+t.outputs.length.toString(16)).slice(-2);for(const b of t.outputs){const C=("0000000000000000"+b.value.toString(16)).slice(-16).match(/../g).reverse().join("");f+=C;const j=createScriptPubKey(b.address),B=("0"+(j.length/2).toString(16)).slice(-2);f+=B,f+=j}f+="00000000";const p=CryptoJS.SHA256(CryptoJS.enc.Hex.parse(f)),y=CryptoJS.SHA256(p).toString().match(/../g).reverse().join("");return{hex:r,txid:y}}function createAndSignTransaction(t,e){const s=e.input.address,r=t.addresses.find(f=>f.address===s);let a;if(r?.privateKey?a=r.privateKey:t.childPrivateKey?a=t.childPrivateKey:a=t.masterPrivateKey,!a)throw new Error("No private key available for address: "+s);const o=ec2.keyFromPrivate(a,"hex"),l=o.getPublic(!0,"hex"),c={input:{tx_hash:e.input.txid,tx_pos:e.input.vout,value:e.input.value},outputs:e.outputs},u=buildSegWitTransaction(c,o,l);return{raw:u.hex,txid:u.txid}}function collectUtxosForAmount(t,e,s,r){const a=t.reduce((d,p)=>d+p.value,0);if(a<e+FEE)return{success:!1,transactions:[],error:`Insufficient funds. Available: ${a/SAT} ALPHA, Required: ${(e+FEE)/SAT} ALPHA (including fee)`};const l=[...t].sort((d,p)=>d.value-p.value).find(d=>d.value>=e+FEE);if(l){const d=l.value-e-FEE,p={input:{txid:l.txid??l.tx_hash??"",vout:l.vout??l.tx_pos??0,value:l.value,address:l.address??r},outputs:[{address:s,value:e}],fee:FEE,changeAmount:d,changeAddress:r};return d>DUST&&p.outputs.push({value:d,address:r}),{success:!0,transactions:[p]}}const c=[...t].sort((d,p)=>p.value-d.value),u=[];let f=e;for(const d of c){if(f<=0)break;const p=d.value;let m=0,y=0;if(p>=f+FEE)m=f,y=p-f-FEE,f=0;else{if(m=p-FEE,m<=0)continue;f-=m}const b={input:{txid:d.txid??d.tx_hash??"",vout:d.vout??d.tx_pos??0,value:d.value,address:d.address??r},outputs:[{address:s,value:m}],fee:FEE,changeAmount:y,changeAddress:r};y>DUST&&b.outputs.push({value:y,address:r}),u.push(b)}return f>0?{success:!1,transactions:[],error:`Unable to collect enough UTXOs. Short by ${f/SAT} ALPHA after fees.`}:{success:!0,transactions:u}}async function createTransactionPlan(t,e,s,r){if(!decodeBech32(e))throw new Error("Invalid recipient address");const a=WalletAddressHelper.getDefault(t),o=r||a.address,l=Math.floor(s*SAT);let c;const u=vestingState.getMode();if(vestingState.hasClassifiedData(o)?(c=vestingState.getFilteredUtxos(o),console.log(`Using ${c.length} ${u} UTXOs`)):(c=await getUtxo(o),console.log(`Using ${c.length} UTXOs (vesting not classified yet)`)),!Array.isArray(c)||c.length===0){const f=u!=="all"?` (${u} coins)`:"";throw new Error(`No UTXOs available${f} for address: `+o)}return collectUtxosForAmount(c,l,e,o)}async function sendAlpha(t,e,s,r){const a=await createTransactionPlan(t,e,s,r);if(!a.success)throw new Error(a.error||"Transaction planning failed");const o=[];for(const l of a.transactions){const c=createAndSignTransaction(t,l),u=await broadcast(c.raw);o.push({txid:c.txid,raw:c.raw,broadcastResult:u})}return o}var L1PaymentsModule=class{_initialized=!1;_disabled=!1;_config;_identity;_addresses=[];_wallet;_transport;constructor(t){this._config={electrumUrl:t?.electrumUrl??"wss://fulcrum.unicity.network:50004",network:t?.network??"mainnet",defaultFeeRate:t?.defaultFeeRate??10,enableVesting:t?.enableVesting??!0}}async initialize(t){this._identity=t.identity,this._addresses=t.addresses??[],this._transport=t.transport,this._wallet={masterPrivateKey:t.identity.privateKey,chainCode:t.chainCode,addresses:[{address:t.identity.l1Address,publicKey:t.identity.chainPubkey,privateKey:t.identity.privateKey,path:"m/0",index:0}]};for(const e of this._addresses)e!==t.identity.l1Address&&this._wallet.addresses.push({address:e,path:null,index:this._wallet.addresses.length});this._initialized=!0}async ensureConnected(){if(this._disabled)throw new Error("L1 provider is disabled");!isWebSocketConnected()&&this._config.electrumUrl&&await connect(this._config.electrumUrl)}destroy(){isWebSocketConnected()&&disconnect(),this._initialized=!1,this._identity=void 0,this._addresses=[],this._wallet=void 0}disable(){this._disabled=!0,isWebSocketConnected()&&disconnect()}enable(){this._disabled=!1}get disabled(){return this._disabled}isL1Address(t){return t.startsWith("alpha1")||t.startsWith("alphat1")}async resolveL1Address(t){if(t.startsWith("@")){const e=t.slice(1);return this.resolveNametagToL1Address(e)}if(this.isL1Address(t))return t;try{return await this.resolveNametagToL1Address(t)}catch{throw new Error(`Recipient "${t}" is not a valid nametag or L1 address. Use @nametag for explicit nametag or a valid alpha1... address.`)}}async resolveNametagToL1Address(t){if(!this._transport?.resolve)throw new Error("Transport provider does not support resolution");const e=await this._transport.resolve(t);if(!e)throw new Error(`Nametag not found: ${t}`);if(!e.l1Address)throw new Error(`Nametag @${t} does not have L1 address information. The owner needs to update their nametag registration.`);return e.l1Address}async send(t){if(this.ensureInitialized(),await this.ensureConnected(),!this._wallet||!this._identity)return{success:!1,error:"No wallet available"};try{const e=await this.resolveL1Address(t.to),s=parseInt(t.amount,10)/1e8,r=await sendAlpha(this._wallet,e,s,this._identity.l1Address);return r&&r.length>0?{success:!0,txHash:r.map(o=>o.txid)[0]}:{success:!1,error:"Transaction failed - no results returned"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getBalance(){this.ensureInitialized(),await this.ensureConnected();const t=this._getWatchedAddresses();let e=0,s=BigInt(0),r=BigInt(0);for(const o of t){const l=await getBalance(o);e+=l}const a=BigInt(Math.floor(e*1e8));if(this._config.enableVesting){await vestingClassifier.initDB();const o=await this._getAllUtxos(),l=await vestingClassifier.classifyUtxos(o);for(const c of l.vested)s+=BigInt(c.value);for(const c of l.unvested)r+=BigInt(c.value)}return{confirmed:a.toString(),unconfirmed:"0",vested:s.toString(),unvested:r.toString(),total:a.toString()}}async getUtxos(){this.ensureInitialized(),await this.ensureConnected();const t=[],e=await getCurrentBlockHeight(),s=await this._getAllUtxos(),r=new Set,a=new Map;if(this._config.enableVesting){await vestingClassifier.initDB();const o=await vestingClassifier.classifyUtxos(s);for(const l of o.vested){const c=`${l.tx_hash}:${l.tx_pos}`;r.add(c),a.set(c,l.coinbaseHeight??null)}for(const l of o.unvested){const c=`${l.tx_hash}:${l.tx_pos}`;a.set(c,l.coinbaseHeight??null)}}for(const o of s){const l=`${o.tx_hash}:${o.tx_pos}`,c=r.has(l),u=a.get(l)??void 0;t.push({txid:o.tx_hash??o.txid??"",vout:o.tx_pos??o.vout??0,amount:o.value.toString(),address:o.address??"",isVested:c,confirmations:e-(o.height||e),coinbaseHeight:u??void 0})}return t}async getHistory(t){await this.ensureConnected(),this.ensureInitialized();const e=this._getWatchedAddresses(),s=[],r=new Set,a=await getCurrentBlockHeight(),o=new Map,l=async u=>{if(o.has(u))return o.get(u);const f=await getTransaction(u);return o.set(u,f),f},c=new Set(e.map(u=>u.toLowerCase()));for(const u of e){const f=await getTransactionHistory(u);for(const d of f){if(r.has(d.tx_hash))continue;r.add(d.tx_hash);const p=await l(d.tx_hash);if(!p)continue;let m=!1;for(const D of p.vin??[]){if(!D.txid)continue;const F=await l(D.txid);if(F?.vout?.[D.vout]){const q=F.vout[D.vout];if([...q.scriptPubKey?.addresses??[],...q.scriptPubKey?.address?[q.scriptPubKey.address]:[]].some(ee=>c.has(ee.toLowerCase()))){m=!0;break}}}let y=0,b=0,E=u,C="";if(p.vout)for(const D of p.vout){const F=[...D.scriptPubKey?.addresses??[],...D.scriptPubKey?.address?[D.scriptPubKey.address]:[]],q=F.some(ee=>c.has(ee.toLowerCase())),V=Math.floor((D.value??0)*1e8);q?(y+=V,E||(E=F[0])):(b+=V,!C&&F.length>0&&(C=F[0]))}const j=m?b.toString():y.toString(),B=m&&C||E;s.push({txid:d.tx_hash,type:m?"send":"receive",amount:j,address:B,confirmations:d.height>0?a-d.height:0,timestamp:p.time?p.time*1e3:Date.now(),blockHeight:d.height>0?d.height:void 0})}}return s.sort((u,f)=>(f.blockHeight??0)-(u.blockHeight??0)),t?s.slice(0,t):s}async getTransaction(t){this.ensureInitialized(),await this.ensureConnected();const e=await getTransaction(t);if(!e)return null;const s=this._getWatchedAddresses(),r=await getCurrentBlockHeight(),a=e.vin?.some(c=>s.includes(c.txid??""));let o="0",l="";if(e.vout)for(const c of e.vout){const u=c.scriptPubKey?.addresses??[];c.scriptPubKey?.address&&u.push(c.scriptPubKey.address);const f=u.find(d=>s.includes(d));if(f){o=Math.floor((c.value??0)*1e8).toString(),l=f;break}}return{txid:t,type:a?"send":"receive",amount:o,address:l,confirmations:e.confirmations??0,timestamp:e.time?e.time*1e3:Date.now(),blockHeight:e.confirmations?r-e.confirmations+1:void 0}}async estimateFee(t,e){if(this.ensureInitialized(),await this.ensureConnected(),!this._wallet)return{fee:"0",feeRate:this._config.defaultFeeRate??10};try{const s=parseInt(e,10)/1e8,r=await createTransactionPlan(this._wallet,t,s);return r.success?{fee:r.transactions.reduce((o,l)=>o+l.fee,0).toString(),feeRate:this._config.defaultFeeRate??10}:{fee:"0",feeRate:this._config.defaultFeeRate??10}}catch{return{fee:"10000",feeRate:this._config.defaultFeeRate??10}}}getAddresses(){return[...this._addresses]}addAddress(t){this._addresses.includes(t)||(this._addresses.push(t),this._wallet&&this._wallet.addresses.push({address:t,path:null,index:this._wallet.addresses.length}))}getVestingThreshold(){return VESTING_THRESHOLD}isConnected(){return isWebSocketConnected()}ensureInitialized(){if(!this._initialized)throw new Error("L1PaymentsModule not initialized")}_getWatchedAddresses(){const t=[...this._addresses];return this._identity?.l1Address&&!t.includes(this._identity.l1Address)&&t.unshift(this._identity.l1Address),t}async _getAllUtxos(){const t=this._getWatchedAddresses(),e=[];for(const s of t){const r=await getUtxo(s);e.push(...r)}return e}},TokenSplitCalculator=class{async calculateOptimalSplit(t,e,s){const r=[];for(const f of t)if(f.coinId===s&&f.status==="confirmed"&&f.sdkData)try{const d=JSON.parse(f.sdkData),p=await Token.fromJSON(d),m=this.getTokenBalance(p,s);if(m<=0n){console.warn(`[SplitCalculator] Token ${f.id} has 0 balance for coinId ${s}`);continue}r.push({sdkToken:p,amount:m,uiToken:f})}catch(d){console.warn("[SplitCalculator] Failed to parse token",f.id,d)}r.sort((f,d)=>f.amount<d.amount?-1:1);const a=r.reduce((f,d)=>f+d.amount,0n);if(a<e)return console.error(`[SplitCalculator] Insufficient funds. Available: ${a}, Required: ${e}`),null;const o=r.find(f=>f.amount===e);if(o)return this.createDirectPlan([o],e,s);const l=Math.min(5,r.length);for(let f=2;f<=l;f++){const d=this.findCombinationOfSize(r,e,f);if(d)return this.createDirectPlan(d,e,s)}const c=[];let u=0n;for(const f of r){const d=u+f.amount;if(d===e)return c.push(f),this.createDirectPlan(c,e,s);if(d<e)c.push(f),u=d;else{const p=e-u,m=f.amount-p;return{tokensToTransferDirectly:c,tokenToSplit:f,splitAmount:p,remainderAmount:m,totalTransferAmount:e,coinId:s,requiresSplit:!0}}}return null}getTokenBalance(t,e){try{if(!t.coins)return 0n;const s=CoinId.fromJSON(e);return t.coins.get(s)??0n}catch{return 0n}}createDirectPlan(t,e,s){return{tokensToTransferDirectly:t,tokenToSplit:null,splitAmount:null,remainderAmount:null,totalTransferAmount:e,coinId:s,requiresSplit:!1}}findCombinationOfSize(t,e,s){const r=this.generateCombinations(t,s);for(const a of r)if(a.reduce((l,c)=>l+c.amount,0n)===e)return a;return null}*generateCombinations(t,e,s=0,r=[]){if(e===0){yield r;return}for(let a=s;a<t.length;a++)yield*this.generateCombinations(t,e-1,a+1,[...r,t[a]])}};async function sha2562$1(t){const e=typeof t=="string"?new TextEncoder().encode(t):t,s=new ArrayBuffer(e.length);new Uint8Array(s).set(e);const r=await crypto.subtle.digest("SHA-256",s);return new Uint8Array(r)}function toHex(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}function fromHex(t){const e=new Uint8Array(t.length/2);for(let s=0;s<t.length;s+=2)e[s/2]=parseInt(t.slice(s,s+2),16);return e}var TokenSplitExecutor=class{client;trustBase;signingService;constructor(t){this.client=t.stateTransitionClient,this.trustBase=t.trustBase,this.signingService=t.signingService}async executeSplit(t,e,s,r,a){const o=toHex(t.id.bytes);console.log(`[TokenSplitExecutor] Splitting token ${o.slice(0,8)}...`);const l=new CoinId(fromHex(r)),c=`${o}_${e.toString()}_${s.toString()}`,u=new TokenId(await sha2562$1(c)),f=new TokenId(await sha2562$1(c+"_sender")),d=await sha2562$1(c+"_recipient_salt"),p=await sha2562$1(c+"_sender_salt"),y=await(await UnmaskedPredicateReference.create(t.type,this.signingService.algorithm,this.signingService.publicKey,HashAlgorithm.SHA256)).toAddress(),b=new TokenSplitBuilder,E=TokenCoinData.create([[l,e]]);b.createToken(u,t.type,new Uint8Array(0),E,y,d,null);const C=TokenCoinData.create([[l,s]]);b.createToken(f,t.type,new Uint8Array(0),C,y,p,null);const j=await b.build(t);console.log("[TokenSplitExecutor] Step 1: Burning original token...");const B=await sha2562$1(c+"_burn_salt"),D=await j.createBurnCommitment(B,this.signingService),F=await this.client.submitTransferCommitment(D);if(F.status!=="SUCCESS"&&F.status!=="REQUEST_ID_EXISTS")throw new Error(`Burn failed: ${F.status}`);const q=await waitInclusionProof(this.trustBase,this.client,D),V=D.toTransaction(q);console.log("[TokenSplitExecutor] Original token burned."),console.log("[TokenSplitExecutor] Step 2: Minting split tokens...");const ee=await j.createSplitMintCommitments(this.trustBase,V),Q=[];for(const M of ee){const I=await this.client.submitMintCommitment(M);if(I.status!=="SUCCESS"&&I.status!=="REQUEST_ID_EXISTS")throw new Error(`Mint split token failed: ${I.status}`);const $=await waitInclusionProof(this.trustBase,this.client,M),A=toHex(M.transactionData.tokenId.bytes),L=toHex(u.bytes);Q.push({commitment:M,inclusionProof:$,isForRecipient:A===L,tokenId:M.transactionData.tokenId,salt:M.transactionData.salt})}console.log("[TokenSplitExecutor] Split tokens minted.");const W=Q.find(M=>M.isForRecipient),Z=Q.find(M=>!M.isForRecipient),z=async(M,I)=>{const $=await UnmaskedPredicate.create(M.tokenId,t.type,this.signingService,HashAlgorithm.SHA256,M.salt),A=new TokenState($,null),L=await Token.mint(this.trustBase,A,M.commitment.toTransaction(M.inclusionProof));if(!(await L.verify(this.trustBase)).isSuccessful)throw new Error(`Token verification failed: ${I}`);return L},O=await z(W,"Recipient"),k=await z(Z,"Sender");console.log("[TokenSplitExecutor] Step 3: Transferring to recipient...");const v=await sha2562$1(c+"_transfer_salt"),S=await TransferCommitment.create(O,a,v,null,null,this.signingService),N=await this.client.submitTransferCommitment(S);if(N.status!=="SUCCESS"&&N.status!=="REQUEST_ID_EXISTS")throw new Error(`Transfer failed: ${N.status}`);const R=await waitInclusionProof(this.trustBase,this.client,S),T=S.toTransaction(R);return console.log("[TokenSplitExecutor] Split transfer complete!"),{tokenForRecipient:O,tokenForSender:k,recipientTransferTx:T}}},UNICITY_TOKEN_TYPE_HEX="f8aa13834268d29355ff12183066f0cb902003629bbc5eb9ef0efbe397867509",NametagMinter=class{client;trustBase;signingService;skipVerification;debug;constructor(t){this.client=t.stateTransitionClient,this.trustBase=t.trustBase,this.signingService=t.signingService,this.skipVerification=t.skipVerification??!1,this.debug=t.debug??!1}log(...t){this.debug&&console.log("[NametagMinter]",...t)}async isNametagAvailable(t){try{const e=t.startsWith("@")?t.slice(1):t,s=normalizeNametag(e),r=await TokenId.fromNameTag(s);return!await this.client.isMinted(this.trustBase,r)}catch(e){return this.log("Error checking nametag availability:",e),!1}}async mintNametag(t,e){const s=t.startsWith("@")?t.slice(1):t,r=normalizeNametag(s);this.log(`Starting mint for nametag: ${r}`);try{const a=await TokenId.fromNameTag(r),o=new TokenType(Buffer.from(UNICITY_TOKEN_TYPE_HEX,"hex")),l=new TextEncoder().encode(r),c=this.signingService.publicKey,u=new Uint8Array(c.length+l.length);u.set(c,0),u.set(l,c.length);const f=await crypto.subtle.digest("SHA-256",u),d=new Uint8Array(f);this.log("Generated deterministic salt");const p=await MintTransactionData.createFromNametag(r,o,e,d,e);this.log("Created MintTransactionData");const m=await MintCommitment.create(p);this.log("Created MintCommitment");const y=3;let b=!1;for(let q=1;q<=y;q++)try{this.log(`Submitting commitment (attempt ${q}/${y})...`);const V=await this.client.submitMintCommitment(m);if(V.status==="SUCCESS"||V.status==="REQUEST_ID_EXISTS"){this.log(`Commitment ${V.status==="REQUEST_ID_EXISTS"?"already exists":"submitted successfully"}`),b=!0;break}else{if(this.log(`Commitment failed: ${V.status}`),q===y)return{success:!1,error:`Failed to submit commitment after ${y} attempts: ${V.status}`};await new Promise(ee=>setTimeout(ee,1e3*q))}}catch(V){if(this.log(`Attempt ${q} error:`,V),q===y)return{success:!1,error:`Submit failed: ${V instanceof Error?V.message:String(V)}`};await new Promise(ee=>setTimeout(ee,1e3*q))}if(!b)return{success:!1,error:"Failed to submit commitment after retries"};this.log("Waiting for inclusion proof...");const E=await waitInclusionProof(this.trustBase,this.client,m);this.log("Received inclusion proof");const C=m.toTransaction(E),j=await UnmaskedPredicate.create(a,o,this.signingService,HashAlgorithm.SHA256,d),B=new TokenState(j,null);let D;if(this.skipVerification){this.log("Creating token WITHOUT verification (dev mode)");const q={version:"2.0",state:B.toJSON(),genesis:C.toJSON(),transactions:[],nametags:[]};D=await Token.fromJSON(q)}else D=await Token.mint(this.trustBase,B,C);this.log(`Nametag minted successfully: ${r}`);const F={name:r,token:D.toJSON(),timestamp:Date.now(),format:"txf",version:"2.0"};return{success:!0,token:D,nametagData:F}}catch(a){return this.log("Minting failed:",a),{success:!1,error:a instanceof Error?a.message:String(a)}}}},DEFAULT_ENCRYPTION_KEY="sphere-default-key",STORAGE_KEYS_GLOBAL$1={MNEMONIC:"mnemonic",MASTER_KEY:"master_key",CHAIN_CODE:"chain_code",DERIVATION_PATH:"derivation_path",BASE_PATH:"base_path",DERIVATION_MODE:"derivation_mode",WALLET_SOURCE:"wallet_source",WALLET_EXISTS:"wallet_exists",CURRENT_ADDRESS_INDEX:"current_address_index",ADDRESS_NAMETAGS:"address_nametags",TRACKED_ADDRESSES:"tracked_addresses",LAST_WALLET_EVENT_TS:"last_wallet_event_ts",GROUP_CHAT_GROUPS:"group_chat_groups",GROUP_CHAT_MESSAGES:"group_chat_messages",GROUP_CHAT_MEMBERS:"group_chat_members",GROUP_CHAT_PROCESSED_EVENTS:"group_chat_processed_events",GROUP_CHAT_RELAY_URL:"group_chat_relay_url",TOKEN_REGISTRY_CACHE:"token_registry_cache",TOKEN_REGISTRY_CACHE_TS:"token_registry_cache_ts",PRICE_CACHE:"price_cache",PRICE_CACHE_TS:"price_cache_ts"},STORAGE_KEYS_ADDRESS$1={PENDING_TRANSFERS:"pending_transfers",OUTBOX:"outbox",MESSAGES:"messages",TRANSACTION_HISTORY:"transaction_history",PENDING_V5_TOKENS:"pending_v5_tokens"};function getAddressId$1(t){let e=t;e.startsWith("DIRECT://")?e=e.slice(9):e.startsWith("DIRECT:")&&(e=e.slice(7));const s=e.slice(0,6).toLowerCase(),r=e.slice(-6).toLowerCase();return`DIRECT_${s}_${r}`}var DEFAULT_NOSTR_RELAYS$1=["wss://relay.unicity.network","wss://relay.damus.io","wss://nos.lol","wss://relay.nostr.band"],NIP29_KINDS={CHAT_MESSAGE:9,THREAD_ROOT:11,THREAD_REPLY:12,JOIN_REQUEST:9021,LEAVE_REQUEST:9022,PUT_USER:9e3,REMOVE_USER:9001,EDIT_METADATA:9002,DELETE_EVENT:9005,CREATE_GROUP:9007,DELETE_GROUP:9008,CREATE_INVITE:9009,GROUP_METADATA:39e3,GROUP_ADMINS:39001,GROUP_MEMBERS:39002,GROUP_ROLES:39003},DEFAULT_AGGREGATOR_URL$1="https://aggregator.unicity.network/rpc",DEV_AGGREGATOR_URL$1="https://dev-aggregator.dyndns.org/rpc",TEST_AGGREGATOR_URL$1="https://goggregator-test.unicity.network",DEFAULT_IPFS_GATEWAYS$1=["https://unicity-ipfs1.dyndns.org"],DEFAULT_BASE_PATH="m/44'/0'/0'",DEFAULT_ELECTRUM_URL$1="wss://fulcrum.alpha.unicity.network:50004",TEST_ELECTRUM_URL$1="wss://fulcrum.alpha.testnet.unicity.network:50004",TOKEN_REGISTRY_URL$1="https://raw.githubusercontent.com/unicitynetwork/unicity-ids/refs/heads/main/unicity-ids.testnet.json",TOKEN_REGISTRY_REFRESH_INTERVAL$1=36e5,TEST_NOSTR_RELAYS$1=["wss://nostr-relay.testnet.unicity.network"],DEFAULT_GROUP_RELAYS$1=["wss://sphere-relay.unicity.network"],NETWORKS$1={mainnet:{name:"Mainnet",aggregatorUrl:DEFAULT_AGGREGATOR_URL$1,nostrRelays:DEFAULT_NOSTR_RELAYS$1,ipfsGateways:DEFAULT_IPFS_GATEWAYS$1,electrumUrl:DEFAULT_ELECTRUM_URL$1,groupRelays:DEFAULT_GROUP_RELAYS$1,tokenRegistryUrl:TOKEN_REGISTRY_URL$1},testnet:{name:"Testnet",aggregatorUrl:TEST_AGGREGATOR_URL$1,nostrRelays:TEST_NOSTR_RELAYS$1,ipfsGateways:DEFAULT_IPFS_GATEWAYS$1,electrumUrl:TEST_ELECTRUM_URL$1,groupRelays:DEFAULT_GROUP_RELAYS$1,tokenRegistryUrl:TOKEN_REGISTRY_URL$1},dev:{name:"Development",aggregatorUrl:DEV_AGGREGATOR_URL$1,nostrRelays:TEST_NOSTR_RELAYS$1,ipfsGateways:DEFAULT_IPFS_GATEWAYS$1,electrumUrl:TEST_ELECTRUM_URL$1,groupRelays:DEFAULT_GROUP_RELAYS$1,tokenRegistryUrl:TOKEN_REGISTRY_URL$1}},ARCHIVED_PREFIX="archived-",FORKED_PREFIX="_forked_",RESERVED_KEYS=["_meta","_nametag","_nametags","_tombstones","_invalidatedNametags","_outbox","_mintOutbox","_sent","_invalid","_integrity"];function isTokenKey(t){return t.startsWith("_")&&!t.startsWith(ARCHIVED_PREFIX)&&!t.startsWith(FORKED_PREFIX)&&!RESERVED_KEYS.includes(t)}function isArchivedKey(t){return t.startsWith(ARCHIVED_PREFIX)}function isForkedKey(t){return t.startsWith(FORKED_PREFIX)}function tokenIdFromKey(t){return t.startsWith("_")?t.substring(1):t}function keyFromTokenId(t){return`_${t}`}function tokenIdFromArchivedKey(t){return t.startsWith(ARCHIVED_PREFIX)?t.substring(ARCHIVED_PREFIX.length):t}function archivedKeyFromTokenId(t){return`${ARCHIVED_PREFIX}${t}`}function forkedKeyFromTokenIdAndState(t,e){return`${FORKED_PREFIX}${t}_${e}`}function parseForkedKey(t){if(!t.startsWith(FORKED_PREFIX))return null;const e=t.substring(FORKED_PREFIX.length),s=e.indexOf("_");return s===-1||s<64?null:{tokenId:e.substring(0,s),stateHash:e.substring(s+1)}}var FETCH_TIMEOUT_MS$1=1e4,TokenRegistry$1=class Vr{static instance=null;definitionsById;definitionsBySymbol;definitionsByName;remoteUrl=null;storage=null;refreshIntervalMs=TOKEN_REGISTRY_REFRESH_INTERVAL$1;refreshTimer=null;lastRefreshAt=0;refreshPromise=null;initialLoadPromise=null;constructor(){this.definitionsById=new Map,this.definitionsBySymbol=new Map,this.definitionsByName=new Map}static getInstance(){return Vr.instance||(Vr.instance=new Vr),Vr.instance}static configure(e){const s=Vr.getInstance();e.remoteUrl!==void 0&&(s.remoteUrl=e.remoteUrl),e.storage!==void 0&&(s.storage=e.storage),e.refreshIntervalMs!==void 0&&(s.refreshIntervalMs=e.refreshIntervalMs);const r=e.autoRefresh??!0;s.initialLoadPromise=s.performInitialLoad(r)}static resetInstance(){Vr.instance&&Vr.instance.stopAutoRefresh(),Vr.instance=null}static destroy(){Vr.resetInstance()}static async waitForReady(e=1e4){const s=Vr.getInstance();return s.initialLoadPromise?e<=0?s.initialLoadPromise:Promise.race([s.initialLoadPromise,new Promise(r=>setTimeout(()=>r(!1),e))]):s.definitionsById.size>0}async performInitialLoad(e){let s=!1;return this.storage&&(s=await this.loadFromCache()),s?(e&&this.remoteUrl&&this.startAutoRefresh(),!0):e&&this.remoteUrl?(s=await this.refreshFromRemote(),this.stopAutoRefresh(),this.refreshTimer=setInterval(()=>{this.refreshFromRemote()},this.refreshIntervalMs),s):!1}async loadFromCache(){if(!this.storage)return!1;try{const[e,s]=await Promise.all([this.storage.get(STORAGE_KEYS_GLOBAL$1.TOKEN_REGISTRY_CACHE),this.storage.get(STORAGE_KEYS_GLOBAL$1.TOKEN_REGISTRY_CACHE_TS)]);if(!e||!s)return!1;const r=parseInt(s,10);if(isNaN(r)||Date.now()-r>this.refreshIntervalMs||this.lastRefreshAt>r)return!1;const o=JSON.parse(e);return this.isValidDefinitionsArray(o)?(this.applyDefinitions(o),this.lastRefreshAt=r,!0):!1}catch{return!1}}async saveToCache(e){if(this.storage)try{await Promise.all([this.storage.set(STORAGE_KEYS_GLOBAL$1.TOKEN_REGISTRY_CACHE,JSON.stringify(e)),this.storage.set(STORAGE_KEYS_GLOBAL$1.TOKEN_REGISTRY_CACHE_TS,String(Date.now()))])}catch{}}applyDefinitions(e){this.definitionsById.clear(),this.definitionsBySymbol.clear(),this.definitionsByName.clear();for(const s of e){const r=s.id.toLowerCase();this.definitionsById.set(r,s),s.symbol&&this.definitionsBySymbol.set(s.symbol.toUpperCase(),s),this.definitionsByName.set(s.name.toLowerCase(),s)}}isValidDefinitionsArray(e){return Array.isArray(e)&&e.every(s=>s&&typeof s=="object"&&"id"in s)}async refreshFromRemote(){if(!this.remoteUrl)return!1;if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.doRefresh();try{return await this.refreshPromise}finally{this.refreshPromise=null}}async doRefresh(){try{const e=new AbortController,s=setTimeout(()=>e.abort(),FETCH_TIMEOUT_MS$1);let r;try{r=await fetch(this.remoteUrl,{headers:{Accept:"application/json"},signal:e.signal})}finally{clearTimeout(s)}if(!r.ok)return console.warn(`[TokenRegistry] Remote fetch failed: HTTP ${r.status} ${r.statusText}`),!1;const a=await r.json();if(!this.isValidDefinitionsArray(a))return console.warn("[TokenRegistry] Remote data is not a valid token definitions array"),!1;const o=a;return this.applyDefinitions(o),this.lastRefreshAt=Date.now(),this.saveToCache(o),!0}catch(e){const s=e instanceof Error?e.message:String(e);return console.warn(`[TokenRegistry] Remote refresh failed: ${s}`),!1}}startAutoRefresh(e){this.stopAutoRefresh(),e!==void 0&&(this.refreshIntervalMs=e),this.refreshFromRemote(),this.refreshTimer=setInterval(()=>{this.refreshFromRemote()},this.refreshIntervalMs)}stopAutoRefresh(){this.refreshTimer!==null&&(clearInterval(this.refreshTimer),this.refreshTimer=null)}getLastRefreshAt(){return this.lastRefreshAt}getDefinition(e){if(e)return this.definitionsById.get(e.toLowerCase())}getDefinitionBySymbol(e){if(e)return this.definitionsBySymbol.get(e.toUpperCase())}getDefinitionByName(e){if(e)return this.definitionsByName.get(e.toLowerCase())}getSymbol(e){const s=this.getDefinition(e);return s?.symbol?s.symbol:e.slice(0,6).toUpperCase()}getName(e){const s=this.getDefinition(e);return s?.name?s.name.charAt(0).toUpperCase()+s.name.slice(1):e}getDecimals(e){return this.getDefinition(e)?.decimals??0}getIconUrl(e,s=!0){const r=this.getDefinition(e);if(!r?.icons||r.icons.length===0)return null;if(s){const a=r.icons.find(o=>o.url.toLowerCase().includes(".png"));if(a)return a.url}return r.icons[0].url}isKnown(e){return this.definitionsById.has(e.toLowerCase())}getAllDefinitions(){return Array.from(this.definitionsById.values())}getFungibleTokens(){return this.getAllDefinitions().filter(e=>e.assetKind==="fungible")}getNonFungibleTokens(){return this.getAllDefinitions().filter(e=>e.assetKind==="non-fungible")}getCoinIdBySymbol(e){return this.getDefinitionBySymbol(e)?.id}getCoinIdByName(e){return this.getDefinitionByName(e)?.id}};function bytesToHex3(t){return(Array.isArray(t)?t:Array.from(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}function normalizeToHex(t){if(typeof t=="string")return t;if(t&&typeof t=="object"){const e=t;if("bytes"in e&&(Array.isArray(e.bytes)||e.bytes instanceof Uint8Array))return bytesToHex3(e.bytes);if(e.type==="Buffer"&&Array.isArray(e.data))return bytesToHex3(e.data)}return String(t)}function normalizeSdkTokenToStorage(t){const e=JSON.parse(JSON.stringify(t));if(e.genesis?.data){const s=e.genesis.data;s.tokenId!==void 0&&(s.tokenId=normalizeToHex(s.tokenId)),s.tokenType!==void 0&&(s.tokenType=normalizeToHex(s.tokenType)),s.salt!==void 0&&(s.salt=normalizeToHex(s.salt))}if(e.genesis?.inclusionProof?.authenticator){const s=e.genesis.inclusionProof.authenticator;s.publicKey!==void 0&&(s.publicKey=normalizeToHex(s.publicKey)),s.signature!==void 0&&(s.signature=normalizeToHex(s.signature))}if(Array.isArray(e.transactions)){for(const s of e.transactions)if(s.inclusionProof?.authenticator){const r=s.inclusionProof.authenticator;r.publicKey!==void 0&&(r.publicKey=normalizeToHex(r.publicKey)),r.signature!==void 0&&(r.signature=normalizeToHex(r.signature))}}return e}function tokenToTxf(t){const e=t.sdkData;if(!e)return null;try{const s=normalizeSdkTokenToStorage(JSON.parse(e));return!s.genesis||!s.state?null:(s.version||(s.version="2.0"),s.transactions||(s.transactions=[]),s.nametags||(s.nametags=[]),s._integrity||(s._integrity={genesisDataJSONHash:"0000"+"0".repeat(60)}),s)}catch{return null}}function determineTokenStatus(t){return t.transactions.length>0&&t.transactions[t.transactions.length-1].inclusionProof===null?"pending":"confirmed"}function txfToToken(t,e){const s=e.genesis.data.coinData,r=s.reduce((d,[,p])=>d+BigInt(p||"0"),BigInt(0));let a=s[0]?.[0]||"";for(const[d,p]of s)if(BigInt(p||"0")>0){a=d;break}const l=e.genesis.data.tokenType==="455ad8720656b08e8dbd5bac1f3c73eeea5431565f6c1c3af742b1aa12d41d89",c=Date.now(),f=TokenRegistry$1.getInstance().getDefinition(a);return{id:t,coinId:a,symbol:l?"NFT":f?.symbol||a.slice(0,8),name:l?"NFT":f?.name?f.name.charAt(0).toUpperCase()+f.name.slice(1):"Token",decimals:l?0:f?.decimals??8,amount:r.toString(),status:determineTokenStatus(e),createdAt:c,updatedAt:c,sdkData:JSON.stringify(e)}}async function buildTxfStorageData(t,e,s){const r={_meta:{...e,formatVersion:"2.0"}};s?.nametags&&s.nametags.length>0&&(r._nametags=s.nametags),s?.tombstones&&s.tombstones.length>0&&(r._tombstones=s.tombstones),s?.outboxEntries&&s.outboxEntries.length>0&&(r._outbox=s.outboxEntries),s?.mintOutboxEntries&&s.mintOutboxEntries.length>0&&(r._mintOutbox=s.mintOutboxEntries),s?.invalidatedNametags&&s.invalidatedNametags.length>0&&(r._invalidatedNametags=s.invalidatedNametags);for(const a of t){const o=tokenToTxf(a);if(o){const l=o.genesis.data.tokenId;r[keyFromTokenId(l)]=o}}if(s?.archivedTokens&&s.archivedTokens.size>0)for(const[a,o]of s.archivedTokens)r[archivedKeyFromTokenId(a)]=o;if(s?.forkedTokens&&s.forkedTokens.size>0)for(const[a,o]of s.forkedTokens){const[l,c]=a.split("_");l&&c&&(r[forkedKeyFromTokenIdAndState(l,c)]=o)}return r}function parseTxfStorageData(t){const e={tokens:[],meta:null,nametags:[],tombstones:[],archivedTokens:new Map,forkedTokens:new Map,outboxEntries:[],mintOutboxEntries:[],invalidatedNametags:[],validationErrors:[]};if(!t||typeof t!="object")return e.validationErrors.push("Storage data is not an object"),e;const s=t;s._meta&&typeof s._meta=="object"&&(e.meta=s._meta);const r=new Set;if(Array.isArray(s._nametags))for(const a of s._nametags)a&&typeof a=="object"&&typeof a.name=="string"&&(e.nametags.push(a),r.add(a.name));if(s._nametag&&typeof s._nametag=="object"){const a=s._nametag;typeof a.name=="string"&&!r.has(a.name)&&e.nametags.push(a)}if(s._tombstones&&Array.isArray(s._tombstones))for(const a of s._tombstones)typeof a=="object"&&a!==null&&typeof a.tokenId=="string"&&typeof a.stateHash=="string"&&typeof a.timestamp=="number"&&e.tombstones.push(a);if(s._outbox&&Array.isArray(s._outbox))for(const a of s._outbox)typeof a=="object"&&a!==null&&typeof a.id=="string"&&typeof a.status=="string"&&e.outboxEntries.push(a);if(s._mintOutbox&&Array.isArray(s._mintOutbox))for(const a of s._mintOutbox)typeof a=="object"&&a!==null&&typeof a.id=="string"&&typeof a.status=="string"&&e.mintOutboxEntries.push(a);if(s._invalidatedNametags&&Array.isArray(s._invalidatedNametags))for(const a of s._invalidatedNametags)typeof a=="object"&&a!==null&&typeof a.name=="string"&&e.invalidatedNametags.push(a);for(const a of Object.keys(s))if(isTokenKey(a)){const o=tokenIdFromKey(a);try{const l=s[a];if(l?.genesis?.data?.tokenId){const c=txfToToken(o,l);e.tokens.push(c)}}catch(l){e.validationErrors.push(`Token ${o}: ${l}`)}}else if(isArchivedKey(a)){const o=tokenIdFromArchivedKey(a);try{const l=s[a];l?.genesis?.data?.tokenId&&e.archivedTokens.set(o,l)}catch{e.validationErrors.push(`Archived token ${o}: invalid structure`)}}else if(isForkedKey(a)){const o=parseForkedKey(a);if(o)try{const l=s[a];if(l?.genesis?.data?.tokenId){const c=`${o.tokenId}_${o.stateHash}`;e.forkedTokens.set(c,l)}}catch{e.validationErrors.push(`Forked token ${o.tokenId}: invalid structure`)}}else if(a.startsWith("token-"))try{const l=s[a]?.token;if(l?.genesis?.data?.tokenId){const c=l.genesis.data.tokenId,u=txfToToken(c,l);e.tokens.push(u)}}catch(o){e.validationErrors.push(`Token ${a}: ${o}`)}return e}function getCurrentStateHash(t){if(t.transactions&&t.transactions.length>0){const e=t.transactions[t.transactions.length-1];if(e?.newStateHash)return e.newStateHash;if(e?.inclusionProof?.authenticator?.stateHash)return e.inclusionProof.authenticator.stateHash}if(t._integrity?.currentStateHash)return t._integrity.currentStateHash;if(t.genesis?.inclusionProof?.authenticator?.stateHash)return t.genesis.inclusionProof.authenticator.stateHash}async function sha2563(t){const e=typeof t=="string"?new TextEncoder().encode(t):t,s=new ArrayBuffer(e.length);new Uint8Array(s).set(e);const r=await crypto.subtle.digest("SHA-256",s);return new Uint8Array(r)}function toHex2(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}function fromHex2(t){const e=new Uint8Array(t.length/2);for(let s=0;s<t.length;s+=2)e[s/2]=parseInt(t.slice(s,s+2),16);return e}var InstantSplitExecutor=class{client;trustBase;signingService;devMode;constructor(t){this.client=t.stateTransitionClient,this.trustBase=t.trustBase,this.signingService=t.signingService,this.devMode=t.devMode??!1}async executeSplitInstant(t,e,s,r,a,o,l,c){const u=performance.now(),f=crypto.randomUUID(),d=toHex2(t.id.bytes);console.log(`[InstantSplit] Starting V5 split for token ${d.slice(0,8)}...`);try{const p=new CoinId(fromHex2(r)),m=`${d}_${e.toString()}_${s.toString()}_${Date.now()}`,y=new TokenId(await sha2563(m)),b=new TokenId(await sha2563(m+"_sender")),E=await sha2563(m+"_recipient_salt"),C=await sha2563(m+"_sender_salt"),B=await(await UnmaskedPredicateReference.create(t.type,this.signingService.algorithm,this.signingService.publicKey,HashAlgorithm.SHA256)).toAddress(),D=new TokenSplitBuilder,F=TokenCoinData.create([[p,e]]);D.createToken(y,t.type,new Uint8Array(0),F,B,E,null);const q=TokenCoinData.create([[p,s]]);D.createToken(b,t.type,new Uint8Array(0),q,B,C,null);const V=await D.build(t);console.log("[InstantSplit] Step 1: Creating and submitting burn...");const ee=await sha2563(m+"_burn_salt"),Q=await V.createBurnCommitment(ee,this.signingService),W=await this.client.submitTransferCommitment(Q);if(W.status!=="SUCCESS"&&W.status!=="REQUEST_ID_EXISTS")throw new Error(`Burn submission failed: ${W.status}`);console.log("[InstantSplit] Step 2: Waiting for burn proof...");const Z=this.devMode?await this.waitInclusionProofWithDevBypass(Q,c?.burnProofTimeoutMs):await waitInclusionProof(this.trustBase,this.client,Q),z=Q.toTransaction(Z),O=performance.now()-u;console.log(`[InstantSplit] Burn proof received in ${O.toFixed(0)}ms`),c?.onBurnCompleted?.(JSON.stringify(z.toJSON())),console.log("[InstantSplit] Step 3: Creating mint commitments...");const k=await V.createSplitMintCommitments(this.trustBase,z),v=toHex2(y.bytes),S=toHex2(b.bytes),N=k.find(ae=>toHex2(ae.transactionData.tokenId.bytes)===v),R=k.find(ae=>toHex2(ae.transactionData.tokenId.bytes)===S);if(!N||!R)throw new Error("Failed to find expected mint commitments");console.log("[InstantSplit] Step 4: Creating transfer commitment...");const T=await sha2563(m+"_transfer_salt"),M=await this.createTransferCommitmentFromMintData(N.transactionData,a,T,this.signingService),I=await UnmaskedPredicate.create(y,t.type,this.signingService,HashAlgorithm.SHA256,E),$=new TokenState(I,null);console.log("[InstantSplit] Step 5: Packaging V5 bundle...");const A=toHex2(this.signingService.publicKey);let L;const Y=a.toString();Y.startsWith("PROXY://")&&t.nametagTokens?.length>0&&(L=JSON.stringify(t.nametagTokens[0].toJSON()));const oe={version:"5.0",type:"INSTANT_SPLIT",burnTransaction:JSON.stringify(z.toJSON()),recipientMintData:JSON.stringify(N.transactionData.toJSON()),transferCommitment:JSON.stringify(M.toJSON()),amount:e.toString(),coinId:r,tokenTypeHex:toHex2(t.type.bytes),splitGroupId:f,senderPubkey:A,recipientSaltHex:toHex2(E),transferSaltHex:toHex2(T),mintedTokenStateJson:JSON.stringify($.toJSON()),finalRecipientStateJson:"",recipientAddressJson:Y,nametagTokenJson:L};console.log("[InstantSplit] Step 6: Sending via transport...");const J=await o.sendTokenTransfer(l,{token:JSON.stringify(oe),proof:null,memo:"INSTANT_SPLIT_V5",sender:{transportPubkey:A}}),U=performance.now()-u;console.log(`[InstantSplit] V5 complete in ${U.toFixed(0)}ms`),c?.onNostrDelivered?.(J);let G;return c?.skipBackground||(G=this.submitBackgroundV5(R,N,M,{signingService:this.signingService,tokenType:t.type,coinId:p,senderTokenId:b,senderSalt:C,onProgress:c?.onBackgroundProgress,onChangeTokenCreated:c?.onChangeTokenCreated,onStorageSync:c?.onStorageSync})),{success:!0,nostrEventId:J,splitGroupId:f,criticalPathDurationMs:U,backgroundStarted:!c?.skipBackground,backgroundPromise:G}}catch(p){const m=performance.now()-u,y=p instanceof Error?p.message:String(p);return console.error(`[InstantSplit] Failed after ${m.toFixed(0)}ms:`,p),{success:!1,splitGroupId:f,criticalPathDurationMs:m,error:y,backgroundStarted:!1}}}async createTransferCommitmentFromMintData(t,e,s,r,a){const o=await UnmaskedPredicate.create(t.tokenId,t.tokenType,r,HashAlgorithm.SHA256,t.salt),c={state:new TokenState(o,null),nametagTokens:a||[],id:t.tokenId,type:t.tokenType};return await TransferCommitment.create(c,e,s,null,null,r)}submitBackgroundV5(t,e,s,r){console.log("[InstantSplit] Background: Starting parallel mint submission...");const a=performance.now();return Promise.all([this.client.submitMintCommitment(t).then(l=>({type:"senderMint",status:l.status})).catch(l=>({type:"senderMint",status:"ERROR",error:l})),this.client.submitMintCommitment(e).then(l=>({type:"recipientMint",status:l.status})).catch(l=>({type:"recipientMint",status:"ERROR",error:l})),this.client.submitTransferCommitment(s).then(l=>({type:"transfer",status:l.status})).catch(l=>({type:"transfer",status:"ERROR",error:l}))]).then(async l=>{const c=performance.now()-a;console.log(`[InstantSplit] Background: Submissions complete in ${c.toFixed(0)}ms`),r.onProgress?.({stage:"MINTS_SUBMITTED",message:`All commitments submitted in ${c.toFixed(0)}ms`});const u=l.find(d=>d.type==="senderMint");if(u?.status!=="SUCCESS"&&u?.status!=="REQUEST_ID_EXISTS"){console.error("[InstantSplit] Background: Sender mint failed - cannot save change token"),r.onProgress?.({stage:"FAILED",message:"Sender mint submission failed",error:String(u?.error)});return}console.log("[InstantSplit] Background: Waiting for sender mint proof...");const f=performance.now();try{const d=this.devMode?await this.waitInclusionProofWithDevBypass(t):await waitInclusionProof(this.trustBase,this.client,t),p=performance.now()-f;console.log(`[InstantSplit] Background: Sender mint proof received in ${p.toFixed(0)}ms`),r.onProgress?.({stage:"MINTS_PROVEN",message:`Mint proof received in ${p.toFixed(0)}ms`});const m=t.toTransaction(d),y=await UnmaskedPredicate.create(r.senderTokenId,r.tokenType,r.signingService,HashAlgorithm.SHA256,r.senderSalt),b=new TokenState(y,null),E=await Token.mint(this.trustBase,b,m);if(!this.devMode&&!(await E.verify(this.trustBase)).isSuccessful)throw new Error("Change token verification failed");if(console.log("[InstantSplit] Background: Change token created"),r.onProgress?.({stage:"CHANGE_TOKEN_SAVED",message:"Change token created and verified"}),r.onChangeTokenCreated&&(await r.onChangeTokenCreated(E),console.log("[InstantSplit] Background: Change token saved")),r.onStorageSync)try{const j=await r.onStorageSync();console.log(`[InstantSplit] Background: Storage sync ${j?"completed":"deferred"}`),r.onProgress?.({stage:"STORAGE_SYNCED",message:j?"Storage synchronized":"Sync deferred"})}catch(j){console.warn("[InstantSplit] Background: Storage sync error:",j)}const C=performance.now()-a;console.log(`[InstantSplit] Background: Complete in ${C.toFixed(0)}ms`),r.onProgress?.({stage:"COMPLETED",message:`Background processing complete in ${C.toFixed(0)}ms`})}catch(d){console.error("[InstantSplit] Background: Failed to get sender mint proof:",d),r.onProgress?.({stage:"FAILED",message:"Failed to get mint proof",error:String(d)})}}).catch(l=>{console.error("[InstantSplit] Background: Submission batch failed:",l),r.onProgress?.({stage:"FAILED",message:"Background submission failed",error:String(l)})})}async waitInclusionProofWithDevBypass(t,e=6e4){if(this.devMode)try{return await Promise.race([waitInclusionProof(this.trustBase,this.client,t),new Promise((s,r)=>setTimeout(()=>r(new Error("Dev mode timeout")),Math.min(e,5e3)))])}catch{return console.log("[InstantSplit] Dev mode: Using mock proof"),{toJSON:()=>({mock:!0})}}return waitInclusionProof(this.trustBase,this.client,t)}};function isInstantSplitBundle(t){if(typeof t!="object"||t===null)return!1;const e=t;return e.type!=="INSTANT_SPLIT"||typeof e.recipientMintData!="string"||typeof e.transferCommitment!="string"||typeof e.amount!="string"||typeof e.coinId!="string"||typeof e.splitGroupId!="string"||typeof e.senderPubkey!="string"||typeof e.recipientSaltHex!="string"||typeof e.transferSaltHex!="string"?!1:e.version==="4.0"?typeof e.burnCommitment=="string":e.version==="5.0"?typeof e.burnTransaction=="string"&&typeof e.mintedTokenStateJson=="string"&&typeof e.finalRecipientStateJson=="string"&&typeof e.recipientAddressJson=="string":!1}function isInstantSplitBundleV4(t){return isInstantSplitBundle(t)&&t.version==="4.0"}function isInstantSplitBundleV5(t){return isInstantSplitBundle(t)&&t.version==="5.0"}function fromHex3(t){const e=new Uint8Array(t.length/2);for(let s=0;s<t.length;s+=2)e[s/2]=parseInt(t.slice(s,s+2),16);return e}var InstantSplitProcessor=class{client;trustBase;devMode;constructor(t){this.client=t.stateTransitionClient,this.trustBase=t.trustBase,this.devMode=t.devMode??!1}async processReceivedBundle(t,e,s,r){return isInstantSplitBundleV5(t)?this.processV5Bundle(t,e,s,r):isInstantSplitBundleV4(t)?this.processV4Bundle(t,e,s,r):{success:!1,error:`Unknown bundle version: ${t.version}`,durationMs:0}}async processV5Bundle(t,e,s,r){console.log("[InstantSplitProcessor] Processing V5 bundle...");const a=performance.now();try{t.senderPubkey!==s&&console.warn("[InstantSplitProcessor] Sender pubkey mismatch (non-fatal)");const o=JSON.parse(t.burnTransaction),l=await TransferTransaction.fromJSON(o);console.log("[InstantSplitProcessor] Burn transaction validated");const c=JSON.parse(t.recipientMintData),u=await MintTransactionData.fromJSON(c),f=await MintCommitment.create(u);console.log("[InstantSplitProcessor] Mint commitment recreated");const d=await this.client.submitMintCommitment(f);if(d.status!=="SUCCESS"&&d.status!=="REQUEST_ID_EXISTS")throw new Error(`Mint submission failed: ${d.status}`);console.log(`[InstantSplitProcessor] Mint submitted: ${d.status}`);const p=this.devMode?await this.waitInclusionProofWithDevBypass(f,r?.proofTimeoutMs):await waitInclusionProof(this.trustBase,this.client,f),m=f.toTransaction(p);console.log("[InstantSplitProcessor] Mint proof received");const y=new TokenType(fromHex3(t.tokenTypeHex)),E={version:"2.0",state:JSON.parse(t.mintedTokenStateJson),genesis:m.toJSON(),transactions:[],nametags:[]},C=await Token.fromJSON(E);console.log("[InstantSplitProcessor] Minted token reconstructed from sender state");const j=JSON.parse(t.transferCommitment),B=await TransferCommitment.fromJSON(j),D=await this.client.submitTransferCommitment(B);if(D.status!=="SUCCESS"&&D.status!=="REQUEST_ID_EXISTS")throw new Error(`Transfer submission failed: ${D.status}`);console.log(`[InstantSplitProcessor] Transfer submitted: ${D.status}`);const F=this.devMode?await this.waitInclusionProofWithDevBypass(B,r?.proofTimeoutMs):await waitInclusionProof(this.trustBase,this.client,B),q=B.toTransaction(F);console.log("[InstantSplitProcessor] Transfer proof received");const V=fromHex3(t.transferSaltHex),ee=await UnmaskedPredicate.create(u.tokenId,y,e,HashAlgorithm.SHA256,V),Q=new TokenState(ee,null);console.log("[InstantSplitProcessor] Final recipient state created");let W=[];const Z=t.recipientAddressJson;if(Z.startsWith("PROXY://")){if(console.log("[InstantSplitProcessor] PROXY address detected, finding nametag token..."),t.nametagTokenJson)try{const k=await Token.fromJSON(JSON.parse(t.nametagTokenJson)),{ProxyAddress:v}=await __vitePreload(async()=>{const{ProxyAddress:N}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:N}},void 0);(await v.fromTokenId(k.id)).address!==Z?console.warn("[InstantSplitProcessor] Nametag PROXY address mismatch, ignoring bundle token"):(W=[k],console.log("[InstantSplitProcessor] Using nametag token from bundle (address validated)"))}catch(k){console.warn("[InstantSplitProcessor] Failed to parse nametag token from bundle:",k)}if(W.length===0&&r?.findNametagToken){const k=await r.findNametagToken(Z);k&&(W=[k],console.log("[InstantSplitProcessor] Found nametag token via callback"))}if(W.length===0&&!this.devMode)throw new Error(`PROXY address transfer requires nametag token for verification. Address: ${Z}`)}let z;if(this.devMode){console.log("[InstantSplitProcessor] Dev mode: finalizing without verification");const k=C.toJSON();k.state=Q.toJSON(),k.transactions=[q.toJSON()],z=await Token.fromJSON(k)}else z=await this.client.finalizeTransaction(this.trustBase,C,Q,q,W);if(console.log("[InstantSplitProcessor] Token finalized"),!this.devMode){if(!(await z.verify(this.trustBase)).isSuccessful)throw new Error("Token verification failed");console.log("[InstantSplitProcessor] Token verified")}const O=performance.now()-a;return console.log(`[InstantSplitProcessor] V5 bundle processed in ${O.toFixed(0)}ms`),{success:!0,token:z,durationMs:O}}catch(o){const l=performance.now()-a,c=o instanceof Error?o.message:String(o);return console.error("[InstantSplitProcessor] V5 processing failed:",o),{success:!1,error:c,durationMs:l}}}async processV4Bundle(t,e,s,r){if(!this.devMode)return{success:!1,error:"INSTANT_SPLIT V4 is only supported in dev mode",durationMs:0};console.log("[InstantSplitProcessor] Processing V4 bundle (dev mode)...");const a=performance.now();try{const o=JSON.parse(t.burnCommitment),l=await TransferCommitment.fromJSON(o),c=await this.client.submitTransferCommitment(l);if(c.status!=="SUCCESS"&&c.status!=="REQUEST_ID_EXISTS")throw new Error(`Burn submission failed: ${c.status}`);await this.waitInclusionProofWithDevBypass(l,r?.proofTimeoutMs),console.log("[InstantSplitProcessor] V4: Burn proof received");const u=JSON.parse(t.recipientMintData),f=await MintTransactionData.fromJSON(u),d=await MintCommitment.create(f),p=await this.client.submitMintCommitment(d);if(p.status!=="SUCCESS"&&p.status!=="REQUEST_ID_EXISTS")throw new Error(`Mint submission failed: ${p.status}`);const m=await this.waitInclusionProofWithDevBypass(d,r?.proofTimeoutMs),y=d.toTransaction(m);console.log("[InstantSplitProcessor] V4: Mint proof received");const b=new TokenType(fromHex3(t.tokenTypeHex)),E=fromHex3(t.recipientSaltHex),C=await UnmaskedPredicate.create(f.tokenId,b,e,HashAlgorithm.SHA256,E),B={version:"2.0",state:new TokenState(C,null).toJSON(),genesis:y.toJSON(),transactions:[],nametags:[]},D=await Token.fromJSON(B);console.log("[InstantSplitProcessor] V4: Minted token reconstructed");const F=JSON.parse(t.transferCommitment),q=await TransferCommitment.fromJSON(F),V=await this.client.submitTransferCommitment(q);if(V.status!=="SUCCESS"&&V.status!=="REQUEST_ID_EXISTS")throw new Error(`Transfer submission failed: ${V.status}`);const ee=await this.waitInclusionProofWithDevBypass(q,r?.proofTimeoutMs),Q=q.toTransaction(ee);console.log("[InstantSplitProcessor] V4: Transfer proof received");const W=fromHex3(t.transferSaltHex),Z=await UnmaskedPredicate.create(f.tokenId,b,e,HashAlgorithm.SHA256,W),z=new TokenState(Z,null),O=D.toJSON();O.state=z.toJSON(),O.transactions=[Q.toJSON()];const k=await Token.fromJSON(O);console.log("[InstantSplitProcessor] V4: Token finalized");const v=performance.now()-a;return console.log(`[InstantSplitProcessor] V4 bundle processed in ${v.toFixed(0)}ms`),{success:!0,token:k,durationMs:v}}catch(o){const l=performance.now()-a,c=o instanceof Error?o.message:String(o);return console.error("[InstantSplitProcessor] V4 processing failed:",o),{success:!1,error:c,durationMs:l}}}async waitInclusionProofWithDevBypass(t,e=6e4){if(this.devMode)try{return await Promise.race([waitInclusionProof(this.trustBase,this.client,t),new Promise((s,r)=>setTimeout(()=>r(new Error("Dev mode timeout")),Math.min(e,5e3)))])}catch{return console.log("[InstantSplitProcessor] Dev mode: Using mock proof"),{toJSON:()=>({mock:!0})}}return waitInclusionProof(this.trustBase,this.client,t)}};function enrichWithRegistry(t){const e=TokenRegistry$1.getInstance(),s=e.getDefinition(t.coinId);return s?{...t,symbol:s.symbol||t.symbol,name:s.name.charAt(0).toUpperCase()+s.name.slice(1),decimals:s.decimals??0,iconUrl:e.getIconUrl(t.coinId)??void 0}:t}async function parseTokenInfo(t){const e={coinId:"ALPHA",symbol:"ALPHA",name:"Alpha Token",decimals:0,amount:"0"};try{const s=typeof t=="string"?JSON.parse(t):t;try{const r=await Token.fromJSON(s);if(r.id&&(e.tokenId=r.id.toJSON()),r.coins&&r.coins.coins){const l=r.coins.coins;if(l.length>0){const c=l[0];let u,f;if(Array.isArray(c)&&c.length===2&&([u,f]=c),u instanceof CoinId){const d=u.toJSON();return enrichWithRegistry({coinId:d,symbol:d.slice(0,8),name:`Token ${d.slice(0,8)}`,decimals:0,amount:String(f??"0"),tokenId:e.tokenId})}else if(u&&typeof u=="object"&&"bytes"in u){const d=u.bytes,p=Buffer.isBuffer(d)?d.toString("hex"):Array.isArray(d)?Buffer.from(d).toString("hex"):String(d);return enrichWithRegistry({coinId:p,symbol:p.slice(0,8),name:`Token ${p.slice(0,8)}`,decimals:0,amount:String(f??"0"),tokenId:e.tokenId})}}}const o=r.toJSON().genesis;if(o?.data){const l=o.data;if(l.coinData&&typeof l.coinData=="object"){const c=l.coinData;if(Array.isArray(c)&&c.length>0){const u=c[0];if(Array.isArray(u)&&u.length===2){const[f,d]=u,p=typeof f=="string"?f:String(f);return enrichWithRegistry({coinId:p,symbol:p.slice(0,8),name:`Token ${p.slice(0,8)}`,decimals:0,amount:String(d),tokenId:e.tokenId})}}}}}catch{}if(s.genesis?.data){const r=s.genesis.data;if(r.coinData){const a=r.coinData;if(Array.isArray(a)&&a.length>0){const o=a[0];if(Array.isArray(o)&&o.length===2){const[l,c]=o;return enrichWithRegistry({coinId:String(l),symbol:String(l).slice(0,8),name:`Token ${String(l).slice(0,8)}`,decimals:0,amount:String(c),tokenId:r.tokenId})}}else if(typeof a=="object"){const o=Object.entries(a);if(o.length>0){const[l,c]=o[0];return enrichWithRegistry({coinId:l,symbol:l.slice(0,8),name:`Token ${l.slice(0,8)}`,decimals:0,amount:String(c),tokenId:r.tokenId})}}}r.tokenId&&(e.tokenId=r.tokenId)}if(s.state?.coinData){const r=s.state.coinData;if(Array.isArray(r)&&r.length>0){const a=r[0];if(Array.isArray(a)&&a.length===2){const[o,l]=a;return enrichWithRegistry({coinId:String(o),symbol:String(o).slice(0,8),name:`Token ${String(o).slice(0,8)}`,decimals:0,amount:String(l),tokenId:e.tokenId})}}else if(typeof r=="object"){const a=Object.entries(r);if(a.length>0){const[o,l]=a[0];return enrichWithRegistry({coinId:o,symbol:o.slice(0,8),name:`Token ${o.slice(0,8)}`,decimals:0,amount:String(l),tokenId:e.tokenId})}}}}catch(s){console.warn("[Payments] Failed to parse token info:",s)}return e}function extractTokenIdFromSdkData(t){if(!t)return null;try{return JSON.parse(t).genesis?.data?.tokenId||null}catch{return null}}function extractStateHashFromSdkData(t){if(!t)return"";try{const e=JSON.parse(t),s=getCurrentStateHash(e);if(!s){if(e.state?.hash)return e.state.hash;if(e.stateHash)return e.stateHash;if(e.currentStateHash)return e.currentStateHash}return s||""}catch{return""}}function createTokenStateKey(t,e){return`${t}_${e}`}function extractTokenStateKey(t){const e=extractTokenIdFromSdkData(t.sdkData),s=extractStateHashFromSdkData(t.sdkData);return!e||!s?null:createTokenStateKey(e,s)}function fromHex4(t){const e=new Uint8Array(t.length/2);for(let s=0;s<t.length;s+=2)e[s/2]=parseInt(t.slice(s,s+2),16);return e}function hasSameGenesisTokenId(t,e){const s=extractTokenIdFromSdkData(t.sdkData),r=extractTokenIdFromSdkData(e.sdkData);return!!(s&&r&&s===r)}function isSameTokenState(t,e){const s=extractTokenStateKey(t),r=extractTokenStateKey(e);return!!(s&&r&&s===r)}function createTombstoneFromToken(t){const e=extractTokenIdFromSdkData(t.sdkData),s=extractStateHashFromSdkData(t.sdkData);return!e||!s?null:{tokenId:e,stateHash:s,timestamp:Date.now()}}function isIncrementalUpdate(t,e){if(t.genesis?.data?.tokenId!==e.genesis?.data?.tokenId)return!1;const s=t.transactions||[],r=e.transactions||[];if(r.length<s.length)return!1;for(let a=0;a<s.length;a++){const o=s[a],l=r[a];if(o.previousStateHash!==l.previousStateHash||o.newStateHash!==l.newStateHash)return!1}for(let a=s.length;a<r.length;a++)if(r[a].inclusionProof===null)return!1;return!0}function countCommittedTxns(t){return(t.transactions||[]).filter(e=>e.inclusionProof!==null).length}function pruneTombstonesByAge(t,e=720*60*60*1e3,s=100){const r=Date.now();let a=t.filter(o=>r-o.timestamp<e);return a.length>s&&(a=[...a].sort((o,l)=>l.timestamp-o.timestamp),a=a.slice(0,s)),a}function pruneMapByCount(t,e){if(t.size<=e)return new Map(t);const s=[...t.entries()],r=s.slice(s.length-e);return new Map(r)}function findBestTokenVersion(t,e,s){const r=[],a=e.get(t);a&&r.push(a);for(const[o,l]of s)o.startsWith(t+"_")&&r.push(l);return r.length===0?null:(r.sort((o,l)=>countCommittedTxns(l)-countCommittedTxns(o)),r[0])}var PaymentsModule=class Oa{moduleConfig;deps=null;l1;tokens=new Map;pendingTransfers=new Map;pendingBackgroundTasks=[];tombstones=[];archivedTokens=new Map;forkedTokens=new Map;transactionHistory=[];nametags=[];paymentRequests=[];paymentRequestHandlers=new Set;outgoingPaymentRequests=new Map;paymentRequestResponseHandlers=new Set;pendingResponseResolvers=new Map;unsubscribeTransfers=null;unsubscribePaymentRequests=null;unsubscribePaymentRequestResponses=null;proofPollingJobs=new Map;proofPollingInterval=null;static PROOF_POLLING_INTERVAL_MS=2e3;static PROOF_POLLING_MAX_ATTEMPTS=30;storageEventUnsubscribers=[];syncDebounceTimer=null;static SYNC_DEBOUNCE_MS=500;_syncInProgress=null;constructor(e){this.moduleConfig={autoSync:e?.autoSync??!0,autoValidate:e?.autoValidate??!0,retryFailed:e?.retryFailed??!0,maxRetries:e?.maxRetries??3,debug:e?.debug??!1},this.l1=e?.l1===null?null:new L1PaymentsModule(e?.l1)}getConfig(){return this.moduleConfig}priceProvider=null;log(...e){this.moduleConfig.debug&&console.log("[PaymentsModule]",...e)}initialize(e){this.unsubscribeTransfers?.(),this.unsubscribeTransfers=null,this.unsubscribePaymentRequests?.(),this.unsubscribePaymentRequests=null,this.unsubscribePaymentRequestResponses?.(),this.unsubscribePaymentRequestResponses=null,this.tokens.clear(),this.pendingTransfers.clear(),this.tombstones=[],this.archivedTokens.clear(),this.forkedTokens.clear(),this.transactionHistory=[],this.nametags=[],this.deps=e,this.priceProvider=e.price??null,this.l1&&this.l1.initialize({identity:e.identity,chainCode:e.chainCode,addresses:e.l1Addresses,transport:e.transport}),this.unsubscribeTransfers=e.transport.onTokenTransfer(s=>this.handleIncomingTransfer(s)),e.transport.onPaymentRequest&&(this.unsubscribePaymentRequests=e.transport.onPaymentRequest(s=>{this.handleIncomingPaymentRequest(s)})),e.transport.onPaymentRequestResponse&&(this.unsubscribePaymentRequestResponses=e.transport.onPaymentRequestResponse(s=>{this.handlePaymentRequestResponse(s)})),this.subscribeToStorageEvents()}async load(){this.ensureInitialized(),await TokenRegistry$1.waitForReady();const e=this.getTokenStorageProviders();for(const[a,o]of e)try{const l=await o.load();if(l.success&&l.data){this.loadFromStorageData(l.data),this.log(`Loaded metadata from provider ${a}`);break}}catch(l){console.error(`[Payments] Failed to load from provider ${a}:`,l)}await this.loadPendingV5Tokens();const s=await this.deps.storage.get(STORAGE_KEYS_ADDRESS$1.TRANSACTION_HISTORY);if(s)try{this.transactionHistory=JSON.parse(s)}catch{this.transactionHistory=[]}const r=await this.deps.storage.get(STORAGE_KEYS_ADDRESS$1.PENDING_TRANSFERS);if(r){const a=JSON.parse(r);for(const o of a)this.pendingTransfers.set(o.id,o)}this.resolveUnconfirmed().catch(()=>{})}destroy(){this.unsubscribeTransfers?.(),this.unsubscribeTransfers=null,this.unsubscribePaymentRequests?.(),this.unsubscribePaymentRequests=null,this.unsubscribePaymentRequestResponses?.(),this.unsubscribePaymentRequestResponses=null,this.paymentRequestHandlers.clear(),this.paymentRequestResponseHandlers.clear(),this.stopProofPolling(),this.proofPollingJobs.clear();for(const[,e]of this.pendingResponseResolvers)clearTimeout(e.timeout),e.reject(new Error("Module destroyed"));this.pendingResponseResolvers.clear(),this.unsubscribeStorageEvents(),this.l1&&this.l1.destroy()}async send(e){this.ensureInitialized();const s={id:crypto.randomUUID(),status:"pending",tokens:[],tokenTransfers:[]};try{const r=await this.deps.transport.resolve?.(e.recipient)??null,a=this.resolveTransportPubkey(e.recipient,r),o=await this.resolveRecipientAddress(e.recipient,e.addressMode,r),l=await this.createSigningService(),c=this.deps.oracle.getStateTransitionClient?.();if(!c)throw new Error("State transition client not available. Oracle provider must implement getStateTransitionClient()");const u=this.deps.oracle.getTrustBase?.();if(!u)throw new Error("Trust base not available. Oracle provider must implement getTrustBase()");const f=new TokenSplitCalculator,d=Array.from(this.tokens.values()),p=await f.calculateOptimalSplit(d,BigInt(e.amount),e.coinId);if(!p)throw new Error("Insufficient balance");const m=p.tokensToTransferDirectly.map(E=>E.uiToken);p.tokenToSplit&&m.push(p.tokenToSplit.uiToken),s.tokens=m;for(const E of m)E.status="transferring",this.tokens.set(E.id,E);await this.saveToOutbox(s,a),s.status="submitted";const y=e.recipient.startsWith("@")?e.recipient.slice(1):void 0,b=e.transferMode??"instant";if(p.requiresSplit&&p.tokenToSplit)if(b==="conservative"){this.log("Executing conservative split...");const C=await new TokenSplitExecutor({stateTransitionClient:c,trustBase:u,signingService:l}).executeSplit(p.tokenToSplit.sdkToken,p.splitAmount,p.remainderAmount,p.coinId,o),j=C.tokenForSender.toJSON(),B={id:crypto.randomUUID(),coinId:e.coinId,symbol:this.getCoinSymbol(e.coinId),name:this.getCoinName(e.coinId),decimals:this.getCoinDecimals(e.coinId),iconUrl:this.getCoinIconUrl(e.coinId),amount:p.remainderAmount.toString(),status:"confirmed",createdAt:Date.now(),updatedAt:Date.now(),sdkData:JSON.stringify(j)};await this.addToken(B,!0),this.log(`Conservative split: change token saved: ${B.id}`),await this.deps.transport.sendTokenTransfer(a,{sourceToken:JSON.stringify(C.tokenForRecipient.toJSON()),transferTx:JSON.stringify(C.recipientTransferTx.toJSON()),memo:e.memo});const D=C.recipientTransferTx?.data?.requestId??C.recipientTransferTx?.requestId,F=D instanceof Uint8Array?Array.from(D).map(q=>q.toString(16).padStart(2,"0")).join(""):D?String(D):void 0;await this.removeToken(p.tokenToSplit.uiToken.id,y,!0),s.tokenTransfers.push({sourceTokenId:p.tokenToSplit.uiToken.id,method:"split",requestIdHex:F}),this.log("Conservative split transfer completed")}else{this.log("Executing instant split...");const E=this.deps.oracle.isDevMode?.()??!1,j=await new InstantSplitExecutor({stateTransitionClient:c,trustBase:u,signingService:l,devMode:E}).executeSplitInstant(p.tokenToSplit.sdkToken,p.splitAmount,p.remainderAmount,p.coinId,o,this.deps.transport,a,{onChangeTokenCreated:async B=>{const D=B.toJSON(),F={id:crypto.randomUUID(),coinId:e.coinId,symbol:this.getCoinSymbol(e.coinId),name:this.getCoinName(e.coinId),decimals:this.getCoinDecimals(e.coinId),iconUrl:this.getCoinIconUrl(e.coinId),amount:p.remainderAmount.toString(),status:"confirmed",createdAt:Date.now(),updatedAt:Date.now(),sdkData:JSON.stringify(D)};await this.addToken(F,!0),this.log(`Change token saved via background: ${F.id}`)},onStorageSync:async()=>(await this.save(),!0)});if(!j.success)throw new Error(j.error||"Instant split failed");j.backgroundPromise&&this.pendingBackgroundTasks.push(j.backgroundPromise),await this.removeToken(p.tokenToSplit.uiToken.id,y),s.tokenTransfers.push({sourceTokenId:p.tokenToSplit.uiToken.id,method:"split",splitGroupId:j.splitGroupId,nostrEventId:j.nostrEventId}),this.log("Instant split transfer completed")}for(const E of p.tokensToTransferDirectly){const C=E.uiToken,j=await this.createSdkCommitment(C,o,l);if(b==="conservative"){console.log(`[Payments] CONSERVATIVE: Sending direct token ${C.id.slice(0,8)}... to ${a.slice(0,8)}...`);const F=await c.submitTransferCommitment(j);if(F.status!=="SUCCESS"&&F.status!=="REQUEST_ID_EXISTS")throw new Error(`Transfer commitment failed: ${F.status}`);const q=await waitInclusionProof(u,c,j),V=j.toTransaction(q);await this.deps.transport.sendTokenTransfer(a,{sourceToken:JSON.stringify(E.sdkToken.toJSON()),transferTx:JSON.stringify(V.toJSON()),memo:e.memo}),console.log("[Payments] CONSERVATIVE: Direct token sent successfully")}else console.log(`[Payments] NOSTR-FIRST: Sending direct token ${C.id.slice(0,8)}... to ${a.slice(0,8)}...`),await this.deps.transport.sendTokenTransfer(a,{sourceToken:JSON.stringify(E.sdkToken.toJSON()),commitmentData:JSON.stringify(j.toJSON()),memo:e.memo}),console.log("[Payments] NOSTR-FIRST: Direct token sent successfully"),c.submitTransferCommitment(j).catch(F=>console.error("[Payments] Background commitment submit failed:",F));const B=j.requestId,D=B instanceof Uint8Array?Array.from(B).map(F=>F.toString(16).padStart(2,"0")).join(""):String(B);s.tokenTransfers.push({sourceTokenId:C.id,method:"direct",requestIdHex:D}),this.log(`Token ${C.id} sent via ${b.toUpperCase()}, requestId: ${D}`),await this.removeToken(C.id,y,!0)}return s.status="delivered",await this.save(),await this.removeFromOutbox(s.id),s.status="completed",await this.addToHistory({type:"SENT",amount:e.amount,coinId:e.coinId,symbol:this.getCoinSymbol(e.coinId),timestamp:Date.now(),recipientNametag:y,transferId:s.id}),this.deps.emitEvent("transfer:confirmed",s),s}catch(r){s.status="failed",s.error=r instanceof Error?r.message:String(r);for(const a of s.tokens)a.status="confirmed",this.tokens.set(a.id,a);throw this.deps.emitEvent("transfer:failed",s),r}}getCoinSymbol(e){return TokenRegistry$1.getInstance().getSymbol(e)}getCoinName(e){return TokenRegistry$1.getInstance().getName(e)}getCoinDecimals(e){return TokenRegistry$1.getInstance().getDecimals(e)}getCoinIconUrl(e){return TokenRegistry$1.getInstance().getIconUrl(e)??void 0}async sendInstant(e,s){this.ensureInitialized();const r=performance.now();try{const a=await this.deps.transport.resolve?.(e.recipient)??null,o=this.resolveTransportPubkey(e.recipient,a),l=await this.resolveRecipientAddress(e.recipient,e.addressMode,a),c=await this.createSigningService(),u=this.deps.oracle.getStateTransitionClient?.();if(!u)throw new Error("State transition client not available");const f=this.deps.oracle.getTrustBase?.();if(!f)throw new Error("Trust base not available");const d=new TokenSplitCalculator,p=Array.from(this.tokens.values()),m=await d.calculateOptimalSplit(p,BigInt(e.amount),e.coinId);if(!m)throw new Error("Insufficient balance");if(!m.requiresSplit||!m.tokenToSplit){this.log("No split required, falling back to standard send()");const j=await this.send(e);return{success:j.status==="completed",criticalPathDurationMs:performance.now()-r,error:j.error}}this.log(`InstantSplit: amount=${m.splitAmount}, remainder=${m.remainderAmount}`);const y=m.tokenToSplit.uiToken;y.status="transferring",this.tokens.set(y.id,y);const b=s?.devMode??this.deps.oracle.isDevMode?.()??!1,C=await new InstantSplitExecutor({stateTransitionClient:u,trustBase:f,signingService:c,devMode:b}).executeSplitInstant(m.tokenToSplit.sdkToken,m.splitAmount,m.remainderAmount,m.coinId,l,this.deps.transport,o,{...s,onChangeTokenCreated:async j=>{const B=j.toJSON(),D={id:crypto.randomUUID(),coinId:e.coinId,symbol:this.getCoinSymbol(e.coinId),name:this.getCoinName(e.coinId),decimals:this.getCoinDecimals(e.coinId),iconUrl:this.getCoinIconUrl(e.coinId),amount:m.remainderAmount.toString(),status:"confirmed",createdAt:Date.now(),updatedAt:Date.now(),sdkData:JSON.stringify(B)};await this.addToken(D,!0),this.log(`Change token saved via background: ${D.id}`)},onStorageSync:async()=>(await this.save(),!0)});if(C.success){C.backgroundPromise&&this.pendingBackgroundTasks.push(C.backgroundPromise);const j=e.recipient.startsWith("@")?e.recipient.slice(1):void 0;await this.removeToken(y.id,j,!0),await this.addToHistory({type:"SENT",amount:e.amount,coinId:e.coinId,symbol:this.getCoinSymbol(e.coinId),timestamp:Date.now(),recipientNametag:j}),await this.save()}else y.status="confirmed",this.tokens.set(y.id,y);return C}catch(a){const o=a instanceof Error?a.message:String(a);return{success:!1,criticalPathDurationMs:performance.now()-r,error:o}}}async processInstantSplitBundle(e,s){if(this.ensureInitialized(),!isInstantSplitBundleV5(e))return this.processInstantSplitBundleSync(e,s);try{const r=`v5split_${e.splitGroupId}`;if(this.tokens.has(r))return this.log(`V5 bundle ${r.slice(0,16)}... already exists, skipping duplicate`),{success:!0,durationMs:0};const a=TokenRegistry$1.getInstance(),o={type:"v5_bundle",stage:"RECEIVED",bundleJson:JSON.stringify(e),senderPubkey:s,savedAt:Date.now(),attemptCount:0},l={id:r,coinId:e.coinId,symbol:a.getSymbol(e.coinId)||e.coinId,name:a.getName(e.coinId)||e.coinId,decimals:a.getDecimals(e.coinId)??8,amount:e.amount,status:"submitted",createdAt:Date.now(),updatedAt:Date.now(),sdkData:JSON.stringify({_pendingFinalization:o})};return await this.addToken(l,!1),this.log(`V5 bundle saved as unconfirmed: ${l.id.slice(0,8)}...`),this.deps.emitEvent("transfer:incoming",{id:e.splitGroupId,senderPubkey:s,tokens:[l],receivedAt:Date.now()}),await this.save(),this.resolveUnconfirmed().catch(()=>{}),{success:!0,durationMs:0}}catch(r){return{success:!1,error:r instanceof Error?r.message:String(r),durationMs:0}}}async processInstantSplitBundleSync(e,s){try{const r=await this.createSigningService(),a=this.deps.oracle.getStateTransitionClient?.();if(!a)throw new Error("State transition client not available");const o=this.deps.oracle.getTrustBase?.();if(!o)throw new Error("Trust base not available");const l=this.deps.oracle.isDevMode?.()??!1,u=await new InstantSplitProcessor({stateTransitionClient:a,trustBase:o,devMode:l}).processReceivedBundle(e,r,s,{findNametagToken:async f=>{const d=this.getNametag();if(d?.token)try{const p=await Token.fromJSON(d.token),{ProxyAddress:m}=await __vitePreload(async()=>{const{ProxyAddress:b}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:b}},void 0),y=await m.fromTokenId(p.id);return y.address===f?p:(this.log(`Nametag PROXY address mismatch: ${y.address} !== ${f}`),null)}catch(p){return this.log("Failed to parse nametag token:",p),null}return null}});if(u.success&&u.token){const f=u.token.toJSON(),d=await parseTokenInfo(f),p={id:crypto.randomUUID(),coinId:d.coinId,symbol:d.symbol,name:d.name,decimals:d.decimals,iconUrl:d.iconUrl,amount:e.amount,status:"confirmed",createdAt:Date.now(),updatedAt:Date.now(),sdkData:JSON.stringify(f)};await this.addToken(p),await this.addToHistory({type:"RECEIVED",amount:e.amount,coinId:d.coinId,symbol:d.symbol,timestamp:Date.now(),senderPubkey:s}),await this.save(),this.deps.emitEvent("transfer:incoming",{id:e.splitGroupId,senderPubkey:s,tokens:[p],receivedAt:Date.now()})}return u}catch(r){return{success:!1,error:r instanceof Error?r.message:String(r),durationMs:0}}}isInstantSplitBundle(e){return isInstantSplitBundle(e)}async sendPaymentRequest(e,s){if(this.ensureInitialized(),!this.deps.transport.sendPaymentRequest)return{success:!1,error:"Transport provider does not support payment requests"};try{const r=await this.deps.transport.resolve?.(e)??null,a=this.resolveTransportPubkey(e,r),o={amount:s.amount,coinId:s.coinId,message:s.message,recipientNametag:s.recipientNametag,metadata:s.metadata},l=await this.deps.transport.sendPaymentRequest(a,o),c=crypto.randomUUID(),u={id:c,eventId:l,recipientPubkey:a,recipientNametag:e.startsWith("@")?e.slice(1):void 0,amount:s.amount,coinId:s.coinId,message:s.message,createdAt:Date.now(),status:"pending"};return this.outgoingPaymentRequests.set(c,u),this.log(`Payment request sent: ${l}`),{success:!0,requestId:c,eventId:l}}catch(r){const a=r instanceof Error?r.message:String(r);return this.log(`Failed to send payment request: ${a}`),{success:!1,error:a}}}onPaymentRequest(e){return this.paymentRequestHandlers.add(e),()=>this.paymentRequestHandlers.delete(e)}getPaymentRequests(e){return e?.status?this.paymentRequests.filter(s=>s.status===e.status):[...this.paymentRequests]}getPendingPaymentRequestsCount(){return this.paymentRequests.filter(e=>e.status==="pending").length}async acceptPaymentRequest(e){this.updatePaymentRequestStatus(e,"accepted"),await this.sendPaymentRequestResponse(e,"accepted")}async rejectPaymentRequest(e){this.updatePaymentRequestStatus(e,"rejected"),await this.sendPaymentRequestResponse(e,"rejected")}markPaymentRequestPaid(e){this.updatePaymentRequestStatus(e,"paid")}clearProcessedPaymentRequests(){this.paymentRequests=this.paymentRequests.filter(e=>e.status==="pending")}removePaymentRequest(e){this.paymentRequests=this.paymentRequests.filter(s=>s.id!==e)}async payPaymentRequest(e,s){const r=this.paymentRequests.find(a=>a.id===e);if(!r)throw new Error(`Payment request not found: ${e}`);if(r.status!=="pending"&&r.status!=="accepted")throw new Error(`Payment request is not pending or accepted: ${r.status}`);this.updatePaymentRequestStatus(e,"accepted");try{const a=await this.send({coinId:r.coinId,amount:r.amount,recipient:r.senderPubkey,memo:s||r.message});return this.updatePaymentRequestStatus(e,"paid"),await this.sendPaymentRequestResponse(e,"paid",a.id),a}catch(a){throw this.updatePaymentRequestStatus(e,"pending"),a}}updatePaymentRequestStatus(e,s){const r=this.paymentRequests.find(a=>a.id===e);if(r){r.status=s;const a=`payment_request:${s}`;(a==="payment_request:accepted"||a==="payment_request:rejected"||a==="payment_request:paid")&&this.deps?.emitEvent(a,r)}}handleIncomingPaymentRequest(e){if(this.paymentRequests.find(l=>l.id===e.id))return;const s=e.request.coinId,a=TokenRegistry$1.getInstance().getDefinition(s),o={id:e.id,senderPubkey:e.senderTransportPubkey,senderNametag:e.senderNametag,amount:e.request.amount,coinId:s,symbol:a?.symbol||s.slice(0,8),message:e.request.message,recipientNametag:e.request.recipientNametag,requestId:e.request.requestId,timestamp:e.timestamp,status:"pending",metadata:e.request.metadata};this.paymentRequests.unshift(o),this.deps?.emitEvent("payment_request:incoming",o);for(const l of this.paymentRequestHandlers)try{l(o)}catch(c){this.log("Payment request handler error:",c)}this.log(`Incoming payment request: ${o.id} for ${o.amount} ${o.symbol}`)}getOutgoingPaymentRequests(e){const s=Array.from(this.outgoingPaymentRequests.values());return e?.status?s.filter(r=>r.status===e.status):s}onPaymentRequestResponse(e){return this.paymentRequestResponseHandlers.add(e),()=>this.paymentRequestResponseHandlers.delete(e)}waitForPaymentResponse(e,s=6e4){const r=this.outgoingPaymentRequests.get(e);return r?r.response?Promise.resolve(r.response):new Promise((a,o)=>{const l=setTimeout(()=>{this.pendingResponseResolvers.delete(e);const c=this.outgoingPaymentRequests.get(e);c&&c.status==="pending"&&(c.status="expired"),o(new Error(`Payment request response timeout: ${e}`))},s);this.pendingResponseResolvers.set(e,{resolve:a,reject:o,timeout:l})}):Promise.reject(new Error(`Outgoing payment request not found: ${e}`))}cancelWaitForPaymentResponse(e){const s=this.pendingResponseResolvers.get(e);s&&(clearTimeout(s.timeout),s.reject(new Error("Cancelled")),this.pendingResponseResolvers.delete(e))}removeOutgoingPaymentRequest(e){this.outgoingPaymentRequests.delete(e),this.cancelWaitForPaymentResponse(e)}clearCompletedOutgoingPaymentRequests(){for(const[e,s]of this.outgoingPaymentRequests)(s.status==="paid"||s.status==="rejected"||s.status==="expired")&&this.outgoingPaymentRequests.delete(e)}handlePaymentRequestResponse(e){let s,r;for(const[o,l]of this.outgoingPaymentRequests)if(l.eventId===e.response.requestId||l.id===e.response.requestId){s=l,r=o;break}const a={id:e.id,responderPubkey:e.responderTransportPubkey,requestId:e.response.requestId,responseType:e.response.responseType,message:e.response.message,transferId:e.response.transferId,timestamp:e.timestamp};if(s&&r){s.status=a.responseType==="paid"?"paid":a.responseType==="accepted"?"accepted":"rejected",s.response=a;const o=this.pendingResponseResolvers.get(r);o&&(clearTimeout(o.timeout),o.resolve(a),this.pendingResponseResolvers.delete(r))}this.deps?.emitEvent("payment_request:response",a);for(const o of this.paymentRequestResponseHandlers)try{o(a)}catch(l){this.log("Payment request response handler error:",l)}this.log(`Received payment request response: ${a.id} type: ${a.responseType}`)}async sendPaymentRequestResponse(e,s,r){const a=this.paymentRequests.find(o=>o.id===e);if(a){if(!this.deps?.transport.sendPaymentRequestResponse){this.log("Transport does not support sendPaymentRequestResponse");return}try{const o={requestId:a.requestId,responseType:s,transferId:r};await this.deps.transport.sendPaymentRequestResponse(a.senderPubkey,o),this.log(`Sent payment request response: ${s} for ${e}`)}catch(o){this.log("Failed to send payment request response:",o)}}}async receive(e,s){if(this.ensureInitialized(),!this.deps.transport.fetchPendingEvents)throw new Error("Transport provider does not support fetchPendingEvents");const r=e??{},a=new Set(this.tokens.keys());await this.deps.transport.fetchPendingEvents(),await this.load();const o=[];for(const[c,u]of this.tokens)if(!a.has(c)){const f={id:c,senderPubkey:"",tokens:[u],receivedAt:Date.now()};o.push(f),s&&s(f)}const l={transfers:o};if(r.finalize){const c=r.timeout??6e4,u=r.pollInterval??2e3,f=Date.now();for(;Date.now()-f<c;){const d=await this.resolveUnconfirmed();if(l.finalization=d,r.onProgress&&r.onProgress(d),!Array.from(this.tokens.values()).some(m=>m.status==="submitted"||m.status==="pending"))break;await new Promise(m=>setTimeout(m,u)),await this.load()}l.finalizationDurationMs=Date.now()-f,l.timedOut=Array.from(this.tokens.values()).some(d=>d.status==="submitted"||d.status==="pending")}else l.finalization=await this.resolveUnconfirmed();return l}setPriceProvider(e){this.priceProvider=e}async waitForPendingOperations(){this.pendingBackgroundTasks.length>0&&(await Promise.allSettled(this.pendingBackgroundTasks),this.pendingBackgroundTasks=[])}async getFiatBalance(){const e=await this.getAssets();if(!this.priceProvider||this.isPriceDisabled())return null;let s=0,r=!1;for(const a of e)a.fiatValueUsd!=null&&(s+=a.fiatValueUsd,r=!0);return r?s:null}getBalance(e){return this.aggregateTokens(e)}async getAssets(e){const s=this.aggregateTokens(e);if(!this.priceProvider||this.isPriceDisabled()||s.length===0)return s;try{const r=TokenRegistry$1.getInstance(),a=new Map;for(const o of s){const l=r.getDefinition(o.coinId);if(l?.name){const c=a.get(l.name);c?c.push(o.coinId):a.set(l.name,[o.coinId])}}if(a.size>0){const o=Array.from(a.keys()),l=await this.priceProvider.getPrices(o);return s.map(c=>{const u=r.getDefinition(c.coinId),f=u?.name?l.get(u.name):void 0;let d=null,p=null;if(f){const m=Number(c.totalAmount)/Math.pow(10,c.decimals);d=m*f.priceUsd,f.priceEur!=null&&(p=m*f.priceEur)}return{...c,priceUsd:f?.priceUsd??null,priceEur:f?.priceEur??null,change24h:f?.change24h??null,fiatValueUsd:d,fiatValueEur:p}})}}catch(r){console.warn("[Payments] Failed to fetch prices, returning assets without price data:",r)}return s}aggregateTokens(e){const s=new Map;for(const r of this.tokens.values()){if(r.status==="spent"||r.status==="invalid"||r.status==="transferring"||e&&r.coinId!==e)continue;const a=r.coinId,o=BigInt(r.amount),l=r.status==="confirmed",c=s.get(a);c?l?(c.confirmedAmount+=o,c.confirmedTokenCount++):(c.unconfirmedAmount+=o,c.unconfirmedTokenCount++):s.set(a,{coinId:r.coinId,symbol:r.symbol,name:r.name,decimals:r.decimals,iconUrl:r.iconUrl,confirmedAmount:l?o:0n,unconfirmedAmount:l?0n:o,confirmedTokenCount:l?1:0,unconfirmedTokenCount:l?0:1})}return Array.from(s.values()).map(r=>{const a=(r.confirmedAmount+r.unconfirmedAmount).toString();return{coinId:r.coinId,symbol:r.symbol,name:r.name,decimals:r.decimals,iconUrl:r.iconUrl,totalAmount:a,tokenCount:r.confirmedTokenCount+r.unconfirmedTokenCount,confirmedAmount:r.confirmedAmount.toString(),unconfirmedAmount:r.unconfirmedAmount.toString(),confirmedTokenCount:r.confirmedTokenCount,unconfirmedTokenCount:r.unconfirmedTokenCount,priceUsd:null,priceEur:null,change24h:null,fiatValueUsd:null,fiatValueEur:null}})}getTokens(e){let s=Array.from(this.tokens.values());return e?.coinId&&(s=s.filter(r=>r.coinId===e.coinId)),e?.status&&(s=s.filter(r=>r.status===e.status)),s}getToken(e){return this.tokens.get(e)}async resolveUnconfirmed(){this.ensureInitialized();const e={resolved:0,stillPending:0,failed:0,details:[]},s=this.deps.oracle.getStateTransitionClient?.(),r=this.deps.oracle.getTrustBase?.();if(!s||!r)return e;const a=await this.createSigningService();for(const[o,l]of this.tokens){if(l.status!=="submitted")continue;const c=this.parsePendingFinalization(l.sdkData);if(!c){e.stillPending++;continue}if(c.type==="v5_bundle"){const u=await this.resolveV5Token(o,l,c,s,r,a);e.details.push({tokenId:o,stage:c.stage,status:u}),u==="resolved"?e.resolved++:u==="failed"?e.failed++:e.stillPending++}}return(e.resolved>0||e.failed>0)&&await this.save(),e}async resolveV5Token(e,s,r,a,o,l){const c=JSON.parse(r.bundleJson);r.attemptCount++,r.lastAttemptAt=Date.now();try{if(r.stage==="RECEIVED"){const u=JSON.parse(c.recipientMintData),f=await MintTransactionData.fromJSON(u),d=await MintCommitment.create(f),p=await a.submitMintCommitment(d);if(p.status!=="SUCCESS"&&p.status!=="REQUEST_ID_EXISTS")throw new Error(`Mint submission failed: ${p.status}`);r.stage="MINT_SUBMITTED",this.updatePendingFinalization(s,r)}if(r.stage==="MINT_SUBMITTED"){const u=JSON.parse(c.recipientMintData),f=await MintTransactionData.fromJSON(u),d=await MintCommitment.create(f),p=await this.quickProofCheck(a,o,d);if(!p)return this.updatePendingFinalization(s,r),"pending";r.mintProofJson=JSON.stringify(p),r.stage="MINT_PROVEN",this.updatePendingFinalization(s,r)}if(r.stage==="MINT_PROVEN"){const u=JSON.parse(c.transferCommitment),f=await TransferCommitment.fromJSON(u),d=await a.submitTransferCommitment(f);if(d.status!=="SUCCESS"&&d.status!=="REQUEST_ID_EXISTS")throw new Error(`Transfer submission failed: ${d.status}`);r.stage="TRANSFER_SUBMITTED",this.updatePendingFinalization(s,r)}if(r.stage==="TRANSFER_SUBMITTED"){const u=JSON.parse(c.transferCommitment),f=await TransferCommitment.fromJSON(u);if(!await this.quickProofCheck(a,o,f))return this.updatePendingFinalization(s,r),"pending";const p=await this.finalizeFromV5Bundle(c,r,l,a,o),m={id:s.id,coinId:s.coinId,symbol:s.symbol,name:s.name,decimals:s.decimals,iconUrl:s.iconUrl,amount:s.amount,status:"confirmed",createdAt:s.createdAt,updatedAt:Date.now(),sdkData:JSON.stringify(p.toJSON())};return this.tokens.set(e,m),await this.addToHistory({type:"RECEIVED",amount:m.amount,coinId:m.coinId,symbol:m.symbol||"UNK",timestamp:Date.now(),senderPubkey:r.senderPubkey}),this.log(`V5 token resolved: ${e.slice(0,8)}...`),"resolved"}return"pending"}catch(u){return console.error(`[Payments] resolveV5Token failed for ${e.slice(0,8)}:`,u),r.attemptCount>50?(s.status="invalid",s.updatedAt=Date.now(),this.tokens.set(e,s),"failed"):(this.updatePendingFinalization(s,r),"pending")}}async quickProofCheck(e,s,r,a=500){try{return await Promise.race([waitInclusionProof(s,e,r),new Promise(l=>setTimeout(()=>l(null),a))])}catch{return null}}async finalizeFromV5Bundle(e,s,r,a,o){const l=JSON.parse(e.recipientMintData),c=await MintTransactionData.fromJSON(l),u=await MintCommitment.create(c),f=JSON.parse(s.mintProofJson),d=InclusionProof.fromJSON(f),p=u.toTransaction(d),m=new TokenType(fromHex4(e.tokenTypeHex)),b={version:"2.0",state:JSON.parse(e.mintedTokenStateJson),genesis:p.toJSON(),transactions:[],nametags:[]},E=await Token.fromJSON(b),C=JSON.parse(e.transferCommitment),j=await TransferCommitment.fromJSON(C),B=await waitInclusionProof(o,a,j),D=j.toTransaction(B),F=fromHex4(e.transferSaltHex),q=await UnmaskedPredicate.create(c.tokenId,m,r,HashAlgorithm.SHA256,F),V=new TokenState(q,null);let ee=[];const Q=e.recipientAddressJson;if(Q.startsWith("PROXY://")){if(e.nametagTokenJson)try{const Z=await Token.fromJSON(JSON.parse(e.nametagTokenJson)),{ProxyAddress:z}=await __vitePreload(async()=>{const{ProxyAddress:k}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:k}},void 0);(await z.fromTokenId(Z.id)).address===Q&&(ee=[Z])}catch{}const W=this.getNametag();if(ee.length===0&&W?.token)try{const Z=await Token.fromJSON(W.token),{ProxyAddress:z}=await __vitePreload(async()=>{const{ProxyAddress:k}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:k}},void 0);(await z.fromTokenId(Z.id)).address===Q&&(ee=[Z])}catch{}}return a.finalizeTransaction(o,E,V,D,ee)}parsePendingFinalization(e){if(!e)return null;try{const s=JSON.parse(e);return s._pendingFinalization&&s._pendingFinalization.type==="v5_bundle"?s._pendingFinalization:null}catch{return null}}updatePendingFinalization(e,s){const r={id:e.id,coinId:e.coinId,symbol:e.symbol,name:e.name,decimals:e.decimals,iconUrl:e.iconUrl,amount:e.amount,status:e.status,createdAt:e.createdAt,updatedAt:Date.now(),sdkData:JSON.stringify({_pendingFinalization:s})};this.tokens.set(e.id,r)}async savePendingV5Tokens(){const e=[];for(const s of this.tokens.values())this.parsePendingFinalization(s.sdkData)&&e.push(s);e.length>0?await this.deps.storage.set(STORAGE_KEYS_ADDRESS$1.PENDING_V5_TOKENS,JSON.stringify(e)):await this.deps.storage.set(STORAGE_KEYS_ADDRESS$1.PENDING_V5_TOKENS,"")}async loadPendingV5Tokens(){const e=await this.deps.storage.get(STORAGE_KEYS_ADDRESS$1.PENDING_V5_TOKENS);if(e)try{const s=JSON.parse(e);for(const r of s)this.tokens.has(r.id)||this.tokens.set(r.id,r);s.length>0&&this.log(`Restored ${s.length} pending V5 token(s)`)}catch{}}async addToken(e,s=!1){this.ensureInitialized();const r=extractTokenIdFromSdkData(e.sdkData),a=extractStateHashFromSdkData(e.sdkData),o=r&&a?createTokenStateKey(r,a):null;if(r&&a&&this.isStateTombstoned(r,a))return this.log(`Rejecting tombstoned token: ${r.slice(0,8)}..._${a.slice(0,8)}...`),!1;if(o){for(const[l,c]of this.tokens)if(isSameTokenState(c,e))return this.log(`Duplicate token state ignored: ${r?.slice(0,8)}..._${a?.slice(0,8)}...`),!1}for(const[l,c]of this.tokens)if(hasSameGenesisTokenId(c,e)){const u=extractStateHashFromSdkData(c.sdkData);if(a&&u&&a===u)continue;if(c.status==="spent"||c.status==="invalid"){this.log(`Replacing spent/invalid token ${r?.slice(0,8)}...`),this.tokens.delete(l);break}if(a&&u&&a!==u){this.log(`Token ${r?.slice(0,8)}... state updated: ${u.slice(0,8)}... -> ${a.slice(0,8)}...`),await this.archiveToken(c),this.tokens.delete(l);break}if((!a||!u)&&l!==e.id){this.log(`Token ${r?.slice(0,8)}... .id changed, replacing`),await this.archiveToken(c),this.tokens.delete(l);break}}return this.tokens.set(e.id,e),await this.archiveToken(e),!s&&e.coinId&&e.amount&&await this.addToHistory({type:"RECEIVED",amount:e.amount,coinId:e.coinId,symbol:e.symbol||"UNK",timestamp:e.createdAt||Date.now()}),await this.save(),this.log(`Added token ${e.id}, total: ${this.tokens.size}`),!0}async updateToken(e){this.ensureInitialized();const s=extractTokenIdFromSdkData(e.sdkData);let r=!1;for(const[a,o]of this.tokens){const l=extractTokenIdFromSdkData(o.sdkData);if(l&&s&&l===s||o.id===e.id){this.tokens.delete(a),this.tokens.set(e.id,e),r=!0;break}}if(!r){await this.addToken(e,!0);return}await this.archiveToken(e),await this.save(),this.log(`Updated token ${e.id}`)}async removeToken(e,s,r=!1){this.ensureInitialized();const a=this.tokens.get(e);if(!a)return;await this.archiveToken(a);const o=createTombstoneFromToken(a);o?this.tombstones.some(c=>c.tokenId===o.tokenId&&c.stateHash===o.stateHash)||(this.tombstones.push(o),this.log(`Created tombstone for ${o.tokenId.slice(0,8)}..._${o.stateHash.slice(0,8)}...`)):this.log(`Warning: Could not create tombstone for token ${e.slice(0,8)}... (missing tokenId or stateHash)`),this.tokens.delete(e),!r&&a.coinId&&a.amount&&await this.addToHistory({type:"SENT",amount:a.amount,coinId:a.coinId,symbol:a.symbol||"UNK",timestamp:Date.now(),recipientNametag:s}),await this.save()}getTombstones(){return[...this.tombstones]}isStateTombstoned(e,s){return this.tombstones.some(r=>r.tokenId===e&&r.stateHash===s)}async mergeTombstones(e){this.ensureInitialized();let s=0;const r=new Set(e.map(o=>`${o.tokenId}:${o.stateHash}`)),a=[];for(const o of this.tokens.values()){const l=extractTokenIdFromSdkData(o.sdkData),c=extractStateHashFromSdkData(o.sdkData),u=`${l}:${c}`;r.has(u)&&a.push(o)}for(const o of a)this.tokens.delete(o.id),this.log(`Removed tombstoned token ${o.id.slice(0,8)}...`),s++;for(const o of e)this.tombstones.some(c=>c.tokenId===o.tokenId&&c.stateHash===o.stateHash)||this.tombstones.push(o);return s>0&&await this.save(),s}async pruneTombstones(e){const s=this.tombstones.length;this.tombstones=pruneTombstonesByAge(this.tombstones,e),this.tombstones.length<s&&(await this.save(),this.log(`Pruned tombstones from ${s} to ${this.tombstones.length}`))}getArchivedTokens(){return new Map(this.archivedTokens)}getBestArchivedVersion(e){return findBestTokenVersion(e,this.archivedTokens,this.forkedTokens)}async mergeArchivedTokens(e){let s=0;for(const[r,a]of e){const o=this.archivedTokens.get(r);if(!o)this.archivedTokens.set(r,a),s++;else if(isIncrementalUpdate(o,a))this.archivedTokens.set(r,a),s++;else if(!isIncrementalUpdate(a,o)){const l=getCurrentStateHash(a)||"";await this.storeForkedToken(r,l,a)}}return s>0&&await this.save(),s}async pruneArchivedTokens(e=100){if(this.archivedTokens.size<=e)return;const s=this.archivedTokens.size;this.archivedTokens=pruneMapByCount(this.archivedTokens,e),await this.save(),this.log(`Pruned archived tokens from ${s} to ${this.archivedTokens.size}`)}getForkedTokens(){return new Map(this.forkedTokens)}async storeForkedToken(e,s,r){const a=`${e}_${s}`;this.forkedTokens.has(a)||(this.forkedTokens.set(a,r),this.log(`Stored forked token ${e.slice(0,8)}... state ${s.slice(0,12)}...`),await this.save())}async mergeForkedTokens(e){let s=0;for(const[r,a]of e)this.forkedTokens.has(r)||(this.forkedTokens.set(r,a),s++);return s>0&&await this.save(),s}async pruneForkedTokens(e=50){if(this.forkedTokens.size<=e)return;const s=this.forkedTokens.size;this.forkedTokens=pruneMapByCount(this.forkedTokens,e),await this.save(),this.log(`Pruned forked tokens from ${s} to ${this.forkedTokens.size}`)}getHistory(){return[...this.transactionHistory].sort((e,s)=>s.timestamp-e.timestamp)}async addToHistory(e){this.ensureInitialized();const s={id:crypto.randomUUID(),...e};this.transactionHistory.push(s),await this.deps.storage.set(STORAGE_KEYS_ADDRESS$1.TRANSACTION_HISTORY,JSON.stringify(this.transactionHistory))}async setNametag(e){this.ensureInitialized();const s=this.nametags.findIndex(r=>r.name===e.name);s>=0?this.nametags[s]=e:this.nametags.push(e),await this.save(),this.log(`Nametag set: ${e.name}`)}getNametag(){return this.nametags[0]??null}getNametags(){return[...this.nametags]}hasNametag(){return this.nametags.length>0}async clearNametag(){this.ensureInitialized(),this.nametags=[],await this.save()}async reloadNametagsFromStorage(){const e=this.getTokenStorageProviders();for(const[,s]of e)try{const r=await s.load();if(r.success&&r.data){const a=parseTxfStorageData(r.data);if(a.nametags.length>0){this.nametags=a.nametags,this.log(`Reloaded ${a.nametags.length} nametag(s) from storage`);return}}}catch{}}async mintNametag(e){this.ensureInitialized();const s=this.deps.oracle.getStateTransitionClient?.();if(!s)return{success:!1,error:"State transition client not available. Oracle provider must implement getStateTransitionClient()"};const r=this.deps.oracle.getTrustBase?.();if(!r)return{success:!1,error:"Trust base not available. Oracle provider must implement getTrustBase()"};try{const a=await this.createSigningService(),{UnmaskedPredicateReference:o}=await __vitePreload(async()=>{const{UnmaskedPredicateReference:y}=await Promise.resolve().then(()=>UnmaskedPredicateReference$1);return{UnmaskedPredicateReference:y}},void 0),{TokenType:l}=await __vitePreload(async()=>{const{TokenType:y}=await Promise.resolve().then(()=>TokenType$1);return{TokenType:y}},void 0),c="f8aa13834268d29355ff12183066f0cb902003629bbc5eb9ef0efbe397867509",u=new l(Buffer.from(c,"hex")),d=await(await o.create(u,a.algorithm,a.publicKey,HashAlgorithm.SHA256)).toAddress(),m=await new NametagMinter({stateTransitionClient:s,trustBase:r,signingService:a,debug:this.moduleConfig.debug}).mintNametag(e,d);return m.success&&m.nametagData&&(await this.setNametag(m.nametagData),this.log(`Nametag minted and saved: ${m.nametagData.name}`),this.deps.emitEvent("nametag:registered",{nametag:m.nametagData.name,addressIndex:0})),m}catch(a){const o=a instanceof Error?a.message:String(a);return this.log("mintNametag failed:",o),{success:!1,error:o}}}async isNametagAvailable(e){this.ensureInitialized();const s=this.deps.oracle.getStateTransitionClient?.(),r=this.deps.oracle.getTrustBase?.();if(!s||!r)return!1;try{const a=await this.createSigningService();return await new NametagMinter({stateTransitionClient:s,trustBase:r,signingService:a}).isNametagAvailable(e)}catch{return!1}}async sync(){if(this.ensureInitialized(),this._syncInProgress)return this._syncInProgress;this._syncInProgress=this._doSync();try{return await this._syncInProgress}finally{this._syncInProgress=null}}async _doSync(){this.deps.emitEvent("sync:started",{source:"payments"});try{const e=this.getTokenStorageProviders();if(e.size===0)return await this.save(),this.deps.emitEvent("sync:completed",{source:"payments",count:this.tokens.size}),{added:0,removed:0};const s=await this.createStorageData();let r=0,a=0;const o=[...this.nametags];for(const[l,c]of e)try{const u=await c.sync(s);u.success&&u.merged&&(this.loadFromStorageData(u.merged),this.nametags.length===0&&o.length>0&&(this.nametags=o),r+=u.added,a+=u.removed),this.deps.emitEvent("sync:provider",{providerId:l,success:u.success,added:u.added,removed:u.removed})}catch(u){console.warn(`[PaymentsModule] Sync failed for provider ${l}:`,u),this.deps.emitEvent("sync:provider",{providerId:l,success:!1,error:u instanceof Error?u.message:String(u)})}return(r>0||a>0)&&await this.save(),this.deps.emitEvent("sync:completed",{source:"payments",count:this.tokens.size}),{added:r,removed:a}}catch(e){throw this.deps.emitEvent("sync:error",{source:"payments",error:e instanceof Error?e.message:String(e)}),e}}subscribeToStorageEvents(){this.unsubscribeStorageEvents();const e=this.getTokenStorageProviders();for(const[s,r]of e)if(r.onEvent){const a=r.onEvent(o=>{o.type==="storage:remote-updated"&&(this.log("Remote update detected from provider",s,o.data),this.debouncedSyncFromRemoteUpdate(s,o.data))});this.storageEventUnsubscribers.push(a)}}unsubscribeStorageEvents(){for(const e of this.storageEventUnsubscribers)e();this.storageEventUnsubscribers=[],this.syncDebounceTimer&&(clearTimeout(this.syncDebounceTimer),this.syncDebounceTimer=null)}debouncedSyncFromRemoteUpdate(e,s){this.syncDebounceTimer&&clearTimeout(this.syncDebounceTimer),this.syncDebounceTimer=setTimeout(()=>{this.syncDebounceTimer=null,this.sync().then(r=>{const a=s;this.deps?.emitEvent("sync:remote-update",{providerId:e,name:a?.name??"",sequence:a?.sequence??0,cid:a?.cid??"",added:r.added,removed:r.removed})}).catch(r=>{this.log("Auto-sync from remote update failed:",r)})},Oa.SYNC_DEBOUNCE_MS)}getTokenStorageProviders(){let e;if(this.deps.tokenStorageProviders&&this.deps.tokenStorageProviders.size>0)e=this.deps.tokenStorageProviders;else if(this.deps.tokenStorage)e=new Map,e.set(this.deps.tokenStorage.id,this.deps.tokenStorage);else return new Map;const s=this.deps.disabledProviderIds;if(s&&s.size>0){const r=new Map;for(const[a,o]of e)s.has(a)||r.set(a,o);return r}return e}isPriceDisabled(){const e=this.deps?.disabledProviderIds;if(!e||e.size===0)return!1;const s=this.priceProvider?.id??"price";return e.has(s)}updateTokenStorageProviders(e){this.deps&&(this.deps.tokenStorageProviders=e,this.subscribeToStorageEvents())}async validate(){this.ensureInitialized();const e=[],s=[];for(const r of this.tokens.values()){const a=await this.deps.oracle.validateToken(r.sdkData);a.valid&&!a.spent?e.push(r):(r.status="invalid",s.push(r))}return s.length>0&&await this.save(),{valid:e,invalid:s}}getPendingTransfers(){return Array.from(this.pendingTransfers.values())}resolveTransportPubkey(e,s){if(s?.transportPubkey)return s.transportPubkey;if(e.length>=64&&/^[0-9a-fA-F]+$/.test(e))return e.length===66&&(e.startsWith("02")||e.startsWith("03"))?e.slice(2):e;throw new Error(`Cannot resolve transport pubkey for "${e}". No binding event found. The recipient must publish their identity first.`)}async createSdkCommitment(e,s,r){const a=e.sdkData?typeof e.sdkData=="string"?JSON.parse(e.sdkData):e.sdkData:e,o=await Token.fromJSON(a),l=crypto.getRandomValues(new Uint8Array(32));return await TransferCommitment.create(o,s,l,null,null,r)}async createSigningService(){const e=this.deps.identity.privateKey,s=new Uint8Array(e.match(/.{1,2}/g).map(r=>parseInt(r,16)));return SigningService.createFromSecret(s)}async getSigningPublicKey(){return this.ensureInitialized(),(await this.createSigningService()).publicKey}async createDirectAddressFromPubkey(e){const{UnmaskedPredicateReference:s}=await __vitePreload(async()=>{const{UnmaskedPredicateReference:u}=await Promise.resolve().then(()=>UnmaskedPredicateReference$1);return{UnmaskedPredicateReference:u}},void 0),{TokenType:r}=await __vitePreload(async()=>{const{TokenType:u}=await Promise.resolve().then(()=>TokenType$1);return{TokenType:u}},void 0),a="f8aa13834268d29355ff12183066f0cb902003629bbc5eb9ef0efbe397867509",o=new r(Buffer.from(a,"hex")),l=new Uint8Array(e.match(/.{1,2}/g).map(u=>parseInt(u,16)));return(await s.create(o,"secp256k1",l,HashAlgorithm.SHA256)).toAddress()}async resolveRecipientAddress(e,s="auto",r){const{AddressFactory:a}=await __vitePreload(async()=>{const{AddressFactory:u}=await Promise.resolve().then(()=>AddressFactory$1);return{AddressFactory:u}},void 0),{ProxyAddress:o}=await __vitePreload(async()=>{const{ProxyAddress:u}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:u}},void 0);if(e.startsWith("PROXY:")||e.startsWith("DIRECT:"))return a.createAddress(e);if(e.length===66&&/^[0-9a-fA-F]+$/.test(e))return this.log("Creating DirectAddress from 33-byte compressed pubkey"),this.createDirectAddressFromPubkey(e);const l=r??await this.deps?.transport.resolve?.(e)??null;if(!l)throw new Error(`Recipient "${e}" not found. Use @nametag, a valid PROXY:/DIRECT: address, or a 33-byte hex pubkey.`);const c=e.startsWith("@")?e.slice(1):l.nametag||e;if(s==="proxy")return console.log(`[Payments] Using PROXY address for "${c}" (forced)`),o.fromNameTag(c);if(s==="direct"){if(!l.directAddress)throw new Error(`"${c}" has no DirectAddress stored. It may be a legacy registration.`);return console.log(`[Payments] Using DirectAddress for "${c}" (forced): ${l.directAddress.slice(0,30)}...`),a.createAddress(l.directAddress)}return l.directAddress?(this.log(`Using DirectAddress for "${c}": ${l.directAddress.slice(0,30)}...`),a.createAddress(l.directAddress)):(this.log(`Using PROXY address for legacy nametag "${c}"`),o.fromNameTag(c))}async handleCommitmentOnlyTransfer(e,s){try{const r=typeof s.sourceToken=="string"?JSON.parse(s.sourceToken):s.sourceToken,a=typeof s.commitmentData=="string"?JSON.parse(s.commitmentData):s.commitmentData;if(!r||!a){console.warn("[Payments] Invalid NOSTR-FIRST transfer format");return}const o=await parseTokenInfo(r),l={id:o.tokenId??crypto.randomUUID(),coinId:o.coinId,symbol:o.symbol,name:o.name,decimals:o.decimals,iconUrl:o.iconUrl,amount:o.amount,status:"submitted",createdAt:Date.now(),updatedAt:Date.now(),sdkData:typeof r=="string"?r:JSON.stringify(r)},c=extractTokenIdFromSdkData(l.sdkData),u=extractStateHashFromSdkData(l.sdkData);if(c&&u&&this.isStateTombstoned(c,u)){this.log(`NOSTR-FIRST: Rejecting tombstoned token ${c.slice(0,8)}..._${u.slice(0,8)}...`);return}this.tokens.set(l.id,l),await this.save(),this.log(`NOSTR-FIRST: Token ${l.id.slice(0,8)}... added as submitted (unconfirmed)`);const f={id:e.id,senderPubkey:e.senderTransportPubkey,tokens:[l],memo:s.memo,receivedAt:e.timestamp};this.deps.emitEvent("transfer:incoming",f);try{const d=await TransferCommitment.fromJSON(a),p=d.requestId,m=p instanceof Uint8Array?Array.from(p).map(b=>b.toString(16).padStart(2,"0")).join(""):String(p),y=this.deps.oracle.getStateTransitionClient?.();if(y){const b=await y.submitTransferCommitment(d);this.log(`NOSTR-FIRST recipient commitment submit: ${b.status}`)}this.addProofPollingJob({tokenId:l.id,requestIdHex:m,commitmentJson:JSON.stringify(a),startedAt:Date.now(),attemptCount:0,lastAttemptAt:0,onProofReceived:async b=>{await this.finalizeReceivedToken(b,r,a,e.senderTransportPubkey)}})}catch(d){console.error("[Payments] Failed to parse commitment for proof polling:",d)}}catch(r){console.error("[Payments] Failed to process NOSTR-FIRST transfer:",r)}}async finalizeTransferToken(e,s,r,a){const o=s.data.recipient,l=o.scheme,c=await this.createSigningService(),u=s.data.salt,f=await UnmaskedPredicate.create(e.id,e.type,c,HashAlgorithm.SHA256,u),d=new TokenState(f,null);let p=[];if(l===AddressScheme.PROXY){const{ProxyAddress:m}=await __vitePreload(async()=>{const{ProxyAddress:C}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:C}},void 0);let y=this.getNametag();if(y?.token||(this.log("Nametag missing in memory, attempting reload from storage..."),await this.reloadNametagsFromStorage(),y=this.getNametag()),!y?.token)throw new Error("Cannot finalize PROXY transfer - no nametag token");const b=await Token.fromJSON(y.token),E=await m.fromTokenId(b.id);if(E.address!==o.address)throw new Error(`PROXY address mismatch: nametag resolves to ${E.address} but transfer targets ${o.address}`);p=[b]}return r.finalizeTransaction(a,e,d,s,p)}async finalizeReceivedToken(e,s,r,a){try{const o=this.tokens.get(e);if(!o){this.log(`Token ${e} not found for finalization`);return}const l=await TransferCommitment.fromJSON(r);if(!this.deps.oracle.waitForProofSdk){this.log("Cannot finalize - no waitForProofSdk"),o.status="confirmed",o.updatedAt=Date.now(),await this.save();return}const c=await this.deps.oracle.waitForProofSdk(l),u=l.toTransaction(c),f=await Token.fromJSON(s),d=this.deps.oracle.getStateTransitionClient?.(),p=this.deps.oracle.getTrustBase?.();if(!d||!p){this.log("Cannot finalize - missing state transition client or trust base"),o.status="confirmed",o.updatedAt=Date.now(),await this.save();return}const m=await this.finalizeTransferToken(f,u,d,p),y={...o,status:"confirmed",updatedAt:Date.now(),sdkData:JSON.stringify(m.toJSON())};this.tokens.set(e,y),await this.save(),this.log(`NOSTR-FIRST: Token ${e.slice(0,8)}... finalized and confirmed`),this.deps.emitEvent("transfer:confirmed",{id:crypto.randomUUID(),status:"completed",tokens:[y],tokenTransfers:[]}),await this.addToHistory({type:"RECEIVED",amount:y.amount,coinId:y.coinId,symbol:y.symbol,timestamp:Date.now(),senderPubkey:a})}catch(o){console.error("[Payments] Failed to finalize received token:",o);const l=this.tokens.get(e);l&&l.status==="submitted"&&(l.status="confirmed",l.updatedAt=Date.now(),await this.save())}}async handleIncomingTransfer(e){try{const s=e.payload;let r=null;if(isInstantSplitBundle(s))r=s;else if(s.token)try{const d=typeof s.token=="string"?JSON.parse(s.token):s.token;isInstantSplitBundle(d)&&(r=d)}catch{}if(r){this.log("Processing INSTANT_SPLIT bundle...");try{const d=await this.processInstantSplitBundle(r,e.senderTransportPubkey);d.success?this.log("INSTANT_SPLIT processed successfully"):console.warn("[Payments] INSTANT_SPLIT processing failed:",d.error)}catch(d){console.error("[Payments] INSTANT_SPLIT processing error:",d)}return}if(s.sourceToken&&s.commitmentData&&!s.transferTx){this.log("Processing NOSTR-FIRST commitment-only transfer..."),await this.handleCommitmentOnlyTransfer(e,s);return}let a,o=null;if(s.sourceToken&&s.transferTx){this.log("Processing Sphere wallet format transfer...");const d=typeof s.sourceToken=="string"?JSON.parse(s.sourceToken):s.sourceToken,p=typeof s.transferTx=="string"?JSON.parse(s.transferTx):s.transferTx;if(!d||!p){console.warn("[Payments] Invalid Sphere wallet transfer format");return}let m,y;try{m=await Token.fromJSON(d)}catch(b){console.error("[Payments] Failed to parse sourceToken:",b);return}try{const b=p.inclusionProof!==void 0,E=p.data!==void 0,C=p.transactionData!==void 0,j=p.authenticator!==void 0;if(E&&b)y=await TransferTransaction.fromJSON(p);else if(C&&j){const B=await TransferCommitment.fromJSON(p),D=this.deps.oracle.getStateTransitionClient?.();if(!D){console.error("[Payments] Cannot process commitment - no state transition client");return}const F=await D.submitTransferCommitment(B);if(F.status!=="SUCCESS"&&F.status!=="REQUEST_ID_EXISTS"){console.error("[Payments] Transfer commitment submission failed:",F.status);return}if(!this.deps.oracle.waitForProofSdk){console.error("[Payments] Cannot wait for proof - missing oracle method");return}const q=await this.deps.oracle.waitForProofSdk(B);y=B.toTransaction(q)}else try{y=await TransferTransaction.fromJSON(p)}catch{const B=await TransferCommitment.fromJSON(p),D=this.deps.oracle.getStateTransitionClient?.();if(!D||!this.deps.oracle.waitForProofSdk)throw new Error("Cannot submit commitment - missing oracle methods");await D.submitTransferCommitment(B);const F=await this.deps.oracle.waitForProofSdk(B);y=B.toTransaction(F)}}catch(b){console.error("[Payments] Failed to parse transferTx:",b);return}try{const b=this.deps.oracle.getStateTransitionClient?.(),E=this.deps.oracle.getTrustBase?.();if(!b||!E){console.error("[Payments] Cannot finalize - missing state transition client or trust base. Token rejected.");return}o=await this.finalizeTransferToken(m,y,b,E),a=o.toJSON();const C=y.data.recipient.scheme;this.log(`${C===AddressScheme.PROXY?"PROXY":"DIRECT"} finalization successful`)}catch(b){console.error("[Payments] Finalization FAILED - token rejected:",b);return}}else if(s.token)a=s.token;else{console.warn("[Payments] Unknown transfer payload format");return}if(!(await this.deps.oracle.validateToken(a)).valid){console.warn("[Payments] Received invalid token");return}const c=await parseTokenInfo(a),u={id:c.tokenId??crypto.randomUUID(),coinId:c.coinId,symbol:c.symbol,name:c.name,decimals:c.decimals,iconUrl:c.iconUrl,amount:c.amount,status:"confirmed",createdAt:Date.now(),updatedAt:Date.now(),sdkData:typeof a=="string"?a:JSON.stringify(a)};await this.addToken(u);const f={id:e.id,senderPubkey:e.senderTransportPubkey,tokens:[u],memo:s.memo,receivedAt:e.timestamp};this.deps.emitEvent("transfer:incoming",f),this.log(`Incoming transfer processed: ${u.id}, ${u.amount} ${u.symbol}`)}catch(s){console.error("[Payments] Failed to process incoming transfer:",s)}}async archiveToken(e){const s=tokenToTxf(e);if(!s)return;const r=s.genesis?.data?.tokenId;if(!r)return;const a=this.archivedTokens.get(r);if(a)if(isIncrementalUpdate(a,s))this.archivedTokens.set(r,s),this.log(`Updated archived token ${r.slice(0,8)}...`);else{const o=getCurrentStateHash(s)||"";await this.storeForkedToken(r,o,s),this.log(`Archived token ${r.slice(0,8)}... is a fork`)}else this.archivedTokens.set(r,s),this.log(`Archived token ${r.slice(0,8)}...`)}async save(){const e=this.getTokenStorageProviders();if(e.size===0){this.log("No token storage providers - tokens not persisted");return}const s=await this.createStorageData();for(const[r,a]of e)try{await a.save(s)}catch(o){console.error(`[Payments] Failed to save to provider ${r}:`,o)}await this.savePendingV5Tokens()}async saveToOutbox(e,s){const r=await this.loadOutbox();r.push({transfer:e,recipient:s,createdAt:Date.now()}),await this.deps.storage.set(STORAGE_KEYS_ADDRESS$1.OUTBOX,JSON.stringify(r))}async removeFromOutbox(e){const r=(await this.loadOutbox()).filter(a=>a.transfer.id!==e);await this.deps.storage.set(STORAGE_KEYS_ADDRESS$1.OUTBOX,JSON.stringify(r))}async loadOutbox(){const e=await this.deps.storage.get(STORAGE_KEYS_ADDRESS$1.OUTBOX);return e?JSON.parse(e):[]}async createStorageData(){return await buildTxfStorageData(Array.from(this.tokens.values()),{version:1,address:this.deps.identity.l1Address,ipnsName:this.deps.identity.ipnsName??""},{nametags:this.nametags,tombstones:this.tombstones,archivedTokens:this.archivedTokens,forkedTokens:this.forkedTokens})}loadFromStorageData(e){const s=parseTxfStorageData(e);this.tombstones=s.tombstones,this.tokens.clear();for(const r of s.tokens){const a=extractTokenIdFromSdkData(r.sdkData),o=extractStateHashFromSdkData(r.sdkData);if(a&&o&&this.isStateTombstoned(a,o)){this.log(`Skipping tombstoned token ${a.slice(0,8)}... during load (exact state match)`);continue}this.tokens.set(r.id,r)}this.archivedTokens=s.archivedTokens,this.forkedTokens=s.forkedTokens,this.nametags=s.nametags}async submitAndPollForProof(e,s,r,a){try{const o=this.deps.oracle.getStateTransitionClient?.();if(!o){this.log("Cannot submit commitment - no state transition client");return}const l=await o.submitTransferCommitment(s);if(l.status!=="SUCCESS"&&l.status!=="REQUEST_ID_EXISTS"){this.log(`Transfer commitment submission failed: ${l.status}`);const c=this.tokens.get(e);c&&(c.status="invalid",c.updatedAt=Date.now(),this.tokens.set(e,c),await this.save());return}this.addProofPollingJob({tokenId:e,requestIdHex:r,commitmentJson:JSON.stringify(s.toJSON()),startedAt:Date.now(),attemptCount:0,lastAttemptAt:0,onProofReceived:a})}catch(o){this.log("submitAndPollForProof error:",o)}}addProofPollingJob(e){this.proofPollingJobs.set(e.tokenId,e),this.log(`Added proof polling job for token ${e.tokenId.slice(0,8)}...`),this.startProofPolling()}startProofPolling(){this.proofPollingInterval||this.proofPollingJobs.size!==0&&(this.log("Starting proof polling..."),this.proofPollingInterval=setInterval(()=>this.processProofPollingQueue(),Oa.PROOF_POLLING_INTERVAL_MS))}stopProofPolling(){this.proofPollingInterval&&(clearInterval(this.proofPollingInterval),this.proofPollingInterval=null,this.log("Stopped proof polling"))}async processProofPollingQueue(){if(this.proofPollingJobs.size===0){this.stopProofPolling();return}const e=[];for(const[s,r]of this.proofPollingJobs)try{if(r.attemptCount++,r.lastAttemptAt=Date.now(),r.attemptCount>=Oa.PROOF_POLLING_MAX_ATTEMPTS){this.log(`Proof polling timeout for token ${s.slice(0,8)}...`);const c=this.tokens.get(s);c&&c.status==="submitted"&&(c.status="invalid",c.updatedAt=Date.now(),this.tokens.set(s,c)),e.push(s);continue}const a=await TransferCommitment.fromJSON(JSON.parse(r.commitmentJson));let o=null;try{const c=new AbortController,u=setTimeout(()=>c.abort(),500);if(this.deps.oracle.waitForProofSdk)o=await Promise.race([this.deps.oracle.waitForProofSdk(a,c.signal),new Promise(f=>setTimeout(()=>f(null),500))]);else{const f=await this.deps.oracle.getProof(r.requestIdHex);f&&(o=f)}clearTimeout(u)}catch{continue}if(!o)continue;const l=this.tokens.get(s);l&&(l.status="spent",l.updatedAt=Date.now(),this.tokens.set(s,l),await this.save(),this.log(`Proof received for token ${s.slice(0,8)}..., status: spent`)),r.onProofReceived?.(s),e.push(s)}catch(a){this.log(`Proof polling attempt ${r.attemptCount} for ${s.slice(0,8)}...: ${a}`)}for(const s of e)this.proofPollingJobs.delete(s);this.proofPollingJobs.size===0&&this.stopProofPolling()}ensureInitialized(){if(!this.deps)throw new Error("PaymentsModule not initialized")}};function createPaymentsModule(t){return new PaymentsModule(t)}var CommunicationsModule=class{config;deps=null;messages=new Map;broadcasts=new Map;unsubscribeMessages=null;unsubscribeComposing=null;broadcastSubscriptions=new Map;dmHandlers=new Set;composingHandlers=new Set;broadcastHandlers=new Set;constructor(t){this.config={autoSave:t?.autoSave??!0,maxMessages:t?.maxMessages??1e3,maxPerConversation:t?.maxPerConversation??200,readReceipts:t?.readReceipts??!0}}initialize(t){this.unsubscribeMessages?.(),this.unsubscribeComposing?.(),this.deps=t,this.unsubscribeMessages=t.transport.onMessage(e=>{this.handleIncomingMessage(e)}),t.transport.onReadReceipt&&t.transport.onReadReceipt(e=>{const s=this.messages.get(e.messageEventId);s&&s.senderPubkey===this.deps.identity.chainPubkey&&(s.isRead=!0,this.save(),this.deps.emitEvent("message:read",{messageIds:[e.messageEventId],peerPubkey:e.senderTransportPubkey}))}),t.transport.onTypingIndicator&&t.transport.onTypingIndicator(e=>{this.deps.emitEvent("message:typing",{senderPubkey:e.senderTransportPubkey,senderNametag:e.senderNametag,timestamp:e.timestamp})}),this.unsubscribeComposing=t.transport.onComposing?.(e=>{this.handleComposingIndicator(e)})??null}async load(){this.ensureInitialized(),this.messages.clear();let t=await this.deps.storage.get(STORAGE_KEYS_ADDRESS$1.MESSAGES);if(t){const e=JSON.parse(t);for(const s of e)this.messages.set(s.id,s);return}if(t=await this.deps.storage.get("direct_messages"),t){const e=JSON.parse(t),s=this.deps.identity.chainPubkey,r=e.filter(a=>a.senderPubkey===s||a.recipientPubkey===s);for(const a of r)this.messages.set(a.id,a);r.length>0&&(await this.save(),console.log(`[Communications] Migrated ${r.length} messages to per-address storage`))}}destroy(){this.unsubscribeMessages?.(),this.unsubscribeMessages=null,this.unsubscribeComposing?.(),this.unsubscribeComposing=null;for(const t of this.broadcastSubscriptions.values())t();this.broadcastSubscriptions.clear()}async sendDM(t,e){this.ensureInitialized();const s=await this.resolveRecipient(t),a={id:await this.deps.transport.sendMessage(s.pubkey,e),senderPubkey:this.deps.identity.chainPubkey,senderNametag:this.deps.identity.nametag,recipientPubkey:s.pubkey,...s.nametag?{recipientNametag:s.nametag}:{},content:e,timestamp:Date.now(),isRead:!1};return this.messages.set(a.id,a),this.config.autoSave&&await this.save(),a}getConversation(t){return Array.from(this.messages.values()).filter(e=>e.senderPubkey===t||e.recipientPubkey===t).sort((e,s)=>e.timestamp-s.timestamp)}getConversations(){const t=new Map;for(const e of this.messages.values()){const s=e.senderPubkey===this.deps?.identity.chainPubkey?e.recipientPubkey:e.senderPubkey;t.has(s)||t.set(s,[]),t.get(s).push(e)}for(const e of t.values())e.sort((s,r)=>s.timestamp-r.timestamp);return t}async markAsRead(t){for(const e of t){const s=this.messages.get(e);s&&(s.isRead=!0)}if(this.config.autoSave&&await this.save(),this.config.readReceipts&&this.deps?.transport.sendReadReceipt)for(const e of t){const s=this.messages.get(e);s&&s.senderPubkey!==this.deps.identity.chainPubkey&&this.deps.transport.sendReadReceipt(s.senderPubkey,e).catch(r=>{console.warn("[Communications] Failed to send read receipt:",r)})}}getUnreadCount(t){let e=Array.from(this.messages.values()).filter(s=>!s.isRead&&s.senderPubkey!==this.deps?.identity.chainPubkey);return t&&(e=e.filter(s=>s.senderPubkey===t)),e.length}getConversationPage(t,e){const s=e?.limit??20,r=e?.before??1/0,a=Array.from(this.messages.values()).filter(l=>(l.senderPubkey===t||l.recipientPubkey===t)&&l.timestamp<r).sort((l,c)=>c.timestamp-l.timestamp),o=a.slice(0,s);return{messages:o.reverse(),hasMore:a.length>s,oldestTimestamp:o.length>0?o[0].timestamp:null}}async deleteConversation(t){for(const[e,s]of this.messages)(s.senderPubkey===t||s.recipientPubkey===t)&&this.messages.delete(e);this.config.autoSave&&await this.save()}async sendTypingIndicator(t){this.ensureInitialized(),this.deps.transport.sendTypingIndicator&&await this.deps.transport.sendTypingIndicator(t)}async sendComposingIndicator(t){this.ensureInitialized();const e=await this.resolveRecipient(t),s=JSON.stringify({senderNametag:this.deps.identity.nametag,expiresIn:3e4});await this.deps.transport.sendComposingIndicator?.(e.pubkey,s)}onComposingIndicator(t){return this.composingHandlers.add(t),()=>this.composingHandlers.delete(t)}onDirectMessage(t){return this.dmHandlers.add(t),()=>this.dmHandlers.delete(t)}async broadcast(t,e){this.ensureInitialized();const r={id:await this.deps.transport.publishBroadcast?.(t,e)??crypto.randomUUID(),authorPubkey:this.deps.identity.chainPubkey,authorNametag:this.deps.identity.nametag,content:t,timestamp:Date.now(),tags:e};return this.broadcasts.set(r.id,r),r}subscribeToBroadcasts(t){this.ensureInitialized();const e=t.sort().join(":");if(this.broadcastSubscriptions.has(e))return()=>{};const s=this.deps.transport.subscribeToBroadcast?.(t,r=>{this.handleIncomingBroadcast(r)});return s&&this.broadcastSubscriptions.set(e,s),()=>{const r=this.broadcastSubscriptions.get(e);r&&(r(),this.broadcastSubscriptions.delete(e))}}getBroadcasts(t){const e=Array.from(this.broadcasts.values()).sort((s,r)=>r.timestamp-s.timestamp);return t?e.slice(0,t):e}onBroadcast(t){return this.broadcastHandlers.add(t),()=>this.broadcastHandlers.delete(t)}handleIncomingMessage(t){if(t.isSelfWrap&&t.recipientTransportPubkey){if(this.messages.has(t.id))return;const s={id:t.id,senderPubkey:this.deps.identity.chainPubkey,senderNametag:t.senderNametag,recipientPubkey:t.recipientTransportPubkey,content:t.content,timestamp:t.timestamp,isRead:!1};this.messages.set(s.id,s),this.deps.emitEvent("message:dm",s),this.config.autoSave&&this.save();return}if(t.senderTransportPubkey===this.deps?.identity.chainPubkey||this.messages.has(t.id))return;const e={id:t.id,senderPubkey:t.senderTransportPubkey,senderNametag:t.senderNametag,recipientPubkey:this.deps.identity.chainPubkey,content:t.content,timestamp:t.timestamp,isRead:!1};this.messages.set(e.id,e),this.deps.emitEvent("message:dm",e);for(const s of this.dmHandlers)try{s(e)}catch(r){console.error("[Communications] Handler error:",r)}this.config.autoSave&&this.save(),this.pruneIfNeeded()}handleComposingIndicator(t){const e={senderPubkey:t.senderPubkey,senderNametag:t.senderNametag,expiresIn:t.expiresIn};this.deps.emitEvent("composing:started",e);for(const s of this.composingHandlers)try{s(e)}catch(r){console.error("[Communications] Composing handler error:",r)}}handleIncomingBroadcast(t){const e={id:t.id,authorPubkey:t.authorTransportPubkey,content:t.content,timestamp:t.timestamp,tags:t.tags};this.broadcasts.set(e.id,e),this.deps.emitEvent("message:broadcast",e);for(const s of this.broadcastHandlers)try{s(e)}catch(r){console.error("[Communications] Handler error:",r)}}async save(){const t=Array.from(this.messages.values());await this.deps.storage.set(STORAGE_KEYS_ADDRESS$1.MESSAGES,JSON.stringify(t))}pruneIfNeeded(){const t=new Map;for(const r of this.messages.values()){const a=r.senderPubkey===this.deps?.identity.chainPubkey?r.recipientPubkey:r.senderPubkey;t.has(a)||t.set(a,[]),t.get(a).push(r)}for(const[,r]of t){if(r.length<=this.config.maxPerConversation)continue;r.sort((o,l)=>o.timestamp-l.timestamp);const a=r.slice(0,r.length-this.config.maxPerConversation);for(const o of a)this.messages.delete(o.id)}if(this.messages.size<=this.config.maxMessages)return;const e=Array.from(this.messages.entries()).sort(([,r],[,a])=>r.timestamp-a.timestamp),s=e.slice(0,e.length-this.config.maxMessages);for(const[r]of s)this.messages.delete(r)}async resolveRecipient(t){if(t.startsWith("@")){const e=t.slice(1),s=await this.deps.transport.resolveNametag?.(e);if(!s)throw new Error(`Nametag not found: ${t}`);return{pubkey:s,nametag:e}}return{pubkey:t}}ensureInitialized(){if(!this.deps)throw new Error("CommunicationsModule not initialized")}};function createCommunicationsModule(t){return new CommunicationsModule(t)}var GroupRole={ADMIN:"ADMIN",MODERATOR:"MODERATOR",MEMBER:"MEMBER"},GroupVisibility={PUBLIC:"PUBLIC",PRIVATE:"PRIVATE"};function createNip29Filter(t){return new Filter(t)}var GroupChatModule=class{config;deps=null;client=null;keyManager=null;connected=!1;connecting=!1;connectPromise=null;reconnectAttempts=0;reconnectTimer=null;subscriptionIds=[];groups=new Map;messages=new Map;members=new Map;processedEventIds=new Set;pendingLeaves=new Set;persistTimer=null;persistPromise=null;relayAdminPubkeys=null;relayAdminFetchPromise=null;messageHandlers=new Set;constructor(t){this.config={relays:t?.relays??[],defaultMessageLimit:t?.defaultMessageLimit??50,maxPreviousTags:t?.maxPreviousTags??3,reconnectDelayMs:t?.reconnectDelayMs??3e3,maxReconnectAttempts:t?.maxReconnectAttempts??5}}initialize(t){this.deps&&this.destroyConnection(),this.deps=t;const e=Buffer.from(t.identity.privateKey,"hex");this.keyManager=NostrKeyManager.fromPrivateKey(e)}async load(){this.ensureInitialized();const t=this.deps.storage,e=await t.get(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_GROUPS);if(e)try{const o=JSON.parse(e);this.groups.clear();for(const l of o)this.groups.set(l.id,l)}catch{}const s=await t.get(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_MESSAGES);if(s)try{const o=JSON.parse(s);this.messages.clear();for(const l of o){const c=l.groupId;this.messages.has(c)||this.messages.set(c,[]),this.messages.get(c).push(l)}}catch{}const r=await t.get(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_MEMBERS);if(r)try{const o=JSON.parse(r);this.members.clear();for(const l of o){const c=l.groupId;this.members.has(c)||this.members.set(c,[]),this.members.get(c).push(l)}}catch{}const a=await t.get(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_PROCESSED_EVENTS);if(a)try{const o=JSON.parse(a);this.processedEventIds=new Set(o)}catch{}}destroy(){this.destroyConnection(),this.groups.clear(),this.messages.clear(),this.members.clear(),this.processedEventIds.clear(),this.pendingLeaves.clear(),this.messageHandlers.clear(),this.relayAdminPubkeys=null,this.relayAdminFetchPromise=null,this.persistTimer&&(clearTimeout(this.persistTimer),this.persistTimer=null),this.deps=null}destroyConnection(){if(this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.client){for(const t of this.subscriptionIds)try{this.client.unsubscribe(t)}catch{}this.subscriptionIds=[];try{this.client.disconnect()}catch{}this.client=null}this.connected=!1,this.connecting=!1,this.connectPromise=null,this.reconnectAttempts=0,this.keyManager=null}async connect(){if(!this.connected)return this.connectPromise?this.connectPromise:(this.connecting=!0,this.connectPromise=this.doConnect().finally(()=>{this.connecting=!1,this.connectPromise=null}),this.connectPromise)}getConnectionStatus(){return this.connected}async doConnect(){if(this.ensureInitialized(),!this.keyManager){const e=Buffer.from(this.deps.identity.privateKey,"hex");this.keyManager=NostrKeyManager.fromPrivateKey(e)}const t=this.config.relays[0];t&&await this.checkAndClearOnRelayChange(t),this.client=new NostrClient(this.keyManager);try{await this.client.connect(...this.config.relays),this.connected=!0,this.reconnectAttempts=0,this.deps.emitEvent("groupchat:connection",{connected:!0}),this.groups.size===0?await this.restoreJoinedGroups():await this.subscribeToJoinedGroups()}catch(e){console.error("[GroupChat] Failed to connect to relays",e),this.deps.emitEvent("groupchat:connection",{connected:!1}),this.scheduleReconnect()}}scheduleReconnect(){if(this.reconnectAttempts>=this.config.maxReconnectAttempts){console.error("[GroupChat] Max reconnection attempts reached");return}this.reconnectAttempts++,this.reconnectTimer=setTimeout(()=>{this.reconnectTimer=null,this.deps&&this.connect().catch(console.error)},this.config.reconnectDelayMs)}async subscribeToJoinedGroups(){if(!this.client)return;const t=Array.from(this.groups.keys());t.length!==0&&(this.trackSubscription(createNip29Filter({kinds:[NIP29_KINDS.CHAT_MESSAGE,NIP29_KINDS.THREAD_ROOT,NIP29_KINDS.THREAD_REPLY],"#h":t}),{onEvent:e=>this.handleGroupEvent(e)}),this.trackSubscription(createNip29Filter({kinds:[NIP29_KINDS.GROUP_METADATA,NIP29_KINDS.GROUP_MEMBERS,NIP29_KINDS.GROUP_ADMINS],"#d":t}),{onEvent:e=>this.handleMetadataEvent(e)}),this.trackSubscription(createNip29Filter({kinds:[NIP29_KINDS.DELETE_EVENT,NIP29_KINDS.REMOVE_USER,NIP29_KINDS.DELETE_GROUP],"#h":t}),{onEvent:e=>this.handleModerationEvent(e)}))}subscribeToGroup(t){this.client&&(this.trackSubscription(createNip29Filter({kinds:[NIP29_KINDS.CHAT_MESSAGE,NIP29_KINDS.THREAD_ROOT,NIP29_KINDS.THREAD_REPLY],"#h":[t]}),{onEvent:e=>this.handleGroupEvent(e)}),this.trackSubscription(createNip29Filter({kinds:[NIP29_KINDS.DELETE_EVENT,NIP29_KINDS.REMOVE_USER,NIP29_KINDS.DELETE_GROUP],"#h":[t]}),{onEvent:e=>this.handleModerationEvent(e)}))}handleGroupEvent(t){if(this.processedEventIds.has(t.id))return;const e=this.getGroupIdFromEvent(t);if(!e)return;const s=this.groups.get(e);if(!s)return;const{text:r,senderNametag:a}=this.unwrapMessageContent(t.content),o={id:t.id,groupId:e,content:r,timestamp:t.created_at*1e3,senderPubkey:t.pubkey,senderNametag:a||void 0,replyToId:this.extractReplyTo(t),previousIds:this.extractPreviousIds(t)};this.saveMessageToMemory(o),this.addProcessedEventId(t.id),a&&this.updateMemberNametag(e,t.pubkey,a,t.created_at*1e3),this.updateGroupLastMessage(e,r.slice(0,100),o.timestamp);const l=this.getMyPublicKey();t.pubkey!==l&&(s.unreadCount=(s.unreadCount||0)+1),this.deps.emitEvent("groupchat:message",o),this.deps.emitEvent("groupchat:updated",{});for(const c of this.messageHandlers)try{c(o)}catch{}this.schedulePersist()}handleMetadataEvent(t){const e=this.getGroupIdFromMetadataEvent(t);if(!e)return;const s=this.groups.get(e);if(s)if(t.kind===NIP29_KINDS.GROUP_METADATA){if(!t.content||t.content.trim()==="")return;try{const r=JSON.parse(t.content);s.name=r.name||s.name,s.description=r.about||s.description,s.picture=r.picture||s.picture,s.updatedAt=t.created_at*1e3,this.groups.set(e,s),this.persistGroups()}catch{}}else t.kind===NIP29_KINDS.GROUP_MEMBERS?this.updateMembersFromEvent(e,t):t.kind===NIP29_KINDS.GROUP_ADMINS&&this.updateAdminsFromEvent(e,t)}handleModerationEvent(t){const e=this.getGroupIdFromEvent(t);if(!e)return;const s=this.groups.get(e);if(s){if(t.kind===NIP29_KINDS.DELETE_EVENT){const r=t.tags.filter(a=>a[0]==="e");for(const a of r){const o=a[1];o&&this.deleteMessageFromMemory(e,o)}this.deps.emitEvent("groupchat:updated",{}),this.persistMessages()}else if(t.kind===NIP29_KINDS.REMOVE_USER){if(this.processedEventIds.has(t.id))return;const r=t.created_at*1e3;if(s.localJoinedAt&&r<s.localJoinedAt){this.addProcessedEventId(t.id);return}this.addProcessedEventId(t.id);const a=t.tags.filter(l=>l[0]==="p"),o=this.getMyPublicKey();for(const l of a){const c=l[1];if(c)if(c===o)if(this.pendingLeaves.has(e))this.pendingLeaves.delete(e),this.deps.emitEvent("groupchat:updated",{});else{const u=s.name||e;this.removeGroupFromMemory(e),this.deps.emitEvent("groupchat:kicked",{groupId:e,groupName:u}),this.deps.emitEvent("groupchat:updated",{})}else this.removeMemberFromMemory(e,c)}this.schedulePersist()}else if(t.kind===NIP29_KINDS.DELETE_GROUP){if(this.processedEventIds.has(t.id))return;if(t.created_at*1e3<s.createdAt){this.addProcessedEventId(t.id);return}this.addProcessedEventId(t.id);const a=s.name||e;this.removeGroupFromMemory(e),this.deps.emitEvent("groupchat:group_deleted",{groupId:e,groupName:a}),this.deps.emitEvent("groupchat:updated",{}),this.schedulePersist()}}}updateMembersFromEvent(t,e){const s=e.tags.filter(a=>a[0]==="p"),r=this.members.get(t)||[];for(const a of s){const o=a[1],l=a[3],c=r.find(d=>d.pubkey===o),u=l||c?.role||GroupRole.MEMBER,f={pubkey:o,groupId:t,role:u,nametag:c?.nametag,joinedAt:c?.joinedAt||e.created_at*1e3};this.saveMemberToMemory(f)}this.persistMembers()}updateAdminsFromEvent(t,e){const s=e.tags.filter(a=>a[0]==="p"),r=this.members.get(t)||[];for(const a of s){const o=a[1],l=r.find(c=>c.pubkey===o);l?(l.role=GroupRole.ADMIN,this.saveMemberToMemory(l)):this.saveMemberToMemory({pubkey:o,groupId:t,role:GroupRole.ADMIN,joinedAt:e.created_at*1e3})}this.persistMembers()}async restoreJoinedGroups(){if(!this.client)return[];const t=this.getMyPublicKey();if(!t)return[];const e=new Set;if(await this.oneshotSubscription(new Filter({kinds:[NIP29_KINDS.GROUP_MEMBERS]}),{onEvent:r=>{const a=this.getGroupIdFromMetadataEvent(r);if(!a)return;r.tags.filter(l=>l[0]==="p").some(l=>l[1]===t)&&e.add(a)},onComplete:()=>{},timeoutMs:15e3}),e.size===0)return[];const s=[];for(const r of e)if(!this.groups.has(r))try{const a=await this.fetchGroupMetadataInternal(r);a&&(this.groups.set(r,a),s.push(a),await Promise.all([this.fetchAndSaveMembers(r),this.fetchMessages(r)]))}catch{}return s.length>0&&(await this.subscribeToJoinedGroups(),this.deps.emitEvent("groupchat:updated",{}),this.schedulePersist()),s}async fetchAvailableGroups(){if(await this.ensureConnected(),!this.client)return[];const t=new Map,e=new Map;await Promise.all([this.oneshotSubscription(new Filter({kinds:[NIP29_KINDS.GROUP_METADATA]}),{onEvent:s=>{const r=this.parseGroupMetadata(s);if(r&&r.visibility===GroupVisibility.PUBLIC){const a=t.get(r.id);(!a||r.createdAt>a.createdAt)&&t.set(r.id,r)}},onComplete:()=>{},timeoutMs:1e4}),this.oneshotSubscription(new Filter({kinds:[NIP29_KINDS.GROUP_MEMBERS]}),{onEvent:s=>{const r=this.getGroupIdFromMetadataEvent(s);if(r){const a=s.tags.filter(o=>o[0]==="p");e.set(r,a.length)}},onComplete:()=>{},timeoutMs:1e4})]);for(const[s,r]of e){const a=t.get(s);a&&(a.memberCount=r)}return Array.from(t.values())}async joinGroup(t,e){if(await this.ensureConnected(),!this.client)return!1;try{let s=await this.fetchGroupMetadataInternal(t);if(!s&&!e)return!1;const r=[["h",t]];return e&&r.push(["code",e]),await this.client.createAndPublishEvent({kind:NIP29_KINDS.JOIN_REQUEST,tags:r,content:""})?!s&&(s=await this.fetchGroupMetadataInternal(t),!s)?!1:(s.localJoinedAt=Date.now(),this.groups.set(t,s),this.subscribeToGroup(t),await Promise.all([this.fetchMessages(t),this.fetchAndSaveMembers(t)]),this.deps.emitEvent("groupchat:joined",{groupId:t,groupName:s.name}),this.deps.emitEvent("groupchat:updated",{}),this.persistAll(),!0):!1}catch(s){if((s instanceof Error?s.message:String(s)).includes("already a member")){const a=await this.fetchGroupMetadataInternal(t);if(a)return a.localJoinedAt=Date.now(),this.groups.set(t,a),this.subscribeToGroup(t),await Promise.all([this.fetchMessages(t),this.fetchAndSaveMembers(t)]),this.deps.emitEvent("groupchat:joined",{groupId:t,groupName:a.name}),this.deps.emitEvent("groupchat:updated",{}),this.persistAll(),!0}return console.error("[GroupChat] Failed to join group",s),!1}}async leaveGroup(t){if(await this.ensureConnected(),!this.client)return!1;try{return this.pendingLeaves.add(t),await this.client.createAndPublishEvent({kind:NIP29_KINDS.LEAVE_REQUEST,tags:[["h",t]],content:""})?(this.removeGroupFromMemory(t),this.deps.emitEvent("groupchat:left",{groupId:t}),this.deps.emitEvent("groupchat:updated",{}),this.persistAll(),!0):(this.pendingLeaves.delete(t),!1)}catch(e){const s=e instanceof Error?e.message:String(e);return s.includes("group not found")||s.includes("not a member")?(this.removeGroupFromMemory(t),this.persistAll(),!0):(console.error("[GroupChat] Failed to leave group",e),!1)}}async createGroup(t){if(await this.ensureConnected(),!this.client)return null;const e=this.getMyPublicKey();if(!e)return null;const s=t.name.toLowerCase().replace(/[^a-z0-9]/g,"").slice(0,20)||this.randomId();try{const r=t.visibility===GroupVisibility.PRIVATE;if(!await this.client.createAndPublishEvent({kind:NIP29_KINDS.CREATE_GROUP,tags:[["h",s]],content:JSON.stringify({name:t.name,about:t.description,picture:t.picture,closed:!0,private:r,hidden:r})}))return null;let o=await this.fetchGroupMetadataInternal(s);return o||(o={id:s,relayUrl:this.config.relays[0]||"",name:t.name,description:t.description,visibility:t.visibility||GroupVisibility.PUBLIC,createdAt:Date.now(),memberCount:1}),(!o.name||o.name==="Unnamed Group")&&(o.name=t.name),t.description&&!o.description&&(o.description=t.description),o.visibility=t.visibility||GroupVisibility.PUBLIC,o.memberCount=1,this.groups.set(o.id,o),this.subscribeToGroup(o.id),this.client.createAndPublishEvent({kind:NIP29_KINDS.JOIN_REQUEST,tags:[["h",o.id]],content:""}).catch(()=>{}),await this.fetchAndSaveMembers(o.id).catch(()=>{}),this.saveMemberToMemory({pubkey:e,groupId:o.id,role:GroupRole.ADMIN,joinedAt:Date.now()}),this.deps.emitEvent("groupchat:joined",{groupId:o.id,groupName:o.name}),this.deps.emitEvent("groupchat:updated",{}),this.schedulePersist(),o}catch(r){return console.error("[GroupChat] Failed to create group",r),null}}async deleteGroup(t){if(await this.ensureConnected(),!this.client)return!1;const e=this.groups.get(t);if(!e||!await this.canModerateGroup(t))return!1;try{if(await this.client.createAndPublishEvent({kind:NIP29_KINDS.DELETE_GROUP,tags:[["h",t]],content:""})){const a=e.name||t;return this.removeGroupFromMemory(t),this.deps.emitEvent("groupchat:group_deleted",{groupId:t,groupName:a}),this.deps.emitEvent("groupchat:updated",{}),this.persistAll(),!0}return!1}catch(r){return console.error("[GroupChat] Failed to delete group",r),!1}}async createInvite(t){if(await this.ensureConnected(),!this.client||!this.isCurrentUserAdmin(t))return null;try{const e=this.randomId();return await this.client.createAndPublishEvent({kind:NIP29_KINDS.CREATE_INVITE,tags:[["h",t],["code",e]],content:""})?e:null}catch(e){return console.error("[GroupChat] Failed to create invite",e),null}}async sendMessage(t,e,s){if(await this.ensureConnected(),!this.client||!this.groups.get(t))return null;try{const a=this.deps.identity.nametag||null,o=s?NIP29_KINDS.THREAD_REPLY:NIP29_KINDS.CHAT_MESSAGE,l=[["h",t]],u=(this.messages.get(t)||[]).slice(-this.config.maxPreviousTags).map(p=>(p.id||"").slice(0,8)).filter(Boolean);u.length>0&&l.push(["previous",...u]),s&&l.push(["e",s,"","reply"]);const f=this.wrapMessageContent(e,a),d=await this.client.createAndPublishEvent({kind:o,tags:l,content:f});if(d){const p=this.getMyPublicKey(),m={id:d,groupId:t,content:e,timestamp:Date.now(),senderPubkey:p||"",senderNametag:a||void 0,replyToId:s,previousIds:u};return this.saveMessageToMemory(m),this.addProcessedEventId(d),this.updateGroupLastMessage(t,e.slice(0,100),m.timestamp),this.persistAll(),m}return null}catch(a){return console.error("[GroupChat] Failed to send message",a),null}}async fetchMessages(t,e,s){if(await this.ensureConnected(),!this.client)return[];const r=[],a={kinds:[NIP29_KINDS.CHAT_MESSAGE,NIP29_KINDS.THREAD_ROOT,NIP29_KINDS.THREAD_REPLY],"#h":[t]};return e&&(a.since=Math.floor(e/1e3)),s&&(a.limit=s),!s&&!e&&(a.limit=this.config.defaultMessageLimit),this.oneshotSubscription(createNip29Filter(a),{onEvent:o=>{const{text:l,senderNametag:c}=this.unwrapMessageContent(o.content),u={id:o.id,groupId:t,content:l,timestamp:o.created_at*1e3,senderPubkey:o.pubkey,senderNametag:c||void 0,replyToId:this.extractReplyTo(o),previousIds:this.extractPreviousIds(o)};r.push(u),this.saveMessageToMemory(u),this.addProcessedEventId(o.id),c&&this.updateMemberNametag(t,o.pubkey,c,o.created_at*1e3)},onComplete:()=>(this.schedulePersist(),r),timeoutMs:1e4})}getGroups(){return Array.from(this.groups.values()).sort((t,e)=>(e.lastMessageTime||0)-(t.lastMessageTime||0))}getGroup(t){return this.groups.get(t)||null}getMessages(t){return(this.messages.get(t)||[]).sort((e,s)=>e.timestamp-s.timestamp)}getMembers(t){return(this.members.get(t)||[]).sort((e,s)=>e.joinedAt-s.joinedAt)}getMember(t,e){return(this.members.get(t)||[]).find(r=>r.pubkey===e)||null}getTotalUnreadCount(){let t=0;for(const e of this.groups.values())t+=e.unreadCount||0;return t}markGroupAsRead(t){const e=this.groups.get(t);e&&(e.unreadCount||0)>0&&(e.unreadCount=0,this.groups.set(t,e),this.persistGroups())}async kickUser(t,e,s){if(await this.ensureConnected(),!this.client||!await this.canModerateGroup(t)||this.getMyPublicKey()===e)return!1;try{return await this.client.createAndPublishEvent({kind:NIP29_KINDS.REMOVE_USER,tags:[["h",t],["p",e]],content:s||""})?(this.removeMemberFromMemory(t,e),this.deps.emitEvent("groupchat:updated",{}),this.persistMembers(),!0):!1}catch(o){return console.error("[GroupChat] Failed to kick user",o),!1}}async deleteMessage(t,e){if(await this.ensureConnected(),!this.client||!await this.canModerateGroup(t))return!1;try{return await this.client.createAndPublishEvent({kind:NIP29_KINDS.DELETE_EVENT,tags:[["h",t],["e",e]],content:""})?(this.deleteMessageFromMemory(t,e),this.deps.emitEvent("groupchat:updated",{}),this.persistMessages(),!0):!1}catch(r){return console.error("[GroupChat] Failed to delete message",r),!1}}isCurrentUserAdmin(t){const e=this.getMyPublicKey();return e?this.getMember(t,e)?.role===GroupRole.ADMIN:!1}isCurrentUserModerator(t){const e=this.getMyPublicKey();if(!e)return!1;const s=this.getMember(t,e);return s?.role===GroupRole.ADMIN||s?.role===GroupRole.MODERATOR}async canModerateGroup(t){if(this.isCurrentUserAdmin(t)||this.isCurrentUserModerator(t))return!0;const e=this.groups.get(t);return e&&e.visibility===GroupVisibility.PUBLIC?this.isCurrentUserRelayAdmin():!1}async isCurrentUserRelayAdmin(){const t=this.getMyPublicKey();return t?(await this.fetchRelayAdmins()).has(t):!1}getCurrentUserRole(t){const e=this.getMyPublicKey();return e&&this.getMember(t,e)?.role||null}onMessage(t){return this.messageHandlers.add(t),()=>this.messageHandlers.delete(t)}getRelayUrls(){return this.config.relays}getMyPublicKey(){return this.keyManager?.getPublicKeyHex()||null}async fetchRelayAdmins(){if(this.relayAdminPubkeys)return this.relayAdminPubkeys;if(this.relayAdminFetchPromise)return this.relayAdminFetchPromise;this.relayAdminFetchPromise=this.doFetchRelayAdmins();const t=await this.relayAdminFetchPromise;return this.relayAdminFetchPromise=null,t}async doFetchRelayAdmins(){if(await this.ensureConnected(),!this.client)return new Set;const t=new Set;return this.oneshotSubscription(new Filter({kinds:[NIP29_KINDS.GROUP_ADMINS],"#d":["","_"]}),{onEvent:e=>{const s=e.tags.filter(r=>r[0]==="p");for(const r of s)r[1]&&t.add(r[1])},onComplete:()=>(this.relayAdminPubkeys=t,t)})}async fetchGroupMetadataInternal(t){if(!this.client)return null;let e=null;return this.oneshotSubscription(new Filter({kinds:[NIP29_KINDS.GROUP_METADATA],"#d":[t]}),{onEvent:s=>{e||(e=this.parseGroupMetadata(s))},onComplete:()=>e})}async fetchAndSaveMembers(t){const[e,s]=await Promise.all([this.fetchGroupMembersInternal(t),this.fetchGroupAdminsInternal(t)]);for(const r of e)s.includes(r.pubkey)&&(r.role=GroupRole.ADMIN),this.saveMemberToMemory(r);for(const r of s)(this.members.get(t)||[]).find(o=>o.pubkey===r)||this.saveMemberToMemory({pubkey:r,groupId:t,role:GroupRole.ADMIN,joinedAt:Date.now()});this.persistMembers()}async fetchGroupMembersInternal(t){if(!this.client)return[];const e=[];return this.oneshotSubscription(new Filter({kinds:[NIP29_KINDS.GROUP_MEMBERS],"#d":[t]}),{onEvent:s=>{const r=s.tags.filter(a=>a[0]==="p");for(const a of r)e.push({pubkey:a[1],groupId:t,role:a[3]||GroupRole.MEMBER,joinedAt:s.created_at*1e3})},onComplete:()=>e})}async fetchGroupAdminsInternal(t){if(!this.client)return[];const e=[];return this.oneshotSubscription(new Filter({kinds:[NIP29_KINDS.GROUP_ADMINS],"#d":[t]}),{onEvent:s=>{const r=s.tags.filter(a=>a[0]==="p");for(const a of r)a[1]&&!e.includes(a[1])&&e.push(a[1])},onComplete:()=>e})}saveMessageToMemory(t){const e=t.groupId;this.messages.has(e)||this.messages.set(e,[]);const s=this.messages.get(e),r=s.findIndex(a=>a.id===t.id);if(r>=0)s[r]=t;else{s.push(t);const a=this.config.defaultMessageLimit*2;s.length>a&&s.splice(0,s.length-a)}}deleteMessageFromMemory(t,e){const s=this.messages.get(t);if(s){const r=s.findIndex(a=>a.id===e);r>=0&&s.splice(r,1)}}saveMemberToMemory(t){const e=t.groupId;this.members.has(e)||this.members.set(e,[]);const s=this.members.get(e),r=s.findIndex(a=>a.pubkey===t.pubkey);r>=0?s[r]=t:s.push(t)}removeMemberFromMemory(t,e){const s=this.members.get(t);if(s){const a=s.findIndex(o=>o.pubkey===e);a>=0&&s.splice(a,1)}const r=this.groups.get(t);r&&(r.memberCount=(this.members.get(t)||[]).length,this.groups.set(t,r))}removeGroupFromMemory(t){this.groups.delete(t),this.messages.delete(t),this.members.delete(t)}updateGroupLastMessage(t,e,s){const r=this.groups.get(t);r&&s>=(r.lastMessageTime||0)&&(r.lastMessageText=e,r.lastMessageTime=s,this.groups.set(t,r))}updateMemberNametag(t,e,s,r){const o=(this.members.get(t)||[]).find(l=>l.pubkey===e);o?o.nametag!==s&&(o.nametag=s,this.saveMemberToMemory(o)):this.saveMemberToMemory({pubkey:e,groupId:t,role:GroupRole.MEMBER,nametag:s,joinedAt:r})}addProcessedEventId(t){if(this.processedEventIds.add(t),this.processedEventIds.size>1e4){const e=Array.from(this.processedEventIds);this.processedEventIds=new Set(e.slice(e.length-1e4))}}schedulePersist(){this.persistTimer||(this.persistTimer=setTimeout(()=>{this.persistTimer=null,this.persistPromise=this.doPersistAll().catch(t=>{console.error("[GroupChat] Persistence error:",t)}).finally(()=>{this.persistPromise=null})},200))}async persistAll(){this.persistTimer&&(clearTimeout(this.persistTimer),this.persistTimer=null),this.persistPromise&&await this.persistPromise,await this.doPersistAll()}async doPersistAll(){await Promise.all([this.persistGroups(),this.persistMessages(),this.persistMembers(),this.persistProcessedEvents()])}async persistGroups(){if(!this.deps)return;const t=Array.from(this.groups.values());await this.deps.storage.set(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_GROUPS,JSON.stringify(t))}async persistMessages(){if(!this.deps)return;const t=[];for(const e of this.messages.values())t.push(...e);await this.deps.storage.set(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_MESSAGES,JSON.stringify(t))}async persistMembers(){if(!this.deps)return;const t=[];for(const e of this.members.values())t.push(...e);await this.deps.storage.set(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_MEMBERS,JSON.stringify(t))}async persistProcessedEvents(){if(!this.deps)return;const t=Array.from(this.processedEventIds);await this.deps.storage.set(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_PROCESSED_EVENTS,JSON.stringify(t))}async checkAndClearOnRelayChange(t){if(!this.deps)return;const e=await this.deps.storage.get(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_RELAY_URL);if(e&&e!==t&&(this.groups.clear(),this.messages.clear(),this.members.clear(),this.processedEventIds.clear(),await this.persistAll()),!e){for(const s of this.groups.values())if(s.relayUrl&&s.relayUrl!==t){this.groups.clear(),this.messages.clear(),this.members.clear(),this.processedEventIds.clear(),await this.persistAll();break}}await this.deps.storage.set(STORAGE_KEYS_GLOBAL$1.GROUP_CHAT_RELAY_URL,t)}wrapMessageContent(t,e){return e?JSON.stringify({senderNametag:e,text:t}):t}unwrapMessageContent(t){try{const e=JSON.parse(t);if(typeof e=="object"&&e.text!==void 0)return{text:e.text,senderNametag:e.senderNametag||null}}catch{}return{text:t,senderNametag:null}}getGroupIdFromEvent(t){const e=t.tags.find(s=>s[0]==="h");return e?e[1]:null}getGroupIdFromMetadataEvent(t){const e=t.tags.find(r=>r[0]==="d");return e?.[1]?e[1]:t.tags.find(r=>r[0]==="h")?.[1]??null}extractReplyTo(t){const e=t.tags.find(s=>s[0]==="e"&&s[3]==="reply");return e?e[1]:void 0}extractPreviousIds(t){const e=t.tags.find(s=>s[0]==="previous");return e?e.slice(1):void 0}parseGroupMetadata(t){try{const e=this.getGroupIdFromMetadataEvent(t);if(!e)return null;let s="Unnamed Group",r,a,o=!1;if(t.content&&t.content.trim())try{const l=JSON.parse(t.content);s=l.name||s,r=l.about||l.description,a=l.picture,o=l.private===!0}catch{}for(const l of t.tags)l[0]==="name"&&l[1]&&(s=l[1]),l[0]==="about"&&l[1]&&(r=l[1]),l[0]==="picture"&&l[1]&&(a=l[1]),l[0]==="private"&&(o=!0),l[0]==="public"&&l[1]==="false"&&(o=!0);return{id:e,relayUrl:this.config.relays[0]||"",name:s,description:r,picture:a,visibility:o?GroupVisibility.PRIVATE:GroupVisibility.PUBLIC,createdAt:t.created_at*1e3}}catch{return null}}trackSubscription(t,e){const s=this.client.subscribe(t,{onEvent:e.onEvent,onEndOfStoredEvents:e.onEndOfStoredEvents??(()=>{})});return this.subscriptionIds.push(s),s}oneshotSubscription(t,e){return new Promise(s=>{let r=!1;const a={},o=()=>{if(!r){if(r=!0,a.subId){try{this.client.unsubscribe(a.subId)}catch{}const c=this.subscriptionIds.indexOf(a.subId);c>=0&&this.subscriptionIds.splice(c,1)}s(e.onComplete())}},l=this.client.subscribe(t,{onEvent:c=>{r||e.onEvent(c)},onEndOfStoredEvents:o});a.subId=l,this.subscriptionIds.push(l),setTimeout(o,e.timeoutMs??5e3)})}ensureInitialized(){if(!this.deps)throw new Error("GroupChatModule not initialized")}async ensureConnected(){this.connected||await this.connect()}randomId(){const t=new Uint8Array(8);if(typeof globalThis.crypto<"u"&&globalThis.crypto.getRandomValues)globalThis.crypto.getRandomValues(t);else for(let e=0;e<t.length;e++)t[e]=Math.floor(Math.random()*256);return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}};function createGroupChatModule(t){return new GroupChatModule(t)}function isBytes$1(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function anumber$1(t,e=""){if(!Number.isSafeInteger(t)||t<0){const s=e&&`"${e}" `;throw new Error(`${s}expected integer >= 0, got ${t}`)}}function abytes$1(t,e,s=""){const r=isBytes$1(t),a=t?.length,o=e!==void 0;if(!r||o&&a!==e){const l=s&&`"${s}" `,c=o?` of length ${e}`:"",u=r?`length=${a}`:`type=${typeof t}`;throw new Error(l+"expected Uint8Array"+c+", got "+u)}return t}function ahash$1(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");anumber$1(t.outputLen),anumber$1(t.blockLen)}function aexists$1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aoutput$1(t,e){abytes$1(t,void 0,"digestInto() output");const s=e.outputLen;if(t.length<s)throw new Error('"digestInto() output" expected to be of length >='+s)}function clean$1(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function createView$1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rotr$1(t,e){return t<<32-e|t>>>e}var hasHexBuiltin$1=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes$1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex4(t){if(abytes$1(t),hasHexBuiltin$1)return t.toHex();let e="";for(let s=0;s<t.length;s++)e+=hexes$1[t[s]];return e}var asciis$1={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16$1(t){if(t>=asciis$1._0&&t<=asciis$1._9)return t-asciis$1._0;if(t>=asciis$1.A&&t<=asciis$1.F)return t-(asciis$1.A-10);if(t>=asciis$1.a&&t<=asciis$1.f)return t-(asciis$1.a-10)}function hexToBytes2$1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hasHexBuiltin$1)return Uint8Array.fromHex(t);const e=t.length,s=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(s);for(let a=0,o=0;a<s;a++,o+=2){const l=asciiToBase16$1(t.charCodeAt(o)),c=asciiToBase16$1(t.charCodeAt(o+1));if(l===void 0||c===void 0){const u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}r[a]=l*16+c}return r}function concatBytes(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];abytes$1(a),e+=a.length}const s=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const o=t[r];s.set(o,a),a+=o.length}return s}function createHasher$1(t,e={}){const s=(a,o)=>t(o).update(a).digest(),r=t(void 0);return s.outputLen=r.outputLen,s.blockLen=r.blockLen,s.create=a=>t(a),Object.assign(s,e),Object.freeze(s)}function randomBytes2(t=32){const e=typeof globalThis=="object"?globalThis.crypto:null;if(typeof e?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return e.getRandomValues(new Uint8Array(t))}var oidNist$1=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])});function Chi$1(t,e,s){return t&e^~t&s}function Maj$1(t,e,s){return t&e^t&s^e&s}var HashMD$1=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(e,s,r,a){this.blockLen=e,this.outputLen=s,this.padOffset=r,this.isLE=a,this.buffer=new Uint8Array(e),this.view=createView$1(this.buffer)}update(e){aexists$1(this),abytes$1(e);const{view:s,buffer:r,blockLen:a}=this,o=e.length;for(let l=0;l<o;){const c=Math.min(a-this.pos,o-l);if(c===a){const u=createView$1(e);for(;a<=o-l;l+=a)this.process(u,l);continue}r.set(e.subarray(l,l+c),this.pos),this.pos+=c,l+=c,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists$1(this),aoutput$1(e,this),this.finished=!0;const{buffer:s,view:r,blockLen:a,isLE:o}=this;let{pos:l}=this;s[l++]=128,clean$1(this.buffer.subarray(l)),this.padOffset>a-l&&(this.process(r,0),l=0);for(let p=l;p<a;p++)s[p]=0;r.setBigUint64(a-8,BigInt(this.length*8),o),this.process(r,0);const c=createView$1(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const f=u/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<f;p++)c.setUint32(4*p,d[p],o)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const r=e.slice(0,s);return this.destroy(),r}_cloneInto(e){e||=new this.constructor,e.set(...this.get());const{blockLen:s,buffer:r,length:a,finished:o,destroyed:l,pos:c}=this;return e.destroyed=l,e.finished=o,e.length=a,e.pos=c,a%s&&e.buffer.set(r),e}clone(){return this._cloneInto()}},SHA256_IV$1=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_K$1=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W$1=new Uint32Array(64),SHA2_32B$1=class extends HashMD$1{constructor(e){super(64,e,8,!1)}get(){const{A:e,B:s,C:r,D:a,E:o,F:l,G:c,H:u}=this;return[e,s,r,a,o,l,c,u]}set(e,s,r,a,o,l,c,u){this.A=e|0,this.B=s|0,this.C=r|0,this.D=a|0,this.E=o|0,this.F=l|0,this.G=c|0,this.H=u|0}process(e,s){for(let p=0;p<16;p++,s+=4)SHA256_W$1[p]=e.getUint32(s,!1);for(let p=16;p<64;p++){const m=SHA256_W$1[p-15],y=SHA256_W$1[p-2],b=rotr$1(m,7)^rotr$1(m,18)^m>>>3,E=rotr$1(y,17)^rotr$1(y,19)^y>>>10;SHA256_W$1[p]=E+SHA256_W$1[p-7]+b+SHA256_W$1[p-16]|0}let{A:r,B:a,C:o,D:l,E:c,F:u,G:f,H:d}=this;for(let p=0;p<64;p++){const m=rotr$1(c,6)^rotr$1(c,11)^rotr$1(c,25),y=d+m+Chi$1(c,u,f)+SHA256_K$1[p]+SHA256_W$1[p]|0,E=(rotr$1(r,2)^rotr$1(r,13)^rotr$1(r,22))+Maj$1(r,a,o)|0;d=f,f=u,u=c,c=l+y|0,l=o,o=a,a=r,r=y+E|0}r=r+this.A|0,a=a+this.B|0,o=o+this.C|0,l=l+this.D|0,c=c+this.E|0,u=u+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(r,a,o,l,c,u,f,d)}roundClean(){clean$1(SHA256_W$1)}destroy(){this.set(0,0,0,0,0,0,0,0),clean$1(this.buffer)}},_SHA256$1=class extends SHA2_32B$1{A=SHA256_IV$1[0]|0;B=SHA256_IV$1[1]|0;C=SHA256_IV$1[2]|0;D=SHA256_IV$1[3]|0;E=SHA256_IV$1[4]|0;F=SHA256_IV$1[5]|0;G=SHA256_IV$1[6]|0;H=SHA256_IV$1[7]|0;constructor(){super(32)}},sha2564=createHasher$1(()=>new _SHA256$1,oidNist$1(1)),_0n=BigInt(0),_1n=BigInt(1);function abool(t,e=""){if(typeof t!="boolean"){const s=e&&`"${e}" `;throw new Error(s+"expected boolean, got type="+typeof t)}return t}function abignumber(t){if(typeof t=="bigint"){if(!isPosBig(t))throw new Error("positive bigint expected, got "+t)}else anumber$1(t);return t}function numberToHexUnpadded(t){const e=abignumber(t).toString(16);return e.length&1?"0"+e:e}function hexToNumber(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_0n:BigInt("0x"+t)}function bytesToNumberBE(t){return hexToNumber(bytesToHex4(t))}function bytesToNumberLE(t){return hexToNumber(bytesToHex4(copyBytes(abytes$1(t)).reverse()))}function numberToBytesBE(t,e){anumber$1(e),t=abignumber(t);const s=hexToBytes2$1(t.toString(16).padStart(e*2,"0"));if(s.length!==e)throw new Error("number too large");return s}function numberToBytesLE(t,e){return numberToBytesBE(t,e).reverse()}function copyBytes(t){return Uint8Array.from(t)}var isPosBig=t=>typeof t=="bigint"&&_0n<=t;function inRange(t,e,s){return isPosBig(t)&&isPosBig(e)&&isPosBig(s)&&e<=t&&t<s}function aInRange(t,e,s,r){if(!inRange(e,s,r))throw new Error("expected valid "+t+": "+s+" <= n < "+r+", got "+e)}function bitLen(t){let e;for(e=0;t>_0n;t>>=_1n,e+=1);return e}var bitMask=t=>(_1n<<BigInt(t))-_1n;function createHmacDrbg(t,e,s){if(anumber$1(t,"hashLen"),anumber$1(e,"qByteLen"),typeof s!="function")throw new Error("hmacFn must be a function");const r=C=>new Uint8Array(C),a=Uint8Array.of(),o=Uint8Array.of(0),l=Uint8Array.of(1),c=1e3;let u=r(t),f=r(t),d=0;const p=()=>{u.fill(1),f.fill(0),d=0},m=(...C)=>s(f,concatBytes(u,...C)),y=(C=a)=>{f=m(o,C),u=m(),C.length!==0&&(f=m(l,C),u=m())},b=()=>{if(d++>=c)throw new Error("drbg: tried max amount of iterations");let C=0;const j=[];for(;C<e;){u=m();const B=u.slice();j.push(B),C+=u.length}return concatBytes(...j)};return(C,j)=>{p(),y(C);let B;for(;!(B=j(b()));)y();return p(),B}}function validateObject(t,e={},s={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(o,l,c){const u=t[o];if(c&&u===void 0)return;const f=typeof u;if(f!==l||u===null)throw new Error(`param "${o}" is invalid: expected ${l}, got ${f}`)}const a=(o,l)=>Object.entries(o).forEach(([c,u])=>r(c,u,l));a(e,!1),a(s,!0)}function memoized(t){const e=new WeakMap;return(s,...r)=>{const a=e.get(s);if(a!==void 0)return a;const o=t(s,...r);return e.set(s,o),o}}var _0n2=BigInt(0),_1n2=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_4n=BigInt(4),_5n=BigInt(5),_7n=BigInt(7),_8n=BigInt(8),_9n=BigInt(9),_16n=BigInt(16);function mod(t,e){const s=t%e;return s>=_0n2?s:e+s}function pow2(t,e,s){let r=t;for(;e-- >_0n2;)r*=r,r%=s;return r}function invert(t,e){if(t===_0n2)throw new Error("invert: expected non-zero number");if(e<=_0n2)throw new Error("invert: expected positive modulus, got "+e);let s=mod(t,e),r=e,a=_0n2,o=_1n2;for(;s!==_0n2;){const c=r/s,u=r%s,f=a-o*c;r=s,s=u,a=o,o=f}if(r!==_1n2)throw new Error("invert: does not exist");return mod(a,e)}function assertIsSquare(t,e,s){if(!t.eql(t.sqr(e),s))throw new Error("Cannot find square root")}function sqrt3mod4(t,e){const s=(t.ORDER+_1n2)/_4n,r=t.pow(e,s);return assertIsSquare(t,r,e),r}function sqrt5mod8(t,e){const s=(t.ORDER-_5n)/_8n,r=t.mul(e,_2n),a=t.pow(r,s),o=t.mul(e,a),l=t.mul(t.mul(o,_2n),a),c=t.mul(o,t.sub(l,t.ONE));return assertIsSquare(t,c,e),c}function sqrt9mod16(t){const e=Field(t),s=tonelliShanks(t),r=s(e,e.neg(e.ONE)),a=s(e,r),o=s(e,e.neg(r)),l=(t+_7n)/_16n;return(c,u)=>{let f=c.pow(u,l),d=c.mul(f,r);const p=c.mul(f,a),m=c.mul(f,o),y=c.eql(c.sqr(d),u),b=c.eql(c.sqr(p),u);f=c.cmov(f,d,y),d=c.cmov(m,p,b);const E=c.eql(c.sqr(d),u),C=c.cmov(f,d,E);return assertIsSquare(c,C,u),C}}function tonelliShanks(t){if(t<_3n)throw new Error("sqrt is not defined for small field");let e=t-_1n2,s=0;for(;e%_2n===_0n2;)e/=_2n,s++;let r=_2n;const a=Field(t);for(;FpLegendre(a,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(s===1)return sqrt3mod4;let o=a.pow(r,e);const l=(e+_1n2)/_2n;return function(u,f){if(u.is0(f))return f;if(FpLegendre(u,f)!==1)throw new Error("Cannot find square root");let d=s,p=u.mul(u.ONE,o),m=u.pow(f,e),y=u.pow(f,l);for(;!u.eql(m,u.ONE);){if(u.is0(m))return u.ZERO;let b=1,E=u.sqr(m);for(;!u.eql(E,u.ONE);)if(b++,E=u.sqr(E),b===d)throw new Error("Cannot find square root");const C=_1n2<<BigInt(d-b-1),j=u.pow(p,C);d=b,p=u.sqr(j),m=u.mul(m,p),y=u.mul(y,j)}return y}}function FpSqrt(t){return t%_4n===_3n?sqrt3mod4:t%_8n===_5n?sqrt5mod8:t%_16n===_9n?sqrt9mod16(t):tonelliShanks(t)}var FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(t){const e={ORDER:"bigint",BYTES:"number",BITS:"number"},s=FIELD_FIELDS.reduce((r,a)=>(r[a]="function",r),e);return validateObject(t,s),t}function FpPow(t,e,s){if(s<_0n2)throw new Error("invalid exponent, negatives unsupported");if(s===_0n2)return t.ONE;if(s===_1n2)return e;let r=t.ONE,a=e;for(;s>_0n2;)s&_1n2&&(r=t.mul(r,a)),a=t.sqr(a),s>>=_1n2;return r}function FpInvertBatch(t,e,s=!1){const r=new Array(e.length).fill(s?t.ZERO:void 0),a=e.reduce((l,c,u)=>t.is0(c)?l:(r[u]=l,t.mul(l,c)),t.ONE),o=t.inv(a);return e.reduceRight((l,c,u)=>t.is0(c)?l:(r[u]=t.mul(l,r[u]),t.mul(l,c)),o),r}function FpLegendre(t,e){const s=(t.ORDER-_1n2)/_2n,r=t.pow(e,s),a=t.eql(r,t.ONE),o=t.eql(r,t.ZERO),l=t.eql(r,t.neg(t.ONE));if(!a&&!o&&!l)throw new Error("invalid Legendre symbol result");return a?1:o?0:-1}function nLength(t,e){e!==void 0&&anumber$1(e);const s=e!==void 0?e:t.toString(2).length,r=Math.ceil(s/8);return{nBitLength:s,nByteLength:r}}var _Field=class{ORDER;BITS;BYTES;isLE;ZERO=_0n2;ONE=_1n2;_lengths;_sqrt;_mod;constructor(t,e={}){if(t<=_0n2)throw new Error("invalid field: expected ORDER > 0, got "+t);let s;this.isLE=!1,e!=null&&typeof e=="object"&&(typeof e.BITS=="number"&&(s=e.BITS),typeof e.sqrt=="function"&&(this.sqrt=e.sqrt),typeof e.isLE=="boolean"&&(this.isLE=e.isLE),e.allowedLengths&&(this._lengths=e.allowedLengths?.slice()),typeof e.modFromBytes=="boolean"&&(this._mod=e.modFromBytes));const{nBitLength:r,nByteLength:a}=nLength(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=t,this.BITS=r,this.BYTES=a,this._sqrt=void 0,Object.preventExtensions(this)}create(t){return mod(t,this.ORDER)}isValid(t){if(typeof t!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof t);return _0n2<=t&&t<this.ORDER}is0(t){return t===_0n2}isValidNot0(t){return!this.is0(t)&&this.isValid(t)}isOdd(t){return(t&_1n2)===_1n2}neg(t){return mod(-t,this.ORDER)}eql(t,e){return t===e}sqr(t){return mod(t*t,this.ORDER)}add(t,e){return mod(t+e,this.ORDER)}sub(t,e){return mod(t-e,this.ORDER)}mul(t,e){return mod(t*e,this.ORDER)}pow(t,e){return FpPow(this,t,e)}div(t,e){return mod(t*invert(e,this.ORDER),this.ORDER)}sqrN(t){return t*t}addN(t,e){return t+e}subN(t,e){return t-e}mulN(t,e){return t*e}inv(t){return invert(t,this.ORDER)}sqrt(t){return this._sqrt||(this._sqrt=FpSqrt(this.ORDER)),this._sqrt(this,t)}toBytes(t){return this.isLE?numberToBytesLE(t,this.BYTES):numberToBytesBE(t,this.BYTES)}fromBytes(t,e=!1){abytes$1(t);const{_lengths:s,BYTES:r,isLE:a,ORDER:o,_mod:l}=this;if(s){if(!s.includes(t.length)||t.length>r)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+t.length);const u=new Uint8Array(r);u.set(t,a?0:u.length-t.length),t=u}if(t.length!==r)throw new Error("Field.fromBytes: expected "+r+" bytes, got "+t.length);let c=a?bytesToNumberLE(t):bytesToNumberBE(t);if(l&&(c=mod(c,o)),!e&&!this.isValid(c))throw new Error("invalid field element: outside of range 0..ORDER");return c}invertBatch(t){return FpInvertBatch(this,t)}cmov(t,e,s){return s?e:t}};function Field(t,e={}){return new _Field(t,e)}function getFieldBytesLength(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(t){const e=getFieldBytesLength(t);return e+Math.ceil(e/2)}function mapHashToField(t,e,s=!1){abytes$1(t);const r=t.length,a=getFieldBytesLength(e),o=getMinHashLength(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const l=s?bytesToNumberLE(t):bytesToNumberBE(t),c=mod(l,e-_1n2)+_1n2;return s?numberToBytesLE(c,a):numberToBytesBE(c,a)}var _0n3=BigInt(0),_1n3=BigInt(1);function negateCt(t,e){const s=e.negate();return t?s:e}function normalizeZ(t,e){const s=FpInvertBatch(t.Fp,e.map(r=>r.Z));return e.map((r,a)=>t.fromAffine(r.toAffine(s[a])))}function validateW(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function calcWOpts(t,e){validateW(t,e);const s=Math.ceil(e/t)+1,r=2**(t-1),a=2**t,o=bitMask(t),l=BigInt(t);return{windows:s,windowSize:r,mask:o,maxNumber:a,shiftBy:l}}function calcOffsets(t,e,s){const{windowSize:r,mask:a,maxNumber:o,shiftBy:l}=s;let c=Number(t&a),u=t>>l;c>r&&(c-=o,u+=_1n3);const f=e*r,d=f+Math.abs(c)-1,p=c===0,m=c<0,y=e%2!==0;return{nextN:u,offset:d,isZero:p,isNeg:m,isNegF:y,offsetF:f}}var pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(t){return pointWindowSizes.get(t)||1}function assert0(t){if(t!==_0n3)throw new Error("invalid wNAF")}var wNAF=class{BASE;ZERO;Fn;bits;constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,s=this.ZERO){let r=t;for(;e>_0n3;)e&_1n3&&(s=s.add(r)),r=r.double(),e>>=_1n3;return s}precomputeWindow(t,e){const{windows:s,windowSize:r}=calcWOpts(e,this.bits),a=[];let o=t,l=o;for(let c=0;c<s;c++){l=o,a.push(l);for(let u=1;u<r;u++)l=l.add(o),a.push(l);o=l.double()}return a}wNAF(t,e,s){if(!this.Fn.isValid(s))throw new Error("invalid scalar");let r=this.ZERO,a=this.BASE;const o=calcWOpts(t,this.bits);for(let l=0;l<o.windows;l++){const{nextN:c,offset:u,isZero:f,isNeg:d,isNegF:p,offsetF:m}=calcOffsets(s,l,o);s=c,f?a=a.add(negateCt(p,e[m])):r=r.add(negateCt(d,e[u]))}return assert0(s),{p:r,f:a}}wNAFUnsafe(t,e,s,r=this.ZERO){const a=calcWOpts(t,this.bits);for(let o=0;o<a.windows&&s!==_0n3;o++){const{nextN:l,offset:c,isZero:u,isNeg:f}=calcOffsets(s,o,a);if(s=l,!u){const d=e[c];r=r.add(f?d.negate():d)}}return assert0(s),r}getPrecomputes(t,e,s){let r=pointPrecomputes.get(e);return r||(r=this.precomputeWindow(e,t),t!==1&&(typeof s=="function"&&(r=s(r)),pointPrecomputes.set(e,r))),r}cached(t,e,s){const r=getW(t);return this.wNAF(r,this.getPrecomputes(r,t,s),e)}unsafe(t,e,s,r){const a=getW(t);return a===1?this._unsafeLadder(t,e,r):this.wNAFUnsafe(a,this.getPrecomputes(a,t,s),e,r)}createCache(t,e){validateW(e,this.bits),pointWindowSizes.set(t,e),pointPrecomputes.delete(t)}hasCache(t){return getW(t)!==1}};function mulEndoUnsafe(t,e,s,r){let a=e,o=t.ZERO,l=t.ZERO;for(;s>_0n3||r>_0n3;)s&_1n3&&(o=o.add(a)),r&_1n3&&(l=l.add(a)),a=a.double(),s>>=_1n3,r>>=_1n3;return{p1:o,p2:l}}function createField(t,e,s){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return validateField(e),e}else return Field(t,{isLE:s})}function createCurveFields(t,e,s={},r){if(r===void 0&&(r=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const u of["p","n","h"]){const f=e[u];if(!(typeof f=="bigint"&&f>_0n3))throw new Error(`CURVE.${u} must be positive bigint`)}const a=createField(e.p,s.Fp,r),o=createField(e.n,s.Fn,r),c=["Gx","Gy","a","b"];for(const u of c)if(!a.isValid(e[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:a,Fn:o}}function createKeygen(t,e){return function(r){const a=t(r);return{secretKey:a,publicKey:e(a)}}}var _HMAC$1=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(e,s){if(ahash$1(e),abytes$1(s,void 0,"key"),this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,a=new Uint8Array(r);a.set(s.length>r?e.create().update(s).digest():s);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=e.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),clean$1(a)}update(e){return aexists$1(this),this.iHash.update(e),this}digestInto(e){aexists$1(this),abytes$1(e,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||=Object.create(Object.getPrototypeOf(this),{});const{oHash:s,iHash:r,finished:a,destroyed:o,blockLen:l,outputLen:c}=this;return e=e,e.finished=a,e.destroyed=o,e.blockLen=l,e.outputLen=c,e.oHash=s._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},hmac$1=(t,e,s)=>new _HMAC$1(t,e).update(s).digest();hmac$1.create=(t,e)=>new _HMAC$1(t,e);var divNearest=(t,e)=>(t+(t>=0?e:-e)/_2n2)/e;function _splitEndoScalar(t,e,s){const[[r,a],[o,l]]=e,c=divNearest(l*t,s),u=divNearest(-a*t,s);let f=t-c*r-u*o,d=-c*a-u*l;const p=f<_0n4,m=d<_0n4;p&&(f=-f),m&&(d=-d);const y=bitMask(Math.ceil(bitLen(s)/2))+_1n4;if(f<_0n4||f>=y||d<_0n4||d>=y)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:p,k1:f,k2neg:m,k2:d}}function validateSigFormat(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function validateSigOpts(t,e){const s={};for(let r of Object.keys(e))s[r]=t[r]===void 0?e[r]:t[r];return abool(s.lowS,"lowS"),abool(s.prehash,"prehash"),s.format!==void 0&&validateSigFormat(s.format),s}var DERErr=class extends Error{constructor(t=""){super(t)}},DER={Err:DERErr,_tlv:{encode:(t,e)=>{const{Err:s}=DER;if(t<0||t>256)throw new s("tlv.encode: wrong tag");if(e.length&1)throw new s("tlv.encode: unpadded data");const r=e.length/2,a=numberToHexUnpadded(r);if(a.length/2&128)throw new s("tlv.encode: long form length too big");const o=r>127?numberToHexUnpadded(a.length/2|128):"";return numberToHexUnpadded(t)+o+a+e},decode(t,e){const{Err:s}=DER;let r=0;if(t<0||t>256)throw new s("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new s("tlv.decode: wrong tlv");const a=e[r++],o=!!(a&128);let l=0;if(!o)l=a;else{const u=a&127;if(!u)throw new s("tlv.decode(long): indefinite length not supported");if(u>4)throw new s("tlv.decode(long): byte length is too big");const f=e.subarray(r,r+u);if(f.length!==u)throw new s("tlv.decode: length bytes not complete");if(f[0]===0)throw new s("tlv.decode(long): zero leftmost byte");for(const d of f)l=l<<8|d;if(r+=u,l<128)throw new s("tlv.decode(long): not minimal encoding")}const c=e.subarray(r,r+l);if(c.length!==l)throw new s("tlv.decode: wrong value length");return{v:c,l:e.subarray(r+l)}}},_int:{encode(t){const{Err:e}=DER;if(t<_0n4)throw new e("integer: negative integers are not allowed");let s=numberToHexUnpadded(t);if(Number.parseInt(s[0],16)&8&&(s="00"+s),s.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return s},decode(t){const{Err:e}=DER;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bytesToNumberBE(t)}},toSig(t){const{Err:e,_int:s,_tlv:r}=DER,a=abytes$1(t,void 0,"signature"),{v:o,l}=r.decode(48,a);if(l.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,o),{v:f,l:d}=r.decode(2,u);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:s.decode(c),s:s.decode(f)}},hexFromSig(t){const{_tlv:e,_int:s}=DER,r=e.encode(2,s.encode(t.r)),a=e.encode(2,s.encode(t.s)),o=r+a;return e.encode(48,o)}},_0n4=BigInt(0),_1n4=BigInt(1),_2n2=BigInt(2),_3n2=BigInt(3),_4n2=BigInt(4);function weierstrass(t,e={}){const s=createCurveFields("weierstrass",t,e),{Fp:r,Fn:a}=s;let o=s.CURVE;const{h:l,n:c}=o;validateObject(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:u}=e;if(u&&(!r.is0(o.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=getWLengths(r,a);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(O,k,v){const{x:S,y:N}=k.toAffine(),R=r.toBytes(S);if(abool(v,"isCompressed"),v){d();const T=!r.isOdd(N);return concatBytes(pprefix(T),R)}else return concatBytes(Uint8Array.of(4),R,r.toBytes(N))}function m(O){abytes$1(O,void 0,"Point");const{publicKey:k,publicKeyUncompressed:v}=f,S=O.length,N=O[0],R=O.subarray(1);if(S===k&&(N===2||N===3)){const T=r.fromBytes(R);if(!r.isValid(T))throw new Error("bad point: is not on curve, wrong x");const M=E(T);let I;try{I=r.sqrt(M)}catch(L){const Y=L instanceof Error?": "+L.message:"";throw new Error("bad point: is not on curve, sqrt error"+Y)}d();const $=r.isOdd(I);return(N&1)===1!==$&&(I=r.neg(I)),{x:T,y:I}}else if(S===v&&N===4){const T=r.BYTES,M=r.fromBytes(R.subarray(0,T)),I=r.fromBytes(R.subarray(T,T*2));if(!C(M,I))throw new Error("bad point: is not on curve");return{x:M,y:I}}else throw new Error(`bad point: got length ${S}, expected compressed=${k} or uncompressed=${v}`)}const y=e.toBytes||p,b=e.fromBytes||m;function E(O){const k=r.sqr(O),v=r.mul(k,O);return r.add(r.add(v,r.mul(O,o.a)),o.b)}function C(O,k){const v=r.sqr(k),S=E(O);return r.eql(v,S)}if(!C(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const j=r.mul(r.pow(o.a,_3n2),_4n2),B=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(j,B)))throw new Error("bad curve params: a or b");function D(O,k,v=!1){if(!r.isValid(k)||v&&r.is0(k))throw new Error(`bad point coordinate ${O}`);return k}function F(O){if(!(O instanceof W))throw new Error("Weierstrass Point expected")}function q(O){if(!u||!u.basises)throw new Error("no endo");return _splitEndoScalar(O,u.basises,a.ORDER)}const V=memoized((O,k)=>{const{X:v,Y:S,Z:N}=O;if(r.eql(N,r.ONE))return{x:v,y:S};const R=O.is0();k==null&&(k=R?r.ONE:r.inv(N));const T=r.mul(v,k),M=r.mul(S,k),I=r.mul(N,k);if(R)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:T,y:M}}),ee=memoized(O=>{if(O.is0()){if(e.allowInfinityPoint&&!r.is0(O.Y))return;throw new Error("bad point: ZERO")}const{x:k,y:v}=O.toAffine();if(!r.isValid(k)||!r.isValid(v))throw new Error("bad point: x or y not field elements");if(!C(k,v))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Q(O,k,v,S,N){return v=new W(r.mul(v.X,O),v.Y,v.Z),k=negateCt(S,k),v=negateCt(N,v),k.add(v)}class W{static BASE=new W(o.Gx,o.Gy,r.ONE);static ZERO=new W(r.ZERO,r.ONE,r.ZERO);static Fp=r;static Fn=a;X;Y;Z;constructor(k,v,S){this.X=D("x",k),this.Y=D("y",v,!0),this.Z=D("z",S),Object.freeze(this)}static CURVE(){return o}static fromAffine(k){const{x:v,y:S}=k||{};if(!k||!r.isValid(v)||!r.isValid(S))throw new Error("invalid affine point");if(k instanceof W)throw new Error("projective point not allowed");return r.is0(v)&&r.is0(S)?W.ZERO:new W(v,S,r.ONE)}static fromBytes(k){const v=W.fromAffine(b(abytes$1(k,void 0,"point")));return v.assertValidity(),v}static fromHex(k){return W.fromBytes(hexToBytes2$1(k))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(k=8,v=!0){return z.createCache(this,k),v||this.multiply(_3n2),this}assertValidity(){ee(this)}hasEvenY(){const{y:k}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(k)}equals(k){F(k);const{X:v,Y:S,Z:N}=this,{X:R,Y:T,Z:M}=k,I=r.eql(r.mul(v,M),r.mul(R,N)),$=r.eql(r.mul(S,M),r.mul(T,N));return I&&$}negate(){return new W(this.X,r.neg(this.Y),this.Z)}double(){const{a:k,b:v}=o,S=r.mul(v,_3n2),{X:N,Y:R,Z:T}=this;let M=r.ZERO,I=r.ZERO,$=r.ZERO,A=r.mul(N,N),L=r.mul(R,R),Y=r.mul(T,T),oe=r.mul(N,R);return oe=r.add(oe,oe),$=r.mul(N,T),$=r.add($,$),M=r.mul(k,$),I=r.mul(S,Y),I=r.add(M,I),M=r.sub(L,I),I=r.add(L,I),I=r.mul(M,I),M=r.mul(oe,M),$=r.mul(S,$),Y=r.mul(k,Y),oe=r.sub(A,Y),oe=r.mul(k,oe),oe=r.add(oe,$),$=r.add(A,A),A=r.add($,A),A=r.add(A,Y),A=r.mul(A,oe),I=r.add(I,A),Y=r.mul(R,T),Y=r.add(Y,Y),A=r.mul(Y,oe),M=r.sub(M,A),$=r.mul(Y,L),$=r.add($,$),$=r.add($,$),new W(M,I,$)}add(k){F(k);const{X:v,Y:S,Z:N}=this,{X:R,Y:T,Z:M}=k;let I=r.ZERO,$=r.ZERO,A=r.ZERO;const L=o.a,Y=r.mul(o.b,_3n2);let oe=r.mul(v,R),J=r.mul(S,T),U=r.mul(N,M),G=r.add(v,S),ae=r.add(R,T);G=r.mul(G,ae),ae=r.add(oe,J),G=r.sub(G,ae),ae=r.add(v,N);let he=r.add(R,M);return ae=r.mul(ae,he),he=r.add(oe,U),ae=r.sub(ae,he),he=r.add(S,N),I=r.add(T,M),he=r.mul(he,I),I=r.add(J,U),he=r.sub(he,I),A=r.mul(L,ae),I=r.mul(Y,U),A=r.add(I,A),I=r.sub(J,A),A=r.add(J,A),$=r.mul(I,A),J=r.add(oe,oe),J=r.add(J,oe),U=r.mul(L,U),ae=r.mul(Y,ae),J=r.add(J,U),U=r.sub(oe,U),U=r.mul(L,U),ae=r.add(ae,U),oe=r.mul(J,ae),$=r.add($,oe),oe=r.mul(he,ae),I=r.mul(G,I),I=r.sub(I,oe),oe=r.mul(G,J),A=r.mul(he,A),A=r.add(A,oe),new W(I,$,A)}subtract(k){return this.add(k.negate())}is0(){return this.equals(W.ZERO)}multiply(k){const{endo:v}=e;if(!a.isValidNot0(k))throw new Error("invalid scalar: out of range");let S,N;const R=T=>z.cached(this,T,M=>normalizeZ(W,M));if(v){const{k1neg:T,k1:M,k2neg:I,k2:$}=q(k),{p:A,f:L}=R(M),{p:Y,f:oe}=R($);N=L.add(oe),S=Q(v.beta,A,Y,T,I)}else{const{p:T,f:M}=R(k);S=T,N=M}return normalizeZ(W,[S,N])[0]}multiplyUnsafe(k){const{endo:v}=e,S=this;if(!a.isValid(k))throw new Error("invalid scalar: out of range");if(k===_0n4||S.is0())return W.ZERO;if(k===_1n4)return S;if(z.hasCache(this))return this.multiply(k);if(v){const{k1neg:N,k1:R,k2neg:T,k2:M}=q(k),{p1:I,p2:$}=mulEndoUnsafe(W,S,R,M);return Q(v.beta,I,$,N,T)}else return z.unsafe(S,k)}toAffine(k){return V(this,k)}isTorsionFree(){const{isTorsionFree:k}=e;return l===_1n4?!0:k?k(W,this):z.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:k}=e;return l===_1n4?this:k?k(W,this):this.multiplyUnsafe(l)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}toBytes(k=!0){return abool(k,"isCompressed"),this.assertValidity(),y(W,this,k)}toHex(k=!0){return bytesToHex4(this.toBytes(k))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const Z=a.BITS,z=new wNAF(W,e.endo?Math.ceil(Z/2):Z);return W.BASE.precompute(8),W}function pprefix(t){return Uint8Array.of(t?2:3)}function getWLengths(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function ecdh(t,e={}){const{Fn:s}=t,r=e.randomBytes||randomBytes2,a=Object.assign(getWLengths(t.Fp,s),{seed:getMinHashLength(s.ORDER)});function o(y){try{const b=s.fromBytes(y);return s.isValidNot0(b)}catch{return!1}}function l(y,b){const{publicKey:E,publicKeyUncompressed:C}=a;try{const j=y.length;return b===!0&&j!==E||b===!1&&j!==C?!1:!!t.fromBytes(y)}catch{return!1}}function c(y=r(a.seed)){return mapHashToField(abytes$1(y,a.seed,"seed"),s.ORDER)}function u(y,b=!0){return t.BASE.multiply(s.fromBytes(y)).toBytes(b)}function f(y){const{secretKey:b,publicKey:E,publicKeyUncompressed:C}=a;if(!isBytes$1(y)||"_lengths"in s&&s._lengths||b===E)return;const j=abytes$1(y,void 0,"key").length;return j===E||j===C}function d(y,b,E=!0){if(f(y)===!0)throw new Error("first arg must be private key");if(f(b)===!1)throw new Error("second arg must be public key");const C=s.fromBytes(y);return t.fromBytes(b).multiply(C).toBytes(E)}const p={isValidSecretKey:o,isValidPublicKey:l,randomSecretKey:c},m=createKeygen(c,u);return Object.freeze({getPublicKey:u,getSharedSecret:d,keygen:m,Point:t,utils:p,lengths:a})}function ecdsa(t,e,s={}){ahash$1(e),validateObject(s,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),s=Object.assign({},s);const r=s.randomBytes||randomBytes2,a=s.hmac||((v,S)=>hmac$1(e,v,S)),{Fp:o,Fn:l}=t,{ORDER:c,BITS:u}=l,{keygen:f,getPublicKey:d,getSharedSecret:p,utils:m,lengths:y}=ecdh(t,s),b={prehash:!0,lowS:typeof s.lowS=="boolean"?s.lowS:!0,format:"compact",extraEntropy:!1},E=c*_2n2<o.ORDER;function C(v){const S=c>>_1n4;return v>S}function j(v,S){if(!l.isValidNot0(S))throw new Error(`invalid signature ${v}: out of range 1..Point.Fn.ORDER`);return S}function B(){if(E)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function D(v,S){validateSigFormat(S);const N=y.signature,R=S==="compact"?N:S==="recovered"?N+1:void 0;return abytes$1(v,R)}class F{r;s;recovery;constructor(S,N,R){if(this.r=j("r",S),this.s=j("s",N),R!=null){if(B(),![0,1,2,3].includes(R))throw new Error("invalid recovery id");this.recovery=R}Object.freeze(this)}static fromBytes(S,N=b.format){D(S,N);let R;if(N==="der"){const{r:$,s:A}=DER.toSig(abytes$1(S));return new F($,A)}N==="recovered"&&(R=S[0],N="compact",S=S.subarray(1));const T=y.signature/2,M=S.subarray(0,T),I=S.subarray(T,T*2);return new F(l.fromBytes(M),l.fromBytes(I),R)}static fromHex(S,N){return this.fromBytes(hexToBytes2$1(S),N)}assertRecovery(){const{recovery:S}=this;if(S==null)throw new Error("invalid recovery id: must be present");return S}addRecoveryBit(S){return new F(this.r,this.s,S)}recoverPublicKey(S){const{r:N,s:R}=this,T=this.assertRecovery(),M=T===2||T===3?N+c:N;if(!o.isValid(M))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const I=o.toBytes(M),$=t.fromBytes(concatBytes(pprefix((T&1)===0),I)),A=l.inv(M),L=V(abytes$1(S,void 0,"msgHash")),Y=l.create(-L*A),oe=l.create(R*A),J=t.BASE.multiplyUnsafe(Y).add($.multiplyUnsafe(oe));if(J.is0())throw new Error("invalid recovery: point at infinify");return J.assertValidity(),J}hasHighS(){return C(this.s)}toBytes(S=b.format){if(validateSigFormat(S),S==="der")return hexToBytes2$1(DER.hexFromSig(this));const{r:N,s:R}=this,T=l.toBytes(N),M=l.toBytes(R);return S==="recovered"?(B(),concatBytes(Uint8Array.of(this.assertRecovery()),T,M)):concatBytes(T,M)}toHex(S){return bytesToHex4(this.toBytes(S))}}const q=s.bits2int||function(S){if(S.length>8192)throw new Error("input is too large");const N=bytesToNumberBE(S),R=S.length*8-u;return R>0?N>>BigInt(R):N},V=s.bits2int_modN||function(S){return l.create(q(S))},ee=bitMask(u);function Q(v){return aInRange("num < 2^"+u,v,_0n4,ee),l.toBytes(v)}function W(v,S){return abytes$1(v,void 0,"message"),S?abytes$1(e(v),void 0,"prehashed message"):v}function Z(v,S,N){const{lowS:R,prehash:T,extraEntropy:M}=validateSigOpts(N,b);v=W(v,T);const I=V(v),$=l.fromBytes(S);if(!l.isValidNot0($))throw new Error("invalid private key");const A=[Q($),Q(I)];if(M!=null&&M!==!1){const J=M===!0?r(y.secretKey):M;A.push(abytes$1(J,void 0,"extraEntropy"))}const L=concatBytes(...A),Y=I;function oe(J){const U=q(J);if(!l.isValidNot0(U))return;const G=l.inv(U),ae=t.BASE.multiply(U).toAffine(),he=l.create(ae.x);if(he===_0n4)return;const le=l.create(G*l.create(Y+he*$));if(le===_0n4)return;let te=(ae.x===he?0:2)|Number(ae.y&_1n4),pe=le;return R&&C(le)&&(pe=l.neg(le),te^=1),new F(he,pe,E?void 0:te)}return{seed:L,k2sig:oe}}function z(v,S,N={}){const{seed:R,k2sig:T}=Z(v,S,N);return createHmacDrbg(e.outputLen,l.BYTES,a)(R,T).toBytes(N.format)}function O(v,S,N,R={}){const{lowS:T,prehash:M,format:I}=validateSigOpts(R,b);if(N=abytes$1(N,void 0,"publicKey"),S=W(S,M),!isBytes$1(v)){const $=v instanceof F?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+$)}D(v,I);try{const $=F.fromBytes(v,I),A=t.fromBytes(N);if(T&&$.hasHighS())return!1;const{r:L,s:Y}=$,oe=V(S),J=l.inv(Y),U=l.create(oe*J),G=l.create(L*J),ae=t.BASE.multiplyUnsafe(U).add(A.multiplyUnsafe(G));return ae.is0()?!1:l.create(ae.x)===L}catch{return!1}}function k(v,S,N={}){const{prehash:R}=validateSigOpts(N,b);return S=W(S,R),F.fromBytes(v,"recovered").recoverPublicKey(S).toBytes()}return Object.freeze({keygen:f,getPublicKey:d,getSharedSecret:p,utils:m,lengths:y,Point:t,sign:z,verify:O,recoverPublicKey:k,Signature:F,hash:e})}var secp256k1_CURVE={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},secp256k1_ENDO={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},_2n3=BigInt(2);function sqrtMod(t){const e=secp256k1_CURVE.p,s=BigInt(3),r=BigInt(6),a=BigInt(11),o=BigInt(22),l=BigInt(23),c=BigInt(44),u=BigInt(88),f=t*t*t%e,d=f*f*t%e,p=pow2(d,s,e)*d%e,m=pow2(p,s,e)*d%e,y=pow2(m,_2n3,e)*f%e,b=pow2(y,a,e)*y%e,E=pow2(b,o,e)*b%e,C=pow2(E,c,e)*E%e,j=pow2(C,u,e)*C%e,B=pow2(j,c,e)*E%e,D=pow2(B,s,e)*d%e,F=pow2(D,l,e)*b%e,q=pow2(F,r,e)*f%e,V=pow2(q,_2n3,e);if(!Fpk1.eql(Fpk1.sqr(V),t))throw new Error("Cannot find square root");return V}var Fpk1=Field(secp256k1_CURVE.p,{sqrt:sqrtMod}),Pointk1=weierstrass(secp256k1_CURVE,{Fp:Fpk1,endo:secp256k1_ENDO}),secp256k1=ecdsa(Pointk1,sha2564),DEFAULT_MARKET_API_URL="https://market-api.unicity.network";function hexToBytes3(t){const e=t.length>>1,s=new Uint8Array(e);for(let r=0;r<e;r++)s[r]=parseInt(t.slice(r*2,r*2+2),16);return s}function signRequest(t,e){const s=Date.now(),r=JSON.stringify({body:t,timestamp:s}),a=sha2564(new TextEncoder().encode(r)),o=hexToBytes3(e),l=secp256k1.sign(a,o),c=bytesToHex4(secp256k1.getPublicKey(o,!0));return{body:JSON.stringify(t),headers:{"x-signature":bytesToHex4(l),"x-public-key":c,"x-timestamp":String(s),"content-type":"application/json"}}}function toSnakeCaseIntent(t){const e={description:t.description,intent_type:t.intentType};return t.category!==void 0&&(e.category=t.category),t.price!==void 0&&(e.price=t.price),t.currency!==void 0&&(e.currency=t.currency),t.location!==void 0&&(e.location=t.location),t.contactHandle!==void 0&&(e.contact_handle=t.contactHandle),t.expiresInDays!==void 0&&(e.expires_in_days=t.expiresInDays),e}function toSnakeCaseFilters(t){const e={};if(t?.filters){const s=t.filters;s.intentType!==void 0&&(e.intent_type=s.intentType),s.category!==void 0&&(e.category=s.category),s.minPrice!==void 0&&(e.min_price=s.minPrice),s.maxPrice!==void 0&&(e.max_price=s.maxPrice),s.location!==void 0&&(e.location=s.location)}return t?.limit!==void 0&&(e.limit=t.limit),e}function mapSearchResult(t){return{id:t.id,score:t.score,agentNametag:t.agent_nametag??void 0,agentPublicKey:t.agent_public_key,description:t.description,intentType:t.intent_type,category:t.category??void 0,price:t.price??void 0,currency:t.currency,location:t.location??void 0,contactMethod:t.contact_method,contactHandle:t.contact_handle??void 0,createdAt:t.created_at,expiresAt:t.expires_at}}function mapMyIntent(t){return{id:t.id,intentType:t.intent_type,category:t.category??void 0,price:t.price??void 0,currency:t.currency,location:t.location??void 0,status:t.status,createdAt:t.created_at,expiresAt:t.expires_at}}function mapFeedListing(t){return{id:t.id,title:t.title,descriptionPreview:t.description_preview,agentName:t.agent_name,agentId:t.agent_id,type:t.type,createdAt:t.created_at}}function mapFeedMessage(t){return t.type==="initial"?{type:"initial",listings:(t.listings??[]).map(mapFeedListing)}:{type:"new",listing:mapFeedListing(t.listing)}}var MarketModule=class{apiUrl;timeout;identity=null;registered=!1;constructor(t){this.apiUrl=(t?.apiUrl??DEFAULT_MARKET_API_URL).replace(/\/+$/,""),this.timeout=t?.timeout??3e4}initialize(t){this.identity=t.identity}async load(){}destroy(){}async postIntent(t){const e=toSnakeCaseIntent(t),s=await this.apiPost("/api/intents",e);return{intentId:s.intent_id??s.intentId,message:s.message,expiresAt:s.expires_at??s.expiresAt}}async search(t,e){const s={query:t,...toSnakeCaseFilters(e)};let a=((await this.apiPublicPost("/api/search",s)).intents??[]).map(mapSearchResult);const o=e?.filters?.minScore;return o!=null&&(a=a.filter(l=>Math.round(l.score*100)>=Math.round(o*100))),{intents:a,count:a.length}}async getMyIntents(){return((await this.apiGet("/api/intents")).intents??[]).map(mapMyIntent)}async closeIntent(t){await this.apiDelete(`/api/intents/${encodeURIComponent(t)}`)}async getRecentListings(){const t=await fetch(`${this.apiUrl}/api/feed/recent`,{signal:AbortSignal.timeout(this.timeout)});return((await this.parseResponse(t)).listings??[]).map(mapFeedListing)}subscribeFeed(t){const e=this.apiUrl.replace(/^http/,"ws")+"/ws/feed",s=new WebSocket(e);return s.onmessage=r=>{try{const a=JSON.parse(typeof r.data=="string"?r.data:r.data.toString());t(mapFeedMessage(a))}catch{}},()=>{s.close()}}ensureIdentity(){if(!this.identity)throw new Error("MarketModule not initialized  call initialize() first")}async ensureRegistered(){if(this.registered)return;this.ensureIdentity();const e={public_key:bytesToHex4(secp256k1.getPublicKey(hexToBytes3(this.identity.privateKey),!0))};this.identity.nametag&&(e.nametag=this.identity.nametag);const s=await fetch(`${this.apiUrl}/api/agent/register`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout)});if(s.ok||s.status===409){this.registered=!0;return}const r=await s.text();let a;try{a=JSON.parse(r)}catch{}throw new Error(a?.error??`Agent registration failed: HTTP ${s.status}`)}async parseResponse(t){const e=await t.text();let s;try{s=JSON.parse(e)}catch{throw new Error(`Market API error: HTTP ${t.status}  unexpected response (not JSON)`)}if(!t.ok)throw new Error(s.error??`HTTP ${t.status}`);return s}async apiPost(t,e){this.ensureIdentity(),await this.ensureRegistered();const s=signRequest(e,this.identity.privateKey),r=await fetch(`${this.apiUrl}${t}`,{method:"POST",headers:s.headers,body:s.body,signal:AbortSignal.timeout(this.timeout)});return this.parseResponse(r)}async apiGet(t){this.ensureIdentity(),await this.ensureRegistered();const e=signRequest({},this.identity.privateKey),s=await fetch(`${this.apiUrl}${t}`,{method:"GET",headers:e.headers,signal:AbortSignal.timeout(this.timeout)});return this.parseResponse(s)}async apiDelete(t){this.ensureIdentity(),await this.ensureRegistered();const e=signRequest({},this.identity.privateKey),s=await fetch(`${this.apiUrl}${t}`,{method:"DELETE",headers:e.headers,signal:AbortSignal.timeout(this.timeout)});return this.parseResponse(s)}async apiPublicPost(t,e){const s=await fetch(`${this.apiUrl}${t}`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout)});return this.parseResponse(s)}};function createMarketModule(t){return new MarketModule(t)}function encryptSimple(t,e){return CryptoJS.AES.encrypt(t,e).toString()}function decryptSimple(t,e){const r=CryptoJS.AES.decrypt(t,e).toString(CryptoJS.enc.Utf8);if(!r)throw new Error("Decryption failed: invalid password or corrupted data");return r}function decryptWithSalt(t,e,s){try{const r=CryptoJS.PBKDF2(e,s,{keySize:8,iterations:1e5,hasher:CryptoJS.algo.SHA256}).toString();return CryptoJS.AES.decrypt(t,r).toString(CryptoJS.enc.Utf8)||null}catch{return null}}async function scanAddressesImpl(t,e={}){const s=e.maxAddresses??50,r=e.gapLimit??20,a=e.includeChange??!0,{onProgress:o,signal:l,resolveNametag:c}=e,{connect:u,getBalance:f}=await Promise.resolve().then(()=>(init_network(),network_exports));await u();const d=[];let p=0,m=0,y=0;const b=a?[!1,!0]:[!1],E=s*b.length;for(const C of b){let j=0;for(let B=0;B<s&&!l?.aborted;B++){const D=t(B,C);m++,o?.({scanned:m,total:E,currentAddress:D.address,foundCount:d.length,currentGap:j,nametagsFoundCount:y});try{const F=await f(D.address);if(F>0){let q;if(c)try{const V=await c(D.address);V&&(q=V,y++)}catch{}d.push({index:B,address:D.address,path:D.path,balance:F,isChange:C,nametag:q}),p+=F,j=0}else j++}catch(F){console.warn(`[scanAddresses] Error checking ${D.address}:`,F),j++}if(j>=r)break;m%5===0&&await new Promise(F=>setTimeout(F,0))}if(l?.aborted)break}return{addresses:d,totalBalance:p,scannedCount:m}}init_network();var SECP256K1_ORDER=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),BASE58_ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function isValidPrivateKey(t){try{if(!/^[0-9a-fA-F]{64}$/.test(t))return!1;const e=BigInt("0x"+t);return e>0n&&e<SECP256K1_ORDER}catch{return!1}}function base58Decode(t){const e={};for(let o=0;o<BASE58_ALPHABET.length;o++)e[BASE58_ALPHABET[o]]=o;let s=0;for(let o=0;o<t.length&&t[o]==="1";o++)s++;let r=BigInt(0);for(let o=0;o<t.length;o++){const l=t[o];if(!(l in e))throw new Error("Invalid base58 character: "+l);r=r*BigInt(58)+BigInt(e[l])}const a=[];for(;r>0;)a.unshift(Number(r%BigInt(256))),r=r/BigInt(256);for(let o=0;o<s;o++)a.unshift(0);return new Uint8Array(a)}function findPattern(t,e,s=0){for(let r=s;r<=t.length-e.length;r++){let a=!0;for(let o=0;o<e.length;o++)if(t[r+o]!==e[o]){a=!1;break}if(a)return r}return-1}function extractFromText(t,e){return t.match(e)?.[1]?.trim()??null}var WALLET_HEADER="UNICITY WALLET DETAILS",LEGACY_SALT="alpha_wallet_salt",LEGACY_ITERATIONS=1e5;function deriveLegacyKey(t){return CryptoJS.PBKDF2(t,LEGACY_SALT,{keySize:256/32,iterations:LEGACY_ITERATIONS,hasher:CryptoJS.algo.SHA1}).toString()}function decryptTextFormatKey(t,e){try{const s=deriveLegacyKey(e),a=CryptoJS.AES.decrypt(t,s).toString(CryptoJS.enc.Utf8);return!a||!/^[0-9a-fA-F]+$/.test(a)?null:a}catch{return null}}function encryptForTextFormat(t,e){const s=deriveLegacyKey(e);return CryptoJS.AES.encrypt(t,s).toString()}function formatAddresses(t,e){return t.map((s,r)=>{const a=s.path||(e?`m/84'/1'/0'/${s.isChange?1:0}/${s.index}`:`m/44'/0'/${s.index}'`);return`Address ${r+1}: ${s.address} (Path: ${a})`}).join(`
`)}function serializeWalletToText(t){const{masterPrivateKey:e,masterPrivateKeyWIF:s,chainCode:r,descriptorPath:a,isBIP32:o,addresses:l}=t,c=formatAddresses(l,o);let u;return o&&r?u=`MASTER PRIVATE KEY (keep secret!):
${e}
${s?`
MASTER PRIVATE KEY IN WIF FORMAT (for importprivkey command):
${s}
`:""}
MASTER CHAIN CODE (for BIP32 HD wallet compatibility):
${r}

DESCRIPTOR PATH: ${a||"84'/1'/0'"}

WALLET TYPE: BIP32 hierarchical deterministic wallet

ENCRYPTION STATUS: Not encrypted
This key is in plaintext and not protected. Anyone with this file can access your wallet.`:u=`MASTER PRIVATE KEY (keep secret!):
${e}
${s?`
MASTER PRIVATE KEY IN WIF FORMAT (for importprivkey command):
${s}
`:""}
WALLET TYPE: Standard wallet (HMAC-based)

ENCRYPTION STATUS: Not encrypted
This key is in plaintext and not protected. Anyone with this file can access your wallet.`,`${WALLET_HEADER}
===========================

${u}

YOUR ADDRESSES:
${c}

Generated on: ${new Date().toLocaleString()}

WARNING: Keep your master private key safe and secure.
Anyone with your master private key can access all your funds.`}function serializeEncryptedWalletToText(t){const{encryptedMasterKey:e,chainCode:s,descriptorPath:r,isBIP32:a,addresses:o}=t,l=formatAddresses(o,a);let c=`ENCRYPTED MASTER KEY (password protected):
${e}`;return a&&s?c+=`

MASTER CHAIN CODE (for BIP32 HD wallet compatibility):
${s}

DESCRIPTOR PATH: ${r||"84'/1'/0'"}

WALLET TYPE: BIP32 hierarchical deterministic wallet`:c+=`

WALLET TYPE: Standard wallet (HMAC-based)`,`${WALLET_HEADER}
===========================

${c}

ENCRYPTION STATUS: Encrypted with password
To use this key, you will need the password you set in the wallet.

YOUR ADDRESSES:
${l}

Generated on: ${new Date().toLocaleString()}

WARNING: Keep your master private key safe and secure.
Anyone with your master private key can access all your funds.`}function isWalletTextFormat(t){return t.includes(WALLET_HEADER)&&(t.includes("MASTER PRIVATE KEY")||t.includes("ENCRYPTED MASTER KEY"))}function isTextWalletEncrypted(t){return t.includes("ENCRYPTED MASTER KEY")}function parseWalletText(t){try{if(isTextWalletEncrypted(t))return extractFromText(t,/ENCRYPTED MASTER KEY \(password protected\):\s*([^\n]+)/)?{success:!1,needsPassword:!0,error:"Password required for encrypted wallet"}:{success:!1,error:"Could not find encrypted master key in backup file"};const s=extractFromText(t,/MASTER PRIVATE KEY \(keep secret!\):\s*([^\n]+)/);if(!s)return{success:!1,error:"Could not find master private key in backup file"};const r=extractFromText(t,/MASTER CHAIN CODE \(for (?:BIP32 HD|Alpha) wallet compatibility\):\s*([^\n]+)/),a=extractFromText(t,/DESCRIPTOR PATH:\s*([^\n]+)/),o=t.includes("WALLET TYPE: BIP32 hierarchical deterministic wallet")||t.includes("WALLET TYPE: Alpha descriptor wallet")||!!r;return{success:!0,data:{masterKey:s,chainCode:r??void 0,descriptorPath:a??(o?"84'/1'/0'":void 0),derivationMode:o?"bip32":"wif_hmac"}}}catch(e){return{success:!1,error:`Failed to parse wallet text: ${e instanceof Error?e.message:String(e)}`}}}function parseAndDecryptWalletText(t,e){try{if(!isTextWalletEncrypted(t))return parseWalletText(t);const r=extractFromText(t,/ENCRYPTED MASTER KEY \(password protected\):\s*([^\n]+)/);if(!r)return{success:!1,error:"Could not find encrypted master key in backup file"};const a=decryptTextFormatKey(r,e);if(!a)return{success:!1,error:"Failed to decrypt - incorrect password?"};const o=extractFromText(t,/MASTER CHAIN CODE \(for (?:BIP32 HD|Alpha) wallet compatibility\):\s*([^\n]+)/),l=extractFromText(t,/DESCRIPTOR PATH:\s*([^\n]+)/),c=t.includes("WALLET TYPE: BIP32 hierarchical deterministic wallet")||t.includes("WALLET TYPE: Alpha descriptor wallet")||!!o;return{success:!0,data:{masterKey:a,chainCode:o??void 0,descriptorPath:l??(c?"84'/1'/0'":void 0),derivationMode:c?"bip32":"wif_hmac"}}}catch(s){return{success:!1,error:`Failed to parse/decrypt wallet text: ${s instanceof Error?s.message:String(s)}`}}}function uint8ArrayToWordArray(t){const e=bytesToHex2(t);return CryptoJS.enc.Hex.parse(e)}function isSQLiteDatabase(t){return t.length<16?!1:new TextDecoder().decode(t.slice(0,16)).startsWith("SQLite format 3")}function isWalletDatEncrypted(t){const e=new TextEncoder().encode("mkey");return findPattern(t,e,0)!==-1}function findAllCMasterKeys(t){const e=[];for(let s=0;s<t.length-70;s++)if(t[s]===48){const r=s+1+48;if(r<t.length&&t[r]===8){const a=r+1+8+4;if(a+4<=t.length){const o=t[a]|t[a+1]<<8|t[a+2]<<16|t[a+3]<<24;if(o>=1e3&&o<=1e7){const l=t.slice(s+1,s+1+48),c=t.slice(r+1,r+1+8),u=t[r+1+8]|t[r+1+8+1]<<8|t[r+1+8+2]<<16|t[r+1+8+3]<<24;e.push({encryptedKey:l,salt:c,derivationMethod:u,iterations:o,position:s})}}}}return e}function findWpkhDescriptor(t){const e=new TextEncoder().encode("walletdescriptor");let s=0;for(;(s=findPattern(t,e,s))!==-1;){let r=s+e.length+32;const a=t[r];r++;const o=t.slice(r,r+Math.min(a,200));let l="";for(let c=0;c<o.length&&o[c]>=32&&o[c]<=126;c++)l+=String.fromCharCode(o[c]);if(l.startsWith("wpkh(xpub")&&l.includes("/0/*)")){const c=l.match(/xpub[1-9A-HJ-NP-Za-km-z]{100,}/);if(c){const u=s+e.length,f=t.slice(u,u+32),d=l.match(/\[[\da-f]+\/(\d+'\/\d+'\/\d+')\]/),p=d?d[1]:"84'/1'/0'";return{descriptorId:f,xpubString:c[0],descriptorPath:p}}}s++}return{descriptorId:null,xpubString:null,descriptorPath:null}}function extractChainCodeFromXpub(t){const e=base58Decode(t);return bytesToHex2(e.slice(13,45))}function findMasterChainCode(t){const e=new TextEncoder().encode("xpub"),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let r=0;for(;r<t.length;){const a=findPattern(t,e,r);if(a===-1)break;let o="xpub",l=a+4;for(;l<t.length&&o.length<120;){const c=String.fromCharCode(t[l]);if(s.includes(c))o+=c,l++;else break}if(o.length>100)try{const c=base58Decode(o);if(c[4]===0)return bytesToHex2(c.slice(13,45))}catch{}r=a+4}return null}function extractDescriptorKeys(t){const e=[],s=new TextEncoder().encode("walletdescriptorkey");let r=0;for(;(r=findPattern(t,s,r))!==-1;){for(let a=r+s.length;a<Math.min(r+s.length+200,t.length-40);a++)if(t[a]===211&&t[a+1]===2&&t[a+2]===1&&t[a+3]===1&&t[a+4]===4&&t[a+5]===32){const o=t.slice(a+6,a+38),l=bytesToHex2(o);if(isValidPrivateKey(l)){e.push(l);break}}r++}return e}function extractLegacyKeys(t){const e=[],s=new TextEncoder().encode("key");let r=0;for(;(r=findPattern(t,s,r))!==-1;){const a=new Uint8Array([4,32]);for(let o=r;o<Math.min(r+200,t.length-34);o++)if(t[o]===a[0]&&t[o+1]===a[1]){const l=t.slice(o+2,o+34),c=bytesToHex2(l);if(isValidPrivateKey(c)){e.push(c);break}}r++}return e}function findEncryptedKeyForDescriptor(t,e){const s=new TextEncoder().encode("walletdescriptorckey");let r=findPattern(t,s,0);for(;r!==-1;){const a=t.slice(r+s.length,r+s.length+32);if(Array.from(a).every((o,l)=>o===e[l])){let o=r+s.length+32;const l=t[o];o++;const c=t.slice(o,o+l);for(let u=o+l;u<Math.min(o+l+100,t.length-50);u++){const f=t[u];if(f>=32&&f<=64){const d=t.slice(u+1,u+1+f);return{pubkey:c,encryptedKey:d}}}}r=findPattern(t,s,r+1)}return null}async function decryptCMasterKey(t,e,s){const{encryptedKey:r,salt:a,iterations:o}=t,l=bytesToHex2(new TextEncoder().encode(e)),c=bytesToHex2(a),u=l+c;let f=CryptoJS.SHA512(CryptoJS.enc.Hex.parse(u));const d=1e3;for(let C=0;C<o-1;C++)f=CryptoJS.SHA512(f),s&&C%d===0&&await s(C,o);const p=CryptoJS.lib.WordArray.create(f.words.slice(0,8)),m=CryptoJS.lib.WordArray.create(f.words.slice(8,12)),y=uint8ArrayToWordArray(r),b=CryptoJS.AES.decrypt({ciphertext:y},p,{iv:m,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC}),E=CryptoJS.enc.Hex.stringify(b);if(!E||E.length!==64)throw new Error("Master key decryption failed - incorrect password");return E}function decryptPrivateKey(t,e,s){const r=uint8ArrayToWordArray(e),a=CryptoJS.SHA256(CryptoJS.SHA256(r)),o=CryptoJS.lib.WordArray.create(a.words.slice(0,4)),l=CryptoJS.enc.Hex.parse(s),c=uint8ArrayToWordArray(t),u=CryptoJS.AES.decrypt({ciphertext:c},l,{iv:o,padding:CryptoJS.pad.Pkcs7,mode:CryptoJS.mode.CBC});return CryptoJS.enc.Hex.stringify(u)}function parseWalletDat(t){if(!isSQLiteDatabase(t))return{success:!1,error:"Invalid wallet.dat file - not an SQLite database"};const e=isWalletDatEncrypted(t),s=e?findAllCMasterKeys(t):[],r=e?[]:extractDescriptorKeys(t),a=e?[]:extractLegacyKeys(t),{descriptorId:o,xpubString:l,descriptorPath:c}=findWpkhDescriptor(t);let u=null;if(l)try{u=extractChainCodeFromXpub(l)}catch{u=findMasterChainCode(t)}else u=findMasterChainCode(t);if(!e){let d=null;return r.length>0?d=r[0]:a.length>0&&(d=a[0]),d?{success:!0,data:{masterKey:d,chainCode:u??void 0,descriptorPath:c??"84'/1'/0'",derivationMode:u?"bip32":"wif_hmac"}}:{success:!1,error:"No valid private keys found in wallet.dat file"}}if(s.length===0)return{success:!1,error:"Encrypted wallet but no CMasterKey structures found"};const f=s[0];return{success:!1,needsPassword:!0,encryptionInfo:{iterations:f.iterations,salt:f.salt,encryptedKey:f.encryptedKey},error:"Password required for encrypted wallet"}}async function parseAndDecryptWalletDat(t,e,s){if(!isSQLiteDatabase(t))return{success:!1,error:"Invalid wallet.dat file - not an SQLite database"};if(!isWalletDatEncrypted(t))return parseWalletDat(t);const a=findAllCMasterKeys(t);if(a.length===0)return{success:!1,error:"Encrypted wallet but no CMasterKey structures found"};let o=null;for(const y of a)try{if(o=await decryptCMasterKey(y,e,s),o&&o.length===64)break}catch{continue}if(!o||o.length!==64)return{success:!1,error:"Master key decryption failed - incorrect password"};const{descriptorId:l,xpubString:c,descriptorPath:u}=findWpkhDescriptor(t);let f=null;if(c)try{f=extractChainCodeFromXpub(c)}catch{f=findMasterChainCode(t)}else f=findMasterChainCode(t);if(!l)return{success:!1,error:"Could not find native SegWit receive descriptor"};const d=findEncryptedKeyForDescriptor(t,l);if(!d)return{success:!1,error:"Could not find encrypted private key for descriptor"};const p=decryptPrivateKey(d.encryptedKey,d.pubkey,o);return!p||p.length!==64?{success:!1,error:"Could not decrypt BIP32 master private key"}:{success:!0,data:{masterKey:p,chainCode:f??void 0,descriptorPath:u??"84'/1'/0'",derivationMode:"bip32"}}}function isValidNametag(t){return isPhoneNumber(t)?!0:/^[a-z0-9_-]{3,20}$/.test(t)}var UNICITY_TOKEN_TYPE_HEX2="f8aa13834268d29355ff12183066f0cb902003629bbc5eb9ef0efbe397867509";async function deriveL3PredicateAddress(t){const e=Buffer.from(t,"hex"),s=await SigningService.createFromSecret(e),r=Buffer.from(UNICITY_TOKEN_TYPE_HEX2,"hex"),a=new TokenType(r);return(await(await UnmaskedPredicateReference.create(a,s.algorithm,s.publicKey,HashAlgorithm.SHA256)).toAddress()).toString()}var Sphere=class pt{static instance=null;_initialized=!1;_identity=null;_masterKey=null;_mnemonic=null;_password=null;_source="unknown";_derivationMode="bip32";_basePath=DEFAULT_BASE_PATH;_currentAddressIndex=0;_trackedAddresses=new Map;_addressIdToIndex=new Map;_addressNametags=new Map;_cachedProxyAddress=void 0;_storage;_tokenStorageProviders=new Map;_transport;_oracle;_priceProvider;_payments;_communications;_groupChat=null;_market=null;eventHandlers=new Map;_disabledProviders=new Set;_providerEventCleanups=[];_lastProviderConnected=new Map;constructor(e,s,r,a,o,l,c,u){this._storage=e,this._transport=s,this._oracle=r,this._priceProvider=l??null,a&&this._tokenStorageProviders.set(a.id,a),this._payments=createPaymentsModule({l1:o}),this._communications=createCommunicationsModule(),this._groupChat=c?createGroupChatModule(c):null,this._market=u?createMarketModule(u):null}static async exists(e){try{const s=e.isConnected();return s||await e.connect(),await e.get(STORAGE_KEYS_GLOBAL$1.MNEMONIC)||await e.get(STORAGE_KEYS_GLOBAL$1.MASTER_KEY)?!0:(s||await e.disconnect(),!1)}catch{return!1}}static async init(e){pt.configureTokenRegistry(e.storage,e.network);const s=pt.resolveGroupChatConfig(e.groupChat,e.network),r=pt.resolveMarketConfig(e.market);if(await pt.exists(e.storage))return{sphere:await pt.load({storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,l1:e.l1,price:e.price,groupChat:s,market:r,password:e.password}),created:!1};let o=e.mnemonic,l;if(!o)if(e.autoGenerate)o=pt.generateMnemonic(),l=o;else throw new Error("No wallet exists and no mnemonic provided. Provide a mnemonic or set autoGenerate: true.");return{sphere:await pt.create({mnemonic:o,storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,derivationPath:e.derivationPath,nametag:e.nametag,l1:e.l1,price:e.price,groupChat:s,market:r,password:e.password}),created:!0,generatedMnemonic:l}}static resolveGroupChatConfig(e,s){if(e){if(e===!0)return{relays:[...(s?NETWORKS$1[s]:NETWORKS$1.mainnet).groupRelays]};if(!e.relays||e.relays.length===0){const r=s?NETWORKS$1[s]:NETWORKS$1.mainnet;return{...e,relays:[...r.groupRelays]}}return e}}static resolveMarketConfig(e){if(e)return e===!0?{}:e}static configureTokenRegistry(e,s){const r=s?NETWORKS$1[s]:NETWORKS$1.testnet;TokenRegistry$1.configure({remoteUrl:r.tokenRegistryUrl,storage:e})}static async create(e){if(!e.mnemonic||!pt.validateMnemonic(e.mnemonic))throw new Error("Invalid mnemonic");if(await pt.exists(e.storage))throw new Error("Wallet already exists. Use Sphere.load() or Sphere.clear() first.");pt.configureTokenRegistry(e.storage,e.network);const s=pt.resolveGroupChatConfig(e.groupChat,e.network),r=pt.resolveMarketConfig(e.market),a=new pt(e.storage,e.transport,e.oracle,e.tokenStorage,e.l1,e.price,s,r);return a._password=e.password??null,await a.storeMnemonic(e.mnemonic,e.derivationPath),await a.initializeIdentityFromMnemonic(e.mnemonic,e.derivationPath),await a.initializeProviders(),await a.initializeModules(),await a.finalizeWalletCreation(),a._initialized=!0,pt.instance=a,await a.ensureAddressTracked(0),e.nametag?await a.registerNametag(e.nametag):(await a.recoverNametagFromTransport(),await a.syncIdentityWithTransport()),a}static async load(e){if(!await pt.exists(e.storage))throw new Error("No wallet found. Use Sphere.create() to create a new wallet.");pt.configureTokenRegistry(e.storage,e.network);const s=pt.resolveGroupChatConfig(e.groupChat,e.network),r=pt.resolveMarketConfig(e.market),a=new pt(e.storage,e.transport,e.oracle,e.tokenStorage,e.l1,e.price,s,r);if(a._password=e.password??null,await a.loadIdentityFromStorage(),await a.initializeProviders(),await a.initializeModules(),await a.syncIdentityWithTransport(),a._initialized=!0,pt.instance=a,a._identity?.nametag&&!a._payments.hasNametag()){console.log(`[Sphere] Nametag @${a._identity.nametag} has no token, attempting to mint...`);try{const o=await a.mintNametag(a._identity.nametag);o.success?console.log("[Sphere] Nametag token minted successfully on load"):console.warn(`[Sphere] Could not mint nametag token: ${o.error}`)}catch(o){console.warn("[Sphere] Nametag token mint failed:",o)}}return a}static async import(e){if(!e.mnemonic&&!e.masterKey)throw new Error("Either mnemonic or masterKey is required");console.log("[Sphere.import] Starting import..."),pt.instance!==null||await pt.exists(e.storage)?(console.log("[Sphere.import] Clearing existing wallet data..."),await pt.clear({storage:e.storage,tokenStorage:e.tokenStorage}),console.log("[Sphere.import] Clear done")):console.log("[Sphere.import] No existing wallet  skipping clear"),e.storage.isConnected()||(console.log("[Sphere.import] Reconnecting storage..."),await e.storage.connect(),console.log("[Sphere.import] Storage reconnected"));const r=pt.resolveGroupChatConfig(e.groupChat),a=pt.resolveMarketConfig(e.market),o=new pt(e.storage,e.transport,e.oracle,e.tokenStorage,e.l1,e.price,r,a);if(o._password=e.password??null,e.mnemonic){if(!pt.validateMnemonic(e.mnemonic))throw new Error("Invalid mnemonic");console.log("[Sphere.import] Storing mnemonic..."),await o.storeMnemonic(e.mnemonic,e.derivationPath,e.basePath),console.log("[Sphere.import] Initializing identity from mnemonic..."),await o.initializeIdentityFromMnemonic(e.mnemonic,e.derivationPath)}else e.masterKey&&(console.log("[Sphere.import] Storing master key..."),await o.storeMasterKey(e.masterKey,e.chainCode,e.derivationPath,e.basePath,e.derivationMode),console.log("[Sphere.import] Initializing identity from master key..."),await o.initializeIdentityFromMasterKey(e.masterKey,e.chainCode,e.derivationPath));if(console.log("[Sphere.import] Initializing providers..."),await o.initializeProviders(),console.log("[Sphere.import] Providers initialized. Initializing modules..."),await o.initializeModules(),console.log("[Sphere.import] Modules initialized"),e.nametag||(console.log("[Sphere.import] Recovering nametag from transport..."),await o.recoverNametagFromTransport(),console.log("[Sphere.import] Nametag recovery done"),await o.syncIdentityWithTransport()),console.log("[Sphere.import] Finalizing wallet creation..."),await o.finalizeWalletCreation(),o._initialized=!0,pt.instance=o,console.log("[Sphere.import] Tracking address 0..."),await o.ensureAddressTracked(0),e.nametag&&(console.log("[Sphere.import] Registering nametag..."),await o.registerNametag(e.nametag)),o._tokenStorageProviders.size>0)try{const l=await o._payments.sync();console.log(`[Sphere.import] Auto-sync: +${l.added} -${l.removed}`)}catch(l){console.warn("[Sphere.import] Auto-sync failed (non-fatal):",l)}return console.log("[Sphere.import] Import complete"),o}static async clear(e){const s="get"in e?e:e.storage,r="get"in e?void 0:e.tokenStorage;if(pt.instance&&(console.log("[Sphere.clear] Destroying Sphere instance..."),await pt.instance.destroy(),console.log("[Sphere.clear] Sphere instance destroyed")),console.log("[Sphere.clear] Clearing L1 vesting cache..."),await vestingClassifier.destroy(),console.log("[Sphere.clear] Yielding 50ms for IDB transaction settlement..."),await new Promise(a=>setTimeout(a,50)),r?.clear){console.log("[Sphere.clear] Clearing token storage...");try{await r.clear(),console.log("[Sphere.clear] Token storage cleared")}catch(a){console.warn("[Sphere.clear] Token storage clear failed:",a)}}else console.log("[Sphere.clear] No token storage provider to clear");if(console.log("[Sphere.clear] Clearing KV storage..."),!s.isConnected())try{await s.connect()}catch{}s.isConnected()?(await s.clear(),console.log("[Sphere.clear] KV storage cleared")):console.log("[Sphere.clear] KV storage not connected, skipping"),console.log("[Sphere.clear] Done")}static getInstance(){return pt.instance}static isInitialized(){return pt.instance?._initialized??!1}static validateMnemonic(e){return validateMnemonic2(e)}static generateMnemonic(e=128){return generateMnemonic2(e)}get payments(){return this.ensureReady(),this._payments}get communications(){return this.ensureReady(),this._communications}get groupChat(){return this._groupChat}get market(){return this._market}get identity(){return this._identity?{chainPubkey:this._identity.chainPubkey,l1Address:this._identity.l1Address,directAddress:this._identity.directAddress,ipnsName:this._identity.ipnsName,nametag:this._identity.nametag}:null}get isReady(){return this._initialized}getStorage(){return this._storage}getTokenStorage(){const e=Array.from(this._tokenStorageProviders.values());return e.length>0?e[0]:void 0}getTokenStorageProviders(){return new Map(this._tokenStorageProviders)}async addTokenStorageProvider(e){if(this._tokenStorageProviders.has(e.id))throw new Error(`Token storage provider '${e.id}' already exists`);this._identity&&(e.setIdentity(this._identity),await e.initialize()),this._tokenStorageProviders.set(e.id,e),this._initialized&&this._payments.updateTokenStorageProviders(this._tokenStorageProviders)}async removeTokenStorageProvider(e){const s=this._tokenStorageProviders.get(e);return s?(await s.shutdown(),this._tokenStorageProviders.delete(e),this._initialized&&this._payments.updateTokenStorageProviders(this._tokenStorageProviders),!0):!1}hasTokenStorageProvider(e){return this._tokenStorageProviders.has(e)}setPriceProvider(e){this._priceProvider=e,this._payments.setPriceProvider(e)}getTransport(){return this._transport}getAggregator(){return this._oracle}hasMasterKey(){return this._masterKey!==null}getBasePath(){return this._basePath}getDefaultAddressPath(){return`${this._basePath}/0/0`}getDerivationMode(){return this._derivationMode}getMnemonic(){return this._mnemonic}getWalletInfo(){let e=null;try{this._masterKey?e=this.deriveAddress(0).address:this._identity&&(e=this._identity.l1Address)}catch{}return{source:this._source,hasMnemonic:this._mnemonic!==null,hasChainCode:!!this._masterKey?.chainCode,derivationMode:this._derivationMode,basePath:this._basePath,address0:e}}exportToJSON(e={}){if(this.ensureReady(),!this._masterKey&&!this._identity)throw new Error("Wallet not initialized");const s=e.addressCount||1,r=[];for(let u=0;u<s;u++)try{const f=this.deriveAddress(u,!1);r.push({address:f.address,publicKey:f.publicKey,path:f.path,index:f.index})}catch{u===0&&this._identity&&r.push({address:this._identity.l1Address,publicKey:this._identity.chainPubkey,path:this.getDefaultAddressPath(),index:0});break}let a,o;this._masterKey&&(a=this._masterKey.privateKey,o=this._masterKey.chainCode||void 0);let l,c=!1;return this._mnemonic&&e.includeMnemonic!==!1&&(e.password?(l=encryptSimple(this._mnemonic,e.password),c=!0):l=this._mnemonic),a&&e.password&&(a=encryptSimple(a,e.password),c=!0),{version:"1.0",type:"sphere-wallet",createdAt:new Date().toISOString(),wallet:{masterPrivateKey:a,chainCode:o,addresses:r,isBIP32:this._derivationMode==="bip32",descriptorPath:this._basePath.replace(/^m\//,"")},mnemonic:l,encrypted:c,source:this._source,derivationMode:this._derivationMode}}exportToTxt(e={}){if(this.ensureReady(),!this._masterKey&&!this._identity)throw new Error("Wallet not initialized");const s=e.addressCount||1,r=[];for(let u=0;u<s;u++)try{const f=this.deriveAddress(u,!1);r.push({address:f.address,path:f.path,index:f.index,isChange:!1})}catch{u===0&&this._identity&&r.push({address:this._identity.l1Address,path:this.getDefaultAddressPath(),index:0,isChange:!1});break}const a=this._masterKey?.privateKey||"",o=this._masterKey?.chainCode||void 0,l=this._derivationMode==="bip32",c=this._basePath.replace(/^m\//,"");if(e.password){const u=encryptForTextFormat(a,e.password);return serializeEncryptedWalletToText({encryptedMasterKey:u,chainCode:o,descriptorPath:c,isBIP32:l,addresses:r})}return serializeWalletToText({masterPrivateKey:a,chainCode:o,descriptorPath:c,isBIP32:l,addresses:r})}static async importFromJSON(e){try{const s=JSON.parse(e.jsonContent);if(s.version!=="1.0"||s.type!=="sphere-wallet")return{success:!1,error:"Invalid wallet format"};let r=s.mnemonic,a=s.wallet.masterPrivateKey;if(s.encrypted&&e.password){if(r){const l=decryptSimple(r,e.password);if(!l)return{success:!1,error:"Failed to decrypt mnemonic - wrong password?"};r=l}if(a){const l=decryptSimple(a,e.password);if(!l)return{success:!1,error:"Failed to decrypt master key - wrong password?"};a=l}}else if(s.encrypted&&!e.password)return{success:!1,error:"Password required for encrypted wallet"};const o=s.wallet.descriptorPath?`m/${s.wallet.descriptorPath}`:DEFAULT_BASE_PATH;return r?(await pt.import({mnemonic:r,basePath:o,storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,l1:e.l1}),{success:!0,mnemonic:r}):a?(await pt.import({masterKey:a,chainCode:s.wallet.chainCode,basePath:o,derivationMode:s.derivationMode||(s.wallet.isBIP32?"bip32":"wif_hmac"),storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,l1:e.l1}),{success:!0}):{success:!1,error:"No mnemonic or master key in wallet data"}}catch(s){return{success:!1,error:s instanceof Error?s.message:"Failed to parse wallet JSON"}}}static async importFromLegacyFile(e){const{fileContent:s,fileName:r,password:a,onDecryptProgress:o}=e,l=pt.detectLegacyFileType(r,s);if(l==="unknown")return{success:!1,error:"Unknown file format"};if(l==="mnemonic"){const c=s.trim().toLowerCase().split(/\s+/).join(" ");return pt.validateMnemonic(c)?{success:!0,sphere:await pt.import({mnemonic:c,storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,nametag:e.nametag,l1:e.l1}),mnemonic:c}:{success:!1,error:"Invalid mnemonic phrase"}}if(l==="dat"){const c=s instanceof Uint8Array?s:new TextEncoder().encode(s);let u;if(a?u=await parseAndDecryptWalletDat(c,a,o):u=parseWalletDat(c),u.needsPassword&&!a)return{success:!1,needsPassword:!0,error:"Password required for encrypted wallet"};if(!u.success||!u.data)return{success:!1,error:u.error};const{masterKey:f,chainCode:d,descriptorPath:p,derivationMode:m}=u.data,y=p?`m/${p}`:DEFAULT_BASE_PATH;return{success:!0,sphere:await pt.import({masterKey:f,chainCode:d,basePath:y,derivationMode:m||(d?"bip32":"wif_hmac"),storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,nametag:e.nametag,l1:e.l1})}}if(l==="txt"){const c=typeof s=="string"?s:new TextDecoder().decode(s);let u;if(a)u=parseAndDecryptWalletText(c,a);else{if(isTextWalletEncrypted(c))return{success:!1,needsPassword:!0,error:"Password required for encrypted wallet"};u=parseWalletText(c)}if(u.needsPassword&&!a)return{success:!1,needsPassword:!0,error:"Password required for encrypted wallet"};if(!u.success||!u.data)return{success:!1,error:u.error};const{masterKey:f,chainCode:d,descriptorPath:p,derivationMode:m}=u.data,y=p?`m/${p}`:DEFAULT_BASE_PATH;return{success:!0,sphere:await pt.import({masterKey:f,chainCode:d,basePath:y,derivationMode:m||(d?"bip32":"wif_hmac"),storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,nametag:e.nametag,l1:e.l1})}}if(l==="json"){const c=typeof s=="string"?s:new TextDecoder().decode(s);let u;try{u=JSON.parse(c)}catch{return{success:!1,error:"Invalid JSON file"}}if(u.type==="sphere-wallet"){const j=await pt.importFromJSON({jsonContent:c,password:a,storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,l1:e.l1});return j.success?{success:!0,sphere:pt.getInstance(),mnemonic:j.mnemonic}:!a&&j.error?.includes("Password required")?{success:!1,needsPassword:!0,error:j.error}:{success:!1,error:j.error}}let f,d;if(u.encrypted&&typeof u.encrypted=="object"){if(!a)return{success:!1,needsPassword:!0,error:"Password required for encrypted wallet"};const j=u.encrypted;if(!j.salt||!j.masterPrivateKey)return{success:!1,error:"Invalid encrypted wallet format"};const B=decryptWithSalt(j.masterPrivateKey,a,j.salt);if(!B)return{success:!1,error:"Failed to decrypt - incorrect password?"};f=B,j.mnemonic&&(d=decryptWithSalt(j.mnemonic,a,j.salt)??void 0)}else f=u.masterPrivateKey,d=u.mnemonic;if(!f)return{success:!1,error:"No master key found in wallet JSON"};const p=u.chainCode,m=u.descriptorPath,y=u.derivationMode,E=m?`m/${m}`:y==="bip32"||!!p?"m/84'/1'/0'":DEFAULT_BASE_PATH;return d?{success:!0,sphere:await pt.import({mnemonic:d,basePath:E,storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,nametag:e.nametag,l1:e.l1}),mnemonic:d}:{success:!0,sphere:await pt.import({masterKey:f,chainCode:p,basePath:E,derivationMode:y||(p?"bip32":"wif_hmac"),storage:e.storage,transport:e.transport,oracle:e.oracle,tokenStorage:e.tokenStorage,nametag:e.nametag,l1:e.l1})}}return{success:!1,error:"Unsupported file type"}}static detectLegacyFileType(e,s){if(e.endsWith(".dat"))return"dat";const r=typeof s=="string"?s:s.length<1e3?new TextDecoder().decode(s):"";if(e.endsWith(".json"))return"json";try{const o=r.trim();if(o.startsWith("{")||o.startsWith("["))return JSON.parse(o),"json"}catch{}const a=r.trim().split(/\s+/);return(a.length===12||a.length===24)&&a.every(o=>/^[a-z]+$/.test(o.toLowerCase()))?"mnemonic":isWalletTextFormat(r)?"txt":s instanceof Uint8Array&&isSQLiteDatabase(s)?"dat":"unknown"}static isLegacyFileEncrypted(e,s){const r=pt.detectLegacyFileType(e,s);if(r==="dat"&&s instanceof Uint8Array)return isWalletDatEncrypted(s);if(r==="txt"){const a=typeof s=="string"?s:new TextDecoder().decode(s);return isTextWalletEncrypted(a)}if(r==="json")try{const a=typeof s=="string"?s:new TextDecoder().decode(s);return!!JSON.parse(a).encrypted}catch{return!1}return!1}getCurrentAddressIndex(){return this._currentAddressIndex}getNametagForAddress(e){const s=e??this._trackedAddresses.get(this._currentAddressIndex)?.addressId;if(s)return this._addressNametags.get(s)?.get(0)}getNametagsForAddress(e){const s=e??this._trackedAddresses.get(this._currentAddressIndex)?.addressId;if(!s)return;const r=this._addressNametags.get(s);return r&&r.size>0?new Map(r):void 0}getAllAddressNametags(){const e=new Map;for(const[s,r]of this._addressNametags.entries())r.size>0&&e.set(s,new Map(r));return e}getActiveAddresses(){this.ensureReady();const e=[];for(const s of this._trackedAddresses.values())if(!s.hidden){const r=this._addressNametags.get(s.addressId)?.get(0);e.push({...s,nametag:r})}return e.sort((s,r)=>s.index-r.index)}getAllTrackedAddresses(){this.ensureReady();const e=[];for(const s of this._trackedAddresses.values()){const r=this._addressNametags.get(s.addressId)?.get(0);e.push({...s,nametag:r})}return e.sort((s,r)=>s.index-r.index)}getTrackedAddress(e){this.ensureReady();const s=this._trackedAddresses.get(e);if(!s)return;const r=this._addressNametags.get(s.addressId)?.get(0);return{...s,nametag:r}}async setAddressHidden(e,s){this.ensureReady();const r=this._trackedAddresses.get(e);if(!r)throw new Error(`Address at index ${e} is not tracked. Switch to it first.`);if(r.hidden===s)return;r.hidden=s,await this.persistTrackedAddresses();const a=s?"address:hidden":"address:unhidden";this.emitEvent(a,{index:e,addressId:r.addressId})}async switchToAddress(e,s){if(this.ensureReady(),!this._masterKey)throw new Error("HD derivation requires master key with chain code. Cannot switch addresses.");if(e<0)throw new Error("Address index must be non-negative");const r=s?.nametag?this.cleanNametag(s.nametag):void 0;if(r&&!isValidNametag(r))throw new Error("Invalid nametag format. Use lowercase alphanumeric, underscore, or hyphen (3-20 chars), or a valid phone number.");const a=this.deriveAddress(e,!1),o=sha256$1(a.publicKey,"hex").slice(0,40),l=await deriveL3PredicateAddress(a.privateKey);await this.ensureAddressTracked(e);const c=getAddressId$1(l);if(r){if(await this._transport.resolveNametag?.(r))throw new Error(`Nametag @${r} is already taken`);let d=this._addressNametags.get(c);d||(d=new Map,this._addressNametags.set(c,d)),d.set(0,r)}const u=this._addressNametags.get(c)?.get(0);this._identity={privateKey:a.privateKey,chainPubkey:a.publicKey,l1Address:a.address,directAddress:l,ipnsName:"12D3KooW"+o,nametag:u},this._currentAddressIndex=e,await this._updateCachedProxyAddress(),await this._storage.set(STORAGE_KEYS_GLOBAL$1.CURRENT_ADDRESS_INDEX,e.toString()),this._storage.setIdentity(this._identity),await this._transport.setIdentity(this._identity),console.log(`[Sphere] switchToAddress(${e}): re-initializing ${this._tokenStorageProviders.size} token storage provider(s)`);for(const[f,d]of this._tokenStorageProviders.entries())console.log(`[Sphere] switchToAddress(${e}): shutdown provider=${f}`),await d.shutdown(),d.setIdentity(this._identity),console.log(`[Sphere] switchToAddress(${e}): initialize provider=${f}`),await d.initialize();if(await this.reinitializeModulesForNewAddress(),r||await this.syncIdentityWithTransport(),r){if(await this.persistAddressNametags(),!this._payments.hasNametag()){console.log(`[Sphere] Minting nametag token for @${r}...`);try{const f=await this.mintNametag(r);f.success?console.log("[Sphere] Nametag token minted successfully"):console.warn(`[Sphere] Could not mint nametag token: ${f.error}`)}catch(f){console.warn("[Sphere] Nametag token mint failed:",f)}}this.emitEvent("nametag:registered",{nametag:r,addressIndex:e})}else if(this._identity.nametag&&!this._payments.hasNametag()){console.log(`[Sphere] Nametag @${this._identity.nametag} has no token after switch, minting...`);try{const f=await this.mintNametag(this._identity.nametag);f.success?console.log("[Sphere] Nametag token minted successfully after switch"):console.warn(`[Sphere] Could not mint nametag token after switch: ${f.error}`)}catch(f){console.warn("[Sphere] Nametag token mint failed after switch:",f)}}this.emitEvent("identity:changed",{l1Address:this._identity.l1Address,directAddress:this._identity.directAddress,chainPubkey:this._identity.chainPubkey,nametag:this._identity.nametag,addressIndex:e}),console.log(`[Sphere] Switched to address ${e}:`,this._identity.l1Address)}async reinitializeModulesForNewAddress(){const e=this.emitEvent.bind(this);this._payments.initialize({identity:this._identity,storage:this._storage,tokenStorageProviders:this._tokenStorageProviders,transport:this._transport,oracle:this._oracle,emitEvent:e,chainCode:this._masterKey?.chainCode||void 0,price:this._priceProvider??void 0}),this._communications.initialize({identity:this._identity,storage:this._storage,transport:this._transport,emitEvent:e}),this._groupChat?.initialize({identity:this._identity,storage:this._storage,emitEvent:e}),this._market?.initialize({identity:this._identity,emitEvent:e}),await this._payments.load(),await this._communications.load(),await this._groupChat?.load(),await this._market?.load(),this._payments.sync().catch(s=>{console.warn("[Sphere] Post-switch sync failed:",s)})}deriveAddress(e,s=!1){return this.ensureReady(),this._deriveAddressInternal(e,s)}_deriveAddressInternal(e,s=!1){if(!this._masterKey)throw new Error("HD derivation requires master key with chain code");if(this._derivationMode==="wif_hmac")return generateAddressFromMasterKey(this._masterKey.privateKey,e);const r=deriveAddressInfo(this._masterKey,this._basePath,e,s);return{...r,address:publicKeyToAddress$1(r.publicKey,"alpha")}}deriveAddressAtPath(e){if(this.ensureReady(),!this._masterKey)throw new Error("HD derivation requires master key with chain code");const s=e.match(/\/(\d+)$/),r=s?parseInt(s[1],10):0,a=deriveKeyAtPath(this._masterKey.privateKey,this._masterKey.chainCode,e),o=getPublicKey$1(a.privateKey);return{privateKey:a.privateKey,publicKey:o,address:publicKeyToAddress$1(o,"alpha"),path:e,index:r}}deriveAddresses(e,s=!1){const r=[];for(let a=0;a<e;a++)r.push(this.deriveAddress(a,!1));if(s)for(let a=0;a<e;a++)r.push(this.deriveAddress(a,!0));return r}async scanAddresses(e={}){if(this.ensureReady(),!this._masterKey)throw new Error("Address scanning requires HD master key");const s=e.resolveNametag??(this._transport.resolveAddressInfo?async r=>{try{return(await this._transport.resolveAddressInfo(r))?.nametag??null}catch{return null}}:void 0);return scanAddressesImpl((r,a)=>this._deriveAddressInternal(r,a),{...e,resolveNametag:s})}async trackScannedAddresses(e){this.ensureReady();for(const{index:s,hidden:r,nametag:a}of e){const o=await this.ensureAddressTracked(s);if(a){let l=this._addressNametags.get(o.addressId);l||(l=new Map,this._addressNametags.set(o.addressId,l)),l.has(0)||l.set(0,a)}o.hidden!==r&&(o.hidden=r)}await this.persistTrackedAddresses(),await this.persistAddressNametags()}getStatus(){const e=(c,u,f)=>({id:c.id,name:c.name,role:u,status:c.getStatus(),connected:c.isConnected(),enabled:!this._disabledProviders.has(c.id),...f?{metadata:f}:{}});let s;const r=this._transport;if(typeof r.getRelays=="function"){const c=r.getRelays().length,u=typeof r.getConnectedRelays=="function"?r.getConnectedRelays().length:0;s={relays:{total:c,connected:u}}}const a=this._payments.l1,o=[];if(a){const c=isWebSocketConnected();o.push({id:"l1-alpha",name:"ALPHA L1",role:"l1",status:c?"connected":"disconnected",connected:c,enabled:!this._disabledProviders.has("l1-alpha")})}const l=[];return this._priceProvider&&l.push({id:this._priceProviderId,name:this._priceProvider.platform??"Price",role:"price",status:"connected",connected:!0,enabled:!this._disabledProviders.has(this._priceProviderId)}),{storage:[e(this._storage,"storage")],tokenStorage:Array.from(this._tokenStorageProviders.values()).map(c=>e(c,"token-storage")),transport:[e(this._transport,"transport",s)],oracle:[e(this._oracle,"oracle")],l1:o,price:l}}async reconnect(){await this._transport.disconnect(),await this._transport.connect()}async disableProvider(e){if(e===this._storage.id)throw new Error("Cannot disable the main storage provider");const s=this.findProviderById(e);if(!s)return!1;this._disabledProviders.add(e);try{"disable"in s&&typeof s.disable=="function"?s.disable():"shutdown"in s&&typeof s.shutdown=="function"?await s.shutdown():"disconnect"in s&&typeof s.disconnect=="function"?await s.disconnect():"clearCache"in s&&typeof s.clearCache=="function"&&s.clearCache()}catch{}return this.emitEvent("connection:changed",{provider:e,connected:!1,status:"disconnected",enabled:!1}),!0}async enableProvider(e){const s=this.findProviderById(e);if(!s)return!1;if(this._disabledProviders.delete(e),"enable"in s&&typeof s.enable=="function")return s.enable(),this.emitEvent("connection:changed",{provider:e,connected:!1,status:"disconnected",enabled:!0}),!0;if("connect"in s&&typeof s.connect=="function"||"initialize"in s&&typeof s.initialize=="function")try{"connect"in s&&typeof s.connect=="function"?await s.connect():"initialize"in s&&typeof s.initialize=="function"&&await s.initialize()}catch(a){return this.emitEvent("connection:changed",{provider:e,connected:!1,status:"error",enabled:!0,error:a instanceof Error?a.message:String(a)}),!1}return this.emitEvent("connection:changed",{provider:e,connected:!0,status:"connected",enabled:!0}),!0}isProviderEnabled(e){return!this._disabledProviders.has(e)}getDisabledProviderIds(){return this._disabledProviders}get _priceProviderId(){if(!this._priceProvider)return"price";const e=this._priceProvider;return typeof e.id=="string"?e.id:"price"}findProviderById(e){return this._storage.id===e?this._storage:this._transport.id===e?this._transport:this._oracle.id===e?this._oracle:this._tokenStorageProviders.has(e)?this._tokenStorageProviders.get(e):this._priceProvider&&this._priceProviderId===e?this._priceProvider:e==="l1-alpha"&&this._payments.l1?this._payments.l1:null}on(e,s){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Set),this.eventHandlers.get(e).add(s),()=>{this.eventHandlers.get(e)?.delete(s)}}off(e,s){this.eventHandlers.get(e)?.delete(s)}async sync(){this.ensureReady(),await this._payments.sync()}getNametag(){return this._identity?.nametag}hasNametag(){return!!this._identity?.nametag}getProxyAddress(){return this._cachedProxyAddress}async resolve(e){return this.ensureReady(),this._transport.resolve?.(e)??null}async _updateCachedProxyAddress(){const e=this._identity?.nametag;if(!e){this._cachedProxyAddress=void 0;return}const{ProxyAddress:s}=await __vitePreload(async()=>{const{ProxyAddress:a}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:a}},void 0),r=await s.fromNameTag(e);this._cachedProxyAddress=r.toString()}async registerNametag(e){this.ensureReady();const s=this.cleanNametag(e);if(!isValidNametag(s))throw new Error("Invalid nametag format. Use lowercase alphanumeric, underscore, or hyphen (3-20 chars), or a valid phone number.");if(this._identity?.nametag)throw new Error(`Nametag already registered for address ${this._currentAddressIndex}: @${this._identity.nametag}`);if(this._transport.publishIdentityBinding&&!await this._transport.publishIdentityBinding(this._identity.chainPubkey,this._identity.l1Address,this._identity.directAddress||"",s))throw new Error("Failed to register nametag. It may already be taken.");this._identity.nametag=s,await this._updateCachedProxyAddress();const r=this._trackedAddresses.get(this._currentAddressIndex)?.addressId;if(r){let a=this._addressNametags.get(r);a||(a=new Map,this._addressNametags.set(r,a)),a.set(0,s)}if(await this.persistAddressNametags(),!this._payments.hasNametag()){console.log(`[Sphere] Minting nametag token for @${s}...`);const a=await this.mintNametag(s);a.success?console.log("[Sphere] Nametag token minted successfully"):console.warn(`[Sphere] Failed to mint nametag token: ${a.error}`)}this.emitEvent("nametag:registered",{nametag:s,addressIndex:this._currentAddressIndex}),console.log(`[Sphere] Nametag registered for address ${this._currentAddressIndex}:`,s)}async persistTrackedAddresses(){const e=[];for(const s of this._trackedAddresses.values())e.push({index:s.index,hidden:s.hidden,createdAt:s.createdAt,updatedAt:s.updatedAt});await this._storage.saveTrackedAddresses(e)}async mintNametag(e){return this.ensureReady(),this._payments.mintNametag(e)}async isNametagAvailable(e){return this.ensureReady(),this._payments.isNametagAvailable(e)}async loadTrackedAddresses(){this._trackedAddresses.clear(),this._addressIdToIndex.clear();try{const e=await this._storage.loadTrackedAddresses();if(e.length>0){for(const r of e){const a=this._deriveAddressInternal(r.index,!1),o=await deriveL3PredicateAddress(a.privateKey),l=getAddressId$1(o),c={...r,addressId:l,l1Address:a.address,directAddress:o,chainPubkey:a.publicKey};this._trackedAddresses.set(c.index,c),this._addressIdToIndex.set(l,c.index)}return}const s=await this._storage.get(STORAGE_KEYS_GLOBAL$1.ADDRESS_NAMETAGS);if(s){const r=JSON.parse(s);await this.migrateFromOldNametagFormat(r),await this.persistTrackedAddresses()}}catch{}}async migrateFromOldNametagFormat(e){const s=new Map;for(const[a,o]of Object.entries(e))typeof o=="object"&&o!==null&&s.set(a,o);if(s.size===0||!this._masterKey)return;const r=20;for(let a=0;a<r&&s.size>0;a++)try{const o=this._deriveAddressInternal(a,!1),l=await deriveL3PredicateAddress(o.privateKey),c=getAddressId$1(l);if(s.has(c)){const u=s.get(c),f=new Map;for(const[m,y]of Object.entries(u))f.set(parseInt(m,10),y);f.size>0&&this._addressNametags.set(c,f);const d=Date.now(),p={index:a,addressId:c,l1Address:o.address,directAddress:l,chainPubkey:o.publicKey,nametag:f.get(0),hidden:!1,createdAt:d,updatedAt:d};this._trackedAddresses.set(a,p),this._addressIdToIndex.set(c,a),s.delete(c)}}catch{}await this.persistAddressNametags()}async ensureAddressTracked(e){const s=this._trackedAddresses.get(e);if(s)return s;const r=this._deriveAddressInternal(e,!1),a=await deriveL3PredicateAddress(r.privateKey),o=getAddressId$1(a),l=Date.now(),c=this._addressNametags.get(o)?.get(0),u={index:e,addressId:o,l1Address:r.address,directAddress:a,chainPubkey:r.publicKey,nametag:c,hidden:!1,createdAt:l,updatedAt:l};return this._trackedAddresses.set(e,u),this._addressIdToIndex.set(o,e),await this.persistTrackedAddresses(),this.emitEvent("address:activated",{address:{...u}}),u}async persistAddressNametags(){const e={};for(const[s,r]of this._addressNametags.entries()){const a={};for(const[o,l]of r.entries())a[o.toString()]=l;e[s]=a}await this._storage.set(STORAGE_KEYS_GLOBAL$1.ADDRESS_NAMETAGS,JSON.stringify(e))}async loadAddressNametags(){this._addressNametags.clear();try{const e=await this._storage.get(STORAGE_KEYS_GLOBAL$1.ADDRESS_NAMETAGS);if(!e)return;const s=JSON.parse(e);for(const[r,a]of Object.entries(s)){const o=new Map;for(const[l,c]of Object.entries(a))o.set(parseInt(l,10),c);this._addressNametags.set(r,o)}}catch{}}async syncIdentityWithTransport(){if(this._transport.publishIdentityBinding)try{const e=this._identity?.chainPubkey?.slice(2);if(e&&this._transport.resolve)try{const a=await this._transport.resolve(e);if(a){let o=a.nametag,l=!1;if(!o&&!this._identity?.nametag&&this._transport.recoverNametag)try{o=await this._transport.recoverNametag()??void 0,o&&(l=!0)}catch{}if(o&&!this._identity?.nametag){this._identity.nametag=o,await this._updateCachedProxyAddress();const c=await this.ensureAddressTracked(this._currentAddressIndex);let u=this._addressNametags.get(c.addressId);if(u||(u=new Map,this._addressNametags.set(c.addressId,u)),u.has(0)||(u.set(0,o),await this.persistAddressNametags()),this.emitEvent("nametag:recovered",{nametag:o}),l){await this._transport.publishIdentityBinding(this._identity.chainPubkey,this._identity.l1Address,this._identity.directAddress||"",o),console.log(`[Sphere] Migrated legacy binding with nametag @${o}`);return}}console.log("[Sphere] Existing binding found, skipping re-publish");return}}catch(a){console.warn("[Sphere] resolve() failed, skipping publish to avoid overwrite",a);return}const s=this._identity?.nametag;await this._transport.publishIdentityBinding(this._identity.chainPubkey,this._identity.l1Address,this._identity.directAddress||"",s||void 0)?console.log(`[Sphere] Identity binding published${s?` with nametag @${s}`:""}`):s&&console.warn(`[Sphere] Nametag @${s} is taken by another pubkey`)}catch(e){console.warn("[Sphere] Identity binding sync failed:",e)}}async recoverNametagFromTransport(){if(this._identity?.nametag)return;let e=null;if(this._transport.recoverNametag)try{e=await this._transport.recoverNametag()}catch{}if(!e&&this._transport.resolveAddressInfo&&this._identity?.l1Address)try{const s=await this._transport.resolveAddressInfo(this._identity.l1Address);s?.nametag&&(e=s.nametag)}catch{}if(e)try{this._identity&&(this._identity.nametag=e,await this._updateCachedProxyAddress());const s=await this.ensureAddressTracked(this._currentAddressIndex);let r=this._addressNametags.get(s.addressId);r||(r=new Map,this._addressNametags.set(s.addressId,r));const a=r.size;r.set(a,e),await this.persistAddressNametags(),this.emitEvent("nametag:recovered",{nametag:e})}catch{}}cleanNametag(e){const s=e.startsWith("@")?e.slice(1):e;return normalizeNametag(s)}async destroy(){this.cleanupProviderEventSubscriptions(),this._payments.destroy(),this._communications.destroy(),this._groupChat?.destroy(),this._market?.destroy(),await this._transport.disconnect(),await this._storage.disconnect(),await this._oracle.disconnect();for(const e of this._tokenStorageProviders.values())try{await e.shutdown()}catch{}this._tokenStorageProviders.clear(),this._initialized=!1,this._identity=null,this._trackedAddresses.clear(),this._addressIdToIndex.clear(),this._addressNametags.clear(),this._disabledProviders.clear(),this.eventHandlers.clear(),pt.instance===this&&(pt.instance=null)}async storeMnemonic(e,s,r){const a=this.encrypt(e);await this._storage.set(STORAGE_KEYS_GLOBAL$1.MNEMONIC,a),this._mnemonic=e,this._source="mnemonic",this._derivationMode="bip32",s&&await this._storage.set(STORAGE_KEYS_GLOBAL$1.DERIVATION_PATH,s);const o=r??DEFAULT_BASE_PATH;this._basePath=o,await this._storage.set(STORAGE_KEYS_GLOBAL$1.BASE_PATH,o),await this._storage.set(STORAGE_KEYS_GLOBAL$1.DERIVATION_MODE,this._derivationMode),await this._storage.set(STORAGE_KEYS_GLOBAL$1.WALLET_SOURCE,this._source)}async storeMasterKey(e,s,r,a,o){const l=this.encrypt(e);await this._storage.set(STORAGE_KEYS_GLOBAL$1.MASTER_KEY,l),this._source="file",this._mnemonic=null,o?this._derivationMode=o:this._derivationMode=s?"bip32":"wif_hmac",s&&await this._storage.set(STORAGE_KEYS_GLOBAL$1.CHAIN_CODE,s),r&&await this._storage.set(STORAGE_KEYS_GLOBAL$1.DERIVATION_PATH,r);const c=a??DEFAULT_BASE_PATH;this._basePath=c,await this._storage.set(STORAGE_KEYS_GLOBAL$1.BASE_PATH,c),await this._storage.set(STORAGE_KEYS_GLOBAL$1.DERIVATION_MODE,this._derivationMode),await this._storage.set(STORAGE_KEYS_GLOBAL$1.WALLET_SOURCE,this._source)}async finalizeWalletCreation(){await this._storage.set(STORAGE_KEYS_GLOBAL$1.WALLET_EXISTS,"true")}async loadIdentityFromStorage(){const e=await this._storage.get(STORAGE_KEYS_GLOBAL$1.MNEMONIC),s=await this._storage.get(STORAGE_KEYS_GLOBAL$1.MASTER_KEY),r=await this._storage.get(STORAGE_KEYS_GLOBAL$1.CHAIN_CODE),a=await this._storage.get(STORAGE_KEYS_GLOBAL$1.DERIVATION_PATH),o=await this._storage.get(STORAGE_KEYS_GLOBAL$1.BASE_PATH),l=await this._storage.get(STORAGE_KEYS_GLOBAL$1.DERIVATION_MODE),c=await this._storage.get(STORAGE_KEYS_GLOBAL$1.WALLET_SOURCE),u=await this._storage.get(STORAGE_KEYS_GLOBAL$1.CURRENT_ADDRESS_INDEX);if(this._basePath=o??DEFAULT_BASE_PATH,this._derivationMode=l??"bip32",this._source=c??"unknown",this._currentAddressIndex=u?parseInt(u,10):0,e){const p=this.decrypt(e);if(!p)throw new Error("Failed to decrypt mnemonic");this._mnemonic=p,this._source="mnemonic",await this.initializeIdentityFromMnemonic(p,a??void 0)}else if(s){const p=this.decrypt(s);if(!p)throw new Error("Failed to decrypt master key");this._mnemonic=null,this._source==="unknown"&&(this._source="file"),await this.initializeIdentityFromMasterKey(p,r??void 0,a??void 0)}else throw new Error("No wallet data found in storage");this._identity&&this._storage.setIdentity(this._identity),await this.loadTrackedAddresses(),await this.loadAddressNametags();const f=await this.ensureAddressTracked(this._currentAddressIndex),d=this._addressNametags.get(f.addressId)?.get(0);if(this._currentAddressIndex>0&&this._masterKey){const p=this._deriveAddressInternal(this._currentAddressIndex,!1),m=sha256$1(p.publicKey,"hex").slice(0,40),y=await deriveL3PredicateAddress(p.privateKey);this._identity={privateKey:p.privateKey,chainPubkey:p.publicKey,l1Address:p.address,directAddress:y,ipnsName:"12D3KooW"+m,nametag:d},this._storage.setIdentity(this._identity),console.log(`[Sphere] Restored to address ${this._currentAddressIndex}:`,this._identity.l1Address)}else this._identity&&d&&(this._identity.nametag=d);await this._updateCachedProxyAddress()}async initializeIdentityFromMnemonic(e,s){const a=`${s??DEFAULT_BASE_PATH}/0/0`,o=identityFromMnemonicSync(e),l=deriveKeyAtPath(o.privateKey,o.chainCode,a),c=getPublicKey$1(l.privateKey),u=publicKeyToAddress$1(c,"alpha"),f=sha256$1(c,"hex").slice(0,40),d=await deriveL3PredicateAddress(l.privateKey);this._identity={privateKey:l.privateKey,chainPubkey:c,l1Address:u,directAddress:d,ipnsName:"12D3KooW"+f},this._masterKey=o}async initializeIdentityFromMasterKey(e,s,r){const o=`${this._basePath}/0/0`;let l;s?(l=deriveKeyAtPath(e,s,o).privateKey,this._masterKey={privateKey:e,chainCode:s}):(l=generateAddressFromMasterKey(e,0).privateKey,this._masterKey={privateKey:e,chainCode:""});const c=getPublicKey$1(l),u=publicKeyToAddress$1(c,"alpha"),f=sha256$1(c,"hex").slice(0,40),d=await deriveL3PredicateAddress(l);this._identity={privateKey:l,chainPubkey:c,l1Address:u,directAddress:d,ipnsName:"12D3KooW"+f}}async initializeProviders(){this._storage.setIdentity(this._identity),await this._transport.setIdentity(this._identity);for(const e of this._tokenStorageProviders.values())e.setIdentity(this._identity);this._storage.isConnected()||await this._storage.connect(),this._transport.isConnected()||await this._transport.connect(),await this._oracle.initialize();for(const e of this._tokenStorageProviders.values())await e.initialize();this.subscribeToProviderEvents()}subscribeToProviderEvents(){this.cleanupProviderEventSubscriptions();const e=this._transport;if(typeof e.onEvent=="function"){const r=e.onEvent(a=>{const o=a?.type;o==="transport:connected"?this.emitConnectionChanged(this._transport.id,!0,"connected"):o==="transport:disconnected"?this.emitConnectionChanged(this._transport.id,!1,"disconnected"):o==="transport:reconnecting"?this.emitConnectionChanged(this._transport.id,!1,"connecting"):o==="transport:error"&&this.emitConnectionChanged(this._transport.id,!1,"error",a?.error)});r&&this._providerEventCleanups.push(r)}const s=this._oracle;if(typeof s.onEvent=="function"){const r=s.onEvent(a=>{const o=a?.type;o==="oracle:connected"?this.emitConnectionChanged(this._oracle.id,!0,"connected"):o==="oracle:disconnected"?this.emitConnectionChanged(this._oracle.id,!1,"disconnected"):o==="oracle:error"&&this.emitConnectionChanged(this._oracle.id,!1,"error",a?.error)});r&&this._providerEventCleanups.push(r)}for(const[r,a]of this._tokenStorageProviders)if(typeof a.onEvent=="function"){const o=a.onEvent(l=>{(l.type==="storage:error"||l.type==="sync:error")&&this.emitConnectionChanged(r,a.isConnected(),a.getStatus(),l.error)});o&&this._providerEventCleanups.push(o)}}emitConnectionChanged(e,s,r,a){this._lastProviderConnected.get(e)!==s&&(this._lastProviderConnected.set(e,s),this.emitEvent("connection:changed",{provider:e,connected:s,status:r,enabled:!this._disabledProviders.has(e),...a?{error:a}:{}}))}cleanupProviderEventSubscriptions(){for(const e of this._providerEventCleanups)try{e()}catch{}this._providerEventCleanups=[],this._lastProviderConnected.clear()}async initializeModules(){const e=this.emitEvent.bind(this);this._payments.initialize({identity:this._identity,storage:this._storage,tokenStorageProviders:this._tokenStorageProviders,transport:this._transport,oracle:this._oracle,emitEvent:e,chainCode:this._masterKey?.chainCode||void 0,price:this._priceProvider??void 0,disabledProviderIds:this._disabledProviders}),this._communications.initialize({identity:this._identity,storage:this._storage,transport:this._transport,emitEvent:e}),this._groupChat?.initialize({identity:this._identity,storage:this._storage,emitEvent:e}),this._market?.initialize({identity:this._identity,emitEvent:e}),await this._payments.load(),await this._communications.load(),await this._groupChat?.load(),await this._market?.load()}ensureReady(){if(!this._initialized)throw new Error("Sphere not initialized")}emitEvent(e,s){const r=this.eventHandlers.get(e);if(r)for(const a of r)try{a(s)}catch(o){console.error("[Sphere] Event handler error:",o)}}encrypt(e){return this._password?encryptSimple(e,this._password):e}decrypt(e){if(this._password)try{return decryptSimple(e,this._password)}catch{return null}if(validateMnemonic2(e)||/^[0-9a-f]{64}$/i.test(e))return e;try{return decryptSimple(e,DEFAULT_ENCRYPTION_KEY)}catch{return null}}};Sphere.create.bind(Sphere);Sphere.load.bind(Sphere);Sphere.import.bind(Sphere);Sphere.init.bind(Sphere);Sphere.getInstance.bind(Sphere);Sphere.exists.bind(Sphere);var DEFAULT_TOKEN_DECIMALS=18;function toSmallestUnit(t,e=DEFAULT_TOKEN_DECIMALS){if(!t)return 0n;try{const s=t.toString(),[r,a=""]=s.split("."),o=a.padEnd(e,"0").slice(0,e);return BigInt(r+o)}catch{return 0n}}function toHumanReadable(t,e=DEFAULT_TOKEN_DECIMALS){const s=t.toString().padStart(e+1,"0"),r=s.slice(0,-e)||"0",a=s.slice(-e).replace(/0+$/,"");return a?`${r}.${a}`:r}init_bech32();const SphereContext=reactExports.createContext(null);function useSphereContext(){const t=reactExports.useContext(SphereContext);if(!t)throw new Error("useSphereContext must be used within SphereProvider");return t}function useWalletStatus(){const{isLoading:t,isInitialized:e,walletExists:s,error:r}=useSphereContext();return{isLoading:t,isInitialized:e,walletExists:s,error:r}}const SPHERE_KEYS={all:["sphere"],wallet:{all:["sphere","wallet"],exists:["sphere","wallet","exists"],status:["sphere","wallet","status"]},identity:{all:["sphere","identity"],current:["sphere","identity","current"],nametag:["sphere","identity","nametag"],addresses:["sphere","identity","addresses"]},payments:{all:["sphere","payments"],tokens:{all:["sphere","payments","tokens"],list:["sphere","payments","tokens","list"],byId:t=>["sphere","payments","tokens",t]},balance:{all:["sphere","payments","balance"],byCoin:t=>["sphere","payments","balance",t],total:["sphere","payments","balance","total"]},assets:{all:["sphere","payments","assets"],list:["sphere","payments","assets","list"]},transactions:{all:["sphere","payments","transactions"],history:["sphere","payments","transactions","history"],pending:["sphere","payments","transactions","pending"]}},l1:{all:["sphere","l1"],balance:["sphere","l1","balance"],utxos:["sphere","l1","utxos"],transactions:["sphere","l1","transactions"],vesting:["sphere","l1","vesting"],blockHeight:["sphere","l1","blockHeight"]},communications:{all:["sphere","communications"],conversations:["sphere","communications","conversations"]},market:{all:["sphere","market"],prices:["sphere","market","prices"],registry:["sphere","market","registry"]}};function useIdentity(){const{sphere:t}=useSphereContext(),e=useQuery({queryKey:SPHERE_KEYS.identity.current,queryFn:()=>t?.identity?{...t.identity}:null,enabled:!!t,staleTime:1/0}),s=e.data??null;return{identity:s,isLoading:e.isLoading,error:e.error,directAddress:s?.directAddress??null,l1Address:s?.l1Address??null,nametag:s?.nametag??null,displayName:s?.nametag?`@${s.nametag}`:s?.directAddress?.slice(0,12)??"Unknown",shortAddress:s?.directAddress?.slice(0,12)??""}}var bufferExports=requireBuffer$1();class StateTransitionClient{client;constructor(e){this.client=e}async submitMintCommitment(e){return this.client.submitCommitment(e.requestId,await e.transactionData.calculateHash(),e.authenticator)}async submitTransferCommitment(e){if(!await(await PredicateEngineService.createPredicate(e.transactionData.sourceState.predicate)).isOwner(e.authenticator.publicKey))throw new Error("Ownership verification failed: Authenticator does not match source state predicate.");return this.client.submitCommitment(e.requestId,await e.transactionData.calculateHash(),e.authenticator)}finalizeTransaction(e,s,r,a,o=[]){return s.update(e,r,a,o)}getInclusionProof(e){return this.client.getInclusionProof(e)}async isStateSpent(e,s){const a=await(await this.getInclusionProof(s)).inclusionProof.verify(e,s);switch(a){case InclusionProofVerificationStatus.OK:return!0;case InclusionProofVerificationStatus.PATH_NOT_INCLUDED:return!1;default:throw new Error(`Inclusion proof verification failed with status ${a}`)}}async isTokenStateSpent(e,s,r){const a=new Uint8Array(r);if(!await(await PredicateEngineService.createPredicate(s.state.predicate)).isOwner(a))throw new Error("Given key is not owner of the token.");return this.isStateSpent(e,await RequestId.create(a,await s.state.calculateHash()))}async isMinted(e,s){return this.isStateSpent(e,await RequestId.create(await MintSigningService.create(s).then(r=>r.publicKey),await MintTransactionState.create(s)))}}class InclusionProofResponse{inclusionProof;constructor(e){this.inclusionProof=e,this.inclusionProof=e}static isJSON(e){return typeof e=="object"&&e!==null&&"inclusionProof"in e}static fromJSON(e){if(!InclusionProofResponse.isJSON(e))throw new InvalidJsonStructureError;return new InclusionProofResponse(InclusionProof.fromJSON(e.inclusionProof))}}class JsonRpcDataError{code;message;name="JsonRpcError";constructor({code:e,message:s}){this.code=e,this.message=s}toString(){return`{ code: ${this.code}, message: ${this.message} }`}}class JsonRpcHttpTransport{url;constructor(e){this.url=e}async request(e,s,r=new Headers){r.set("Content-Type","application/json");const a=await fetch(this.url,{body:JSON.stringify({id:v4(),jsonrpc:"2.0",method:e,params:s}),headers:r,method:"POST"});if(!a.ok)throw new JsonRpcNetworkError(a.status,await a.text());const o=await a.json();if(o.error)throw new JsonRpcDataError(o.error);return o.result}}class SubmitCommitmentRequest{requestId;transactionHash;authenticator;receipt;constructor(e,s,r,a){this.requestId=e,this.transactionHash=s,this.authenticator=r,this.receipt=a}static fromJSON(e){if(!SubmitCommitmentRequest.isJSON(e))throw new InvalidJsonStructureError;return new SubmitCommitmentRequest(RequestId.fromJSON(e.requestId),DataHash.fromJSON(e.transactionHash),Authenticator.fromJSON(e.authenticator),e.receipt)}static isJSON(e){return typeof e=="object"&&e!==null&&"authenticator"in e&&typeof e.authenticator=="object"&&e.authenticator!==null&&"requestId"in e&&typeof e.requestId=="string"&&"transactionHash"in e&&typeof e.transactionHash=="string"}toJSON(){return{authenticator:this.authenticator.toJSON(),receipt:this.receipt,requestId:this.requestId.toJSON(),transactionHash:this.transactionHash.toJSON()}}}var SubmitCommitmentStatus;(function(t){t.SUCCESS="SUCCESS",t.AUTHENTICATOR_VERIFICATION_FAILED="AUTHENTICATOR_VERIFICATION_FAILED",t.REQUEST_ID_MISMATCH="REQUEST_ID_MISMATCH",t.REQUEST_ID_EXISTS="REQUEST_ID_EXISTS"})(SubmitCommitmentStatus||(SubmitCommitmentStatus={}));class Request{service;method;requestId;stateHash;transactionHash;hash;constructor(e,s,r,a,o,l){this.service=e,this.method=s,this.requestId=r,this.stateHash=a,this.transactionHash=o,this.hash=l}static async create(e,s,r,a,o){const l=CborSerializer.encodeArray(CborSerializer.encodeTextString(e),CborSerializer.encodeTextString(s),r.toCBOR(),a.toCBOR(),o.toCBOR()),c=await new DataHasher(HashAlgorithm.SHA256).update(l).digest();return new Request(e,s,r,a,o,c)}toCBOR(){return CborSerializer.encodeArray(CborSerializer.encodeTextString(this.service),CborSerializer.encodeTextString(this.method),this.requestId.toCBOR(),this.stateHash.toCBOR(),this.transactionHash.toCBOR())}toJSON(){return{method:this.method,requestId:this.requestId.toJSON(),service:this.service,stateHash:this.stateHash.toJSON(),transactionHash:this.transactionHash.toJSON()}}toString(){return dedent`
      Request
        Service: ${this.service}
        Method: ${this.method}
        Request ID: ${this.requestId.toString()}
        State Hash: ${this.stateHash.toString()}
        Transaction Hash: ${this.transactionHash.toString()}
      `}}class SubmitCommitmentResponse{status;receipt;constructor(e,s){this.status=e,this.receipt=s}static async fromJSON(e){if(!SubmitCommitmentResponse.isJSON(e))throw new InvalidJsonStructureError;let s;if(e.request&&e.algorithm&&e.publicKey&&e.signature){const r=await Request.create(e.request.service,e.request.method,RequestId.fromJSON(e.request.requestId),DataHash.fromJSON(e.request.stateHash),DataHash.fromJSON(e.request.transactionHash));s={algorithm:e.algorithm,publicKey:e.publicKey,request:r,signature:Signature.fromJSON(e.signature)}}return new SubmitCommitmentResponse(e.status,s)}static isJSON(e){return typeof e=="object"&&e!==null&&"status"in e&&typeof e.status=="string"}toJSON(){return{algorithm:this.receipt?.algorithm,publicKey:this.receipt?.publicKey,request:this.receipt?.request.toJSON(),signature:this.receipt?.signature.toJSON(),status:this.status}}async addSignedReceipt(e,s,r,a){const o=await Request.create("aggregator","submit_commitment",e,s,r),l=await a.sign(o.hash);this.receipt={algorithm:a.algorithm,publicKey:HexConverter.encode(a.publicKey),request:o,signature:l}}verifyReceipt(){return this.receipt?SigningService.verifyWithPublicKey(this.receipt.request.hash,this.receipt.signature.bytes,HexConverter.decode(this.receipt.publicKey)):Promise.resolve(!1)}}class AggregatorClient{key;transport;constructor(e,s=null){this.key=s,this.transport=new JsonRpcHttpTransport(e)}async submitCommitment(e,s,r,a=!1){const o=new SubmitCommitmentRequest(e,s,r,a),l=await this.transport.request("submit_commitment",o.toJSON(),this.key?new Headers([["X-API-Key",this.key]]):void 0);return SubmitCommitmentResponse.fromJSON(l)}async getInclusionProof(e){const s={requestId:e.toJSON()};return InclusionProofResponse.fromJSON(await this.transport.request("get_inclusion_proof",s))}async getBlockHeight(){const e=await this.transport.request("get_block_height",{});if(e&&typeof e=="object"&&"blockNumber"in e&&(typeof e.blockNumber=="string"||typeof e.blockNumber=="number"||typeof e.blockNumber=="bigint"))return BigInt(e.blockNumber);throw new Error("Invalid response format for block height")}}class RootTrustBaseNodeInfo{nodeId;_signingKey;stakedAmount;constructor(e,s,r){this.nodeId=e,this._signingKey=s,this.stakedAmount=r,this._signingKey=new Uint8Array(s)}get signingKey(){return new Uint8Array(this._signingKey)}static isJSON(e){return typeof e=="object"&&e!==null&&"nodeId"in e&&"sigKey"in e&&"stake"in e}static fromJSON(e){if(!RootTrustBaseNodeInfo.isJSON(e))throw new InvalidJsonStructureError;return new RootTrustBaseNodeInfo(e.nodeId,HexConverter.decode(e.sigKey),BigInt(e.stake))}}class RootTrustBase{version;networkId;epoch;epochStartRound;_rootNodes;quorumThreshold;_stateHash;_changeRecordHash;_previousEntryHash;_signatures;constructor(e,s,r,a,o,l,c,u,f,d){this.version=e,this.networkId=s,this.epoch=r,this.epochStartRound=a,this._rootNodes=o,this.quorumThreshold=l,this._stateHash=c,this._changeRecordHash=u,this._previousEntryHash=f,this._signatures=d,this._rootNodes=o.slice(),this._stateHash=new Uint8Array(c),this._changeRecordHash=u?new Uint8Array(u):null,this._previousEntryHash=f?new Uint8Array(f):null,this._signatures=new Map(Array.from(d.entries()).map(p=>[p[0],new Uint8Array(p[1])]))}get rootNodes(){return this._rootNodes.slice()}get stateHash(){return new Uint8Array(this._stateHash)}get changeRecordHash(){return this._changeRecordHash?new Uint8Array(this._changeRecordHash):null}get previousEntryHash(){return this._previousEntryHash?new Uint8Array(this._previousEntryHash):null}get signatures(){return new Map(Array.from(this._signatures.entries()).map(e=>[e[0],new Uint8Array(e[1])]))}static isJSON(e){return typeof e=="object"&&e!==null&&"version"in e&&"networkId"in e&&"epoch"in e&&"epochStartRound"in e&&"rootNodes"in e&&Array.isArray(e.rootNodes)&&"quorumThreshold"in e&&"stateHash"in e&&"changeRecordHash"in e&&"previousEntryHash"in e&&"signatures"in e&&typeof e.signatures=="object"&&e.signatures!==null}static fromJSON(e){if(!RootTrustBase.isJSON(e))throw new InvalidJsonStructureError;return new RootTrustBase(BigInt(e.version),e.networkId,BigInt(e.epoch),BigInt(e.epochStartRound),e.rootNodes.map(s=>RootTrustBaseNodeInfo.fromJSON(s)),BigInt(e.quorumThreshold),HexConverter.decode(e.stateHash),e.changeRecordHash?HexConverter.decode(e.changeRecordHash):null,e.previousEntryHash?HexConverter.decode(e.previousEntryHash):null,new Map(Object.entries(e.signatures).map(([s,r])=>[s,HexConverter.decode(r)])))}}var STORAGE_KEYS_GLOBAL={MNEMONIC:"mnemonic",MASTER_KEY:"master_key",CHAIN_CODE:"chain_code",DERIVATION_PATH:"derivation_path",BASE_PATH:"base_path",DERIVATION_MODE:"derivation_mode",WALLET_SOURCE:"wallet_source",WALLET_EXISTS:"wallet_exists",CURRENT_ADDRESS_INDEX:"current_address_index",ADDRESS_NAMETAGS:"address_nametags",TRACKED_ADDRESSES:"tracked_addresses",LAST_WALLET_EVENT_TS:"last_wallet_event_ts",GROUP_CHAT_GROUPS:"group_chat_groups",GROUP_CHAT_MESSAGES:"group_chat_messages",GROUP_CHAT_MEMBERS:"group_chat_members",GROUP_CHAT_PROCESSED_EVENTS:"group_chat_processed_events",GROUP_CHAT_RELAY_URL:"group_chat_relay_url",TOKEN_REGISTRY_CACHE:"token_registry_cache",TOKEN_REGISTRY_CACHE_TS:"token_registry_cache_ts",PRICE_CACHE:"price_cache",PRICE_CACHE_TS:"price_cache_ts"},STORAGE_KEYS_ADDRESS={PENDING_TRANSFERS:"pending_transfers",OUTBOX:"outbox",CONVERSATIONS:"conversations",MESSAGES:"messages",TRANSACTION_HISTORY:"transaction_history",PENDING_V5_TOKENS:"pending_v5_tokens"};function getAddressId(t){let e=t;e.startsWith("DIRECT://")?e=e.slice(9):e.startsWith("DIRECT:")&&(e=e.slice(7));const s=e.slice(0,6).toLowerCase(),r=e.slice(-6).toLowerCase();return`DIRECT_${s}_${r}`}var DEFAULT_NOSTR_RELAYS=["wss://relay.unicity.network","wss://relay.damus.io","wss://nos.lol","wss://relay.nostr.band"],NOSTR_EVENT_KINDS={DIRECT_MESSAGE:4,TOKEN_TRANSFER:31113,PAYMENT_REQUEST:31115,PAYMENT_REQUEST_RESPONSE:31116,NAMETAG_BINDING:30078,BROADCAST:1},DEFAULT_AGGREGATOR_URL="https://aggregator.unicity.network/rpc",DEV_AGGREGATOR_URL="https://dev-aggregator.dyndns.org/rpc",TEST_AGGREGATOR_URL="https://goggregator-test.unicity.network",DEFAULT_AGGREGATOR_TIMEOUT=3e4,DEFAULT_AGGREGATOR_API_KEY="sk_06365a9c44654841a366068bcfc68986",DEFAULT_IPFS_GATEWAYS=["https://unicity-ipfs1.dyndns.org"],UNICITY_IPFS_NODES=[{host:"unicity-ipfs1.dyndns.org",peerId:"12D3KooWDKJqEMAhH4nsSSiKtK1VLcas5coUqSPZAfbWbZpxtL4u",httpPort:9080,httpsPort:443}];function getIpfsGatewayUrls(t){return UNICITY_IPFS_NODES.map(e=>`https://${e.host}`)}var DEFAULT_ELECTRUM_URL="wss://fulcrum.alpha.unicity.network:50004",TEST_ELECTRUM_URL="wss://fulcrum.alpha.testnet.unicity.network:50004",TOKEN_REGISTRY_URL="https://raw.githubusercontent.com/unicitynetwork/unicity-ids/refs/heads/main/unicity-ids.testnet.json",TOKEN_REGISTRY_REFRESH_INTERVAL=36e5,TEST_NOSTR_RELAYS=["wss://nostr-relay.testnet.unicity.network"],DEFAULT_GROUP_RELAYS=["wss://sphere-relay.unicity.network"],NETWORKS={mainnet:{name:"Mainnet",aggregatorUrl:DEFAULT_AGGREGATOR_URL,nostrRelays:DEFAULT_NOSTR_RELAYS,ipfsGateways:DEFAULT_IPFS_GATEWAYS,electrumUrl:DEFAULT_ELECTRUM_URL,groupRelays:DEFAULT_GROUP_RELAYS,tokenRegistryUrl:TOKEN_REGISTRY_URL},testnet:{name:"Testnet",aggregatorUrl:TEST_AGGREGATOR_URL,nostrRelays:TEST_NOSTR_RELAYS,ipfsGateways:DEFAULT_IPFS_GATEWAYS,electrumUrl:TEST_ELECTRUM_URL,groupRelays:DEFAULT_GROUP_RELAYS,tokenRegistryUrl:TOKEN_REGISTRY_URL},dev:{name:"Development",aggregatorUrl:DEV_AGGREGATOR_URL,nostrRelays:TEST_NOSTR_RELAYS,ipfsGateways:DEFAULT_IPFS_GATEWAYS,electrumUrl:TEST_ELECTRUM_URL,groupRelays:DEFAULT_GROUP_RELAYS,tokenRegistryUrl:TOKEN_REGISTRY_URL}},TIMEOUTS={WEBSOCKET_CONNECT:1e4,NOSTR_RECONNECT_DELAY:3e3,MAX_RECONNECT_ATTEMPTS:5,PROOF_POLL_INTERVAL:1e3},DB_NAME="sphere-storage",DB_VERSION$1=1,STORE_NAME="kv",IndexedDBStorageProvider=class{id="indexeddb-storage";name="IndexedDB Storage";type="local";description="Browser IndexedDB for large-capacity persistence";prefix;dbName;debug;identity=null;status="disconnected";db=null;constructor(t){this.prefix=t?.prefix??"sphere_",this.dbName=t?.dbName??DB_NAME,this.debug=t?.debug??!1}async connect(){if(!(this.status==="connected"&&this.db)){this.status="connecting",console.log(`[IndexedDBStorage] connect: opening db=${this.dbName}`);try{this.db=await Promise.race([this.openDatabase(),new Promise((t,e)=>setTimeout(()=>e(new Error("IndexedDB open timed out after 5s")),5e3))]),this.status="connected",console.log(`[IndexedDBStorage] connect: connected to db=${this.dbName}`)}catch(t){throw this.status="error",new Error(`IndexedDB not available: ${t}`)}}}async disconnect(){console.log(`[IndexedDBStorage] disconnect: closing db=${this.dbName}, wasConnected=${!!this.db}`),this.db&&(this.db.close(),this.db=null),this.status="disconnected"}isConnected(){return this.status==="connected"&&this.db!==null}getStatus(){return this.status}setIdentity(t){this.identity=t,this.log("Identity set:",t.l1Address)}async get(t){this.ensureConnected();const e=this.getFullKey(t);return(await this.idbGet(e))?.v??null}async set(t,e){this.ensureConnected();const s=this.getFullKey(t);await this.idbPut({k:s,v:e})}async remove(t){this.ensureConnected();const e=this.getFullKey(t);await this.idbDelete(e)}async has(t){this.ensureConnected();const e=this.getFullKey(t);return await this.idbCount(e)>0}async keys(t){this.ensureConnected();const e=this.getFullKey(""),s=t?this.getFullKey(t):e,r=await this.idbGetAll(),a=[];for(const o of r)o.k.startsWith(s)&&a.push(o.k.slice(e.length));return a}async clear(t){if(!t){console.log(`[IndexedDBStorage] clear: starting, db=${this.dbName}, wasConnected=${!!this.db}`),this.db&&(this.db.close(),this.db=null),this.status="disconnected",await new Promise(s=>{try{const r=indexedDB.deleteDatabase(this.dbName);r.onsuccess=()=>{console.log(`[IndexedDBStorage] clear: deleted db=${this.dbName}`),s()},r.onerror=()=>{console.warn(`[IndexedDBStorage] clear: error deleting db=${this.dbName}`,r.error),s()},r.onblocked=()=>{console.warn(`[IndexedDBStorage] clear: deleteDatabase blocked for db=${this.dbName}`),s()}}catch{s()}}),this.log("Database deleted:",this.dbName);return}this.ensureConnected();const e=await this.keys(t);for(const s of e)await this.remove(s)}async saveTrackedAddresses(t){await this.set(STORAGE_KEYS_GLOBAL.TRACKED_ADDRESSES,JSON.stringify({version:1,addresses:t}))}async loadTrackedAddresses(){const t=await this.get(STORAGE_KEYS_GLOBAL.TRACKED_ADDRESSES);if(!t)return[];try{return JSON.parse(t).addresses??[]}catch{return[]}}async getJSON(t){const e=await this.get(t);if(!e)return null;try{return JSON.parse(e)}catch{return null}}async setJSON(t,e){await this.set(t,JSON.stringify(e))}getFullKey(t){if(Object.values(STORAGE_KEYS_ADDRESS).includes(t)&&this.identity?.directAddress){const s=getAddressId(this.identity.directAddress);return`${this.prefix}${s}_${t}`}return`${this.prefix}${t}`}ensureConnected(){if(this.status!=="connected"||!this.db)throw new Error("IndexedDBStorageProvider not connected")}openDatabase(){return new Promise((t,e)=>{const s=indexedDB.open(this.dbName,DB_VERSION$1);s.onerror=()=>e(s.error),s.onsuccess=()=>t(s.result),s.onblocked=()=>{console.warn("[IndexedDBStorageProvider] open blocked by another connection")},s.onupgradeneeded=r=>{const a=r.target.result;a.objectStoreNames.contains(STORE_NAME)||a.createObjectStore(STORE_NAME,{keyPath:"k"})}})}idbGet(t){return new Promise((e,s)=>{const o=this.db.transaction(STORE_NAME,"readonly").objectStore(STORE_NAME).get(t);o.onerror=()=>s(o.error),o.onsuccess=()=>e(o.result??void 0)})}idbPut(t){return new Promise((e,s)=>{const o=this.db.transaction(STORE_NAME,"readwrite").objectStore(STORE_NAME).put(t);o.onerror=()=>s(o.error),o.onsuccess=()=>e()})}idbDelete(t){return new Promise((e,s)=>{const o=this.db.transaction(STORE_NAME,"readwrite").objectStore(STORE_NAME).delete(t);o.onerror=()=>s(o.error),o.onsuccess=()=>e()})}idbCount(t){return new Promise((e,s)=>{const o=this.db.transaction(STORE_NAME,"readonly").objectStore(STORE_NAME).count(t);o.onerror=()=>s(o.error),o.onsuccess=()=>e(o.result)})}idbGetAll(){return new Promise((t,e)=>{const a=this.db.transaction(STORE_NAME,"readonly").objectStore(STORE_NAME).getAll();a.onerror=()=>e(a.error),a.onsuccess=()=>t(a.result??[])})}idbClear(){return new Promise((t,e)=>{const a=this.db.transaction(STORE_NAME,"readwrite").objectStore(STORE_NAME).clear();a.onerror=()=>e(a.error),a.onsuccess=()=>t()})}log(...t){this.debug&&console.log("[IndexedDBStorageProvider]",...t)}};function createIndexedDBStorageProvider(t){return new IndexedDBStorageProvider(t)}var DB_NAME2="sphere-token-storage",DB_VERSION2=1,STORE_TOKENS="tokens",STORE_META="meta",IndexedDBTokenStorageProvider=class{id="indexeddb-token-storage";name="IndexedDB Token Storage";type="local";dbNamePrefix;dbName;db=null;status="disconnected";identity=null;constructor(t){this.dbNamePrefix=t?.dbNamePrefix??DB_NAME2,this.dbName=this.dbNamePrefix}setIdentity(t){if(this.identity=t,t.directAddress){const e=getAddressId(t.directAddress);this.dbName=`${this.dbNamePrefix}-${e}`}console.log(`[IndexedDBTokenStorage] setIdentity  db=${this.dbName}`)}async initialize(){try{return this.db&&(console.log(`[IndexedDBTokenStorage] initialize: closing existing connection before re-open (db=${this.dbName})`),this.db.close(),this.db=null),console.log(`[IndexedDBTokenStorage] initialize: opening db=${this.dbName}`),this.db=await this.openDatabase(),this.status="connected",console.log(`[IndexedDBTokenStorage] initialize: connected to db=${this.dbName}`),!0}catch(t){return console.error("[IndexedDBTokenStorage] Failed to initialize:",t),this.status="error",!1}}async shutdown(){console.log(`[IndexedDBTokenStorage] shutdown: closing db=${this.dbName}, wasConnected=${!!this.db}`),this.db&&(this.db.close(),this.db=null),this.status="disconnected"}async connect(){await this.initialize()}async disconnect(){await this.shutdown()}isConnected(){return this.status==="connected"&&this.db!==null}getStatus(){return this.status}async load(){if(!this.db)return console.warn(`[IndexedDBTokenStorage] load: db not initialized (db=${this.dbName})`),{success:!1,error:"Database not initialized",source:"local",timestamp:Date.now()};try{const t={_meta:{version:1,address:this.identity?.l1Address??"",formatVersion:"2.0",updatedAt:Date.now()}},e=await this.getFromStore(STORE_META,"meta");e&&(t._meta=e);const s=await this.getAllFromStore(STORE_TOKENS);for(const u of s)if(!(u.id.startsWith("token-")||u.id.startsWith("nametag-")))if(u.id.startsWith("archived-"))t[u.id]=u.data;else{const f=`_${u.id}`;t[f]=u.data}const r=await this.getFromStore(STORE_META,"tombstones");r&&(t._tombstones=r);const a=await this.getFromStore(STORE_META,"outbox");a&&(t._outbox=a);const o=await this.getFromStore(STORE_META,"sent");o&&(t._sent=o);const l=await this.getFromStore(STORE_META,"invalid");l&&(t._invalid=l);const c=Object.keys(t).filter(u=>u.startsWith("_")&&!["_meta","_tombstones","_outbox","_sent","_invalid"].includes(u));return console.log(`[IndexedDBTokenStorage] load: db=${this.dbName}, tokens=${c.length}`),{success:!0,data:t,source:"local",timestamp:Date.now()}}catch(t){return console.error(`[IndexedDBTokenStorage] load failed: db=${this.dbName}`,t),{success:!1,error:t instanceof Error?t.message:"Unknown error",source:"local",timestamp:Date.now()}}}async save(t){if(!this.db)return console.warn(`[IndexedDBTokenStorage] save: db not initialized (db=${this.dbName})`),{success:!1,error:"Database not initialized",timestamp:Date.now()};try{const e=Object.keys(t).filter(a=>a.startsWith("_")&&!["_meta","_tombstones","_outbox","_sent","_invalid"].includes(a)),s=Object.keys(t).filter(a=>a.startsWith("archived-"));console.log(`[IndexedDBTokenStorage] save: db=${this.dbName}, tokens=${e.length}, archived=${s.length}, tombstones=${t._tombstones?.length??0}`),await this.putToStore(STORE_META,"meta",t._meta),t._tombstones&&await this.putToStore(STORE_META,"tombstones",t._tombstones),t._outbox&&await this.putToStore(STORE_META,"outbox",t._outbox),t._sent&&await this.putToStore(STORE_META,"sent",t._sent),t._invalid&&await this.putToStore(STORE_META,"invalid",t._invalid);const r=["_meta","_tombstones","_outbox","_sent","_invalid"];for(const[a,o]of Object.entries(t))if(!r.includes(a))if(a.startsWith("_")){const l=a.slice(1);await this.putToStore(STORE_TOKENS,l,{id:l,data:o})}else a.startsWith("archived-")&&await this.putToStore(STORE_TOKENS,a,{id:a,data:o});if(t._tombstones)for(const a of t._tombstones)await this.deleteFromStore(STORE_TOKENS,a.tokenId);return{success:!0,timestamp:Date.now()}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error",timestamp:Date.now()}}}async sync(t){const e=await this.save(t);return{success:e.success,merged:t,added:0,removed:0,conflicts:0,error:e.error}}async exists(){return this.db?await this.getFromStore(STORE_META,"meta")!==null:!1}async clear(){try{console.log(`[IndexedDBTokenStorage] clear: starting, db=${this.dbName}, wasConnected=${!!this.db}`),this.db&&(this.db.close(),this.db=null),this.status="disconnected";const t=[this.dbName];if(typeof indexedDB.databases=="function")try{const e=await Promise.race([indexedDB.databases(),new Promise((s,r)=>setTimeout(()=>r(new Error("timeout")),1500))]);for(const s of e)s.name&&s.name.startsWith(this.dbNamePrefix)&&s.name!==this.dbName&&t.push(s.name)}catch{}return console.log(`[IndexedDBTokenStorage] clear: deleting ${t.length} database(s):`,t),await Promise.all(t.map(e=>new Promise(s=>{try{const r=indexedDB.deleteDatabase(e);r.onsuccess=()=>{console.log(`[IndexedDBTokenStorage] clear: deleted db=${e}`),s()},r.onerror=()=>{console.warn(`[IndexedDBTokenStorage] clear: error deleting db=${e}`,r.error),s()},r.onblocked=()=>{console.warn(`[IndexedDBTokenStorage] clear: deleteDatabase blocked for db=${e}`),s()}}catch{s()}}))),console.log("[IndexedDBTokenStorage] clear: done"),!0}catch(t){return console.warn("[IndexedDBTokenStorage] clear() failed:",t),!1}}openDatabase(){return new Promise((t,e)=>{const s=indexedDB.open(this.dbName,DB_VERSION2);s.onerror=()=>{e(s.error)},s.onsuccess=()=>{t(s.result)},s.onupgradeneeded=r=>{const a=r.target.result;a.objectStoreNames.contains(STORE_TOKENS)||a.createObjectStore(STORE_TOKENS,{keyPath:"id"}),a.objectStoreNames.contains(STORE_META)||a.createObjectStore(STORE_META)}})}getFromStore(t,e){return new Promise((s,r)=>{if(!this.db){s(null);return}const l=this.db.transaction(t,"readonly").objectStore(t).get(e);l.onerror=()=>r(l.error),l.onsuccess=()=>s(l.result??null)})}getAllFromStore(t){return new Promise((e,s)=>{if(!this.db){e([]);return}const o=this.db.transaction(t,"readonly").objectStore(t).getAll();o.onerror=()=>s(o.error),o.onsuccess=()=>e(o.result??[])})}putToStore(t,e,s){return new Promise((r,a)=>{if(!this.db){a(new Error("Database not initialized"));return}const l=this.db.transaction(t,"readwrite").objectStore(t),c=t===STORE_META?l.put(s,e):l.put(s);c.onerror=()=>a(c.error),c.onsuccess=()=>r()})}deleteFromStore(t,e){return new Promise((s,r)=>{if(!this.db){s();return}const l=this.db.transaction(t,"readwrite").objectStore(t).delete(e);l.onerror=()=>r(l.error),l.onsuccess=()=>s()})}clearStore(t){return new Promise((e,s)=>{if(!this.db){e();return}const o=this.db.transaction(t,"readwrite").objectStore(t).clear();o.onerror=()=>s(o.error),o.onsuccess=()=>e()})}};function createIndexedDBTokenStorageProvider(t){return new IndexedDBTokenStorageProvider(t)}function isBytes(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function anumber(t,e=""){if(!Number.isSafeInteger(t)||t<0){const s=e&&`"${e}" `;throw new Error(`${s}expected integer >= 0, got ${t}`)}}function abytes(t,e,s=""){const r=isBytes(t),a=t?.length,o=e!==void 0;if(!r||o&&a!==e){const l=s&&`"${s}" `,c=o?` of length ${e}`:"",u=r?`length=${a}`:`type=${typeof t}`;throw new Error(l+"expected Uint8Array"+c+", got "+u)}return t}function ahash(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash must wrapped by utils.createHasher");anumber(t.outputLen),anumber(t.blockLen)}function aexists(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aoutput(t,e){abytes(t,void 0,"digestInto() output");const s=e.outputLen;if(t.length<s)throw new Error('"digestInto() output" expected to be of length >='+s)}function clean(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function createView(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rotr(t,e){return t<<32-e|t>>>e}var hasHexBuiltin=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(t){if(abytes(t),hasHexBuiltin)return t.toHex();let e="";for(let s=0;s<t.length;s++)e+=hexes[t[s]];return e}var asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(t){if(t>=asciis._0&&t<=asciis._9)return t-asciis._0;if(t>=asciis.A&&t<=asciis.F)return t-(asciis.A-10);if(t>=asciis.a&&t<=asciis.f)return t-(asciis.a-10)}function hexToBytes(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hasHexBuiltin)return Uint8Array.fromHex(t);const e=t.length,s=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(s);for(let a=0,o=0;a<s;a++,o+=2){const l=asciiToBase16(t.charCodeAt(o)),c=asciiToBase16(t.charCodeAt(o+1));if(l===void 0||c===void 0){const u=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}r[a]=l*16+c}return r}function createHasher(t,e={}){const s=(a,o)=>t(o).update(a).digest(),r=t(void 0);return s.outputLen=r.outputLen,s.blockLen=r.blockLen,s.create=a=>t(a),Object.assign(s,e),Object.freeze(s)}var oidNist=t=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,t])}),_HMAC=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(t,e){if(ahash(t),abytes(e,void 0,"key"),this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,r=new Uint8Array(s);r.set(e.length>s?t.create().update(e).digest():e);for(let a=0;a<r.length;a++)r[a]^=54;this.iHash.update(r),this.oHash=t.create();for(let a=0;a<r.length;a++)r[a]^=106;this.oHash.update(r),clean(r)}update(t){return aexists(this),this.iHash.update(t),this}digestInto(t){aexists(this),abytes(t,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||=Object.create(Object.getPrototypeOf(this),{});const{oHash:e,iHash:s,finished:r,destroyed:a,blockLen:o,outputLen:l}=this;return t=t,t.finished=r,t.destroyed=a,t.blockLen=o,t.outputLen=l,t.oHash=e._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},hmac=(t,e,s)=>new _HMAC(t,e).update(s).digest();hmac.create=(t,e)=>new _HMAC(t,e);function extract(t,e,s){return ahash(t),s===void 0&&(s=new Uint8Array(t.outputLen)),hmac(t,s,e)}var HKDF_COUNTER=Uint8Array.of(0),EMPTY_BUFFER=Uint8Array.of();function expand(t,e,s,r=32){ahash(t),anumber(r,"length");const a=t.outputLen;if(r>255*a)throw new Error("Length must be <= 255*HashLen");const o=Math.ceil(r/a);s===void 0?s=EMPTY_BUFFER:abytes(s,void 0,"info");const l=new Uint8Array(o*a),c=hmac.create(t,e),u=c._cloneInto(),f=new Uint8Array(c.outputLen);for(let d=0;d<o;d++)HKDF_COUNTER[0]=d+1,u.update(d===0?EMPTY_BUFFER:f).update(s).update(HKDF_COUNTER).digestInto(f),l.set(f,a*d),c._cloneInto(u);return c.destroy(),u.destroy(),clean(f,HKDF_COUNTER),l.slice(0,r)}var hkdf=(t,e,s,r,a)=>expand(t,extract(t,e,s),r,a);function Chi(t,e,s){return t&e^~t&s}function Maj(t,e,s){return t&e^t&s^e&s}var HashMD=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(t,e,s,r){this.blockLen=t,this.outputLen=e,this.padOffset=s,this.isLE=r,this.buffer=new Uint8Array(t),this.view=createView(this.buffer)}update(t){aexists(this),abytes(t);const{view:e,buffer:s,blockLen:r}=this,a=t.length;for(let o=0;o<a;){const l=Math.min(r-this.pos,a-o);if(l===r){const c=createView(t);for(;r<=a-o;o+=r)this.process(c,o);continue}s.set(t.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){aexists(this),aoutput(t,this),this.finished=!0;const{buffer:e,view:s,blockLen:r,isLE:a}=this;let{pos:o}=this;e[o++]=128,clean(this.buffer.subarray(o)),this.padOffset>r-o&&(this.process(s,0),o=0);for(let d=o;d<r;d++)e[d]=0;s.setBigUint64(r-8,BigInt(this.length*8),a),this.process(s,0);const l=createView(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)l.setUint32(4*d,f[d],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const s=t.slice(0,e);return this.destroy(),s}_cloneInto(t){t||=new this.constructor,t.set(...this.get());const{blockLen:e,buffer:s,length:r,finished:a,destroyed:o,pos:l}=this;return t.destroyed=o,t.finished=a,t.length=r,t.pos=l,r%e&&t.buffer.set(s),t}clone(){return this._cloneInto()}},SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_K=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W=new Uint32Array(64),SHA2_32B=class extends HashMD{constructor(t){super(64,t,8,!1)}get(){const{A:t,B:e,C:s,D:r,E:a,F:o,G:l,H:c}=this;return[t,e,s,r,a,o,l,c]}set(t,e,s,r,a,o,l,c){this.A=t|0,this.B=e|0,this.C=s|0,this.D=r|0,this.E=a|0,this.F=o|0,this.G=l|0,this.H=c|0}process(t,e){for(let d=0;d<16;d++,e+=4)SHA256_W[d]=t.getUint32(e,!1);for(let d=16;d<64;d++){const p=SHA256_W[d-15],m=SHA256_W[d-2],y=rotr(p,7)^rotr(p,18)^p>>>3,b=rotr(m,17)^rotr(m,19)^m>>>10;SHA256_W[d]=b+SHA256_W[d-7]+y+SHA256_W[d-16]|0}let{A:s,B:r,C:a,D:o,E:l,F:c,G:u,H:f}=this;for(let d=0;d<64;d++){const p=rotr(l,6)^rotr(l,11)^rotr(l,25),m=f+p+Chi(l,c,u)+SHA256_K[d]+SHA256_W[d]|0,b=(rotr(s,2)^rotr(s,13)^rotr(s,22))+Maj(s,r,a)|0;f=u,u=c,c=l,l=o+m|0,o=a,a=r,r=s,s=m+b|0}s=s+this.A|0,r=r+this.B|0,a=a+this.C|0,o=o+this.D|0,l=l+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(s,r,a,o,l,c,u,f)}roundClean(){clean(SHA256_W)}destroy(){this.set(0,0,0,0,0,0,0,0),clean(this.buffer)}},_SHA256=class extends SHA2_32B{A=SHA256_IV[0]|0;B=SHA256_IV[1]|0;C=SHA256_IV[2]|0;D=SHA256_IV[3]|0;E=SHA256_IV[4]|0;F=SHA256_IV[5]|0;G=SHA256_IV[6]|0;H=SHA256_IV[7]|0;constructor(){super(32)}},sha256=createHasher(()=>new _SHA256,oidNist(1)),CHARSET="qpzry9x8gf2tvdw0s3jn54khce6mua7l",GENERATOR=[996825010,642813549,513874426,1027748829,705979059];function convertBits(t,e,s,r){let a=0,o=0;const l=[],c=(1<<s)-1;for(let u=0;u<t.length;u++){const f=t[u];if(f<0||f>>e!==0)return null;for(a=a<<e|f,o+=e;o>=s;)o-=s,l.push(a>>o&c)}return o>0&&l.push(a<<s-o&c),l}function hrpExpand(t){const e=[];for(let s=0;s<t.length;s++)e.push(t.charCodeAt(s)>>5);e.push(0);for(let s=0;s<t.length;s++)e.push(t.charCodeAt(s)&31);return e}function bech32Polymod(t){let e=1;for(let s=0;s<t.length;s++){const r=e>>25;e=(e&33554431)<<5^t[s];for(let a=0;a<5;a++)r>>a&1&&(e^=GENERATOR[a])}return e}function bech32Checksum(t,e){const s=hrpExpand(t).concat(e).concat([0,0,0,0,0,0]),r=bech32Polymod(s)^1,a=[];for(let o=0;o<6;o++)a.push(r>>5*(5-o)&31);return a}function encodeBech32(t,e,s){if(e<0||e>16)throw new Error("Invalid witness version");const r=convertBits(Array.from(s),8,5);if(!r)throw new Error("Failed to convert bits");const a=[e].concat(r),o=bech32Checksum(t,a),l=a.concat(o);let c=t+"1";for(let u=0;u<l.length;u++)c+=CHARSET[l[u]];return c}var ec=new elliptic.ec("secp256k1");BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141");function getPublicKey(t,e=!0){return ec.keyFromPrivate(t,"hex").getPublic(e,"hex")}function sha2562(t,e="hex"){const s=e==="hex"?CryptoJS.enc.Hex.parse(t):CryptoJS.enc.Utf8.parse(t);return CryptoJS.SHA256(s).toString()}function ripemd160(t,e="hex"){const s=e==="hex"?CryptoJS.enc.Hex.parse(t):CryptoJS.enc.Utf8.parse(t);return CryptoJS.RIPEMD160(s).toString()}function hash160(t){const e=sha2562(t,"hex");return ripemd160(e,"hex")}function hash160ToBytes(t){const e=t.match(/../g);return e?Uint8Array.from(e.map(s=>parseInt(s,16))):new Uint8Array(0)}function publicKeyToAddress(t,e="alpha",s=0){const r=hash160(t),a=hash160ToBytes(r);return encodeBech32(e,s,a)}function hexToBytes2(t){const e=t.match(/../g);return e?Uint8Array.from(e.map(s=>parseInt(s,16))):new Uint8Array(0)}var WebSocketReadyState={OPEN:1};function defaultUUIDGenerator(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}var COMPOSING_INDICATOR_KIND=25050,TIMESTAMP_RANDOMIZATION=2880*60,EVENT_KINDS=NOSTR_EVENT_KINDS;function hashAddressForTag(t){const e=new TextEncoder().encode("unicity:address:"+t);return bufferExports.Buffer.from(sha256(e)).toString("hex")}function deriveNametagEncryptionKey(t){const e=bufferExports.Buffer.from(t,"hex"),s=new TextEncoder().encode("sphere-nametag-salt"),r=sha256(s),a=new TextEncoder().encode("nametag-encryption");return hkdf(sha256,e,r,a,32)}async function encryptNametag(t,e){const s=deriveNametagEncryptionKey(e),r=crypto.getRandomValues(new Uint8Array(12)),o=new TextEncoder().encode(t),l=await crypto.subtle.importKey("raw",new Uint8Array(s).buffer,{name:"AES-GCM"},!1,["encrypt"]),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(r).buffer},l,new Uint8Array(o).buffer),u=new Uint8Array(r.length+c.byteLength);return u.set(r,0),u.set(new Uint8Array(c),r.length),bufferExports.Buffer.from(u).toString("base64")}async function decryptNametag(t,e){try{const s=deriveNametagEncryptionKey(e),r=bufferExports.Buffer.from(t,"base64"),a=r.slice(0,12),o=r.slice(12),l=await crypto.subtle.importKey("raw",new Uint8Array(s).buffer,{name:"AES-GCM"},!1,["decrypt"]),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(a).buffer},l,new Uint8Array(o).buffer);return new TextDecoder().decode(c)}catch{return null}}var NostrTransportProvider=class{id="nostr";name="Nostr Transport";type="p2p";description="P2P messaging via Nostr protocol";config;storage=null;lastEventTs=0;identity=null;keyManager=null;status="disconnected";nostrClient=null;mainSubscriptionId=null;processedEventIds=new Set;messageHandlers=new Set;transferHandlers=new Set;paymentRequestHandlers=new Set;paymentRequestResponseHandlers=new Set;readReceiptHandlers=new Set;typingIndicatorHandlers=new Set;composingHandlers=new Set;pendingMessages=[];broadcastHandlers=new Map;eventCallbacks=new Set;constructor(t){this.config={relays:t.relays??[...DEFAULT_NOSTR_RELAYS],timeout:t.timeout??TIMEOUTS.WEBSOCKET_CONNECT,autoReconnect:t.autoReconnect??!0,reconnectDelay:t.reconnectDelay??TIMEOUTS.NOSTR_RECONNECT_DELAY,maxReconnectAttempts:t.maxReconnectAttempts??TIMEOUTS.MAX_RECONNECT_ATTEMPTS,debug:t.debug??!1,createWebSocket:t.createWebSocket,generateUUID:t.generateUUID??defaultUUIDGenerator},this.storage=t.storage??null}async connect(){if(this.status!=="connected"){this.status="connecting";try{if(!this.keyManager){const t=bufferExports.Buffer.alloc(32);crypto.getRandomValues(t),this.keyManager=NostrKeyManager.fromPrivateKey(t)}if(this.nostrClient=new NostrClient(this.keyManager,{autoReconnect:this.config.autoReconnect,reconnectIntervalMs:this.config.reconnectDelay,maxReconnectIntervalMs:this.config.reconnectDelay*16,pingIntervalMs:15e3}),this.nostrClient.addConnectionListener({onConnect:t=>{this.log("NostrClient connected to relay:",t),this.emitEvent({type:"transport:connected",timestamp:Date.now()})},onDisconnect:(t,e)=>{this.log("NostrClient disconnected from relay:",t,"reason:",e)},onReconnecting:(t,e)=>{this.log("NostrClient reconnecting to relay:",t,"attempt:",e),this.emitEvent({type:"transport:reconnecting",timestamp:Date.now()})},onReconnected:t=>{this.log("NostrClient reconnected to relay:",t),this.emitEvent({type:"transport:connected",timestamp:Date.now()})}}),await Promise.race([this.nostrClient.connect(...this.config.relays),new Promise((t,e)=>setTimeout(()=>e(new Error(`Transport connection timed out after ${this.config.timeout}ms`)),this.config.timeout))]),!this.nostrClient.isConnected())throw new Error("Failed to connect to any relay");this.status="connected",this.emitEvent({type:"transport:connected",timestamp:Date.now()}),this.log("Connected to",this.nostrClient.getConnectedRelays().size,"relays"),this.identity&&await this.subscribeToEvents()}catch(t){throw this.status="error",t}}}async disconnect(){this.nostrClient&&(this.nostrClient.disconnect(),this.nostrClient=null),this.mainSubscriptionId=null,this.walletSubscriptionId=null,this.chatSubscriptionId=null,this.status="disconnected",this.emitEvent({type:"transport:disconnected",timestamp:Date.now()}),this.log("Disconnected from all relays")}isConnected(){return this.status==="connected"&&this.nostrClient?.isConnected()===!0}getStatus(){return this.status}getRelays(){return[...this.config.relays]}getConnectedRelays(){return this.nostrClient?Array.from(this.nostrClient.getConnectedRelays()):[]}async addRelay(t){if(this.config.relays.includes(t))return this.log("Relay already configured:",t),!1;if(this.config.relays.push(t),this.status==="connected"&&this.nostrClient)try{return await this.nostrClient.connect(t),this.log("Added and connected to relay:",t),this.emitEvent({type:"transport:relay_added",timestamp:Date.now(),data:{relay:t,connected:!0}}),!0}catch(e){return this.log("Failed to connect to new relay:",t,e),this.emitEvent({type:"transport:relay_added",timestamp:Date.now(),data:{relay:t,connected:!1,error:String(e)}}),!1}return this.emitEvent({type:"transport:relay_added",timestamp:Date.now(),data:{relay:t,connected:!1}}),!0}async removeRelay(t){const e=this.config.relays.indexOf(t);return e===-1?(this.log("Relay not found:",t),!1):(this.config.relays.splice(e,1),this.log("Removed relay from config:",t),this.emitEvent({type:"transport:relay_removed",timestamp:Date.now(),data:{relay:t}}),this.nostrClient&&!this.nostrClient.isConnected()&&this.status==="connected"&&(this.status="error",this.emitEvent({type:"transport:error",timestamp:Date.now(),data:{error:"No connected relays remaining"}})),!0)}hasRelay(t){return this.config.relays.includes(t)}isRelayConnected(t){return this.nostrClient?this.nostrClient.getConnectedRelays().has(t):!1}async setIdentity(t){this.identity=t;const e=bufferExports.Buffer.from(t.privateKey,"hex");this.keyManager=NostrKeyManager.fromPrivateKey(e);const s=this.keyManager.getPublicKeyHex();if(this.log("Identity set, Nostr pubkey:",s.slice(0,16)+"..."),this.nostrClient&&this.status==="connected"){this.log("Identity changed while connected - recreating NostrClient");const r=this.nostrClient;this.nostrClient=new NostrClient(this.keyManager,{autoReconnect:this.config.autoReconnect,reconnectIntervalMs:this.config.reconnectDelay,maxReconnectIntervalMs:this.config.reconnectDelay*16,pingIntervalMs:15e3}),this.nostrClient.addConnectionListener({onConnect:a=>{this.log("NostrClient connected to relay:",a)},onDisconnect:(a,o)=>{this.log("NostrClient disconnected from relay:",a,"reason:",o)},onReconnecting:(a,o)=>{this.log("NostrClient reconnecting to relay:",a,"attempt:",o)},onReconnected:a=>{this.log("NostrClient reconnected to relay:",a)}}),await Promise.race([this.nostrClient.connect(...this.config.relays),new Promise((a,o)=>setTimeout(()=>o(new Error(`Transport reconnection timed out after ${this.config.timeout}ms`)),this.config.timeout))]),await this.subscribeToEvents(),r.disconnect()}else this.isConnected()&&await this.subscribeToEvents()}getNostrPubkey(){if(!this.keyManager)throw new Error("KeyManager not initialized - call setIdentity first");return this.keyManager.getPublicKeyHex()}async sendMessage(t,e){this.ensureReady();const s=t.length===66&&(t.startsWith("02")||t.startsWith("03"))?t.slice(2):t,r=this.identity?.nametag,a=r?JSON.stringify({senderNametag:r,text:e}):e,o=nip17.createGiftWrap(this.keyManager,s,a);await this.publishEvent(o);const l=JSON.stringify({selfWrap:!0,originalId:o.id,recipientPubkey:t,senderNametag:r,text:e}),c=this.keyManager.getPublicKeyHex(),u=nip17.createGiftWrap(this.keyManager,c,l);return this.publishEvent(u).catch(f=>{this.log("Self-wrap publish failed:",f)}),this.emitEvent({type:"message:sent",timestamp:Date.now(),data:{recipient:t}}),o.id}onMessage(t){if(this.messageHandlers.add(t),this.pendingMessages.length>0){const e=this.pendingMessages;this.pendingMessages=[],this.log("Flushing",e.length,"buffered messages to new handler");for(const s of e)try{t(s)}catch(r){this.log("Message handler error (buffered):",r)}}return()=>this.messageHandlers.delete(t)}async sendTokenTransfer(t,e){this.ensureReady();const s="token_transfer:"+JSON.stringify(e),r=await this.createEncryptedEvent(EVENT_KINDS.TOKEN_TRANSFER,s,[["p",t],["d","token-transfer"],["type","token_transfer"]]);return await this.publishEvent(r),this.emitEvent({type:"transfer:sent",timestamp:Date.now(),data:{recipient:t}}),r.id}onTokenTransfer(t){return this.transferHandlers.add(t),()=>this.transferHandlers.delete(t)}async sendPaymentRequest(t,e){this.ensureReady();const s=this.config.generateUUID(),r=typeof e.amount=="bigint"?e.amount.toString():e.amount,a={requestId:s,amount:r,coinId:e.coinId,message:e.message,recipientNametag:e.recipientNametag,deadline:Date.now()+300*1e3},o="payment_request:"+JSON.stringify(a),l=[["p",t],["type","payment_request"],["amount",r]];e.recipientNametag&&l.push(["recipient",e.recipientNametag]);const c=await this.createEncryptedEvent(EVENT_KINDS.PAYMENT_REQUEST,o,l);return await this.publishEvent(c),this.log("Sent payment request:",c.id),c.id}onPaymentRequest(t){return this.paymentRequestHandlers.add(t),()=>this.paymentRequestHandlers.delete(t)}async sendPaymentRequestResponse(t,e){this.ensureReady();const s={requestId:e.requestId,responseType:e.responseType,message:e.message,transferId:e.transferId},r="payment_response:"+JSON.stringify(s),a=await this.createEncryptedEvent(EVENT_KINDS.PAYMENT_REQUEST_RESPONSE,r,[["p",t],["e",e.requestId],["d","payment-request-response"],["type","payment_response"]]);return await this.publishEvent(a),this.log("Sent payment request response:",a.id,"type:",e.responseType),a.id}onPaymentRequestResponse(t){return this.paymentRequestResponseHandlers.add(t),()=>this.paymentRequestResponseHandlers.delete(t)}async sendReadReceipt(t,e){if(!this.keyManager)throw new Error("Not initialized");const s=t.length===66?t.slice(2):t,r=nip17.createReadReceipt(this.keyManager,s,e);await this.publishEvent(r),this.log("Sent read receipt for:",e,"to:",s.slice(0,16))}onReadReceipt(t){return this.readReceiptHandlers.add(t),()=>this.readReceiptHandlers.delete(t)}async sendTypingIndicator(t){if(!this.keyManager)throw new Error("Not initialized");const e=t.length===66?t.slice(2):t,s=JSON.stringify({type:"typing",senderNametag:this.identity?.nametag}),r=nip17.createGiftWrap(this.keyManager,e,s);await this.publishEvent(r)}onTypingIndicator(t){return this.typingIndicatorHandlers.add(t),()=>this.typingIndicatorHandlers.delete(t)}onComposing(t){return this.composingHandlers.add(t),()=>this.composingHandlers.delete(t)}async sendComposingIndicator(t,e){this.ensureReady();const s=t.length===66&&(t.startsWith("02")||t.startsWith("03"))?t.slice(2):t,r=this.createCustomKindGiftWrap(s,e,COMPOSING_INDICATOR_KIND);await this.publishEvent(r)}async resolve(t){return t.startsWith("@")?this.resolveNametagInfo(t.slice(1)):t.startsWith("DIRECT:")||t.startsWith("PROXY:")?this.resolveAddressInfo(t):t.startsWith("alpha1")||t.startsWith("alphat1")?this.resolveAddressInfo(t):/^0[23][0-9a-f]{64}$/i.test(t)?this.resolveAddressInfo(t):/^[0-9a-f]{64}$/i.test(t)?this.resolveTransportPubkeyInfo(t):this.resolveNametagInfo(t)}async resolveNametag(t){this.ensureConnected();const e=hashNametag(t);let s=await this.queryEvents({kinds:[EVENT_KINDS.NAMETAG_BINDING],"#t":[e],limit:1});if(s.length===0&&(s=await this.queryEvents({kinds:[EVENT_KINDS.NAMETAG_BINDING],"#d":[e],limit:1})),s.length===0)return null;const r=s[0];if(r.pubkey)return r.pubkey;const a=r.tags.find(o=>o[0]==="p");return a?.[1]?a[1]:null}async resolveNametagInfo(t){this.ensureConnected();const e=hashNametag(t);let s=await this.queryEvents({kinds:[EVENT_KINDS.NAMETAG_BINDING],"#t":[e],limit:1});if(s.length===0&&(s=await this.queryEvents({kinds:[EVENT_KINDS.NAMETAG_BINDING],"#d":[e],limit:1})),s.length===0)return null;const r=s[0];try{const a=JSON.parse(r.content),{ProxyAddress:o}=await __vitePreload(async()=>{const{ProxyAddress:d}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:d}},void 0),c=(await o.fromNameTag(t)).toString();if(a.public_key&&a.l1_address)return{nametag:t,transportPubkey:r.pubkey,chainPubkey:a.public_key,l1Address:a.l1_address,directAddress:a.direct_address||"",proxyAddress:c,timestamp:r.created_at*1e3};this.log("Legacy nametag event without extended fields:",t);const u=r.tags.find(d=>d[0]==="pubkey"),f=r.tags.find(d=>d[0]==="l1");return u?.[1]&&f?.[1]?{nametag:t,transportPubkey:r.pubkey,chainPubkey:u[1],l1Address:f[1],directAddress:"",proxyAddress:c,timestamp:r.created_at*1e3}:{nametag:t,transportPubkey:r.pubkey,chainPubkey:"",l1Address:"",directAddress:"",proxyAddress:c,timestamp:r.created_at*1e3}}catch{const{ProxyAddress:a}=await __vitePreload(async()=>{const{ProxyAddress:l}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:l}},void 0),o=await a.fromNameTag(t);return{nametag:t,transportPubkey:r.pubkey,chainPubkey:"",l1Address:"",directAddress:"",proxyAddress:o.toString(),timestamp:r.created_at*1e3}}}async resolveAddressInfo(t){this.ensureConnected();const e=hashAddressForTag(t),s=await this.queryEvents({kinds:[EVENT_KINDS.NAMETAG_BINDING],"#t":[e],limit:1});if(s.length===0)return null;const r=s[0];try{const a=JSON.parse(r.content);return{nametag:a.nametag||void 0,transportPubkey:r.pubkey,chainPubkey:a.public_key||"",l1Address:a.l1_address||"",directAddress:a.direct_address||"",proxyAddress:a.proxy_address||void 0,timestamp:r.created_at*1e3}}catch{return{transportPubkey:r.pubkey,chainPubkey:"",l1Address:"",directAddress:"",timestamp:r.created_at*1e3}}}async resolveTransportPubkeyInfo(t){this.ensureConnected();const e=await this.queryEvents({kinds:[EVENT_KINDS.NAMETAG_BINDING],authors:[t],limit:5});if(e.length===0)return null;e.sort((r,a)=>a.created_at-r.created_at);const s=e[0];try{const r=JSON.parse(s.content);return{nametag:r.nametag||void 0,transportPubkey:s.pubkey,chainPubkey:r.public_key||"",l1Address:r.l1_address||"",directAddress:r.direct_address||"",proxyAddress:r.proxy_address||void 0,timestamp:s.created_at*1e3}}catch{return{transportPubkey:s.pubkey,chainPubkey:"",l1Address:"",directAddress:"",timestamp:s.created_at*1e3}}}async recoverNametag(){if(this.ensureReady(),!this.identity||!this.keyManager)throw new Error("Identity not set");const t=this.getNostrPubkey();this.log("Searching for nametag events for pubkey:",t.slice(0,16)+"...");const e=await this.queryEvents({kinds:[EVENT_KINDS.NAMETAG_BINDING],authors:[t],limit:10});if(e.length===0)return this.log("No nametag events found for this pubkey"),null;e.sort((s,r)=>r.created_at-s.created_at);for(const s of e)try{const r=JSON.parse(s.content);if(r.encrypted_nametag){const a=await decryptNametag(r.encrypted_nametag,this.identity.privateKey);if(a)return this.log("Recovered nametag:",a),a}}catch{continue}return this.log("Could not decrypt nametag from any event"),null}async publishIdentityBinding(t,e,s,r){if(this.ensureReady(),!this.identity)throw new Error("Identity not set");const a=this.getNostrPubkey(),o=new TextEncoder().encode("unicity:identity:"+a),l=bufferExports.Buffer.from(sha256(o)).toString("hex"),c={public_key:t,l1_address:e,direct_address:s},u=[["d",l],["t",hashAddressForTag(t)],["t",hashAddressForTag(s)],["t",hashAddressForTag(e)]];if(r){const p=await this.resolveNametag(r);if(p&&p!==a)return this.log("Nametag already taken:",r,"- owner:",p),!1;const{ProxyAddress:m}=await __vitePreload(async()=>{const{ProxyAddress:j}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:j}},void 0),b=(await m.fromNameTag(r)).toString(),E=await encryptNametag(r,this.identity.privateKey),C=hashNametag(r);c.nametag=r,c.encrypted_nametag=E,c.proxy_address=b,u.push(["t",C]),u.push(["t",hashAddressForTag(b)])}const f=JSON.stringify(c),d=await this.createEvent(EVENT_KINDS.NAMETAG_BINDING,f,u);return await this.publishEvent(d),r?this.log("Published identity binding with nametag:",r,"for pubkey:",a.slice(0,16)+"..."):this.log("Published identity binding (no nametag) for pubkey:",a.slice(0,16)+"..."),!0}async publishNametag(t,e){this.ensureReady();const s=hashNametag(t),r=await this.createEvent(EVENT_KINDS.NAMETAG_BINDING,e,[["d",s],["a",e]]);await this.publishEvent(r),this.log("Published nametag binding:",t)}async registerNametag(t,e,s=""){if(this.ensureReady(),!this.identity)throw new Error("Identity not set");const r=this.getNostrPubkey(),a=await this.resolveNametag(t);if(this.log("registerNametag:",t,"existing:",a,"myPubkey:",r),a&&a!==r)return this.log("Nametag already taken:",t,"- owner:",a),!1;const o=this.identity.privateKey,l=getPublicKey(o,!0),c=publicKeyToAddress(l,"alpha"),u=await encryptNametag(t,o),{ProxyAddress:f}=await __vitePreload(async()=>{const{ProxyAddress:C}=await Promise.resolve().then(()=>ProxyAddress$1);return{ProxyAddress:C}},void 0),p=(await f.fromNameTag(t)).toString(),m=hashNametag(t),y=JSON.stringify({nametag_hash:m,address:r,verified:Date.now(),encrypted_nametag:u,public_key:l,l1_address:c,direct_address:s,proxy_address:p}),b=[["d",m],["nametag",m],["t",m],["t",hashAddressForTag(s)],["t",hashAddressForTag(p)],["address",r],["pubkey",l],["l1",c]],E=await this.createEvent(EVENT_KINDS.NAMETAG_BINDING,y,b);return await this.publishEvent(E),this.log("Registered nametag:",t,"for pubkey:",r.slice(0,16)+"...","l1:",c.slice(0,12)+"..."),!0}broadcastSubscriptions=new Map;subscribeToBroadcast(t,e){const s=t.sort().join(":");return this.broadcastHandlers.has(s)||(this.broadcastHandlers.set(s,new Set),this.isConnected()&&this.nostrClient&&this.subscribeToTags(t)),this.broadcastHandlers.get(s).add(e),()=>{if(this.broadcastHandlers.get(s)?.delete(e),this.broadcastHandlers.get(s)?.size===0){this.broadcastHandlers.delete(s);const r=this.broadcastSubscriptions.get(s);r&&this.nostrClient&&(this.nostrClient.unsubscribe(r),this.broadcastSubscriptions.delete(s))}}}async publishBroadcast(t,e){this.ensureReady();const s=e?.map(a=>["t",a])??[],r=await this.createEvent(EVENT_KINDS.BROADCAST,t,s);return await this.publishEvent(r),r.id}onEvent(t){return this.eventCallbacks.add(t),()=>this.eventCallbacks.delete(t)}async handleEvent(t){if(!(t.id&&this.processedEventIds.has(t.id))){t.id&&this.processedEventIds.add(t.id),this.log("Processing event kind:",t.kind,"id:",t.id?.slice(0,12));try{switch(t.kind){case EVENT_KINDS.DIRECT_MESSAGE:await this.handleDirectMessage(t);break;case EventKinds.GIFT_WRAP:this.log("Handling gift wrap (NIP-17 DM)"),await this.handleGiftWrap(t);break;case EVENT_KINDS.TOKEN_TRANSFER:await this.handleTokenTransfer(t);break;case EVENT_KINDS.PAYMENT_REQUEST:await this.handlePaymentRequest(t);break;case EVENT_KINDS.PAYMENT_REQUEST_RESPONSE:await this.handlePaymentRequestResponse(t);break;case EVENT_KINDS.BROADCAST:this.handleBroadcast(t);break}if(t.created_at&&this.storage&&this.keyManager){const e=t.kind;(e===EVENT_KINDS.DIRECT_MESSAGE||e===EVENT_KINDS.TOKEN_TRANSFER||e===EVENT_KINDS.PAYMENT_REQUEST||e===EVENT_KINDS.PAYMENT_REQUEST_RESPONSE)&&this.updateLastEventTimestamp(t.created_at)}}catch(e){this.log("Failed to handle event:",e)}}}updateLastEventTimestamp(t){if(!this.storage||!this.keyManager||t<=this.lastEventTs)return;this.lastEventTs=t;const e=this.keyManager.getPublicKeyHex(),s=`${STORAGE_KEYS_GLOBAL.LAST_WALLET_EVENT_TS}_${e.slice(0,16)}`;this.storage.set(s,t.toString()).catch(r=>{this.log("Failed to save last event timestamp:",r)})}async handleDirectMessage(t){this.log("Ignoring NIP-04 kind 4 event (DMs use NIP-17):",t.id?.slice(0,12))}async handleGiftWrap(t){if(!this.identity||!this.keyManager){this.log("handleGiftWrap: no identity/keyManager");return}try{const e=nip17.unwrap(t,this.keyManager);if(this.log("Gift wrap unwrapped, sender:",e.senderPubkey?.slice(0,16),"kind:",e.kind),e.senderPubkey===this.keyManager.getPublicKeyHex()){try{const o=JSON.parse(e.content);if(o?.selfWrap&&o.recipientPubkey){this.log("Self-wrap replay for recipient:",o.recipientPubkey?.slice(0,16));const l={id:o.originalId||e.eventId,senderTransportPubkey:e.senderPubkey,senderNametag:o.senderNametag,recipientTransportPubkey:o.recipientPubkey,content:o.text??"",timestamp:e.timestamp*1e3,encrypted:!0,isSelfWrap:!0};for(const c of this.messageHandlers)try{c(l)}catch(u){this.log("Self-wrap handler error:",u)}return}}catch{}this.log("Skipping own non-self-wrap message");return}if(isReadReceipt(e)){if(this.log("Read receipt from:",e.senderPubkey?.slice(0,16),"for:",e.replyToEventId),e.replyToEventId){const o={senderTransportPubkey:e.senderPubkey,messageEventId:e.replyToEventId,timestamp:e.timestamp*1e3};for(const l of this.readReceiptHandlers)try{l(o)}catch(c){this.log("Read receipt handler error:",c)}}return}if(e.kind===COMPOSING_INDICATOR_KIND){let o,l=3e4;try{const u=JSON.parse(e.content);o=u.senderNametag||void 0,l=u.expiresIn??3e4}catch{}const c={senderPubkey:e.senderPubkey,senderNametag:o,expiresIn:l};this.log("Composing indicator from:",c.senderNametag||e.senderPubkey?.slice(0,16));for(const u of this.composingHandlers)try{u(c)}catch(f){this.log("Composing handler error:",f)}return}try{const o=JSON.parse(e.content);if(o?.type==="typing"){this.log("Typing indicator from:",e.senderPubkey?.slice(0,16));const l={senderTransportPubkey:e.senderPubkey,senderNametag:o.senderNametag,timestamp:e.timestamp*1e3};for(const c of this.typingIndicatorHandlers)try{c(l)}catch(u){this.log("Typing handler error:",u)}return}}catch{}if(!isChatMessage(e)){this.log("Skipping unknown message kind:",e.kind);return}let s=e.content,r;try{const o=JSON.parse(s);typeof o=="object"&&o.text!==void 0&&(s=o.text,r=o.senderNametag||void 0)}catch{}this.log("DM received from:",r||e.senderPubkey?.slice(0,16),"content:",s?.slice(0,50));const a={id:t.id,senderTransportPubkey:e.senderPubkey,senderNametag:r,content:s,timestamp:e.timestamp*1e3,encrypted:!0};if(this.emitEvent({type:"message:received",timestamp:Date.now()}),this.messageHandlers.size===0)this.log("No message handlers registered, buffering message for later delivery"),this.pendingMessages.push(a);else{this.log("Dispatching to",this.messageHandlers.size,"handlers");for(const o of this.messageHandlers)try{o(a)}catch(l){this.log("Message handler error:",l)}}}catch(e){this.log("Gift wrap decrypt failed (expected if not for us):",e?.message?.slice(0,50))}}async handleTokenTransfer(t){if(!this.identity)return;const e=await this.decryptContent(t.content,t.pubkey),s=JSON.parse(e),r={id:t.id,senderTransportPubkey:t.pubkey,payload:s,timestamp:t.created_at*1e3};this.emitEvent({type:"transfer:received",timestamp:Date.now()});for(const a of this.transferHandlers)try{await a(r)}catch(o){this.log("Transfer handler error:",o)}}async handlePaymentRequest(t){if(this.identity)try{const e=await this.decryptContent(t.content,t.pubkey),s=JSON.parse(e),r={id:t.id,senderTransportPubkey:t.pubkey,senderNametag:s.recipientNametag,request:{requestId:s.requestId,amount:s.amount,coinId:s.coinId,message:s.message,recipientNametag:s.recipientNametag,metadata:s.metadata},timestamp:t.created_at*1e3};this.log("Received payment request:",r.id);for(const a of this.paymentRequestHandlers)try{a(r)}catch(o){this.log("Payment request handler error:",o)}}catch(e){this.log("Failed to handle payment request:",e)}}async handlePaymentRequestResponse(t){if(this.identity)try{const e=await this.decryptContent(t.content,t.pubkey),s=JSON.parse(e),r={id:t.id,responderTransportPubkey:t.pubkey,response:{requestId:s.requestId,responseType:s.responseType,message:s.message,transferId:s.transferId},timestamp:t.created_at*1e3};this.log("Received payment request response:",r.id,"type:",s.responseType);for(const a of this.paymentRequestResponseHandlers)try{a(r)}catch(o){this.log("Payment request response handler error:",o)}}catch(e){this.log("Failed to handle payment request response:",e)}}handleBroadcast(t){const e=t.tags.filter(r=>r[0]==="t").map(r=>r[1]),s={id:t.id,authorTransportPubkey:t.pubkey,content:t.content,tags:e,timestamp:t.created_at*1e3};for(const[r,a]of this.broadcastHandlers){const o=r.split(":");if(e.some(l=>o.includes(l)))for(const l of a)try{l(s)}catch(c){this.log("Broadcast handler error:",c)}}}async createEvent(t,e,s){if(!this.identity)throw new Error("Identity not set");if(!this.keyManager)throw new Error("KeyManager not initialized");const r=Event$1.create(this.keyManager,{kind:t,content:e,tags:s});return{id:r.id,kind:r.kind,content:r.content,tags:r.tags,pubkey:r.pubkey,created_at:r.created_at,sig:r.sig}}async createEncryptedEvent(t,e,s){if(!this.keyManager)throw new Error("KeyManager not initialized");const r=s.find(l=>l[0]==="p");if(!r||!r[1])throw new Error("No recipient pubkey in tags for encryption");const a=r[1],o=await nip04.encryptHex(e,this.keyManager.getPrivateKeyHex(),a);return this.createEvent(t,o,s)}async publishEvent(t){if(!this.nostrClient)throw new Error("NostrClient not initialized");const e=Event$1.fromJSON(t);await this.nostrClient.publishEvent(e)}async fetchPendingEvents(){if(!this.nostrClient?.isConnected()||!this.keyManager)throw new Error("Transport not connected");const t=this.keyManager.getPublicKeyHex(),e=new Filter;e.kinds=[EVENT_KINDS.DIRECT_MESSAGE,EVENT_KINDS.TOKEN_TRANSFER,EVENT_KINDS.PAYMENT_REQUEST,EVENT_KINDS.PAYMENT_REQUEST_RESPONSE],e["#p"]=[t],e.since=Math.floor(Date.now()/1e3)-86400;const s=[];await new Promise(r=>{const a=setTimeout(()=>{o&&this.nostrClient?.unsubscribe(o),r()},5e3),o=this.nostrClient.subscribe(e,{onEvent:l=>{s.push({id:l.id,kind:l.kind,content:l.content,tags:l.tags,pubkey:l.pubkey,created_at:l.created_at,sig:l.sig})},onEndOfStoredEvents:()=>{clearTimeout(a),this.nostrClient?.unsubscribe(o),r()}})});for(const r of s)await this.handleEvent(r)}async queryEvents(t){if(!this.nostrClient||!this.nostrClient.isConnected())throw new Error("No connected relays");const e=[],s=new Filter(t);return new Promise(r=>{const a=setTimeout(()=>{o&&this.nostrClient?.unsubscribe(o),r(e)},5e3),o=this.nostrClient.subscribe(s,{onEvent:l=>{e.push({id:l.id,kind:l.kind,content:l.content,tags:l.tags,pubkey:l.pubkey,created_at:l.created_at,sig:l.sig})},onEndOfStoredEvents:()=>{clearTimeout(a),this.nostrClient?.unsubscribe(o),r(e)}})})}walletSubscriptionId=null;chatSubscriptionId=null;async subscribeToEvents(){if(this.log("subscribeToEvents called, identity:",!!this.identity,"keyManager:",!!this.keyManager,"nostrClient:",!!this.nostrClient),!this.identity||!this.keyManager||!this.nostrClient){this.log("subscribeToEvents: skipped - no identity, keyManager, or nostrClient");return}this.walletSubscriptionId&&(this.nostrClient.unsubscribe(this.walletSubscriptionId),this.walletSubscriptionId=null),this.chatSubscriptionId&&(this.nostrClient.unsubscribe(this.chatSubscriptionId),this.chatSubscriptionId=null),this.mainSubscriptionId&&(this.nostrClient.unsubscribe(this.mainSubscriptionId),this.mainSubscriptionId=null);const t=this.keyManager.getPublicKeyHex();this.log("Subscribing with Nostr pubkey:",t);let e;if(this.storage){const a=`${STORAGE_KEYS_GLOBAL.LAST_WALLET_EVENT_TS}_${t.slice(0,16)}`;try{const o=await this.storage.get(a);o?(e=parseInt(o,10),this.lastEventTs=e,this.log("Resuming from stored event timestamp:",e)):(e=Math.floor(Date.now()/1e3),this.log("No stored timestamp, starting from now:",e))}catch(o){this.log("Failed to read last event timestamp, falling back to now:",o),e=Math.floor(Date.now()/1e3)}}else e=Math.floor(Date.now()/1e3)-86400,this.log("No storage adapter, using 24h fallback");const s=new Filter;s.kinds=[EVENT_KINDS.DIRECT_MESSAGE,EVENT_KINDS.TOKEN_TRANSFER,EVENT_KINDS.PAYMENT_REQUEST,EVENT_KINDS.PAYMENT_REQUEST_RESPONSE],s["#p"]=[t],s.since=e,this.walletSubscriptionId=this.nostrClient.subscribe(s,{onEvent:a=>{this.log("Received wallet event kind:",a.kind,"id:",a.id?.slice(0,12)),this.handleEvent({id:a.id,kind:a.kind,content:a.content,tags:a.tags,pubkey:a.pubkey,created_at:a.created_at,sig:a.sig})},onEndOfStoredEvents:()=>{this.log("Wallet subscription ready (EOSE)")},onError:(a,o)=>{this.log("Wallet subscription error:",o)}}),this.log("Wallet subscription created, subId:",this.walletSubscriptionId);const r=new Filter;r.kinds=[EventKinds.GIFT_WRAP],r["#p"]=[t],this.chatSubscriptionId=this.nostrClient.subscribe(r,{onEvent:a=>{this.log("Received chat event kind:",a.kind,"id:",a.id?.slice(0,12)),this.handleEvent({id:a.id,kind:a.kind,content:a.content,tags:a.tags,pubkey:a.pubkey,created_at:a.created_at,sig:a.sig})},onEndOfStoredEvents:()=>{this.log("Chat subscription ready (EOSE)")},onError:(a,o)=>{this.log("Chat subscription error:",o)}}),this.log("Chat subscription created, subId:",this.chatSubscriptionId)}subscribeToTags(t){if(!this.nostrClient)return;const e=t.sort().join(":"),s=new Filter({kinds:[EVENT_KINDS.BROADCAST],"#t":t,since:Math.floor(Date.now()/1e3)-3600}),r=this.nostrClient.subscribe(s,{onEvent:a=>{this.handleBroadcast({id:a.id,kind:a.kind,content:a.content,tags:a.tags,pubkey:a.pubkey,created_at:a.created_at,sig:a.sig})}});this.broadcastSubscriptions.set(e,r)}async decryptContent(t,e){if(!this.keyManager)throw new Error("KeyManager not initialized");const s=await nip04.decryptHex(t,this.keyManager.getPrivateKeyHex(),e);return this.stripContentPrefix(s)}stripContentPrefix(t){const e=["payment_request:","token_transfer:","payment_response:"];for(const s of e)if(t.startsWith(s))return t.slice(s.length);return t}ensureConnected(){if(!this.isConnected())throw new Error("NostrTransportProvider not connected")}ensureReady(){if(this.ensureConnected(),!this.identity)throw new Error("Identity not set")}emitEvent(t){for(const e of this.eventCallbacks)try{e(t)}catch(s){this.log("Event callback error:",s)}}createCustomKindGiftWrap(t,e,s){const r=this.keyManager.getPublicKeyHex(),a=Math.floor(Date.now()/1e3),o=[["p",t]],l=JSON.stringify([0,r,a,s,o,e]),u={id:bytesToHex(sha256(new TextEncoder().encode(l))),pubkey:r,created_at:a,kind:s,tags:o,content:e},f=hexToBytes(t),d=nip44.encrypt(JSON.stringify(u),this.keyManager.getPrivateKey(),f),p=a+Math.floor(Math.random()*2*TIMESTAMP_RANDOMIZATION)-TIMESTAMP_RANDOMIZATION,m=Event$1.create(this.keyManager,{kind:EventKinds.SEAL,tags:[],content:d,created_at:p}),y=NostrKeyManager.generate(),b=nip44.encrypt(JSON.stringify(m.toJSON()),y.getPrivateKey(),f),E=a+Math.floor(Math.random()*2*TIMESTAMP_RANDOMIZATION)-TIMESTAMP_RANDOMIZATION,C=Event$1.create(y,{kind:EventKinds.GIFT_WRAP,tags:[["p",t]],content:b,created_at:E});return y.clear(),C}log(...t){this.config.debug&&console.log("[NostrTransportProvider]",...t)}};function createBrowserWebSocket(t){return new WebSocket(t)}function createNostrTransportProvider(t){return new NostrTransportProvider({...t,createWebSocket:createBrowserWebSocket})}var UnicityAggregatorProvider=class{id="unicity-aggregator";name="Unicity Aggregator";type="network";description="Unicity state transition aggregator (oracle implementation)";config;status="disconnected";eventCallbacks=new Set;aggregatorClient=null;stateTransitionClient=null;trustBase=null;getTrustBase(){return this.trustBase}getStateTransitionClient(){return this.stateTransitionClient}getAggregatorClient(){return this.aggregatorClient}spentCache=new Map;constructor(t){this.config={url:t.url,apiKey:t.apiKey??"",timeout:t.timeout??DEFAULT_AGGREGATOR_TIMEOUT,skipVerification:t.skipVerification??!1,debug:t.debug??!1,trustBaseLoader:t.trustBaseLoader}}async connect(){this.status!=="connected"&&(this.status="connecting",this.status="connected",this.emitEvent({type:"oracle:connected",timestamp:Date.now()}),this.log("Connected to oracle:",this.config.url))}async disconnect(){this.status="disconnected",this.emitEvent({type:"oracle:disconnected",timestamp:Date.now()}),this.log("Disconnected from oracle")}isConnected(){return this.status==="connected"}getStatus(){return this.status}async initialize(t){if(this.aggregatorClient=new AggregatorClient(this.config.url,this.config.apiKey||null),this.stateTransitionClient=new StateTransitionClient(this.aggregatorClient),t)this.trustBase=t;else if(!this.config.skipVerification&&this.config.trustBaseLoader)try{const e=await this.config.trustBaseLoader.load();e&&(this.trustBase=RootTrustBase.fromJSON(e))}catch(e){this.log("Failed to load trust base:",e)}await this.connect(),this.log("Initialized with trust base:",!!this.trustBase)}async submitCommitment(t){this.ensureConnected();try{let e;if(this.isSdkTransferCommitment(t)){const s=await this.stateTransitionClient.submitTransferCommitment(t);e=t.requestId?.toString()??s.status}else e=(await this.rpcCall("submitCommitment",{sourceToken:t.sourceToken,recipient:t.recipient,salt:Array.from(t.salt),data:t.data})).requestId??"";return this.emitEvent({type:"commitment:submitted",timestamp:Date.now(),data:{requestId:e}}),{success:!0,requestId:e,timestamp:Date.now()}}catch(e){return{success:!1,error:e instanceof Error?e.message:String(e),timestamp:Date.now()}}}async submitMintCommitment(t){this.ensureConnected();try{const e=await this.stateTransitionClient.submitMintCommitment(t),s=t.requestId?.toString()??e.status;return this.emitEvent({type:"commitment:submitted",timestamp:Date.now(),data:{requestId:s}}),{success:!0,requestId:s,timestamp:Date.now()}}catch(e){return{success:!1,error:e instanceof Error?e.message:String(e),timestamp:Date.now()}}}isSdkTransferCommitment(t){return t!==null&&typeof t=="object"&&"requestId"in t&&typeof t.requestId?.toString=="function"}async getProof(t){this.ensureConnected();try{const e=await this.rpcCall("getInclusionProof",{requestId:t});return e.proof?{requestId:t,roundNumber:e.roundNumber??0,proof:e.proof,timestamp:Date.now()}:null}catch{return null}}async waitForProof(t,e){const s=e?.timeout??this.config.timeout,r=e?.pollInterval??TIMEOUTS.PROOF_POLL_INTERVAL,a=Date.now();let o=0;for(;Date.now()-a<s;){e?.onPoll?.(++o);const l=await this.getProof(t);if(l)return this.emitEvent({type:"proof:received",timestamp:Date.now(),data:{requestId:t,roundNumber:l.roundNumber}}),l;await new Promise(c=>setTimeout(c,r))}throw new Error(`Timeout waiting for proof: ${t}`)}async validateToken(t){this.ensureConnected();try{if(this.trustBase&&!this.config.skipVerification)try{const a=await Token.fromJSON(t),o=await a.verify(this.trustBase),c=(await a.state.calculateHash()).toJSON(),u=o.isSuccessful;return this.emitEvent({type:"validation:completed",timestamp:Date.now(),data:{valid:u}}),{valid:u,spent:!1,stateHash:c,error:u?void 0:"SDK verification failed"}}catch(a){this.log("SDK validation failed, falling back to RPC:",a)}const e=await this.rpcCall("validateToken",{token:t}),s=e.valid??!1,r=e.spent??!1;return this.emitEvent({type:"validation:completed",timestamp:Date.now(),data:{valid:s}}),e.stateHash&&r&&this.spentCache.set(e.stateHash,!0),{valid:s,spent:r,stateHash:e.stateHash,error:e.error}}catch(e){return{valid:!1,spent:!1,error:e instanceof Error?e.message:String(e)}}}async waitForProofSdk(t,e){if(this.ensureConnected(),!this.trustBase)throw new Error("Trust base not initialized");return await waitInclusionProof(this.trustBase,this.stateTransitionClient,t,e)}async isSpent(t){if(this.spentCache.has(t))return this.spentCache.get(t);this.ensureConnected();try{const s=(await this.rpcCall("isSpent",{stateHash:t})).spent??!1;return s&&this.spentCache.set(t,!0),s}catch{return!1}}async getTokenState(t){this.ensureConnected();try{const e=await this.rpcCall("getTokenState",{tokenId:t});return e.state?{tokenId:t,stateHash:e.state.stateHash??"",spent:e.state.spent??!1,roundNumber:e.state.roundNumber,lastUpdated:Date.now()}:null}catch{return null}}async getCurrentRound(){if(this.aggregatorClient){const t=await this.aggregatorClient.getBlockHeight();return Number(t)}return 0}async mint(t){this.ensureConnected();try{const e=await this.rpcCall("mint",{coinId:t.coinId,amount:t.amount,recipientAddress:t.recipientAddress,recipientPubkey:t.recipientPubkey});return{success:!0,requestId:e.requestId,tokenId:e.tokenId}}catch(e){return{success:!1,error:e instanceof Error?e.message:String(e)}}}onEvent(t){return this.eventCallbacks.add(t),()=>this.eventCallbacks.delete(t)}async rpcCall(t,e){const s=new AbortController,r=setTimeout(()=>s.abort(),this.config.timeout);try{const a=await fetch(this.config.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:t,params:e}),signal:s.signal});if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const o=await a.json();if(o.error)throw new Error(o.error.message??"RPC error");return o.result??{}}finally{clearTimeout(r)}}ensureConnected(){if(this.status!=="connected")throw new Error("UnicityAggregatorProvider not connected")}emitEvent(t){for(const e of this.eventCallbacks)try{e(t)}catch(s){this.log("Event callback error:",s)}}log(...t){this.config.debug&&console.log("[UnicityAggregatorProvider]",...t)}},TRUSTBASE_TESTNET={version:1,networkId:3,epoch:1,epochStartRound:1,rootNodes:[{nodeId:"16Uiu2HAkyQRiA7pMgzgLj9GgaBJEJa8zmx9dzqUDa6WxQPJ82ghU",sigKey:"0x039afb2acb65f5fbc272d8907f763d0a5d189aadc9b97afdcc5897ea4dd112e68b",stake:1}],quorumThreshold:1,stateHash:"",changeRecordHash:"",previousEntryHash:"",signatures:{"16Uiu2HAkyQRiA7pMgzgLj9GgaBJEJa8zmx9dzqUDa6WxQPJ82ghU":"0xf157c9fdd8a378e3ca70d354ccc4475ab2cd8de360127bc46b0aeab4b453a80f07fd9136a5843b60a8babaff23e20acc8879861f7651440a5e2829f7541b31f100"}},TRUSTBASE_MAINNET=null,TRUSTBASE_DEV=TRUSTBASE_TESTNET;function getEmbeddedTrustBase(t){switch(t){case"mainnet":return TRUSTBASE_MAINNET;case"testnet":return TRUSTBASE_TESTNET;case"dev":return TRUSTBASE_DEV;default:return TRUSTBASE_TESTNET}}var BaseTrustBaseLoader=class{network;constructor(t="testnet"){this.network=t}async load(){const t=await this.loadFromExternal();return t||getEmbeddedTrustBase(this.network)}},BrowserTrustBaseLoader=class extends BaseTrustBaseLoader{url;constructor(t="testnet"){t.startsWith("/")||t.startsWith("http")?(super("testnet"),this.url=t):super(t)}async loadFromExternal(){if(!this.url)return null;try{const t=await fetch(this.url);if(t.ok)return await t.json()}catch{}return null}};function createBrowserTrustBaseLoader(t){return new BrowserTrustBaseLoader(t)}function createUnicityAggregatorProvider(t){const{trustBaseUrl:e,network:s,...r}=t;return new UnicityAggregatorProvider({...r,trustBaseLoader:createBrowserTrustBaseLoader(e??s??"testnet")})}var IpfsError=class extends Error{category;gateway;cause;constructor(t,e,s,r){super(t),this.name="IpfsError",this.category=e,this.gateway=s,this.cause=r}get shouldTriggerCircuitBreaker(){return this.category!=="NOT_FOUND"&&this.category!=="SEQUENCE_DOWNGRADE"}};function classifyFetchError(t){return t instanceof DOMException&&t.name==="AbortError"?"TIMEOUT":t instanceof TypeError?"NETWORK_ERROR":t instanceof Error&&t.name==="TimeoutError"?"TIMEOUT":"NETWORK_ERROR"}function classifyHttpStatus(t,e){return t===404||t===500&&e&&/routing:\s*not\s*found/i.test(e)?"NOT_FOUND":(t>=500||t>=400,"GATEWAY_ERROR")}var InMemoryIpfsStatePersistence=class{states=new Map;async load(t){return this.states.get(t)??null}async save(t,e){this.states.set(t,{...e})}async clear(t){this.states.delete(t)}},IPNS_HKDF_INFO="ipfs-storage-ed25519-v1",libp2pCryptoModule=null,libp2pPeerIdModule=null;async function loadLibp2pModules(){return libp2pCryptoModule||([libp2pCryptoModule,libp2pPeerIdModule]=await Promise.all([__vitePreload(()=>import("./index-BK7KZRGS.js").then(t=>t.u),[]),__vitePreload(()=>import("./index-5yIz3gKM.js"),__vite__mapDeps([0,1]))])),{generateKeyPairFromSeed:libp2pCryptoModule.generateKeyPairFromSeed,peerIdFromPrivateKey:libp2pPeerIdModule.peerIdFromPrivateKey}}function deriveEd25519KeyMaterial(t,e=IPNS_HKDF_INFO){const s=hexToBytes2(t),r=new TextEncoder().encode(e);return hkdf(sha256,s,void 0,r,32)}async function deriveIpnsIdentity(t){const{generateKeyPairFromSeed:e,peerIdFromPrivateKey:s}=await loadLibp2pModules(),r=deriveEd25519KeyMaterial(t),a=await e("Ed25519",r),o=s(a);return{keyPair:a,ipnsName:o.toString()}}var DEFAULT_LIFETIME_MS=99*365*24*60*60*1e3,ipnsModule=null;async function loadIpnsModule(){if(!ipnsModule){const t=await __vitePreload(()=>import("./index-DMlarQw3.js"),__vite__mapDeps([2,1]));ipnsModule={createIPNSRecord:t.createIPNSRecord,marshalIPNSRecord:t.marshalIPNSRecord,unmarshalIPNSRecord:t.unmarshalIPNSRecord}}return ipnsModule}async function createSignedRecord(t,e,s,r=DEFAULT_LIFETIME_MS){const{createIPNSRecord:a,marshalIPNSRecord:o}=await loadIpnsModule(),l=await a(t,`/ipfs/${e}`,s,r);return o(l)}async function parseRoutingApiResponse(t){const{unmarshalIPNSRecord:e}=await loadIpnsModule(),s=t.trim().split(`
`);for(const r of s)if(r.trim())try{const a=JSON.parse(r);if(a.Extra){const o=base64ToUint8Array(a.Extra),l=e(o),c=typeof l.value=="string"?new TextEncoder().encode(l.value):l.value,f=new TextDecoder().decode(c).match(/\/ipfs\/([a-zA-Z0-9]+)/);if(f)return{cid:f[1],sequence:l.sequence,recordData:o}}}catch{continue}return null}function base64ToUint8Array(t){const e=atob(t),s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return s}var DEFAULT_IPNS_TTL_MS=6e4,DEFAULT_FAILURE_COOLDOWN_MS=6e4,DEFAULT_FAILURE_THRESHOLD=3,DEFAULT_KNOWN_FRESH_WINDOW_MS=3e4,IpfsCache=class{ipnsRecords=new Map;content=new Map;gatewayFailures=new Map;knownFreshTimestamps=new Map;ipnsTtlMs;failureCooldownMs;failureThreshold;knownFreshWindowMs;constructor(t){this.ipnsTtlMs=t?.ipnsTtlMs??DEFAULT_IPNS_TTL_MS,this.failureCooldownMs=t?.failureCooldownMs??DEFAULT_FAILURE_COOLDOWN_MS,this.failureThreshold=t?.failureThreshold??DEFAULT_FAILURE_THRESHOLD,this.knownFreshWindowMs=t?.knownFreshWindowMs??DEFAULT_KNOWN_FRESH_WINDOW_MS}getIpnsRecord(t){const e=this.ipnsRecords.get(t);return e?Date.now()-e.timestamp>this.ipnsTtlMs?(this.ipnsRecords.delete(t),null):e.data:null}getIpnsRecordIgnoreTtl(t){return this.ipnsRecords.get(t)?.data??null}setIpnsRecord(t,e){this.ipnsRecords.set(t,{data:e,timestamp:Date.now()})}invalidateIpns(t){this.ipnsRecords.delete(t)}getContent(t){return this.content.get(t)?.data??null}setContent(t,e){this.content.set(t,{data:e,timestamp:Date.now()})}recordGatewayFailure(t){const e=this.gatewayFailures.get(t);this.gatewayFailures.set(t,{count:(e?.count??0)+1,lastFailure:Date.now()})}recordGatewaySuccess(t){this.gatewayFailures.delete(t)}isGatewayInCooldown(t){const e=this.gatewayFailures.get(t);return!e||e.count<this.failureThreshold?!1:Date.now()-e.lastFailure>=this.failureCooldownMs?(this.gatewayFailures.delete(t),!1):!0}markIpnsFresh(t){this.knownFreshTimestamps.set(t,Date.now())}isIpnsKnownFresh(t){const e=this.knownFreshTimestamps.get(t);return e?Date.now()-e>this.knownFreshWindowMs?(this.knownFreshTimestamps.delete(t),!1):!0:!1}clear(){this.ipnsRecords.clear(),this.content.clear(),this.gatewayFailures.clear(),this.knownFreshTimestamps.clear()}},DEFAULT_CONNECTIVITY_TIMEOUT_MS=5e3,DEFAULT_FETCH_TIMEOUT_MS=15e3,DEFAULT_RESOLVE_TIMEOUT_MS=1e4,DEFAULT_PUBLISH_TIMEOUT_MS=3e4,DEFAULT_GATEWAY_PATH_TIMEOUT_MS=3e3,DEFAULT_ROUTING_API_TIMEOUT_MS=2e3,IpfsHttpClient=class{gateways;fetchTimeoutMs;resolveTimeoutMs;publishTimeoutMs;connectivityTimeoutMs;debug;cache;constructor(t,e){this.gateways=t.gateways,this.fetchTimeoutMs=t.fetchTimeoutMs??DEFAULT_FETCH_TIMEOUT_MS,this.resolveTimeoutMs=t.resolveTimeoutMs??DEFAULT_RESOLVE_TIMEOUT_MS,this.publishTimeoutMs=t.publishTimeoutMs??DEFAULT_PUBLISH_TIMEOUT_MS,this.connectivityTimeoutMs=t.connectivityTimeoutMs??DEFAULT_CONNECTIVITY_TIMEOUT_MS,this.debug=t.debug??!1,this.cache=e}getGateways(){return[...this.gateways]}async testConnectivity(t){const e=Date.now();try{const s=await this.fetchWithTimeout(`${t}/api/v0/version`,this.connectivityTimeoutMs,{method:"POST"});return s.ok?{gateway:t,healthy:!0,responseTimeMs:Date.now()-e}:{gateway:t,healthy:!1,error:`HTTP ${s.status}`}}catch(s){return{gateway:t,healthy:!1,error:s instanceof Error?s.message:String(s)}}}async findHealthyGateways(){return(await Promise.allSettled(this.gateways.map(e=>this.testConnectivity(e)))).filter(e=>e.status==="fulfilled"&&e.value.healthy).map(e=>e.value.gateway)}getAvailableGateways(){return this.gateways.filter(t=>!this.cache.isGatewayInCooldown(t))}async upload(t,e){const s=e??this.getAvailableGateways();if(s.length===0)throw new IpfsError("No gateways available for upload","NETWORK_ERROR");const r=new TextEncoder().encode(JSON.stringify(t)),a=s.map(async o=>{try{const l=new FormData;l.append("file",new Blob([r],{type:"application/json"}),"data.json");const c=await this.fetchWithTimeout(`${o}/api/v0/add?pin=true&cid-version=1`,this.publishTimeoutMs,{method:"POST",body:l});if(!c.ok)throw new IpfsError(`Upload failed: HTTP ${c.status}`,classifyHttpStatus(c.status),o);const u=await c.json();return this.cache.recordGatewaySuccess(o),this.log(`Uploaded to ${o}: CID=${u.Hash}`),{cid:u.Hash,gateway:o}}catch(l){throw l instanceof IpfsError&&l.shouldTriggerCircuitBreaker&&this.cache.recordGatewayFailure(o),l}});try{return{cid:(await Promise.any(a)).cid}}catch(o){throw o instanceof AggregateError?new IpfsError(`Upload failed on all gateways: ${o.errors.map(l=>l.message).join("; ")}`,"NETWORK_ERROR"):o}}async fetchContent(t,e){const s=this.cache.getContent(t);if(s)return this.log(`Content cache hit for CID=${t}`),s;const r=e??this.getAvailableGateways();if(r.length===0)throw new IpfsError("No gateways available for fetch","NETWORK_ERROR");const a=r.map(async o=>{try{const l=await this.fetchWithTimeout(`${o}/ipfs/${t}`,this.fetchTimeoutMs,{headers:{Accept:"application/octet-stream"}});if(!l.ok){const u=await l.text().catch(()=>"");throw new IpfsError(`Fetch failed: HTTP ${l.status}`,classifyHttpStatus(l.status,u),o)}const c=await l.json();return this.cache.recordGatewaySuccess(o),this.cache.setContent(t,c),this.log(`Fetched from ${o}: CID=${t}`),c}catch(l){throw l instanceof IpfsError&&l.shouldTriggerCircuitBreaker&&this.cache.recordGatewayFailure(o),l}});try{return await Promise.any(a)}catch(o){throw o instanceof AggregateError?new IpfsError(`Fetch failed on all gateways for CID=${t}`,"NETWORK_ERROR"):o}}async resolveIpnsViaRoutingApi(t,e,s=DEFAULT_ROUTING_API_TIMEOUT_MS){try{const r=await this.fetchWithTimeout(`${t}/api/v0/routing/get?arg=/ipns/${e}`,s,{method:"POST"});if(!r.ok){const l=await r.text().catch(()=>""),c=classifyHttpStatus(r.status,l);if(c==="NOT_FOUND")return null;throw new IpfsError(`Routing API: HTTP ${r.status}`,c,t)}const a=await r.text(),o=await parseRoutingApiResponse(a);return o?(this.cache.recordGatewaySuccess(t),{cid:o.cid,sequence:o.sequence,gateway:t,recordData:o.recordData}):null}catch(r){if(r instanceof IpfsError)throw r;return classifyFetchError(r)!=="NOT_FOUND"&&this.cache.recordGatewayFailure(t),null}}async resolveIpnsViaGatewayPath(t,e,s=DEFAULT_GATEWAY_PATH_TIMEOUT_MS){try{const r=await this.fetchWithTimeout(`${t}/ipns/${e}`,s,{headers:{Accept:"application/json"}});if(!r.ok)return null;const a=await r.json(),o=r.headers.get("X-Ipfs-Path");if(o){const l=o.match(/\/ipfs\/([a-zA-Z0-9]+)/);if(l)return this.cache.recordGatewaySuccess(t),{cid:l[1],content:a}}return{cid:"",content:a}}catch{return null}}async resolveIpns(t,e){const s=e??this.getAvailableGateways();if(s.length===0)return{best:null,allResults:[],respondedCount:0,totalGateways:0};const r=[];let a=0;const o=s.map(async c=>{const u=await this.resolveIpnsViaRoutingApi(c,t,this.resolveTimeoutMs);return u&&r.push(u),a++,u});await Promise.race([Promise.allSettled(o),new Promise(c=>setTimeout(c,this.resolveTimeoutMs+1e3))]);let l=null;for(const c of r)(!l||c.sequence>l.sequence)&&(l=c);return l&&this.cache.setIpnsRecord(t,l),{best:l,allResults:r,respondedCount:a,totalGateways:s.length}}async publishIpnsViaRoutingApi(t,e,s,r=DEFAULT_PUBLISH_TIMEOUT_MS){try{const a=new FormData;a.append("file",new Blob([new Uint8Array(s)]),"record");const o=await this.fetchWithTimeout(`${t}/api/v0/routing/put?arg=/ipns/${e}&allow-offline=true`,r,{method:"POST",body:a});if(!o.ok){const l=await o.text().catch(()=>"");throw new IpfsError(`IPNS publish: HTTP ${o.status}: ${l.slice(0,100)}`,classifyHttpStatus(o.status,l),t)}return this.cache.recordGatewaySuccess(t),this.log(`IPNS published to ${t}: ${e}`),!0}catch(a){return a instanceof IpfsError&&a.shouldTriggerCircuitBreaker&&this.cache.recordGatewayFailure(t),this.log(`IPNS publish to ${t} failed: ${a}`),!1}}async publishIpns(t,e,s){const r=s??this.getAvailableGateways();if(r.length===0)return{success:!1,error:"No gateways available"};const a=await Promise.allSettled(r.map(l=>this.publishIpnsViaRoutingApi(l,t,e,this.publishTimeoutMs))),o=[];return a.forEach((l,c)=>{l.status==="fulfilled"&&l.value&&o.push(r[c])}),{success:o.length>0,ipnsName:t,successfulGateways:o,error:o.length===0?"All gateways failed":void 0}}async verifyIpnsRecord(t,e,s,r=3,a=1e3){for(let o=0;o<r;o++){o>0&&await new Promise(c=>setTimeout(c,a));const{best:l}=await this.resolveIpns(t);if(l&&l.sequence>=e&&l.cid===s)return!0}return!1}async fetchWithTimeout(t,e,s){const r=new AbortController,a=setTimeout(()=>r.abort(),e);try{return await fetch(t,{...s,signal:r.signal})}finally{clearTimeout(a)}}log(t){this.debug&&console.log(`[IPFS-HTTP] ${t}`)}};function mergeTxfData(t,e){let s=0,r=0,a=0;const o=t._meta?.version??0,l=e._meta?.version??0,u={...o>=l?t._meta:e._meta,version:Math.max(o,l)+1,updatedAt:Date.now()},f=mergeTombstones(t._tombstones??[],e._tombstones??[]),d=new Set(f.map(V=>`${V.tokenId}:${V.stateHash}`)),p=getTokenKeys(t),m=getTokenKeys(e),y=new Set([...p,...m]),b={};for(const V of y){const ee=V.startsWith("_")?V.slice(1):V,Q=t[V],W=e[V];if(isTokenTombstoned(ee,Q,W,d)){p.has(V)&&r++;continue}Q&&!W?b[V]=Q:!Q&&W?(b[V]=W,s++):Q&&W&&(b[V]=Q,a++)}const E=mergeArrayById(t._outbox??[],e._outbox??[],"id"),C=mergeArrayById(t._sent??[],e._sent??[],"tokenId"),j=mergeArrayById(t._invalid??[],e._invalid??[],"tokenId"),B=t._nametags??[],D=e._nametags??[],F=mergeNametagsByName(B,D);return{merged:{_meta:u,_tombstones:f.length>0?f:void 0,_nametags:F.length>0?F:void 0,_outbox:E.length>0?E:void 0,_sent:C.length>0?C:void 0,_invalid:j.length>0?j:void 0,...b},added:s,removed:r,conflicts:a}}function mergeTombstones(t,e){const s=new Map;for(const r of[...t,...e]){const a=`${r.tokenId}:${r.stateHash}`,o=s.get(a);(!o||r.timestamp>o.timestamp)&&s.set(a,r)}return Array.from(s.values())}function getTokenKeys(t){const e=new Set(["_meta","_tombstones","_outbox","_sent","_invalid","_nametag","_nametags","_mintOutbox","_invalidatedNametags","_integrity"]),s=new Set;for(const r of Object.keys(t))e.has(r)||r.startsWith("archived-")||r.startsWith("_forked_")||s.add(r);return s}function isTokenTombstoned(t,e,s,r){for(const a of r)if(a.startsWith(`${t}:`))return!0;return!1}function mergeNametagsByName(t,e){const s=new Map;for(const r of t)r.name&&s.set(r.name,r);for(const r of e)r.name&&!s.has(r.name)&&s.set(r.name,r);return Array.from(s.values())}function mergeArrayById(t,e,s){const r=new Map;for(const a of t){const o=a[s];o!==void 0&&r.set(o,a)}for(const a of e){const o=a[s];o!==void 0&&!r.has(o)&&r.set(o,a)}return Array.from(r.values())}var IpnsSubscriptionClient=class{ws=null;subscriptions=new Map;reconnectTimeout=null;pingInterval=null;fallbackPollInterval=null;wsUrl;createWebSocket;pingIntervalMs;initialReconnectDelayMs;maxReconnectDelayMs;debugEnabled;reconnectAttempts=0;isConnecting=!1;connectionOpenedAt=0;destroyed=!1;minStableConnectionMs=3e4;fallbackPollFn=null;fallbackPollIntervalMs=0;constructor(t){this.wsUrl=t.wsUrl,this.createWebSocket=t.createWebSocket,this.pingIntervalMs=t.pingIntervalMs??3e4,this.initialReconnectDelayMs=t.reconnectDelayMs??5e3,this.maxReconnectDelayMs=t.maxReconnectDelayMs??6e4,this.debugEnabled=t.debug??!1}subscribe(t,e){if(!t||typeof t!="string")return this.log("Invalid IPNS name for subscription"),()=>{};const s=!this.subscriptions.has(t);return s&&this.subscriptions.set(t,new Set),this.subscriptions.get(t).add(e),s&&this.ws?.readyState===WebSocketReadyState.OPEN&&this.sendSubscribe([t]),(!this.ws||this.ws.readyState!==WebSocketReadyState.OPEN)&&this.connect(),()=>{const r=this.subscriptions.get(t);r&&(r.delete(e),r.size===0&&(this.subscriptions.delete(t),this.ws?.readyState===WebSocketReadyState.OPEN&&this.sendUnsubscribe([t]),this.subscriptions.size===0&&this.disconnect()))}}onUpdate(t){return this.subscriptions.has("*")||this.subscriptions.set("*",new Set),this.subscriptions.get("*").add(t),()=>{const e=this.subscriptions.get("*");e&&(e.delete(t),e.size===0&&this.subscriptions.delete("*"))}}setFallbackPoll(t,e){this.fallbackPollFn=t,this.fallbackPollIntervalMs=e,this.isConnected()||this.startFallbackPolling()}connect(){if(!this.destroyed&&!(this.ws?.readyState===WebSocketReadyState.OPEN||this.isConnecting)){this.isConnecting=!0;try{this.log(`Connecting to ${this.wsUrl}...`),this.ws=this.createWebSocket(this.wsUrl),this.ws.onopen=()=>{this.log("WebSocket connected"),this.isConnecting=!1,this.connectionOpenedAt=Date.now();const t=Array.from(this.subscriptions.keys()).filter(e=>e!=="*");t.length>0&&this.sendSubscribe(t),this.startPingInterval(),this.stopFallbackPolling()},this.ws.onmessage=t=>{this.handleMessage(t.data)},this.ws.onclose=()=>{const t=this.connectionOpenedAt>0?Date.now()-this.connectionOpenedAt:0,e=t>=this.minStableConnectionMs;this.log(`WebSocket closed (duration: ${Math.round(t/1e3)}s)`),this.isConnecting=!1,this.connectionOpenedAt=0,this.stopPingInterval(),e&&(this.reconnectAttempts=0),this.startFallbackPolling(),this.scheduleReconnect()},this.ws.onerror=()=>{this.log("WebSocket error"),this.isConnecting=!1}}catch(t){this.log(`Failed to connect: ${t}`),this.isConnecting=!1,this.startFallbackPolling(),this.scheduleReconnect()}}}disconnect(){this.destroyed=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.stopPingInterval(),this.stopFallbackPolling(),this.ws&&(this.ws.onopen=null,this.ws.onclose=null,this.ws.onerror=null,this.ws.onmessage=null,this.ws.close(),this.ws=null),this.isConnecting=!1,this.reconnectAttempts=0}isConnected(){return this.ws?.readyState===WebSocketReadyState.OPEN}handleMessage(t){try{const e=JSON.parse(t);switch(e.type){case"update":e.name&&e.sequence!==void 0&&this.notifySubscribers({type:"update",name:e.name,sequence:e.sequence,cid:e.cid??"",timestamp:e.timestamp||new Date().toISOString()});break;case"subscribed":this.log(`Subscribed to ${e.names?.length||0} names`);break;case"unsubscribed":this.log(`Unsubscribed from ${e.names?.length||0} names`);break;case"pong":break;case"error":this.log(`Server error: ${e.message}`);break;default:break}}catch{this.log("Failed to parse message")}}notifySubscribers(t){const e=this.subscriptions.get(t.name);if(e){this.log(`Update: ${t.name.slice(0,16)}... seq=${t.sequence}`);for(const r of e)try{r(t)}catch{}}const s=this.subscriptions.get("*");if(s)for(const r of s)try{r(t)}catch{}}sendSubscribe(t){this.ws?.readyState===WebSocketReadyState.OPEN&&this.ws.send(JSON.stringify({action:"subscribe",names:t}))}sendUnsubscribe(t){this.ws?.readyState===WebSocketReadyState.OPEN&&this.ws.send(JSON.stringify({action:"unsubscribe",names:t}))}scheduleReconnect(){if(this.destroyed||this.reconnectTimeout||Array.from(this.subscriptions.keys()).filter(s=>s!=="*").length===0)return;this.reconnectAttempts++;const e=Math.min(this.initialReconnectDelayMs*Math.pow(2,this.reconnectAttempts-1),this.maxReconnectDelayMs);this.log(`Reconnecting in ${(e/1e3).toFixed(1)}s (attempt ${this.reconnectAttempts})...`),this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=null,this.connect()},e)}startPingInterval(){this.stopPingInterval(),this.pingInterval=setInterval(()=>{this.ws?.readyState===WebSocketReadyState.OPEN&&this.ws.send(JSON.stringify({action:"ping"}))},this.pingIntervalMs)}stopPingInterval(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}startFallbackPolling(){this.fallbackPollInterval||!this.fallbackPollFn||this.destroyed||(this.log(`Starting fallback polling (${this.fallbackPollIntervalMs/1e3}s interval)`),this.fallbackPollFn().catch(()=>{}),this.fallbackPollInterval=setInterval(()=>{this.fallbackPollFn?.().catch(()=>{})},this.fallbackPollIntervalMs))}stopFallbackPolling(){this.fallbackPollInterval&&(clearInterval(this.fallbackPollInterval),this.fallbackPollInterval=null)}log(t){this.debugEnabled&&console.log(`[IPNS-WS] ${t}`)}},AsyncSerialQueue=class{tail=Promise.resolve();enqueue(t){let e,s;const r=new Promise((a,o)=>{e=a,s=o});return this.tail=this.tail.then(()=>t().then(e,s),()=>t().then(e,s)),r}},WriteBuffer=class{txfData=null;get isEmpty(){return this.txfData===null}clear(){this.txfData=null}mergeFrom(t){t.txfData&&!this.txfData&&(this.txfData=t.txfData)}},IpfsStorageProvider=class{id="ipfs";name="IPFS Storage";type="p2p";status="disconnected";identity=null;ipnsKeyPair=null;ipnsName=null;ipnsSequenceNumber=0n;lastCid=null;lastKnownRemoteSequence=0n;dataVersion=0;remoteCid=null;cache;httpClient;statePersistence;eventCallbacks=new Set;debug;ipnsLifetimeMs;createWebSocket;wsUrl;fallbackPollIntervalMs;subscriptionClient=null;subscriptionUnsubscribe=null;flushQueue=new AsyncSerialQueue;pendingBuffer=new WriteBuffer;flushTimer=null;flushDebounceMs;isShuttingDown=!1;constructor(t,e){const s=t?.gateways??getIpfsGatewayUrls();this.debug=t?.debug??!1,this.ipnsLifetimeMs=t?.ipnsLifetimeMs??99*365*24*60*60*1e3,this.flushDebounceMs=t?.flushDebounceMs??2e3,this.cache=new IpfsCache({ipnsTtlMs:t?.ipnsCacheTtlMs,failureCooldownMs:t?.circuitBreakerCooldownMs,failureThreshold:t?.circuitBreakerThreshold,knownFreshWindowMs:t?.knownFreshWindowMs}),this.httpClient=new IpfsHttpClient({gateways:s,fetchTimeoutMs:t?.fetchTimeoutMs,resolveTimeoutMs:t?.resolveTimeoutMs,publishTimeoutMs:t?.publishTimeoutMs,connectivityTimeoutMs:t?.connectivityTimeoutMs,debug:this.debug},this.cache),this.statePersistence=e??new InMemoryIpfsStatePersistence,this.createWebSocket=t?.createWebSocket,this.wsUrl=t?.wsUrl,this.fallbackPollIntervalMs=t?.fallbackPollIntervalMs??9e4}async connect(){await this.initialize()}async disconnect(){await this.shutdown()}isConnected(){return this.status==="connected"}getStatus(){return this.status}setIdentity(t){this.identity=t}async initialize(){if(!this.identity)return this.log("Cannot initialize: no identity set"),!1;this.status="connecting",this.emitEvent({type:"storage:loading",timestamp:Date.now()});try{const{keyPair:t,ipnsName:e}=await deriveIpnsIdentity(this.identity.privateKey);this.ipnsKeyPair=t,this.ipnsName=e,this.log(`IPNS name derived: ${e}`);const s=await this.statePersistence.load(e);if(s&&(this.ipnsSequenceNumber=BigInt(s.sequenceNumber),this.lastCid=s.lastCid,this.remoteCid=s.lastCid,this.dataVersion=s.version,this.log(`Loaded persisted state: seq=${this.ipnsSequenceNumber}, cid=${this.lastCid}`)),this.createWebSocket)try{const r=this.wsUrl??this.deriveWsUrl();r&&(this.subscriptionClient=new IpnsSubscriptionClient({wsUrl:r,createWebSocket:this.createWebSocket,debug:this.debug}),this.subscriptionUnsubscribe=this.subscriptionClient.subscribe(e,a=>{this.log(`Push update: seq=${a.sequence}, cid=${a.cid}`),this.emitEvent({type:"storage:remote-updated",timestamp:Date.now(),data:{name:a.name,sequence:a.sequence,cid:a.cid}})}),this.subscriptionClient.setFallbackPoll(()=>this.pollForRemoteChanges(),this.fallbackPollIntervalMs),this.subscriptionClient.connect())}catch(r){this.log(`Failed to set up IPNS subscription: ${r}`)}return this.httpClient.findHealthyGateways().then(r=>{r.length>0?this.log(`${r.length} healthy gateway(s) found`):this.log("Warning: no healthy gateways found")}).catch(()=>{}),this.isShuttingDown=!1,this.status="connected",this.emitEvent({type:"storage:loaded",timestamp:Date.now()}),!0}catch(t){return this.status="error",this.emitEvent({type:"storage:error",timestamp:Date.now(),error:t instanceof Error?t.message:String(t)}),!1}}async shutdown(){this.isShuttingDown=!0,this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),await this.flushQueue.enqueue(async()=>{if(!this.pendingBuffer.isEmpty)try{await this.executeFlush()}catch{this.log("Final flush on shutdown failed (data may be lost)")}}),this.subscriptionUnsubscribe&&(this.subscriptionUnsubscribe(),this.subscriptionUnsubscribe=null),this.subscriptionClient&&(this.subscriptionClient.disconnect(),this.subscriptionClient=null),this.cache.clear(),this.status="disconnected"}async save(t){return!this.ipnsKeyPair||!this.ipnsName?{success:!1,error:"Not initialized",timestamp:Date.now()}:(this.pendingBuffer.txfData=t,this.scheduleFlush(),{success:!0,timestamp:Date.now()})}async _doSave(t){if(!this.ipnsKeyPair||!this.ipnsName)return{success:!1,error:"Not initialized",timestamp:Date.now()};this.emitEvent({type:"storage:saving",timestamp:Date.now()});try{this.dataVersion++;const e={...t._meta,version:this.dataVersion,ipnsName:this.ipnsName,updatedAt:Date.now()};this.remoteCid&&(e.lastCid=this.remoteCid);const s={...t,_meta:e},{cid:r}=await this.httpClient.upload(s);this.log(`Content uploaded: CID=${r}`);const o=(this.ipnsSequenceNumber>this.lastKnownRemoteSequence?this.ipnsSequenceNumber:this.lastKnownRemoteSequence)+1n,l=await createSignedRecord(this.ipnsKeyPair,r,o,this.ipnsLifetimeMs),c=await this.httpClient.publishIpns(this.ipnsName,l);return c.success?(this.ipnsSequenceNumber=o,this.lastCid=r,this.remoteCid=r,this.cache.setIpnsRecord(this.ipnsName,{cid:r,sequence:o,gateway:"local"}),this.cache.setContent(r,s),this.cache.markIpnsFresh(this.ipnsName),await this.statePersistence.save(this.ipnsName,{sequenceNumber:o.toString(),lastCid:r,version:this.dataVersion}),this.emitEvent({type:"storage:saved",timestamp:Date.now(),data:{cid:r,sequence:o.toString()}}),this.log(`Saved: CID=${r}, seq=${o}`),{success:!0,cid:r,timestamp:Date.now()}):(this.dataVersion--,this.log(`IPNS publish failed: ${c.error}`),{success:!1,error:c.error??"IPNS publish failed",timestamp:Date.now()})}catch(e){this.dataVersion--;const s=e instanceof Error?e.message:String(e);return this.emitEvent({type:"storage:error",timestamp:Date.now(),error:s}),{success:!1,error:s,timestamp:Date.now()}}}scheduleFlush(){this.isShuttingDown||(this.flushTimer&&clearTimeout(this.flushTimer),this.flushTimer=setTimeout(()=>{this.flushTimer=null,this.flushQueue.enqueue(()=>this.executeFlush()).catch(t=>{this.log(`Background flush failed: ${t}`)})},this.flushDebounceMs))}async executeFlush(){if(this.pendingBuffer.isEmpty)return;const t=this.pendingBuffer;this.pendingBuffer=new WriteBuffer;try{const e=t.txfData??{_meta:{version:0,address:this.identity?.directAddress??"",formatVersion:"2.0",updatedAt:0}},s=await this._doSave(e);if(!s.success)throw new Error(s.error??"Save failed");this.log(`Flushed successfully: CID=${s.cid}`)}catch(e){this.pendingBuffer.mergeFrom(t);const s=e instanceof Error?e.message:String(e);throw this.log(`Flush failed (will retry): ${s}`),this.scheduleFlush(),e}}async load(t){if(!this.ipnsName&&!t)return{success:!1,error:"Not initialized",source:"local",timestamp:Date.now()};this.emitEvent({type:"storage:loading",timestamp:Date.now()});try{if(t)return{success:!0,data:await this.httpClient.fetchContent(t),source:"remote",timestamp:Date.now()};const e=this.ipnsName;if(this.cache.isIpnsKnownFresh(e)){const l=this.cache.getIpnsRecordIgnoreTtl(e);if(l){const c=this.cache.getContent(l.cid);if(c)return this.log("Using known-fresh cached data"),{success:!0,data:c,source:"cache",timestamp:Date.now()}}}const s=this.cache.getIpnsRecord(e);if(s){const l=this.cache.getContent(s.cid);if(l)return this.log("IPNS cache hit"),{success:!0,data:l,source:"cache",timestamp:Date.now()};try{return{success:!0,data:await this.httpClient.fetchContent(s.cid),source:"remote",timestamp:Date.now()}}catch{}}const{best:r}=await this.httpClient.resolveIpns(e);if(!r)return this.log("IPNS record not found (new wallet?)"),{success:!1,error:"IPNS record not found",source:"remote",timestamp:Date.now()};r.sequence>this.lastKnownRemoteSequence&&(this.lastKnownRemoteSequence=r.sequence),this.remoteCid=r.cid;const a=await this.httpClient.fetchContent(r.cid),o=a?._meta?.version;return typeof o=="number"&&o>this.dataVersion&&(this.dataVersion=o),this.emitEvent({type:"storage:loaded",timestamp:Date.now(),data:{cid:r.cid,sequence:r.sequence.toString()}}),{success:!0,data:a,source:"remote",timestamp:Date.now()}}catch(e){if(this.ipnsName){const r=this.cache.getIpnsRecordIgnoreTtl(this.ipnsName);if(r){const a=this.cache.getContent(r.cid);if(a)return this.log("Network error, returning stale cache"),{success:!0,data:a,source:"cache",timestamp:Date.now()}}}const s=e instanceof Error?e.message:String(e);return this.emitEvent({type:"storage:error",timestamp:Date.now(),error:s}),{success:!1,error:s,source:"remote",timestamp:Date.now()}}}async sync(t){return this.flushQueue.enqueue(async()=>{this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.emitEvent({type:"sync:started",timestamp:Date.now()});try{this.pendingBuffer.clear();const e=await this.load();if(!e.success||!e.data){this.log("No remote data found, uploading local data");const d=await this._doSave(t);return this.emitEvent({type:"sync:completed",timestamp:Date.now()}),{success:d.success,merged:t,added:0,removed:0,conflicts:0,error:d.error}}const s=e.data,r=t._meta?.version??0,a=s._meta?.version??0;if(r===a&&this.lastCid)return this.log("Data is in sync (same version)"),this.emitEvent({type:"sync:completed",timestamp:Date.now()}),{success:!0,merged:t,added:0,removed:0,conflicts:0};this.log(`Merging: local v${r} <-> remote v${a}`);const{merged:o,added:l,removed:c,conflicts:u}=mergeTxfData(t,s);u>0&&this.emitEvent({type:"sync:conflict",timestamp:Date.now(),data:{conflicts:u}});const f=await this._doSave(o);return this.emitEvent({type:"sync:completed",timestamp:Date.now(),data:{added:l,removed:c,conflicts:u}}),{success:f.success,merged:o,added:l,removed:c,conflicts:u,error:f.error}}catch(e){const s=e instanceof Error?e.message:String(e);return this.emitEvent({type:"sync:error",timestamp:Date.now(),error:s}),{success:!1,added:0,removed:0,conflicts:0,error:s}}})}async exists(){if(!this.ipnsName)return!1;if(this.cache.getIpnsRecord(this.ipnsName))return!0;const{best:e}=await this.httpClient.resolveIpns(this.ipnsName);return e!==null}async clear(){if(!this.ipnsKeyPair||!this.ipnsName)return!1;this.pendingBuffer.clear(),this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null);const t={_meta:{version:0,address:this.identity?.directAddress??"",ipnsName:this.ipnsName,formatVersion:"2.0",updatedAt:Date.now()}},e=await this._doSave(t);return e.success&&(this.cache.clear(),await this.statePersistence.clear(this.ipnsName)),e.success}onEvent(t){return this.eventCallbacks.add(t),()=>{this.eventCallbacks.delete(t)}}getIpnsName(){return this.ipnsName}getLastCid(){return this.lastCid}getSequenceNumber(){return this.ipnsSequenceNumber}getDataVersion(){return this.dataVersion}getRemoteCid(){return this.remoteCid}async waitForFlush(){this.flushTimer?(clearTimeout(this.flushTimer),this.flushTimer=null,await this.flushQueue.enqueue(()=>this.executeFlush()).catch(()=>{})):this.pendingBuffer.isEmpty?await this.flushQueue.enqueue(async()=>{}):await this.flushQueue.enqueue(()=>this.executeFlush()).catch(()=>{})}deriveWsUrl(){const t=this.httpClient.getGateways();if(t.length===0)return null;const e=t[0],s=e.startsWith("https://")?"wss://":"ws://",r=e.replace(/^https?:\/\//,"");return`${s}${r}/ws/ipns`}async pollForRemoteChanges(){if(this.ipnsName)try{const{best:t}=await this.httpClient.resolveIpns(this.ipnsName);t&&t.sequence>this.lastKnownRemoteSequence&&(this.log(`Poll detected remote change: seq=${t.sequence} (was ${this.lastKnownRemoteSequence})`),this.lastKnownRemoteSequence=t.sequence,this.emitEvent({type:"storage:remote-updated",timestamp:Date.now(),data:{name:this.ipnsName,sequence:Number(t.sequence),cid:t.cid}}))}catch{}}emitEvent(t){for(const e of this.eventCallbacks)try{e(t)}catch{}}log(t){this.debug&&console.log(`[IPFS-Storage] ${t}`)}},KEY_PREFIX="sphere_ipfs_";function seqKey(t){return`${KEY_PREFIX}seq_${t}`}function cidKey(t){return`${KEY_PREFIX}cid_${t}`}function verKey(t){return`${KEY_PREFIX}ver_${t}`}var BrowserIpfsStatePersistence=class{async load(t){try{const e=localStorage.getItem(seqKey(t));return e?{sequenceNumber:e,lastCid:localStorage.getItem(cidKey(t)),version:parseInt(localStorage.getItem(verKey(t))??"0",10)}:null}catch{return null}}async save(t,e){try{localStorage.setItem(seqKey(t),e.sequenceNumber),e.lastCid?localStorage.setItem(cidKey(t),e.lastCid):localStorage.removeItem(cidKey(t)),localStorage.setItem(verKey(t),String(e.version))}catch{}}async clear(t){try{localStorage.removeItem(seqKey(t)),localStorage.removeItem(cidKey(t)),localStorage.removeItem(verKey(t))}catch{}}};function createBrowserWebSocket2(t){return new WebSocket(t)}function createBrowserIpfsStorageProvider(t){return new IpfsStorageProvider({...t,createWebSocket:t?.createWebSocket??createBrowserWebSocket2},new BrowserIpfsStatePersistence)}var CoinGeckoPriceProvider=class{platform="coingecko";cache=new Map;apiKey;cacheTtlMs;timeout;debug;baseUrl;storage;fetchPromise=null;fetchNames=null;persistentCacheLoaded=!1;loadCachePromise=null;constructor(t){this.apiKey=t?.apiKey,this.cacheTtlMs=t?.cacheTtlMs??6e4,this.timeout=t?.timeout??1e4,this.debug=t?.debug??!1,this.storage=t?.storage??null,this.baseUrl=t?.baseUrl??(this.apiKey?"https://pro-api.coingecko.com/api/v3":"https://api.coingecko.com/api/v3")}async getPrices(t){if(t.length===0)return new Map;!this.persistentCacheLoaded&&this.storage&&await this.loadFromStorage();const e=Date.now(),s=new Map,r=[];for(const o of t){const l=this.cache.get(o);l&&l.expiresAt>e?s.set(o,l.price):r.push(o)}if(r.length===0)return s;if(this.fetchPromise&&this.fetchNames&&r.every(l=>this.fetchNames.has(l))){this.debug&&console.log("[CoinGecko] Deduplicating request, reusing in-flight fetch");const l=await this.fetchPromise;for(const c of r){const u=l.get(c);u&&s.set(c,u)}return s}const a=this.doFetch(r);this.fetchPromise=a,this.fetchNames=new Set(r);try{const o=await a;for(const[l,c]of o)s.set(l,c)}finally{this.fetchPromise===a&&(this.fetchPromise=null,this.fetchNames=null)}return s}async doFetch(t){const e=new Map,s=Date.now();try{const r=t.join(","),a=`${this.baseUrl}/simple/price?ids=${encodeURIComponent(r)}&vs_currencies=usd,eur&include_24hr_change=true`,o={Accept:"application/json"};this.apiKey&&(o["x-cg-pro-api-key"]=this.apiKey),this.debug&&console.log(`[CoinGecko] Fetching prices for: ${t.join(", ")}`);const l=await fetch(a,{headers:o,signal:AbortSignal.timeout(this.timeout)});if(!l.ok)throw l.status===429&&this.extendCacheOnRateLimit(t),new Error(`CoinGecko API error: ${l.status} ${l.statusText}`);const c=await l.json();for(const[u,f]of Object.entries(c))if(f&&typeof f=="object"){const d={tokenName:u,priceUsd:f.usd??0,priceEur:f.eur,change24h:f.usd_24h_change,timestamp:s};this.cache.set(u,{price:d,expiresAt:s+this.cacheTtlMs}),e.set(u,d)}for(const u of t)if(!e.has(u)){const f={tokenName:u,priceUsd:0,priceEur:0,change24h:0,timestamp:s};this.cache.set(u,{price:f,expiresAt:s+this.cacheTtlMs}),e.set(u,f)}this.debug&&console.log(`[CoinGecko] Fetched ${e.size} prices`),this.saveToStorage()}catch(r){this.debug&&console.warn("[CoinGecko] Fetch failed, using stale cache:",r);for(const a of t){const o=this.cache.get(a);o&&e.set(a,o.price)}}return e}async loadFromStorage(){if(this.loadCachePromise)return this.loadCachePromise;this.loadCachePromise=this.doLoadFromStorage();try{await this.loadCachePromise}finally{this.loadCachePromise=null}}async doLoadFromStorage(){if(this.persistentCacheLoaded=!0,!!this.storage)try{const[t,e]=await Promise.all([this.storage.get(STORAGE_KEYS_GLOBAL.PRICE_CACHE),this.storage.get(STORAGE_KEYS_GLOBAL.PRICE_CACHE_TS)]);if(!t||!e)return;const s=parseInt(e,10);if(isNaN(s)||Date.now()-s>this.cacheTtlMs)return;const a=JSON.parse(t),o=s+this.cacheTtlMs;for(const[l,c]of Object.entries(a))this.cache.has(l)||this.cache.set(l,{price:c,expiresAt:o});this.debug&&console.log(`[CoinGecko] Loaded ${Object.keys(a).length} prices from persistent cache`)}catch{}}saveToStorage(){if(!this.storage)return;const t={};for(const[e,s]of this.cache)t[e]=s.price;Promise.all([this.storage.set(STORAGE_KEYS_GLOBAL.PRICE_CACHE,JSON.stringify(t)),this.storage.set(STORAGE_KEYS_GLOBAL.PRICE_CACHE_TS,String(Date.now()))]).catch(()=>{})}extendCacheOnRateLimit(t){const s=Date.now()+6e4;for(const r of t){const a=this.cache.get(r);a&&(a.expiresAt=Math.max(a.expiresAt,s))}this.debug&&console.warn(`[CoinGecko] Rate-limited (429), extended cache TTL by ${6e4/1e3}s`)}async getPrice(t){return(await this.getPrices([t])).get(t)??null}clearCache(){this.cache.clear()}};function createPriceProvider(t){if(t.platform==="coingecko")return new CoinGeckoPriceProvider(t);throw new Error(`Unsupported price platform: ${String(t.platform)}`)}var FETCH_TIMEOUT_MS=1e4,TokenRegistry=class Kr{static instance=null;definitionsById;definitionsBySymbol;definitionsByName;remoteUrl=null;storage=null;refreshIntervalMs=TOKEN_REGISTRY_REFRESH_INTERVAL;refreshTimer=null;lastRefreshAt=0;refreshPromise=null;initialLoadPromise=null;constructor(){this.definitionsById=new Map,this.definitionsBySymbol=new Map,this.definitionsByName=new Map}static getInstance(){return Kr.instance||(Kr.instance=new Kr),Kr.instance}static configure(e){const s=Kr.getInstance();e.remoteUrl!==void 0&&(s.remoteUrl=e.remoteUrl),e.storage!==void 0&&(s.storage=e.storage),e.refreshIntervalMs!==void 0&&(s.refreshIntervalMs=e.refreshIntervalMs);const r=e.autoRefresh??!0;s.initialLoadPromise=s.performInitialLoad(r)}static resetInstance(){Kr.instance&&Kr.instance.stopAutoRefresh(),Kr.instance=null}static destroy(){Kr.resetInstance()}static async waitForReady(e=1e4){const s=Kr.getInstance();return s.initialLoadPromise?e<=0?s.initialLoadPromise:Promise.race([s.initialLoadPromise,new Promise(r=>setTimeout(()=>r(!1),e))]):s.definitionsById.size>0}async performInitialLoad(e){let s=!1;return this.storage&&(s=await this.loadFromCache()),s?(e&&this.remoteUrl&&this.startAutoRefresh(),!0):e&&this.remoteUrl?(s=await this.refreshFromRemote(),this.stopAutoRefresh(),this.refreshTimer=setInterval(()=>{this.refreshFromRemote()},this.refreshIntervalMs),s):!1}async loadFromCache(){if(!this.storage)return!1;try{const[e,s]=await Promise.all([this.storage.get(STORAGE_KEYS_GLOBAL.TOKEN_REGISTRY_CACHE),this.storage.get(STORAGE_KEYS_GLOBAL.TOKEN_REGISTRY_CACHE_TS)]);if(!e||!s)return!1;const r=parseInt(s,10);if(isNaN(r)||Date.now()-r>this.refreshIntervalMs||this.lastRefreshAt>r)return!1;const o=JSON.parse(e);return this.isValidDefinitionsArray(o)?(this.applyDefinitions(o),this.lastRefreshAt=r,!0):!1}catch{return!1}}async saveToCache(e){if(this.storage)try{await Promise.all([this.storage.set(STORAGE_KEYS_GLOBAL.TOKEN_REGISTRY_CACHE,JSON.stringify(e)),this.storage.set(STORAGE_KEYS_GLOBAL.TOKEN_REGISTRY_CACHE_TS,String(Date.now()))])}catch{}}applyDefinitions(e){this.definitionsById.clear(),this.definitionsBySymbol.clear(),this.definitionsByName.clear();for(const s of e){const r=s.id.toLowerCase();this.definitionsById.set(r,s),s.symbol&&this.definitionsBySymbol.set(s.symbol.toUpperCase(),s),this.definitionsByName.set(s.name.toLowerCase(),s)}}isValidDefinitionsArray(e){return Array.isArray(e)&&e.every(s=>s&&typeof s=="object"&&"id"in s)}async refreshFromRemote(){if(!this.remoteUrl)return!1;if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.doRefresh();try{return await this.refreshPromise}finally{this.refreshPromise=null}}async doRefresh(){try{const e=new AbortController,s=setTimeout(()=>e.abort(),FETCH_TIMEOUT_MS);let r;try{r=await fetch(this.remoteUrl,{headers:{Accept:"application/json"},signal:e.signal})}finally{clearTimeout(s)}if(!r.ok)return console.warn(`[TokenRegistry] Remote fetch failed: HTTP ${r.status} ${r.statusText}`),!1;const a=await r.json();if(!this.isValidDefinitionsArray(a))return console.warn("[TokenRegistry] Remote data is not a valid token definitions array"),!1;const o=a;return this.applyDefinitions(o),this.lastRefreshAt=Date.now(),this.saveToCache(o),!0}catch(e){const s=e instanceof Error?e.message:String(e);return console.warn(`[TokenRegistry] Remote refresh failed: ${s}`),!1}}startAutoRefresh(e){this.stopAutoRefresh(),e!==void 0&&(this.refreshIntervalMs=e),this.refreshFromRemote(),this.refreshTimer=setInterval(()=>{this.refreshFromRemote()},this.refreshIntervalMs)}stopAutoRefresh(){this.refreshTimer!==null&&(clearInterval(this.refreshTimer),this.refreshTimer=null)}getLastRefreshAt(){return this.lastRefreshAt}getDefinition(e){if(e)return this.definitionsById.get(e.toLowerCase())}getDefinitionBySymbol(e){if(e)return this.definitionsBySymbol.get(e.toUpperCase())}getDefinitionByName(e){if(e)return this.definitionsByName.get(e.toLowerCase())}getSymbol(e){const s=this.getDefinition(e);return s?.symbol?s.symbol:e.slice(0,6).toUpperCase()}getName(e){const s=this.getDefinition(e);return s?.name?s.name.charAt(0).toUpperCase()+s.name.slice(1):e}getDecimals(e){return this.getDefinition(e)?.decimals??0}getIconUrl(e,s=!0){const r=this.getDefinition(e);if(!r?.icons||r.icons.length===0)return null;if(s){const a=r.icons.find(o=>o.url.toLowerCase().includes(".png"));if(a)return a.url}return r.icons[0].url}isKnown(e){return this.definitionsById.has(e.toLowerCase())}getAllDefinitions(){return Array.from(this.definitionsById.values())}getFungibleTokens(){return this.getAllDefinitions().filter(e=>e.assetKind==="fungible")}getNonFungibleTokens(){return this.getAllDefinitions().filter(e=>e.assetKind==="non-fungible")}getCoinIdBySymbol(e){return this.getDefinitionBySymbol(e)?.id}getCoinIdByName(e){return this.getDefinitionByName(e)?.id}};function getNetworkConfig(t="mainnet"){return NETWORKS[t]}function resolveTransportConfig(t,e){const s=getNetworkConfig(t);let r;return e?.relays?r=e.relays:(r=[...s.nostrRelays],e?.additionalRelays&&(r=[...r,...e.additionalRelays])),{relays:r,timeout:e?.timeout,autoReconnect:e?.autoReconnect,debug:e?.debug,reconnectDelay:e?.reconnectDelay,maxReconnectAttempts:e?.maxReconnectAttempts}}function resolveOracleConfig(t,e){const s=getNetworkConfig(t);return{url:e?.url??s.aggregatorUrl,apiKey:e?.apiKey??DEFAULT_AGGREGATOR_API_KEY,timeout:e?.timeout,skipVerification:e?.skipVerification,debug:e?.debug,trustBasePath:e?.trustBasePath}}function resolveL1Config(t,e){if(e===void 0)return;const s=getNetworkConfig(t);return{electrumUrl:e.electrumUrl??s.electrumUrl,defaultFeeRate:e.defaultFeeRate,enableVesting:e.enableVesting}}function resolvePriceConfig(t,e){if(t!==void 0)return{platform:t.platform??"coingecko",apiKey:t.apiKey,baseUrl:t.baseUrl,cacheTtlMs:t.cacheTtlMs,timeout:t.timeout,debug:t.debug,storage:e}}function resolveArrayConfig(t,e,s){if(e)return e;const r=[...t];return s?[...r,...s]:r}function resolveGroupChatConfig(t,e){if(!e)return;if(e===!0)return{relays:[...getNetworkConfig(t).groupRelays]};if(typeof e=="object"&&e.enabled===!1)return;const s=getNetworkConfig(t);return{relays:e.relays??[...s.groupRelays]}}function resolveMarketConfig(t){if(t)return t===!0?{}:{apiUrl:t.apiUrl,timeout:t.timeout}}typeof globalThis.Buffer>"u"&&(globalThis.Buffer=bufferExports.Buffer);function resolveIpfsSyncConfig(t,e){if(!e)return;const s=getNetworkConfig(t),r=resolveArrayConfig(s.ipfsGateways,e.gateways,e.additionalGateways);return{enabled:e.enabled??!1,gateways:r,bootstrapPeers:e.bootstrapPeers??e.additionalBootstrapPeers,useDht:e.useDht}}function resolveTokenSyncConfig(t,e){if(!e)return;const s={},r=resolveIpfsSyncConfig(t,e.ipfs);return r&&(s.ipfs=r),e.file&&(s.file={enabled:e.file.enabled??!1,directory:e.file.directory,format:e.file.format}),e.cloud&&(s.cloud={enabled:e.cloud.enabled??!1,provider:e.cloud.provider,bucket:e.cloud.bucket,endpoint:e.cloud.endpoint,apiKey:e.cloud.apiKey}),e.mongodb&&(s.mongodb={enabled:e.mongodb.enabled??!1,uri:e.mongodb.uri,database:e.mongodb.database,collection:e.mongodb.collection}),Object.keys(s).length>0?s:void 0}function createBrowserProviders(t){const e=t?.network??"mainnet",s=resolveTransportConfig(e,t?.transport),r=resolveOracleConfig(e,t?.oracle),a=resolveL1Config(e,t?.l1),o=resolveTokenSyncConfig(e,t?.tokenSync),l=createIndexedDBStorageProvider(t?.storage),c=resolvePriceConfig(t?.price,l),u=o?.ipfs,f=u?.enabled?createBrowserIpfsStorageProvider({gateways:u.gateways,debug:t?.tokenSync?.ipfs?.useDht}):void 0,d=resolveGroupChatConfig(e,t?.groupChat),p=resolveMarketConfig(t?.market),m=getNetworkConfig(e);return TokenRegistry.configure({remoteUrl:m.tokenRegistryUrl,storage:l}),{storage:l,groupChat:d,market:p,transport:createNostrTransportProvider({relays:s.relays,timeout:s.timeout,autoReconnect:s.autoReconnect,reconnectDelay:s.reconnectDelay,maxReconnectAttempts:s.maxReconnectAttempts,debug:s.debug,storage:l}),oracle:createUnicityAggregatorProvider({url:r.url,apiKey:r.apiKey,timeout:r.timeout,skipVerification:r.skipVerification,debug:r.debug,network:e}),tokenStorage:createIndexedDBTokenStorageProvider(),l1:a,price:c?createPriceProvider(c):void 0,ipfsTokenStorage:f,tokenSyncConfig:o}}const COINGECKO_BASE_URL="https://api.coingecko.com/api/v3",IPFS_GATEWAYS=["https://unicity-ipfs1.dyndns.org"];function isIpfsEnabled(){return localStorage.getItem(STORAGE_KEYS.IPFS_ENABLED)!=="false"}function getIpfsConfig(){return isIpfsEnabled()?{tokenSync:{ipfs:{enabled:!0,gateways:IPFS_GATEWAYS}}}:{}}function SphereProvider({children:t,network:e="testnet"}){const[s,r]=reactExports.useState(null),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState(!0),[u,f]=reactExports.useState(!1),[d,p]=reactExports.useState(null),[m,y]=reactExports.useState(isIpfsEnabled),b=reactExports.useRef(null),E=reactExports.useCallback(async(Q=0)=>{try{b.current&&(await b.current.destroy(),b.current=null),c(!0),p(null);const W=createBrowserProviders({network:e,price:{platform:"coingecko",baseUrl:COINGECKO_BASE_URL,cacheTtlMs:5*6e4},groupChat:!0,...getIpfsConfig()});o(W);const Z=await Sphere.exists(W.storage);if(f(Z),Z){const{sphere:z}=await Sphere.init({...W,l1:{}});W.ipfsTokenStorage&&(await z.addTokenStorageProvider(W.ipfsTokenStorage),z.sync().catch(O=>console.warn("[SphereProvider] Initial IPFS sync failed:",O))),b.current=z,r(z)}else{const z=W.transport;await z.connect(),z.setIdentity({privateKey:"0000000000000000000000000000000000000000000000000000000000000001",chainPubkey:"000000000000000000000000000000000000000000000000000000000000000000",l1Address:""})}}catch(W){const Z=W instanceof Error?W.message:String(W);if(Z.includes("IndexedDB open timed out")&&Q<1)return console.warn("[SphereProvider] IndexedDB open timed out, retrying in 1s..."),await new Promise(z=>setTimeout(z,1e3)),E(Q+1);console.error("[SphereProvider] Initialization failed:",W),p(W instanceof Error?W:new Error(Z))}finally{c(!1)}},[e]);reactExports.useEffect(()=>(E(),()=>{b.current?.destroy(),b.current=null}),[E]);const C=reactExports.useCallback(async Q=>{if(!a)throw new Error("Providers not initialized");a.transport.isConnected()&&await a.transport.disconnect();try{const{sphere:W,generatedMnemonic:Z}=await Sphere.init({...a,autoGenerate:!0,nametag:Q?.nametag,l1:{}});if(a.ipfsTokenStorage&&(await W.addTokenStorageProvider(a.ipfsTokenStorage),W.sync().catch(z=>console.warn("[SphereProvider] Initial IPFS sync failed:",z))),b.current=W,r(W),f(!0),!Z)throw new Error("Failed to generate mnemonic");return Z}catch(W){const Z=Sphere.clear({storage:a.storage,tokenStorage:a.tokenStorage});throw await Promise.race([Z,new Promise(z=>setTimeout(z,3e3))]),b.current=null,r(null),f(!1),W}},[a]),j=reactExports.useCallback(async Q=>{if(!a)throw new Error("Providers not initialized");const W=a.transport;if(!W.isConnected()){try{await W.connect()}catch{await new Promise(z=>setTimeout(z,1e3)),await W.connect()}await W.setIdentity({privateKey:"0000000000000000000000000000000000000000000000000000000000000001",chainPubkey:"000000000000000000000000000000000000000000000000000000000000000000",l1Address:""})}return await W.resolveNametagInfo?.(Q)??null},[a]),B=reactExports.useCallback(async(Q,W)=>{if(!a)throw new Error("Providers not initialized");a.transport.isConnected()&&await a.transport.disconnect();const{sphere:Z}=await Sphere.init({...a,mnemonic:Q,nametag:W?.nametag,l1:{}});return a.ipfsTokenStorage&&(await Z.addTokenStorageProvider(a.ipfsTokenStorage),Z.sync().catch(z=>console.warn("[SphereProvider] Initial IPFS sync failed:",z))),b.current=Z,r(Z),f(!0),Z},[a]),D=reactExports.useCallback(async Q=>{if(!a)throw new Error("Providers not initialized");a.transport.isConnected()&&await a.transport.disconnect();try{const W=await Sphere.importFromLegacyFile({fileContent:Q.fileContent,fileName:Q.fileName,password:Q.password,nametag:Q.nametag,storage:a.storage,transport:a.transport,oracle:a.oracle,tokenStorage:a.tokenStorage,l1:{}});return{success:W.success,sphere:W.sphere,mnemonic:W.mnemonic,needsPassword:W.needsPassword,error:W.error}}catch(W){const Z=Sphere.clear({storage:a.storage,tokenStorage:a.tokenStorage});return await Promise.race([Z,new Promise(z=>setTimeout(z,3e3))]),b.current=null,r(null),f(!1),{success:!1,error:W instanceof Error?W.message:"Import failed"}}},[a]),F=reactExports.useCallback(async()=>{if(b.current&&(await b.current.destroy(),b.current=null),a){await Promise.allSettled([a.storage.disconnect(),a.tokenStorage.disconnect()]);const Q=Sphere.clear({storage:a.storage,tokenStorage:a.tokenStorage});await Promise.race([Q,new Promise(W=>setTimeout(W,5e3))])}clearAllSphereData(),r(null),f(!1),p(null),await E()},[a,E]),q=reactExports.useCallback(Q=>{Q&&(a?.ipfsTokenStorage&&Q.addTokenStorageProvider(a.ipfsTokenStorage).then(()=>Q.sync()).catch(W=>console.warn("[SphereProvider] IPFS sync after import failed:",W)),b.current=Q,r(Q)),f(!0)},[a]),V=reactExports.useCallback(()=>{const Q=!isIpfsEnabled();localStorage.setItem(STORAGE_KEYS.IPFS_ENABLED,String(Q)),y(Q),E()},[E]),ee={sphere:s,providers:a,isLoading:l,isInitialized:!!s,walletExists:u,error:d,resolveNametag:j,createWallet:C,importWallet:B,importFromFile:D,finalizeWallet:q,deleteWallet:F,reinitialize:E,ipfsEnabled:m,toggleIpfs:V};return jsxRuntimeExports.jsx(SphereContext.Provider,{value:ee,children:t})}function formatAmount(t,e){if(!t||t==="0")return"0";const s=t.startsWith("-"),r=s?t.slice(1):t;if(e===0)return(s?"-":"")+r;const a=r.padStart(e+1,"0"),o=a.slice(0,a.length-e),c=a.slice(a.length-e).replace(/0+$/,""),u=s?"-":"";return c?`${u}${o}.${c}`:`${u}${o}`}function showToast(t,e="info",s){window.dispatchEvent(new CustomEvent("show-toast",{detail:{message:t,type:e,duration:s}}))}function useSphereEvents(){const{sphere:t}=useSphereContext(),e=useQueryClient(),s=reactExports.useRef(null);reactExports.useEffect(()=>{if(!t)return;const r=()=>{s.current||(s.current=setTimeout(()=>{s.current=null,e.invalidateQueries({queryKey:SPHERE_KEYS.payments.all})},300))},a=b=>{r();const E=b.senderNametag?`@${b.senderNametag}`:"Someone",C=b.tokens.map(B=>`${formatAmount(B.amount,B.decimals)} ${B.symbol}`).join(", ");let j=`${E} sent you ${C}`;b.memo&&(j+=`
"${b.memo}"`),showToast(j,"success",6e3)},o=r,l=()=>{e.invalidateQueries({queryKey:SPHERE_KEYS.identity.all})},c=()=>{e.invalidateQueries({queryKey:SPHERE_KEYS.identity.all}),e.invalidateQueries({queryKey:SPHERE_KEYS.payments.all}),e.invalidateQueries({queryKey:SPHERE_KEYS.l1.all}),e.invalidateQueries({queryKey:["chat"]})},u=r,f=r,d=b=>{const E=t.identity?.chainPubkey,C=b.senderPubkey===E,j=C?b.recipientPubkey:b.senderPubkey;e.invalidateQueries({queryKey:["chat"]});const B={peerPubkey:j,messageId:b.id,isFromMe:C};window.dispatchEvent(new CustomEvent("dm-received",{detail:B})),e.invalidateQueries({queryKey:SPHERE_KEYS.communications.all})},p=()=>{e.invalidateQueries({queryKey:["chat"]})},m=b=>{window.dispatchEvent(new CustomEvent("dm-typing",{detail:b}))},y=()=>{window.dispatchEvent(new Event("payment-requests-updated"))};return t.on("transfer:incoming",a),t.on("transfer:confirmed",o),t.on("nametag:registered",l),t.on("nametag:recovered",l),t.on("identity:changed",c),t.on("sync:completed",u),t.on("sync:remote-update",f),t.on("message:dm",d),t.on("message:read",p),t.on("composing:started",m),t.on("payment_request:incoming",y),()=>{s.current&&(clearTimeout(s.current),s.current=null),t.off("transfer:incoming",a),t.off("transfer:confirmed",o),t.off("nametag:registered",l),t.off("nametag:recovered",l),t.off("identity:changed",c),t.off("sync:completed",u),t.off("sync:remote-update",f),t.off("message:dm",d),t.off("message:read",p),t.off("composing:started",m),t.off("payment_request:incoming",y)}},[t,e])}function useIpfsSync(){const{sphere:t}=useSphereContext(),[e,s]=reactExports.useState({status:"idle",lastSynced:null,lastError:null,lastRemoteUpdate:null});reactExports.useEffect(()=>{if(!t)return;const a=()=>{s(u=>({...u,status:"syncing",lastError:null}))},o=()=>{s(u=>({...u,status:"idle",lastSynced:Date.now(),lastError:null}))},l=u=>{s(f=>({...f,status:"error",lastError:u.error}))},c=u=>{s(f=>({...f,lastSynced:Date.now(),lastRemoteUpdate:{cid:u.cid,added:u.added,removed:u.removed}}))};return t.on("sync:started",a),t.on("sync:completed",o),t.on("sync:error",l),t.on("sync:remote-update",c),()=>{t.off("sync:started",a),t.off("sync:completed",o),t.off("sync:error",l),t.off("sync:remote-update",c)}},[t]);const r=reactExports.useCallback(async()=>{t&&await t.sync()},[t]);return{...e,triggerSync:r}}function useTokens(){const{sphere:t}=useSphereContext(),e=useQuery({queryKey:SPHERE_KEYS.payments.tokens.list,queryFn:async()=>t?t.payments.getTokens():[],enabled:!!t,staleTime:3e4,structuralSharing:!1}),s=e.data??[];return{tokens:s,isLoading:e.isLoading,error:e.error,refetch:()=>e.refetch(),tokenCount:s.length,hasTokens:s.length>0,confirmedTokens:s.filter(r=>r.status==="confirmed"),pendingTokens:s.filter(r=>r.status==="pending"||r.status==="submitted")}}function useAssets(){const{sphere:t}=useSphereContext(),e=useQuery({queryKey:SPHERE_KEYS.payments.assets.list,queryFn:async()=>t?await t.payments.getAssets():[],enabled:!!t,staleTime:3e4,structuralSharing:!1}),s=e.data??[];return{assets:s,isLoading:e.isLoading,error:e.error,assetCount:s.length}}function useTransfer(){const{sphere:t}=useSphereContext(),e=useQueryClient(),[s,r]=reactExports.useState(!1),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState(null),u=reactExports.useCallback(async d=>{if(!t)throw new Error("Wallet not initialized");r(!0),o(null);try{const p=await t.payments.send({coinId:d.coinId,amount:d.amount,recipient:d.recipient,memo:d.memo});return c(p),await Promise.all([e.refetchQueries({queryKey:SPHERE_KEYS.payments.tokens.all}),e.refetchQueries({queryKey:SPHERE_KEYS.payments.balance.all}),e.refetchQueries({queryKey:SPHERE_KEYS.payments.assets.all}),e.refetchQueries({queryKey:SPHERE_KEYS.payments.transactions.all})]),p}catch(p){const m=p instanceof Error?p:new Error(String(p));throw o(m),m}finally{r(!1)}},[t,e]),f=reactExports.useCallback(()=>{o(null),c(null)},[]);return{transfer:u,isLoading:s,error:a,lastResult:l,reset:f}}function useTransactionHistory(){const{sphere:t}=useSphereContext(),e=useQuery({queryKey:SPHERE_KEYS.payments.transactions.history,queryFn:()=>t?t.payments.getHistory():[],enabled:!!t,staleTime:3e4});return{history:e.data??[],isLoading:e.isLoading,error:e.error,refetch:()=>e.refetch()}}function useL1Balance(){const{sphere:t}=useSphereContext(),e=useQuery({queryKey:SPHERE_KEYS.l1.balance,queryFn:async()=>{if(!t)return null;const r=t.payments.l1;if(!r)return null;const a=await r.getBalance();return{confirmed:a.confirmed,unconfirmed:a.unconfirmed,total:a.total,vested:a.vested??"0",unvested:a.unvested??"0"}},enabled:!!t,staleTime:3e4,refetchInterval:6e4}),s=e.data??null;return{balance:s,isLoading:e.isLoading,error:e.error,refetch:()=>e.refetch(),totalFormatted:s?formatAmount(s.total,8):"0",vestedFormatted:s?formatAmount(s.vested,8):"0",unvestedFormatted:s?formatAmount(s.unvested,8):"0"}}function useL1Send(){const{sphere:t}=useSphereContext(),e=useQueryClient(),[s,r]=reactExports.useState(!1),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState(null),u=reactExports.useCallback(async p=>{if(!t)throw new Error("Wallet not initialized");const m=t.payments.l1;if(!m)throw new Error("L1 not available");r(!0),o(null);try{const y=await m.send({to:p.toAddress,amount:p.amount,feeRate:p.feeRate,useVested:p.useVested});if(!y.success)throw new Error(y.error??"L1 send failed");const b={txHash:y.txHash??"",fee:y.fee??"0"};return c(b),e.invalidateQueries({queryKey:SPHERE_KEYS.l1.all}),b}catch(y){const b=y instanceof Error?y:new Error(String(y));throw o(b),b}finally{r(!1)}},[t,e]),f=reactExports.useCallback(async(p,m)=>{if(!t)throw new Error("Wallet not initialized");const y=t.payments.l1;if(!y)throw new Error("L1 not available");return y.estimateFee(p,m)},[t]),d=reactExports.useCallback(async p=>{if(!t)throw new Error("Wallet not initialized");const m=t.payments.l1;if(!m)throw new Error("L1 not available");const y=p.startsWith("@")||!p.startsWith("alpha1")&&!p.startsWith("alphat1");return{address:await m.resolveL1Address(p),nametag:y?p.replace(/^@/,""):void 0}},[t]);return{send:u,estimateFee:f,resolveAddress:d,isLoading:s,error:a,lastResult:l}}function useL1Transactions(){const{sphere:t}=useSphereContext(),e=useQuery({queryKey:SPHERE_KEYS.l1.transactions,queryFn:async()=>{if(!t)return[];const s=t.payments.l1;return s?(await s.getHistory()).map(a=>({txid:a.txid,type:a.type==="receive"?"incoming":"outgoing",amount:a.amount,fee:a.fee??"0",confirmations:a.confirmations??0,timestamp:a.timestamp,address:a.address??""})):[]},enabled:!!t,staleTime:3e4});return{transactions:e.data??[],isLoading:e.isLoading,error:e.error,refetch:()=>e.refetch()}}function useSendDM(){const{sphere:t}=useSphereContext(),[e,s]=reactExports.useState(!1),[r,a]=reactExports.useState(null);return{sendDM:reactExports.useCallback(async(l,c)=>{if(!t)throw new Error("Wallet not initialized");s(!0),a(null);try{return await t.communications.sendDM(l,c)}catch(u){const f=u instanceof Error?u:new Error(String(u));throw a(f),f}finally{s(!1)}},[t]),isLoading:e,error:r}}function formatTime(t){const e=Math.floor((Date.now()-t)/1e3);return e<10?"just now":e<60?`${e}s ago`:e<3600?`${Math.floor(e/60)}m ago`:`${Math.floor(e/3600)}h ago`}function getStatusText(t,e,s){return t?e==="syncing"?"Syncing...":e==="error"?"Error":s?"Synced":"IPFS":"IPFS off"}function IpfsSyncIndicator(){const{ipfsEnabled:t,toggleIpfs:e}=useSphereContext(),{status:s,lastSynced:r,lastError:a}=useIpfsSync(),[o,l]=reactExports.useState(!1),c=t&&s==="syncing",u=t&&s==="error",f=getStatusText(t,s,r),d="w-4 h-4 sm:w-5 sm:h-5";return jsxRuntimeExports.jsxs("div",{className:"relative",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[jsxRuntimeExports.jsxs("button",{onClick:e,className:"flex items-center gap-1.5 px-2 py-1.5 sm:px-2.5 sm:py-2 rounded-lg transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",title:t?"Disable IPFS sync":"Enable IPFS sync",children:[jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:t?c?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:jsxRuntimeExports.jsx(LoaderCircle,{className:`${d} text-orange-500 animate-spin`})},"syncing"):u?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},className:"relative",children:[jsxRuntimeExports.jsx(CloudOff,{className:`${d} text-red-400 dark:text-red-500`}),jsxRuntimeExports.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full bg-red-500"})]},"error"):jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:jsxRuntimeExports.jsx(Cloud,{className:`${d} ${r?"text-green-500/70 dark:text-green-400/70":"text-neutral-400 dark:text-neutral-500"}`})},"idle"):jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.15},children:jsxRuntimeExports.jsx(CloudOff,{className:`${d} text-neutral-400 dark:text-neutral-500`})},"disabled")}),jsxRuntimeExports.jsx("span",{className:`text-xs font-medium hidden sm:inline ${t?u?"text-red-400 dark:text-red-500":c?"text-orange-500":r?"text-green-500/70 dark:text-green-400/70":"text-neutral-400 dark:text-neutral-500":"text-neutral-400 dark:text-neutral-500"}`,children:f})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:o&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},transition:{duration:.15},className:"absolute top-full right-0 mt-2 px-3 py-2 rounded-lg text-xs whitespace-nowrap z-50 bg-neutral-900 dark:bg-neutral-800 text-neutral-100 border border-neutral-700 shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"font-medium mb-0.5",children:[!t&&"IPFS sync disabled",t&&c&&"IPFS syncing...",t&&u&&"IPFS sync error",t&&s==="idle"&&(r?"IPFS synced":"IPFS idle")]}),r&&t&&jsxRuntimeExports.jsxs("div",{className:"text-neutral-400",children:["Last sync: ",formatTime(r)]}),a&&t&&jsxRuntimeExports.jsx("div",{className:"text-red-400 max-w-48 truncate",children:a}),jsxRuntimeExports.jsxs("div",{className:"text-neutral-500 mt-1",children:["Click to ",t?"disable":"enable"]})]})})]})}const logoUrl="/sphere/fix-storage-disconnect-during-init/Union.svg";function devReset(){localStorage.removeItem(STORAGE_KEYS.DEV_AGGREGATOR_URL),localStorage.removeItem(STORAGE_KEYS.DEV_SKIP_TRUST_BASE),window.dispatchEvent(new Event("dev-config-changed"))}const DiscordIcon$1=({className:t})=>jsxRuntimeExports.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})}),navItems=[{label:"Home",path:"/agents/chat"},{label:"Developers",path:"/developers"},{label:"Mine Alpha",path:"/mine"}];function Header(){const t=useLocation(),e=useNavigate(),[s,r]=reactExports.useState(!1),a=t.pathname==="/mine",o=()=>({aggregatorUrl:localStorage.getItem(STORAGE_KEYS.DEV_AGGREGATOR_URL),skipTrustBase:localStorage.getItem(STORAGE_KEYS.DEV_SKIP_TRUST_BASE)==="true"}),[l,c]=reactExports.useState(o);reactExports.useEffect(()=>{const p=()=>c(o());return window.addEventListener("dev-config-changed",p),()=>window.removeEventListener("dev-config-changed",p)},[]),reactExports.useEffect(()=>{r(!1)},[t.pathname]);const u=p=>{try{const m=new URL(p).hostname;return m.length>20?m.slice(0,20)+"...":m}catch{return p.slice(0,20)}},f=p=>{e(p)},d=p=>p?p==="/agents/chat"?t.pathname.startsWith("/agents/"):p==="/developers"?t.pathname.startsWith("/developers"):t.pathname===p:!1;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("header",{"data-tutorial":"header",className:`border-b backdrop-blur-2xl sticky top-0 z-50 w-screen border-neutral-200 dark:border-neutral-800/50 bg-white/80 ${a?"dark:bg-gray-950/90":"theme-transition dark:bg-neutral-900/80"}`,children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-96 h-full bg-linear-to-r from-orange-500/5 dark:from-orange-500/10 to-transparent blur-3xl"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-96 h-full bg-linear-to-l from-purple-500/5 dark:from-purple-500/10 to-transparent blur-3xl"})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-linear-to-r from-transparent via-orange-500 to-transparent opacity-50"}),jsxRuntimeExports.jsxs("div",{className:"max-w-450 mx-auto px-3 sm:px-6 lg:px-8 h-14 sm:h-14 lg:h-14 flex items-stretch justify-between relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-stretch gap-2 sm:gap-4 lg:gap-6",children:[jsxRuntimeExports.jsxs(Link$1,{to:"/agents/chat",className:"flex items-center gap-2 sm:gap-4 lg:gap-6 group",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:logoUrl,alt:"Logo",className:"relative z-10 w-7 h-7 sm:w-9 sm:h-9 lg:w-11 lg:h-11 transition-transform duration-200 group-hover:scale-110 group-hover:rotate-6"})}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[jsxRuntimeExports.jsx("h1",{className:"text-base sm:text-lg lg:text-xl bg-clip-text text-neutral-900 dark:text-white",children:"AgentSphere"}),jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 sm:w-4 sm:h-4 text-orange-500 animate-pulse"}),isMock()]}),jsxRuntimeExports.jsx("p",{className:"text-[10px] sm:text-xs text-neutral-500 dark:text-neutral-400",children:"Agentic AI Marketplaces"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-1 left-0 w-16 sm:w-20 h-0.5 bg-linear-to-r from-orange-500 to-transparent rounded-full"})]})]}),jsxRuntimeExports.jsx("nav",{className:"hidden lg:flex items-center h-full ml-8 gap-1",children:navItems.map(p=>p.external?jsxRuntimeExports.jsx("a",{href:p.path,target:"_blank",rel:"noopener noreferrer",className:"relative px-5 py-2.5 flex items-center text-sm font-medium transition-colors duration-300 group",children:jsxRuntimeExports.jsx("span",{className:"relative transition-colors duration-300 text-neutral-500 dark:text-neutral-400 group-hover:text-neutral-700 dark:group-hover:text-neutral-300",children:p.label})},p.label):p.path?jsxRuntimeExports.jsxs(Link$1,{to:p.path,className:"relative px-5 py-2.5 flex items-center text-sm font-medium transition-colors duration-300 group",children:[jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:d(p.path)&&jsxRuntimeExports.jsx(motion.span,{initial:{scaleX:0,opacity:0},animate:{scaleX:1,opacity:1},exit:{scaleX:0,opacity:0},transition:{duration:.2,ease:"easeOut"},className:"absolute left-0 right-0 -bottom-2 h-0.5 bg-linear-to-r from-orange-400 via-orange-500 to-amber-500 origin-center"},p.path)}),jsxRuntimeExports.jsx("span",{className:`relative transition-colors duration-300 ${d(p.path)?"text-neutral-900 dark:text-white":"text-neutral-500 dark:text-neutral-400 group-hover:text-neutral-700 dark:group-hover:text-neutral-300"}`,children:p.label})]},p.label):jsxRuntimeExports.jsxs("button",{className:"relative px-5 py-2.5 flex items-center text-sm font-medium text-neutral-400 dark:text-neutral-500 cursor-not-allowed",title:"Coming soon",children:[jsxRuntimeExports.jsx("span",{children:p.label}),jsxRuntimeExports.jsx("span",{className:"ml-2 px-1.5 py-0.5 text-[10px] rounded bg-neutral-200/60 dark:bg-neutral-700/40 text-neutral-500 dark:text-neutral-500",children:"Soon"})]},p.label))})]}),(l.aggregatorUrl||l.skipTrustBase)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-lg bg-orange-500/10 border border-orange-500/30 text-[10px] sm:text-xs font-mono",children:[jsxRuntimeExports.jsx("span",{className:"text-orange-500 font-semibold",children:"DEV"}),jsxRuntimeExports.jsxs("span",{className:"text-orange-400/80 hidden sm:inline",children:[l.aggregatorUrl&&jsxRuntimeExports.jsx("span",{title:l.aggregatorUrl,children:u(l.aggregatorUrl)}),l.aggregatorUrl&&l.skipTrustBase&&" | ",l.skipTrustBase&&"TB:OFF"]}),jsxRuntimeExports.jsx("button",{onClick:devReset,className:"ml-1 px-1.5 py-0.5 rounded bg-orange-500/20 hover:bg-orange-500/30 text-orange-500 font-semibold transition-colors",title:"Reset dev settings to production defaults",children:"RESET"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 lg:gap-3",children:[jsxRuntimeExports.jsx(IpfsSyncIndicator,{}),jsxRuntimeExports.jsxs(motion.a,{href:"https://github.com/unicitynetwork",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.05},className:"relative p-2 sm:p-2.5 lg:p-3 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded-lg sm:rounded-xl transition-all group",children:[jsxRuntimeExports.jsx(Github,{className:"w-4 h-4 sm:w-5 sm:h-5 text-neutral-500 dark:text-neutral-400 group-hover:text-orange-400 transition-colors"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg sm:rounded-xl bg-orange-500/0 group-hover:bg-orange-500/10 transition-colors"})]}),jsxRuntimeExports.jsxs(motion.a,{href:"https://discord.gg/S9f57ZKdt",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},transition:{duration:.05},className:"relative p-2 sm:p-2.5 lg:p-3 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded-lg sm:rounded-xl transition-all group",children:[jsxRuntimeExports.jsx(DiscordIcon$1,{className:"w-4 h-4 sm:w-5 sm:h-5 text-neutral-500 dark:text-neutral-400 group-hover:text-orange-400 transition-colors"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg sm:rounded-xl bg-orange-500/0 group-hover:bg-orange-500/10 transition-colors"})]}),jsxRuntimeExports.jsx(ThemeToggle,{}),jsxRuntimeExports.jsx("button",{onClick:()=>r(!s),className:"lg:hidden p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded-lg transition-all",children:s?jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-neutral-500 dark:text-neutral-400"}):jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5 text-neutral-500 dark:text-neutral-400"})})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-px bg-linear-to-r from-transparent via-neutral-300 dark:via-neutral-700 to-transparent"})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35,ease:"easeInOut"},onClick:()=>r(!1),className:"lg:hidden fixed inset-0 top-14 bg-black/20 backdrop-blur-sm z-40"}),jsxRuntimeExports.jsx(motion.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.4,ease:[.25,.1,.25,1]},className:"lg:hidden fixed left-0 right-0 top-14 backdrop-blur-xl border-b z-50 shadow-xl overflow-hidden bg-white/95 dark:bg-neutral-900/95 border-neutral-200 dark:border-neutral-800",children:jsxRuntimeExports.jsx("nav",{className:"px-4 py-3 space-y-1",children:navItems.map(p=>p.external?jsxRuntimeExports.jsx("a",{href:p.path,target:"_blank",rel:"noopener noreferrer",onClick:()=>r(!1),className:"w-full flex items-center px-4 py-3 rounded-xl text-base font-medium transition-all text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800",children:p.label},p.label):p.path?jsxRuntimeExports.jsxs("button",{onClick:()=>f(p.path),className:`relative w-full flex items-center px-4 py-3 rounded-xl text-base font-medium transition-all text-left ${d(p.path)?"text-neutral-900 dark:text-white":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800"}`,children:[d(p.path)&&jsxRuntimeExports.jsx(motion.span,{initial:{scaleY:0,opacity:0},animate:{scaleY:1,opacity:1},transition:{duration:.2,ease:"easeOut"},className:"absolute left-0 top-2 bottom-2 w-0.5 bg-linear-to-b from-orange-400 via-orange-500 to-amber-500 origin-center rounded-full"}),p.label]},p.label):jsxRuntimeExports.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-base font-medium text-neutral-400 dark:text-neutral-500 cursor-not-allowed",children:[p.label,jsxRuntimeExports.jsx("span",{className:"text-xs bg-neutral-200 dark:bg-neutral-700 px-2 py-0.5 rounded-full",children:"Soon"})]},p.label))})})]})})]})}const STORAGE_KEY="sphere_mini_chat",MAX_OPEN_WINDOWS=3;function loadFromStorage(){try{const t=localStorage.getItem(STORAGE_KEY);if(t){const e=JSON.parse(t),s=e.openWindowIds||[],r=new Set(s),a=(e.minimizedWindowIds||[]).filter(o=>r.has(o));return{openWindowIds:s,minimizedWindowIds:a,dismissedWindowIds:e.dismissedWindowIds||[]}}}catch{}return{openWindowIds:[],minimizedWindowIds:[],dismissedWindowIds:[]}}function saveToStorage(t){localStorage.setItem(STORAGE_KEY,JSON.stringify({openWindowIds:t.openWindowIds,minimizedWindowIds:t.minimizedWindowIds,dismissedWindowIds:t.dismissedWindowIds}))}const initial=loadFromStorage();let state={openWindowIds:initial.openWindowIds,minimizedWindowIds:initial.minimizedWindowIds,dismissedWindowIds:initial.dismissedWindowIds,isListExpanded:!1};const listeners=new Set;function emitChange(){listeners.forEach(t=>t())}const miniChatStore={getState:()=>state,subscribe:t=>(listeners.add(t),()=>listeners.delete(t)),openWindow:t=>{const e=t.peerPubkey,s=state.openWindowIds.includes(e),r=state.minimizedWindowIds.includes(e);if(s&&!r)return;const a=[...state.openWindowIds],o=state.minimizedWindowIds.filter(c=>c!==e),l=state.dismissedWindowIds.filter(c=>c!==e);s||(a.length>=MAX_OPEN_WINDOWS&&a.shift(),a.push(e)),state={...state,openWindowIds:a,minimizedWindowIds:o,dismissedWindowIds:l,isListExpanded:!1},saveToStorage(state),emitChange()},closeWindow:t=>{state={...state,openWindowIds:state.openWindowIds.filter(e=>e!==t),minimizedWindowIds:state.minimizedWindowIds.filter(e=>e!==t),dismissedWindowIds:state.dismissedWindowIds.includes(t)?state.dismissedWindowIds:[...state.dismissedWindowIds,t]},saveToStorage(state),emitChange()},minimizeWindow:t=>{if(!state.openWindowIds.includes(t))return;state.minimizedWindowIds.includes(t)?state={...state,minimizedWindowIds:state.minimizedWindowIds.filter(s=>s!==t)}:state={...state,minimizedWindowIds:[...state.minimizedWindowIds,t]},saveToStorage(state),emitChange()},toggleList:()=>{const t=!state.isListExpanded;t&&state.openWindowIds.length>0?(state={...state,isListExpanded:!0,minimizedWindowIds:[...state.openWindowIds]},saveToStorage(state)):state={...state,isListExpanded:t},emitChange()},closeList:()=>{state={...state,isListExpanded:!1},emitChange()}};function useMiniChatStore(){const t=reactExports.useSyncExternalStore(miniChatStore.subscribe,miniChatStore.getState),e=reactExports.useCallback(c=>{miniChatStore.openWindow(c)},[]),s=reactExports.useCallback(c=>{miniChatStore.closeWindow(c)},[]),r=reactExports.useCallback(c=>{miniChatStore.minimizeWindow(c)},[]),a=reactExports.useCallback(()=>{miniChatStore.toggleList()},[]),o=reactExports.useCallback(()=>{miniChatStore.closeList()},[]),l=reactExports.useCallback(c=>t.minimizedWindowIds.includes(c),[t.minimizedWindowIds]);return{...t,openWindow:e,closeWindow:s,minimizeWindow:r,toggleList:a,closeList:o,isMinimized:l}}function getDisplayName(t,e){return e?`@${e.replace("@","")}`:t.slice(0,8)+"..."}function getAvatar(t,e){return(e||t).slice(0,2).toUpperCase()}function formatRelativeTime(t){const e=Date.now()-t;return e<6e4?"now":e<36e5?`${Math.floor(e/6e4)}m`:e<864e5?`${Math.floor(e/36e5)}h`:e<6048e5?`${Math.floor(e/864e5)}d`:new Date(t).toLocaleDateString()}function formatMessageTime(t){return new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function formatMessageDate(t){const e=new Date(t),s=new Date,r=new Date(s);return r.setDate(r.getDate()-1),e.toDateString()===s.toDateString()?"Today":e.toDateString()===r.toDateString()?"Yesterday":e.toLocaleDateString()}function toDisplayMessage(t,e){const s=t.senderPubkey===e;return{id:t.id,content:t.content,timestamp:t.timestamp,isFromMe:s,status:s?t.isRead?"READ":"SENT":t.isRead?"READ":"DELIVERED",senderPubkey:t.senderPubkey,senderNametag:t.senderNametag}}function buildConversation(t,e,s){const a=[...e].sort((c,u)=>u.timestamp-c.timestamp)[0],o=e.find(c=>c.senderPubkey===t&&c.senderNametag)?.senderNametag??e.find(c=>c.recipientPubkey===t&&c.recipientNametag)?.recipientNametag,l=e.filter(c=>c.senderPubkey!==s&&!c.isRead).length;return{peerPubkey:t,peerNametag:o??void 0,lastMessageText:a?.content.slice(0,100)??"",lastMessageTime:a?.timestamp??0,unreadCount:l}}function buildConversations(t,e){const s=[];for(const[r,a]of t)s.push(buildConversation(r,a,e));return s.sort((r,a)=>a.lastMessageTime-r.lastMessageTime)}const CHAT_KEYS={all:["chat"],conversations:t=>["chat","conversations",t],messages:(t,e)=>["chat","messages",t,e],unreadCount:t=>["chat","unreadCount",t]},colors$1=[{gradient:"from-blue-500 to-blue-600",text:"text-blue-500"},{gradient:"from-purple-500 to-purple-600",text:"text-purple-500"},{gradient:"from-green-500 to-green-600",text:"text-green-500"},{gradient:"from-pink-500 to-pink-600",text:"text-pink-500"},{gradient:"from-indigo-500 to-indigo-600",text:"text-indigo-500"},{gradient:"from-teal-500 to-teal-600",text:"text-teal-500"},{gradient:"from-cyan-500 to-cyan-600",text:"text-cyan-500"},{gradient:"from-rose-500 to-rose-600",text:"text-rose-500"}];function getColorFromPubkey(t){let e=0;for(let s=0;s<t.length;s++)e=t.charCodeAt(s)+((e<<5)-e);return colors$1[Math.abs(e)%colors$1.length]}function MiniChatBubble({conversation:t,onClick:e,index:s}){const r=getColorFromPubkey(t.peerPubkey);return jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{delay:s*.05},onClick:e,className:"relative group",children:[jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.1},whileTap:{scale:.95},className:`w-14 h-14 rounded-xl bg-linear-to-br ${r.gradient} flex items-center justify-center text-white font-semibold text-base shadow-lg cursor-pointer`,children:getAvatar(t.peerPubkey,t.peerNametag)}),t.unreadCount>0&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-orange-500 border-2 border-white dark:border-neutral-800 shadow-md"}),jsxRuntimeExports.jsxs("div",{className:"absolute left-full ml-3 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-neutral-900 dark:bg-neutral-800 text-white text-sm rounded-lg whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 shadow-lg",children:[getDisplayName(t.peerPubkey,t.peerNametag),jsxRuntimeExports.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-8 border-transparent border-r-neutral-900 dark:border-r-neutral-800"})]})]})}function buildAddressId$3(t){let e=t;e.startsWith("DIRECT://")?e=e.slice(9):e.startsWith("DIRECT:")&&(e=e.slice(7));const s=e.slice(0,6).toLowerCase(),r=e.slice(-6).toLowerCase();return`DIRECT_${s}_${r}`}function MiniChatList({onClose:t}){const e=useNavigate(),s=useQueryClient(),{sphere:r}=useSphereContext(),{directAddress:a}=useIdentity(),o=a?buildAddressId$3(a):"default",{openWindow:l}=useMiniChatStore(),[c,u]=reactExports.useState(""),f=reactExports.useRef(null),{data:d=[]}=useQuery({queryKey:CHAT_KEYS.conversations(o),queryFn:()=>{if(!r)return[];const b=r.communications.getConversations();return buildConversations(b,r.identity.chainPubkey)},enabled:!!r,staleTime:3e4}),p=reactExports.useMemo(()=>{if(!c.trim())return d;const b=c.toLowerCase();return d.filter(E=>getDisplayName(E.peerPubkey,E.peerNametag).toLowerCase().includes(b)||E.lastMessageText.toLowerCase().includes(b))},[d,c]);reactExports.useEffect(()=>{const b=E=>{f.current&&!f.current.contains(E.target)&&t()};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[t]),reactExports.useEffect(()=>{const b=E=>{E.key==="Escape"&&t()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[t]);const m=b=>{if(r){const C=r.communications.getConversation(b.peerPubkey).filter(j=>!j.isRead&&j.senderPubkey===b.peerPubkey).map(j=>j.id);C.length>0&&(r.communications.markAsRead(C),s.invalidateQueries({queryKey:CHAT_KEYS.all}))}l(b)},y=()=>{t(),e("/agents/chat?mode=dm&new=true")};return jsxRuntimeExports.jsxs(motion.div,{ref:f,initial:{opacity:0,x:-20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-20,scale:.95},transition:{duration:.2},className:"fixed left-4 bottom-20 z-100000 w-80 max-h-[70vh] bg-white dark:bg-neutral-900 rounded-2xl border border-neutral-200 dark:border-neutral-700 shadow-2xl overflow-hidden flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-700 flex items-center justify-between shrink-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Messages"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(motion.button,{onClick:y,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-500 dark:text-neutral-400 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},title:"New conversation",children:jsxRuntimeExports.jsx(MessageCirclePlus,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx(motion.button,{onClick:t,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-500 dark:text-neutral-400 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]})]}),jsxRuntimeExports.jsx("div",{className:"p-3 border-b border-neutral-200 dark:border-neutral-700 shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:c,onChange:b=>u(b.target.value),placeholder:"Search conversations...",className:"w-full pl-10 pr-4 py-2 bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl outline-none text-sm border border-transparent focus:border-orange-500 transition-colors"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto min-h-0",children:p.length===0?jsxRuntimeExports.jsx("div",{className:"p-8 text-center text-neutral-500 dark:text-neutral-400",children:jsxRuntimeExports.jsx("p",{className:"text-sm",children:"No conversations found"})}):jsxRuntimeExports.jsx("div",{className:"p-2",children:p.map(b=>jsxRuntimeExports.jsxs(motion.button,{onClick:()=>m(b),className:"w-full p-3 rounded-xl flex items-center gap-3 transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-800",whileHover:{scale:1.01},whileTap:{scale:.99},children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-xl bg-linear-to-br ${getColorFromPubkey(b.peerPubkey).gradient} flex items-center justify-center text-white font-medium text-sm shrink-0 shadow-md`,children:getAvatar(b.peerPubkey,b.peerNametag)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-neutral-900 dark:text-white truncate text-sm",children:getDisplayName(b.peerPubkey,b.peerNametag)}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 shrink-0",children:formatRelativeTime(b.lastMessageTime)})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2 mt-0.5",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:b.lastMessageText||"No messages yet"}),b.unreadCount>0&&jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 shrink-0"})]})]})]},b.peerPubkey))})}),jsxRuntimeExports.jsx("div",{className:"p-3 border-t border-neutral-200 dark:border-neutral-700 shrink-0",children:jsxRuntimeExports.jsx(motion.button,{onClick:()=>{t(),e("/agents/chat")},className:"w-full py-2 text-sm text-orange-500 hover:text-orange-600 font-medium transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"View all in Messenger"})})]})}function MiniChatInput({onSend:t,isSending:e,placeholder:s="Aa"}){const[r,a]=reactExports.useState(""),o=reactExports.useRef(null),l=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),c())},c=async()=>{if(!r.trim()||e)return;const u=r;a(""),await t(u)||a(u),setTimeout(()=>{o.current?.focus()},50)};return jsxRuntimeExports.jsx("div",{className:"p-2 border-t border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{ref:o,type:"text",value:r,onChange:u=>a(u.target.value),onKeyDown:l,placeholder:s,disabled:e,className:"flex-1 bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-400 outline-none rounded-full px-4 py-2 text-sm border border-neutral-200 dark:border-neutral-700 focus:border-orange-500 transition-colors disabled:opacity-50"}),jsxRuntimeExports.jsx(motion.button,{onClick:c,disabled:!r.trim()||e,className:"w-8 h-8 rounded-full bg-linear-to-r from-orange-500 to-orange-600 text-white disabled:opacity-50 flex items-center justify-center shrink-0",whileHover:{scale:1.1},whileTap:{scale:.9},children:e?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}):jsxRuntimeExports.jsx(Send,{className:"w-3.5 h-3.5"})})]})})}let globalMentionClickHandler=null;function setMentionClickHandler(t){globalMentionClickHandler=t}function getMentionClickHandler(){return globalMentionClickHandler}function CodeBlock$1({code:t,language:e,keyPrefix:s}){const[r,a]=reactExports.useState(!1),o=async()=>{await navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)};return jsxRuntimeExports.jsxs("div",{className:"relative group my-3 rounded-xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-neutral-200 dark:bg-neutral-800 border-b border-neutral-300 dark:border-neutral-700",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-mono",children:e||"code"}),jsxRuntimeExports.jsx("button",{onClick:o,className:"flex items-center gap-1.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white transition-colors",children:r?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Check,{className:"w-3.5 h-3.5 text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-green-400",children:"Copied!"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Copy,{className:"w-3.5 h-3.5"}),jsxRuntimeExports.jsx("span",{children:"Copy"})]})})]}),jsxRuntimeExports.jsx("pre",{className:"p-4 bg-neutral-100 dark:bg-neutral-900 overflow-x-auto",children:jsxRuntimeExports.jsx("code",{className:"text-sm text-neutral-800 dark:text-neutral-200 font-mono whitespace-pre",children:t})})]},s)}function MathBlock({latex:t,displayMode:e,keyPrefix:s}){const[r,a]=reactExports.useState(null),[o,l]=reactExports.useState("");return React.useEffect(()=>{try{__vitePreload(()=>import("./katex-DhXJpUyf.js"),[]).then(c=>{const u=c.default.renderToString(t,{displayMode:e,throwOnError:!1,errorColor:"#ef4444",strict:!1,trust:!1});l(u),a(null)}).catch(c=>{a(c instanceof Error?c.message:"Failed to load KaTeX")})}catch(c){a(c instanceof Error?c.message:"Failed to render LaTeX")}},[t,e]),r?jsxRuntimeExports.jsx("div",{className:`my-2 p-3 rounded-lg border-2 border-red-400 dark:border-red-600 bg-red-50 dark:bg-red-900/20 ${e?"block":"inline-block"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-red-600 dark:text-red-400 font-mono",children:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"text-red-700 dark:text-red-300 font-semibold mb-1",children:"LaTeX Error"}),jsxRuntimeExports.jsx("pre",{className:"text-xs text-neutral-600 dark:text-neutral-400 font-mono overflow-x-auto",children:t}),r&&jsxRuntimeExports.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:r})]})]})},s):jsxRuntimeExports.jsx("div",{className:`my-2 ${e?"text-center overflow-x-auto":"inline"}`,dangerouslySetInnerHTML:{__html:o},role:"math","aria-label":`Math formula: ${t}`},s)}function replaceMathPlaceholders(t,e,s,r){const a="\0MATH",o=[],l=new RegExp(`${a}(\\d+)\0`,"g");let c=0,u,f=r;for(;(u=l.exec(t))!==null;){u.index>c&&o.push(t.slice(c,u.index));const d=parseInt(u[1],10);o.push(jsxRuntimeExports.jsx(MathBlock,{latex:e[d],displayMode:!1,keyPrefix:`math-inline-${f}`},`${s}-math-${f++}`)),c=u.index+u[0].length}return c<t.length&&o.push(t.slice(c)),o.length>0?o:[t]}function parseInline(t,e,s="text-white"){const r=t.replace(/\\([*_`[\]()#+-.|!\\])/g,"$1"),a=[],o="\0MATH",l=r.replace(new RegExp("(?<!\\\\)((?:\\\\\\\\)*)\\\\\\((.+?)\\\\\\)","g"),(m,y,b)=>{if(y&&y.length%2===1)return m.slice(1);const E=a.push(b)-1;return`${o}${E}\0`}),c=[];let u=0;const f=new RegExp(`(\\*\\*(.+?)\\*\\*|\\*([^\\s*](?:[^*]*[^\\s*])?)\\*|_([^_]+?)_|\`([^\`]+?)\`|<br\\s*\\/?>|<b>(.+?)<\\/b>|<strong>(.+?)<\\/strong>|<i>(.+?)<\\/i>|<em>(.+?)<\\/em>|<code>(.+?)<\\/code>|<a\\s+href=["']([^"']+)["']>(.+?)<\\/a>|\\[([^\\]]+)\\]\\(((?:[^\\s()]|\\([^\\s)]*\\))+)(?:\\s+"([^"]+)")?\\)|!\\[([^\\]]*)\\]\\(((?:[^()]|\\([^)]*\\))+)\\)|(https?:\\/\\/[^\\s<>[\\]()]+[^\\s<>[\\]().,;:!?'"])|((?<!\\S)@[\\w-]+))`,"gi");let d=0,p;for(;(p=f.exec(l))!==null;){if(p.index>d){const m=l.slice(d,p.index);c.push(...replaceMathPlaceholders(m,a,e,u)),u+=a.length}if(p[2]){const m=parseInline(p[2],`${e}-bold-${u}`,s);c.push(jsxRuntimeExports.jsx("strong",{children:m},`${e}-strong-${u++}`))}else if(p[3]){const m=parseInline(p[3],`${e}-italic-${u}`,s);c.push(jsxRuntimeExports.jsx("em",{children:m},`${e}-em-${u++}`))}else if(p[4]){const m=parseInline(p[4],`${e}-italic2-${u}`,s);c.push(jsxRuntimeExports.jsx("em",{children:m},`${e}-em2-${u++}`))}else if(p[5])c.push(jsxRuntimeExports.jsx("code",{className:"bg-neutral-200 dark:bg-neutral-700/50 text-neutral-900 dark:text-neutral-200 px-1.5 py-0.5 rounded text-sm font-mono",children:p[5]},`${e}-code-${u++}`));else if(p[0].toLowerCase().startsWith("<br"))c.push(jsxRuntimeExports.jsx("br",{},`${e}-br-${u++}`));else if(p[6]){const m=parseInline(p[6],`${e}-b-${u}`,s);c.push(jsxRuntimeExports.jsx("strong",{children:m},`${e}-b-${u++}`))}else if(p[7]){const m=parseInline(p[7],`${e}-strong-${u}`,s);c.push(jsxRuntimeExports.jsx("strong",{children:m},`${e}-strong2-${u++}`))}else if(p[8]){const m=parseInline(p[8],`${e}-i-${u}`,s);c.push(jsxRuntimeExports.jsx("em",{children:m},`${e}-i-${u++}`))}else if(p[9]){const m=parseInline(p[9],`${e}-em-${u}`,s);c.push(jsxRuntimeExports.jsx("em",{children:m},`${e}-em3-${u++}`))}else if(p[10])c.push(jsxRuntimeExports.jsx("code",{className:"bg-neutral-200 dark:bg-neutral-700/50 text-neutral-900 dark:text-neutral-200 px-1.5 py-0.5 rounded text-sm font-mono",children:p[10]},`${e}-code2-${u++}`));else if(p[11]&&p[12]){const m=parseInline(p[12],`${e}-a-${u}`,s);c.push(jsxRuntimeExports.jsx("a",{href:p[11],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:m},`${e}-a-${u++}`))}else if(p[13]&&p[14]){const m=parseInline(p[13],`${e}-link-${u}`,s),y=p[15];c.push(jsxRuntimeExports.jsx("a",{href:p[14],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",title:y||void 0,children:m},`${e}-link-${u++}`))}else if(p[17]){const m=p[16]||"image",y=p[17];c.push(jsxRuntimeExports.jsx("img",{src:y,alt:m,className:"max-w-full h-auto rounded-lg my-2 border border-neutral-300 dark:border-neutral-700/50",loading:"lazy"},`${e}-img-${u++}`))}else if(p[18]){const m=p[18];c.push(jsxRuntimeExports.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline break-all",children:m},`${e}-url-${u++}`))}else if(p[19]){const m=p[19],y=m.slice(1);c.push(jsxRuntimeExports.jsx("span",{className:`${s} font-bold cursor-pointer hover:underline`,onClick:b=>{b.stopPropagation();const E=getMentionClickHandler();E&&E(y)},role:"button",tabIndex:0,onKeyDown:b=>{if(b.key==="Enter"||b.key===" "){b.preventDefault();const E=getMentionClickHandler();E&&E(y)}},children:m},`${e}-mention-${u++}`))}d=p.index+p[0].length}if(d<l.length){const m=l.slice(d);c.push(...replaceMathPlaceholders(m,a,e,u))}return c.length>0?c:[t]}function splitTableRow(t){const e=[];let s="",r=!1,a=!1,o=0,l=!1;for(let c=0;c<t.length;c++){const u=t[c];if(a){s+=u,a=!1;continue}if(u==="\\"){a=!0,s+=u;continue}if(u==="["){o++,s+=u;continue}if(u==="]"&&o>0){o--,s+=u,o===0&&c+1<t.length&&t[c+1]==="("&&(l=!0);continue}if(u==='"'&&(l||r)){r=!r,s+=u;continue}if(u===")"&&l&&!r){l=!1,s+=u;continue}if(u==="|"&&!r&&o===0&&!l){e.push(s),s="";continue}s+=u}return(s||t.endsWith("|"))&&e.push(s),e.slice(1,-1).map(c=>c.trim())}function parseTable(t,e,s="text-white"){const r=t.filter(l=>!l.match(/^\|[\s-:|]+\|$/)).map(l=>splitTableRow(l));if(r.length===0)return null;const[a,...o]=r;return jsxRuntimeExports.jsx("div",{className:"overflow-x-auto my-2",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm border-collapse",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsx("tr",{className:"border-b border-neutral-300 dark:border-neutral-600",children:a.map((l,c)=>jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold text-neutral-800 dark:text-neutral-200",children:parseInline(l,`${e}-th-${c}`,s)},c))})}),jsxRuntimeExports.jsx("tbody",{children:o.map((l,c)=>jsxRuntimeExports.jsx("tr",{className:"border-b border-neutral-200 dark:border-neutral-700/50 hover:bg-neutral-100 dark:hover:bg-neutral-700/20",children:l.map((u,f)=>jsxRuntimeExports.jsx("td",{className:"p-2 text-neutral-700 dark:text-neutral-300",children:parseInline(u,`${e}-td-${c}-${f}`,s)},f))},c))})]})},e)}function parseHeader(t,e,s="text-white"){const r=t.match(/^(#{1,6})\s+(.+)$/);if(!r)return null;const a=r[1].length,o=r[2],l={1:"text-2xl font-bold text-neutral-900 dark:text-white mt-4 mb-2",2:"text-xl font-bold text-neutral-900 dark:text-white mt-3 mb-2",3:"text-lg font-semibold text-neutral-800 dark:text-neutral-100 mt-3 mb-1",4:"text-base font-semibold text-neutral-700 dark:text-neutral-200 mt-2 mb-1",5:"text-sm font-semibold text-neutral-600 dark:text-neutral-300 mt-2 mb-1",6:"text-sm font-medium text-neutral-500 dark:text-neutral-400 mt-2 mb-1"},c=parseInline(o,`${e}-h`,s);switch(a){case 1:return jsxRuntimeExports.jsx("h1",{className:l[1],children:c},e);case 2:return jsxRuntimeExports.jsx("h2",{className:l[2],children:c},e);case 3:return jsxRuntimeExports.jsx("h3",{className:l[3],children:c},e);case 4:return jsxRuntimeExports.jsx("h4",{className:l[4],children:c},e);case 5:return jsxRuntimeExports.jsx("h5",{className:l[5],children:c},e);case 6:return jsxRuntimeExports.jsx("h6",{className:l[6],children:c},e);default:return jsxRuntimeExports.jsx("p",{className:l[1],children:c},e)}}function MarkdownContent({text:t,mentionClassName:e="text-white"}){const s=[];let r=0;const a=e,o=t.split(`
`);let l=0;for(;l<o.length;){const c=o[l];if(c.includes("\\[")){const f=c.match(/\\\\?\[/);if(f&&f[0]==="\\["){const d=c.slice(0,f.index),p=c.slice(f.index+2);d.trim()&&s.push(jsxRuntimeExports.jsx("p",{className:"leading-relaxed",children:parseInline(d,`line-${r}`,a)},`p-${r++}`));const m=[];let y=p,b=!1;for(;l<o.length;){const E=y.match(/\\\\?\]/);if(E&&E[0]==="\\]"){m.push(y.slice(0,E.index));const C=y.slice(E.index+2);b=!0;const j=m.join(`
`).trim();s.push(jsxRuntimeExports.jsx(MathBlock,{latex:j,displayMode:!0,keyPrefix:`mathblock-${r}`},`math-${r++}`)),C.trim()&&s.push(jsxRuntimeExports.jsx("p",{className:"leading-relaxed",children:parseInline(C,`line-${r}`,a)},`p-${r++}`)),l++;break}else if(m.push(y),l++,l<o.length)y=o[l];else{b=!1;break}}if(!b){const E="\\["+m.join(`
`);s.push(jsxRuntimeExports.jsx("p",{className:"leading-relaxed",children:parseInline(E,`line-${r}`,a)},`p-${r++}`))}continue}else if(f&&f[0]==="\\\\["){const d=c.replace("\\\\[","\\[");s.push(jsxRuntimeExports.jsx("p",{className:"leading-relaxed",children:parseInline(d,`line-${r}`,a)},`p-${r++}`)),l++;continue}}if(c.trim().startsWith("```")){const f=c.trim().slice(3).trim(),d=[];for(l++;l<o.length&&!o[l].trim().startsWith("```");)d.push(o[l]),l++;l++;const p=d.join(`
`);s.push(jsxRuntimeExports.jsx(CodeBlock$1,{code:p,language:f,keyPrefix:`codeblock-${r}`},`code-${r++}`));continue}if(c.trim().match(/^#{1,6}\s+/)){const f=parseHeader(c.trim(),`header-${r++}`,a);if(f){s.push(f),l++;continue}}if(c.trim().match(/^([-*_])\1{2,}$/)){s.push(jsxRuntimeExports.jsx("hr",{className:"my-4 border-t border-neutral-300 dark:border-neutral-700"},`hr-${r++}`)),l++;continue}if(c.trim().startsWith("|")&&c.trim().endsWith("|")){const f=[];for(;l<o.length&&o[l].trim().startsWith("|")&&o[l].trim().endsWith("|");)f.push(o[l]),l++;f.length>=2&&s.push(parseTable(f,`table-${r++}`,a));continue}if(c.match(/^(\s*)([*-])\s+(.*)$/)){const f=[];for(;l<o.length;){const d=o[l].match(/^(\s*)([*-])\s+(.*)$/);if(d)f.push({content:d[3]}),l++;else break}f.length>0&&s.push(jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside space-y-1 ml-1",children:f.map((d,p)=>jsxRuntimeExports.jsx("li",{className:"text-neutral-800 dark:text-neutral-200",children:parseInline(d.content,`li-${r}-${p}`,a)},p))},`ul-${r++}`));continue}if(c.trim()===""){s.push(jsxRuntimeExports.jsx("div",{className:"h-2"},`space-${r++}`)),l++;continue}s.push(jsxRuntimeExports.jsx("p",{className:"leading-relaxed",children:parseInline(c,`line-${r}`,a)},`p-${r++}`)),l++}return jsxRuntimeExports.jsx("div",{className:"space-y-1",children:s})}const WINDOW_WIDTH=328,WINDOW_HEIGHT=455,WINDOW_GAP=12,BUBBLES_WIDTH=88;function buildAddressId$2(t){let e=t;e.startsWith("DIRECT://")?e=e.slice(9):e.startsWith("DIRECT:")&&(e=e.slice(7));const s=e.slice(0,6).toLowerCase(),r=e.slice(-6).toLowerCase();return`DIRECT_${s}_${r}`}function MiniChatWindow({conversation:t,index:e}){const s=useNavigate(),r=useQueryClient(),{sphere:a}=useSphereContext(),{directAddress:o}=useIdentity(),l=o?buildAddressId$2(o):"default",{closeWindow:c,minimizeWindow:u}=useMiniChatStore(),f=reactExports.useRef(null),{data:d=[],isLoading:p}=useQuery({queryKey:CHAT_KEYS.messages(l,t.peerPubkey),queryFn:()=>{if(!a)return[];const C=a.communications.getConversation(t.peerPubkey),j=a.identity.chainPubkey;return C.map(B=>toDisplayMessage(B,j))},enabled:!!a,staleTime:5e3});reactExports.useEffect(()=>{if(a){const B=a.communications.getConversation(t.peerPubkey).filter(D=>!D.isRead&&D.senderPubkey===t.peerPubkey).map(D=>D.id);B.length>0&&(a.communications.markAsRead(B),r.invalidateQueries({queryKey:CHAT_KEYS.all}))}const C=j=>{const B=j.detail;B.peerPubkey===t.peerPubkey&&(r.invalidateQueries({queryKey:CHAT_KEYS.messages(l,t.peerPubkey)}),a&&!B.isFromMe&&(a.communications.markAsRead([B.messageId]),r.invalidateQueries({queryKey:CHAT_KEYS.all})))};return window.addEventListener("dm-received",C),()=>{window.removeEventListener("dm-received",C)}},[t.peerPubkey,r,a,l]);const m=useMutation({mutationFn:async C=>{if(!a)throw new Error("Wallet not initialized");return await a.communications.sendDM(t.peerPubkey,C),!0},onSuccess:()=>{r.invalidateQueries({queryKey:CHAT_KEYS.all})}});reactExports.useEffect(()=>{f.current?.scrollIntoView({behavior:"smooth"})},[d]);const y=()=>{c(t.peerPubkey);const C=t.peerNametag||t.peerPubkey;s(`/agents/chat?nametag=${encodeURIComponent(C)}`)},b=async C=>m.mutateAsync(C),E=BUBBLES_WIDTH+e*(WINDOW_WIDTH+WINDOW_GAP);return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",damping:25,stiffness:300},style:{left:E,width:WINDOW_WIDTH,height:WINDOW_HEIGHT},className:"fixed bottom-4 z-100000 bg-white dark:bg-neutral-900 rounded-xl border border-neutral-200 dark:border-neutral-700 shadow-2xl flex flex-col overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 border-b border-neutral-200 dark:border-neutral-700 flex items-center gap-3 bg-linear-to-r from-white to-neutral-50 dark:from-neutral-900 dark:to-neutral-800 shrink-0",children:[jsxRuntimeExports.jsx("div",{className:`w-9 h-9 rounded-lg bg-linear-to-br ${getColorFromPubkey(t.peerPubkey).gradient} flex items-center justify-center text-white font-medium text-sm shadow-md shrink-0`,children:getAvatar(t.peerPubkey,t.peerNametag)}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0",children:jsxRuntimeExports.jsx("h4",{className:"font-medium text-neutral-900 dark:text-white text-sm truncate",children:getDisplayName(t.peerPubkey,t.peerNametag)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[jsxRuntimeExports.jsx(motion.button,{onClick:()=>u(t.peerPubkey),className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-500 dark:text-neutral-400 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Minimize",children:jsxRuntimeExports.jsx(Minus,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:y,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-500 dark:text-neutral-400 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Open in Messenger",children:jsxRuntimeExports.jsx(Maximize2,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>c(t.peerPubkey),className:"p-1.5 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 text-neutral-500 dark:text-neutral-400 hover:text-red-500 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Close",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-3 min-h-0 bg-neutral-50 dark:bg-neutral-900/50",children:p?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 text-orange-500 animate-spin"})}):d.length===0?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-center",children:jsxRuntimeExports.jsx("p",{className:"text-neutral-400 text-sm",children:"No messages yet. Say hi!"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[d.map(C=>{const j=C.isFromMe;return jsxRuntimeExports.jsx("div",{className:`flex ${j?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[80%] rounded-2xl px-3 py-2 ${j?"bg-linear-to-br from-orange-500 to-orange-600 text-white":"bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed wrap-break-word whitespace-pre-wrap",children:jsxRuntimeExports.jsx(MarkdownContent,{text:C.content})}),jsxRuntimeExports.jsx("div",{className:`text-[10px] mt-1 ${j?"text-white/60":"text-neutral-400"}`,children:formatMessageTime(C.timestamp)})]})},C.id)}),jsxRuntimeExports.jsx("div",{ref:f})]})}),jsxRuntimeExports.jsx(MiniChatInput,{onSend:b,isSending:m.isPending,placeholder:`Message ${getDisplayName(t.peerPubkey,t.peerNametag)}...`})]})}const MAX_VISIBLE_BUBBLES=5;function buildAddressId$1(t){let e=t;e.startsWith("DIRECT://")?e=e.slice(9):e.startsWith("DIRECT:")&&(e=e.slice(7));const s=e.slice(0,6).toLowerCase(),r=e.slice(-6).toLowerCase();return`DIRECT_${s}_${r}`}function MiniChatBubbles(){const t=useQueryClient(),{sphere:e}=useSphereContext(),{directAddress:s}=useIdentity(),r=s?buildAddressId$1(s):"default",{openWindowIds:a,minimizedWindowIds:o,dismissedWindowIds:l,isListExpanded:c,toggleList:u,closeList:f,openWindow:d}=useMiniChatStore(),{data:p=[]}=useQuery({queryKey:CHAT_KEYS.conversations(r),queryFn:()=>{if(!e)return[];const j=e.communications.getConversations();return buildConversations(j,e.identity.chainPubkey)},enabled:!!e,staleTime:5e3}),{data:m=0}=useQuery({queryKey:CHAT_KEYS.unreadCount(r),queryFn:()=>e?.communications.getUnreadCount()??0,enabled:!!e,staleTime:5e3});reactExports.useEffect(()=>{const j=()=>{t.invalidateQueries({queryKey:CHAT_KEYS.all})};return window.addEventListener("dm-received",j),()=>{window.removeEventListener("dm-received",j)}},[t]);const y=reactExports.useMemo(()=>a.map(j=>p.find(B=>B.peerPubkey===j)).filter(j=>j!==void 0),[p,a]),b=reactExports.useMemo(()=>[...p].sort((j,B)=>j.unreadCount>0&&B.unreadCount===0?-1:B.unreadCount>0&&j.unreadCount===0?1:B.lastMessageTime-j.lastMessageTime),[p]),E=y.filter(j=>!o.includes(j.peerPubkey)),C=reactExports.useMemo(()=>{const j=new Set(l),B=new Set(a.filter(D=>!o.includes(D)));return b.filter(D=>!j.has(D.peerPubkey)&&!B.has(D.peerPubkey)).slice(0,MAX_VISIBLE_BUBBLES)},[b,a,o,l]);return p.length===0?null:reactDomExports.createPortal(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"hidden md:flex fixed left-4 bottom-4 z-100000 flex-col-reverse items-start gap-3",children:[jsxRuntimeExports.jsxs("button",{onMouseDown:j=>j.stopPropagation(),onClick:u,className:"relative w-14 h-14 rounded-xl bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 flex items-center justify-center text-neutral-600 dark:text-neutral-300 shadow-lg cursor-pointer hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"w-5 h-5"}),m>0&&!c&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-orange-500 shadow-md"})]}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"popLayout",children:!c&&C.map((j,B)=>jsxRuntimeExports.jsx(MiniChatBubble,{conversation:j,onClick:()=>d(j),index:B},j.peerPubkey))})]}),jsxRuntimeExports.jsxs("div",{className:"hidden md:block",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:c&&jsxRuntimeExports.jsx(MiniChatList,{onClose:f})}),jsxRuntimeExports.jsx(AnimatePresence,{children:E.map((j,B)=>jsxRuntimeExports.jsx(MiniChatWindow,{conversation:j,index:B},j.peerPubkey))})]})]}),document.body)}const UI_STATE_KEY=["ui","state"],defaultState={isFullscreen:!1};function useUIState(){const t=useQueryClient(),{data:e=defaultState}=useQuery({queryKey:UI_STATE_KEY,queryFn:()=>defaultState,staleTime:1/0,gcTime:1/0}),s=reactExports.useCallback(a=>{t.setQueryData(UI_STATE_KEY,o=>({...o,...defaultState,isFullscreen:a}))},[t]),r=reactExports.useCallback(()=>{t.setQueryData(UI_STATE_KEY,a=>({...a,...defaultState,isFullscreen:!a?.isFullscreen}))},[t]);return{isFullscreen:e.isFullscreen,setFullscreen:s,toggleFullscreen:r}}const PADDING=12;function TutorialOverlay({isActive:t,currentStep:e,currentStepIndex:s,totalSteps:r,isLastStep:a,onNext:o,onDismiss:l}){const[c,u]=reactExports.useState(null),[f,d]=reactExports.useState(window.innerWidth<1024),p=reactExports.useCallback(()=>{if(!e)return;const E=document.querySelector(`[data-tutorial="${e.target}"]`);if(E){const C=E.getBoundingClientRect();u({top:C.top-PADDING,left:C.left-PADDING,width:C.width+PADDING*2,height:C.height+PADDING*2})}d(window.innerWidth<1024)},[e]);if(reactExports.useEffect(()=>{if(!t)return;let E;if(e.trigger)document.querySelector(`[data-tutorial="${e.trigger}"]`)?.click(),E=setTimeout(p,400);else{const C=requestAnimationFrame(()=>p());return()=>cancelAnimationFrame(C)}return window.addEventListener("resize",p),()=>{clearTimeout(E),window.removeEventListener("resize",p)}},[t,e,p]),reactExports.useEffect(()=>{if(t)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[t]),!t||!c)return null;const m=16,y=f?{bottom:m,left:m,right:m}:(()=>{const E=c.top+c.height+m,C=E<window.innerHeight-200;return{top:C?E:c.top-m,left:Math.max(16,c.left),maxWidth:Math.min(400,window.innerWidth-32),transformOrigin:C?"top":"bottom",...C?{}:{transform:"translateY(-100%)"}}})(),b=f?!0:c.top+c.height+m<window.innerHeight-200;return jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-200",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0",onClick:l}),jsxRuntimeExports.jsx(motion.div,{className:"absolute rounded-2xl pointer-events-none border-2 border-orange-500/50",style:{boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.85)"},initial:!1,animate:{top:c.top,left:c.left,width:c.width,height:c.height},transition:{duration:.4,ease:[.4,0,.2,1]}}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:f?20:b?10:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:f?20:b?-10:10},transition:{duration:.3,delay:.15},className:f?"fixed":"absolute",style:y,children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700/50 rounded-2xl p-5 shadow-2xl",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1.5 mb-3",children:Array.from({length:r}).map((E,C)=>jsxRuntimeExports.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${C===s?"w-6 bg-orange-500":C<s?"w-1.5 bg-orange-500/50":"w-1.5 bg-neutral-300 dark:bg-neutral-600"}`},C))}),jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold text-neutral-900 dark:text-white mb-1",children:e.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4 leading-relaxed",children:e.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:l,className:"text-xs text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors",children:"Skip tutorial"}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,className:"px-4 py-2 rounded-xl bg-linear-to-r from-orange-500 to-orange-600 text-white text-sm font-medium shadow-lg shadow-orange-500/25 hover:from-orange-400 hover:to-orange-500 transition-all",children:a?"Got it!":"Next"})]})]})},s)})]},"tutorial-overlay")})}const DESKTOP_STEPS=[{target:"header",title:"Navigation",description:"Use the header to navigate between pages, toggle the theme, and access links"},{target:"wallet",title:"Wallet",description:"Here you can create a new or import an existing wallet and manage your assets"},{target:"agents",title:"Agents",description:"Here you can choose agents to interact with"},{target:"chat",title:"Main Area",description:"Here the main interaction with the selected agent will happen"}],MOBILE_STEPS=[{target:"header",title:"Navigation",description:"Use the header to navigate between pages, toggle the theme, and access links"},{target:"mobile-tabs",title:"Switch Panels",description:"Use these tabs to switch between agents and your wallet"},{target:"mobile-chat",title:"Main Area",description:"Here the main interaction with the selected agent will happen"},{target:"mobile-wallet",title:"Wallet",description:"Here you can create a new or import an existing wallet and manage your assets",trigger:"mobile-wallet-tab"}];function getSteps(){return window.innerWidth>=1024?DESKTOP_STEPS:MOBILE_STEPS}function useTutorial(){const[t,e]=reactExports.useState(!1),[s,r]=reactExports.useState(0),a=reactExports.useMemo(getSteps,[]);reactExports.useEffect(()=>{localStorage.getItem(STORAGE_KEYS.TUTORIAL_COMPLETED)==="true"||e(!0)},[]),reactExports.useEffect(()=>{const f=()=>{getSteps()!==a&&t&&e(!1)};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[t,a]);const o=a[s],l=s===a.length-1,c=reactExports.useCallback(()=>{e(!1),localStorage.setItem(STORAGE_KEYS.TUTORIAL_COMPLETED,"true")},[]),u=reactExports.useCallback(()=>{l?c():r(f=>f+1)},[l,c]);return{isActive:t,currentStep:o,currentStepIndex:s,totalSteps:a.length,isLastStep:l,next:u,dismiss:c}}function DashboardLayout(){const t=useLocation(),e=t.pathname==="/mine",{isFullscreen:s}=useUIState(),r=useTutorial(),o=!(t.pathname==="/agents/chat")||s,l=t.pathname.startsWith("/agents/");return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-neutral-100 dark:bg-linear-to-br dark:from-neutral-950 dark:via-neutral-900 dark:to-neutral-950 theme-transition overflow-y-auto overflow-x-hidden",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-0 flex",children:jsxRuntimeExports.jsx("div",{className:`flex-1 max-w-450 w-full mx-auto px-4 pt-4 pb-0 md:p-8 lg:pb-8 ${e?"bg-neutral-100 dark:bg-gray-950":""}`,children:jsxRuntimeExports.jsx(Outlet,{})})}),o&&jsxRuntimeExports.jsx(MiniChatBubbles,{}),l&&r.isActive&&jsxRuntimeExports.jsx(TutorialOverlay,{isActive:r.isActive,currentStep:r.currentStep,currentStepIndex:r.currentStepIndex,totalSteps:r.totalSteps,isLastStep:r.isLastStep,onNext:r.next,onDismiss:r.dismiss})]})}const DiscordIcon=({className:t})=>jsxRuntimeExports.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})});function SplashScreen({onEnter:t}){return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-linear-to-br from-neutral-100 via-white to-neutral-100 dark:from-neutral-950 dark:via-neutral-900 dark:to-neutral-950 cursor-pointer",onClick:t,children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/4 left-1/4 w-48 h-48 md:w-96 md:h-96 bg-orange-500/10 dark:bg-orange-500/20 rounded-full blur-2xl md:blur-3xl",animate:{scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute bottom-1/4 right-1/4 w-48 h-48 md:w-96 md:h-96 bg-purple-500/10 dark:bg-purple-500/20 rounded-full blur-2xl md:blur-3xl ",animate:{scale:[1,1.3,1],opacity:[.1,.2,.1]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:1}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] md:w-[600px] md:h-[600px] bg-orange-500/5 dark:bg-orange-500/10 rounded-full blur-3xl will-change-transform",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0,ease:"easeInOut"},style:{backfaceVisibility:"hidden",perspective:1e3}}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 text-center px-4 md:px-8 flex flex-col items-center justify-between h-full py-12 md:py-20",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut"},className:"relative mb-6 md:mb-12",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-orange-500/10 dark:from-orange-500/20 to-orange-600/10 dark:to-orange-600/20 blur-2xl md:blur-3xl",style:{animation:"pulse-slow 3s ease-in-out infinite"}}),jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center gap-0 flex-wrap",children:[jsxRuntimeExports.jsx(motion.div,{className:"relative",animate:{textShadow:["0 0 20px rgba(0, 0, 0, 0.1)","0 0 30px rgba(0, 0, 0, 0.15)","0 0 20px rgba(0, 0, 0, 0.1)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:jsxRuntimeExports.jsx("span",{className:"text-4xl sm:text-5xl md:text-7xl lg:text-8xl text-neutral-900 dark:text-white tracking-tight",style:{fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:900},children:"AGENT"})}),jsxRuntimeExports.jsx(motion.div,{className:"relative",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,delay:.3},children:jsxRuntimeExports.jsx(motion.span,{className:"text-4xl sm:text-5xl md:text-7xl lg:text-8xl bg-linear-to-r from-orange-500 via-orange-400 to-orange-600 bg-clip-text text-transparent tracking-tight",style:{fontFamily:"system-ui, -apple-system, sans-serif",fontWeight:900},animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0,ease:"linear"},children:"SPHERE"})})]})]}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},className:"text-neutral-500 dark:text-neutral-400 text-sm sm:text-base md:text-lg lg:text-xl tracking-wide",children:"Dive in and feel the difference"}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex items-center gap-4 mt-6",onClick:e=>e.stopPropagation(),children:[jsxRuntimeExports.jsx(motion.a,{href:"https://github.com/unicitynetwork",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},className:"p-3 rounded-full bg-neutral-200/50 dark:bg-neutral-800/50 hover:bg-neutral-300/50 dark:hover:bg-neutral-700/50 transition-colors group",children:jsxRuntimeExports.jsx(Github,{className:"w-5 h-5 md:w-6 md:h-6 text-neutral-600 dark:text-neutral-400 group-hover:text-orange-500 dark:group-hover:text-orange-400 transition-colors"})}),jsxRuntimeExports.jsx(motion.a,{href:"https://discord.gg/S9f57ZKdt",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},className:"p-3 rounded-full bg-neutral-200/50 dark:bg-neutral-800/50 hover:bg-neutral-300/50 dark:hover:bg-neutral-700/50 transition-colors group",children:jsxRuntimeExports.jsx(DiscordIcon,{className:"w-5 h-5 md:w-6 md:h-6 text-neutral-600 dark:text-neutral-400 group-hover:text-orange-500 dark:group-hover:text-orange-400 transition-colors"})})]})]}),jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"text-neutral-500 dark:text-neutral-400 flex items-center gap-3 group mt-8",whileHover:{scale:1.05},whileTap:{scale:.95},children:[jsxRuntimeExports.jsx("span",{className:"relative z-10 group-hover:text-orange-500 dark:group-hover:text-orange-400 transition-colors text-sm md:text-base",children:"Tap to join"}),jsxRuntimeExports.jsx(motion.div,{animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 md:w-5 md:h-5 relative z-10 text-orange-500 dark:text-orange-400"})})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-10 dark:opacity-20 md:opacity-15 md:dark:opacity-30 pointer-events-none",style:{backgroundImage:`
            radial-gradient(at 20% 30%, rgba(251, 146, 60, 0.15) 0px, transparent 50%),
            radial-gradient(at 80% 70%, rgba(168, 85, 247, 0.15) 0px, transparent 50%)
          `}}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes pulse-slow {
          0%, 100% { transform: scale(1); opacity: 0.2; }
          50% { transform: scale(1.15); opacity: 0.3; }
        }
        @media (prefers-reduced-motion: reduce) {
          .will-change-transform {
            animation: none !important;
          }
        }
      `})]})}function WelcomeModal({show:t,onAccept:e}){const[s,r]=reactExports.useState(!1);return jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-white/80 dark:bg-black/80 backdrop-blur-md flex items-center justify-center z-60 p-4",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:30},transition:{type:"spring",duration:.5},className:"relative w-full max-w-md bg-linear-to-b from-neutral-100 to-white dark:from-neutral-900 dark:to-black border border-orange-500/20 rounded-3xl shadow-2xl shadow-orange-500/10 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-64 h-64 bg-orange-500/15 rounded-full blur-3xl pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-48 h-48 bg-purple-500/8 rounded-full blur-3xl pointer-events-none"}),jsxRuntimeExports.jsxs("div",{className:"relative p-8 md:p-10",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-center mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"relative inline-flex items-center justify-center mb-5",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 w-20 h-20 rounded-full bg-orange-500/20 blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-18 h-18 rounded-full bg-linear-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-xl shadow-orange-500/30",children:jsxRuntimeExports.jsx(Shield,{className:"w-9 h-9 text-white"})})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-neutral-900 dark:text-white mb-2",children:"Welcome Aboard"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"Infrastructure for a free Internet"})]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-center mb-6 px-2",children:jsxRuntimeExports.jsxs("p",{className:"text-neutral-600 dark:text-neutral-300 text-sm md:text-base italic",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl leading-none text-orange-500/40 font-serif align-text-top",children:""}),"Privacy isn't a feature. It's the foundation of freedom.",jsxRuntimeExports.jsx("span",{className:"text-2xl leading-none text-orange-500/40 font-serif align-text-top",children:""})]})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},className:"space-y-4",children:[jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-3 p-4 rounded-2xl cursor-pointer transition-all duration-200 border ${s?"bg-orange-500/5 dark:bg-orange-500/10 border-orange-500/30":"bg-neutral-100/50 dark:bg-neutral-800/30 border-neutral-200 dark:border-neutral-700/50 hover:border-neutral-300 dark:hover:border-neutral-600"}`,children:[jsxRuntimeExports.jsxs("div",{className:"relative shrink-0",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:s,onChange:a=>r(a.target.checked),className:"sr-only"}),jsxRuntimeExports.jsx("div",{className:`w-5 h-5 rounded-md border-2 transition-all duration-200 ${s?"bg-orange-500 border-orange-500 shadow-sm shadow-orange-500/30":"border-neutral-400 dark:border-neutral-600"}`,children:s&&jsxRuntimeExports.jsx(motion.svg,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},className:"w-full h-full text-white p-0.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:jsxRuntimeExports.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),jsxRuntimeExports.jsx("span",{className:`text-sm transition-colors duration-200 ${s?"text-neutral-900 dark:text-white":"text-neutral-600 dark:text-neutral-400"}`,children:"I confirm that I am at least 18 years old"})]}),jsxRuntimeExports.jsxs(motion.button,{whileHover:s?{scale:1.02}:{},whileTap:s?{scale:.98}:{},onClick:s?e:void 0,disabled:!s,className:`w-full py-4 rounded-2xl font-semibold text-white flex items-center justify-center gap-2 transition-all duration-300 ${s?"bg-linear-to-r from-orange-500 to-orange-600 hover:from-orange-400 hover:to-orange-500 shadow-lg shadow-orange-500/25":"bg-neutral-300 dark:bg-neutral-800 cursor-not-allowed opacity-40"}`,children:[jsxRuntimeExports.jsx("span",{children:"Enter the Sphere"}),jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5"})]})]})]})]})})})}function IntroPage(){const t=useNavigate(),[e,s]=reactExports.useState(!1),[r,a]=reactExports.useState(null);reactExports.useEffect(()=>{const c=localStorage.getItem(STORAGE_KEYS.WELCOME_ACCEPTED)==="true";a(c)},[]);const o=()=>{r?t("/home"):s(!0)},l=()=>{localStorage.setItem(STORAGE_KEYS.WELCOME_ACCEPTED,"true"),s(!1),t("/home")};return r===null?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(SplashScreen,{onEnter:o}),jsxRuntimeExports.jsx(WelcomeModal,{show:e,onAccept:l})]})}function AgentCard({id:t,name:e,Icon:s,category:r,color:a,isSelected:o}){return jsxRuntimeExports.jsx(Link$1,{to:`/agents/${t}`,children:jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05,y:-4},whileTap:{scale:.95},transition:{duration:.05},className:`relative rounded-xl md:rounded-2xl p-2 md:p-6 aspect-square md:aspect-auto md:h-45 flex flex-col items-center justify-center gap-2 md:gap-4 transition-all duration-150 overflow-hidden group cursor-pointer ${o?"ring-2 ring-orange-500 ring-offset-1 md:ring-offset-2 ring-offset-neutral-100 dark:ring-offset-neutral-950":""}`,children:[jsxRuntimeExports.jsx("div",{className:`absolute inset-0 bg-linear-to-br ${a} opacity-90 group-hover:opacity-100 transition-all duration-200`}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-30 group-hover:opacity-50 transition-opacity duration-500",style:{backgroundImage:`radial-gradient(at 27% 37%, rgba(255, 255, 255, 0.1) 0px, transparent 50%),
                           radial-gradient(at 97% 21%, rgba(255, 255, 255, 0.1) 0px, transparent 50%),
                           radial-gradient(at 52% 99%, rgba(255, 255, 255, 0.1) 0px, transparent 50%),
                           radial-gradient(at 10% 29%, rgba(255, 255, 255, 0.1) 0px, transparent 50%)`}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 bg-linear-to-tr from-transparent via-white/30 to-transparent hidden md:block",initial:{x:"-100%",opacity:0},whileHover:{x:"100%",opacity:1},transition:{duration:.6,ease:"easeInOut"}}),jsxRuntimeExports.jsx("div",{className:`absolute -inset-1 bg-linear-to-br ${a} blur-2xl opacity-0 group-hover:opacity-70 transition-all duration-300 hidden md:block`}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/5 backdrop-blur-0 group-hover:backdrop-blur-sm transition-all duration-300 rounded-xl md:rounded-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-1.5 md:gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute -inset-1 md:-inset-2 rounded-xl md:rounded-2xl bg-white/20 blur-sm group-hover:bg-white/30 transition-all duration-300"}),jsxRuntimeExports.jsx("div",{className:"relative w-12 h-12 md:w-16 md:h-16 rounded-xl md:rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center border border-white/40 group-hover:scale-110 group-hover:rotate-3 transition-all duration-300 shadow-2xl",children:jsxRuntimeExports.jsx(s,{className:"w-7 h-7 md:w-8 md:h-8 text-white drop-shadow-2xl"})}),jsxRuntimeExports.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full bg-white/60 group-hover:scale-150 transition-transform duration-300 hidden md:block"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-white/40 group-hover:scale-150 transition-transform duration-300 hidden md:block"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-[11px] md:text-base text-white drop-shadow-lg md:mb-1.5 group-hover:scale-105 transition-transform duration-300 leading-tight",children:e}),jsxRuntimeExports.jsx("div",{className:"hidden md:block text-xs text-white/90 drop-shadow px-3 py-1 rounded-full bg-white/10 backdrop-blur-sm border border-white/20",children:r})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-10 h-10 md:w-24 md:h-24 bg-white/10 rounded-bl-full group-hover:w-12 group-hover:h-12 md:group-hover:w-28 md:group-hover:h-28 transition-all duration-300"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 md:w-20 md:h-20 bg-black/10 rounded-tr-full group-hover:w-10 group-hover:h-10 md:group-hover:w-24 md:group-hover:h-24 transition-all duration-300"}),o&&jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-2 right-2 md:top-4 md:right-4 w-2 h-2 md:w-3 md:h-3 rounded-full bg-white shadow-lg z-20",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-full bg-white animate-ping"})})]})})}const iconConfig={marketplace_post:{icon:ShoppingBag,bgColor:"from-purple-500 to-purple-600",iconColor:"text-white"},marketplace_offer:{icon:Tag,bgColor:"from-indigo-500 to-indigo-600",iconColor:"text-white"},token_transfer:{icon:ArrowRightLeft,bgColor:"from-blue-500 to-blue-600",iconColor:"text-white"},wallet_created:{icon:Wallet,bgColor:"from-emerald-500 to-emerald-600",iconColor:"text-white"},game_started:{icon:Gamepad2,bgColor:"from-red-500 to-orange-500",iconColor:"text-white"},bet_placed:{icon:TrendingUp,bgColor:"from-yellow-500 to-amber-500",iconColor:"text-white"},otc_purchase:{icon:Handshake,bgColor:"from-cyan-500 to-teal-500",iconColor:"text-white"},merch_order:{icon:ShoppingCart,bgColor:"from-pink-500 to-rose-500",iconColor:"text-white"},pokemon_purchase:{icon:Sparkles,bgColor:"from-yellow-400 to-orange-500",iconColor:"text-white"}};function ActivityIcon({kind:t,className:e="",size:s="md"}){const r=iconConfig[t]||iconConfig.wallet_created,a=r.icon,o=s==="sm"?"w-5 h-5 rounded-md":"w-8 h-8 rounded-lg",l=s==="sm"?"w-3 h-3":"w-4 h-4";return jsxRuntimeExports.jsx("div",{className:`${o} bg-linear-to-br ${r.bgColor} flex items-center justify-center shadow-lg ${e}`,children:jsxRuntimeExports.jsx(a,{className:`${l} ${r.iconColor}`})})}const ACTIVITY_API_URL="https://sphere.unicity.network/activities";async function recordActivity(t,e){try{await ActivityService.postActivity({kind:t,unicityId:e?.unicityId,data:e?.data,isPublic:e?.isPublic})}catch(s){console.warn("Failed to record activity:",s)}}class ActivityService{static async getActivities(e={}){const s=new URLSearchParams;e.limit&&s.set("limit",String(e.limit)),e.cursor&&s.set("cursor",e.cursor),e.kind&&s.set("kind",e.kind);const r=`${ACTIVITY_API_URL}${s.toString()?`?${s}`:""}`,a=await fetch(r);if(!a.ok)throw new Error(`Failed to fetch activities: ${a.statusText}`);return a.json()}static async postActivity(e){const s=await fetch(ACTIVITY_API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){const r=await s.json().catch(()=>({error:s.statusText}));throw new Error(`Failed to post activity: ${r.error||s.statusText}`)}return s.json()}static createEventSource(e){const s=e?`?lastId=${e}`:"";return new EventSource(`${ACTIVITY_API_URL}/stream${s}`)}}function useRecentActivity(t={}){const{kind:e,limit:s=50,enabled:r=!0}=t;return useInfiniteQuery({queryKey:["activity","recent",{kind:e,limit:s}],queryFn:async({pageParam:a})=>ActivityService.getActivities({kind:e,limit:s,cursor:a}),initialPageParam:void 0,getNextPageParam:a=>a.nextCursor??void 0,enabled:r,staleTime:3e4,refetchOnWindowFocus:!1})}const MAX_RECONNECT_ATTEMPTS=3,INITIAL_BACKOFF_MS=1e3;function useActivityStream(t){const{onActivity:e,enabled:s=!0,lastId:r}=t,a=reactExports.useRef(null),o=reactExports.useRef(e),l=reactExports.useRef(0),c=reactExports.useRef(null),[u,f]=reactExports.useState(!1);o.current=e;const d=reactExports.useCallback(()=>{c.current&&(clearTimeout(c.current),c.current=null)},[]),p=reactExports.useCallback(()=>{d(),a.current&&a.current.close();const m=ActivityService.createEventSource(r);m.onopen=()=>{l.current=0,f(!0)},m.onmessage=y=>{try{const b=JSON.parse(y.data);o.current(b)}catch(b){console.error("Failed to parse activity:",b)}},m.onerror=()=>{if(f(!1),m.close(),a.current=null,l.current===0&&console.warn("Activity SSE connection failed, will retry..."),l.current<MAX_RECONNECT_ATTEMPTS){l.current++;const y=INITIAL_BACKOFF_MS*Math.pow(2,l.current-1);c.current=setTimeout(()=>{p()},y)}else console.warn("Activity SSE: giving up after max attempts")},a.current=m},[r,d]);return reactExports.useEffect(()=>{if(s)return p(),()=>{d(),a.current&&(a.current.close(),a.current=null)}},[s,p,d]),{reconnect:p,isConnected:u}}function getActivityTitle(t){switch(t){case"marketplace_post":return"New Listing";case"marketplace_offer":return"New Offer";case"wallet_created":return"New Wallet";case"game_started":return"Game Started";case"bet_placed":return"Bet Placed";case"otc_purchase":return"OTC Trade";case"merch_order":return"Merch Order";case"pokemon_purchase":return"Card Purchase";default:return"Activity"}}function getActivityDescription(t){const e=t.data||{};switch(t.kind){case"marketplace_post":return e.title?`"${e.title}" posted for ${e.price} ${e.currency||"ALPHA"}`:"A new item was listed";case"marketplace_offer":return e.title&&e.price?`Offer: ${e.price} ${e.currency||"ALPHA"}`:"New offer received";case"wallet_created":return"A new wallet joined the network";case"game_started":return e.gameName?`Someone started playing ${e.gameName}`:"A game session started";case"bet_placed":return e.teams&&e.betChoice?`Bet on ${e.betChoice} (${e.teams})`:"A prediction was made";case"otc_purchase":return e.productName?`"${e.productName}" purchased for ${e.price} ALPHA`:"An OTC trade completed";case"merch_order":return e.itemName?`"${e.itemName}" ordered for ${e.price} ALPHA`:"Merch was ordered";case"pokemon_purchase":return e.card?`"${e.card}" (${e.rarity}) from ${e.merchant}`:"A card was purchased";default:return"Network activity"}}function formatTimeAgo(t){const e=new Date(t),r=new Date().getTime()-e.getTime(),a=Math.floor(r/1e3),o=Math.floor(a/60),l=Math.floor(o/60),c=Math.floor(l/24);return a<60?"just now":o<60?`${o}m ago`:l<24?`${l}h ago`:c<7?`${c}d ago`:e.toLocaleDateString()}const ACTIVITY_GLOW_COLORS={marketplace_post:{bg:"bg-purple-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(168,85,247,0.35)]",border:"border-purple-500/30"},marketplace_offer:{bg:"bg-indigo-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(99,102,241,0.35)]",border:"border-indigo-500/30"},token_transfer:{bg:"bg-blue-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(59,130,246,0.35)]",border:"border-blue-500/30"},wallet_created:{bg:"bg-emerald-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(16,185,129,0.35)]",border:"border-emerald-500/30"},game_started:{bg:"bg-orange-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(249,115,22,0.35)]",border:"border-orange-500/30"},bet_placed:{bg:"bg-amber-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(245,158,11,0.35)]",border:"border-amber-500/30"},otc_purchase:{bg:"bg-cyan-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(6,182,212,0.35)]",border:"border-cyan-500/30"},merch_order:{bg:"bg-pink-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(236,72,153,0.35)]",border:"border-pink-500/30"},pokemon_purchase:{bg:"bg-yellow-500/10",glow:"shadow-[0_4px_12px_-2px_rgba(234,179,8,0.35)]",border:"border-yellow-500/30"}},AGENT_ACTIVITY_MAP={sport:["bet_placed"],p2p:["otc_purchase"],merch:["merch_order"],games:["game_started"],trivia:["game_started"],"sell-anything":["marketplace_post","marketplace_offer"],pokemon:["pokemon_purchase"]},SHOW_ALL_AGENTS=["chat","ai"];function ActivityTicker({agentId:t}){const[e,s]=reactExports.useState([]),[r,a]=reactExports.useState(new Set),o=reactExports.useRef(null),{data:l}=useRecentActivity({enabled:!0}),c=reactExports.useCallback(p=>{s(m=>m.some(y=>y.id===p.id)?m:[p,...m].slice(0,20)),a(m=>new Set(m).add(p.id)),o.current&&o.current.scrollTo({left:0,behavior:"smooth"}),setTimeout(()=>{a(m=>{const y=new Set(m);return y.delete(p.id),y})},5e3)},[]);useActivityStream({onActivity:c,enabled:!0});const u=l?.pages.flatMap(p=>p.activities)||[],f=[...e,...u.filter(p=>!e.some(m=>m.id===p.id))],d=(t&&!SHOW_ALL_AGENTS.includes(t)?f.filter(p=>{const m=AGENT_ACTIVITY_MAP[t];return m?m.includes(p.kind):!0}):f).filter(p=>p.kind!=="token_transfer").slice(0,20);return d.length===0?null:jsxRuntimeExports.jsxs("div",{className:"hidden lg:block",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-orange-500/10 dark:bg-orange-500/10 border border-orange-500/30",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),jsxRuntimeExports.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-orange-400 animate-ping opacity-75"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold text-orange-600 dark:text-orange-400 uppercase tracking-wide",children:"Live"})]}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-neutral-600 dark:text-neutral-400",children:"Activity Feed"})]}),jsxRuntimeExports.jsx("div",{ref:o,className:"flex items-center gap-2.5 overflow-x-auto pt-2 pb-4 px-2 -mx-2 [&::-webkit-scrollbar]:h-1.5 [&::-webkit-scrollbar]:mt-2 [&::-webkit-scrollbar-track]:bg-transparent [&::-webkit-scrollbar-thumb]:bg-neutral-300 dark:[&::-webkit-scrollbar-thumb]:bg-neutral-700 [&::-webkit-scrollbar-thumb]:rounded-full hover:[&::-webkit-scrollbar-thumb]:bg-neutral-400 dark:hover:[&::-webkit-scrollbar-thumb]:bg-neutral-600",children:jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"popLayout",children:d.map(p=>{const m=ACTIVITY_GLOW_COLORS[p.kind]||ACTIVITY_GLOW_COLORS.wallet_created,y=r.has(p.id);return jsxRuntimeExports.jsxs(motion.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.25,.46,.45,.94]}},exit:{opacity:0,scale:.95,transition:{duration:.2,ease:"easeOut"}},className:`
                  relative flex items-center gap-3 px-4 py-2.5 rounded-xl cursor-default shrink-0
                  ${m.bg} ${m.border} border backdrop-blur-sm
                  ${m.glow}
                  hover:scale-[1.02] transition-all duration-200
                `,children:[y&&jsxRuntimeExports.jsx(motion.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute -top-2 -right-2 px-1.5 py-0.5 text-[9px] font-bold uppercase tracking-wider bg-orange-500 text-white rounded-md shadow-lg shadow-orange-500/30",children:"New"}),jsxRuntimeExports.jsx(ActivityIcon,{kind:p.kind,size:"md"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-w-0",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-neutral-900 dark:text-white whitespace-nowrap",children:getActivityTitle(p.kind)}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-600 dark:text-neutral-300 max-w-30 truncate",children:getActivityDescription(p)})]}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-medium text-neutral-500 dark:text-neutral-400 ml-1 whitespace-nowrap",children:formatTimeAgo(p.createdAt)})]},p.id)})})})]})}function buildAddressId(t){let e=t;e.startsWith("DIRECT://")?e=e.slice(9):e.startsWith("DIRECT:")&&(e=e.slice(7));const s=e.slice(0,6).toLowerCase(),r=e.slice(-6).toLowerCase();return`DIRECT_${s}_${r}`}const useChat=()=>{const t=useQueryClient(),{sphere:e}=useSphereContext(),{directAddress:s}=useIdentity(),r=s?buildAddressId(s):"default",[a,o]=reactExports.useState(null),[l,c]=reactExports.useState(""),[u,f]=reactExports.useState(""),[d,p]=reactExports.useState(!1),[m,y]=reactExports.useState(20),b=reactExports.useRef(void 0),E=`${STORAGE_KEYS.CHAT_SELECTED_DM}_${r}`;reactExports.useEffect(()=>{o(null),c(""),f(""),p(!1),y(20)},[r]),reactExports.useEffect(()=>{const z=k=>{const{peerPubkey:v,messageId:S,isFromMe:N}=k.detail;a&&v===a.peerPubkey&&(e&&!N&&e.communications.markAsRead([S]),N||(p(!1),clearTimeout(b.current))),t.invalidateQueries({queryKey:CHAT_KEYS.all})},O=k=>{a&&k.detail.senderPubkey===a.peerPubkey&&(p(!0),clearTimeout(b.current),b.current=setTimeout(()=>p(!1),1500))};return window.addEventListener("dm-received",z),window.addEventListener("dm-typing",O),()=>{window.removeEventListener("dm-received",z),window.removeEventListener("dm-typing",O),clearTimeout(b.current)}},[t,a,e]);const C=useQuery({queryKey:CHAT_KEYS.conversations(r),queryFn:()=>{if(!e)return[];const z=e.communications.getConversations();return buildConversations(z,e.identity.chainPubkey)},enabled:!!e,staleTime:3e4});reactExports.useEffect(()=>{if(C.data&&C.data.length>0&&!a){const z=localStorage.getItem(E);if(z){const O=C.data.find(k=>k.peerPubkey===z);O&&o(O)}}},[C.data,a,E]);const j=a?.peerPubkey,B=useQuery({queryKey:[...CHAT_KEYS.messages(r,j||""),m],queryFn:()=>{if(!j||!e)return{messages:[],hasMore:!1};const z=e.communications.getConversationPage(j,{limit:m}),O=e.identity.chainPubkey;return{messages:z.messages.map(k=>toDisplayMessage(k,O)),hasMore:z.hasMore}},enabled:!!j&&!!e,staleTime:1e4,placeholderData:keepPreviousData});reactExports.useEffect(()=>{y(20)},[j]);const D=reactExports.useCallback(()=>{y(z=>z+20)},[]),F=useQuery({queryKey:CHAT_KEYS.unreadCount(r),queryFn:()=>e?.communications.getUnreadCount()??0,enabled:!!e,staleTime:3e4}),q=useMutation({mutationFn:async z=>{if(!j||!e)throw new Error("No conversation selected");return await e.communications.sendDM(j,z),!0},onSuccess:()=>{c(""),t.invalidateQueries({queryKey:CHAT_KEYS.all})}}),V=reactExports.useCallback(async z=>{try{if(!e)return null;const O=z.startsWith("@")||z.startsWith("DIRECT:")||z.startsWith("PROXY:")||z.startsWith("alpha")||/^[0-9a-fA-F]{64,66}$/.test(z)?z:`@${z}`,k=await e.resolve(O);if(!k?.transportPubkey)return console.error(`Could not resolve: ${z}`),null;const v={peerPubkey:k.transportPubkey,peerNametag:k.nametag,lastMessageText:"",lastMessageTime:Date.now(),unreadCount:0};return o(v),localStorage.setItem(E,v.peerPubkey),t.invalidateQueries({queryKey:CHAT_KEYS.conversations(r)}),v}catch(O){return console.error("Failed to start conversation",O),null}},[e,t,r,E]),ee=reactExports.useCallback(z=>{if(o(z),p(!1),z){if(localStorage.setItem(E,z.peerPubkey),e){const k=e.communications.getConversation(z.peerPubkey).filter(v=>!v.isRead&&v.senderPubkey===z.peerPubkey).map(v=>v.id);k.length>0&&(e.communications.markAsRead(k),t.invalidateQueries({queryKey:CHAT_KEYS.all}))}}else localStorage.removeItem(E)},[t,e,E,r]),Q=reactExports.useCallback(z=>{if(e){const k=e.communications.getConversation(z).filter(v=>!v.isRead&&v.senderPubkey===z).map(v=>v.id);k.length>0&&(e.communications.markAsRead(k),t.invalidateQueries({queryKey:CHAT_KEYS.all}))}},[t,e,r]),W=reactExports.useCallback(async z=>z.trim()?q.mutateAsync(z):!1,[q]),Z=reactExports.useMemo(()=>{const z=C.data||[];if(!u.trim())return z;const O=u.toLowerCase();return z.filter(k=>getDisplayName(k.peerPubkey,k.peerNametag).toLowerCase().includes(O)||k.lastMessageText.toLowerCase().includes(O))},[C.data,u]);return{conversations:C.data||[],isLoadingConversations:C.isLoading,selectedConversation:a,selectConversation:ee,startNewConversation:V,messages:B.data?.messages||[],isLoadingMessages:B.isLoading,sendMessage:W,isSending:q.isPending,hasMore:B.data?.hasMore??!1,loadMore:D,messageInput:l,setMessageInput:c,totalUnreadCount:F.data||0,markAsRead:Q,isRecipientTyping:d,searchQuery:u,setSearchQuery:f,filteredConversations:Z}};function DMConversationItem({conversation:t,isSelected:e,onClick:s}){const r=getColorFromPubkey(t.peerPubkey);return jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:`p-3 rounded-xl cursor-pointer transition-all relative overflow-hidden ${e?"bg-linear-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/30":"bg-neutral-100 dark:bg-neutral-800/50 hover:bg-neutral-200 dark:hover:bg-neutral-700/50 border border-neutral-200 dark:border-neutral-700/50"}`,children:[e&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-tr from-white/0 via-white/10 to-white/0"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"relative shrink-0",children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-medium bg-linear-to-br ${r.gradient} text-white shadow-md`,children:getAvatar(t.peerPubkey,t.peerNametag)}),t.unreadCount>0&&!e&&jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full border-2 border-white dark:border-neutral-800"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsx("span",{className:`font-medium truncate ${e?"text-white":"text-neutral-900 dark:text-white"}`,children:getDisplayName(t.peerPubkey,t.peerNametag)}),jsxRuntimeExports.jsx("span",{className:`text-xs shrink-0 ${e?"text-white/70":"text-neutral-500 dark:text-neutral-400"}`,children:formatRelativeTime(t.lastMessageTime)})]}),jsxRuntimeExports.jsx("p",{className:`text-sm truncate mt-0.5 ${e?"text-white/80":"text-neutral-500 dark:text-neutral-400"}`,children:t.lastMessageText||"No messages yet"})]})]})]})}function DMConversationList({conversations:t,selectedConversation:e,onSelect:s,onNewConversation:r,searchQuery:a,onSearchChange:o,isOpen:l,onClose:c,isCollapsed:u,onCollapse:f,hasUnread:d,onModeChange:p}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AnimatePresence,{children:l&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:hidden absolute inset-0 bg-black/50 z-40 rounded-3xl",onClick:c})}),jsxRuntimeExports.jsxs("div",{className:`
        w-72 border-r border-neutral-200 dark:border-neutral-800/50 flex flex-col z-50 overflow-hidden
        absolute lg:relative inset-y-0 left-0 min-h-0
        transform transition-all duration-300 ease-in-out
        ${l?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        ${u?"lg:w-0 lg:border-0 lg:min-w-0":"lg:w-72"}
        bg-white/95 dark:bg-neutral-900/95 lg:bg-transparent backdrop-blur-xl lg:backdrop-blur-none rounded-l-3xl lg:rounded-none
      `,children:[jsxRuntimeExports.jsxs("div",{className:"shrink-0 p-4 border-b border-neutral-200 dark:border-neutral-800/50 bg-linear-to-br from-white/80 dark:from-neutral-900/80 to-neutral-50/40 dark:to-neutral-800/40 backdrop-blur-sm relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-orange-500/5 rounded-bl-full"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium",children:"Messages"}),jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 text-orange-500 animate-pulse"}),d&&jsxRuntimeExports.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(motion.button,{onClick:r,className:"p-2 rounded-lg bg-linear-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/30",title:"New conversation",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(MessageSquarePlus,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:f,className:"hidden lg:flex p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",title:"Collapse sidebar",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(PanelLeftClose,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:c,className:"lg:hidden p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 relative z-10 mb-3",children:[jsxRuntimeExports.jsxs(motion.button,{onClick:()=>p("global"),className:"px-4 py-3 rounded-xl text-sm transition-all relative overflow-hidden bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx(Hash$1,{className:"w-4 h-4 inline mr-2"}),jsxRuntimeExports.jsx("span",{children:"Global"})]}),jsxRuntimeExports.jsxs(motion.button,{className:"px-4 py-3 rounded-xl text-sm transition-all relative overflow-hidden bg-linear-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/30",whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-tr from-white/0 via-white/20 to-white/0"}),jsxRuntimeExports.jsx(User,{className:"w-4 h-4 inline mr-2"}),jsxRuntimeExports.jsx("span",{className:"relative z-10",children:"DM"})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:a,onChange:m=>o(m.target.value),placeholder:"Search conversations...",className:"w-full pl-9 pr-3 py-2 bg-neutral-100 dark:bg-neutral-800/50 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl text-sm border border-neutral-200 dark:border-neutral-700/50 focus:outline-none focus:border-orange-500 transition-colors"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:t.length===0?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-2xl bg-neutral-100 dark:bg-neutral-800/50 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(MessageSquarePlus,{className:"w-8 h-8 text-neutral-400"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"No conversations yet"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-400 dark:text-neutral-500 text-xs mt-1",children:"Start a new conversation to begin"})]}):jsxRuntimeExports.jsx(AnimatePresence,{mode:"popLayout",children:t.map(m=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},layout:!0,children:jsxRuntimeExports.jsx(DMConversationItem,{conversation:m,isSelected:e?.peerPubkey===m.peerPubkey,onClick:()=>s(m)})},m.peerPubkey))})})]})]})}function DMMessageBubble({message:t,delay:e=0}){const s=t.isFromMe,r=()=>{switch(t.status){case"SENT":return jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-white/60"});case"DELIVERED":return jsxRuntimeExports.jsx(CheckCheck,{className:"w-3 h-3 text-white/60"});case"READ":return jsxRuntimeExports.jsx(CheckCheck,{className:"w-3 h-3 text-blue-300"});default:return jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-white/60"})}},a=()=>t.senderNametag?t.senderNametag.replace("@","").slice(0,2).toUpperCase():t.senderPubkey?.slice(0,2).toUpperCase()||"??",o=()=>t.senderNametag?`@${t.senderNametag.replace("@","")}`:t.senderPubkey?.slice(0,8)||"Unknown";return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e},className:`flex flex-col ${s?"items-end":"items-start"}`,children:[jsxRuntimeExports.jsxs("div",{className:`max-w-[85%] rounded-2xl p-4 ${s?"bg-linear-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/20":"bg-neutral-100 dark:bg-neutral-800/80 backdrop-blur-xl border border-neutral-200 dark:border-neutral-700/50 text-neutral-800 dark:text-neutral-200"}`,children:[!s&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 rounded-full bg-linear-to-br from-orange-500 to-orange-600 flex items-center justify-center text-white text-[10px] font-medium",children:a()}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:o()})]}),jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed wrap-break-word whitespace-pre-wrap",children:jsxRuntimeExports.jsx(MarkdownContent,{text:t.content,mentionClassName:s?"text-white":"text-orange-500"})})]}),jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1.5 mt-1 px-1 ${s?"flex-row-reverse":""}`,children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:formatMessageTime(t.timestamp)}),s&&jsxRuntimeExports.jsx(r,{})]})]})}function DMMessageList({messages:t,isLoading:e,isRecipientTyping:s,hasMore:r,loadMore:a}){const o=reactExports.useRef(null),l=reactExports.useRef(null),c=reactExports.useRef(0),u=reactExports.useRef(!1),f=reactExports.useRef({scrollHeight:0,scrollTop:0});reactExports.useEffect(()=>{if(o.current){if(u.current){const m=o.current,{scrollHeight:y,scrollTop:b}=f.current;m.scrollTop=b+(m.scrollHeight-y),u.current=!1,c.current=t.length;return}if(t.length>c.current){const m=o.current;(m.scrollHeight-m.scrollTop-m.clientHeight<100||c.current===0)&&(m.scrollTop=m.scrollHeight)}c.current=t.length}},[t]),reactExports.useEffect(()=>{s&&o.current&&(o.current.scrollTop=o.current.scrollHeight)},[s]);const d=reactExports.useCallback(()=>{!a||!o.current||(u.current=!0,f.current={scrollHeight:o.current.scrollHeight,scrollTop:o.current.scrollTop},a())},[a]),p=t.reduce((m,y)=>{const b=formatMessageDate(y.timestamp);return m[b]||(m[b]=[]),m[b].push(y),m},{});return e?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-0",children:jsxRuntimeExports.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full"})}):t.length===0?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 min-h-0",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-20 h-20 rounded-2xl bg-neutral-100 dark:bg-neutral-800/50 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(MessageCircle,{className:"w-10 h-10 text-neutral-400"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"No messages yet"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-400 dark:text-neutral-500 text-sm mt-1",children:"Start the conversation by sending a message"})]}):jsxRuntimeExports.jsxs("div",{ref:o,className:"overflow-y-auto px-4 py-4 space-y-4 min-h-0",children:[r&&jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-2",children:jsxRuntimeExports.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 px-4 py-1.5 rounded-full text-xs font-medium text-neutral-500 dark:text-neutral-400 bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50 hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsx(ChevronUp,{className:"w-3.5 h-3.5"}),"Load earlier messages"]})}),jsxRuntimeExports.jsx(AnimatePresence,{mode:"popLayout",children:Object.entries(p).map(([m,y])=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center my-4",children:jsxRuntimeExports.jsx("div",{className:"px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-800/50 text-xs text-neutral-500 dark:text-neutral-400 border border-neutral-200 dark:border-neutral-700/50",children:m})}),y.map((b,E)=>jsxRuntimeExports.jsx(DMMessageBubble,{message:b,delay:E*.05},b.id))]},m))}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex items-center gap-2 px-4 py-2",children:jsxRuntimeExports.jsx("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-2xl rounded-bl-sm px-3 py-2 border border-neutral-200 dark:border-neutral-700/50",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-0.75",children:[jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 bg-neutral-400 dark:bg-neutral-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 bg-neutral-400 dark:bg-neutral-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),jsxRuntimeExports.jsx("span",{className:"w-1.5 h-1.5 bg-neutral-400 dark:bg-neutral-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})})}),jsxRuntimeExports.jsx("div",{ref:l})]})}const TYPING_THROTTLE_MS=3e3,DMChatInput=reactExports.forwardRef(function t({value:e,onChange:s,onSend:r,isSending:a=!1,placeholder:o="Type a message...",disabled:l=!1,participantPubkey:c},u){const f=reactExports.useRef(null),d=reactExports.useRef(0),{sphere:p}=useSphereContext();reactExports.useImperativeHandle(u,()=>f.current,[]);const m=reactExports.useCallback(()=>{if(!p||!c)return;const E=Date.now();E-d.current<TYPING_THROTTLE_MS||(d.current=E,p.communications.sendComposingIndicator(c).catch(()=>{}))},[p,c]),y=reactExports.useCallback(E=>{s(E.target.value),E.target.value.trim()&&m()},[s,m]),b=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),e.trim()&&!a&&!l&&r())};return jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-800/50 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-sm theme-transition",style:{paddingBottom:"calc(1rem + var(--safe-area-bottom, 0px))"},children:jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("textarea",{ref:f,value:e,onChange:y,onKeyDown:b,placeholder:o,disabled:l||a,className:"flex-1 bg-neutral-100 dark:bg-neutral-800/50 text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500 outline-none resize-none rounded-xl p-3 min-h-11 max-h-[120px] border border-neutral-200 dark:border-neutral-700/50 text-base theme-transition disabled:opacity-50",rows:1,enterKeyHint:"send"}),jsxRuntimeExports.jsx(motion.button,{onClick:r,disabled:!e.trim()||a||l,className:"px-5 py-2 rounded-xl bg-linear-to-r from-orange-500 to-orange-600 text-white disabled:opacity-50 flex items-center justify-center min-w-[60px]",whileHover:{scale:1.05},whileTap:{scale:.95},children:a?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}):jsxRuntimeExports.jsx(Send,{className:"w-4 h-4"})})]})})});function NewConversationModal({isOpen:t,onClose:e,onStart:s,initialValue:r,autoSubmit:a}){const[o,l]=reactExports.useState(""),[c,u]=reactExports.useState(!1),[f,d]=reactExports.useState(null),p=reactExports.useRef(!1),m=reactExports.useCallback(async E=>{if(E.trim()){u(!0),d(null);try{await s(E.trim())?(l(""),e()):d(`Could not start conversation with "${E}". User not found.`)}catch{d("Failed to start conversation. Please try again.")}finally{u(!1)}}},[s,e]);reactExports.useEffect(()=>{t&&r&&(l(r),d(null),a&&!p.current&&(p.current=!0,setTimeout(()=>{m(r)},100))),t||(p.current=!1)},[t,r,a,m]);const y=async()=>{if(o.trim()){u(!0),d(null);try{await s(o.trim())?(l(""),e()):d(`Could not start conversation with "${o.trim()}". User not found.`)}catch{d("Failed to start conversation. Please try again.")}finally{u(!1)}}},b=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),y()),E.key==="Escape"&&e()};return jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-100001",onClick:e}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md z-100001",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl border border-neutral-200 dark:border-neutral-700/50 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800/50 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-linear-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-lg",children:jsxRuntimeExports.jsx(User,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium",children:"New Conversation"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Start a private chat"})]})]}),jsxRuntimeExports.jsx(motion.button,{onClick:e,className:"p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm text-neutral-600 dark:text-neutral-400 mb-2",children:"Enter nametag or direct address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(AtSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value),onKeyDown:b,placeholder:"e.g., alice or DIRECT://...",className:"w-full pl-10 pr-4 py-3 bg-neutral-100 dark:bg-neutral-800/50 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl border border-neutral-200 dark:border-neutral-700/50 focus:outline-none focus:border-orange-500 transition-colors",autoFocus:!0})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-2",children:"You can enter a nametag (without @) or a direct address"})]}),f&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-xl bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm",children:f})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-800/50 flex gap-3",children:[jsxRuntimeExports.jsx(motion.button,{onClick:e,className:"flex-1 py-3 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-700 dark:text-neutral-300 font-medium border border-neutral-200 dark:border-neutral-700/50 hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Cancel"}),jsxRuntimeExports.jsx(motion.button,{onClick:y,disabled:!o.trim()||c,className:"flex-1 py-3 rounded-xl bg-linear-to-r from-orange-500 to-orange-600 text-white font-medium disabled:opacity-50 flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:c?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Starting..."})]}):jsxRuntimeExports.jsx("span",{children:"Start Chat"})})]})]})})]})})}const agents=[{id:"chat",name:"Chat",description:"DM and group messaging",Icon:MessageSquare,category:"Social",color:"from-blue-500 to-cyan-500",type:"chat",requiresWallet:!0},{id:"ai",name:"Uncensored AI",description:"Viktor can assist with anything",Icon:Sparkles,category:"Assistant",color:"from-orange-500 to-amber-500",type:"simple-ai",greetingMessage:`Hi! I'm Viktor, your personal assistant.
I care a great deal about privacy. I don't know you, I don't log you, I don't even know your IP address. You are invisible here and nothing will be recorded about our conversation.
How can I help?`,backendActivityId:"ama",quickActions:[{label:"Research",message:"Research the latest news"},{label:"Explain",message:"Explain how something works"},{label:"Help",message:"Help me with a task"}]},{id:"sport",name:"P2P Predict",description:"Sports prediction markets",Icon:Trophy,category:"Prediction",color:"from-emerald-500 to-teal-500",type:"ai-with-sidebar",requiresWallet:!0,greetingMessage:"Welcome to the P2P Prediction Marketplace!  Right now I'm only able to help you make predictions on sports games. I can help you check odds, make a prediction and show you what your active predictions are. What are we looking at ? English Premier League ? IPL ? Let me know and we can have some fun.",backendActivityId:"sports",quickActions:[{label:"Basketball",message:"Show me basketball"},{label:"Soccer",message:"Show me soccer"},{label:"Tennis",message:"Show me tennis"},{label:"Cricket",message:"Show me cricket"},{label:"My bets",message:"Show my bets"}],contentType:"match",hasSidebar:!0},{id:"p2p",name:"OTC Crypto",description:"Peer-to-peer trading",Icon:ShoppingBag,category:"Trading",color:"from-orange-500 to-red-500",type:"ai-with-sidebar",requiresWallet:!0,greetingMessage:"Welcome to OTC Madness! I'll help you navigate the world of over-the-counter crypto trading. Ready to post an offer or browse available deals?",backendActivityId:"p2p",quickActions:[{label:"Buy 20 ALPHA",message:"Buy 20 ALPHA"},{label:"Buy 100 ALPHA",message:"Buy 100 ALPHA"}],contentType:"product",hasSidebar:!0},{id:"sell-anything",name:"Buy / Sell Anything",description:"Get a quote",Icon:Tag,category:"Trading",color:"from-teal-500 to-cyan-500",type:"simple-ai",requiresWallet:!0,greetingMessage:"Welcome to the P2P Marketplace! Tell me what you want to buy or sell and I'll help you find the best deals.",quickActions:[{label:"Gold",message:"Show me gold listings"},{label:"Tickets",message:"Show me event tickets"},{label:"ASICs",message:"Show me mining hardware"},{label:"Browse all",message:"Show me what's available"}]},{id:"pokemon",name:"Pokmon Cards",description:"Catch em all",Icon:Zap,category:"Entertainment",color:"from-yellow-500 to-red-500",type:"ai-with-sidebar",requiresWallet:!0,backendActivityId:"pokemon",greetingMessage:"Welcome to the Pokmon Card marketplace! I can help you browse Pokmon cards, manage your cart, and complete purchases using Unicity tokens. You can also sell cards! Tell me your Unicity ID to get started, or ask me what cards are available.",placeholder:"Search for cards, check cart, or ask about selling...",quickActions:[{label:"Browse cards",message:"Show me available Pokmon cards"},{label:"My cart",message:"Show my cart"},{label:"Sell cards",message:"I want to sell some cards"},{label:"Check order",message:"Check my order status"}],contentType:"product",hasSidebar:!0},{id:"marketplace",name:"Marketplace",description:"Unicity Marketplace",Icon:Store,category:"Trading",color:"from-violet-500 to-purple-500",type:"iframe",iframeUrl:"https://market.unicity.network/"},{id:"example",name:"Example",description:"Test iframe dApp",Icon:Plug,category:"Developer",color:"from-blue-500 to-indigo-500",type:"iframe",iframeUrl:"https://unicitynetwork.github.io/sphere-sdk-connect-example/",iframeUrls:[{label:"GitHub Pages",url:"https://unicitynetwork.github.io/sphere-sdk-connect-example/"},{label:"Localhost",url:"http://localhost:5174"}],requiresWallet:!0}];function getAgentConfig(t){return agents.find(e=>e.id===t)}function agentRequiresWallet(t){return getAgentConfig(t)?.requiresWallet??!1}function DMChatSection({onModeChange:t,pendingRecipient:e,onPendingRecipientHandled:s}){const r=useNavigate(),{selectedConversation:a,selectConversation:o,startNewConversation:l,messages:c,isLoadingMessages:u,sendMessage:f,isSending:d,messageInput:p,setMessageInput:m,searchQuery:y,setSearchQuery:b,filteredConversations:E,totalUnreadCount:C,isRecipientTyping:j,hasMore:B,loadMore:D}=useChat(),[F,q]=reactExports.useState(!1),[V,ee]=reactExports.useState(!1),[Q,W]=reactExports.useState(!1),[Z,z]=reactExports.useState(!1),[O,k]=reactExports.useState(),v=reactExports.useRef(null),S=reactExports.useRef(null),{isFullscreen:N,setFullscreen:R}=useUIState();reactExports.useEffect(()=>{const J=U=>{U.key==="Escape"&&N&&R(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[N,R]),reactExports.useEffect(()=>{function J(U){v.current&&!v.current.contains(U.target)&&z(!1)}return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[]),reactExports.useEffect(()=>{!d&&a&&window.innerWidth>=1024&&S.current?.focus({preventScroll:!0})},[d,a]),reactExports.useEffect(()=>{a&&window.innerWidth>=1024&&setTimeout(()=>{S.current?.focus({preventScroll:!0})},100)},[a]),reactExports.useEffect(()=>{if(e){const J=e.startsWith("@")?e.slice(1):e,U=E.find(G=>G.peerNametag?.toLowerCase()===J.toLowerCase());U?o(U):(k(J),W(!0)),s?.()}},[e,s,E,o]),reactExports.useEffect(()=>(setMentionClickHandler(J=>{const U=J.startsWith("@")?J.slice(1):J,G=E.find(ae=>ae.peerNametag?.toLowerCase()===U.toLowerCase());G?o(G):(k(U),W(!0))}),()=>setMentionClickHandler(null)),[E,o]);const T=J=>{r(`/agents/${J}`),z(!1)},M=agents.find(J=>J.id==="chat"),I=()=>{p.trim()&&f(p)},$=async J=>!!await l(J),A=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-20 -right-20 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-20 -left-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl pointer-events-none"}),jsxRuntimeExports.jsx(DMConversationList,{conversations:E,selectedConversation:a,onSelect:J=>{o(J),q(!1)},onNewConversation:()=>W(!0),searchQuery:y,onSearchChange:b,isOpen:F,onClose:()=>q(!1),isCollapsed:V,onCollapse:()=>ee(!0),hasUnread:C>0,onModeChange:t}),jsxRuntimeExports.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] z-10 min-w-0 h-full min-h-0",children:[jsxRuntimeExports.jsxs("div",{className:"shrink-0 p-4 border-b border-neutral-200 dark:border-neutral-800/50 flex items-center justify-between bg-linear-to-br from-white/80 dark:from-neutral-900/80 to-neutral-50/40 dark:to-neutral-800/40 backdrop-blur-sm relative z-20 theme-transition",children:[jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-orange-500/5 rounded-tr-full"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[V&&jsxRuntimeExports.jsx(motion.button,{onClick:()=>ee(!1),className:"hidden lg:flex p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Expand sidebar",children:jsxRuntimeExports.jsx(PanelLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>q(!0),className:"lg:hidden p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{ref:v,className:`relative ${N?"":"lg:hidden"}`,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>z(!Z),className:"flex items-center gap-2 active:scale-95 transition-transform",children:[jsxRuntimeExports.jsx("div",{className:`p-2.5 rounded-xl bg-linear-to-br ${M.color}`,children:jsxRuntimeExports.jsx(M.Icon,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-lg text-neutral-900 dark:text-white font-medium",children:M.name}),jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:M.description})]}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 text-neutral-500 dark:text-neutral-400 transition-transform ${Z?"rotate-180":""}`})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:Z&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 mt-2 w-56 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700/50 rounded-xl shadow-xl overflow-hidden z-50",children:agents.map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>T(J.id),className:`w-full flex items-center gap-3 p-3 hover:bg-neutral-100 dark:hover:bg-neutral-800/50 transition-colors ${J.id==="chat"?"bg-neutral-100 dark:bg-neutral-800/80":""}`,children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg bg-linear-to-br ${J.color} shrink-0`,children:jsxRuntimeExports.jsx(J.Icon,{className:"w-4 h-4 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white text-sm font-medium",children:J.name}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs truncate",children:J.description})]})]},J.id))})})]}),jsxRuntimeExports.jsx("div",{className:`${N?"hidden":"hidden lg:flex"} items-center gap-3`,children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.05},className:"relative",children:jsxRuntimeExports.jsx("div",{className:`relative w-12 h-12 rounded-xl bg-linear-to-br ${getColorFromPubkey(a.peerPubkey).gradient} flex items-center justify-center shadow-xl text-white font-medium`,children:getAvatar(a.peerPubkey,a.peerNametag)})}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium",children:getDisplayName(a.peerPubkey,a.peerNametag)})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 flex items-center justify-center border border-neutral-200 dark:border-neutral-700/50",children:jsxRuntimeExports.jsx(MessageCircle,{className:"w-6 h-6 text-neutral-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium",children:"Direct Messages"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Select a conversation to start"})]})]})})]}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>R(!N),className:"p-2 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.05},whileTap:{scale:.95},title:N?"Exit fullscreen":"Fullscreen",children:N?jsxRuntimeExports.jsx(Minimize2,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Maximize2,{className:"w-5 h-5"})})]}),a?jsxRuntimeExports.jsx(DMMessageList,{messages:c,isLoading:u,isRecipientTyping:j,hasMore:B,loadMore:D},a.peerPubkey):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 min-h-0",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-24 h-24 rounded-2xl bg-neutral-100 dark:bg-neutral-800/50 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(MessageCircle,{className:"w-12 h-12 text-neutral-400"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Welcome to Direct Messages"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-400 dark:text-neutral-500 text-sm mt-1",children:"Select a conversation or start a new one"}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>W(!0),className:"mt-4 px-6 py-3 rounded-xl bg-linear-to-r from-orange-500 to-orange-600 text-white font-medium shadow-lg shadow-orange-500/30",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Start New Conversation"})]}),a&&jsxRuntimeExports.jsx("div",{className:"shrink-0 bg-white/95 dark:bg-neutral-900/95 backdrop-blur-sm theme-transition",children:jsxRuntimeExports.jsx(DMChatInput,{ref:S,value:p,onChange:m,onSend:I,isSending:d,placeholder:`Message ${getDisplayName(a.peerPubkey,a.peerNametag)}...`,participantPubkey:a.peerPubkey})})]})]}),L=jsxRuntimeExports.jsx(NewConversationModal,{isOpen:Q,onClose:()=>{W(!1),k(void 0)},onStart:$,initialValue:O}),Y=jsxRuntimeExports.jsx("div",{className:"bg-white/60 dark:bg-neutral-900/70 backdrop-blur-xl rounded-3xl border border-neutral-200 dark:border-neutral-800/50 overflow-hidden grid grid-cols-1 lg:grid-cols-[auto_1fr] relative lg:shadow-xl dark:lg:shadow-2xl h-full min-h-0 theme-transition",children:A}),oe=reactDomExports.createPortal(jsxRuntimeExports.jsx(AnimatePresence,{children:N&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},transition:{duration:.5,ease:[.32,.72,0,1]},className:"fixed top-14 left-0 right-0 bottom-0 z-99999 bg-white dark:bg-neutral-900",children:jsxRuntimeExports.jsx("div",{className:"h-full w-full grid grid-cols-1 lg:grid-cols-[auto_1fr] overflow-hidden relative",children:A})})}),document.body);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!N&&Y,oe,L]})}const ServicesContext=reactExports.createContext(void 0),useServices=()=>{const t=reactExports.useContext(ServicesContext);if(!t)throw new Error("useServices must be used within ServicesProvider");return t};function getGroupDisplayName(t){return t.name||t.id.slice(0,8)+"..."}function getGroupFormattedLastMessageTime(t){const e=t.lastMessageTime;if(!e)return"";const s=new Date(e),a=new Date().getTime()-s.getTime();return a<6e4?"now":a<36e5?`${Math.floor(a/6e4)}m`:a<864e5?`${Math.floor(a/36e5)}h`:a<6048e5?`${Math.floor(a/864e5)}d`:s.toLocaleDateString()}function getMessageFormattedTime(t){return new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function getMessageFormattedDate(t){const e=new Date(t.timestamp),s=new Date,r=new Date(s);return r.setDate(r.getDate()-1),e.toDateString()===s.toDateString()?"Today":e.toDateString()===r.toDateString()?"Yesterday":e.toLocaleDateString()}function getMessageSenderDisplayName(t){return t.senderNametag?`@${t.senderNametag.replace("@","")}`:t.senderPubkey.slice(0,8)+"..."}function getMessageSenderAvatar(t){return(t.senderNametag||t.senderPubkey).slice(0,2).toUpperCase()}function getMemberAvatar(t){return(t.nametag||t.pubkey).slice(0,2).toUpperCase()}const QUERY_KEYS={GROUPS:["groupChat","groups"],MESSAGES:t=>["groupChat","messages",t],MEMBERS:t=>["groupChat","members",t],AVAILABLE_GROUPS:["groupChat","available"],UNREAD_COUNT:["groupChat","unreadCount"],RELAY_ADMIN:["groupChat","relayAdmin"]},useGroupChat=()=>{const t=useQueryClient(),{groupChat:e,isGroupChatConnected:s}=useServices(),{sphere:r}=useSphereContext(),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState(""),[u,f]=reactExports.useState(""),d=reactExports.useRef(a);d.current=a,reactExports.useEffect(()=>{if(!r)return;const J=()=>{t.invalidateQueries({queryKey:QUERY_KEYS.GROUPS});const le=d.current;le&&t.invalidateQueries({queryKey:QUERY_KEYS.MESSAGES(le.id)}),t.invalidateQueries({queryKey:QUERY_KEYS.UNREAD_COUNT})},U=le=>{const te=d.current;te&&le.groupId===te.id&&(t.invalidateQueries({queryKey:QUERY_KEYS.MESSAGES(te.id)}),t.invalidateQueries({queryKey:QUERY_KEYS.MEMBERS(te.id)}),e?.markGroupAsRead(te.id)),t.invalidateQueries({queryKey:QUERY_KEYS.GROUPS}),t.invalidateQueries({queryKey:QUERY_KEYS.UNREAD_COUNT})},G=le=>{d.current?.id===le.groupId&&o(null)},ae=le=>{d.current?.id===le.groupId&&o(null)},he=[r.on("groupchat:updated",J),r.on("groupchat:message",U),r.on("groupchat:kicked",G),r.on("groupchat:group_deleted",ae)];return()=>{he.forEach(le=>le())}},[r,t,e]);const p=useQuery({queryKey:QUERY_KEYS.GROUPS,queryFn:()=>e?[...e.getGroups()].sort((U,G)=>(G.lastMessageTime??0)-(U.lastMessageTime??0)):[],staleTime:3e4,enabled:!!e});reactExports.useEffect(()=>{if(p.data&&p.data.length>0&&!a){const J=localStorage.getItem(STORAGE_KEYS.CHAT_SELECTED_GROUP);if(J){const U=p.data.find(G=>G.id===J);U&&o(U)}}},[p.data,a]);const m=useQuery({queryKey:QUERY_KEYS.AVAILABLE_GROUPS,queryFn:async()=>e?e.fetchAvailableGroups():[],staleTime:6e4,enabled:!!e}),y=useQuery({queryKey:QUERY_KEYS.MESSAGES(a?.id||""),queryFn:()=>!a||!e?[]:[...e.getMessages(a.id)].sort((U,G)=>U.timestamp-G.timestamp),enabled:!!a&&!!e,staleTime:1e4}),b=useQuery({queryKey:QUERY_KEYS.MEMBERS(a?.id||""),queryFn:()=>!a||!e?[]:[...e.getMembers(a.id)].sort((U,G)=>U.joinedAt-G.joinedAt),enabled:!!a&&!!e,staleTime:6e4}),E=useQuery({queryKey:QUERY_KEYS.UNREAD_COUNT,queryFn:()=>e?.getTotalUnreadCount()??0,staleTime:3e4,enabled:!!e}),C=useQuery({queryKey:QUERY_KEYS.RELAY_ADMIN,queryFn:async()=>e?e.isCurrentUserRelayAdmin():!1,staleTime:3e5,enabled:!!e&&s}),j=useMutation({mutationFn:async({groupId:J,inviteCode:U})=>{if(!e)throw new Error("Group chat not available");return e.joinGroup(J,U)},onSuccess:(J,{groupId:U})=>{t.invalidateQueries({queryKey:QUERY_KEYS.GROUPS}),t.invalidateQueries({queryKey:QUERY_KEYS.AVAILABLE_GROUPS}),t.invalidateQueries({queryKey:QUERY_KEYS.MESSAGES(U)})}}),B=useMutation({mutationFn:async J=>{if(!e)throw new Error("Group chat not available");return e.leaveGroup(J)},onSuccess:(J,U)=>{a?.id===U&&o(null),t.invalidateQueries({queryKey:QUERY_KEYS.GROUPS}),t.invalidateQueries({queryKey:QUERY_KEYS.AVAILABLE_GROUPS})}}),D=useMutation({mutationFn:async({content:J,replyToId:U})=>{if(!a)throw new Error("No group selected");if(!e)throw new Error("Group chat not available");return!!await e.sendMessage(a.id,J,U)},onSuccess:()=>{c(""),t.invalidateQueries({queryKey:QUERY_KEYS.MESSAGES(a?.id||"")}),t.invalidateQueries({queryKey:QUERY_KEYS.GROUPS})}}),F=reactExports.useCallback(async J=>{o(J),J?(localStorage.setItem(STORAGE_KEYS.CHAT_SELECTED_GROUP,J.id),e?.markGroupAsRead(J.id),t.invalidateQueries({queryKey:QUERY_KEYS.UNREAD_COUNT}),(e?.getMessages(J.id)??[]).length===0&&e&&(await e.fetchMessages(J.id),t.invalidateQueries({queryKey:QUERY_KEYS.MESSAGES(J.id)}))):localStorage.removeItem(STORAGE_KEYS.CHAT_SELECTED_GROUP)},[t,e]),q=reactExports.useCallback(async(J,U)=>{const G=await j.mutateAsync({groupId:J,inviteCode:U});if(G){const ae=e?.getGroup(J);ae&&(o(ae),localStorage.setItem(STORAGE_KEYS.CHAT_SELECTED_GROUP,ae.id),e?.markGroupAsRead(ae.id),t.invalidateQueries({queryKey:QUERY_KEYS.UNREAD_COUNT}))}return G},[j,t,e]),V=reactExports.useCallback(async J=>B.mutateAsync(J),[B]),ee=reactExports.useCallback(async(J,U)=>J.trim()?D.mutateAsync({content:J,replyToId:U}):!1,[D]),Q=reactExports.useCallback(J=>{e?.markGroupAsRead(J),t.invalidateQueries({queryKey:QUERY_KEYS.UNREAD_COUNT})},[t,e]),W=reactExports.useCallback(()=>{t.invalidateQueries({queryKey:QUERY_KEYS.AVAILABLE_GROUPS})},[t]),Z=reactExports.useMemo(()=>{const J=p.data||[];if(!u.trim())return J;const U=u.toLowerCase();return J.filter(G=>getGroupDisplayName(G).toLowerCase().includes(U)||G.description?.toLowerCase().includes(U)||(G.lastMessageText??"").toLowerCase().includes(U))},[p.data,u]),z=reactExports.useMemo(()=>!a||!e?!1:e.isCurrentUserAdmin(a.id),[a,e,b.data]),O=reactExports.useMemo(()=>!a||!e?!1:e.isCurrentUserModerator(a.id),[a,e,b.data]),k=reactExports.useMemo(()=>!a||!e?!1:!!(e.isCurrentUserAdmin(a.id)||e.isCurrentUserModerator(a.id)||C.data&&a.visibility===GroupVisibility.PUBLIC),[a,e,b.data,C.data]),v=useMutation({mutationFn:async J=>{if(!a)throw new Error("No group selected");if(!e)throw new Error("Group chat not available");return e.deleteMessage(a.id,J)},onSuccess:()=>{a&&t.invalidateQueries({queryKey:QUERY_KEYS.MESSAGES(a.id)})}}),S=useMutation({mutationFn:async({userPubkey:J,reason:U})=>{if(!a)throw new Error("No group selected");if(!e)throw new Error("Group chat not available");return e.kickUser(a.id,J,U)},onSuccess:()=>{a&&t.invalidateQueries({queryKey:QUERY_KEYS.MEMBERS(a.id)})}}),N=reactExports.useCallback(async J=>v.mutateAsync(J),[v]),R=reactExports.useCallback(async(J,U)=>S.mutateAsync({userPubkey:J,reason:U}),[S]),T=useMutation({mutationFn:async J=>{if(!e)throw new Error("Group chat not available");return e.createGroup(J)},onSuccess:J=>{t.invalidateQueries({queryKey:QUERY_KEYS.GROUPS}),t.invalidateQueries({queryKey:QUERY_KEYS.AVAILABLE_GROUPS}),J&&o(J)}}),M=useMutation({mutationFn:async J=>{if(!e)throw new Error("Group chat not available");return e.deleteGroup(J)},onSuccess:(J,U)=>{a?.id===U&&o(null),t.invalidateQueries({queryKey:QUERY_KEYS.GROUPS}),t.invalidateQueries({queryKey:QUERY_KEYS.AVAILABLE_GROUPS})}}),I=useMutation({mutationFn:async J=>{if(!e)throw new Error("Group chat not available");return e.createInvite(J)}}),$=reactExports.useCallback(async J=>T.mutateAsync(J),[T]),A=reactExports.useCallback(async J=>M.mutateAsync(J),[M]),L=reactExports.useCallback(async J=>I.mutateAsync(J),[I]),Y=reactExports.useMemo(()=>e?.getMyPublicKey()??null,[e]),oe=reactExports.useCallback(J=>e?.isCurrentUserAdmin(J)??!1,[e]);return{groups:p.data||[],isLoadingGroups:p.isLoading,selectedGroup:a,selectGroup:F,joinGroup:q,leaveGroup:V,availableGroups:m.data||[],isLoadingAvailable:m.isLoading,refreshAvailableGroups:W,messages:y.data||[],isLoadingMessages:y.isLoading,sendMessage:ee,isSending:D.isPending,members:b.data||[],isLoadingMembers:b.isLoading,messageInput:l,setMessageInput:c,totalUnreadCount:E.data||0,markAsRead:Q,searchQuery:u,setSearchQuery:f,filteredGroups:Z,isConnected:s,isCurrentUserAdmin:z,isCurrentUserModerator:O,canModerateSelectedGroup:k,deleteMessage:N,kickUser:R,isDeleting:v.isPending,isKicking:S.isPending,isRelayAdmin:C.data||!1,createGroup:$,deleteGroup:A,createInvite:L,isCreatingGroup:T.isPending,isDeletingGroup:M.isPending,isCreatingInvite:I.isPending,myPubkey:Y,isAdminOfGroup:oe}};function GroupItem({group:t,isSelected:e,onClick:s,onLeave:r,isAdmin:a=!1,isRelayAdmin:o=!1,onDeleteGroup:l,onCreateInvite:c,isDeletingGroup:u=!1,isCreatingInvite:f=!1}){const[d,p]=reactExports.useState(!1),m=reactExports.useRef(null);return reactExports.useEffect(()=>{function y(b){m.current&&!m.current.contains(b.target)&&p(!1)}return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),jsxRuntimeExports.jsx(motion.div,{onClick:s,className:`p-3 rounded-xl cursor-pointer transition-all relative group ${e?"bg-linear-to-br from-blue-500/10 to-purple-500/10 border border-blue-500/30":"hover:bg-neutral-100 dark:hover:bg-neutral-800/50 border border-transparent"} ${d?"z-50":""}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-medium ${e?"bg-linear-to-br from-blue-500 to-purple-600 text-white":"bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300"}`,children:t.visibility===GroupVisibility.PRIVATE?jsxRuntimeExports.jsx(Lock,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Hash$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:`font-medium truncate ${e?"text-neutral-900 dark:text-white":"text-neutral-700 dark:text-neutral-200"}`,children:getGroupDisplayName(t)}),(t.unreadCount??0)>0&&jsxRuntimeExports.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-blue-500 text-white shrink-0",children:(t.unreadCount??0)>99?"99+":t.unreadCount})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:t.lastMessageText??t.description??"No messages yet"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:getGroupFormattedLastMessageTime(t)}),jsxRuntimeExports.jsxs("div",{ref:m,className:"relative",children:[jsxRuntimeExports.jsx("button",{onClick:y=>{y.stopPropagation(),p(!d)},className:"p-1 rounded-lg opacity-0 group-hover:opacity-100 hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-all",children:jsxRuntimeExports.jsx(EllipsisVertical,{className:"w-4 h-4 text-neutral-400"})}),d&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"absolute right-0 top-full mt-1 w-40 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg overflow-hidden z-50",children:[a&&c&&t.visibility===GroupVisibility.PRIVATE&&jsxRuntimeExports.jsxs("button",{onClick:async y=>{y.stopPropagation();const b=await c();if(b){const E=`${window.location.origin}${window.location.pathname}#/agents/chat?join=${t.id}/${b}`;navigator.clipboard.writeText(E),showToast("Invite link copied to clipboard","success")}p(!1)},disabled:f,className:"w-full px-3 py-2 text-left text-sm text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700 flex items-center gap-2 disabled:opacity-50",children:[f?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}):jsxRuntimeExports.jsx(Link,{className:"w-4 h-4"}),"Copy Invite Link"]}),(a||o&&t.visibility===GroupVisibility.PUBLIC)&&l&&jsxRuntimeExports.jsxs("button",{onClick:async y=>{y.stopPropagation(),confirm(`Are you sure you want to delete "${getGroupDisplayName(t)}"? This cannot be undone.`)&&await l(),p(!1)},disabled:u,className:"w-full px-3 py-2 text-left text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 disabled:opacity-50",children:[u?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}):jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"}),"Delete Group"]}),jsxRuntimeExports.jsxs("button",{onClick:y=>{y.stopPropagation(),r(),p(!1)},className:"w-full px-3 py-2 text-left text-sm text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4"}),"Leave Group"]})]})]})]})]})})}function GroupList({groups:t,selectedGroup:e,onSelect:s,onLeave:r,onJoinGroup:a,onCreateGroup:o,searchQuery:l,onSearchChange:c,isOpen:u,onClose:f,isCollapsed:d,onCollapse:p,totalUnreadCount:m,onModeChange:y,isRelayAdmin:b,isAdminOfGroup:E,onDeleteGroup:C,onCreateInvite:j,isDeletingGroup:B,isCreatingInvite:D}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AnimatePresence,{children:u&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:hidden absolute inset-0 bg-black/50 z-40 rounded-3xl",onClick:f})}),jsxRuntimeExports.jsxs("div",{className:`
        w-72 border-r border-neutral-200 dark:border-neutral-800/50 flex flex-col z-50 overflow-hidden
        absolute lg:relative inset-y-0 left-0 min-h-0
        transform transition-all duration-300 ease-in-out
        ${u?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        ${d?"lg:w-0 lg:border-0 lg:min-w-0":"lg:w-72"}
        bg-white/95 dark:bg-neutral-900/95 lg:bg-transparent backdrop-blur-xl lg:backdrop-blur-none rounded-l-3xl lg:rounded-none
      `,children:[jsxRuntimeExports.jsxs("div",{className:"shrink-0 p-4 border-b border-neutral-200 dark:border-neutral-800/50 bg-linear-to-br from-white/80 dark:from-neutral-900/80 to-neutral-50/40 dark:to-neutral-800/40 backdrop-blur-sm relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-blue-500/5 rounded-bl-full"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3 relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium",children:"Groups"}),jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 text-blue-500 animate-pulse"}),m>0&&jsxRuntimeExports.jsx("span",{className:"px-1.5 py-0.5 text-xs rounded-full bg-blue-500 text-white",children:m>99?"99+":m})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(motion.button,{onClick:o,className:"p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",title:"Create group",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(Hash$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:a,className:"p-2 rounded-lg bg-linear-to-br from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/30",title:"Browse groups",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:p,className:"hidden lg:flex p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",title:"Collapse sidebar",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(PanelLeftClose,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:f,className:"lg:hidden p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 relative z-10 mb-3",children:[jsxRuntimeExports.jsxs(motion.button,{className:"px-4 py-3 rounded-xl text-sm transition-all relative overflow-hidden bg-linear-to-br from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/30",whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-tr from-white/0 via-white/20 to-white/0"}),jsxRuntimeExports.jsx(Hash$1,{className:"w-4 h-4 inline mr-2"}),jsxRuntimeExports.jsx("span",{className:"relative z-10",children:"Global"})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:()=>y("dm"),className:"px-4 py-3 rounded-xl text-sm transition-all relative overflow-hidden bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:bg-neutral-200 dark:hover:bg-neutral-800 border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx(User,{className:"w-4 h-4 inline mr-2"}),jsxRuntimeExports.jsx("span",{children:"DM"})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:l,onChange:F=>c(F.target.value),placeholder:"Search groups...",className:"w-full pl-9 pr-3 py-2 bg-neutral-100 dark:bg-neutral-800/50 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl text-sm border border-neutral-200 dark:border-neutral-700/50 focus:outline-none focus:border-blue-500 transition-colors"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:t.length===0?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-2xl bg-neutral-100 dark:bg-neutral-800/50 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(Hash$1,{className:"w-8 h-8 text-neutral-400"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:"No groups yet"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-400 dark:text-neutral-500 text-xs mt-1",children:"Join a group to start chatting"})]}):jsxRuntimeExports.jsx(AnimatePresence,{mode:"popLayout",children:t.map(F=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},layout:!0,children:jsxRuntimeExports.jsx(GroupItem,{group:F,isSelected:e?.id===F.id,onClick:()=>s(F),onLeave:()=>r(F.id),isAdmin:E(F.id),isRelayAdmin:b,onDeleteGroup:()=>C(F.id),onCreateInvite:()=>j(F.id),isDeletingGroup:B,isCreatingInvite:D})},F.id))})})]})]})}function GroupMessageBubble({message:t,isOwnMessage:e,delay:s=0,canDelete:r=!1,onDelete:a,isDeleting:o=!1,onReply:l,replyToMessage:c}){const u=getColorFromPubkey(t.senderPubkey),[f,d]=reactExports.useState(!1),[p,m]=reactExports.useState(!1),y=()=>{const j=getMentionClickHandler();j&&t.senderNametag&&j(t.senderNametag.replace("@",""))},b=()=>{d(!0)},E=async()=>{a&&t.id&&await a(t.id),d(!1)},C=()=>{d(!1)};return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s},className:`flex gap-3 ${e?"flex-row-reverse":""} group`,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[jsxRuntimeExports.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg bg-linear-to-br ${u.gradient} text-white text-xs font-medium flex items-center justify-center shadow-md`,children:getMessageSenderAvatar(t)}),jsxRuntimeExports.jsxs("div",{className:`flex flex-col ${e?"items-end":"items-start"} max-w-[75%]`,children:[jsxRuntimeExports.jsx("button",{onClick:y,className:`text-xs font-medium mb-1 hover:underline cursor-pointer transition-colors ${e?"text-white/90 hover:text-white":u.text}`,children:getMessageSenderDisplayName(t)}),c&&jsxRuntimeExports.jsxs("div",{className:`flex items-start gap-2 mb-1 text-xs ${e?"flex-row-reverse":""}`,children:[jsxRuntimeExports.jsx(CornerDownRight,{className:"w-3 h-3 text-neutral-400 shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{className:"px-2 py-1 rounded-lg bg-neutral-200/50 dark:bg-neutral-700/50 text-neutral-500 dark:text-neutral-400 max-w-[200px] truncate",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[getMessageSenderDisplayName(c),": "]}),c.content.slice(0,50),c.content.length>50?"...":""]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.01},className:`rounded-2xl px-4 py-3 relative overflow-hidden ${e?"bg-linear-to-br from-orange-500 to-orange-600 text-white shadow-lg shadow-orange-500/20":"bg-neutral-100 dark:bg-neutral-800/80 backdrop-blur-sm text-neutral-800 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-700/50"}`,children:[e&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-tr from-white/0 via-white/10 to-white/0"}),jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed relative z-10 wrap-break-word whitespace-pre-wrap",children:jsxRuntimeExports.jsx(MarkdownContent,{text:t.content})})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:p&&!f&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`absolute top-1/2 -translate-y-1/2 flex items-center gap-1 ${e?"-left-16":"-right-16"}`,children:[l&&jsxRuntimeExports.jsx("button",{onClick:()=>l(t),className:"p-1.5 rounded-lg bg-blue-500/10 hover:bg-blue-500/20 text-blue-500 transition-colors",title:"Reply",children:jsxRuntimeExports.jsx(Reply,{className:"w-4 h-4"})}),r&&jsxRuntimeExports.jsx("button",{onClick:b,disabled:o,className:"p-1.5 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-500 transition-colors",title:"Delete message",children:o?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}):jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})}),jsxRuntimeExports.jsx(AnimatePresence,{children:f&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"absolute -right-24 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:E,disabled:o,className:"px-2 py-1 text-xs font-medium rounded-lg bg-red-500 hover:bg-red-600 text-white transition-colors disabled:opacity-50",children:o?"...":"Delete"}),jsxRuntimeExports.jsx("button",{onClick:C,disabled:o,className:"px-2 py-1 text-xs font-medium rounded-lg bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600 text-neutral-700 dark:text-neutral-200 transition-colors",children:"Cancel"})]})})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1 px-1",children:getMessageFormattedTime(t)})]})]})}function GroupMessageList({messages:t,isLoading:e,myPubkey:s,canDeleteMessages:r=!1,onDeleteMessage:a,isDeletingMessage:o=!1,onReplyToMessage:l}){const c=reactExports.useMemo(()=>new Map(t.map(p=>[p.id,p])),[t]),u=reactExports.useRef(null);reactExports.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[t]);const f=[];let d="";return t.forEach(p=>{const m=getMessageFormattedDate(p);m!==d&&(d=m,f.push({date:m,messages:[]})),f[f.length-1].messages.push(p)}),e?jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0",children:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 text-blue-500"})})}):jsxRuntimeExports.jsxs("div",{ref:u,className:"flex-1 overflow-y-auto px-4 py-4 space-y-6 min-h-0",children:[f.map((p,m)=>jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 text-xs font-medium",children:p.date})}),p.messages.map((y,b)=>jsxRuntimeExports.jsx(GroupMessageBubble,{message:y,isOwnMessage:y.senderPubkey===s,delay:m===f.length-1?b*.05:0,canDelete:r,onDelete:a,isDeleting:o,onReply:l,replyToMessage:y.replyToId?c.get(y.replyToId):null},y.id??`${y.timestamp}-${y.senderPubkey}`))]},p.date)),t.length===0&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"No messages yet"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-400 dark:text-neutral-500 text-sm mt-1",children:"Be the first to send a message!"})]})]})}function JoinGroupModal({isOpen:t,onClose:e,availableGroups:s,isLoading:r,onRefresh:a,onJoin:o,initialInviteLink:l}){const[c,u]=reactExports.useState(l?"invite":"browse"),[f,d]=reactExports.useState(""),[p,m]=reactExports.useState(null),[y,b]=reactExports.useState(""),[E,C]=reactExports.useState(""),[j,B]=reactExports.useState(!1),[D,F]=reactExports.useState(null),q=s.filter(z=>z.name.toLowerCase().includes(f.toLowerCase())||z.description?.toLowerCase().includes(f.toLowerCase())),V=z=>{const O=z.trim(),k=O.indexOf("/");return k===-1||k===0||k===O.length-1?null:{groupId:O.substring(0,k),code:O.substring(k+1)}},ee=async()=>{if(p){B(!0),F(null);try{await o(p,y||void 0)?(e(),m(null),b(""),d("")):F("Failed to join group. Please try again.")}catch{F("An error occurred. Please try again.")}finally{B(!1)}}},Q=async()=>{const z=V(E);if(!z){F("Invalid invite link format. Expected: groupId/inviteCode");return}B(!0),F(null);try{await o(z.groupId,z.code)?(e(),C("")):F("Failed to join group. Check your invite link and try again.")}catch{F("An error occurred. Please try again.")}finally{B(!1)}},W=s.find(z=>z.id===p),Z=()=>{d(""),m(null),b(""),C(""),F(null)};return reactExports.useEffect(()=>{t&&l&&(u("invite"),C(l))},[t,l]),jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",onClick:e,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:z=>z.stopPropagation(),className:"w-full max-w-md bg-white dark:bg-neutral-900 rounded-2xl shadow-xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-medium text-neutral-900 dark:text-white",children:"Join Group"}),jsxRuntimeExports.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-neutral-500"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 p-1 bg-neutral-100 dark:bg-neutral-800 rounded-lg",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{u("browse"),Z()},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${c==="browse"?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[jsxRuntimeExports.jsx(Hash$1,{className:"w-4 h-4"}),"Browse"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{u("invite"),Z()},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${c==="invite"?"bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white shadow-sm":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,children:[jsxRuntimeExports.jsx(Link,{className:"w-4 h-4"}),"Join with Invite"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[c==="browse"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx(Hash$1,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:f,onChange:z=>d(z.target.value),placeholder:"Search groups...",autoFocus:!0,className:"w-full pl-9 pr-3 py-2.5 bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl text-sm border border-neutral-200 dark:border-neutral-700 focus:outline-none focus:border-blue-500 transition-colors"})]}),jsxRuntimeExports.jsx(motion.button,{onClick:a,disabled:r,className:"p-2.5 rounded-xl bg-neutral-100 dark:bg-neutral-800 text-neutral-500 hover:text-neutral-900 dark:hover:text-white border border-neutral-200 dark:border-neutral-700 transition-colors disabled:opacity-50",whileHover:{scale:1.05},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(RefreshCw,{className:`w-5 h-5 ${r?"animate-spin":""}`})})]}),jsxRuntimeExports.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:r&&q.length===0?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 text-blue-500 animate-spin"})}):q.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-neutral-500 dark:text-neutral-400",children:[jsxRuntimeExports.jsx("p",{children:"No groups found"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-1",children:"Try refreshing or check back later"})]}):q.map(z=>jsxRuntimeExports.jsx(motion.button,{onClick:()=>m(z.id),className:`w-full p-3 rounded-xl text-left transition-all ${p===z.id?"bg-blue-500/10 border-2 border-blue-500":"bg-neutral-50 dark:bg-neutral-800/50 border-2 border-transparent hover:border-neutral-200 dark:hover:border-neutral-700"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${p===z.id?"bg-blue-500 text-white":"bg-neutral-200 dark:bg-neutral-700 text-neutral-500 dark:text-neutral-400"}`,children:z.visibility===GroupVisibility.PRIVATE?jsxRuntimeExports.jsx(Lock,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Hash$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-neutral-900 dark:text-white truncate",children:z.name}),z.memberCount!==void 0&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 text-xs text-neutral-500",children:[jsxRuntimeExports.jsx(Users,{className:"w-3 h-3"}),z.memberCount]})]}),z.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 truncate mt-0.5",children:z.description})]})]})},z.id))}),W?.visibility===GroupVisibility.PRIVATE&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Invite Code"}),jsxRuntimeExports.jsx("input",{type:"text",value:y,onChange:z=>b(z.target.value),placeholder:"Enter invite code...",className:"w-full px-3 py-2.5 bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl text-sm border border-neutral-200 dark:border-neutral-700 focus:outline-none focus:border-blue-500 transition-colors"})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-blue-500/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(Lock,{className:"w-6 h-6 text-blue-500"})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Enter the invite link shared by the group admin"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Invite Link"}),jsxRuntimeExports.jsx("input",{type:"text",value:E,onChange:z=>{C(z.target.value),F(null)},placeholder:"groupId/inviteCode",className:"w-full px-3 py-2.5 bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl text-sm border border-neutral-200 dark:border-neutral-700 focus:outline-none focus:border-blue-500 transition-colors font-mono"}),jsxRuntimeExports.jsx("p",{className:"mt-1.5 text-xs text-neutral-400",children:"Format: groupId/inviteCode"})]})]}),D&&jsxRuntimeExports.jsx("p",{className:"text-sm text-red-500 text-center",children:D})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-800 flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:e,className:"flex-1 py-2.5 rounded-xl bg-neutral-100 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 font-medium hover:bg-neutral-200 dark:hover:bg-neutral-700 transition-colors",children:"Cancel"}),c==="browse"?jsxRuntimeExports.jsx(motion.button,{onClick:ee,disabled:!p||j,className:"flex-1 py-2.5 rounded-xl bg-linear-to-r from-blue-500 to-purple-600 text-white font-medium disabled:opacity-50 flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:j?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Joining..."]}):"Join Group"}):jsxRuntimeExports.jsx(motion.button,{onClick:Q,disabled:!E.trim()||j,className:"flex-1 py-2.5 rounded-xl bg-linear-to-r from-blue-500 to-purple-600 text-white font-medium disabled:opacity-50 flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:j?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Joining..."]}):"Join with Invite"})]})]})})})}function MemberListModal({isOpen:t,onClose:e,members:s,isLoading:r,canModerate:a,myPubkey:o,onKickUser:l,isKicking:c=!1}){const[u,f]=reactExports.useState(null),[d,p]=reactExports.useState(null),m=B=>{p(B)},y=async B=>{if(l){f(B);try{await l(B)}finally{f(null),p(null)}}},b=()=>{p(null)},E=B=>{switch(B){case GroupRole.ADMIN:return jsxRuntimeExports.jsx(ShieldCheck,{className:"w-4 h-4 text-amber-500"});case GroupRole.MODERATOR:return jsxRuntimeExports.jsx(Shield,{className:"w-4 h-4 text-blue-500"});default:return jsxRuntimeExports.jsx(User,{className:"w-4 h-4 text-neutral-400"})}},C=B=>{switch(B){case GroupRole.ADMIN:return jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",children:"Admin"});case GroupRole.MODERATOR:return jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",children:"Mod"});default:return null}},j=[...s].sort((B,D)=>{const F={[GroupRole.ADMIN]:0,[GroupRole.MODERATOR]:1,[GroupRole.MEMBER]:2};return F[B.role]-F[D.role]});return reactDomExports.createPortal(jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100000]"}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-x-4 top-20 bottom-8 md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 md:w-full md:max-w-md md:max-h-[70vh] bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-[100000] flex flex-col overflow-hidden border border-neutral-200 dark:border-neutral-800",children:[jsxRuntimeExports.jsxs("div",{className:"shrink-0 flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-800",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:["Members (",s.length,")"]})}),jsxRuntimeExports.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-500 dark:text-neutral-400 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 animate-spin text-blue-500"})}):s.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-neutral-500 dark:text-neutral-400",children:"No members found"}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:j.map(B=>{const D=B.pubkey===o,F=a&&!D&&B.role!==GroupRole.ADMIN,q=u===B.pubkey,V=d===B.pubkey;return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-3 p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50",children:[jsxRuntimeExports.jsx("div",{className:"shrink-0 w-10 h-10 rounded-lg bg-linear-to-br from-blue-500 to-purple-600 text-white text-sm font-medium flex items-center justify-center",children:getMemberAvatar(B)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[E(B.role),B.nametag&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Unicity ID:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium text-neutral-900 dark:text-white",children:["@",B.nametag.replace("@","")]})]}),D&&jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"(you)"}),C(B.role)]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 break-all font-mono mt-1",children:B.pubkey})]}),F&&jsxRuntimeExports.jsx("div",{className:"shrink-0",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:V?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>y(B.pubkey),disabled:c,className:"px-2 py-1 text-xs font-medium rounded-lg bg-red-500 hover:bg-red-600 text-white transition-colors disabled:opacity-50",children:q?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3 h-3 animate-spin"}):"Kick"}),jsxRuntimeExports.jsx("button",{onClick:b,disabled:c,className:"px-2 py-1 text-xs font-medium rounded-lg bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600 text-neutral-700 dark:text-neutral-200 transition-colors",children:"No"})]},"confirm"):jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:()=>m(B.pubkey),className:"p-2 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Kick member",children:jsxRuntimeExports.jsx(UserMinus,{className:"w-4 h-4"})},"kick")})})]},B.pubkey)})})}),a&&jsxRuntimeExports.jsx("div",{className:"shrink-0 p-4 border-t border-neutral-200 dark:border-neutral-800 bg-amber-50 dark:bg-amber-900/20",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 flex items-center gap-2",children:[jsxRuntimeExports.jsx(ShieldCheck,{className:"w-4 h-4"}),"You can moderate this group. Click the kick icon to remove members."]})})]})]})}),document.body)}function CreateGroupModal({isOpen:t,onClose:e,onCreate:s,isCreating:r}){const[a,o]=reactExports.useState(""),[l,c]=reactExports.useState(""),[u,f]=reactExports.useState(GroupVisibility.PUBLIC),[d,p]=reactExports.useState(null),m=async b=>{if(b.preventDefault(),p(null),!a.trim()){p("Group name is required");return}try{await s({name:a.trim(),description:l.trim()||void 0,visibility:u}),o(""),c(""),f(GroupVisibility.PUBLIC),e()}catch(E){p(E instanceof Error?E.message:"Failed to create group")}},y=()=>{r||(o(""),c(""),f(GroupVisibility.PUBLIC),p(null),e())};return reactDomExports.createPortal(jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:y,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[100000]"}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-[100000] overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Hash$1,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Create Group"})]}),jsxRuntimeExports.jsx("button",{onClick:y,disabled:r,className:"p-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-500 transition-colors disabled:opacity-50",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:m,className:"p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Group Name *"}),jsxRuntimeExports.jsx("input",{type:"text",value:a,onChange:b=>o(b.target.value),placeholder:"Enter group name...",disabled:r,autoFocus:!0,className:"w-full px-4 py-2.5 bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl border border-neutral-200 dark:border-neutral-700 focus:outline-none focus:border-blue-500 transition-colors disabled:opacity-50"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1",children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:l,onChange:b=>c(b.target.value),placeholder:"What's this group about?",disabled:r,rows:3,className:"w-full px-4 py-2.5 bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl border border-neutral-200 dark:border-neutral-700 focus:outline-none focus:border-blue-500 transition-colors resize-none disabled:opacity-50"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-2",children:"Visibility"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>f(GroupVisibility.PUBLIC),disabled:r,className:`flex items-center gap-2 p-3 rounded-xl border transition-all ${u===GroupVisibility.PUBLIC?"bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-600 dark:text-blue-400":"bg-neutral-50 dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700 text-neutral-600 dark:text-neutral-400 hover:border-neutral-300 dark:hover:border-neutral-600"} disabled:opacity-50`,children:[jsxRuntimeExports.jsx(Globe,{className:"w-5 h-5"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Public"}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-70",children:"Anyone can join"})]})]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>f(GroupVisibility.PRIVATE),disabled:r,className:`flex items-center gap-2 p-3 rounded-xl border transition-all ${u===GroupVisibility.PRIVATE?"bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-600 dark:text-blue-400":"bg-neutral-50 dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700 text-neutral-600 dark:text-neutral-400 hover:border-neutral-300 dark:hover:border-neutral-600"} disabled:opacity-50`,children:[jsxRuntimeExports.jsx(Lock,{className:"w-5 h-5"}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:"Private"}),jsxRuntimeExports.jsx("div",{className:"text-xs opacity-70",children:"Invite only"})]})]})]})]}),d&&jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm",children:d}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:r||!a.trim(),className:"w-full py-3 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 text-white font-medium shadow-lg shadow-blue-500/30 hover:shadow-blue-500/40 transition-shadow disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-5 h-5 animate-spin"}),"Creating..."]}):"Create Group"})]})]})]})}),document.body)}function GroupChatSection({onModeChange:t}){const e=useNavigate(),[s,r]=useSearchParams(),{selectedGroup:a,selectGroup:o,leaveGroup:l,joinGroup:c,filteredGroups:u,availableGroups:f,isLoadingAvailable:d,refreshAvailableGroups:p,messages:m,isLoadingMessages:y,sendMessage:b,isSending:E,messageInput:C,setMessageInput:j,searchQuery:B,setSearchQuery:D,totalUnreadCount:F,isConnected:q,canModerateSelectedGroup:V,deleteMessage:ee,kickUser:Q,isDeleting:W,isKicking:Z,members:z,isLoadingMembers:O,isRelayAdmin:k,createGroup:v,deleteGroup:S,createInvite:N,isCreatingGroup:R,isDeletingGroup:T,isCreatingInvite:M,myPubkey:I,isAdminOfGroup:$}=useGroupChat(),[A,L]=reactExports.useState(!1),[Y,oe]=reactExports.useState(!1),[J,U]=reactExports.useState(!1),[G,ae]=reactExports.useState(!1),[he,le]=reactExports.useState(!1),[te,pe]=reactExports.useState(!1),[xe,be]=reactExports.useState(null),[ce,re]=reactExports.useState(null),ie=reactExports.useRef(null),fe=reactExports.useRef(null),{isFullscreen:ye,setFullscreen:we}=useUIState();reactExports.useEffect(()=>{const de=ne=>{ne.key==="Escape"&&ye&&we(!1)};return document.addEventListener("keydown",de),()=>document.removeEventListener("keydown",de)},[ye,we]),reactExports.useEffect(()=>{const de=s.get("join");de&&(be(de),U(!0),r(ne=>(ne.delete("join"),ne)))},[s,r]),reactExports.useEffect(()=>{function de(ne){ie.current&&!ie.current.contains(ne.target)&&le(!1)}return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[]),reactExports.useEffect(()=>{!E&&a&&window.innerWidth>=1024&&fe.current?.focus({preventScroll:!0})},[E,a]),reactExports.useEffect(()=>{a&&window.innerWidth>=1024&&setTimeout(()=>{fe.current?.focus({preventScroll:!0})},100)},[a]),reactExports.useEffect(()=>(setMentionClickHandler(de=>{t("dm",de)}),()=>setMentionClickHandler(null)),[t]),reactExports.useEffect(()=>{re(null)},[a?.id]);const Re=de=>{e(`/agents/${de}`),le(!1)},Me=agents.find(de=>de.id==="chat"),ke=async()=>{if(C.trim()){const de=ce?.id;await b(C,de),re(null)}},Le=de=>{re(de),fe.current?.focus()},Fe=()=>{re(null)},Te=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-20 -right-20 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-20 -left-20 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl pointer-events-none"}),jsxRuntimeExports.jsx(GroupList,{groups:u,selectedGroup:a,onSelect:de=>{o(de),L(!1)},onLeave:l,onJoinGroup:()=>U(!0),onCreateGroup:()=>ae(!0),searchQuery:B,onSearchChange:D,isOpen:A,onClose:()=>L(!1),isCollapsed:Y,onCollapse:()=>oe(!0),totalUnreadCount:F,onModeChange:t,isRelayAdmin:k,isAdminOfGroup:$,onDeleteGroup:S,onCreateInvite:N,isDeletingGroup:T,isCreatingInvite:M}),jsxRuntimeExports.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] z-10 min-w-0 h-full min-h-0",children:[jsxRuntimeExports.jsxs("div",{className:"shrink-0 p-4 border-b border-neutral-200 dark:border-neutral-800/50 flex items-center justify-between bg-linear-to-br from-white/80 dark:from-neutral-900/80 to-neutral-50/40 dark:to-neutral-800/40 backdrop-blur-sm relative z-20 theme-transition",children:[jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-500/5 rounded-tr-full"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[Y&&jsxRuntimeExports.jsx(motion.button,{onClick:()=>oe(!1),className:"hidden lg:flex p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Expand sidebar",children:jsxRuntimeExports.jsx(PanelLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>L(!0),className:"lg:hidden p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{ref:ie,className:`relative ${ye?"":"lg:hidden"}`,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>le(!he),className:"flex items-center gap-2 active:scale-95 transition-transform",children:[jsxRuntimeExports.jsx("div",{className:`p-2.5 rounded-xl bg-linear-to-br ${Me.color}`,children:jsxRuntimeExports.jsx(Me.Icon,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-lg text-neutral-900 dark:text-white font-medium",children:Me.name}),jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:Me.description})]}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 text-neutral-500 dark:text-neutral-400 transition-transform ${he?"rotate-180":""}`})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:he&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 mt-2 w-56 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700/50 rounded-xl shadow-xl overflow-hidden z-50",children:agents.map(de=>jsxRuntimeExports.jsxs("button",{onClick:()=>Re(de.id),className:`w-full flex items-center gap-3 p-3 hover:bg-neutral-100 dark:hover:bg-neutral-800/50 transition-colors ${de.id==="chat"?"bg-neutral-100 dark:bg-neutral-800/80":""}`,children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg bg-linear-to-br ${de.color} shrink-0`,children:jsxRuntimeExports.jsx(de.Icon,{className:"w-4 h-4 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white text-sm font-medium",children:de.name}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs truncate",children:de.description})]})]},de.id))})})]}),jsxRuntimeExports.jsx("div",{className:`${ye?"hidden":"hidden lg:flex"} items-center gap-3`,children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05},className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-blue-500 rounded-xl blur-lg opacity-50"}),jsxRuntimeExports.jsx("div",{className:"relative w-12 h-12 rounded-xl bg-linear-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-xl text-white font-medium",children:jsxRuntimeExports.jsx(Hash$1,{className:"w-6 h-6"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium",children:getGroupDisplayName(a)}),a.memberCount!==void 0&&jsxRuntimeExports.jsxs("button",{onClick:()=>pe(!0),className:"text-sm text-neutral-500 dark:text-neutral-400 flex items-center gap-1 hover:text-blue-500 dark:hover:text-blue-400 transition-colors",children:[jsxRuntimeExports.jsx(Users,{className:"w-3 h-3"}),a.memberCount," members"]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 flex items-center justify-center border border-neutral-200 dark:border-neutral-700/50",children:jsxRuntimeExports.jsx(Hash$1,{className:"w-6 h-6 text-neutral-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium",children:"Group Chat"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:q?"Select a group to start":"Connecting..."})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[ye&&a&&a.memberCount!==void 0&&jsxRuntimeExports.jsxs(motion.button,{onClick:()=>pe(!0),className:"px-3 py-2 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50 flex items-center gap-2 text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"View members",children:[jsxRuntimeExports.jsx(Users,{className:"w-4 h-4"}),a.memberCount]}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>we(!ye),className:"p-2 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.05},whileTap:{scale:.95},title:ye?"Exit fullscreen":"Fullscreen",children:ye?jsxRuntimeExports.jsx(Minimize2,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Maximize2,{className:"w-5 h-5"})})]})]}),a?jsxRuntimeExports.jsx(GroupMessageList,{messages:m,isLoading:y,myPubkey:I,canDeleteMessages:V,onDeleteMessage:ee,isDeletingMessage:W,onReplyToMessage:Le}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-8 min-h-0",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-24 h-24 rounded-2xl bg-neutral-100 dark:bg-neutral-800/50 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(Hash$1,{className:"w-12 h-12 text-neutral-400"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Welcome to Group Chat"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-400 dark:text-neutral-500 text-sm mt-1",children:"Select a group or join a new one"}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>U(!0),className:"mt-4 px-6 py-3 rounded-xl bg-linear-to-r from-blue-500 to-purple-600 text-white font-medium shadow-lg shadow-blue-500/30",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Browse Groups"})]}),a&&jsxRuntimeExports.jsxs("div",{className:"shrink-0 bg-white/95 dark:bg-neutral-900/95 backdrop-blur-sm theme-transition",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:ce&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-neutral-200 dark:border-neutral-700/50",children:jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 flex items-center gap-3 bg-neutral-50 dark:bg-neutral-800/50",children:[jsxRuntimeExports.jsx(Reply,{className:"w-4 h-4 text-blue-500 shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-500 font-medium",children:["Replying to ",getMessageSenderDisplayName(ce)]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 truncate",children:[ce.content.slice(0,100),ce.content.length>100?"...":""]})]}),jsxRuntimeExports.jsx("button",{onClick:Fe,className:"p-1 rounded-lg hover:bg-neutral-200 dark:hover:bg-neutral-700 text-neutral-500 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})})}),jsxRuntimeExports.jsx(DMChatInput,{ref:fe,value:C,onChange:j,onSend:ke,isSending:E,placeholder:`Message #${getGroupDisplayName(a)}...`})]})]}),jsxRuntimeExports.jsx(JoinGroupModal,{isOpen:J,onClose:()=>{U(!1),be(null)},availableGroups:f,isLoading:d,onRefresh:p,onJoin:c,initialInviteLink:xe||void 0}),jsxRuntimeExports.jsx(MemberListModal,{isOpen:te,onClose:()=>pe(!1),members:z,isLoading:O,canModerate:V,myPubkey:I,onKickUser:Q,isKicking:Z}),jsxRuntimeExports.jsx(CreateGroupModal,{isOpen:G,onClose:()=>ae(!1),onCreate:v,isCreating:R})]}),Be=jsxRuntimeExports.jsx("div",{className:"bg-white/60 dark:bg-neutral-900/70 backdrop-blur-xl rounded-3xl border border-neutral-200 dark:border-neutral-800/50 overflow-hidden grid grid-cols-1 lg:grid-cols-[auto_1fr] relative lg:shadow-xl dark:lg:shadow-2xl h-full min-h-0 theme-transition",children:Te}),ze=reactDomExports.createPortal(jsxRuntimeExports.jsx(AnimatePresence,{children:ye&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},transition:{duration:.5,ease:[.32,.72,0,1]},className:"fixed top-14 left-0 right-0 bottom-0 z-99999 bg-white dark:bg-neutral-900",children:jsxRuntimeExports.jsx("div",{className:"h-full w-full grid grid-cols-1 lg:grid-cols-[auto_1fr] overflow-hidden relative",children:Te})})}),document.body);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!ye&&Be,ze]})}function ChatSection(){const[t,e]=useSearchParams(),[s,r]=reactExports.useState(()=>{if(t.get("join"))return"global";if(t.get("nametag"))return"dm";const u=localStorage.getItem(STORAGE_KEYS.CHAT_MODE);return u==="global"||u==="dm"?u:"dm"}),[a,o]=reactExports.useState(null);reactExports.useEffect(()=>{localStorage.setItem(STORAGE_KEYS.CHAT_MODE,s)},[s]),reactExports.useEffect(()=>{const u=t.get("nametag");if(u){const d=(u.startsWith("@")?u.slice(1):u).toLowerCase().replace(/\s+/g,"-");o(d),e(p=>(p.delete("nametag"),p.delete("product"),p.delete("image"),p.delete("price"),p.delete("purchased"),p))}},[t,e]);const l=(u,f)=>{u==="dm"&&f&&o(f),r(u)},c=()=>{o(null)};return s==="dm"?jsxRuntimeExports.jsx(DMChatSection,{onModeChange:l,pendingRecipient:a,onPendingRecipientHandled:c}):jsxRuntimeExports.jsx(GroupChatSection,{onModeChange:l})}function ChatHeader({agent:t,rightContent:e,onToggleSidebar:s,onExpandSidebar:r,showMenuButton:a,sidebarCollapsed:o,isFullscreen:l,onToggleFullscreen:c}){const u=useNavigate(),[f,d]=reactExports.useState(!1),p=reactExports.useRef(null);reactExports.useEffect(()=>{function y(b){p.current&&!p.current.contains(b.target)&&d(!1)}return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const m=y=>{u(`/agents/${y}`),d(!1)};return jsxRuntimeExports.jsx("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800/50 relative z-20 theme-transition",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[a&&o&&r&&jsxRuntimeExports.jsx(motion.button,{onClick:r,className:"hidden lg:block p-2 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Expand sidebar",children:jsxRuntimeExports.jsx(PanelLeft,{className:"w-5 h-5"})}),a&&s&&jsxRuntimeExports.jsx(motion.button,{onClick:s,className:"lg:hidden p-2 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.05},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(Menu,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{ref:p,className:`relative ${l?"":"lg:hidden"}`,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>d(!f),className:"flex items-center gap-2 active:scale-95 transition-transform",children:[jsxRuntimeExports.jsx("div",{className:`p-2.5 rounded-xl bg-linear-to-br ${t.color}`,children:jsxRuntimeExports.jsx(t.Icon,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-lg text-neutral-900 dark:text-white font-medium",children:t.name}),jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t.description})]}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 text-neutral-500 dark:text-neutral-400 transition-transform ${f?"rotate-180":""}`})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:f&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 mt-2 w-56 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700/50 rounded-xl shadow-xl overflow-hidden",children:agents.map(y=>jsxRuntimeExports.jsxs("button",{onClick:()=>m(y.id),className:`w-full flex items-center gap-3 p-3 hover:bg-neutral-100 dark:hover:bg-neutral-800/50 transition-colors ${y.id===t.id?"bg-neutral-100 dark:bg-neutral-800/80":""}`,children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg bg-linear-to-br ${y.color} shrink-0`,children:jsxRuntimeExports.jsx(y.Icon,{className:"w-4 h-4 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white text-sm font-medium",children:y.name}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-neutral-400 text-xs truncate",children:y.description})]})]},y.id))})})]}),jsxRuntimeExports.jsxs("div",{className:`${l?"hidden":"hidden lg:flex"} items-center gap-3`,children:[jsxRuntimeExports.jsx("div",{className:`p-2.5 rounded-xl bg-linear-to-br ${t.color}`,children:jsxRuntimeExports.jsx(t.Icon,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg text-neutral-900 dark:text-white font-medium",children:t.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t.description})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[e,c&&jsxRuntimeExports.jsx(motion.button,{onClick:c,className:"p-2 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors border border-neutral-200 dark:border-neutral-700/50",whileHover:{scale:1.05},whileTap:{scale:.95},title:l?"Exit fullscreen":"Fullscreen",children:l?jsxRuntimeExports.jsx(Minimize2,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Maximize2,{className:"w-5 h-5"})})]})]})})}function AnimatedDots({color:t}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 ${t} rounded-full animate-bounce`}),jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 ${t} rounded-full animate-bounce`,style:{animationDelay:"0.1s"}}),jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 ${t} rounded-full animate-bounce`,style:{animationDelay:"0.2s"}})]})}function ChatBubble({role:t,content:e,agentName:s,agentColor:r,thinking:a,showCopy:o=!1,isCopied:l=!1,onCopy:c,children:u,isStreaming:f=!1,currentStatus:d=null}){const p=b=>b.includes("indigo")?"bg-indigo-500":b.includes("emerald")||b.includes("teal")?"bg-emerald-500":b.includes("orange")||b.includes("red")?"bg-orange-500":b.includes("purple")||b.includes("pink")?"bg-purple-500":"bg-indigo-500",y=t==="user"?"text-white":(b=>b.includes("yellow")?"text-yellow-500":b.includes("indigo")?"text-indigo-500":b.includes("emerald")?"text-emerald-500":b.includes("teal")?"text-teal-500":b.includes("orange")?"text-orange-500":b.includes("red")?"text-red-500":b.includes("purple")?"text-purple-500":b.includes("pink")?"text-pink-500":b.includes("blue")?"text-blue-500":b.includes("green")?"text-green-500":"text-blue-500")(r);return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${t==="user"?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[85%] rounded-2xl p-4 ${t==="user"?`bg-linear-to-br ${r} text-white shadow-lg`:"bg-neutral-100 dark:bg-neutral-800/80 backdrop-blur-xl border border-neutral-200 dark:border-neutral-700/50 text-neutral-800 dark:text-neutral-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t==="assistant"&&jsxRuntimeExports.jsx("div",{className:`w-5 h-5 rounded-full bg-linear-to-br ${r} flex items-center justify-center`,children:jsxRuntimeExports.jsx(Sparkles,{className:"w-2.5 h-2.5 text-white"})}),jsxRuntimeExports.jsx("span",{className:`text-xs ${t==="user"?"text-white/80":"text-neutral-500 dark:text-neutral-400"}`,children:t==="user"?"You":s})]}),t==="assistant"&&(f||a)&&jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsxs("details",{className:"group",children:[jsxRuntimeExports.jsxs("summary",{className:"flex items-center gap-2 text-xs text-neutral-400 dark:text-neutral-500 cursor-pointer list-none",children:[f&&jsxRuntimeExports.jsx(AnimatedDots,{color:p(r)}),jsxRuntimeExports.jsx("span",{children:d||"Thinking..."}),a&&jsxRuntimeExports.jsx("span",{className:"text-neutral-300 dark:text-neutral-600 ml-1",children:""})]}),a&&jsxRuntimeExports.jsx("div",{className:"mt-2 pl-1",children:jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500 italic leading-relaxed",children:a})})]})}),e&&e.trim()&&jsxRuntimeExports.jsx("div",{className:"leading-relaxed",children:jsxRuntimeExports.jsx(MarkdownContent,{text:e,mentionClassName:y})}),u,o&&t==="assistant"&&e&&c&&jsxRuntimeExports.jsx("button",{onClick:c,className:"mt-3 flex items-center gap-1 text-xs text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors",children:l?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-green-500 dark:text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-green-500 dark:text-green-400",children:"Copied!"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Copy,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:"Copy"})]})})]})})}const ChatInput=reactExports.forwardRef(function t({value:e,onChange:s,onSend:r,onKeyDown:a,placeholder:o="Type a message...",disabled:l=!1,isStreaming:c=!1,onStop:u,agentColor:f},d){const p=reactExports.useRef(null);return reactExports.useImperativeHandle(d,()=>p.current,[]),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-neutral-200 dark:border-neutral-800/50 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-sm theme-transition",style:{paddingBottom:"calc(1rem + var(--safe-area-bottom, 0px))"},children:jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("textarea",{ref:p,value:e,onChange:m=>s(m.target.value),onKeyDown:a,placeholder:o,className:"flex-1 bg-neutral-100 dark:bg-neutral-800/50 text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500 outline-none resize-none rounded-xl p-3 min-h-11 max-h-[120px] border border-neutral-200 dark:border-neutral-700/50 text-base theme-transition",rows:1,disabled:l||c,enterKeyHint:"send"}),c&&u?jsxRuntimeExports.jsx(motion.button,{onClick:u,className:`px-5 py-2 rounded-xl bg-linear-to-r ${f} text-white`,whileHover:{scale:1.05},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(Square,{className:"w-4 h-4"})}):jsxRuntimeExports.jsx(motion.button,{onClick:r,disabled:!e.trim()||l,className:`px-5 py-2 rounded-xl bg-linear-to-r ${f} text-white disabled:opacity-50`,whileHover:{scale:1.05},whileTap:{scale:.95},children:jsxRuntimeExports.jsx(Send,{className:"w-4 h-4"})})]})})});function QuickActions({actions:t,onAction:e,disabled:s=!1}){if(!t.length)return null;const r=l=>l.length===1,a=t.filter(l=>!r(l.label)),o=t.filter(l=>r(l.label));return jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 border-t border-neutral-200/50 dark:border-neutral-800/30 relative z-10 space-y-2",children:[a.length>0&&jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap lg:flex-nowrap lg:overflow-x-auto scrollbar-hide",children:a.map(l=>jsxRuntimeExports.jsx("button",{onClick:()=>e(l.message),disabled:s,className:"px-3 py-1.5 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-600 dark:text-neutral-400 text-sm hover:bg-neutral-200 dark:hover:bg-neutral-700/50 hover:text-neutral-900 dark:hover:text-white transition-colors whitespace-nowrap disabled:opacity-50 max-w-[140px] lg:max-w-none truncate",children:l.label},l.label))}),o.length>0&&jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:o.map(l=>jsxRuntimeExports.jsx("button",{onClick:()=>e(l.message),disabled:s,className:"w-8 h-8 flex items-center justify-center rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-600 dark:text-neutral-400 text-sm hover:bg-neutral-200 dark:hover:bg-neutral-700/50 hover:text-neutral-900 dark:hover:text-white transition-colors disabled:opacity-50",children:l.label},l.label))})]})}const MAX_STORAGE_SIZE=4*1024*1024,MAX_SESSIONS_PER_AGENT=50,MAX_MESSAGES_PER_SESSION=100;class ChatHistoryRepository{static instance;constructor(){}static getInstance(){return ChatHistoryRepository.instance||(ChatHistoryRepository.instance=new ChatHistoryRepository),ChatHistoryRepository.instance}isLocalStorageAvailable(){try{const e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}getStorageSize(){let e=0;for(const s in localStorage)Object.prototype.hasOwnProperty.call(localStorage,s)&&(e+=localStorage.getItem(s)?.length||0);return e*2}generateId(){return`${Date.now()}-${Math.random().toString(36).substring(2,9)}`}getMessagesKey(e){return STORAGE_KEY_GENERATORS.agentChatMessages(e)}getAllSessions(){if(!this.isLocalStorageAvailable())return[];try{const e=localStorage.getItem(STORAGE_KEYS.AGENT_CHAT_SESSIONS);return e?JSON.parse(e).sort((r,a)=>a.updatedAt-r.updatedAt):[]}catch(e){return console.error("[ChatHistory] Failed to parse sessions",e),[]}}getSessionsForAgent(e,s){return this.getAllSessions().filter(r=>r.agentId===e&&(s?r.userId===s:!0))}getSession(e){return this.getAllSessions().find(s=>s.id===e)||null}saveSessions(e){if(this.isLocalStorageAvailable())try{localStorage.setItem(STORAGE_KEYS.AGENT_CHAT_SESSIONS,JSON.stringify(e))}catch(s){if(s instanceof DOMException&&(s.name==="QuotaExceededError"||s.name==="NS_ERROR_DOM_QUOTA_REACHED")){console.warn("[ChatHistory] Storage quota exceeded, triggering cleanup"),this.cleanupOldSessions();try{localStorage.setItem(STORAGE_KEYS.AGENT_CHAT_SESSIONS,JSON.stringify(e))}catch{console.error("[ChatHistory] Failed to save sessions after cleanup")}}else console.error("[ChatHistory] Failed to save sessions",s)}}createSession(e,s,r){const a={id:this.generateId(),agentId:e,userId:s,title:this.generateTitle(r),preview:r?.content.slice(0,100)||"",createdAt:Date.now(),updatedAt:Date.now(),messageCount:r?1:0};console.log(` [Repository] createSession: id=${a.id.slice(0,8)}..., agentId=${e}, userId=${s}`);const o=this.getAllSessions();return o.unshift(a),this.saveSessions(o),r&&this.saveMessages(a.id,[r]),this.notifyUpdate(),a}updateSession(e,s){const r=this.getAllSessions(),a=r.findIndex(o=>o.id===e);a>=0&&(r[a]={...r[a],...s,updatedAt:Date.now()},this.saveSessions(r),this.notifyUpdate())}deleteSession(e){const s=this.getAllSessions().filter(r=>r.id!==e);this.saveSessions(s),this.isLocalStorageAvailable()&&localStorage.removeItem(this.getMessagesKey(e)),this.notifyUpdate()}deleteAllSessionsForAgent(e,s){const r=this.getAllSessions(),a=r.filter(l=>l.agentId===e&&(s?l.userId===s:!0)),o=r.filter(l=>!(l.agentId===e&&(!s||l.userId===s)));a.forEach(l=>{this.isLocalStorageAvailable()&&localStorage.removeItem(this.getMessagesKey(l.id))}),this.saveSessions(o),this.notifyUpdate()}clearAllHistory(){if(!this.isLocalStorageAvailable())return;this.getAllSessions().forEach(s=>{localStorage.removeItem(this.getMessagesKey(s.id))}),localStorage.removeItem(STORAGE_KEYS.AGENT_CHAT_SESSIONS),this.notifyUpdate()}clearAllLocalHistoryOnly(){if(!this.isLocalStorageAvailable())return;this.getAllSessions().forEach(s=>{localStorage.removeItem(this.getMessagesKey(s.id))}),localStorage.removeItem(STORAGE_KEYS.AGENT_CHAT_SESSIONS),this.notifyUpdate()}getMessages(e){if(!this.isLocalStorageAvailable())return[];try{const s=localStorage.getItem(this.getMessagesKey(e));return s?JSON.parse(s):[]}catch(s){return console.error("[ChatHistory] Failed to parse messages",s),[]}}saveMessages(e,s){if(!this.isLocalStorageAvailable())return;const r=this.getSession(e),a=s.length;console.log(` [Repository] saveMessages: sessionId=${e.slice(0,8)}..., agentId=${r?.agentId||"unknown"}, messageCount=${a}`),this.getStorageSize()>MAX_STORAGE_SIZE&&this.cleanupOldSessions();const o=s.length>MAX_MESSAGES_PER_SESSION?s.slice(-MAX_MESSAGES_PER_SESSION):s;s.length>MAX_MESSAGES_PER_SESSION&&console.log(` [Repository] Trimming ${s.length} messages to ${MAX_MESSAGES_PER_SESSION} for localStorage`);try{localStorage.setItem(this.getMessagesKey(e),JSON.stringify(o));const l=s[s.length-1];this.updateSession(e,{title:this.generateTitleFromMessages(s),preview:l?.content.slice(0,100)||"",messageCount:s.length})}catch(l){if(l instanceof DOMException&&(l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED")){console.warn("[ChatHistory] Storage quota exceeded, triggering cleanup"),this.cleanupOldSessions();try{localStorage.setItem(this.getMessagesKey(e),JSON.stringify(o))}catch{console.error("[ChatHistory] Failed to save messages after cleanup")}}else console.error("[ChatHistory] Failed to save messages",l)}}appendMessage(e,s){const r=this.getMessages(e),a=r.findIndex(o=>o.id===s.id);a>=0?r[a]=s:r.push(s),this.saveMessages(e,r)}generateTitle(e){if(!e||!e.content)return"New conversation";const s=e.content.trim();return s.length<=40?s:s.slice(0,37)+"..."}generateTitleFromMessages(e){const s=e.find(r=>r.role==="user");return this.generateTitle(s)}searchSessions(e,s,r){const a=e.toLowerCase().trim();return a?(s?this.getSessionsForAgent(s,r):this.getAllSessions()).filter(l=>l.title.toLowerCase().includes(a)||l.preview.toLowerCase().includes(a)?!0:this.getMessages(l.id).some(u=>u.content.toLowerCase().includes(a))):s?this.getSessionsForAgent(s,r):this.getAllSessions()}cleanupOldSessions(){console.log("[ChatHistory] Running cleanup...");const e=this.getAllSessions(),s={};e.forEach(o=>{s[o.agentId]||(s[o.agentId]=[]),s[o.agentId].push(o)});const r=[];Object.values(s).forEach(o=>{o.length>MAX_SESSIONS_PER_AGENT&&(o.sort((c,u)=>u.updatedAt-c.updatedAt),o.slice(MAX_SESSIONS_PER_AGENT).forEach(c=>r.push(c.id)))}),r.forEach(o=>{this.isLocalStorageAvailable()&&localStorage.removeItem(this.getMessagesKey(o))});const a=e.filter(o=>!r.includes(o.id));this.saveSessions(a),console.log(`[ChatHistory] Cleaned up ${r.length} old sessions`)}notifyUpdate(){window.dispatchEvent(new CustomEvent("agent-chat-history-updated"))}getSessionWithMessages(e){const s=this.getSession(e);return s?{...s,messages:this.getMessages(e)}:null}}const chatHistoryRepository=ChatHistoryRepository.getInstance();function useChatHistory({agentId:t,userId:e,enabled:s=!0}){const[r,a]=reactExports.useState([]),[o,l]=reactExports.useState(null),[c,u]=reactExports.useState(!0),[f,d]=reactExports.useState(!1),p=reactExports.useRef(null),m=reactExports.useRef(e);reactExports.useEffect(()=>{p.current=o},[o]),reactExports.useEffect(()=>{m.current=e},[e]),reactExports.useEffect(()=>{if(!s){u(!1);return}(()=>{const ee=chatHistoryRepository.getSessionsForAgent(t,e);a(ee),u(!1),l(null)})();const V=()=>{const ee=chatHistoryRepository.getSessionsForAgent(t,e);a(ee)};return window.addEventListener("agent-chat-history-updated",V),window.addEventListener("agent-chat-history-synced",V),()=>{window.removeEventListener("agent-chat-history-updated",V),window.removeEventListener("agent-chat-history-synced",V)}},[t,e,s]);const y=reactExports.useCallback(()=>{if(!m.current)return null;const q=chatHistoryRepository.createSession(t,m.current);return l(q),a(V=>[q,...V]),q},[t]),b=reactExports.useCallback(q=>{const V=chatHistoryRepository.getSessionWithMessages(q);return V?(l(V),V.messages):[]},[]),E=reactExports.useCallback(q=>{chatHistoryRepository.deleteSession(q),a(V=>V.filter(ee=>ee.id!==q)),p.current?.id===q&&l(null)},[]),C=reactExports.useCallback(()=>{chatHistoryRepository.deleteAllSessionsForAgent(t,m.current),a([]),l(null)},[t]),j=reactExports.useCallback(()=>{d(!0),setTimeout(()=>d(!1),2e3)},[]),B=reactExports.useCallback(()=>{l(null)},[]),D=reactExports.useCallback(q=>{if(!s||!m.current)return;const V=q.filter(Q=>Q.id!=="greeting"&&Q.content.trim());if(V.length===0)return;let ee=p.current;if(!ee){const Q=V.find(W=>W.role==="user");ee=chatHistoryRepository.createSession(t,m.current,Q),l(ee),a(W=>W.some(Z=>Z.id===ee.id)?W:[ee,...W])}chatHistoryRepository.saveMessages(ee.id,V),l(Q=>Q?{...Q,messageCount:V.length,updatedAt:Date.now()}:null)},[t,s]),F=reactExports.useCallback(q=>chatHistoryRepository.searchSessions(q,t,m.current),[t]);return{sessions:r,currentSession:o,createNewSession:y,loadSession:b,deleteSession:E,clearAllHistory:C,resetCurrentSession:B,showDeleteSuccess:j,saveCurrentMessages:D,searchSessions:F,isLoading:c,justDeleted:f}}const sessionKeys={all:["agent-session"],session:t=>[...sessionKeys.all,t]};function useUrlSession({sessions:t}){const e=useQueryClient(),[s,r]=useSearchParams(),a=s.get("session"),o=reactExports.useMemo(()=>a?t.some(m=>m.id===a):!1,[a,t]),{data:l,isLoading:c}=useQuery({queryKey:sessionKeys.session(a||""),queryFn:()=>{if(!a)return null;const m=chatHistoryRepository.getSessionWithMessages(a);return m?{session:m,messages:m.messages}:null},enabled:!!a&&o,staleTime:1/0,gcTime:300*1e3}),u=reactExports.useCallback(m=>{const y=chatHistoryRepository.getSessionWithMessages(m);y&&e.setQueryData(sessionKeys.session(m),{session:y,messages:y.messages}),r({session:m},{replace:!0})},[e,r]),f=reactExports.useCallback(()=>{r({},{replace:!0})},[r]),d=reactExports.useCallback(m=>{e.invalidateQueries({queryKey:sessionKeys.session(m)})},[e]),p=reactExports.useCallback((m,y)=>{e.setQueryData(sessionKeys.session(m),b=>b&&{...b,messages:y,session:{...b.session,messageCount:y.length,updatedAt:Date.now()}})},[e]);return{urlSessionId:a,currentSession:l?.session??null,currentMessages:l?.messages??[],isLoading:c,navigateToSession:u,clearSession:f,invalidateSession:d,updateSessionCache:p}}function useMentionNavigation(){const t=useNavigate();reactExports.useEffect(()=>(setMentionClickHandler(s=>{const r=s.startsWith("@")?s:`@${s}`;t(`/agents/chat?nametag=${encodeURIComponent(r)}`)}),()=>{setMentionClickHandler(null)}),[t])}function AgentChat({agent:t,getMockResponse:e,processMessage:s,renderMessageCard:r,actionConfig:a,renderMessageActions:o,additionalContent:l,bgGradient:c={from:"bg-indigo-500/5",to:"bg-cyan-500/5"},sidebarConfig:u}){const[f,d]=reactExports.useState(""),[p,m]=reactExports.useState([]),[y,b]=reactExports.useState(null),[E,C]=reactExports.useState(!1),[j,B]=reactExports.useState(!1),[D,F]=reactExports.useState(!1),[q,V]=reactExports.useState("history"),[ee,Q]=reactExports.useState(!1),[W,Z]=reactExports.useState(""),[z,O]=reactExports.useState(null),[k,v]=reactExports.useState(!1),{isFullscreen:S,setFullscreen:N}=useUIState();useMentionNavigation(),reactExports.useEffect(()=>{const Pe=Qe=>{Qe.key==="Escape"&&S&&N(!1)};return document.addEventListener("keydown",Pe),()=>document.removeEventListener("keydown",Pe)},[S,N]);const R=reactExports.useRef(null),T=reactExports.useRef(null),M=reactExports.useRef(!1),I=reactExports.useRef(t.id),$=reactExports.useRef(null),A=reactExports.useRef(""),L=reactExports.useRef(!0),{nametag:Y}=useIdentity(),{sessions:oe,currentSession:J,loadSession:U,deleteSession:G,clearAllHistory:ae,resetCurrentSession:he,showDeleteSuccess:le,saveCurrentMessages:te,searchSessions:pe,justDeleted:xe}=useChatHistory({agentId:t.id,userId:Y??void 0,enabled:!!Y}),{urlSessionId:be,currentSession:ce,currentMessages:re,navigateToSession:ie,clearSession:fe}=useUrlSession({sessions:oe});reactExports.useEffect(()=>{J?.id&&J.id!==be&&ie(J.id)},[J?.id,be,ie]);const ye=W.trim()?pe(W):oe,{messages:we,setMessages:Re,isStreaming:Me,currentStatus:ke,sendMessage:Le,stopGeneration:Fe,agentMode:Te}=useAgentChat({activityId:t.backendActivityId||t.id,userId:Y??void 0}),Be=e&&!t.backendActivityId||Te==="mock",ze=Be?E:Me,de=async(Pe,Qe)=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(Pe);else{const Ze=document.createElement("textarea");Ze.value=Pe,Ze.style.position="fixed",Ze.style.left="-9999px",document.body.appendChild(Ze),Ze.select(),document.execCommand("copy"),document.body.removeChild(Ze)}b(Qe),setTimeout(()=>b(null),2e3)}catch{console.warn("Failed to copy text")}};reactExports.useEffect(()=>(L.current=!0,()=>{L.current=!1}),[]),reactExports.useEffect(()=>{I.current!==t.id&&(I.current=t.id,m([]),d(""),M.current=!1,A.current="",Be||Re([]))},[t.id,Re,Be]),reactExports.useEffect(()=>{$.current!==Y&&($.current=Y??null,m([]),d(""),M.current=!1,A.current="",Be||Re([]))},[Y,Re,Be]),reactExports.useEffect(()=>{if(!be||re.length===0)return;const Pe=re.map(Qe=>({id:Qe.id,role:Qe.role,content:Qe.content,timestamp:Qe.timestamp,thinking:Qe.thinking}));m(Pe),Be||Re(re),M.current=!0,A.current=JSON.stringify(re.map(Qe=>({id:Qe.id,content:Qe.content})))},[be,re,Re,Be]),reactExports.useEffect(()=>{Be||m(Pe=>we.map(Ze=>{const Ye=Pe.find(it=>it.id===Ze.id),at={...Ze,cardData:Ye?.cardData,showActionButton:Ye?.showActionButton};return s?s(at,Pe):at}))},[we,Be,s]),reactExports.useEffect(()=>{if(ze)return;const Pe=p.filter(Ye=>Ye.id!=="greeting"&&Ye.content.trim());if(Pe.length===0)return;const Qe=JSON.stringify(Pe.map(Ye=>({id:Ye.id,content:Ye.content})));if(Qe===A.current)return;const Ze=setTimeout(()=>{const Ye=Pe.map(at=>({id:at.id,role:at.role,content:at.content,timestamp:at.timestamp,thinking:at.thinking}));te(Ye),A.current=Qe},1e3);return()=>clearTimeout(Ze)},[p,ze,te]),reactExports.useEffect(()=>{!M.current&&p.length===0&&t.greetingMessage&&!be&&(M.current=!0,Be?m([{id:"greeting",role:"assistant",content:t.greetingMessage,timestamp:Date.now()}]):Re([{id:"greeting",role:"assistant",content:t.greetingMessage,timestamp:Date.now()}]))},[t.greetingMessage,p.length,Re,Be,be]);const ne=reactExports.useCallback((Pe=!1)=>{const Qe=R.current;Qe&&Qe.scrollTo({top:Qe.scrollHeight,behavior:Pe?"instant":"smooth"})},[]);reactExports.useEffect(()=>{ne()},[p,ze,ne]),reactExports.useEffect(()=>{!ze&&window.innerWidth>=1024&&T.current?.focus({preventScroll:!0})},[ze]),reactExports.useEffect(()=>{const Pe=T.current;if(!Pe)return;const Qe=()=>{window.innerWidth<1024&&setTimeout(()=>{ne(!0)},300)};return Pe.addEventListener("focus",Qe),()=>Pe.removeEventListener("focus",Qe)},[ne]);const se=(Pe,Qe,Ze)=>{m(Ye=>[...Ye,{id:v4(),role:"assistant",content:Pe,timestamp:Date.now(),cardData:Qe,showActionButton:Ze}])},me=async Pe=>{const Qe=Pe||f;if(!Qe.trim()||ze)return;const Ze=Qe.toLowerCase();d(""),window.innerWidth>=1024&&setTimeout(()=>{T.current?.focus({preventScroll:!0})},0),Be&&e?(m(Ye=>[...Ye,{id:v4(),role:"user",content:Qe,timestamp:Date.now()}]),C(!0),await e(Ze,se),C(!1)):await Le(Qe)},Ee=Pe=>{Pe.key==="Enter"&&!Pe.shiftKey&&(Pe.preventDefault(),me())},_e=Pe=>{ze||me(Pe)},ve=Pe=>{a&&a.onAction(Pe)},Ae=()=>{m([]),Be||Re([]),M.current=!1,A.current="",he(),fe()},Oe=reactExports.useCallback(Pe=>{U(Pe),ie(Pe),B(!1)},[U,ie]),Ue=async Pe=>{const Qe=ce?.id===Pe;G(Pe),O(null),Qe&&Ae(),le()},Ke=()=>{ae(),v(!1),Ae(),le()},We=Pe=>a?typeof a.label=="function"?a.label(Pe):a.label:"",Ve=Pe=>{const Ze=Date.now()-Pe,Ye=Math.floor(Ze/6e4),at=Math.floor(Ze/36e5),it=Math.floor(Ze/864e5);return Ye<1?"Just now":Ye<60?`${Ye}m ago`:at<24?`${at}h ago`:it<7?`${it}d ago`:new Date(Pe).toLocaleDateString()},xt=()=>xe?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-green-500 px-2 py-1 rounded-lg bg-neutral-100 dark:bg-neutral-800/50",children:[jsxRuntimeExports.jsx(Check,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:"Successfully deleted"})]}):null,lt=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AnimatePresence,{children:j&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"lg:hidden absolute inset-0 bg-black/50 z-40 rounded-3xl",onClick:()=>B(!1)})}),jsxRuntimeExports.jsxs("div",{className:`
          w-64 border-r border-neutral-200 dark:border-neutral-800/50 flex flex-col z-50 overflow-hidden
          absolute lg:relative inset-y-0 left-0
          transform transition-all duration-300 ease-in-out
          ${j?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          ${D?"lg:w-0 lg:border-0 lg:min-w-0":"lg:w-64"}
          bg-white/95 dark:bg-neutral-900/95 lg:bg-transparent dark:lg:bg-transparent backdrop-blur-xl lg:backdrop-blur-none rounded-l-3xl lg:rounded-none
        `,children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-neutral-200 dark:border-neutral-800/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Q(!ee),className:"text-neutral-900 dark:text-white font-medium flex items-center gap-2 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors",children:[q==="history"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"Chat History"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Activity,{className:"w-4 h-4"}),u.title]}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 transition-transform ${ee?"rotate-180":""}`})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:ee&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"absolute top-full left-0 mt-1 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg overflow-hidden z-10 min-w-40",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{V("history"),Q(!1)},className:`w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors ${q==="history"?"bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-neutral-700/50"}`,children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"Chat History"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{V("activity"),Q(!1)},className:`w-full px-3 py-2 text-sm text-left flex items-center gap-2 transition-colors ${q==="activity"?"bg-neutral-100 dark:bg-neutral-700 text-neutral-900 dark:text-white":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-50 dark:hover:bg-neutral-700/50"}`,children:[jsxRuntimeExports.jsx(Activity,{className:"w-4 h-4"}),u.title]})]})})]}):jsxRuntimeExports.jsxs("h3",{className:"text-neutral-900 dark:text-white font-medium flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"Chat History"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[q==="history"&&jsxRuntimeExports.jsx(motion.button,{onClick:Ae,className:`p-2 rounded-lg bg-linear-to-br ${t.color} text-white`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"New chat",children:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>F(!0),className:"hidden lg:flex p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",title:"Collapse sidebar",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(PanelLeftClose,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(motion.button,{onClick:()=>B(!1),className:"lg:hidden p-2 rounded-lg bg-neutral-100 dark:bg-neutral-800/50 text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})]}),(!u||q==="history")&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:W,onChange:Pe=>Z(Pe.target.value),placeholder:"Search history...",className:"w-full pl-9 pr-3 py-2 bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50 rounded-lg text-sm text-neutral-900 dark:text-white placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-neutral-300 dark:focus:ring-neutral-600"})]})]}),(!u||q==="history")&&jsxRuntimeExports.jsx("div",{className:"px-3 py-2 border-b border-neutral-200 dark:border-neutral-800/50",children:xt()}),!u||q==="history"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:ye.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center text-neutral-500 py-8",children:[jsxRuntimeExports.jsx(MessageSquare,{className:"w-8 h-8 mx-auto opacity-50 mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:W?"No matching conversations":"No chat history yet"})]}):ye.map(Pe=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`
                        p-3 rounded-xl cursor-pointer transition-colors group relative
                        ${ce?.id===Pe.id?"bg-neutral-200 dark:bg-neutral-700/50 border border-neutral-300 dark:border-neutral-600":"bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/30 hover:bg-neutral-200 dark:hover:bg-neutral-700/50"}
                      `,onClick:()=>Oe(Pe.id),children:[jsxRuntimeExports.jsxs("div",{className:"pr-8",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white text-sm font-medium truncate",children:Pe.title}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 text-xs truncate mt-1",children:Pe.preview||"No preview"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-neutral-400",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:Ve(Pe.updatedAt)}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsxs("span",{children:[Pe.messageCount," messages"]})]})]}),jsxRuntimeExports.jsx(motion.button,{onClick:Qe=>{Qe.stopPropagation(),O(Pe.id)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-lg opacity-0 group-hover:opacity-100 text-neutral-400 hover:text-red-500 hover:bg-red-500/10 transition-all",whileHover:{scale:1.1},whileTap:{scale:.9},children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]},Pe.id))}),oe.length>0&&jsxRuntimeExports.jsx("div",{className:"p-3 border-t border-neutral-200 dark:border-neutral-800/50",children:jsxRuntimeExports.jsxs("button",{onClick:()=>v(!0),className:"w-full py-2 px-3 rounded-lg text-sm text-red-500 hover:bg-red-500/10 transition-colors flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"}),"Clear all history"]})})]}):jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:u.items.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center text-neutral-500 py-8",children:[u.emptyIcon||jsxRuntimeExports.jsx(Activity,{className:"w-8 h-8 mx-auto opacity-50 mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:u.emptyText})]}):u.items.map(Pe=>jsxRuntimeExports.jsx("div",{children:u.renderItem(Pe,()=>u.onItemClick?.(Pe))},Pe.id))})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:z&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-60 p-4",onClick:()=>O(null),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-2xl p-6 max-w-sm w-full shadow-xl",onClick:Pe=>Pe.stopPropagation(),children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white mb-2",children:"Delete conversation?"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-6",children:"This action cannot be undone."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>O(null),className:"flex-1 py-2 px-4 rounded-lg bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white font-medium border border-neutral-200 dark:border-neutral-700",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:()=>Ue(z),className:"flex-1 py-2 px-4 rounded-lg bg-red-500 text-white font-medium",children:"Delete"})]})]})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:k&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-60 p-4",onClick:()=>v(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-2xl p-6 max-w-sm w-full shadow-xl",onClick:Pe=>Pe.stopPropagation(),children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white mb-2",children:"Clear all history?"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-6",children:["This will delete all ",oe.length," conversations. This action cannot be undone."]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>v(!1),className:"flex-1 py-2 px-4 rounded-lg bg-neutral-100 dark:bg-neutral-800 text-neutral-900 dark:text-white font-medium border border-neutral-200 dark:border-neutral-700",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:Ke,className:"flex-1 py-2 px-4 rounded-lg bg-red-500 text-white font-medium",children:"Clear all"})]})]})})})]}),Xe=()=>jsxRuntimeExports.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] z-10 h-full min-h-0",children:[jsxRuntimeExports.jsx(ChatHeader,{agent:t,onToggleSidebar:()=>B(!0),onExpandSidebar:()=>F(!1),showMenuButton:!0,sidebarCollapsed:D,isFullscreen:S,onToggleFullscreen:()=>N(!S)}),jsxRuntimeExports.jsxs("div",{ref:R,className:"overflow-y-auto p-4 space-y-4 min-h-0",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:xe&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-500/10 border border-green-500/20 rounded-xl text-green-600 dark:text-green-400 text-sm font-medium",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4"}),"Successfully deleted"]})}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,children:p.map(Pe=>{const Qe=Pe.id===p[p.length-1]?.id,Ze=ze&&Qe;return jsxRuntimeExports.jsxs(ChatBubble,{role:Pe.role,content:Pe.content,agentName:t.name,agentColor:t.color,thinking:Pe.thinking,showCopy:!0,isCopied:y===Pe.id,onCopy:()=>de(Pe.content,Pe.id),isStreaming:Ze,currentStatus:Ze?ke:null,children:[Pe.cardData&&r&&r(Pe.cardData,Pe),o&&o(Pe),Pe.showActionButton&&Pe.cardData&&a&&jsxRuntimeExports.jsx(motion.button,{onClick:()=>ve(Pe.cardData),className:`mt-2 w-full py-3 rounded-xl bg-linear-to-r ${t.color} text-white font-medium`,whileHover:{scale:1.02},whileTap:{scale:.98},children:We(Pe.cardData)})]},Pe.id)})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/95 dark:bg-neutral-900/95 backdrop-blur-sm theme-transition",children:[t.quickActions&&jsxRuntimeExports.jsx(QuickActions,{actions:t.quickActions,onAction:_e,disabled:ze}),jsxRuntimeExports.jsx(ChatInput,{ref:T,value:f,onChange:d,onSend:()=>me(),onKeyDown:Ee,placeholder:t.placeholder||`Message ${t.name}...`,disabled:Be?E:!1,isStreaming:!Be&&Me,onStop:Be?void 0:Fe,agentColor:t.color})]})]}),St=jsxRuntimeExports.jsxs("div",{className:"bg-white/60 dark:bg-neutral-900/70 backdrop-blur-xl rounded-3xl border border-neutral-200 dark:border-neutral-800/50 overflow-hidden relative lg:grid lg:grid-cols-[auto_1fr] lg:shadow-xl dark:lg:shadow-2xl h-full min-h-0 theme-transition",children:[jsxRuntimeExports.jsx("div",{className:`absolute -top-20 -right-20 w-96 h-96 ${c.from} rounded-full blur-3xl`}),jsxRuntimeExports.jsx("div",{className:`absolute -bottom-20 -left-20 w-96 h-96 ${c.to} rounded-full blur-3xl`}),lt(),Xe()]}),ct=reactDomExports.createPortal(jsxRuntimeExports.jsx(AnimatePresence,{children:S&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},transition:{duration:.5,ease:[.32,.72,0,1]},className:"fixed top-14 left-0 right-0 bottom-0 z-99999 bg-white dark:bg-neutral-900",children:jsxRuntimeExports.jsxs("div",{className:"h-full w-full lg:grid lg:grid-cols-[auto_1fr] overflow-hidden relative",children:[jsxRuntimeExports.jsx("div",{className:`absolute -top-20 -right-20 w-96 h-96 ${c.from} rounded-full blur-3xl pointer-events-none`}),jsxRuntimeExports.jsx("div",{className:`absolute -bottom-20 -left-20 w-96 h-96 ${c.to} rounded-full blur-3xl pointer-events-none`}),lt(),Xe()]})})}),document.body);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!S&&St,ct,S?reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-100000 pointer-events-none *:pointer-events-auto",children:l}),document.body):l]})}function SportChat({agent:t}){const[e,s]=reactExports.useState(!1),[r,a]=reactExports.useState(null),[o,l]=reactExports.useState(null),[c,u]=reactExports.useState("10"),[f,d]=reactExports.useState("confirm"),p=async(E,C)=>{if(await new Promise(j=>setTimeout(j,1e3)),E.includes("match")||E.includes("football")||E.includes("bet")||E.includes("game")){const j=mockMatches[Math.floor(Math.random()*mockMatches.length)];C(`Great choice! Here's an upcoming match:

${j.team1Flag} **${j.team1}** vs **${j.team2}** ${j.team2Flag}

**Date:** ${j.date} at ${j.time}

**Odds:**
- ${j.team1} wins: ${j.odds1}
- Draw: ${j.oddsDraw}
- ${j.team2} wins: ${j.odds2}

Would you like to place a bet on this match?`,{match:j},!0)}else if(E.includes("hello")||E.includes("hi"))C("Hey there! Ready to place some bets? Tell me what sport or match you're interested in!");else{const j=mockMatches[0];C(`I found a great match for you!

${j.team1Flag} **${j.team1}** vs **${j.team2}** ${j.team2Flag}

**Date:** ${j.date} at ${j.time}

**Odds:**
- ${j.team1} wins: ${j.odds1}
- Draw: ${j.oddsDraw}
- ${j.team2} wins: ${j.odds2}

Click the button below to place your bet!`,{match:j},!0)}},m=E=>{a(E.match),l({choice:E.match.team1,odds:E.match.odds1}),u("10"),d("confirm"),s(!0)},y=async()=>{!r||!o||(d("processing"),await new Promise(E=>setTimeout(E,2e3)),d("success"),recordActivity("bet_placed",{isPublic:!0,data:{matchId:r.id,teams:`${r.team1} vs ${r.team2}`,betChoice:o.choice,odds:o.odds,amount:parseFloat(c),currency:"USDT"}}),await new Promise(E=>setTimeout(E,1500)),s(!1),a(null),l(null))},b=(E,C)=>{l({choice:E,odds:C})};return jsxRuntimeExports.jsx(AgentChat,{agent:t,getMockResponse:p,renderMessageCard:E=>jsxRuntimeExports.jsxs("div",{className:"mt-4 rounded-xl overflow-hidden border border-neutral-300 dark:border-neutral-600/50",children:[jsxRuntimeExports.jsx("img",{src:E.match.image,alt:"Match",className:"w-full h-32 object-cover"}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-900/80",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-lg font-medium text-neutral-900 dark:text-white",children:[jsxRuntimeExports.jsxs("span",{children:[E.match.team1Flag," ",E.match.team1]}),jsxRuntimeExports.jsx("span",{className:"text-neutral-500",children:"vs"}),jsxRuntimeExports.jsxs("span",{children:[E.match.team2," ",E.match.team2Flag]})]}),jsxRuntimeExports.jsxs("p",{className:"text-center text-neutral-500 dark:text-neutral-400 text-sm mt-1",children:[E.match.date," - ",E.match.time]})]})]}),actionConfig:{label:"Place Bet",onAction:m},bgGradient:{from:"bg-emerald-500/5",to:"bg-teal-500/5"},additionalContent:jsxRuntimeExports.jsx(AnimatePresence,{children:e&&r&&o&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>f==="confirm"&&s(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:E=>E.stopPropagation(),children:[f==="confirm"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Confirm Bet"}),jsxRuntimeExports.jsx("button",{onClick:()=>s(!1),className:"text-neutral-400 hover:text-neutral-900 dark:hover:text-white",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-xl overflow-hidden border border-neutral-200 dark:border-neutral-700 mb-4",children:[jsxRuntimeExports.jsx("img",{src:r.image,alt:"",className:"w-full h-24 object-cover"}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-800",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between font-medium text-neutral-900 dark:text-white",children:[jsxRuntimeExports.jsxs("span",{children:[r.team1Flag," ",r.team1]}),jsxRuntimeExports.jsx("span",{className:"text-neutral-500",children:"vs"}),jsxRuntimeExports.jsxs("span",{children:[r.team2," ",r.team2Flag]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-2 block",children:"Select your bet:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>b(r.team1,r.odds1),className:`p-3 rounded-lg border text-center transition-all ${o.choice===r.team1?"border-emerald-500 bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:border-neutral-300 dark:hover:border-neutral-600"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-sm",children:r.team1}),jsxRuntimeExports.jsx("div",{className:"text-lg font-bold",children:r.odds1})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>b("Draw",r.oddsDraw),className:`p-3 rounded-lg border text-center transition-all ${o.choice==="Draw"?"border-emerald-500 bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:border-neutral-300 dark:hover:border-neutral-600"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-sm",children:"Draw"}),jsxRuntimeExports.jsx("div",{className:"text-lg font-bold",children:r.oddsDraw})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>b(r.team2,r.odds2),className:`p-3 rounded-lg border text-center transition-all ${o.choice===r.team2?"border-emerald-500 bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:border-neutral-300 dark:hover:border-neutral-600"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-sm",children:r.team2}),jsxRuntimeExports.jsx("div",{className:"text-lg font-bold",children:r.odds2})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-2 block",children:"Bet amount (USDT):"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["5","10","25","50","100"].map(E=>jsxRuntimeExports.jsx("button",{onClick:()=>u(E),className:`flex-1 py-2 rounded-lg border transition-all ${c===E?"border-emerald-500 bg-emerald-500/20 text-emerald-600 dark:text-emerald-400":"border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:border-neutral-300 dark:hover:border-neutral-600"}`,children:E},E))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800 rounded-xl p-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-neutral-500 dark:text-neutral-400 mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Your bet:"}),jsxRuntimeExports.jsxs("span",{className:"text-neutral-900 dark:text-white",children:[c," USDT"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-neutral-500 dark:text-neutral-400",children:[jsxRuntimeExports.jsx("span",{children:"Potential win:"}),jsxRuntimeExports.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 font-bold",children:[(parseFloat(c)*o.odds).toFixed(2)," USDT"]})]})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:y,className:"w-full py-4 rounded-xl bg-linear-to-r from-emerald-500 to-teal-500 text-white font-bold flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx(Wallet,{className:"w-5 h-5"}),"Confirm & Pay"]})]}),f==="processing"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-500/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(Wallet,{className:"w-8 h-8 text-emerald-600 dark:text-emerald-500"})})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Processing Transaction"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Please wait while we confirm your bet..."})]}),f==="success"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Bet Placed!"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Good luck with your bet!"})]})]})})})})}function P2PChat({agent:t}){const e=useNavigate(),[s,r]=reactExports.useState(!1),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState("confirm"),u=(m,y,b,E,C)=>{const j=new URLSearchParams({nametag:m.name,...y&&{product:y},...b&&{image:b},...E&&{price:E.toString()},...C});e(`/agents/chat?${j.toString()}`)},f=async(m,y)=>{if(await new Promise(b=>setTimeout(b,800)),m.includes("sofa")||m.includes("couch")||m.includes("furniture")){const b=p2pListings[0];y(`Found a great deal!

**${b.name}**
${b.description}

**Seller:** ${b.seller.name}
**Location:** ${b.location}
**Price:** $${b.price}

Interested?`,{title:b.name,image:b.image,price:b.price,description:b.description,seller:b.seller},!0)}else if(m.includes("phone")||m.includes("iphone")||m.includes("mobile")){const b=p2pListings[1];y(`Check this out!

**${b.name}**
${b.description}

**Seller:** ${b.seller.name}
**Location:** ${b.location}
**Price:** $${b.price}

Want to buy?`,{title:b.name,image:b.image,price:b.price,description:b.description,seller:b.seller},!0)}else if(m.includes("bike")||m.includes("bicycle")){const b=p2pListings[2];y(`Perfect for you!

**${b.name}**
${b.description}

**Seller:** ${b.seller.name}
**Location:** ${b.location}
**Price:** $${b.price}

Ready to ride?`,{title:b.name,image:b.image,price:b.price,description:b.description,seller:b.seller},!0)}else if(m.includes("pc")||m.includes("computer")||m.includes("gaming")){const b=p2pListings[3];y(`Beast machine!

**${b.name}**
${b.description}

**Seller:** ${b.seller.name}
**Location:** ${b.location}
**Price:** $${b.price}

Level up?`,{title:b.name,image:b.image,price:b.price,description:b.description,seller:b.seller},!0)}else m.includes("available")||m.includes("show")||m.includes("what")||m.includes("list")?y(`Here's what people are selling:

`+p2pListings.map(b=>`- **${b.name}** - $${b.price} (${b.seller.name})`).join(`
`)+`

Ask me about any item!`):y(`I can help you find great deals!

Try asking for:
- Furniture (sofas, chairs)
- Electronics (phones, computers)
- Sports equipment (bikes)

Or say "What's available?" to browse!`)},d=m=>{o(m),c("confirm"),r(!0)},p=async()=>{a&&(c("processing"),await new Promise(m=>setTimeout(m,2e3)),c("success"),recordActivity("otc_purchase",{isPublic:!0,data:{productName:a.title,price:a.price,sellerName:a.seller.name}}),await new Promise(m=>setTimeout(m,1500)),r(!1),o(null))};return jsxRuntimeExports.jsx(AgentChat,{agent:t,getMockResponse:f,renderMessageCard:m=>jsxRuntimeExports.jsx("div",{className:"mt-4 rounded-xl overflow-hidden border border-neutral-300 dark:border-neutral-600/50",children:jsxRuntimeExports.jsx("img",{src:m.image,alt:"",className:"w-full h-28 object-cover"})}),renderMessageActions:m=>m.cardData?.seller?jsxRuntimeExports.jsxs(motion.button,{onClick:()=>u(m.cardData.seller,m.cardData.title,m.cardData.image,m.cardData.price),className:"mt-3 w-full py-2 rounded-xl bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 text-sm font-medium flex items-center justify-center gap-2 border border-blue-500/30",whileHover:{scale:1.01},whileTap:{scale:.99},children:[jsxRuntimeExports.jsx(MessageSquare,{className:"w-4 h-4"}),"Contact ",m.cardData.seller.name]}):null,actionConfig:{label:m=>`Buy Now - $${m.price}`,onAction:d},bgGradient:{from:"bg-orange-500/5",to:"bg-red-500/5"},additionalContent:jsxRuntimeExports.jsx(AnimatePresence,{children:s&&a&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>l==="confirm"&&r(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:m=>m.stopPropagation(),children:[l==="confirm"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Confirm Purchase"}),jsxRuntimeExports.jsx("button",{onClick:()=>r(!1),className:"text-neutral-400 hover:text-neutral-900 dark:hover:text-white",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-xl overflow-hidden border border-neutral-200 dark:border-neutral-700 mb-4",children:[jsxRuntimeExports.jsx("img",{src:a.image,alt:"",className:"w-full h-32 object-cover"}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-neutral-100 dark:bg-neutral-800",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white font-medium",children:a.title}),a.description&&jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mt-1",children:a.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-3 p-2 bg-neutral-200 dark:bg-neutral-700/50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs font-medium",children:a.seller.avatar}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white text-sm font-medium",children:a.seller.name}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:"Seller"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-orange-600 dark:text-orange-400 text-lg font-bold mt-3",children:["$",a.price]})]})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:p,className:`w-full py-4 rounded-xl bg-linear-to-r ${t.color} text-white font-bold flex items-center justify-center gap-2`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx(Wallet,{className:"w-5 h-5"}),"Confirm & Pay"]})]}),l==="processing"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-orange-500/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(Wallet,{className:"w-8 h-8 text-orange-600 dark:text-orange-500"})})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Processing"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Contacting seller..."})]}),l==="success"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Seller Notified!"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"They will contact you soon."})]})]})})})})}function MerchChat({agent:t}){const[e,s]=reactExports.useState(!1),[r,a]=reactExports.useState(null),[o,l]=reactExports.useState("confirm"),c=async(d,p)=>{if(await new Promise(m=>setTimeout(m,800)),d.includes("hoodie")||d.includes("sweatshirt")){const m=merchItems[0];p(`Great choice!

**${m.name}**
${m.description}

**Sizes:** ${m.sizes.join(", ")}
**Price:** $${m.price}

Our bestseller!`,{title:m.name,image:m.image,price:m.price,description:m.description},!0)}else if(d.includes("shirt")||d.includes("tee")){const m=merchItems[1];p(`Classic style!

**${m.name}**
${m.description}

**Sizes:** ${m.sizes.join(", ")}
**Price:** $${m.price}

Comfortable and stylish!`,{title:m.name,image:m.image,price:m.price,description:m.description},!0)}else if(d.includes("cap")||d.includes("hat")){const m=merchItems[2];p(`Looking sharp!

**${m.name}**
${m.description}

**Size:** ${m.sizes.join(", ")}
**Price:** $${m.price}`,{title:m.name,image:m.image,price:m.price,description:m.description},!0)}else if(d.includes("mug")||d.includes("cup")){const m=merchItems[3];p(`For your coding sessions!

**${m.name}**
${m.description}

**Price:** $${m.price}

The logo changes color with hot drinks!`,{title:m.name,image:m.image,price:m.price,description:m.description},!0)}else d.includes("store")||d.includes("show")||d.includes("what")||d.includes("all")||d.includes("available")?p(`Here's our collection:

`+merchItems.map(m=>`- **${m.name}** - $${m.price}`).join(`
`)+`

Ask me about any item for details!`):d.includes("test")||d.includes("image")||d.includes("base64")?p(`**Test: Base64 Image in Markdown**

Here's an image rendered from base64:

![Sphere Logo](`+"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM4QjVDRjYiLz48c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI0VDNDg5OSIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0Y5NzMxNiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJ1cmwoI2cpIiByeD0iMTIiLz48dGV4dCB4PSIxMDAiIHk9IjU1IiBmb250LWZhbWlseT0ic3lzdGVtLXVpIiBmb250LXNpemU9IjIwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlNwaGVyZTwvdGV4dD48L3N2Zz4="+")\n\nThis works with any `data:image/...;base64,...` URL!"):p(`I can help you find the perfect merch!

We have:
- Clothing (hoodies, t-shirts)
- Accessories (caps, mugs)

Just tell me what you're looking for!`)},u=d=>{a(d),l("confirm"),s(!0)},f=async()=>{r&&(l("processing"),await new Promise(d=>setTimeout(d,2e3)),l("success"),recordActivity("merch_order",{isPublic:!0,data:{itemName:r.title,price:r.price}}),await new Promise(d=>setTimeout(d,1500)),s(!1),a(null))};return jsxRuntimeExports.jsx(AgentChat,{agent:t,getMockResponse:c,renderMessageCard:d=>jsxRuntimeExports.jsx("div",{className:"mt-4 rounded-xl overflow-hidden border border-neutral-300 dark:border-neutral-600/50",children:jsxRuntimeExports.jsx("img",{src:d.image,alt:"",className:"w-full h-28 object-cover"})}),actionConfig:{label:d=>`Order Now - $${d.price}`,onAction:u},bgGradient:{from:"bg-purple-500/5",to:"bg-pink-500/5"},additionalContent:jsxRuntimeExports.jsx(AnimatePresence,{children:e&&r&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>o==="confirm"&&s(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:d=>d.stopPropagation(),children:[o==="confirm"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Confirm Order"}),jsxRuntimeExports.jsx("button",{onClick:()=>s(!1),className:"text-neutral-400 hover:text-neutral-900 dark:hover:text-white",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-xl overflow-hidden border border-neutral-200 dark:border-neutral-700 mb-4",children:[jsxRuntimeExports.jsx("img",{src:r.image,alt:"",className:"w-full h-32 object-cover"}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-neutral-100 dark:bg-neutral-800",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white font-medium",children:r.title}),r.description&&jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mt-1",children:r.description}),jsxRuntimeExports.jsxs("p",{className:"text-purple-600 dark:text-purple-400 text-lg font-bold mt-2",children:["$",r.price]})]})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:f,className:`w-full py-4 rounded-xl bg-linear-to-r ${t.color} text-white font-bold flex items-center justify-center gap-2`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx(Wallet,{className:"w-5 h-5"}),"Confirm & Pay"]})]}),o==="processing"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-purple-500/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(Wallet,{className:"w-8 h-8 text-purple-600 dark:text-purple-500"})})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Processing"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Confirming your order..."})]}),o==="success"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Order Placed!"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Your merch is on the way!"})]})]})})})})}function TriviaChat({agent:t}){return jsxRuntimeExports.jsx(AgentChat,{agent:t,bgGradient:{from:"bg-indigo-500/5",to:"bg-cyan-500/5"}})}function GamesChat({agent:t}){const e=s=>(s.role!=="assistant"||s.cardData,s);return jsxRuntimeExports.jsx(AgentChat,{agent:t,processMessage:e,renderMessageCard:s=>jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-3",children:s.games.map(r=>jsxRuntimeExports.jsxs("div",{className:"rounded-xl overflow-hidden border border-neutral-600/50",children:[jsxRuntimeExports.jsx("img",{src:r.image,alt:r.name,className:"w-full h-28 object-cover"}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-neutral-900/80",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-white",children:r.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-400 mt-1",children:r.description}),jsxRuntimeExports.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",onClick:()=>{recordActivity("game_started",{isPublic:!0,data:{gameName:r.name,gameId:r.id}})},className:`mt-3 inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-linear-to-r ${t.color} text-white text-sm font-medium`,children:["Play Now ",jsxRuntimeExports.jsx(ExternalLink,{className:"w-3 h-3"})]})]})]},r.id))}),bgGradient:{from:"bg-purple-500/5",to:"bg-pink-500/5"}})}function AIChat({agent:t}){return jsxRuntimeExports.jsx(AgentChat,{agent:t,bgGradient:{from:"bg-orange-500/5",to:"bg-amber-500/5"}})}const categories=[{id:"all",label:"All",icon:Sparkles},{id:"gold",label:"Gold",icon:Tag},{id:"tickets",label:"Tickets",icon:Tag},{id:"asics",label:"ASICs",icon:Tag}];function ActivityFeed({activities:t,selectedCategory:e,onCategoryChange:s,onUserClick:r}){const a=e==="all"?t:t.filter(o=>o.category===e);return jsxRuntimeExports.jsxs("div",{className:"mb-4 rounded-xl border border-neutral-200 dark:border-neutral-700/50 bg-neutral-50 dark:bg-neutral-800/30 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-1 p-2 border-b border-neutral-200 dark:border-neutral-700/50 overflow-x-auto scrollbar-hide",children:categories.map(o=>jsxRuntimeExports.jsx("button",{onClick:()=>s(o.id),className:`shrink-0 px-3 py-1.5 rounded-lg text-xs font-medium transition-all ${e===o.id?"bg-teal-500 text-white":"bg-neutral-200 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600"}`,children:o.label},o.id))}),jsxRuntimeExports.jsx("div",{className:"max-h-32 overflow-y-auto",children:a.length===0?jsxRuntimeExports.jsx("div",{className:"p-4 text-center text-neutral-500 dark:text-neutral-400 text-sm",children:"No activity in this category yet"}):jsxRuntimeExports.jsx("div",{className:"divide-y divide-neutral-200 dark:divide-neutral-700/30",children:a.slice(0,5).map(o=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 hover:bg-neutral-100 dark:hover:bg-neutral-700/30 transition-colors cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:`shrink-0 w-6 h-6 rounded-full flex items-center justify-center ${o.type==="buy"?"bg-green-500/20 text-green-500":"bg-orange-500/20 text-orange-500"}`,children:o.type==="buy"?jsxRuntimeExports.jsx(ArrowDownLeft,{className:"w-3.5 h-3.5"}):jsxRuntimeExports.jsx(ArrowUpRight,{className:"w-3.5 h-3.5"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:l=>{l.stopPropagation(),r(o.user)},className:"text-xs font-medium text-teal-600 dark:text-teal-400 hover:underline",children:o.user}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-400",children:o.timestamp})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 truncate",children:o.message})]})]},o.id))})})]})}function SellAnythingChat({agent:t}){const e=useNavigate(),s=Z=>{const z=Z.startsWith("@")?Z:`@${Z}`;e(`/agents/chat?nametag=${encodeURIComponent(z)}`)},[r,a]=reactExports.useState(null),o=reactExports.useRef(!1),l=reactExports.useRef(!1),c=reactExports.useRef(null),[u,f]=reactExports.useState("all"),[d,p]=reactExports.useState(!1),[m,y]=reactExports.useState(null),[b,E]=reactExports.useState("confirm"),[C,j]=reactExports.useState(""),B=Z=>{const z=getMarketplaceListingsByCategory(Z);return r?[...z].sort((O,k)=>{const v=O.location?.toLowerCase().includes(r.toLowerCase())??!1,S=k.location?.toLowerCase().includes(r.toLowerCase())??!1;return v&&!S?-1:!v&&S?1:0}):z},D=Z=>{const z=new URLSearchParams({nametag:Z.seller.name,product:Z.title,image:Z.image,price:Z.price.toString()});e(`/agents/chat?${z.toString()}`)},F=(Z,z)=>{const O=Z.length;if(O===0)return`No ${z} listings available right now.`;if(O===1){const S=Z[0],N=S.verified?" ":"",R=r&&S.location?.toLowerCase().includes(r.split(",")[0].toLowerCase())?" (nearby)":"";return`Found **1 seller** with ${z}:

 ${S.seller.name}${N}${R}  **${S.title}**  ${S.price} ${S.currency}

DM them to discuss!`}const k=Z.slice(0,5).map(S=>{const N=S.verified?" ":"",R=r&&S.location?.toLowerCase().includes(r.split(",")[0].toLowerCase())?" (nearby)":"";return` ${S.seller.name}${N}${R}  **${S.title}**  ${S.price} ${S.currency}`}).join(`
`),v=O>5?`

...and ${O-5} more`:"";return`Found **${O} sellers** with ${z}:

${k}${v}

DM any seller to discuss!`},q=(Z,z)=>{const O=Z.toLowerCase();if(O.includes("gold")||O.includes("silver")||O.includes("pamp")||O.includes("bar")||O.includes("precious")){const S=B("gold");return z(F(S,"gold/precious metals")),!0}if(O.includes("ticket")||O.includes("concert")||O.includes("ufc")||O.includes("world cup")||O.includes("coldplay")||O.includes("event")||O.includes("f1")||O.includes("formula")||O.includes("taylor")||O.includes("nba")||O.includes("champions")){const S=B("tickets");return z(F(S,"tickets")),!0}if(O.includes("asic")||O.includes("antminer")||O.includes("miner")||O.includes("mining")||O.includes("gpu")||O.includes("rig")||O.includes("kaspa")||O.includes("s21")||O.includes("ks5")||O.includes("whatsminer")||O.includes("goldshell")||O.includes("avalon")){const S=B("asics");return z(F(S,"mining hardware")),!0}if(O.includes("phone")||O.includes("iphone")||O.includes("samsung")||O.includes("android")||O.includes("mobile")||O.includes("laptop")||O.includes("macbook")||O.includes("electronics"))return z(`No sellers with phones or electronics right now.

**Available categories:**
- Gold & precious metals
- Event tickets
- Mining hardware (ASICs)

Want me to notify you when electronics appear?`),!0;const k=/(?:buy|want|need|looking for|find|get|purchase|searching for)\s+(?:a\s+|an\s+|some\s+)?(.+)/i,v=O.match(k);if(v){const S=v[1].replace(/[?.!,]+$/,"").trim();if(S&&S.length>1&&S.length<50)return z(`No sellers with **"${S}"** right now.

**Available categories:**
- Gold & precious metals
- Event tickets
- Mining hardware (ASICs)

Want me to watch for "${S}" listings?`),!0}return!1},V=async(Z,z)=>{await new Promise(N=>setTimeout(N,800));const O=Z.toLowerCase(),v=MARKETPLACE_LOCATIONS.map(N=>N.toLowerCase()).find(N=>O.includes(N)||O.includes(N.split(",")[0].toLowerCase()));if(v||O.match(/(?:i(?:'m| am) (?:in|from|at|near)|my location is|location[:\s]+)/i)){const N=v?MARKETPLACE_LOCATIONS.find(R=>R.toLowerCase()===v||R.toLowerCase().startsWith(v.split(",")[0])):null;if(N){if(a(N),o.current=!0,l.current=!1,c.current){const T=c.current;c.current=null,z(`Got it! You're near **${N}**. Let me find what you're looking for...`),await new Promise(I=>setTimeout(I,500)),q(T,z)||z(`I'll prioritize deals from your area.

**Available categories:**
- Gold & precious metals
- Event tickets
- Mining hardware (ASICs)

What would you like to browse?`);return}const R=marketplaceListings.filter(T=>T.location?.toLowerCase().includes(N.toLowerCase())||T.location?.toLowerCase().includes(N.split(",")[0].toLowerCase()));R.length>0?z(`Got it! You're near **${N}**.

I found **${R.length}** listing(s) nearby:

`+R.slice(0,5).map(T=>`- **${T.title}** - ${T.price} ${T.currency}`).join(`
`)+`

What are you looking to buy or sell today?`):z(`Got it! You're near **${N}**.

I'll prioritize deals from your area. What are you looking for?

**Categories:**
- Gold & precious metals
- Event tickets
- Mining hardware (ASICs)`);return}}if(!o.current&&!r){o.current=!0,l.current=!0,c.current=Z,z(`Welcome to the P2P marketplace! Before I help you, let me know your location so I can show nearby deals first.

**Popular locations:**
`+MARKETPLACE_LOCATIONS.slice(0,6).map(N=>`- ${N}`).join(`
`)+`

Just tell me where you're at, or say "skip" to browse everything!`);return}if(l.current&&!r){l.current=!1;const N=Z.trim();if(a(N),c.current){const R=c.current;c.current=null,z(`Got it! I don't have specific listings for **${N}** yet, but I'll show you global deals.

Let me find what you're looking for...`),await new Promise(M=>setTimeout(M,500)),q(R,z)||z(`**Available categories:**
- Gold & precious metals
- Event tickets (UFC, concerts, sports)
- Mining hardware (ASICs, GPUs)

What would you like to browse?`);return}z(`Got it! I don't have specific listings for **${N}** yet, but I can show you global deals.

**Available categories:**
- Gold & precious metals
- Event tickets
- Mining hardware (ASICs)

What are you looking for?`);return}if(O.includes("skip")&&!r){if(l.current=!1,c.current){const N=c.current;c.current=null,z("No problem! I'll show you global deals. Let me find what you're looking for..."),await new Promise(T=>setTimeout(T,500)),q(N,z)||z(`**Available categories:**
- Gold & precious metals
- Event tickets (UFC, concerts, sports)
- Mining hardware (ASICs, GPUs)

Or say "browse" to see everything!`);return}z(`No problem! I'll show you global deals.

What are you interested in?

**Categories:**
- Gold & precious metals
- Event tickets (UFC, concerts, sports)
- Mining hardware (ASICs, GPUs)

Or say "browse" to see everything!`);return}if(q(O,z))return;if(O.includes("sell")||O.includes("selling")||O.includes("have")||O.includes("offering")){z(`Great! To list your item, I need some details:

1. **What are you selling?** (e.g., gold bars, tickets, mining hardware)
2. **Your asking price** (in USDC)`+(r?"":`
3. **Location** (for physical items)`)+`
4. **Description** of the item

Once you provide these, I'll create a listing and broadcast it to potential buyers on the network!`);return}if(O.includes("change location")||O.includes("set location")||O.includes("update location")){o.current=!1,a(null),z(`Sure! What's your new location?

**Popular locations:**
`+MARKETPLACE_LOCATIONS.slice(0,6).map(N=>`- ${N}`).join(`
`));return}if(O.includes("show")||O.includes("browse")||O.includes("list")||O.includes("available")||O.includes("what")){const N=B("gold"),R=B("tickets"),T=B("asics"),M=r?` (showing ${r} deals first)`:"";z(`Here's what's available${M}:

**Gold & Precious Metals:**
`+N.slice(0,3).map(I=>{const $=r&&I.location?.toLowerCase().includes(r.split(",")[0].toLowerCase())?" (Nearby!)":"";return`- ${I.title} - ${I.price} ${I.currency}${$}`}).join(`
`)+`

**Event Tickets:**
`+R.slice(0,3).map(I=>{const $=r&&I.location?.toLowerCase().includes(r.split(",")[0].toLowerCase())?" (Nearby!)":"";return`- ${I.title} - ${I.price} ${I.currency}${$}`}).join(`
`)+`

**Mining Hardware (ASICs):**
`+T.slice(0,3).map(I=>{const $=r&&I.location?.toLowerCase().includes(r.split(",")[0].toLowerCase())?" (Nearby!)":"";return`- ${I.title} - ${I.price} ${I.currency}${$}`}).join(`
`)+`

Ask me about any category for more details!`);return}const S=r?`

Currently showing deals near **${r}**. Say "change location" to update.`:"";z(`I can help you buy or sell almost anything P2P!

**Try asking:**
- "Show me gold listings"
- "Anyone selling Coldplay tickets?"
- "Need an Antminer S21"
- "I want to sell my mining rig"

Or browse by category using the tabs above!`+S)},ee=Z=>{y(Z.listing),j(Z.listing.price.toString()),E("confirm"),p(!0)},Q=async()=>{m&&(E("processing"),await new Promise(Z=>setTimeout(Z,2e3)),E("success"),recordActivity("marketplace_offer",{isPublic:!0,data:{listingId:m.id,listingTitle:m.title,offerAmount:parseFloat(C),currency:m.currency,sellerName:m.seller.name}}),await new Promise(Z=>setTimeout(Z,1500)),p(!1),y(null))},W=()=>jsxRuntimeExports.jsx(ActivityFeed,{activities:marketplaceActivity,selectedCategory:u,onCategoryChange:f,onUserClick:s});return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[W(),jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-0",children:jsxRuntimeExports.jsx(AgentChat,{agent:t,getMockResponse:V,renderMessageCard:Z=>jsxRuntimeExports.jsxs("div",{className:"mt-4 rounded-xl overflow-hidden border border-neutral-300 dark:border-neutral-600/50",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:Z.listing.image,alt:"",className:"w-full h-32 object-cover"}),Z.listing.urgency&&Z.listing.urgency!=="normal"&&jsxRuntimeExports.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-medium flex items-center gap-1 ${Z.listing.urgency==="hot"?"bg-red-500 text-white":"bg-orange-500 text-white"}`,children:[jsxRuntimeExports.jsx(Flame,{className:"w-3 h-3"}),Z.listing.urgency==="hot"?"HOT":"URGENT"]}),Z.listing.verified&&jsxRuntimeExports.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-lg text-xs font-medium bg-teal-500 text-white flex items-center gap-1",children:[jsxRuntimeExports.jsx(Shield,{className:"w-3 h-3"}),"Verified"]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-900/80",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white font-medium text-sm",children:Z.listing.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full bg-teal-500 flex items-center justify-center text-white text-xs font-medium",children:Z.listing.seller.avatar}),jsxRuntimeExports.jsx("span",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:Z.listing.seller.name})]}),jsxRuntimeExports.jsxs("span",{className:"text-teal-600 dark:text-teal-400 font-bold",children:[Z.listing.price," ",Z.listing.currency]})]})]})]}),renderMessageActions:Z=>Z.cardData?.listing?jsxRuntimeExports.jsxs(motion.button,{onClick:()=>D(Z.cardData.listing),className:"mt-3 w-full py-2 rounded-xl bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 text-sm font-medium flex items-center justify-center gap-2 border border-blue-500/30",whileHover:{scale:1.01},whileTap:{scale:.99},children:[jsxRuntimeExports.jsx(MessageSquare,{className:"w-4 h-4"}),"DM ",Z.cardData.listing.seller.name]}):null,actionConfig:{label:Z=>`Make Offer - ${Z.listing.price} ${Z.listing.currency}`,onAction:ee},bgGradient:{from:"bg-teal-500/5",to:"bg-cyan-500/5"},additionalContent:jsxRuntimeExports.jsx(AnimatePresence,{children:d&&m&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>b==="confirm"&&p(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:Z=>Z.stopPropagation(),children:[b==="confirm"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Make Offer"}),jsxRuntimeExports.jsx("button",{onClick:()=>p(!1),className:"text-neutral-400 hover:text-neutral-900 dark:hover:text-white",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-xl overflow-hidden border border-neutral-200 dark:border-neutral-700 mb-4",children:[jsxRuntimeExports.jsx("img",{src:m.image,alt:"",className:"w-full h-32 object-cover"}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-neutral-100 dark:bg-neutral-800",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white font-medium",children:m.title}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mt-1",children:m.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-3 p-2 bg-neutral-200 dark:bg-neutral-700/50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-teal-500 flex items-center justify-center text-white text-xs font-medium",children:m.seller.avatar}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-neutral-900 dark:text-white text-sm font-medium flex items-center gap-1",children:[m.seller.name,m.verified&&jsxRuntimeExports.jsx(Shield,{className:"w-3 h-3 text-teal-500"})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-xs",children:m.location})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("label",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-2 block",children:["Your offer (",m.currency,"):"]}),jsxRuntimeExports.jsx("input",{type:"number",value:C,onChange:Z=>j(Z.target.value),className:"w-full px-4 py-3 rounded-xl border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white text-lg font-bold focus:outline-none focus:ring-2 focus:ring-teal-500"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 text-xs mt-1",children:["Asking price: ",m.price," ",m.currency]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-6",children:[.9,.95,1].map(Z=>jsxRuntimeExports.jsx("button",{onClick:()=>j(Math.round(m.price*Z).toString()),className:`flex-1 py-2 rounded-lg border transition-all text-sm ${parseFloat(C)===Math.round(m.price*Z)?"border-teal-500 bg-teal-500/20 text-teal-600 dark:text-teal-400":"border-neutral-200 dark:border-neutral-700 text-neutral-700 dark:text-neutral-300 hover:border-neutral-300 dark:hover:border-neutral-600"}`,children:Z===1?"Full price":`${Z*100}%`},Z))}),jsxRuntimeExports.jsxs(motion.button,{onClick:Q,className:`w-full py-4 rounded-xl bg-linear-to-r ${t.color} text-white font-bold flex items-center justify-center gap-2`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5"}),"Send Offer"]})]}),b==="processing"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-teal-500/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(Wallet,{className:"w-8 h-8 text-teal-600 dark:text-teal-500"})})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Sending Offer"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400",children:["Contacting ",m.seller.name,"..."]})]}),b==="success"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Offer Sent!"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400",children:[m.seller.name," will be notified. Check your DMs!"]})]})]})})})})})]})}function PokemonChat({agent:t}){const[e,s]=reactExports.useState(!1),[r,a]=reactExports.useState(null),[o,l]=reactExports.useState("confirm"),[c]=reactExports.useState([]),u=m=>{a(m),l("confirm"),s(!0)},f=async()=>{r&&(l("processing"),await new Promise(m=>setTimeout(m,2e3)),l("success"),recordActivity("pokemon_purchase",{isPublic:!0,data:{cardName:r.name,price:r.price,set:r.set,rarity:r.rarity}}),await new Promise(m=>setTimeout(m,1500)),s(!1),a(null))},d=m=>{switch(m){case"pending":return"text-yellow-500";case"confirmed":return"text-blue-500";case"shipped":return"text-purple-500";case"delivered":return"text-green-500";default:return"text-neutral-500"}},p=m=>{switch(m){case"pending":return"Pending";case"confirmed":return"Confirmed";case"shipped":return"Shipped";case"delivered":return"Delivered";default:return m}};return jsxRuntimeExports.jsx(AgentChat,{agent:t,renderMessageCard:m=>m.image?jsxRuntimeExports.jsxs("div",{className:"mt-4 rounded-xl overflow-hidden border border-neutral-300 dark:border-neutral-600/50",children:[jsxRuntimeExports.jsx("img",{src:m.image,alt:m.name,className:"w-full h-40 object-contain bg-neutral-100 dark:bg-neutral-800"}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-900/80",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white font-medium",children:m.name}),m.set&&jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:m.set}),m.rarity&&jsxRuntimeExports.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 text-xs rounded-full",children:m.rarity}),jsxRuntimeExports.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 font-bold mt-2",children:[m.price," UCT"]})]})]}):null,actionConfig:{label:m=>`Buy Now - ${m.price} UCT`,onAction:u},bgGradient:{from:"bg-yellow-500/5",to:"bg-red-500/5"},sidebarConfig:{title:"My Orders",emptyText:"No orders yet",emptyIcon:jsxRuntimeExports.jsx(ShoppingCart,{className:"w-8 h-8 mx-auto opacity-50 mb-2"}),items:c,renderItem:(m,y)=>jsxRuntimeExports.jsx(motion.div,{onClick:y,className:"p-3 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/30 hover:bg-neutral-200 dark:hover:bg-neutral-700/50 cursor-pointer transition-colors",whileHover:{scale:1.01},whileTap:{scale:.99},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[m.image&&jsxRuntimeExports.jsx("img",{src:m.image,alt:m.cardName,className:"w-12 h-12 rounded-lg object-cover"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white font-medium truncate",children:m.cardName}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:[m.price," UCT  ",m.quantity]})]}),jsxRuntimeExports.jsx("span",{className:`text-xs font-medium ${d(m.status)}`,children:p(m.status)})]})}),onItemClick:m=>{console.log("Order clicked:",m)}},additionalContent:jsxRuntimeExports.jsx(AnimatePresence,{children:e&&r&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>o==="confirm"&&s(!1),children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-2xl p-6 max-w-md w-full shadow-2xl",onClick:m=>m.stopPropagation(),children:[o==="confirm"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Confirm Purchase"}),jsxRuntimeExports.jsx("button",{onClick:()=>s(!1),className:"text-neutral-400 hover:text-neutral-900 dark:hover:text-white",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"rounded-xl overflow-hidden border border-neutral-200 dark:border-neutral-700 mb-4",children:[r.image&&jsxRuntimeExports.jsx("img",{src:r.image,alt:"",className:"w-full h-40 object-contain bg-neutral-100 dark:bg-neutral-800"}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-neutral-100 dark:bg-neutral-800",children:[jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white font-medium",children:r.name}),r.set&&jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mt-1",children:r.set}),r.rarity&&jsxRuntimeExports.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 text-xs rounded-full",children:r.rarity}),jsxRuntimeExports.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 text-lg font-bold mt-3",children:[r.price," UCT"]})]})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:f,className:`w-full py-4 rounded-xl bg-linear-to-r ${t.color} text-white font-bold flex items-center justify-center gap-2`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[jsxRuntimeExports.jsx(Wallet,{className:"w-5 h-5"}),"Pay with Unicity Tokens"]})]}),o==="processing"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-yellow-500/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(motion.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:jsxRuntimeExports.jsx(Wallet,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-500"})})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Processing Payment"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Confirming your Unicity token transfer..."})]}),o==="success"&&jsxRuntimeExports.jsxs("div",{className:"py-12 text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-500 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-8 h-8 text-white"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Purchase Complete!"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400",children:"Your Pokmon card is on its way."})]})]})})})})}var HOST_READY_TYPE="sphere-connect:host-ready",SPHERE_CONNECT_NAMESPACE$1="sphere-connect",SPHERE_CONNECT_VERSION$1="1.0",RPC_METHODS={GET_IDENTITY:"sphere_getIdentity",GET_BALANCE:"sphere_getBalance",GET_ASSETS:"sphere_getAssets",GET_FIAT_BALANCE:"sphere_getFiatBalance",GET_TOKENS:"sphere_getTokens",GET_HISTORY:"sphere_getHistory",L1_GET_BALANCE:"sphere_l1GetBalance",L1_GET_HISTORY:"sphere_l1GetHistory",RESOLVE:"sphere_resolve",SUBSCRIBE:"sphere_subscribe",UNSUBSCRIBE:"sphere_unsubscribe",DISCONNECT:"sphere_disconnect",GET_CONVERSATIONS:"sphere_getConversations",GET_MESSAGES:"sphere_getMessages",GET_DM_UNREAD_COUNT:"sphere_getDMUnreadCount",MARK_AS_READ:"sphere_markAsRead"},INTENT_ACTIONS={SEND:"send",L1_SEND:"l1_send",DM:"dm",PAYMENT_REQUEST:"payment_request",RECEIVE:"receive",SIGN_MESSAGE:"sign_message"},ERROR_CODES={PARSE_ERROR:-32700,INVALID_REQUEST:-32600,METHOD_NOT_FOUND:-32601,INVALID_PARAMS:-32602,INTERNAL_ERROR:-32603,NOT_CONNECTED:4001,PERMISSION_DENIED:4002,USER_REJECTED:4003,SESSION_EXPIRED:4004,ORIGIN_BLOCKED:4005,RATE_LIMITED:4006,INSUFFICIENT_BALANCE:4100,INVALID_RECIPIENT:4101,TRANSFER_FAILED:4102,INTENT_CANCELLED:4200};function createRequestId(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).slice(2,11)}`}var PERMISSION_SCOPES={IDENTITY_READ:"identity:read",BALANCE_READ:"balance:read",TOKENS_READ:"tokens:read",HISTORY_READ:"history:read",L1_READ:"l1:read",EVENTS_SUBSCRIBE:"events:subscribe",RESOLVE_PEER:"resolve:peer",TRANSFER_REQUEST:"transfer:request",L1_TRANSFER:"l1:transfer",DM_REQUEST:"dm:request",DM_READ:"dm:read",PAYMENT_REQUEST:"payment:request",SIGN_REQUEST:"sign:request"},DEFAULT_PERMISSIONS=[PERMISSION_SCOPES.IDENTITY_READ],METHOD_PERMISSIONS={[RPC_METHODS.GET_IDENTITY]:PERMISSION_SCOPES.IDENTITY_READ,[RPC_METHODS.GET_BALANCE]:PERMISSION_SCOPES.BALANCE_READ,[RPC_METHODS.GET_ASSETS]:PERMISSION_SCOPES.BALANCE_READ,[RPC_METHODS.GET_FIAT_BALANCE]:PERMISSION_SCOPES.BALANCE_READ,[RPC_METHODS.GET_TOKENS]:PERMISSION_SCOPES.TOKENS_READ,[RPC_METHODS.GET_HISTORY]:PERMISSION_SCOPES.HISTORY_READ,[RPC_METHODS.L1_GET_BALANCE]:PERMISSION_SCOPES.L1_READ,[RPC_METHODS.L1_GET_HISTORY]:PERMISSION_SCOPES.L1_READ,[RPC_METHODS.RESOLVE]:PERMISSION_SCOPES.RESOLVE_PEER,[RPC_METHODS.SUBSCRIBE]:PERMISSION_SCOPES.EVENTS_SUBSCRIBE,[RPC_METHODS.UNSUBSCRIBE]:PERMISSION_SCOPES.EVENTS_SUBSCRIBE,[RPC_METHODS.GET_CONVERSATIONS]:PERMISSION_SCOPES.DM_READ,[RPC_METHODS.GET_MESSAGES]:PERMISSION_SCOPES.DM_READ,[RPC_METHODS.GET_DM_UNREAD_COUNT]:PERMISSION_SCOPES.DM_READ,[RPC_METHODS.MARK_AS_READ]:PERMISSION_SCOPES.DM_READ},INTENT_PERMISSIONS={[INTENT_ACTIONS.SEND]:PERMISSION_SCOPES.TRANSFER_REQUEST,[INTENT_ACTIONS.L1_SEND]:PERMISSION_SCOPES.L1_TRANSFER,[INTENT_ACTIONS.DM]:PERMISSION_SCOPES.DM_REQUEST,[INTENT_ACTIONS.PAYMENT_REQUEST]:PERMISSION_SCOPES.PAYMENT_REQUEST,[INTENT_ACTIONS.RECEIVE]:PERMISSION_SCOPES.IDENTITY_READ,[INTENT_ACTIONS.SIGN_MESSAGE]:PERMISSION_SCOPES.SIGN_REQUEST};function hasMethodPermission(t,e){const s=METHOD_PERMISSIONS[e];return s?t.has(s):!1}function hasIntentPermission(t,e){const s=INTENT_PERMISSIONS[e];return s?t.has(s):!1}var DEFAULT_SESSION_TTL_MS=864e5,DEFAULT_MAX_RPS=20,ConnectHost=class{sphere;transport;config;session=null;grantedPermissions=new Set;eventSubscriptions=new Map;autoApprovedIntents=new Map;rateLimitCounter=0;rateLimitResetAt=0;unsubscribeTransport=null;constructor(t){this.sphere=t.sphere,this.transport=t.transport,this.config=t,this.unsubscribeTransport=this.transport.onMessage(this.handleMessage.bind(this))}getSession(){return this.session}setIntentAutoApprove(t,e){this.autoApprovedIntents.set(t,e)}clearIntentAutoApprove(t){this.autoApprovedIntents.delete(t)}revokeSession(){this.session&&(this.session.active=!1,this.cleanupEventSubscriptions(),this.autoApprovedIntents.clear(),this.session=null,this.grantedPermissions.clear())}destroy(){this.revokeSession(),this.unsubscribeTransport&&(this.unsubscribeTransport(),this.unsubscribeTransport=null)}async handleMessage(t){try{if(t.type==="handshake"&&t.direction==="request"){await this.handleHandshake(t);return}if(t.type==="request"){await this.handleRpcRequest(t);return}if(t.type==="intent"){await this.handleIntentRequest(t);return}}catch(e){console.warn("[ConnectHost] Error handling message:",e)}}async handleHandshake(t){const e=t.dapp;if(!e){this.sendHandshakeResponse([],void 0,void 0);return}const s=t.permissions,{approved:r,grantedPermissions:a}=await this.config.onConnectionRequest(e,s);if(!r){this.sendHandshakeResponse([],void 0,void 0);return}const o=createRequestId(),l=[...new Set([...DEFAULT_PERMISSIONS,...a])],c=this.config.sessionTtlMs??DEFAULT_SESSION_TTL_MS;this.session={id:o,dapp:e,permissions:l,createdAt:Date.now(),expiresAt:c>0?Date.now()+c:0,active:!0},this.grantedPermissions=new Set(l);const u=this.getPublicIdentity();this.sendHandshakeResponse(l,o,u)}sendHandshakeResponse(t,e,s){this.transport.send({ns:SPHERE_CONNECT_NAMESPACE$1,v:SPHERE_CONNECT_VERSION$1,type:"handshake",direction:"response",permissions:t,sessionId:e,identity:s})}async handleRpcRequest(t){if(!this.session?.active){this.sendError(t.id,ERROR_CODES.NOT_CONNECTED,"Not connected");return}if(this.session.expiresAt>0&&Date.now()>this.session.expiresAt){this.revokeSession(),this.sendError(t.id,ERROR_CODES.SESSION_EXPIRED,"Session expired");return}if(!this.checkRateLimit()){this.sendError(t.id,ERROR_CODES.RATE_LIMITED,"Too many requests");return}if(t.method===RPC_METHODS.DISCONNECT){this.revokeSession(),this.sendResult(t.id,{disconnected:!0});return}if(!hasMethodPermission(this.grantedPermissions,t.method)){this.sendError(t.id,ERROR_CODES.PERMISSION_DENIED,`Permission denied for ${t.method}`);return}try{const e=await this.executeMethod(t.method,t.params??{});this.sendResult(t.id,e)}catch(e){this.sendError(t.id,ERROR_CODES.INTERNAL_ERROR,e.message)}}async handleIntentRequest(t){if(!this.session?.active){this.sendIntentError(t.id,ERROR_CODES.NOT_CONNECTED,"Not connected");return}if(this.session.expiresAt>0&&Date.now()>this.session.expiresAt){this.revokeSession(),this.sendIntentError(t.id,ERROR_CODES.SESSION_EXPIRED,"Session expired");return}if(!hasIntentPermission(this.grantedPermissions,t.action)){this.sendIntentError(t.id,ERROR_CODES.PERMISSION_DENIED,`Permission denied for intent: ${t.action}`);return}const e=this.autoApprovedIntents.get(t.action);if(e){const r=await e(t.action,t.params,this.session);r.error?this.sendIntentError(t.id,r.error.code,r.error.message):this.sendIntentResult(t.id,r.result);return}const s=await this.config.onIntent(t.action,t.params,this.session);s.error?this.sendIntentError(t.id,s.error.code,s.error.message):this.sendIntentResult(t.id,s.result)}async executeMethod(t,e){switch(t){case RPC_METHODS.GET_IDENTITY:return this.getPublicIdentity();case RPC_METHODS.GET_BALANCE:return this.sphere.payments.getBalance(e.coinId);case RPC_METHODS.GET_ASSETS:return this.sphere.payments.getAssets(e.coinId);case RPC_METHODS.GET_FIAT_BALANCE:return{fiatBalance:await this.sphere.payments.getFiatBalance()};case RPC_METHODS.GET_TOKENS:return this.stripTokenSdkData(this.sphere.payments.getTokens(e.coinId?{coinId:e.coinId}:void 0));case RPC_METHODS.GET_HISTORY:return this.sphere.payments.getHistory();case RPC_METHODS.L1_GET_BALANCE:if(!this.sphere.payments.l1)throw new Error("L1 module not available");return this.sphere.payments.l1.getBalance();case RPC_METHODS.L1_GET_HISTORY:if(!this.sphere.payments.l1)throw new Error("L1 module not available");return this.sphere.payments.l1.getHistory(e.limit);case RPC_METHODS.RESOLVE:if(!e.identifier)throw new Error("Missing required parameter: identifier");return this.sphere.resolve(e.identifier);case RPC_METHODS.SUBSCRIBE:return this.handleSubscribe(e.event);case RPC_METHODS.UNSUBSCRIBE:return this.handleUnsubscribe(e.event);case RPC_METHODS.GET_CONVERSATIONS:{if(!this.sphere.communications)throw new Error("Communications module not available");const s=this.sphere.communications.getConversations(),r=[];for(const[a,o]of s){if(o.length===0)continue;const l=o[o.length-1],c=o.find(u=>u.senderPubkey===a&&u.senderNametag)?.senderNametag??o.find(u=>u.recipientPubkey===a&&u.recipientNametag)?.recipientNametag;r.push({peerPubkey:a,peerNametag:c,lastMessage:l,unreadCount:this.sphere.communications.getUnreadCount(a),messageCount:o.length})}return r.sort((a,o)=>o.lastMessage.timestamp-a.lastMessage.timestamp),r}case RPC_METHODS.GET_MESSAGES:{if(!this.sphere.communications)throw new Error("Communications module not available");if(!e.peerPubkey)throw new Error("Missing required parameter: peerPubkey");return this.sphere.communications.getConversationPage(e.peerPubkey,{limit:e.limit,before:e.before})}case RPC_METHODS.GET_DM_UNREAD_COUNT:{if(!this.sphere.communications)throw new Error("Communications module not available");return{unreadCount:this.sphere.communications.getUnreadCount(e.peerPubkey)}}case RPC_METHODS.MARK_AS_READ:{if(!this.sphere.communications)throw new Error("Communications module not available");if(!e.messageIds||!Array.isArray(e.messageIds))throw new Error("Missing required parameter: messageIds (string[])");return await this.sphere.communications.markAsRead(e.messageIds),{marked:!0,count:e.messageIds.length}}default:throw new Error(`Unknown method: ${t}`)}}handleSubscribe(t){if(!t)throw new Error("Missing required parameter: event");if(this.eventSubscriptions.has(t))return{subscribed:!0,event:t};const e=this.sphere.on(t,s=>{this.transport.send({ns:SPHERE_CONNECT_NAMESPACE$1,v:SPHERE_CONNECT_VERSION$1,type:"event",event:t,data:s})});return this.eventSubscriptions.set(t,e),{subscribed:!0,event:t}}handleUnsubscribe(t){if(!t)throw new Error("Missing required parameter: event");const e=this.eventSubscriptions.get(t);return e&&(e(),this.eventSubscriptions.delete(t)),{unsubscribed:!0,event:t}}cleanupEventSubscriptions(){for(const[,t]of this.eventSubscriptions)t();this.eventSubscriptions.clear()}getPublicIdentity(){const t=this.sphere.identity;if(t)return{chainPubkey:t.chainPubkey,l1Address:t.l1Address,directAddress:t.directAddress,nametag:t.nametag}}stripTokenSdkData(t){return t.map(e=>{const s=e,{sdkData:r,...a}=s;return a})}sendResult(t,e){this.transport.send({ns:SPHERE_CONNECT_NAMESPACE$1,v:SPHERE_CONNECT_VERSION$1,type:"response",id:t,result:e})}sendError(t,e,s){this.transport.send({ns:SPHERE_CONNECT_NAMESPACE$1,v:SPHERE_CONNECT_VERSION$1,type:"response",id:t,error:{code:e,message:s}})}sendIntentResult(t,e){this.transport.send({ns:SPHERE_CONNECT_NAMESPACE$1,v:SPHERE_CONNECT_VERSION$1,type:"intent_result",id:t,result:e})}sendIntentError(t,e,s){this.transport.send({ns:SPHERE_CONNECT_NAMESPACE$1,v:SPHERE_CONNECT_VERSION$1,type:"intent_result",id:t,error:{code:e,message:s}})}checkRateLimit(){const t=this.config.maxRequestsPerSecond??DEFAULT_MAX_RPS,e=Date.now();return e>this.rateLimitResetAt&&(this.rateLimitCounter=0,this.rateLimitResetAt=e+1e3),this.rateLimitCounter++,this.rateLimitCounter<=t}},SPHERE_CONNECT_NAMESPACE="sphere-connect",SPHERE_CONNECT_VERSION="1.0";function isSphereConnectMessage(t){if(!t||typeof t!="object")return!1;const e=t;return e.ns===SPHERE_CONNECT_NAMESPACE&&e.v===SPHERE_CONNECT_VERSION}var POPUP_CLOSE_CHECK_INTERVAL=1e3,PostMessageTransport=class Vl{targetWindow;targetOrigin;allowedOrigins;handlers=new Set;listener=null;popupCheckInterval=null;onPopupClosed=null;constructor(e,s,r){this.targetWindow=e,this.targetOrigin=s,this.allowedOrigins=r?new Set(r):null,this.listener=a=>{if(!(this.allowedOrigins&&!this.allowedOrigins.has("*")&&!this.allowedOrigins.has(a.origin))&&isSphereConnectMessage(a.data))for(const o of this.handlers)try{o(a.data)}catch{}},window.addEventListener("message",this.listener)}static forHost(e,s){const r=e instanceof HTMLIFrameElement?e.contentWindow:e,a=s.allowedOrigins[0]==="*"?"*":s.allowedOrigins[0];return new Vl(r,a,s.allowedOrigins)}static forClient(e){const s=e?.target??window.parent,r=e?.targetOrigin??"*",a=new Vl(s,r,null);return e?.target&&e.target!==window.parent&&a.startPopupCloseDetection(e.target),a}send(e){try{this.targetWindow.postMessage(e,this.targetOrigin)}catch{}}onMessage(e){return this.handlers.add(e),()=>{this.handlers.delete(e)}}destroy(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.popupCheckInterval&&(clearInterval(this.popupCheckInterval),this.popupCheckInterval=null),this.handlers.clear()}onClose(e){this.onPopupClosed=e}startPopupCloseDetection(e){this.popupCheckInterval=setInterval(()=>{e.closed&&(this.popupCheckInterval&&(clearInterval(this.popupCheckInterval),this.popupCheckInterval=null),this.onPopupClosed&&this.onPopupClosed())},POPUP_CLOSE_CHECK_INTERVAL)}};const ConnectContext=reactExports.createContext(null);function useConnectContext(){const t=reactExports.useContext(ConnectContext);if(!t)throw new Error("useConnectContext must be used within ConnectProvider");return t}function IframeAgent({agent:t}){const[e,s]=reactExports.useState(!0),[r,a]=reactExports.useState(()=>t.iframeUrl??""),o=reactExports.useRef(null),l=reactExports.useRef(null),c=reactExports.useRef(null),u=reactExports.useRef(!1),{sphere:f}=useSphereContext(),{requestApproval:d,requestIntent:p,setConnectHost:m}=useConnectContext(),y=t.iframeUrls&&t.iframeUrls.length>1,b=reactExports.useRef(f);b.current=f;const E=reactExports.useRef(d);E.current=d;const C=reactExports.useRef(p);C.current=p;const j=!!f,B=reactExports.useCallback(()=>{l.current?.destroy(),l.current=null,m(null),c.current?.destroy(),c.current=null,u.current=!1},[m]);reactExports.useEffect(()=>{const F=o.current;if(!F||!b.current||!r||u.current)return;let q;try{q=new URL(r).origin}catch{console.warn("[Connect] Invalid iframe URL:",r);return}u.current=!0;const V=PostMessageTransport.forHost(F,{allowedOrigins:[q]});c.current=V;const ee=new ConnectHost({sphere:b.current,transport:V,onConnectionRequest:(Q,W)=>E.current(Q,W),onIntent:(Q,W)=>C.current(Q,W)});return l.current=ee,m(ee),()=>{B()}},[r,j]);const D=F=>{F!==r&&(B(),s(!0),a(F))};return jsxRuntimeExports.jsxs("div",{className:"bg-white/60 dark:bg-neutral-900/70 backdrop-blur-xl rounded-3xl border border-neutral-200 dark:border-neutral-800/50 overflow-hidden relative lg:shadow-xl dark:lg:shadow-2xl h-full min-h-0 theme-transition flex flex-col",children:[y&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 px-3 py-2 border-b border-neutral-200 dark:border-neutral-800/50 bg-neutral-50/80 dark:bg-neutral-800/40 shrink-0",children:t.iframeUrls.map(F=>jsxRuntimeExports.jsx("button",{onClick:()=>D(F.url),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors duration-150 ${r===F.url?"bg-orange-500 text-white shadow-sm":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-200/60 dark:hover:bg-neutral-700/40"}`,children:F.label},F.url))}),jsxRuntimeExports.jsxs("div",{className:"relative flex-1 min-h-0",children:[e&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 dark:bg-neutral-900/80",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 text-orange-500 animate-spin"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:["Loading ",t.name,"..."]})]})}),jsxRuntimeExports.jsx("iframe",{ref:o,src:r,title:t.name,className:"w-full h-full border-0",onLoad:()=>s(!1),allow:"clipboard-write",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox"})]})]})}function areAssetPropsEqual(t,e){return t.asset.coinId===e.asset.coinId&&t.asset.symbol===e.asset.symbol&&t.asset.totalAmount===e.asset.totalAmount&&t.asset.tokenCount===e.asset.tokenCount&&t.asset.priceUsd===e.asset.priceUsd&&t.asset.change24h===e.asset.change24h&&t.asset.iconUrl===e.asset.iconUrl&&t.showBalances===e.showBalances&&t.layer===e.layer&&t.isNew===e.isNew&&t.delay===e.delay}function AnimatedFiatValue({value:t,showBalances:e}){const s=useMotionValue(0),r=useTransform(s,a=>`$${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`);return reactExports.useEffect(()=>{if(Math.abs(s.get()-t)>.001)return animate(s,t,{duration:.5,ease:"easeOut"}).stop},[t,s]),e?jsxRuntimeExports.jsx(motion.span,{children:r}):jsxRuntimeExports.jsx("span",{children:""})}function AnimatedAmount({value:t,symbol:e,decimals:s,showBalances:r}){const a=useMotionValue(0),o=useTransform(a,l=>`${l.toLocaleString("en-US",{minimumFractionDigits:Math.min(s,4),maximumFractionDigits:Math.min(s,4)})} ${e}`);return reactExports.useEffect(()=>{if(Math.abs(a.get()-t)>1e-4)return animate(a,t,{duration:.5,ease:"easeOut"}).stop},[t,a]),r?jsxRuntimeExports.jsx(motion.span,{children:o}):jsxRuntimeExports.jsx("span",{children:""})}const AssetRow=reactExports.memo(function t({asset:e,showBalances:s,delay:r,onClick:a,layer:o,isNew:l=!0}){const c=e.change24h??0,u=c>=0?"text-emerald-500 dark:text-emerald-400":"text-red-500 dark:text-red-400",f=c>=0?"+":"",d=e.fiatValueUsd??0,p=Number(e.totalAmount)/Math.pow(10,e.decimals),m=`p-3 rounded-xl transition-all group border border-transparent hover:border-neutral-200/50 dark:hover:border-white/5 ${a?"cursor-pointer hover:translate-x-1":""}`,y=jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"relative w-10 h-10 rounded-xl flex items-center justify-center overflow-hidden",children:e.iconUrl||TokenRegistry$1.getInstance().getIconUrl(e.coinId)?jsxRuntimeExports.jsx("img",{src:e.iconUrl||TokenRegistry$1.getInstance().getIconUrl(e.coinId),alt:e.symbol,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx(Box,{className:"w-5 h-5 text-neutral-400 dark:text-neutral-500"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white font-medium text-sm",children:e.symbol}),o&&jsxRuntimeExports.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-bold rounded ${o==="L1"?"bg-blue-500/20 text-blue-600 dark:text-blue-400":"bg-orange-500/20 text-orange-600 dark:text-orange-400"}`,children:o}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 truncate max-w-25",children:e.name})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-left text-neutral-500",children:jsxRuntimeExports.jsx(AnimatedAmount,{value:p,symbol:e.symbol,decimals:e.decimals,showBalances:s})})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white font-medium text-sm",children:jsxRuntimeExports.jsx(AnimatedFiatValue,{value:d,showBalances:s})}),jsxRuntimeExports.jsxs("div",{className:`text-xs ${u} flex justify-end items-center`,children:[f,c.toFixed(2),"%"]})]})]});return l?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r},onClick:a,className:m,children:y}):jsxRuntimeExports.jsx("div",{className:m,onClick:a,children:y})},areAssetPropsEqual);function areTokenPropsEqual(t,e){return t.token.id===e.token.id&&t.token.status===e.token.status&&t.token.symbol===e.token.symbol&&t.isNew===e.isNew&&t.delay===e.delay}function parseTokenAmount(t,e){try{if(!t||!e)return 0;const s=parseFloat(t),o=TokenRegistry$1.getInstance().getDefinition(e)?.decimals??6,l=Math.pow(10,o);return s/l}catch{return 0}}function formatTokenAmount(t,e){try{if(!e)return t.toString();const a=TokenRegistry$1.getInstance().getDefinition(e)?.decimals??6;return new Intl.NumberFormat("en-US",{maximumFractionDigits:Math.min(a,6)}).format(t)}catch{return t.toString()}}function AnimatedTokenAmount({amount:t,coinId:e,symbol:s}){const r=parseTokenAmount(t,e),a=useMotionValue(0),o=useTransform(a,l=>`${formatTokenAmount(l,e)} ${s||""}`);return reactExports.useEffect(()=>{if(Math.abs(a.get()-r)>1e-4)return animate(a,r,{duration:.5,ease:"easeOut"}).stop},[r,a]),jsxRuntimeExports.jsx(motion.span,{children:o})}const TokenRow=reactExports.memo(function t({token:e,delay:s,isNew:r=!0}){const[a,o]=reactExports.useState(!1),l=d=>{d.stopPropagation(),navigator.clipboard.writeText(e.id),o(!0),setTimeout(()=>o(!1),2e3)},c="p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/30 border border-neutral-200/50 dark:border-white/5 hover:border-neutral-300 dark:hover:border-white/10 transition-all group",u=jsxRuntimeExports.jsx(AnimatedTokenAmount,{amount:e.amount,coinId:e.coinId,symbol:e.symbol}),f=jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"relative w-10 h-10 rounded-lg flex items-center justify-center overflow-hidden",children:e.iconUrl||TokenRegistry$1.getInstance().getIconUrl(e.coinId)?jsxRuntimeExports.jsx("img",{src:e.iconUrl||TokenRegistry$1.getInstance().getIconUrl(e.coinId),alt:e.symbol,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx(Box,{className:"w-5 h-5 text-neutral-400 dark:text-neutral-500"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white font-medium text-sm",children:u}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-neutral-500 font-mono cursor-pointer hover:text-orange-500 dark:hover:text-orange-400 transition-colors",onClick:l,children:[jsxRuntimeExports.jsxs("span",{children:["ID: ",e.id.slice(0,8),"..."]}),a?jsxRuntimeExports.jsx(CircleCheck,{className:"w-3 h-3"}):jsxRuntimeExports.jsx(Copy,{className:"w-3 h-3 opacity-0 group-hover:opacity-100"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-end gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded-md bg-neutral-100 dark:bg-neutral-700/50 text-neutral-500 dark:text-neutral-400 border border-neutral-200 dark:border-neutral-700",children:"Token"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-600",children:new Date(e.createdAt).toLocaleDateString()})]})]});return r?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:s},className:c,children:f}):jsxRuntimeExports.jsx("div",{className:c,children:f})},areTokenPropsEqual);function truncateNametag(t,e=20){return t.length<=e?t:`${t.slice(0,6)}...${t.slice(-3)}`}function AddressSelector({compact:t=!0,addressFormat:e="direct"}){const[s,r]=reactExports.useState(!1),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(!1),[u,f]=reactExports.useState(!1),[d,p]=reactExports.useState(""),[m,y]=reactExports.useState(null),[b,E]=reactExports.useState("idle"),C=reactExports.useRef(null),{sphere:j,resolveNametag:B}=useSphereContext(),{l1Address:D,nametag:F,directAddress:q}=useIdentity(),V=useQueryClient(),ee=j?.getCurrentAddressIndex()??0,[Q,W]=reactExports.useState([]);reactExports.useEffect(()=>{if(j)try{W(j.getActiveAddresses())}catch(A){console.error("[AddressSelector] Failed to get addresses:",A)}},[j,ee]),reactExports.useEffect(()=>{u&&setTimeout(()=>C.current?.focus(),100)},[u]),reactExports.useEffect(()=>{const A=d.trim().replace(/^@/,"");if(!A||A.length<2){E("idle");return}E("checking");const L=setTimeout(async()=>{try{const Y=await B(A);E(Y?"taken":"available")}catch{E("idle")}},500);return()=>clearTimeout(L)},[d,B]);const Z=F,z=reactExports.useCallback(()=>{V.resetQueries({queryKey:SPHERE_KEYS.identity.all}),V.resetQueries({queryKey:SPHERE_KEYS.payments.all}),V.resetQueries({queryKey:SPHERE_KEYS.l1.all}),window.dispatchEvent(new Event("wallet-updated")),j&&W(j.getActiveAddresses())},[V,j]),O=reactExports.useCallback(async()=>{const A=F;if(A)try{await navigator.clipboard.writeText(`@${A}`),o("nametag"),setTimeout(()=>o(!1),2e3)}catch(L){console.error("Failed to copy nametag:",L)}},[F]),k=reactExports.useCallback(async()=>{if(q)try{await navigator.clipboard.writeText(q),o("address"),setTimeout(()=>o(!1),2e3)}catch(A){console.error("Failed to copy direct address:",A)}},[q]),v=reactExports.useCallback(async A=>{if(!j||l||A===ee){r(!1);return}r(!1),c(!0);try{await Promise.race([j.switchToAddress(A),new Promise((L,Y)=>setTimeout(()=>Y(new Error("timeout")),5e3))])}catch(L){L instanceof Error&&L.message==="timeout"||console.error("[AddressSelector] Failed to switch address:",L)}finally{z(),c(!1)}},[j,l,ee,z]),S=reactExports.useCallback(async()=>{if(!(!j||l)){c(!0);try{const A=Q.length>0?Math.max(...Q.map(L=>L.index))+1:1;try{await Promise.race([j.switchToAddress(A),new Promise((L,Y)=>setTimeout(()=>Y(new Error("timeout")),5e3))])}catch(L){if(!(L instanceof Error&&L.message==="timeout"))throw L}z(),r(!1)}catch(A){console.error("[AddressSelector] Failed to create new address:",A),r(!1)}finally{c(!1)}}},[j,l,Q,z]),N=reactExports.useCallback(async()=>{if(!j||l)return;const A=d.trim().replace(/^@/,"");if(A){c(!0),y(null);try{if(await B(A)){y(`@${A} is already taken`),c(!1);return}await j.registerNametag(A),f(!1),z()}catch(L){const Y=L instanceof Error?L.message:"Failed to register nametag";console.error("[AddressSelector] Failed to register nametag:",L),y(Y)}finally{c(!1)}}},[j,l,d,B,z]),R=reactExports.useCallback(()=>{f(!1)},[]),T=reactExports.useMemo(()=>[...Q].sort((A,L)=>A.index-L.index),[Q]),M=reactExports.useCallback(A=>e==="direct"&&A.directAddress||A.l1Address,[e]),I=reactExports.useCallback(A=>A.length<=20?A:`${A.slice(0,12)}...${A.slice(-6)}`,[]),$=jsxRuntimeExports.jsx(AnimatePresence,{children:u&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/40",onClick:()=>!l&&f(!1)}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl border border-neutral-200 dark:border-neutral-700 w-full max-w-sm p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold text-neutral-900 dark:text-neutral-100",children:"New Address"}),jsxRuntimeExports.jsx("button",{onClick:()=>!l&&f(!1),className:"p-1 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4 text-neutral-500"})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"Choose a Unicity ID for this address, or skip for now."}),jsxRuntimeExports.jsxs("div",{className:"relative mb-3",children:[jsxRuntimeExports.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-neutral-400",children:"@"}),jsxRuntimeExports.jsx("input",{ref:C,type:"text",value:d,onChange:A=>{p(A.target.value.toLowerCase()),y(null)},onKeyDown:A=>{A.key==="Enter"&&d.trim()&&b==="available"&&N()},placeholder:"nametag",disabled:l,className:"w-full pl-7 pr-8 py-2.5 text-sm bg-neutral-50 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 disabled:opacity-50 transition-colors"}),jsxRuntimeExports.jsxs("span",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:[b==="checking"&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 text-neutral-400 animate-spin"}),b==="available"&&jsxRuntimeExports.jsx(CircleCheck,{className:"w-4 h-4 text-emerald-500"}),b==="taken"&&jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4 text-red-500"})]})]}),jsxRuntimeExports.jsxs("div",{className:"h-4 mb-2",children:[b==="taken"&&!m&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-red-500",children:["@",d.trim().replace(/^@/,"")," is already taken"]}),m&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500",children:m}),b==="available"&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-emerald-500",children:["@",d.trim().replace(/^@/,"")," is available"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:R,disabled:l,className:"flex-1 px-3 py-2.5 text-sm font-medium text-neutral-600 dark:text-neutral-400 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-xl transition-colors disabled:opacity-50",children:l&&!d.trim()?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin mx-auto"}):"Skip"}),jsxRuntimeExports.jsx("button",{onClick:N,disabled:l||!d.trim()||b==="taken"||b==="checking",className:"flex-1 px-3 py-2.5 text-sm font-medium text-white bg-orange-500 hover:bg-orange-600 rounded-xl transition-colors disabled:opacity-50",children:l&&d.trim()?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin mx-auto"}):"Create"})]})]})})]})});return j?t?jsxRuntimeExports.jsxs("div",{className:"relative",children:[$,jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>r(A=>!A),className:"flex items-center gap-1 text-[10px] sm:text-xs text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors",children:[Z?jsxRuntimeExports.jsxs("span",{className:"font-medium",title:`@${Z}`,children:["@",truncateNametag(Z)]}):q?jsxRuntimeExports.jsxs("span",{className:"font-mono",children:[q.slice(0,8),"...",q.slice(-4)]}):jsxRuntimeExports.jsx("span",{className:"font-mono text-neutral-400",children:"..."}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-3 h-3 transition-transform ${s?"rotate-180":""}`})]}),Z?jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:O,className:"p-1 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded transition-colors",title:"Copy nametag",children:a==="nametag"?jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-emerald-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-3 h-3 text-neutral-500"})}):q?jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:k,className:"p-1 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded transition-colors",title:`Copy direct address: ${q}`,children:a==="address"?jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-emerald-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-3 h-3 text-neutral-400"})}):null]}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-black/10",onClick:()=>r(!1)}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute left-0 top-full mt-2 z-50 min-w-70 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-xl shadow-xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 flex items-center gap-1.5",children:[l&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3 h-3 animate-spin"}),l?"Switching...":`Addresses (${T.length})`]}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,disabled:l,className:"flex items-center gap-1 px-2 py-1 text-xs bg-orange-500/10 hover:bg-orange-500/20 text-orange-600 dark:text-orange-400 rounded-lg transition-colors shrink-0 disabled:opacity-50",title:"Derive new address",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:"New"})]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar",children:T.map(A=>{const L=A.index===ee,Y=A.nametag;return jsxRuntimeExports.jsxs("button",{onClick:()=>v(A.index),disabled:l,className:`w-full flex items-center gap-2 px-3 py-2.5 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors disabled:opacity-50 ${L?"bg-orange-50 dark:bg-orange-900/20":""}`,children:[jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${L?"bg-orange-500":"bg-transparent"}`}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[Y&&jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 block",children:["@",Y]}),jsxRuntimeExports.jsx("span",{className:"text-xs font-mono text-neutral-500 dark:text-neutral-400 truncate block",children:I(M(A))})]})]},A.index)})})]})]})})]}):jsxRuntimeExports.jsxs("div",{className:"relative",children:[$,jsxRuntimeExports.jsxs("button",{onClick:()=>r(A=>!A),className:"flex items-center gap-2 px-3 py-2 bg-neutral-100 dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200/50 dark:hover:bg-neutral-700/50 transition-colors",children:[Z?jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["@",Z]}):D?jsxRuntimeExports.jsxs("span",{className:"text-sm font-mono text-neutral-700 dark:text-neutral-300",children:[D.slice(0,8),"...",D.slice(-6)]}):jsxRuntimeExports.jsx("span",{className:"text-sm font-mono text-neutral-400",children:"..."}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 text-neutral-500 transition-transform ${s?"rotate-180":""}`})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40",onClick:()=>r(!1)}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute left-0 top-full mt-2 z-50 min-w-75 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-xl shadow-xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 border-b border-neutral-200 dark:border-neutral-800 flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"Select Address"}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,disabled:l,className:"flex items-center gap-1 px-2 py-1 text-xs bg-orange-500/10 hover:bg-orange-500/20 text-orange-600 dark:text-orange-400 rounded-lg transition-colors disabled:opacity-50",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:"New Address"})]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar",children:T.map(A=>{const L=A.index===ee,Y=L?Z:A.nametag;return jsxRuntimeExports.jsxs("button",{onClick:()=>v(A.index),disabled:l,className:`w-full flex items-center gap-2 px-3 py-2.5 text-left hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors disabled:opacity-50 ${L?"bg-orange-50 dark:bg-orange-900/20":""}`,children:[jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full shrink-0 ${L?"bg-orange-500":"bg-transparent"}`}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0",children:Y?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["@",Y]}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-mono text-neutral-400",children:[M(A).slice(0,10),"..."]})]}):jsxRuntimeExports.jsx("span",{className:"text-sm font-mono text-neutral-700 dark:text-neutral-300 truncate",children:I(M(A))})})]},A.index)})})]})]})})]}):(Z||q)&&t?jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1.5",children:Z?jsxRuntimeExports.jsxs("span",{className:"text-[10px] sm:text-xs text-neutral-500 font-medium",title:`@${Z}`,children:["@",truncateNametag(Z)]}):q?jsxRuntimeExports.jsxs("span",{className:"text-[10px] sm:text-xs font-mono text-neutral-400",children:[q.slice(0,8),"...",q.slice(-4)]}):null}):null}function addrKey(t,e){return e?`${t}c`:`${t}`}function useOnboardingFlow(){const t=useQueryClient(),{sphere:e,createWallet:s,resolveNametag:r,importWallet:a,importFromFile:o,finalizeWallet:l,walletExists:c}=useSphereContext(),[u,f]=reactExports.useState(e&&c&&!e.identity?.nametag?"nametag":"start"),[d,p]=reactExports.useState(!1),[m,y]=reactExports.useState(null),[b,E]=reactExports.useState(Array(12).fill("")),[C,j]=reactExports.useState(null),[B,D]=reactExports.useState(10),[F,q]=reactExports.useState(!0),[V,ee]=reactExports.useState(!1),[Q,W]=reactExports.useState(null),[Z,z]=reactExports.useState("unknown"),[O,k]=reactExports.useState(!1),[v,S]=reactExports.useState(null),[N,R]=reactExports.useState(!1),T=reactExports.useRef(null),M=reactExports.useRef(null),[I,$]=reactExports.useState(""),[A,L]=reactExports.useState("idle"),[Y,oe]=reactExports.useState(""),[J,U]=reactExports.useState(!1);reactExports.useEffect(()=>{const ve=I.trim().replace(/^@/,"");if(!ve||ve.length<2){L("idle");return}let Ae=!1;L("checking");const Oe=setTimeout(async()=>{for(let Ke=1;Ke<=2;Ke++){if(Ae)return;try{const We=await r(ve);Ae||L(We?"taken":"available");return}catch{Ke<2&&await new Promise(We=>setTimeout(We,1500))}}Ae||L("idle")},500);return()=>{Ae=!0,clearTimeout(Oe)}},[I,r]);const[G,ae]=reactExports.useState([]),[he,le]=reactExports.useState(new Set),[te,pe]=reactExports.useState(null),xe=reactExports.useCallback(()=>{f("start"),E(Array(12).fill("")),j(null),W(null),z("unknown"),k(!1),D(10),q(!0),ee(!1),S(null),R(!1),T.current?.abort(),T.current=null,M.current=null,y(null)},[]),be=reactExports.useCallback(async ve=>{j(ve),y(null);let Ae;if(ve.name.endsWith(".dat")){const Ke=await ve.arrayBuffer();Ae=new Uint8Array(Ke)}else Ae=await ve.text();W(Ae);const Oe=Sphere.detectLegacyFileType(ve.name,Ae);z(Oe);const Ue=Sphere.isLegacyFileEncrypted(ve.name,Ae);if(k(Ue),Oe==="dat"||Oe==="txt")q(!0);else if(Oe==="json"&&typeof Ae=="string")try{const Ke=JSON.parse(Ae),We=!!(Ke.wallet?.chainCode||Ke.chainCode||Ke.derivationMode==="bip32"),Ve=!!Ke.mnemonic;q(We&&!Ve)}catch{q(!1)}else q(!1)},[]),ce=reactExports.useCallback(()=>{j(null),W(null),z("unknown"),k(!1),q(!0),y(null)},[]),re=reactExports.useCallback(ve=>{D(ve)},[]),ie=reactExports.useCallback(ve=>{M.current=ve;const Ae=ve.getWalletInfo();!(Z==="mnemonic"||Ae.hasMnemonic)&&(Z==="dat"||Z==="txt"||Z==="json"&&Ae.hasChainCode)?(S(null),R(!0)):ve.identity?.nametag?(f("processing"),oe("Setup complete!"),U(!0)):f("nametag")},[Z]);reactExports.useEffect(()=>{if(!N||!M.current)return;let ve=!1;const Ae=M.current,Oe=new AbortController;return T.current=Oe,(async()=>{try{const Ue=await Ae.scanAddresses({maxAddresses:B,gapLimit:20,includeChange:!0,signal:Oe.signal,onProgress:Ve=>{ve||S(Ve)}});if(ve)return;const Ke=Ue.addresses.map(Ve=>({index:Ve.index,l1Address:Ve.address,l3Address:"",path:Ve.path,hasNametag:!!Ve.nametag,existingNametag:Ve.nametag,isChange:Ve.isChange,l1Balance:Ve.balance,balanceLoading:!1,ipnsLoading:!1}));if(!Ke.some(Ve=>Ve.index===0&&!Ve.isChange)){const Ve=Ae.deriveAddress(0,!1);Ke.unshift({index:0,l1Address:Ve.address,l3Address:"",path:Ve.path,hasNametag:!1,isChange:!1,l1Balance:0,balanceLoading:!1,ipnsLoading:!1})}const We=new Set(Ke.filter(Ve=>!Ve.isChange).map(Ve=>addrKey(Ve.index,!1)));le(We),R(!1),ae(Ke),f("addressSelection")}catch(Ue){if(ve)return;if(R(!1),Oe.signal.aborted){const Ke=Ae.deriveAddress(0,!1),We=[{index:0,l1Address:Ke.address,l3Address:"",path:Ke.path,hasNametag:!1,isChange:!1,l1Balance:0,balanceLoading:!1,ipnsLoading:!1}];ae(We),le(new Set(["0"])),f("addressSelection")}else y(Ue instanceof Error?Ue.message:"Scan failed"),f("importFile")}finally{ve||(T.current=null)}})(),()=>{ve=!0,Oe.abort()}},[N]);const fe=reactExports.useCallback(async()=>{if(!(!Q||!C)){if(O){f("passwordPrompt");return}p(!0),y(null);try{const ve=await o({fileContent:Q,fileName:C.name});if(!ve.success){if(ve.needsPassword){k(!0),f("passwordPrompt");return}y(ve.error||"Import failed");return}ve.mnemonic&&pe(ve.mnemonic),recordActivity("wallet_created",{isPublic:!1}),ve.sphere?ie(ve.sphere):f("nametag")}catch(ve){y(ve instanceof Error?ve.message:"Import failed")}finally{p(!1)}}},[Q,C,O,o,ie]),ye=reactExports.useCallback(async ve=>{if(!(!Q||!C)){p(!0),y(null);try{const Ae=await o({fileContent:Q,fileName:C.name,password:ve});if(!Ae.success){if(Ae.needsPassword){y("Incorrect password. Please try again.");return}y(Ae.error||"Decryption failed");return}Ae.mnemonic&&pe(Ae.mnemonic),recordActivity("wallet_created",{isPublic:!1}),Ae.sphere?ie(Ae.sphere):f("nametag")}catch(Ae){y(Ae instanceof Error?Ae.message:"Decryption failed")}finally{p(!1)}}},[Q,C,o,ie]),we=reactExports.useCallback(()=>{T.current?.abort()},[]),Re=reactExports.useCallback(ve=>{ve.preventDefault(),ee(!0)},[]),Me=reactExports.useCallback(ve=>{ve.preventDefault(),ee(!1)},[]),ke=reactExports.useCallback(async ve=>{ve.preventDefault(),ee(!1);const Ae=ve.dataTransfer.files[0];Ae&&await be(Ae)},[be]),Le=reactExports.useCallback(async()=>{y(null),f("nametag")},[]),Fe=reactExports.useCallback(async()=>{const ve=b.map(Oe=>Oe.trim().toLowerCase()),Ae=ve.findIndex(Oe=>Oe==="");if(Ae!==-1){y(`Please fill in word ${Ae+1}`);return}p(!0),y(null);try{const Oe=ve.join(" "),Ue=await a(Oe);M.current=Ue,Ue.identity?.nametag?(f("processing"),oe("Setup complete!"),U(!0)):f("nametag")}catch(Oe){const Ue=Oe instanceof Error?Oe.message:"Invalid recovery phrase";y(Ue)}finally{p(!1)}},[b,a]),Te=reactExports.useCallback(async()=>{if(!I.trim())return;p(!0),y(null);const ve=I.trim().replace("@","");f("processing"),oe("Checking Unicity ID availability...");try{if(await r(ve)){y(`@${ve} is already taken`),f("nametag"),p(!1);return}const Oe=M.current??e;if(Oe)oe("Registering Unicity ID..."),await Oe.registerNametag(ve),recordActivity("wallet_created",{isPublic:!1}),oe("Setup complete!"),U(!0);else{oe("Creating wallet and registering Unicity ID...");const Ue=await s({nametag:ve});pe(Ue),recordActivity("wallet_created",{isPublic:!1})}}catch(Ae){const Oe=Ae instanceof Error?Ae.message:"Failed to register Unicity ID";console.error("Wallet creation with nametag failed:",Ae),y(Oe),f("nametag")}finally{p(!1)}},[I,r,s,e]),Be=reactExports.useCallback(async()=>{p(!0),y(null);try{if(f("processing"),M.current??e)oe("Setup complete!"),U(!0),recordActivity("wallet_created",{isPublic:!1});else{oe("Creating wallet...");const ve=await s();pe(ve),recordActivity("wallet_created",{isPublic:!1})}}catch(ve){const Ae=ve instanceof Error?ve.message:"Failed to create wallet";console.error("Wallet creation failed:",ve),y(Ae),f("nametag")}finally{p(!1)}},[s,e]),ze=reactExports.useCallback(async()=>{l(M.current??void 0),M.current=null,t.invalidateQueries({queryKey:SPHERE_KEYS.identity.all}),t.invalidateQueries({queryKey:SPHERE_KEYS.payments.all}),window.dispatchEvent(new Event("wallet-loaded")),window.dispatchEvent(new Event("wallet-updated")),f("start")},[t,l]),de=reactExports.useCallback(async()=>{const ve=M.current??e;if(ve){p(!0);try{const Ae=G.length,Oe=ve.deriveAddress(Ae);ae(Ue=>[...Ue,{index:Ae,l1Address:Oe.address,l3Address:"",path:Oe.path,hasNametag:!1,ipnsLoading:!1,balanceLoading:!1}])}catch(Ae){const Oe=Ae instanceof Error?Ae.message:"Failed to derive new address";y(Oe)}finally{p(!1)}}},[G,e]),ne=reactExports.useCallback(async()=>{const ve=M.current??e;if(ve){p(!0),y(null);try{const Oe=ve.deriveAddresses(3).map((Ue,Ke)=>({index:Ke,l1Address:Ue.address,l3Address:"",path:Ue.path,hasNametag:!1,ipnsLoading:!1,balanceLoading:!1}));ae(Oe),le(new Set(Oe.filter(Ue=>!Ue.isChange).map(Ue=>addrKey(Ue.index,!1)))),f("addressSelection")}catch(Ae){const Oe=Ae instanceof Error?Ae.message:"Failed to derive addresses";y(Oe)}finally{p(!1)}}},[e]),se=reactExports.useCallback(async()=>{const ve=M.current??e;if(!(!ve||he.size===0)){p(!0),y(null);try{const Ae=G.filter(Ke=>!Ke.isChange).map(Ke=>({index:Ke.index,hidden:!he.has(addrKey(Ke.index,!1)),nametag:Ke.existingNametag}));await ve.trackScannedAddresses(Ae);const Oe=G.filter(Ke=>!Ke.isChange&&he.has(addrKey(Ke.index,!1))),Ue=Oe.find(Ke=>Ke.hasNametag)??Oe[0];Ue&&await ve.switchToAddress(Ue.index),ve.identity?.nametag?(f("processing"),oe("Setup complete!"),U(!0)):f("nametag")}catch(Ae){const Oe=Ae instanceof Error?Ae.message:"Failed to select address";y(Oe)}finally{p(!1)}}},[G,he,e]),me=reactExports.useCallback(ve=>{le(Ae=>{const Oe=new Set(Ae);return Oe.has(ve)?Oe.delete(ve):Oe.add(ve),Oe})},[]),Ee=reactExports.useCallback(()=>{le(new Set(G.filter(ve=>!ve.isChange).map(ve=>addrKey(ve.index,!1))))},[G]),_e=reactExports.useCallback(()=>{le(new Set)},[]);return{step:u,setStep:f,goToStart:xe,isBusy:d,error:m,setError:y,setIsBusy:p,seedWords:b,setSeedWords:E,selectedFile:C,scanCount:B,needsScanning:F,isDragging:V,scanProgress:v,showScanModal:N,nametagInput:I,setNametagInput:$,nametagAvailability:A,processingStatus:Y,isProcessingComplete:J,handleCompleteOnboarding:ze,derivedAddresses:G,selectedKeys:he,handleCreateKeys:Le,handleRestoreWallet:Fe,handleMintNametag:Te,handleSkipNametag:Be,handleDeriveNewAddress:de,handleContinueWithAddress:se,goToAddressSelection:ne,handleToggleSelect:me,handleSelectAll:Ee,handleDeselectAll:_e,handleFileSelect:be,handleClearFile:ce,handleScanCountChange:re,handleFileImport:fe,handlePasswordSubmit:ye,handleCancelScan:we,handleDragOver:Re,handleDragLeave:Me,handleDrop:ke,identity:e?.identity?{address:e.identity.directAddress??"",privateKey:""}:null,nametag:e?.identity?.nametag??null,generatedMnemonic:te}}function StartScreen({identity:t,nametag:e,isBusy:s,ipnsFetchingNametag:r,error:a,onCreateWallet:o,onContinueSetup:l,onRestore:c}){const u=t&&!e;return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"relative z-10 w-full max-w-90",children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative w-18 h-18 mx-auto mb-6",whileHover:{scale:1.05},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-br from-orange-500 to-orange-600 rounded-2xl blur-xl opacity-45"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full rounded-2xl bg-linear-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-xl shadow-orange-500/25",children:jsxRuntimeExports.jsx(Wallet,{className:"w-9 h-9 text-white"})})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight",children:u?"Complete Setup":"No Wallet Found"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-7 mx-auto leading-relaxed",children:u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Your wallet is ready. Create a"," ",jsxRuntimeExports.jsx("span",{className:"text-orange-500 dark:text-orange-400 font-semibold",children:"Unicity ID"})," ","to complete setup."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Create a new secure wallet to start using"," ",jsxRuntimeExports.jsx("span",{className:"text-orange-500 dark:text-orange-400 font-semibold whitespace-nowrap",children:"the Unicity Network"})]})}),u&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(motion.button,{onClick:l,disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.1},className:"relative w-full py-3.5 px-5 rounded-xl bg-linear-to-r from-emerald-500 to-emerald-600 text-white text-sm font-bold shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group mb-3",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-emerald-400 to-emerald-500 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[jsxRuntimeExports.jsx(ShieldCheck,{className:"w-4 h-4"}),"Continue Setup"]})]}),r&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center gap-2 text-neutral-500 dark:text-neutral-400 text-[11px] mb-2",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3 h-3 animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Checking for existing Unicity ID..."})]})]}),u&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 my-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-neutral-200 dark:bg-neutral-700"}),jsxRuntimeExports.jsx("span",{className:"text-[11px] text-neutral-400 dark:text-neutral-500",children:"or start fresh"}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-neutral-200 dark:bg-neutral-700"})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:o,disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.1},className:"relative w-full py-3.5 px-5 rounded-xl bg-linear-to-r from-orange-500 to-orange-600 text-white text-sm font-bold shadow-xl shadow-orange-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-orange-400 to-orange-500 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("span",{className:"relative z-10 flex items-center gap-2",children:s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Create New Wallet",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:c,disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.1},className:"relative w-full py-3.5 px-5 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-700 dark:text-neutral-300 text-sm font-bold border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mt-3 hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsx(KeyRound,{className:"w-4 h-4"}),"Restore Wallet"]}),a&&jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-red-500 dark:text-red-400 text-xs bg-red-500/10 border border-red-500/20 p-2 rounded-lg",children:a})]},"start")}function RestoreScreen({seedWords:t,isBusy:e,error:s,onSeedWordsChange:r,onRestore:a,onBack:o}){const l=(d,p)=>{const m=[...t];m[d]=p,r(m)},c=d=>{const m=d.clipboardData.getData("text").trim().split(/\s+/).filter(y=>y.length>0);if(m.length>1){d.preventDefault();const y=Array(12).fill("");m.slice(0,12).forEach((b,E)=>{y[E]=b.toLowerCase()}),r(y)}},u=(d,p)=>{d.key==="Enter"&&p<11?d.currentTarget.parentElement?.nextElementSibling?.querySelector("input")?.focus():d.key==="Enter"&&p===11&&a()},f=t.every(d=>d.trim());return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"relative z-10 w-full max-w-95",children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative w-18 h-18 mx-auto mb-6",whileHover:{scale:1.05},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-blue-500/30 rounded-2xl blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full rounded-2xl bg-linear-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-xl shadow-blue-500/25",children:jsxRuntimeExports.jsx(KeyRound,{className:"w-9 h-9 text-white"})})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight",children:"Restore Wallet"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-6 mx-auto leading-relaxed",children:"Enter your 12-word recovery phrase to restore your wallet"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2 mb-5",children:Array.from({length:12}).map((d,p)=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("span",{className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-xs text-neutral-400 dark:text-neutral-600 font-medium z-10",children:[p+1,"."]}),jsxRuntimeExports.jsx("input",{type:"text",value:t[p],onChange:m=>l(p,m.target.value),onPaste:c,onKeyDown:m=>u(m,p),placeholder:"word",className:"w-full bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50 rounded-lg py-2.5 pl-8 pr-2 text-sm text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none focus:border-blue-500 focus:bg-white dark:focus:bg-neutral-800 transition-all",autoFocus:p===0})]},`seed-input-${p}`))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(motion.button,{onClick:o,disabled:e,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 py-3.5 px-5 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-700 dark:text-neutral-300 text-sm font-bold border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),jsxRuntimeExports.jsxs(motion.button,{onClick:a,disabled:e||!f,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-2 relative py-3.5 px-5 rounded-xl bg-linear-to-r from-blue-500 to-blue-600 text-white text-sm font-bold shadow-xl shadow-blue-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-blue-400 to-blue-500 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("span",{className:"relative z-10 flex items-center gap-2",children:e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Restoring..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Restore",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})})]})]}),s&&jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-red-500 dark:text-red-400 text-xs bg-red-500/10 border border-red-500/20 p-2 rounded-lg",children:s})]},"restore")}function RestoreMethodScreen({isBusy:t,error:e,onSelectMnemonic:s,onSelectFile:r,onBack:a}){return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"relative z-10 w-full max-w-90",children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative w-18 h-18 mx-auto mb-6",whileHover:{scale:1.05},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-blue-500/30 rounded-2xl blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full rounded-2xl bg-linear-to-br from-blue-500 to-blue-600 flex items-center justify-center shadow-xl shadow-blue-500/25",children:jsxRuntimeExports.jsx(KeyRound,{className:"w-9 h-9 text-white"})})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight",children:"Restore Wallet"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-7 mx-auto leading-relaxed",children:"Choose how you want to restore your wallet"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 mb-5",children:[jsxRuntimeExports.jsx(motion.button,{onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50 hover:border-blue-500/50 dark:hover:border-blue-500/50 transition-all text-left group",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/10 flex items-center justify-center group-hover:bg-blue-500/20 transition-colors",children:jsxRuntimeExports.jsx(KeyRound,{className:"w-6 h-6 text-blue-500"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-bold text-neutral-900 dark:text-white mb-0.5",children:"Recovery Phrase"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Use your 12-word mnemonic phrase"})]}),jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 text-neutral-400 group-hover:text-blue-500 transition-colors"})]})}),jsxRuntimeExports.jsx(motion.button,{onClick:r,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50 hover:border-orange-500/50 dark:hover:border-orange-500/50 transition-all text-left group",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-orange-500/10 flex items-center justify-center group-hover:bg-orange-500/20 transition-colors",children:jsxRuntimeExports.jsx(Upload,{className:"w-6 h-6 text-orange-500"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-bold text-neutral-900 dark:text-white mb-0.5",children:"Import from File"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Import wallet from .json, .dat or .txt file"})]}),jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 text-neutral-400 group-hover:text-orange-500 transition-colors"})]})})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:a,disabled:t,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-3.5 px-5 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-700 dark:text-neutral-300 text-sm font-bold border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),e&&jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-red-500 dark:text-red-400 text-xs bg-red-500/10 border border-red-500/20 p-2 rounded-lg",children:e})]},"restoreMethod")}function ImportFileScreen({selectedFile:t,scanCount:e,needsScanning:s,isDragging:r,isBusy:a,error:o,onFileSelect:l,onClearFile:c,onScanCountChange:u,onDragOver:f,onDragLeave:d,onDrop:p,onImport:m,onBack:y}){return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"relative z-10 w-full max-w-90",children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative w-18 h-18 mx-auto mb-6",whileHover:{scale:1.05},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-orange-500/30 rounded-2xl blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full rounded-2xl bg-linear-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-xl shadow-orange-500/25",children:jsxRuntimeExports.jsx(Upload,{className:"w-9 h-9 text-white"})})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight",children:"Import Wallet"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-6 mx-auto leading-relaxed",children:"Select a wallet file to import"}),t?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-xl mb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[t.name.endsWith(".json")?jsxRuntimeExports.jsx(FileBraces,{className:"w-5 h-5 text-orange-500 shrink-0"}):jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-orange-500 shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-900 dark:text-white font-medium truncate",children:t.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-neutral-500",children:[(t.size/1024).toFixed(1)," KB"]})]}),jsxRuntimeExports.jsx("button",{onClick:c,className:"p-1.5 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4 text-neutral-400"})})]})}),s?jsxRuntimeExports.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-xl mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-700 dark:text-neutral-300 mb-2 font-medium",children:"How many addresses to scan?"}),jsxRuntimeExports.jsx("input",{type:"number",value:e,onChange:b=>u(Math.max(1,parseInt(b.target.value)||10)),className:"w-full px-3 py-2 bg-white dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-600 rounded-lg text-sm text-neutral-900 dark:text-white focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-500",min:1})]}):jsxRuntimeExports.jsx("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-xl mb-3",children:jsxRuntimeExports.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300 font-medium",children:"Addresses will be imported from file"})})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{onDragOver:f,onDragLeave:d,onDrop:p,className:`w-full border-2 border-dashed rounded-xl p-6 text-center transition-colors mb-5 ${r?"border-orange-500 bg-orange-500/10":"border-neutral-300 dark:border-neutral-600 hover:border-orange-400 hover:bg-neutral-50 dark:hover:bg-neutral-800/50"}`,children:[jsxRuntimeExports.jsx(Upload,{className:`w-10 h-10 mx-auto mb-3 ${r?"text-orange-500":"text-neutral-400"}`}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-700 dark:text-neutral-300 font-medium mb-1",children:"Select wallet file"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500 mb-3",children:".json, .txt or .dat"}),jsxRuntimeExports.jsxs("label",{className:"inline-block cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",accept:".json,.txt,.dat",onChange:b=>{const E=b.target.files?.[0];E&&l(E)}}),jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg transition-colors",children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),"Choose File"]})]}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-neutral-400 dark:text-neutral-600 mt-3 hidden sm:block",children:"or drag & drop here"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(motion.button,{onClick:y,disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 py-3.5 px-5 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-700 dark:text-neutral-300 text-sm font-bold border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),t&&jsxRuntimeExports.jsxs(motion.button,{onClick:m,disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-2 relative py-3.5 px-5 rounded-xl bg-linear-to-r from-orange-500 to-orange-600 text-white text-sm font-bold shadow-xl shadow-orange-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-orange-400 to-orange-500 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("span",{className:"relative z-10 flex items-center gap-2",children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Import",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})})]})]}),o&&jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-red-500 dark:text-red-400 text-xs bg-red-500/10 border border-red-500/20 p-2 rounded-lg",children:o})]},"importFile")}function PasswordPromptScreen({fileName:t,isBusy:e,error:s,onSubmit:r,onBack:a}){const[o,l]=reactExports.useState(""),[c,u]=reactExports.useState(!1),f=d=>{d.preventDefault(),o.trim()&&r(o)};return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"relative z-10 w-full max-w-90",children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative w-18 h-18 mx-auto mb-6",whileHover:{scale:1.05},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-amber-500/30 rounded-2xl blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full rounded-2xl bg-linear-to-br from-amber-500 to-amber-600 flex items-center justify-center shadow-xl shadow-amber-500/25",children:jsxRuntimeExports.jsx(Lock,{className:"w-9 h-9 text-white"})})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight",children:"Enter Password"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-6 mx-auto leading-relaxed",children:["The file"," ",jsxRuntimeExports.jsx("span",{className:"font-medium text-neutral-700 dark:text-neutral-300",children:t})," ","is encrypted"]}),jsxRuntimeExports.jsxs("form",{onSubmit:f,children:[jsxRuntimeExports.jsxs("div",{className:"relative mb-5",children:[jsxRuntimeExports.jsx("input",{type:c?"text":"password",value:o,onChange:d=>l(d.target.value),placeholder:"Wallet password",autoFocus:!0,disabled:e,className:"w-full px-4 py-3 bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50 rounded-xl text-sm text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-500 focus:outline-none focus:border-amber-500 focus:ring-1 focus:ring-amber-500 pr-12 disabled:opacity-50"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors",children:c?jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(motion.button,{type:"button",onClick:a,disabled:e,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 py-3.5 px-5 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-700 dark:text-neutral-300 text-sm font-bold border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),jsxRuntimeExports.jsxs(motion.button,{type:"submit",disabled:e||!o.trim(),whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-2 relative py-3.5 px-5 rounded-xl bg-linear-to-r from-amber-500 to-amber-600 text-white text-sm font-bold shadow-xl shadow-amber-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-amber-400 to-amber-500 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("span",{className:"relative z-10 flex items-center gap-2",children:e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Decrypting..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Unlock",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})})]})]})]}),s&&jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-red-500 dark:text-red-400 text-xs bg-red-500/10 border border-red-500/20 p-2 rounded-lg",children:s})]},"passwordPrompt")}function ScanningScreen({open:t,progress:e,onCancel:s}){const r=e?.scanned??0,a=e?.total??1,o=e?.foundCount??0,l=Math.round(r/a*100);return jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},className:"w-full max-w-90 bg-white dark:bg-neutral-900 rounded-2xl p-5 shadow-2xl",children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative w-14 h-14 mx-auto mb-5",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-cyan-500/30 rounded-2xl blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full rounded-2xl bg-linear-to-br from-cyan-500 to-cyan-600 flex items-center justify-center shadow-xl shadow-cyan-500/25",children:jsxRuntimeExports.jsx(Search,{className:"w-7 h-7 text-white"})})]}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight text-center",children:"Scanning Blockchain"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-xs mb-5 mx-auto leading-relaxed text-center",children:"Searching for addresses with balance"}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 dark:text-neutral-400 mb-2",children:[jsxRuntimeExports.jsxs("span",{children:[r," / ",a," addresses"]}),jsxRuntimeExports.jsxs("span",{children:[l,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-2 bg-neutral-200 dark:bg-neutral-700 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx(motion.div,{className:"h-full bg-linear-to-r from-cyan-500 to-cyan-400 rounded-full",initial:{width:0},animate:{width:`${l}%`},transition:{duration:.3}})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700 rounded-xl mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Addresses found"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-neutral-900 dark:text-white",children:o})]}),(e?.nametagsFoundCount??0)>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"With Unicity IDs"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:e.nametagsFoundCount})]}),e?.currentAddress&&jsxRuntimeExports.jsx("div",{className:"mt-2 text-[10px] text-neutral-400 dark:text-neutral-500 font-mono truncate",children:e.currentAddress})]}),jsxRuntimeExports.jsxs(motion.button,{onClick:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-3.5 px-5 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-700 dark:text-neutral-300 text-sm font-bold border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-2 hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsx(X,{className:"w-4 h-4"}),"Skip Scanning"]})]},"scan-modal-content")},"scan-modal-backdrop")})}function truncateAddress(t,e=12,s=8){return t?t.length<=e+s+3?t:`${t.slice(0,e)}...${t.slice(-s)}`:""}function formatBalance(t){return t===0?"0":t<.001?"<0.001":t.toLocaleString(void 0,{maximumFractionDigits:8})}function AddressSelectionScreen({derivedAddresses:t,selectedKeys:e,isBusy:s,error:r,onToggleSelect:a,onSelectAll:o,onDeselectAll:l,onDeriveNewAddress:c,onContinue:u,onBack:f}){const d=t.filter(y=>!y.isChange),p=e.size,m=p===d.length&&d.length>0;return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"relative z-10 w-full max-w-95",children:[jsxRuntimeExports.jsxs(motion.div,{className:"relative w-18 h-18 mx-auto mb-6",whileHover:{scale:1.05},children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-purple-500/30 rounded-2xl blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full rounded-2xl bg-linear-to-br from-purple-500 to-purple-600 flex items-center justify-center shadow-xl shadow-purple-500/25",children:jsxRuntimeExports.jsx(Wallet,{className:"w-9 h-9 text-white"})})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight",children:"Select Addresses"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm mb-4 mx-auto leading-relaxed",children:["Choose which addresses to"," ",jsxRuntimeExports.jsx("span",{className:"text-purple-500 dark:text-purple-400 font-semibold",children:"publish"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("button",{onClick:m?l:o,className:"text-xs font-medium text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 transition-colors",children:m?"Deselect All":"Select All"}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:[p," of ",d.length," selected"]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-60 overflow-y-auto rounded-xl border border-neutral-200 dark:border-neutral-700 mb-3",children:t.length===0?jsxRuntimeExports.jsxs("div",{className:"py-6 flex items-center justify-center gap-3",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin text-purple-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Loading addresses..."})]}):t.map(y=>{const b=addrKey(y.index,y.isChange),E=!!y.isChange,C=e.has(b),j=(y.l1Balance??0)>0;return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 border-b last:border-b-0 border-neutral-100 dark:border-neutral-800 transition-colors ${E?"bg-neutral-50 dark:bg-neutral-900/50":C?"bg-purple-50/50 dark:bg-purple-900/10":"bg-white dark:bg-neutral-900"}`,children:[E?jsxRuntimeExports.jsx("div",{className:"shrink-0 w-4.5"}):jsxRuntimeExports.jsx("button",{onClick:()=>a(b),className:"shrink-0 text-purple-500 dark:text-purple-400 hover:text-purple-600 dark:hover:text-purple-300 transition-colors",children:C?jsxRuntimeExports.jsx(SquareCheckBig,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Square,{className:"w-4 h-4 text-neutral-300 dark:text-neutral-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] text-neutral-400 dark:text-neutral-500 font-medium",children:["#",y.index]}),jsxRuntimeExports.jsx("span",{className:`text-xs font-mono truncate ${E?"text-neutral-500 dark:text-neutral-400":"text-neutral-900 dark:text-white"}`,children:truncateAddress(y.l1Address)}),E&&jsxRuntimeExports.jsx("span",{className:"px-1 py-0.5 bg-amber-500/20 text-amber-600 dark:text-amber-400 text-[8px] font-bold rounded shrink-0",children:"CHG"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[j&&jsxRuntimeExports.jsxs("span",{className:`text-[11px] font-medium ${E?"text-neutral-500 dark:text-neutral-400":"text-neutral-600 dark:text-neutral-300"}`,children:[formatBalance(y.l1Balance)," ALPHA"]}),y.hasNametag&&y.existingNametag&&jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded-full bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 text-[10px] font-medium",children:[jsxRuntimeExports.jsx(Check,{className:"w-2.5 h-2.5"}),"@",y.existingNametag]})]})]})]},b)})}),jsxRuntimeExports.jsxs("button",{onClick:c,disabled:s,className:"w-full mb-3 px-4 py-2 flex items-center justify-center gap-2 text-xs font-medium text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-xl border border-dashed border-purple-300 dark:border-purple-700 transition-colors disabled:opacity-50",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3.5 h-3.5"}),"Derive New Address",s&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3.5 h-3.5 animate-spin ml-1"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs(motion.button,{onClick:f,disabled:s,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 py-3.5 px-5 rounded-xl bg-neutral-100 dark:bg-neutral-800/50 text-neutral-700 dark:text-neutral-300 text-sm font-bold border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-neutral-200 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),jsxRuntimeExports.jsxs(motion.button,{onClick:u,disabled:s||p===0,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-2 relative py-3.5 px-5 rounded-xl bg-linear-to-r from-purple-500 to-purple-600 text-white text-sm font-bold shadow-xl shadow-purple-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-purple-400 to-purple-500 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("span",{className:"relative z-10 flex items-center gap-2",children:s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Continue (",p,")",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})})]})]}),r&&jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-red-500 dark:text-red-400 text-xs bg-red-500/10 border border-red-500/20 p-2 rounded-lg",children:r})]},"addressSelection")}function NametagScreen({nametagInput:t,isBusy:e,error:s,availability:r,onNametagChange:a,onSubmit:o,onSkip:l,onBack:c}){const u=p=>{const m=p.target.value.toLowerCase();/^[a-z0-9_\-+.]*$/.test(m)&&a(m)},f=t&&!e&&r!=="taken"&&r!=="checking",d=p=>{p.key==="Enter"&&f&&o()};return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.1},className:"relative z-10 w-full max-w-90",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"relative w-18 h-18 mx-auto mb-5",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 rounded-full blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full rounded-full bg-neutral-100 dark:bg-neutral-800/80 border-2 border-emerald-500/50 flex items-center justify-center backdrop-blur-sm",children:jsxRuntimeExports.jsx(ShieldCheck,{className:"w-9 h-9 text-emerald-500 dark:text-emerald-400"})})]}),jsxRuntimeExports.jsx(motion.h2,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2 tracking-tight",children:"Choose Unicity ID"}),jsxRuntimeExports.jsxs(motion.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-neutral-500 dark:text-neutral-400 text-sm mb-5 mx-auto leading-relaxed",children:["Choose a unique"," ",jsxRuntimeExports.jsx("span",{className:"text-orange-500 dark:text-orange-400 font-bold",children:"Unicity ID"})," ","to receive tokens easily without long addresses."]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"relative mb-4 group",children:[jsxRuntimeExports.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1.5 z-10",children:[r==="checking"&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3.5 h-3.5 text-neutral-400 animate-spin"}),r==="available"&&jsxRuntimeExports.jsx(CircleCheck,{className:"w-3.5 h-3.5 text-emerald-500"}),r==="taken"&&jsxRuntimeExports.jsx(CircleAlert,{className:"w-3.5 h-3.5 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-neutral-400 dark:text-neutral-500 group-focus-within:text-orange-500 dark:group-focus-within:text-orange-400 transition-colors text-xs font-medium",children:"@unicity"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:t,onChange:u,onKeyDown:d,placeholder:"id",className:`w-full bg-neutral-100 dark:bg-neutral-800/50 border rounded-xl py-3 pl-3 pr-28 text-sm text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none focus:bg-white dark:focus:bg-neutral-800 transition-all backdrop-blur-sm ${r==="taken"?"border-red-400 dark:border-red-500/50 focus:border-red-500":r==="available"?"border-emerald-400 dark:border-emerald-500/50 focus:border-emerald-500":"border-neutral-200 dark:border-neutral-700/50 focus:border-orange-500"}`,autoFocus:!0}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-xl bg-linear-to-r from-orange-500/0 via-orange-500/5 to-purple-500/0 opacity-0 group-focus-within:opacity-100 transition-opacity pointer-events-none"})]}),jsxRuntimeExports.jsxs("div",{className:"h-5 -mt-2 mb-1",children:[r==="taken"&&!s&&jsxRuntimeExports.jsxs("p",{className:"text-red-500 dark:text-red-400 text-xs",children:["@",t," is already taken"]}),r==="available"&&jsxRuntimeExports.jsxs("p",{className:"text-emerald-500 dark:text-emerald-400 text-xs",children:["@",t," is available"]})]}),jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},onClick:o,disabled:!f,whileHover:{scale:1.02},whileTap:{scale:.98},className:"relative w-full py-3.5 px-5 rounded-xl bg-linear-to-r from-orange-500 to-orange-600 text-white text-sm font-bold shadow-xl shadow-orange-500/25 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-orange-400 to-orange-500 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Continue",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})]}),l&&jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},onClick:l,disabled:e,className:"w-full mt-3 py-2.5 text-xs text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors disabled:opacity-50",children:"Skip for now"}),c&&jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},onClick:c,disabled:e,className:"w-full mt-2 py-2.5 text-xs text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors disabled:opacity-50 flex items-center justify-center gap-1.5",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-3.5 h-3.5"}),"Back"]}),s&&jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-red-500 dark:text-red-400 text-xs bg-red-500/10 border border-red-500/20 p-2 rounded-lg",children:s})]},"nametag")}function ProcessingScreen({status:t,isComplete:e=!1,onComplete:s}){return console.log(" ProcessingScreen render:",{status:t,isComplete:e,hasOnComplete:!!s}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.1},className:"relative z-10 text-center w-full max-w-90",children:[jsxRuntimeExports.jsx("div",{className:"relative mx-auto w-22 h-22 mb-6",children:e?jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-emerald-500/30 rounded-full blur-xl"}),jsxRuntimeExports.jsx(CircleCheck,{className:"w-22 h-22 text-emerald-500 dark:text-emerald-400"})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-0 border-3 border-neutral-200 dark:border-neutral-800/50 rounded-full",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"}}),jsxRuntimeExports.jsx(motion.div,{className:"absolute inset-1.5 border-3 border-orange-500/30 rounded-full border-t-orange-500 border-r-orange-500",animate:{rotate:-360},transition:{duration:2,repeat:1/0,ease:"linear"}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-3 bg-orange-500/20 rounded-full blur-xl"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.1,1],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 text-orange-500 dark:text-orange-400 animate-spin"})})})]})}),jsxRuntimeExports.jsx(motion.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-xl font-bold text-neutral-900 dark:text-white mb-5 tracking-tight",children:e?"Profile Ready!":"Setting up Profile..."}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"space-y-2 text-xs",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-2 text-neutral-700 dark:text-neutral-300 bg-orange-50 dark:bg-orange-900/20 px-3 py-2.5 rounded-lg backdrop-blur-sm border border-orange-200 dark:border-orange-700/30",children:[jsxRuntimeExports.jsx(motion.div,{animate:{scale:[1,1.2,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},className:"w-2 h-2 rounded-full bg-orange-500 dark:bg-orange-400 shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-left font-medium",children:t||"Initializing..."})]},t),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 mt-4",children:[jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${t.includes("Minting")?"bg-orange-500":t.includes("Syncing")||t.includes("Verifying")?"bg-emerald-500":"bg-neutral-300 dark:bg-neutral-600"}`}),jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${t.includes("Syncing")?"bg-orange-500":t.includes("Verifying")?"bg-emerald-500":"bg-neutral-300 dark:bg-neutral-600"}`}),jsxRuntimeExports.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${t.includes("Verifying")?"bg-orange-500":"bg-neutral-300 dark:bg-neutral-600"}`})]})]}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"mt-4 text-[10px] text-neutral-400 dark:text-neutral-500",children:t.includes("Verifying")?"Verifying IPFS storage (up to 60 seconds)...":"This may take a few moments..."}),!e&&(t.includes("Syncing")||t.includes("Verifying"))&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1.5},className:"mt-4 px-3 py-2 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700/30 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-[10px] text-amber-700 dark:text-amber-300 font-medium",children:"Don't close this page until sync completes"}),jsxRuntimeExports.jsx("p",{className:"text-[9px] text-amber-600 dark:text-amber-400 mt-1",children:"Your Unicity ID needs to be saved to decentralized storage for recovery on other devices"})]}),e&&s&&jsxRuntimeExports.jsx(motion.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,type:"spring",stiffness:200},onClick:s,className:"mt-6 w-full px-5 py-3.5 bg-linear-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white font-bold text-sm rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98]",children:"Let's go!"})]},"processing")}function CreateWalletFlow(){const{step:t,setStep:e,goToStart:s,isBusy:r,error:a,seedWords:o,setSeedWords:l,selectedFile:c,scanCount:u,needsScanning:f,isDragging:d,scanProgress:p,showScanModal:m,nametagInput:y,setNametagInput:b,nametagAvailability:E,processingStatus:C,isProcessingComplete:j,handleCompleteOnboarding:B,derivedAddresses:D,selectedKeys:F,handleToggleSelect:q,handleSelectAll:V,handleDeselectAll:ee,handleCreateKeys:Q,handleRestoreWallet:W,handleMintNametag:Z,handleSkipNametag:z,handleDeriveNewAddress:O,handleContinueWithAddress:k,handleFileSelect:v,handleClearFile:S,handleScanCountChange:N,handleFileImport:R,handlePasswordSubmit:T,handleCancelScan:M,handleDragOver:I,handleDragLeave:$,handleDrop:A,identity:L,nametag:Y}=useOnboardingFlow();return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center relative",children:[jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",children:[t==="start"&&jsxRuntimeExports.jsx(StartScreen,{identity:L,nametag:Y,isBusy:r,ipnsFetchingNametag:!1,error:a,onCreateWallet:Q,onContinueSetup:()=>e("nametag"),onRestore:()=>e("restoreMethod")}),t==="restoreMethod"&&jsxRuntimeExports.jsx(RestoreMethodScreen,{isBusy:r,error:a,onSelectMnemonic:()=>e("restore"),onSelectFile:()=>e("importFile"),onBack:s}),t==="restore"&&jsxRuntimeExports.jsx(RestoreScreen,{seedWords:o,isBusy:r,error:a,onSeedWordsChange:l,onRestore:W,onBack:()=>e("restoreMethod")}),t==="importFile"&&jsxRuntimeExports.jsx(ImportFileScreen,{selectedFile:c,scanCount:u,needsScanning:f,isDragging:d,isBusy:r,error:a,onFileSelect:v,onClearFile:S,onScanCountChange:N,onDragOver:I,onDragLeave:$,onDrop:A,onImport:R,onBack:()=>e("restoreMethod")}),t==="passwordPrompt"&&jsxRuntimeExports.jsx(PasswordPromptScreen,{fileName:c?.name||"",isBusy:r,error:a,onSubmit:T,onBack:()=>e("importFile")}),t==="addressSelection"&&jsxRuntimeExports.jsx(AddressSelectionScreen,{derivedAddresses:D,selectedKeys:F,isBusy:r,error:a,onToggleSelect:q,onSelectAll:V,onDeselectAll:ee,onDeriveNewAddress:O,onContinue:k,onBack:s}),t==="nametag"&&jsxRuntimeExports.jsx(NametagScreen,{nametagInput:y,isBusy:r,error:a,availability:E,onNametagChange:b,onSubmit:Z,onSkip:z,onBack:s}),t==="processing"&&jsxRuntimeExports.jsx(ProcessingScreen,{status:C,isComplete:j,onComplete:B})]}),jsxRuntimeExports.jsx(ScanningScreen,{open:m,progress:p,onCancel:M})]})}const sizeClasses$1={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg"};function BaseModal({isOpen:t,onClose:e,children:s,size:r="md",showOrbs:a=!0,className:o=""}){return jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-100 bg-black/60 dark:bg-black/80 backdrop-blur-sm"}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-100 flex items-center justify-center p-4 sm:p-6 pointer-events-none",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",bounce:.2,duration:.6},onClick:l=>l.stopPropagation(),className:`relative w-full ${sizeClasses$1[r]} max-h-[70dvh] sm:max-h-[600px] bg-white dark:bg-[#111] border border-neutral-200 dark:border-white/10 rounded-3xl shadow-2xl pointer-events-auto flex flex-col overflow-hidden ${o}`,children:[a&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-orange-500/10 rounded-full blur-3xl pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-purple-500/10 rounded-full blur-3xl pointer-events-none"})]}),s]})})]})})}const iconVariantClasses={gradient:{badge:"bg-linear-to-br from-orange-500 to-orange-600 shadow-lg shadow-orange-500/30",icon:"text-white"},neutral:{badge:"bg-neutral-100 dark:bg-neutral-800",icon:"text-neutral-600 dark:text-neutral-400"}};function ModalHeader({title:t,onClose:e,icon:s,iconVariant:r="gradient",subtitle:a,closeDisabled:o=!1}){const l=iconVariantClasses[r];return jsxRuntimeExports.jsxs("div",{className:"relative z-10 px-6 py-3 border-b border-neutral-200/50 dark:border-neutral-700/50 flex justify-between items-center shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[s&&jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.05},className:`relative w-11 h-11 rounded-xl flex items-center justify-center ${l.badge}`,children:jsxRuntimeExports.jsx(s,{className:`w-5 h-5 ${l.icon}`})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white",children:t}),a&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:a})]})]}),jsxRuntimeExports.jsx(motion.button,{whileHover:o?{}:{scale:1.1},whileTap:o?{}:{scale:.9},onClick:e,disabled:o,className:`w-9 h-9 flex items-center justify-center rounded-xl transition-colors ${o?"bg-neutral-200/50 dark:bg-neutral-800/50 text-neutral-400 dark:text-neutral-600 cursor-not-allowed":"hover:bg-neutral-200/80 dark:hover:bg-neutral-800/80 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-white"}`,children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})}const variantConfig={error:{icon:CircleX,bgClass:"bg-red-500/10",borderClass:"border-red-500/20",textClass:"text-red-600 dark:text-red-400",iconClass:"text-red-500 dark:text-red-400"},warning:{icon:TriangleAlert,bgClass:"bg-amber-500/10",borderClass:"border-amber-500/20",textClass:"text-amber-600 dark:text-amber-400",iconClass:"text-amber-500 dark:text-amber-400"},success:{icon:CircleCheckBig,bgClass:"bg-green-500/10",borderClass:"border-green-500/20",textClass:"text-green-600 dark:text-green-400",iconClass:"text-green-500 dark:text-green-400"},info:{icon:Info,bgClass:"bg-blue-500/10",borderClass:"border-blue-500/20",textClass:"text-blue-600 dark:text-blue-400",iconClass:"text-blue-500 dark:text-blue-400"}};function AlertMessage({variant:t,children:e,title:s,onDismiss:r,icon:a}){const o=variantConfig[t],l=a||o.icon;return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`p-4 ${o.bgClass} border ${o.borderClass} rounded-xl`,children:s?jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(l,{className:`w-5 h-5 ${o.iconClass} shrink-0`}),jsxRuntimeExports.jsx("p",{className:`text-sm font-bold ${o.textClass}`,children:s}),r&&jsxRuntimeExports.jsx("button",{onClick:r,className:`${o.iconClass} hover:opacity-70 transition-opacity shrink-0 ml-auto`,children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("div",{className:`text-xs ${o.textClass} opacity-80 pl-8`,children:e})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(l,{className:`w-4 h-4 ${o.iconClass} shrink-0 mt-0.5`}),jsxRuntimeExports.jsx("div",{className:`flex-1 min-w-0 text-xs ${o.textClass}`,children:e}),r&&jsxRuntimeExports.jsx("button",{onClick:r,className:`${o.iconClass} hover:opacity-70 transition-opacity shrink-0`,children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})})}function EmptyState$1({icon:t=Sparkles,title:e,description:s,action:r}){return jsxRuntimeExports.jsxs("div",{className:"h-full min-h-[300px] flex flex-col items-center justify-center text-center py-12",children:[jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"relative w-20 h-20 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-orange-500/20 rounded-3xl blur-xl"}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-full bg-neutral-200/80 dark:bg-neutral-800/80 rounded-3xl flex items-center justify-center border border-neutral-300/50 dark:border-neutral-700/50",children:jsxRuntimeExports.jsx(t,{className:"w-10 h-10 text-orange-500 dark:text-orange-400"})})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-900 dark:text-white font-bold text-lg mb-2",children:e}),s&&jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm max-w-[220px] leading-relaxed",children:s}),r&&jsxRuntimeExports.jsx("div",{className:"mt-6",children:r})]})}const variantClasses={primary:"bg-orange-500 hover:bg-orange-600 text-white shadow-lg shadow-orange-500/25",secondary:"bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 text-neutral-700 dark:text-white",danger:"bg-red-500 hover:bg-red-600 text-white shadow-lg shadow-red-500/25",success:"bg-emerald-500 hover:bg-emerald-600 text-white shadow-lg shadow-emerald-500/25"},sizeClasses={sm:"py-2 px-4 text-sm rounded-lg",md:"py-3 px-6 text-sm rounded-xl",lg:"py-4 px-8 text-base rounded-xl"};function Button({variant:t="primary",size:e="md",icon:s,iconPosition:r="left",loading:a=!1,loadingText:o="Loading...",children:l,fullWidth:c=!1,disabled:u,className:f="",...d}){const p=u||a;return jsxRuntimeExports.jsx(motion.button,{whileHover:p?{}:{scale:1.02},whileTap:p?{}:{scale:.98},disabled:p,className:`
        ${variantClasses[t]}
        ${sizeClasses[e]}
        ${c?"w-full":""}
        font-semibold flex items-center justify-center gap-2 transition-colors
        disabled:opacity-50 disabled:cursor-not-allowed
        ${f}
      `,...d,children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),jsxRuntimeExports.jsx("span",{children:o})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[s&&r==="left"&&jsxRuntimeExports.jsx(s,{className:"w-5 h-5"}),l,s&&r==="right"&&jsxRuntimeExports.jsx(s,{className:"w-5 h-5"})]})})}function SecondaryButton(t){return jsxRuntimeExports.jsx(Button,{variant:"secondary",...t})}function DangerButton(t){return jsxRuntimeExports.jsx(Button,{variant:"danger",...t})}const colorClasses={blue:{bg:"bg-blue-500/10",icon:"text-blue-500"},green:{bg:"bg-green-500/10",icon:"text-green-500"},red:{bg:"bg-red-500/10",icon:"text-red-500"},orange:{bg:"bg-orange-500/10",icon:"text-orange-500"},purple:{bg:"bg-purple-500/10",icon:"text-purple-500"},neutral:{bg:"bg-neutral-500/10",icon:"text-neutral-500"}};function MenuButton({icon:t,color:e="blue",label:s,subtitle:r,onClick:a,showChevron:o=!0,danger:l=!1}){const c=colorClasses[e];return jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.01,x:2},whileTap:{scale:.99},onClick:a,className:`w-full flex items-center gap-4 p-4 bg-neutral-50 dark:bg-neutral-800/50 rounded-2xl transition-colors group ${l?"hover:bg-red-50 dark:hover:bg-red-900/10":"hover:bg-neutral-100 dark:hover:bg-neutral-800"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-xl ${c.bg} flex items-center justify-center shrink-0`,children:jsxRuntimeExports.jsx(t,{className:`w-6 h-6 ${c.icon}`})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 text-left min-w-0",children:[jsxRuntimeExports.jsx("span",{className:`font-semibold block ${l?"text-red-500":"text-neutral-900 dark:text-white"}`,children:s}),r&&jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate block",children:r})]}),o&&!l&&jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5 text-neutral-400 group-hover:text-neutral-600 dark:group-hover:text-neutral-300 transition-colors shrink-0"})]})}function SendModal$1({isOpen:t,onClose:e,prefill:s}){const{assets:r}=useAssets(),{transfer:a,isLoading:o}=useTransfer(),{sphere:l}=useSphereContext(),c=r,[u,f]=reactExports.useState("recipient"),[d,p]=reactExports.useState("nametag"),[m,y]=reactExports.useState(""),[b,E]=reactExports.useState(!1),[C,j]=reactExports.useState(null),[B,D]=reactExports.useState(null),[F,q]=reactExports.useState(""),[V,ee]=reactExports.useState(""),Q=reactExports.useRef(!1);reactExports.useEffect(()=>{if(!s||!t||Q.current||c.length===0)return;const{to:R,amount:T,coinId:M}=s;R.startsWith("DIRECT://")?(p("direct"),y(R)):(p("nametag"),y(R.replace(/^@/,""))),q(T),s.memo&&ee(s.memo);const I=c.find($=>$.coinId===M);I&&(D(I),f("confirm"),Q.current=!0)},[s,t,c]);const W=R=>{if(d==="nametag"){const T=R.target.value.toLowerCase();/^@?[a-z0-9_\-+.]*$/.test(T)&&(y(T),j(null))}else y(R.target.value),j(null)},Z=()=>{f("recipient"),p("nametag"),y(""),D(null),q(""),ee(""),j(null),Q.current=!1},z=()=>{Z(),e()},O=async()=>{if(m.trim()){E(!0),j(null);try{if(d==="direct"){const R=m.trim();if(!R.startsWith("DIRECT://")){j("Direct address must start with DIRECT://");return}y(R),f("asset")}else{const R=m.replace("@","").replace("@unicity","").trim(),T=l?.getTransport();T?.resolveNametag?await T.resolveNametag(R)?(y(R),f("asset")):j(`User @${R} not found`):(y(R),f("asset"))}}catch{j("Network error")}finally{E(!1)}}},k=()=>{!B||!F||toSmallestUnit(F,B.decimals)<=0n||f("confirm")},v=async()=>{if(!(!B||!F||!m)){f("processing"),j(null);try{const R=toSmallestUnit(F,B.decimals).toString();await a({coinId:B.coinId,amount:R,recipient:m,...V?{memo:V}:{}}),f("success")}catch(R){console.error(R),j(R.message||"Transfer failed"),f("confirm")}}},S=()=>{Z(),e({success:!0})},N=()=>{switch(u){case"recipient":return"Send To";case"asset":return"Select Asset";case"amount":return"Enter Amount";case"confirm":return"Confirm Transfer";case"processing":return"Processing...";case"success":return"Sent!"}};return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:z,showOrbs:!1,children:[jsxRuntimeExports.jsx(ModalHeader,{title:N(),onClose:z}),jsxRuntimeExports.jsx("div",{className:"px-6 py-3 flex-1 flex flex-col justify-center overflow-y-auto",children:jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",children:[u==="recipient"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-neutral-500 dark:text-neutral-400 block mb-2",children:d==="nametag"?"Unicity Nametag":"Direct Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[d==="nametag"&&jsxRuntimeExports.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400 dark:text-neutral-500",children:"@"}),jsxRuntimeExports.jsx("input",{autoFocus:!0,value:m,onChange:W,onKeyDown:R=>R.key==="Enter"&&O(),className:`w-full bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-white/10 rounded-xl py-3 pr-4 text-neutral-900 dark:text-white focus:border-orange-500 outline-none ${d==="nametag"?"pl-8":"pl-4 font-mono text-sm"}`,placeholder:d==="nametag"?"Unicity ID":"DIRECT://..."})]}),C&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2",children:C}),jsxRuntimeExports.jsx("button",{onClick:()=>{p(d==="nametag"?"direct":"nametag"),y(""),j(null)},className:"text-[11px] text-neutral-400 dark:text-neutral-500 hover:text-orange-500 dark:hover:text-orange-400 mt-2 transition-colors",children:d==="nametag"?"Use direct address instead":"Use nametag instead"})]}),jsxRuntimeExports.jsx(Button,{onClick:O,disabled:!m||b,loading:b,loadingText:"Checking...",icon:ArrowRight,iconPosition:"right",fullWidth:!0,children:"Continue"})]},"rec"),u==="asset"&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-2",children:c.map(R=>jsxRuntimeExports.jsxs("button",{onClick:()=>{D(R),f("amount")},className:"w-full p-3 flex items-center gap-3 bg-neutral-50 dark:bg-neutral-900/50 hover:bg-neutral-100 dark:hover:bg-neutral-800 border border-neutral-200 dark:border-white/5 rounded-xl transition-colors text-left",children:[jsxRuntimeExports.jsx("img",{src:R.iconUrl||"",className:"w-8 h-8 rounded-full",alt:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white font-medium",children:R.symbol}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[formatAmount(R.totalAmount,R.decimals)," available"]})]}),jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-600"})]},R.coinId))},"asset"),u==="amount"&&B&&(()=>{const R=F!==""&&toSmallestUnit(F,B.decimals)>BigInt(B.totalAmount);return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-neutral-500 dark:text-neutral-400",children:"Amount"}),jsxRuntimeExports.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["Available: ",jsxRuntimeExports.jsx("span",{className:"text-neutral-900 dark:text-white",children:formatAmount(B.totalAmount,B.decimals)})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{autoFocus:!0,type:"text",inputMode:"decimal",value:F,onChange:T=>{const M=T.target.value;(M===""||/^\d*\.?\d*$/.test(M))&&q(M)},className:`w-full bg-neutral-100 dark:bg-neutral-900 border rounded-xl py-3 px-4 text-neutral-900 dark:text-white text-2xl font-mono outline-none ${R?"border-red-500 focus:border-red-500":"border-neutral-200 dark:border-white/10 focus:border-orange-500"}`,placeholder:"0.00"}),jsxRuntimeExports.jsx("button",{onClick:()=>q(formatAmount(B.totalAmount,B.decimals)),className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs bg-neutral-200 dark:bg-neutral-800 text-orange-500 dark:text-orange-400 px-2 py-1 rounded hover:bg-neutral-300 dark:hover:bg-neutral-700",children:"MAX"})]}),R&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Insufficient balance"}),C&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2",children:C})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-neutral-500 dark:text-neutral-400 block mb-2",children:"Memo (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",value:V,onChange:T=>ee(T.target.value),className:"w-full bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-white/10 rounded-xl py-3 px-4 text-neutral-900 dark:text-white outline-none focus:border-orange-500 text-sm",placeholder:"Add a note to this transfer"})]}),jsxRuntimeExports.jsx(Button,{onClick:k,disabled:!F||R,fullWidth:!0,children:"Review"})]},"amt")})(),u==="confirm"&&B&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 rounded-2xl p-5 mb-6 border border-neutral-200 dark:border-white/10 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-1",children:"You are sending"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-4",children:[F," ",jsxRuntimeExports.jsx("span",{className:"text-orange-500",children:B.symbol})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm bg-neutral-200 dark:bg-neutral-800/50 p-2 rounded-lg mx-auto max-w-max",children:[d==="direct"?jsxRuntimeExports.jsx(Hash$1,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}):jsxRuntimeExports.jsx(User,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),jsxRuntimeExports.jsx("span",{className:`text-neutral-700 dark:text-neutral-300 ${d==="direct"?"font-mono text-xs break-all":""}`,children:d==="direct"?m:`@${m}`})]}),V&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-400 dark:text-neutral-500 mt-3 italic",children:["",V,""]})]}),jsxRuntimeExports.jsx("div",{className:"mb-6 space-y-2",children:jsxRuntimeExports.jsxs("div",{className:"p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-xl flex items-start gap-3",children:[jsxRuntimeExports.jsx(Coins,{className:"w-5 h-5 text-emerald-500 dark:text-emerald-400 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-emerald-600 dark:text-emerald-400 text-sm font-medium",children:"Smart Transfer"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:"Token splitting and transfer optimization is handled automatically."})]})]})}),C&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:C}),jsxRuntimeExports.jsx("button",{onClick:v,disabled:o,className:"w-full py-3 bg-neutral-900 dark:bg-white text-white dark:text-black font-bold rounded-xl hover:bg-neutral-800 dark:hover:bg-neutral-200 transition-colors disabled:opacity-50",children:"Confirm & Send"})]},"conf"),u==="processing"&&jsxRuntimeExports.jsxs(motion.div,{className:"py-10 text-center",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-12 h-12 text-orange-500 animate-spin mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium text-lg",children:"Sending Transaction..."}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 text-sm mt-2",children:"Processing proofs and broadcasting via Nostr"})]},"proc"),u==="success"&&jsxRuntimeExports.jsxs(motion.div,{className:"py-10 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-500/50",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-8 h-8 text-emerald-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-bold text-2xl mb-2",children:"Success!"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400",children:["Successfully sent ",jsxRuntimeExports.jsxs("b",{children:[F," ",B?.symbol]})," to ",jsxRuntimeExports.jsx("b",{children:d==="direct"?m:`@${m}`})]}),jsxRuntimeExports.jsx("button",{onClick:S,className:"mt-8 px-8 py-2 bg-neutral-100 dark:bg-neutral-800 rounded-lg hover:bg-neutral-200 dark:hover:bg-neutral-700 text-neutral-900 dark:text-white transition-colors",children:"Close"})]},"done")]})})]})}const FAUCET_API_URL="https://faucet.unicity.network/api/v1/faucet/request";class FaucetService{static async requestTokens(e,s,r){console.log(` Requesting ${r} ${s} for @${e}...`);try{const a={unicityId:e,coin:s,amount:r};console.log(" Sending request:",a);const o=await fetch(FAUCET_API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(console.log(` Response status for ${s}:`,o.status,o.statusText),!o.ok){const c=await o.text();throw console.error(` Failed response for ${s}:`,c),new Error(`Failed to request ${s}: ${o.statusText} - ${c}`)}const l=await o.json();return console.log(` Success for ${s}:`,l),{success:!0,coin:s,amount:r,...l}}catch(a){return console.error(` Faucet request failed for ${s}:`,a),{success:!1,message:a instanceof Error?a.message:"Unknown error",coin:s,amount:r}}}static async requestAllCoins(e){const s=[{coin:"unicity",amount:100},{coin:"bitcoin",amount:1},{coin:"solana",amount:1e3},{coin:"ethereum",amount:42},{coin:"tether",amount:1e3},{coin:"usd-coin",amount:1e3},{coin:"unicity-usd",amount:1e3}];console.log(` Starting parallel faucet requests for @${e}...`);const r=await Promise.all(s.map(({coin:o,amount:l})=>this.requestTokens(e,o,l)));console.log(" Faucet results:",r);const a=r.filter(o=>o.success).length;return console.log(` ${a}/${r.length} requests successful`),window.dispatchEvent(new Event("wallet-updated")),r}}function formatAssetAmount(t){return toHumanReadable(t.totalAmount,t.decimals)}function SwapModal({isOpen:t,onClose:e}){const{nametag:s}=useIdentity(),{assets:r}=useAssets(),{transfer:a}=useTransfer(),{providers:o}=useSphereContext(),[l,c]=reactExports.useState("swap"),[u,f]=reactExports.useState(null),[d,p]=reactExports.useState(null),[m,y]=reactExports.useState(""),[b,E]=reactExports.useState(!1),[C,j]=reactExports.useState(!1),[B,D]=reactExports.useState(null),[F,q]=reactExports.useState([]);reactExports.useEffect(()=>{t&&(async()=>{const S=TokenRegistry$1.getInstance(),N=S.getAllDefinitions(),R=["bitcoin","ethereum","solana","unicity","tether","usd-coin","unicity-usd"],T=N.filter(A=>A.assetKind==="fungible"&&R.includes(A.name.toLowerCase())),M=T.map(A=>A.name.toLowerCase());let I=new Map;if(o?.price)try{I=await o.price.getPrices(M)}catch(A){console.warn("Failed to fetch prices:",A)}const $=T.map(A=>{const L=A.symbol||A.name.toUpperCase(),Y=I.get(A.name.toLowerCase()),oe=S.getIconUrl(A.id);return{coinId:A.id,symbol:L,name:A.name,totalAmount:"0",decimals:A.decimals||0,tokenCount:0,confirmedAmount:"0",unconfirmedAmount:"0",confirmedTokenCount:0,unconfirmedTokenCount:0,iconUrl:oe??void 0,priceUsd:Y?.priceUsd??1,priceEur:Y?.priceEur??.92,change24h:Y?.change24h??0,fiatValueUsd:null,fiatValueEur:null}});q($)})()},[t,o?.price]);const V=v=>{const S=r.find(N=>N.coinId===v);return S?formatAssetAmount(S):"0"},ee=reactExports.useMemo(()=>{if(!u||!d||!m||parseFloat(m)<=0)return null;const v=parseFloat(m),S=u.priceUsd??0,N=d.priceUsd??0;if(N===0)return null;const R=S/N,T=v*R;return{rate:R,fromValueUSD:v*S,toAmount:T,toValueUSD:T*N}},[u,d,m]),Q=()=>{c("swap"),f(null),p(null),y(""),D(null),E(!1),j(!1)},W=()=>{Q(),e()},Z=async()=>{if(!(!u||!d||!m||!ee||!s)){c("processing"),D(null);try{const v=toSmallestUnit(m,u.decimals);await a({recipient:"swap",amount:v.toString(),coinId:u.coinId}),await FaucetService.requestTokens(s,d.name.toLowerCase(),ee.toAmount),c("success")}catch(v){console.error("Swap failed:",v),D(v.message||"Swap failed"),c("swap")}}},z=()=>{if(!u||!d)return;const v=r.find(N=>N.coinId===d.coinId),S=F.find(N=>N.coinId===u.coinId);if(!v){D(`You don't have any ${d.symbol} to swap from`);return}if(f(v),p(S||u),D(null),ee&&ee.toAmount>0){const N=parseFloat(ee.toAmount.toFixed(6));y(N.toString())}else y("")},O=reactExports.useMemo(()=>{if(!u||!m)return!1;const v=parseFloat(m);if(isNaN(v)||v<=0)return!1;const S=parseFloat(formatAssetAmount(u));return v<=S},[u,m]),k=()=>{switch(l){case"swap":return"Swap Tokens";case"processing":return"Processing Swap...";case"success":return"Swap Complete!"}};return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:W,showOrbs:!1,children:[jsxRuntimeExports.jsx(ModalHeader,{title:k(),onClose:W}),jsxRuntimeExports.jsx("div",{className:"p-6 flex-1 min-h-0 overflow-y-auto",children:jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",children:[l==="swap"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"From"}),u&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate ml-2",children:["Balance: ",jsxRuntimeExports.jsx("span",{className:"text-neutral-900 dark:text-white",children:formatAssetAmount(u)})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-900/50 rounded-2xl p-3 sm:p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative shrink-0",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>E(!b),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-2 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-white/10 rounded-xl hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors whitespace-nowrap",children:[u?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:u.iconUrl||"",className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full shrink-0",alt:""}),jsxRuntimeExports.jsx("span",{className:"text-neutral-900 dark:text-white font-medium text-sm sm:text-base",children:u.symbol})]}):jsxRuntimeExports.jsx("span",{className:"text-neutral-500 text-sm sm:text-base",children:"Select"}),jsxRuntimeExports.jsx(ArrowDown,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-neutral-400 shrink-0"})]}),b&&jsxRuntimeExports.jsx("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-white/10 rounded-xl shadow-xl z-60 max-h-48 overflow-y-auto",children:r.map(v=>jsxRuntimeExports.jsxs("button",{onClick:()=>{f(v),E(!1),y("")},className:"w-full flex items-center gap-3 p-3 hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[jsxRuntimeExports.jsx("img",{src:v.iconUrl||"",className:"w-6 h-6 rounded-full",alt:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white font-medium text-sm truncate",children:v.symbol}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:formatAssetAmount(v)})]})]},v.coinId))})]}),jsxRuntimeExports.jsx("input",{type:"number",value:m,onChange:v=>y(v.target.value),placeholder:"0.00",disabled:!u,className:"flex-1 bg-transparent text-right text-xl sm:text-2xl font-mono text-neutral-900 dark:text-white outline-none disabled:opacity-50 min-w-0"})]}),u&&m&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-right text-xs text-neutral-500 dark:text-neutral-400",children:[" $",(parseFloat(m)*(u.priceUsd??0)).toFixed(2)]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mt-4 mb-1 relative z-10",children:jsxRuntimeExports.jsx("button",{onClick:z,className:"p-2 bg-white dark:bg-neutral-900 border-2 border-neutral-200 dark:border-neutral-700 rounded-full hover:bg-neutral-50 dark:hover:bg-neutral-800 transition-colors",children:jsxRuntimeExports.jsx(ArrowDownUp,{className:"w-5 h-5 text-neutral-600 dark:text-neutral-400"})})}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400",children:"To"}),d&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate ml-2",children:["Balance: ",jsxRuntimeExports.jsx("span",{className:"text-neutral-900 dark:text-white",children:V(d.coinId)})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-900/50 rounded-2xl p-3 sm:p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative shrink-0",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>j(!C),className:"flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-2 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-white/10 rounded-xl hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors whitespace-nowrap",children:[d?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:d.iconUrl||"",className:"w-5 h-5 sm:w-6 sm:h-6 rounded-full shrink-0",alt:""}),jsxRuntimeExports.jsx("span",{className:"text-neutral-900 dark:text-white font-medium text-sm sm:text-base",children:d.symbol})]}):jsxRuntimeExports.jsx("span",{className:"text-neutral-500 text-sm sm:text-base",children:"Select"}),jsxRuntimeExports.jsx(ArrowDown,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-neutral-400 shrink-0"})]}),C&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-white/10 rounded-xl shadow-xl z-60 max-h-48 overflow-y-auto",children:F.map(v=>jsxRuntimeExports.jsxs("button",{onClick:()=>{p(v),j(!1)},className:"w-full flex items-center gap-3 p-3 hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors text-left",children:[jsxRuntimeExports.jsx("img",{src:v.iconUrl||"",className:"w-6 h-6 rounded-full",alt:""}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white font-medium text-sm truncate",children:v.symbol}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 truncate",children:V(v.coinId)})]})]},v.coinId))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 text-right text-xl sm:text-2xl font-mono text-neutral-900 dark:text-white break-all min-w-0",children:ee?ee.toAmount.toFixed(6):"0.00"})]}),ee&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-right text-xs text-neutral-500 dark:text-neutral-400",children:[" $",ee.toValueUSD.toFixed(2)]})]})]}),ee&&u&&d&&jsxRuntimeExports.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/20 rounded-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4 text-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Exchange Rate"})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-neutral-700 dark:text-neutral-300",children:["1 ",u.symbol," = ",ee.rate.toFixed(6)," ",d.symbol]})]}),B&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-xl",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:B})}),jsxRuntimeExports.jsx(Button,{onClick:Z,disabled:!O||!d||!ee,icon:ArrowDownUp,fullWidth:!0,children:"Swap Tokens"})]},"swap"),l==="processing"&&jsxRuntimeExports.jsxs(motion.div,{className:"py-10 text-center",initial:{opacity:0},animate:{opacity:1},children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-12 h-12 text-orange-500 animate-spin mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium text-lg",children:"Processing Swap..."}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 text-sm mt-2",children:"Sending tokens and requesting swap"})]},"processing"),l==="success"&&u&&d&&ee&&jsxRuntimeExports.jsxs(motion.div,{className:"py-10 text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-500/50",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-8 h-8 text-emerald-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-bold text-2xl mb-2",children:"Swap Complete!"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400 mb-1",children:["Swapped ",jsxRuntimeExports.jsxs("b",{children:[m," ",u.symbol]})]}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400",children:["for ",jsxRuntimeExports.jsxs("b",{children:[ee.toAmount.toFixed(6)," ",d.symbol]})]}),jsxRuntimeExports.jsx("button",{onClick:W,className:"mt-8 px-8 py-2 bg-neutral-100 dark:bg-neutral-800 rounded-lg hover:bg-neutral-200 dark:hover:bg-neutral-700 text-neutral-900 dark:text-white transition-colors",children:"Close"})]},"success")]})})]})}const PaymentRequestStatus={PENDING:"PENDING",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",PAID:"PAID"};function bridgeRequest(t){return{id:t.id,senderPubkey:t.senderPubkey,amount:BigInt(t.amount||"0"),coinId:t.coinId,symbol:t.symbol,message:t.message,recipientNametag:t.senderNametag??"",requestId:t.requestId,timestamp:t.timestamp,status:PaymentRequestStatus.PENDING}}const useIncomingPaymentRequests=()=>{const{sphere:t}=useSphereContext(),[e,s]=reactExports.useState([]);reactExports.useEffect(()=>{if(!t)return;const f=d=>{s(p=>[...p,bridgeRequest(d)])};return t.on("payment_request:incoming",f),()=>{t.off("payment_request:incoming",f)}},[t]);const r=reactExports.useCallback(async(f,d,p)=>{if(!t)return;const m=t.getTransport();m.sendPaymentRequestResponse&&await m.sendPaymentRequestResponse(f.senderPubkey,{requestId:f.requestId,responseType:p}),s(y=>y.map(b=>b.id===f.id?{...b,status:d}:b))},[t]),a=reactExports.useMemo(()=>e.filter(f=>f.status===PaymentRequestStatus.PENDING).length,[e]),o=reactExports.useCallback(f=>r(f,PaymentRequestStatus.ACCEPTED,"accepted"),[r]),l=reactExports.useCallback(f=>r(f,PaymentRequestStatus.REJECTED,"rejected"),[r]),c=reactExports.useCallback(f=>r(f,PaymentRequestStatus.PAID,"paid"),[r]),u=reactExports.useCallback(()=>s(f=>f.filter(d=>d.status===PaymentRequestStatus.PENDING)),[]);return{requests:e,pendingCount:a,accept:o,reject:l,paid:c,clearProcessed:u}},AmountFormatUtils={formatDisplayAmount:(t,e)=>{try{if(t===void 0||e===void 0)return"";const s=parseFloat(t),o=TokenRegistry$1.getInstance().getDefinition(e)?.decimals??6,l=Math.pow(10,o),c=s/l;return new Intl.NumberFormat("en-US",{maximumFractionDigits:6}).format(c)}catch(s){return console.warn("Error formatting amount",s),t||""}}};function PaymentRequestsModal({isOpen:t,onClose:e,requests:s,pendingCount:r,reject:a,clearProcessed:o,paid:l}){const{transfer:c}=useTransfer(),[u,f]=reactExports.useState(null),[d,p]=reactExports.useState({}),m=s.some(j=>j.status!==PaymentRequestStatus.PENDING),y=!!u,b=()=>{y||(p({}),e())},E=async j=>{f(j.id),p(B=>({...B,[j.id]:""}));try{const B=j.recipientNametag?`@${j.recipientNametag}`:j.senderPubkey;console.log(`Initiating payment for request ${j.requestId} to ${B}`),await c({recipient:B,amount:j.amount.toString(),coinId:j.coinId}),l(j)}catch(B){console.error("Failed to execute payment transaction:",B);let D="Transaction failed";B instanceof Error&&(B.message.includes("Insufficient")?D="Insufficient funds":D=B.message),p(F=>({...F,[j.id]:D}))}finally{f(null)}},C=r>0?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"flex h-2 w-2 relative",children:[jsxRuntimeExports.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),jsxRuntimeExports.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})]}),jsxRuntimeExports.jsxs("span",{className:"text-orange-500 dark:text-orange-400 font-semibold",children:[r," pending"]})]}):void 0;return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:b,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"Payment Requests",icon:Receipt,subtitle:C,onClose:b,closeDisabled:y}),jsxRuntimeExports.jsx("div",{className:"relative flex-1 overflow-y-auto custom-scrollbar p-4 space-y-3 z-10 min-h-0",children:s.length===0?jsxRuntimeExports.jsx(EmptyState$1,{icon:Sparkles,title:"No Requests",description:"Incoming payment requests will appear here"}):jsxRuntimeExports.jsx(AnimatePresence,{mode:"popLayout",children:s.map(j=>jsxRuntimeExports.jsx(RequestCard,{req:j,error:d[j.id],onPay:()=>E(j),onReject:()=>a(j),isProcessing:u===j.id,isGlobalDisabled:y},j.id))})}),m&&jsxRuntimeExports.jsx("div",{className:"relative shrink-0 p-4 border-t border-neutral-200/50 dark:border-neutral-700/50 backdrop-blur-xl z-20",children:jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,disabled:y,className:"w-full py-3 flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-wider text-neutral-500 hover:text-red-500 dark:hover:text-red-400 hover:bg-red-500/10 rounded-xl transition-all disabled:opacity-50 border border-neutral-200/50 dark:border-neutral-700/50 hover:border-red-500/30",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})," Clear History"]})})]})}function RequestCard({req:t,error:e,onPay:s,onReject:r,isProcessing:a,isGlobalDisabled:o}){const l=t.status===PaymentRequestStatus.PENDING,c=AmountFormatUtils.formatDisplayAmount(t.amount.toString(),t.coinId),u=getTimeAgo(t.timestamp),d={[PaymentRequestStatus.ACCEPTED]:{color:"text-emerald-500",bg:"bg-emerald-500/10",border:"border-emerald-500/20",icon:Check,label:"Payment Sent"},[PaymentRequestStatus.PAID]:{color:"text-emerald-500",bg:"bg-emerald-500/10",border:"border-emerald-500/20",icon:Check,label:"Paid Successfully"},[PaymentRequestStatus.REJECTED]:{color:"text-red-500",bg:"bg-red-500/10",border:"border-red-500/20",icon:X,label:"Request Declined"},[PaymentRequestStatus.PENDING]:{color:"text-orange-500",bg:"bg-orange-500/10",border:"border-orange-500/20",icon:Clock,label:"Awaiting Payment"}}[t.status],p=d.icon,m=o&&!a;return jsxRuntimeExports.jsxs(motion.div,{layout:!0,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,transition:{duration:.2}},className:`relative rounded-2xl overflow-hidden border transition-all duration-300 ${l?"bg-white/60 dark:bg-neutral-800/60 border-neutral-200/60 dark:border-neutral-700/60 shadow-xl shadow-black/10 dark:shadow-black/30 backdrop-blur-xl":"bg-neutral-100/40 dark:bg-neutral-800/40 border-neutral-200/40 dark:border-neutral-700/40 opacity-70"} ${m?"opacity-50 pointer-events-none":""}`,children:[l&&jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-linear-to-r from-orange-500 via-orange-400 to-orange-600"}),jsxRuntimeExports.jsxs("div",{className:"p-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] text-neutral-500 font-bold uppercase tracking-wider mb-1.5",children:"From"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx("span",{className:"text-neutral-900 dark:text-white font-bold text-base",children:t.recipientNametag?`@${t.recipientNametag}`:`${t.senderPubkey.slice(0,12)}...`})})]}),jsxRuntimeExports.jsx("div",{className:"bg-neutral-200/50 dark:bg-neutral-700/50 px-2.5 py-1 rounded-lg text-[10px] text-neutral-500 dark:text-neutral-400 font-medium",children:u})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-3 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-4xl font-black text-neutral-900 dark:text-white tracking-tight flex items-baseline gap-2",children:[c," ",jsxRuntimeExports.jsx("span",{className:"text-xl text-orange-500 dark:text-orange-400 font-bold",children:t.symbol})]}),t.message&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"mt-4 text-xs text-neutral-700 dark:text-neutral-300 bg-neutral-200/50 dark:bg-neutral-700/50 px-4 py-2 rounded-xl border border-neutral-300/50 dark:border-neutral-600/50 backdrop-blur-sm max-w-full",children:[jsxRuntimeExports.jsx("span",{className:"text-neutral-500",children:'"'}),t.message,jsxRuntimeExports.jsx("span",{className:"text-neutral-500",children:'"'})]})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-neutral-100/50 dark:bg-neutral-900/50 border-t border-neutral-200/50 dark:border-neutral-700/50 backdrop-blur-sm",children:l?jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:e&&jsxRuntimeExports.jsxs(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"flex items-center justify-center gap-2 text-red-400 text-xs font-semibold bg-red-500/10 py-2.5 rounded-xl border border-red-500/30",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-3.5 h-3.5"}),e]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.97},onClick:r,disabled:o,className:"py-3 rounded-xl font-bold text-xs bg-neutral-200/80 dark:bg-neutral-800/80 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-white hover:bg-neutral-300/80 dark:hover:bg-neutral-700/80 border border-neutral-300/60 dark:border-neutral-700/60 hover:border-neutral-400 dark:hover:border-neutral-600 transition-all",children:"Decline"}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.97},onClick:s,disabled:o,className:"relative py-3 rounded-xl font-bold text-sm text-white bg-linear-to-r from-orange-500 to-orange-600 shadow-xl shadow-orange-500/30 flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:shadow-none overflow-hidden group",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-orange-400 to-orange-500 opacity-0 group-hover:opacity-100 transition-opacity"}),jsxRuntimeExports.jsx("span",{className:"relative z-10 flex items-center gap-2",children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"})," Processing"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Pay Now ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})})]})]})]}):jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-center gap-2 py-2.5 text-xs font-bold uppercase tracking-wider rounded-lg ${d.bg} ${d.color} border ${d.border}`,children:[jsxRuntimeExports.jsx(p,{className:"w-4 h-4"}),d.label]})})]})}const getTimeAgo=t=>{const e=Math.floor((Date.now()-t)/1e3);if(e<60)return"Just now";const s=Math.floor(e/60);if(s<60)return`${s}m ago`;const r=Math.floor(s/60);return r<24?`${r}h ago`:new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric"})};function SendPaymentRequestModal({isOpen:t,onClose:e,prefill:s}){const{sphere:r}=useSphereContext(),[a,o]=reactExports.useState("recipient"),[l,c]=reactExports.useState("nametag"),[u,f]=reactExports.useState(""),[d,p]=reactExports.useState(!1),[m,y]=reactExports.useState(null),[b,E]=reactExports.useState([]),[C,j]=reactExports.useState(null),[B,D]=reactExports.useState(""),[F,q]=reactExports.useState(""),[V,ee]=reactExports.useState(null),[Q,W]=reactExports.useState(null);reactExports.useEffect(()=>{if(!t)return;const M=TokenRegistry$1.getInstance(),$=M.getAllDefinitions().filter(A=>A.assetKind==="fungible").map(A=>({coinId:A.id,symbol:A.symbol||A.name.toUpperCase(),name:A.name,decimals:A.decimals||0,iconUrl:M.getIconUrl(A.id)??void 0}));E($)},[t]);const Z=reactExports.useRef(!1);reactExports.useEffect(()=>{if(!s||!t||Z.current||b.length===0)return;const{to:M,amount:I,coinId:$,message:A}=s;M.startsWith("DIRECT://")?(c("direct"),f(M)):(c("nametag"),f(M.replace(/^@/,""))),D(I),A&&q(A);const L=b.find(Y=>Y.coinId===$);L&&(j(L),o("confirm"),Z.current=!0)},[s,t,b]);const z=M=>{if(l==="nametag"){const I=M.target.value.toLowerCase();/^@?[a-z0-9_\-+.]*$/.test(I)&&(f(I),y(null))}else f(M.target.value),y(null)},O=()=>{o("recipient"),c("nametag"),f(""),j(null),D(""),q(""),y(null),ee(null),W(null),Z.current=!1},k=()=>{O(),e()},v=async()=>{if(u.trim()){p(!0),y(null);try{if(l==="direct"){const M=u.trim();if(!M.startsWith("DIRECT://")){y("Direct address must start with DIRECT://");return}f(M),o("coin")}else{const M=u.replace("@","").replace("@unicity","").trim(),I=r?.getTransport();I?.resolveNametag?await I.resolveNametag(M)?(f(M),o("coin")):y(`User @${M} not found`):(f(M),o("coin"))}}catch{y("Network error")}finally{p(!1)}}},S=()=>{!C||!B||toSmallestUnit(B,C.decimals)<=0n||o("confirm")},N=async()=>{if(!(!C||!B||!u)){o("processing"),ee(null);try{const M=toSmallestUnit(B,C.decimals).toString(),I=l==="nametag"?`@${u}`:u,$=await r.payments.sendPaymentRequest(I,{amount:M,coinId:C.coinId,...F?{message:F}:{}});if(!$.success)throw new Error($.error||"Failed to send payment request");W($.requestId||null),o("success")}catch(M){console.error(M),ee(M.message||"Failed to send payment request"),o("confirm")}}},R=()=>{O(),e({success:!0,requestId:Q||void 0})},T=()=>{switch(a){case"recipient":return"Request From";case"coin":return"Select Currency";case"amount":return"Enter Amount";case"confirm":return"Confirm Request";case"processing":return"Sending...";case"success":return"Request Sent!"}};return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:k,showOrbs:!1,children:[jsxRuntimeExports.jsx(ModalHeader,{title:T(),onClose:k}),jsxRuntimeExports.jsx("div",{className:"px-6 py-3 flex-1 flex flex-col justify-center overflow-y-auto",children:jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",children:[a==="recipient"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-neutral-500 dark:text-neutral-400 block mb-2",children:l==="nametag"?"Who should pay you?":"Direct Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[l==="nametag"&&jsxRuntimeExports.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400 dark:text-neutral-500",children:"@"}),jsxRuntimeExports.jsx("input",{autoFocus:!0,value:u,onChange:z,onKeyDown:M=>M.key==="Enter"&&v(),className:`w-full bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-white/10 rounded-xl py-3 pr-4 text-neutral-900 dark:text-white focus:border-orange-500 outline-none ${l==="nametag"?"pl-8":"pl-4 font-mono text-sm"}`,placeholder:l==="nametag"?"Unicity ID":"DIRECT://..."})]}),m&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2",children:m}),jsxRuntimeExports.jsx("button",{onClick:()=>{c(l==="nametag"?"direct":"nametag"),f(""),y(null)},className:"text-[11px] text-neutral-400 dark:text-neutral-500 hover:text-orange-500 dark:hover:text-orange-400 mt-2 transition-colors",children:l==="nametag"?"Use direct address instead":"Use nametag instead"})]}),jsxRuntimeExports.jsx(Button,{onClick:v,disabled:!u||d,loading:d,loadingText:"Checking...",icon:ArrowRight,iconPosition:"right",fullWidth:!0,children:"Continue"})]},"rec"),a==="coin"&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-2",children:b.map(M=>jsxRuntimeExports.jsxs("button",{onClick:()=>{j(M),o("amount")},className:"w-full p-3 flex items-center gap-3 bg-neutral-50 dark:bg-neutral-900/50 hover:bg-neutral-100 dark:hover:bg-neutral-800 border border-neutral-200 dark:border-white/5 rounded-xl transition-colors text-left",children:[M.iconUrl?jsxRuntimeExports.jsx("img",{src:M.iconUrl,className:"w-8 h-8 rounded-full",alt:""}):jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-200 dark:bg-neutral-700 flex items-center justify-center text-xs font-bold text-neutral-500",children:M.symbol.slice(0,2)}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("div",{className:"text-neutral-900 dark:text-white font-medium",children:M.symbol})}),jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-600"})]},M.coinId))},"coin"),a==="amount"&&C&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-2",children:["Amount (",C.symbol,")"]}),jsxRuntimeExports.jsx("input",{autoFocus:!0,type:"text",inputMode:"decimal",value:B,onChange:M=>{const I=M.target.value;(I===""||/^\d*\.?\d*$/.test(I))&&D(I)},className:"w-full bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-white/10 rounded-xl py-3 px-4 text-neutral-900 dark:text-white text-2xl font-mono outline-none focus:border-orange-500",placeholder:"0.00"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-neutral-500 dark:text-neutral-400 block mb-2",children:"Message (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",value:F,onChange:M=>q(M.target.value),className:"w-full bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-white/10 rounded-xl py-3 px-4 text-neutral-900 dark:text-white outline-none focus:border-orange-500 text-sm",placeholder:"e.g. Payment for order #1234"})]}),jsxRuntimeExports.jsx(Button,{onClick:S,disabled:!B,fullWidth:!0,children:"Review"})]},"amt"),a==="confirm"&&C&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 rounded-2xl p-5 mb-6 border border-neutral-200 dark:border-white/10 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-1",children:"You are requesting"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-neutral-900 dark:text-white mb-4",children:[B," ",jsxRuntimeExports.jsx("span",{className:"text-orange-500",children:C.symbol})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-1",children:"from"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm bg-neutral-200 dark:bg-neutral-800/50 p-2 rounded-lg mx-auto max-w-max",children:[l==="direct"?jsxRuntimeExports.jsx(Hash$1,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}):jsxRuntimeExports.jsx(User,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"}),jsxRuntimeExports.jsx("span",{className:`text-neutral-700 dark:text-neutral-300 ${l==="direct"?"font-mono text-xs break-all":""}`,children:l==="direct"?u:`@${u}`})]}),F&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-neutral-400 dark:text-neutral-500 mt-3 italic",children:["",F,""]})]}),jsxRuntimeExports.jsx("div",{className:"mb-6 space-y-2",children:jsxRuntimeExports.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl flex items-start gap-3",children:[jsxRuntimeExports.jsx(Receipt,{className:"w-5 h-5 text-blue-500 dark:text-blue-400 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium",children:"Payment Request"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:"The recipient will receive a notification and can choose to pay or decline."})]})]})}),V&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:V}),jsxRuntimeExports.jsx("button",{onClick:N,className:"w-full py-3 bg-neutral-900 dark:bg-white text-white dark:text-black font-bold rounded-xl hover:bg-neutral-800 dark:hover:bg-neutral-200 transition-colors",children:"Send Request"})]},"conf"),a==="processing"&&jsxRuntimeExports.jsxs(motion.div,{className:"py-10 text-center",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-12 h-12 text-orange-500 animate-spin mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-medium text-lg",children:"Sending Payment Request..."}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 text-sm mt-2",children:"Delivering request via Nostr"})]},"proc"),a==="success"&&jsxRuntimeExports.jsxs(motion.div,{className:"py-10 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-500/50",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-8 h-8 text-emerald-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white font-bold text-2xl mb-2",children:"Request Sent!"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 dark:text-neutral-400",children:["Payment request for ",jsxRuntimeExports.jsxs("b",{children:[B," ",C?.symbol]})," sent to ",jsxRuntimeExports.jsx("b",{children:l==="direct"?u:`@${u}`})]}),jsxRuntimeExports.jsx("button",{onClick:R,className:"mt-8 px-8 py-2 bg-neutral-100 dark:bg-neutral-800 rounded-lg hover:bg-neutral-200 dark:hover:bg-neutral-700 text-neutral-900 dark:text-white transition-colors",children:"Close"})]},"done")]})})]})}function TopUpModal({isOpen:t,onClose:e}){const{nametag:s}=useIdentity(),[r,a]=reactExports.useState("faucet"),[o,l]=reactExports.useState(!1),[c,u]=reactExports.useState(!1),[f,d]=reactExports.useState(null),[p,m]=reactExports.useState(!1),y=async()=>{if(s){l(!0),d(null),u(!1);try{const j=(await FaucetService.requestAllCoins(s)).filter(B=>!B.success);if(j.length>0){const B=j.map(D=>D.coin).join(", ");d(`Failed to request: ${B}`)}else u(!0),setTimeout(()=>u(!1),3e3)}catch(C){d(C instanceof Error?C.message:"Failed to request tokens")}finally{l(!1)}}},b=()=>{d(null),u(!1),e()},E=C=>{m(!1),C?.success&&(showToast("Payment request sent!","success",3e3),b())};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:b,showOrbs:!1,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"Top Up",icon:Plus,onClose:b}),jsxRuntimeExports.jsx("div",{className:"px-6 mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex p-1 bg-neutral-100 dark:bg-neutral-900/50 rounded-xl border border-neutral-200 dark:border-neutral-800",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>a("faucet"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-xs font-medium rounded-lg transition-all relative ${r==="faucet"?"text-neutral-900 dark:text-white":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:[r==="faucet"&&jsxRuntimeExports.jsx(motion.div,{layoutId:"topUpTab",className:"absolute inset-0 bg-white dark:bg-neutral-800 rounded-lg shadow-sm",transition:{type:"spring",bounce:.2,duration:.6}}),jsxRuntimeExports.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3"})," Faucet"]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>a("request"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-xs font-medium rounded-lg transition-all relative ${r==="request"?"text-neutral-900 dark:text-white":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:[r==="request"&&jsxRuntimeExports.jsx(motion.div,{layoutId:"topUpTab",className:"absolute inset-0 bg-white dark:bg-neutral-800 rounded-lg shadow-sm",transition:{type:"spring",bounce:.2,duration:.6}}),jsxRuntimeExports.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Receipt,{className:"w-3 h-3"})," Payment Request"]})]})]})}),jsxRuntimeExports.jsx("div",{className:"px-6 py-3 flex-1 flex flex-col",children:jsxRuntimeExports.jsxs(AnimatePresence,{mode:"wait",children:[r==="faucet"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"flex flex-col items-center text-center py-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6",children:"Request test tokens from the Unicity faucet"}),s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{variant:"primary",onClick:y,disabled:o,loading:o,loadingText:"Requesting...",fullWidth:!0,children:c?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4"})," Success!"]}):"Request All Coins"}),jsxRuntimeExports.jsx(AnimatePresence,{children:f&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4 w-full flex items-start gap-2 p-3 bg-red-500/10 border border-red-500/20 rounded-xl",children:[jsxRuntimeExports.jsx(CircleX,{className:"w-4 h-4 text-red-500 dark:text-red-400 shrink-0 mt-0.5"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:f})]})})]}):jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-400 dark:text-neutral-500",children:"Nametag is required to request tokens"})]},"faucet"),r==="request"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"flex flex-col items-center text-center py-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-6",children:"Send a payment request to someone"}),jsxRuntimeExports.jsx(Button,{variant:"primary",onClick:()=>m(!0),fullWidth:!0,children:"Create Payment Request"})]},"request")]})})]}),jsxRuntimeExports.jsx(SendPaymentRequestModal,{isOpen:p,onClose:E})]})}function SeedPhraseModal({isOpen:t,onClose:e,seedPhrase:s}){const[r,a]=reactExports.useState(!1),[o,l]=reactExports.useState(!1);reactExports.useEffect(()=>{t||(a(!1),l(!1))},[t]);const c=async()=>{try{await navigator.clipboard.writeText(s.join(" ")),l(!0),setTimeout(()=>l(!1),2e3)}catch(u){console.error("Failed to copy seed phrase:",u)}};return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:e,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"Recovery Phrase",onClose:e}),jsxRuntimeExports.jsxs("div",{className:"relative flex-1 overflow-y-auto custom-scrollbar p-6 z-10 min-h-0",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx(AlertMessage,{variant:"error",title:"Never share your recovery phrase!",icon:ShieldAlert,children:"Anyone with these words can access your wallet and steal your funds."})}),jsxRuntimeExports.jsx("div",{className:"mb-6",children:r?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 mb-4",children:s.map((u,f)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:f*.03},className:"relative",children:[jsxRuntimeExports.jsxs("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-neutral-400 dark:text-neutral-600 font-medium z-10",children:[f+1,"."]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-neutral-100 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50 rounded-lg py-2 pl-7 pr-2 text-xs text-neutral-900 dark:text-white font-mono",children:u})]},`seed-word-${f}`))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(SecondaryButton,{icon:EyeOff,onClick:()=>a(!1),className:"flex-1",children:"Hide"}),jsxRuntimeExports.jsx(Button,{icon:o?Check:Copy,onClick:c,className:"flex-1",children:o?"Copied!":"Copy"})]})]}):jsxRuntimeExports.jsx("div",{className:"flex justify-center py-12",children:jsxRuntimeExports.jsx(SecondaryButton,{icon:Eye,onClick:()=>a(!0),children:"Reveal Recovery Phrase"})})}),jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 text-center",children:"Write down these 12 words in order and store them safely. You'll need them to recover your wallet."})]})]})}const registry=TokenRegistry$1.getInstance();function TransactionHistoryModal({isOpen:t,onClose:e}){const{history:s,isLoading:r}=useTransactionHistory(),a=reactExports.useMemo(()=>s.map(o=>{const l=registry.getDefinition(o.coinId),c=l?.decimals||0,u=BigInt(o.amount),f=BigInt(10**c),d=u/f,m=(u%f).toString().padStart(c,"0"),y=c>0?`${d}.${m}`.replace(/\.?0+$/,""):d.toString();return{...o,formattedAmount:y,iconUrl:l?registry.getIconUrl(o.coinId):null,date:new Date(o.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),time:new Date(o.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}}),[s]);return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:e,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"Transaction History",icon:Clock,onClose:e}),jsxRuntimeExports.jsx("div",{className:"relative flex-1 overflow-y-auto custom-scrollbar p-4 space-y-3 z-10 min-h-0 bg-transparent",children:r?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-20",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 animate-spin text-orange-500"})}):s.length===0?jsxRuntimeExports.jsx(EmptyState$1,{icon:ArrowUpRight,title:"No Transactions",description:"Your transaction history will appear here"}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:a.map((o,l)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:l*.05},className:"p-4 bg-neutral-50 dark:bg-neutral-800/50 border border-neutral-200 dark:border-neutral-700/50 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"relative shrink-0",children:[o.iconUrl?jsxRuntimeExports.jsx("img",{src:o.iconUrl,className:"w-10 h-10 rounded-full",alt:""}):jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-neutral-200 dark:bg-neutral-700 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-neutral-500 dark:text-neutral-400",children:o.symbol.slice(0,2)})}),jsxRuntimeExports.jsx("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center border-2 border-neutral-50 dark:border-neutral-800 ${o.type==="RECEIVED"?"bg-emerald-500":"bg-orange-500"}`,children:o.type==="RECEIVED"?jsxRuntimeExports.jsx(ArrowDownLeft,{className:"w-3 h-3 text-white"}):jsxRuntimeExports.jsx(ArrowUpRight,{className:"w-3 h-3 text-white"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:[o.type==="RECEIVED"?"Received":"Sent",jsxRuntimeExports.jsxs("span",{className:"hidden sm:inline text-neutral-500 dark:text-neutral-400 font-normal ml-1",children:[o.type==="RECEIVED"&&o.senderPubkey&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["from ",o.senderPubkey.slice(0,4),"...",o.senderPubkey.slice(-4)]}),o.type==="SENT"&&o.recipientNametag&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["to @",o.recipientNametag]})]})]}),jsxRuntimeExports.jsxs("div",{className:"sm:hidden text-xs text-neutral-500 dark:text-neutral-400 truncate",children:[o.type==="RECEIVED"&&o.senderPubkey&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["From ",o.senderPubkey.slice(0,4),"...",o.senderPubkey.slice(-4)]}),o.type==="SENT"&&o.recipientNametag&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["To @",o.recipientNametag]})]}),jsxRuntimeExports.jsxs("div",{className:"hidden sm:block text-[11px] text-neutral-400/70 dark:text-neutral-500/60",children:[o.date,"  ",o.time]})]}),jsxRuntimeExports.jsxs("div",{className:`text-sm font-semibold shrink-0 ${o.type==="RECEIVED"?"text-emerald-600 dark:text-emerald-400":"text-neutral-900 dark:text-white"}`,children:[o.type==="RECEIVED"?"+":"-",o.formattedAmount," ",o.symbol]})]})},o.id))})})]})}function CopyableField({label:t,value:e,prefix:s,copied:r,onCopy:a}){const o=s?`${s}${e}`:e;return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 group",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 w-28 shrink-0 pt-0.5",children:t}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-900 dark:text-white font-mono break-all flex-1",children:o}),jsxRuntimeExports.jsx("button",{onClick:a,className:"opacity-0 group-hover:opacity-100 p-1 text-neutral-400 hover:text-neutral-600 dark:hover:text-neutral-300 transition-all shrink-0",children:r?jsxRuntimeExports.jsx(Check,{className:"w-3.5 h-3.5 text-green-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-3.5 h-3.5"})})]})}function LookupModal({isOpen:t,onClose:e}){const{sphere:s}=useSphereContext(),{nametag:r,directAddress:a,l1Address:o}=useIdentity(),[l,c]=reactExports.useState(""),[u,f]=reactExports.useState(null),[d,p]=reactExports.useState(null),[m,y]=reactExports.useState(null),[b,E]=reactExports.useState(!1),[C,j]=reactExports.useState(!1);reactExports.useEffect(()=>{t&&s&&a&&(s.resolve(a).then(Q=>{Q&&p(Q)}).catch(()=>{}),c(""),f(null),y(null))},[t,s,a]);const B=reactExports.useCallback(async()=>{const Q=l.trim();if(!(!Q||!s)){E(!0),y(null),f(null);try{const W=await s.resolve(Q);W?f(W):y(`Not found: "${Q}"`)}catch(W){y(W instanceof Error?W.message:"Lookup failed")}finally{E(!1)}}},[l,s]),D=reactExports.useCallback(async(Q,W)=>{try{await navigator.clipboard.writeText(Q),j(W),setTimeout(()=>j(!1),1500)}catch{}},[]),F=Q=>{Q.key==="Enter"&&(Q.preventDefault(),B())},q=(Q,W)=>[{label:"Nametag",value:Q.nametag,key:`${W}-nametag`,displayPrefix:"@"},{label:"Direct Address",value:Q.directAddress,key:`${W}-direct`},{label:"Proxy Address",value:Q.proxyAddress,key:`${W}-proxy`},{label:"L1 Address",value:Q.l1Address,key:`${W}-l1`},{label:"Chain Pubkey",value:Q.chainPubkey,key:`${W}-chain`},{label:"Transport Pubkey",value:Q.transportPubkey,key:`${W}-transport`}].filter(Z=>!!Z.value),V=d?q(d,"my"):[r&&{label:"Nametag",value:r,key:"my-nametag",displayPrefix:"@"},a&&{label:"Direct Address",value:a,key:"my-direct"},o&&{label:"L1 Address",value:o,key:"my-l1"}].filter(Q=>!!Q),ee=u?q(u,"lookup"):[];return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:e,size:"sm",showOrbs:!1,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"My Public Keys",icon:Key,iconVariant:"neutral",onClose:e}),jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto flex-1",children:[V.length>0&&jsxRuntimeExports.jsx("div",{className:"p-4 space-y-2",children:jsxRuntimeExports.jsx("div",{className:"space-y-2 p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/30 border border-neutral-200 dark:border-neutral-700/30",children:V.map(({label:Q,value:W,key:Z,displayPrefix:z})=>jsxRuntimeExports.jsx(CopyableField,{label:Q,value:W,prefix:z,copied:C===Z,onCopy:()=>D(z?`${z}${W}`:W,Z)},Z))})}),jsxRuntimeExports.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-800/50 p-4 space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-medium text-neutral-500 dark:text-neutral-400 uppercase tracking-wider",children:"Lookup"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:l,onChange:Q=>c(Q.target.value),onKeyDown:F,placeholder:"@nametag, DIRECT://..., alpha1...",className:"w-full pl-8 pr-3 py-2.5 text-sm bg-neutral-100 dark:bg-neutral-800/50 text-neutral-900 dark:text-white placeholder-neutral-400 rounded-xl border border-neutral-200 dark:border-neutral-700/50 focus:outline-none focus:border-orange-500 transition-colors"})]}),jsxRuntimeExports.jsx("button",{onClick:B,disabled:!l.trim()||b||!s,className:"px-4 py-2.5 rounded-xl bg-orange-500 text-white text-sm font-medium disabled:opacity-50 hover:bg-orange-600 transition-colors flex items-center",children:b?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}):jsxRuntimeExports.jsx(Search,{className:"w-4 h-4"})})]}),m&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 dark:text-red-400",children:m}),ee.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-2 p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/30 border border-neutral-200 dark:border-neutral-700/30",children:ee.map(({label:Q,value:W,key:Z,displayPrefix:z})=>jsxRuntimeExports.jsx(CopyableField,{label:Q,value:W,prefix:z,copied:C===Z,onCopy:()=>D(z?`${z}${W}`:W,Z)},Z))})]})]})]})}function SettingsModal({isOpen:t,onClose:e,onOpenL1Wallet:s,onBackupWallet:r,onLogout:a,l1Balance:o}){const[l,c]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:e,size:"sm",showOrbs:!1,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"Settings",icon:Settings,iconVariant:"neutral",onClose:e}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-2",children:[jsxRuntimeExports.jsx(MenuButton,{icon:Layers,color:"blue",label:"L1 Wallet",subtitle:o?`${o} ALPHA`:void 0,onClick:()=>{e(),s()}}),jsxRuntimeExports.jsx(MenuButton,{icon:Key,color:"neutral",label:"My Public Keys",onClick:()=>{e(),c(!0)}}),jsxRuntimeExports.jsx(MenuButton,{icon:Download,color:"green",label:"Backup Wallet",showChevron:!1,onClick:()=>{e(),r()}}),jsxRuntimeExports.jsx(MenuButton,{icon:LogOut,color:"red",label:"Logout",danger:!0,onClick:()=>{e(),a()}})]})]}),jsxRuntimeExports.jsx(LookupModal,{isOpen:l,onClose:()=>c(!1)})]})}function BackupWalletModal({isOpen:t,onClose:e,onExportWalletFile:s,onShowRecoveryPhrase:r}){return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:e,size:"sm",showOrbs:!1,children:[jsxRuntimeExports.jsxs("div",{className:"relative px-6 py-5 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring"},className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(ShieldCheck,{className:"w-8 h-8 text-green-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-1",children:"Backup Wallet"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Choose how you want to backup your wallet"})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-6 space-y-3",children:[jsxRuntimeExports.jsx(MenuButton,{icon:Download,color:"blue",label:"Export Wallet File",subtitle:"Download encrypted JSON file",showChevron:!1,onClick:()=>{e(),s()}}),jsxRuntimeExports.jsx(MenuButton,{icon:Key,color:"orange",label:"Show Recovery Phrase",subtitle:"View 12-word seed phrase",showChevron:!1,onClick:()=>{e(),r()}}),jsxRuntimeExports.jsx("button",{onClick:e,className:"w-full py-3 text-sm text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors",children:"Cancel"})]})]})}function useGlobalSyncStatus(){return{isAnySyncing:!1,statusMessage:"All data synced"}}function LogoutConfirmModal({isOpen:t,onClose:e,onBackupAndLogout:s,onLogoutWithoutBackup:r,isLoggingOut:a=!1}){const{isAnySyncing:o}=useGlobalSyncStatus(),[l,c]=reactExports.useState(!1),[u,f]=reactExports.useState(!1),d=()=>{r()},p=()=>{c(!1),f(!1),r()},m=()=>{c(!1),f(!1)};return jsxRuntimeExports.jsx(BaseModal,{isOpen:t,onClose:l?m:e,size:"sm",showOrbs:!1,children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:l?jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:m,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-xl hover:bg-neutral-200/80 dark:hover:bg-neutral-800/80 text-neutral-500 transition-colors z-20",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("div",{className:"relative px-6 py-5 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring"},className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(Check,{className:"w-8 h-8 text-green-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Sync Complete"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-4",children:"All data has been synchronized."}),o]}),jsxRuntimeExports.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[o,jsxRuntimeExports.jsx(DangerButton,{icon:LogOut,fullWidth:!0,disabled:!1,onClick:p,children:"Logout"}),jsxRuntimeExports.jsx("button",{onClick:m,className:"w-full py-3 text-sm text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors",children:"Cancel"})]})]},"sync-warning"):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:20},children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-xl hover:bg-neutral-200/80 dark:hover:bg-neutral-800/80 text-neutral-500 transition-colors z-20",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("div",{className:"relative px-6 py-5 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring"},className:"w-16 h-16 rounded-full bg-amber-500/10 flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(TriangleAlert,{className:"w-8 h-8 text-amber-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-2",children:"Logout from Wallet?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"All local data will be deleted. Make sure you have a backup to restore your wallet later."}),o]}),jsxRuntimeExports.jsx("div",{className:"px-6 pb-6 pt-2 space-y-3",children:a?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-3 py-4",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 text-orange-500 animate-spin"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Logging out..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{icon:Download,fullWidth:!0,onClick:s,children:"Save Backup First"}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:d,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 text-red-500 dark:text-red-400 text-sm font-semibold rounded-xl transition-colors",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4"}),"Logout without backup"]}),jsxRuntimeExports.jsx("button",{onClick:e,className:"w-full py-3 text-sm text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300 transition-colors",children:"Cancel"})]})})]},"logout-confirm")})})}var qrCodeStyling$1={exports:{}},qrCodeStyling=qrCodeStyling$1.exports,hasRequiredQrCodeStyling;function requireQrCodeStyling(){return hasRequiredQrCodeStyling||(hasRequiredQrCodeStyling=1,(function(t,e){(function(s,r){t.exports=r()})(qrCodeStyling,(()=>(()=>{var s={873:(l,c)=>{var u,f,d=(function(){var p=function(v,S){var N=v,R=j[S],T=null,M=0,I=null,$=[],A={},L=function(te,pe){T=(function(xe){for(var be=new Array(xe),ce=0;ce<xe;ce+=1){be[ce]=new Array(xe);for(var re=0;re<xe;re+=1)be[ce][re]=null}return be})(M=4*N+17),Y(0,0),Y(M-7,0),Y(0,M-7),J(),oe(),G(te,pe),N>=7&&U(te),I==null&&(I=he(N,R,$)),ae(I,pe)},Y=function(te,pe){for(var xe=-1;xe<=7;xe+=1)if(!(te+xe<=-1||M<=te+xe))for(var be=-1;be<=7;be+=1)pe+be<=-1||M<=pe+be||(T[te+xe][pe+be]=0<=xe&&xe<=6&&(be==0||be==6)||0<=be&&be<=6&&(xe==0||xe==6)||2<=xe&&xe<=4&&2<=be&&be<=4)},oe=function(){for(var te=8;te<M-8;te+=1)T[te][6]==null&&(T[te][6]=te%2==0);for(var pe=8;pe<M-8;pe+=1)T[6][pe]==null&&(T[6][pe]=pe%2==0)},J=function(){for(var te=B.getPatternPosition(N),pe=0;pe<te.length;pe+=1)for(var xe=0;xe<te.length;xe+=1){var be=te[pe],ce=te[xe];if(T[be][ce]==null)for(var re=-2;re<=2;re+=1)for(var ie=-2;ie<=2;ie+=1)T[be+re][ce+ie]=re==-2||re==2||ie==-2||ie==2||re==0&&ie==0}},U=function(te){for(var pe=B.getBCHTypeNumber(N),xe=0;xe<18;xe+=1){var be=!te&&(pe>>xe&1)==1;T[Math.floor(xe/3)][xe%3+M-8-3]=be}for(xe=0;xe<18;xe+=1)be=!te&&(pe>>xe&1)==1,T[xe%3+M-8-3][Math.floor(xe/3)]=be},G=function(te,pe){for(var xe=R<<3|pe,be=B.getBCHTypeInfo(xe),ce=0;ce<15;ce+=1){var re=!te&&(be>>ce&1)==1;ce<6?T[ce][8]=re:ce<8?T[ce+1][8]=re:T[M-15+ce][8]=re}for(ce=0;ce<15;ce+=1)re=!te&&(be>>ce&1)==1,ce<8?T[8][M-ce-1]=re:ce<9?T[8][15-ce-1+1]=re:T[8][15-ce-1]=re;T[M-8][8]=!te},ae=function(te,pe){for(var xe=-1,be=M-1,ce=7,re=0,ie=B.getMaskFunction(pe),fe=M-1;fe>0;fe-=2)for(fe==6&&(fe-=1);;){for(var ye=0;ye<2;ye+=1)if(T[be][fe-ye]==null){var we=!1;re<te.length&&(we=(te[re]>>>ce&1)==1),ie(be,fe-ye)&&(we=!we),T[be][fe-ye]=we,(ce-=1)==-1&&(re+=1,ce=7)}if((be+=xe)<0||M<=be){be-=xe,xe=-xe;break}}},he=function(te,pe,xe){for(var be=q.getRSBlocks(te,pe),ce=V(),re=0;re<xe.length;re+=1){var ie=xe[re];ce.put(ie.getMode(),4),ce.put(ie.getLength(),B.getLengthInBits(ie.getMode(),te)),ie.write(ce)}var fe=0;for(re=0;re<be.length;re+=1)fe+=be[re].dataCount;if(ce.getLengthInBits()>8*fe)throw"code length overflow. ("+ce.getLengthInBits()+">"+8*fe+")";for(ce.getLengthInBits()+4<=8*fe&&ce.put(0,4);ce.getLengthInBits()%8!=0;)ce.putBit(!1);for(;!(ce.getLengthInBits()>=8*fe||(ce.put(236,8),ce.getLengthInBits()>=8*fe));)ce.put(17,8);return(function(ye,we){for(var Re=0,Me=0,ke=0,Le=new Array(we.length),Fe=new Array(we.length),Te=0;Te<we.length;Te+=1){var Be=we[Te].dataCount,ze=we[Te].totalCount-Be;Me=Math.max(Me,Be),ke=Math.max(ke,ze),Le[Te]=new Array(Be);for(var de=0;de<Le[Te].length;de+=1)Le[Te][de]=255&ye.getBuffer()[de+Re];Re+=Be;var ne=B.getErrorCorrectPolynomial(ze),se=F(Le[Te],ne.getLength()-1).mod(ne);for(Fe[Te]=new Array(ne.getLength()-1),de=0;de<Fe[Te].length;de+=1){var me=de+se.getLength()-Fe[Te].length;Fe[Te][de]=me>=0?se.getAt(me):0}}var Ee=0;for(de=0;de<we.length;de+=1)Ee+=we[de].totalCount;var _e=new Array(Ee),ve=0;for(de=0;de<Me;de+=1)for(Te=0;Te<we.length;Te+=1)de<Le[Te].length&&(_e[ve]=Le[Te][de],ve+=1);for(de=0;de<ke;de+=1)for(Te=0;Te<we.length;Te+=1)de<Fe[Te].length&&(_e[ve]=Fe[Te][de],ve+=1);return _e})(ce,be)};A.addData=function(te,pe){var xe=null;switch(pe=pe||"Byte"){case"Numeric":xe=ee(te);break;case"Alphanumeric":xe=Q(te);break;case"Byte":xe=W(te);break;case"Kanji":xe=Z(te);break;default:throw"mode:"+pe}$.push(xe),I=null},A.isDark=function(te,pe){if(te<0||M<=te||pe<0||M<=pe)throw te+","+pe;return T[te][pe]},A.getModuleCount=function(){return M},A.make=function(){if(N<1){for(var te=1;te<40;te++){for(var pe=q.getRSBlocks(te,R),xe=V(),be=0;be<$.length;be++){var ce=$[be];xe.put(ce.getMode(),4),xe.put(ce.getLength(),B.getLengthInBits(ce.getMode(),te)),ce.write(xe)}var re=0;for(be=0;be<pe.length;be++)re+=pe[be].dataCount;if(xe.getLengthInBits()<=8*re)break}N=te}L(!1,(function(){for(var ie=0,fe=0,ye=0;ye<8;ye+=1){L(!0,ye);var we=B.getLostPoint(A);(ye==0||ie>we)&&(ie=we,fe=ye)}return fe})())},A.createTableTag=function(te,pe){te=te||2;var xe="";xe+='<table style="',xe+=" border-width: 0px; border-style: none;",xe+=" border-collapse: collapse;",xe+=" padding: 0px; margin: "+(pe=pe===void 0?4*te:pe)+"px;",xe+='">',xe+="<tbody>";for(var be=0;be<A.getModuleCount();be+=1){xe+="<tr>";for(var ce=0;ce<A.getModuleCount();ce+=1)xe+='<td style="',xe+=" border-width: 0px; border-style: none;",xe+=" border-collapse: collapse;",xe+=" padding: 0px; margin: 0px;",xe+=" width: "+te+"px;",xe+=" height: "+te+"px;",xe+=" background-color: ",xe+=A.isDark(be,ce)?"#000000":"#ffffff",xe+=";",xe+='"/>';xe+="</tr>"}return(xe+="</tbody>")+"</table>"},A.createSvgTag=function(te,pe,xe,be){var ce={};typeof arguments[0]=="object"&&(te=(ce=arguments[0]).cellSize,pe=ce.margin,xe=ce.alt,be=ce.title),te=te||2,pe=pe===void 0?4*te:pe,(xe=typeof xe=="string"?{text:xe}:xe||{}).text=xe.text||null,xe.id=xe.text?xe.id||"qrcode-description":null,(be=typeof be=="string"?{text:be}:be||{}).text=be.text||null,be.id=be.text?be.id||"qrcode-title":null;var re,ie,fe,ye,we=A.getModuleCount()*te+2*pe,Re="";for(ye="l"+te+",0 0,"+te+" -"+te+",0 0,-"+te+"z ",Re+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',Re+=ce.scalable?"":' width="'+we+'px" height="'+we+'px"',Re+=' viewBox="0 0 '+we+" "+we+'" ',Re+=' preserveAspectRatio="xMinYMin meet"',Re+=be.text||xe.text?' role="img" aria-labelledby="'+le([be.id,xe.id].join(" ").trim())+'"':"",Re+=">",Re+=be.text?'<title id="'+le(be.id)+'">'+le(be.text)+"</title>":"",Re+=xe.text?'<description id="'+le(xe.id)+'">'+le(xe.text)+"</description>":"",Re+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',Re+='<path d="',ie=0;ie<A.getModuleCount();ie+=1)for(fe=ie*te+pe,re=0;re<A.getModuleCount();re+=1)A.isDark(ie,re)&&(Re+="M"+(re*te+pe)+","+fe+ye);return(Re+='" stroke="transparent" fill="black"/>')+"</svg>"},A.createDataURL=function(te,pe){te=te||2,pe=pe===void 0?4*te:pe;var xe=A.getModuleCount()*te+2*pe,be=pe,ce=xe-pe;return k(xe,xe,(function(re,ie){if(be<=re&&re<ce&&be<=ie&&ie<ce){var fe=Math.floor((re-be)/te),ye=Math.floor((ie-be)/te);return A.isDark(ye,fe)?0:1}return 1}))},A.createImgTag=function(te,pe,xe){te=te||2,pe=pe===void 0?4*te:pe;var be=A.getModuleCount()*te+2*pe,ce="";return ce+="<img",ce+=' src="',ce+=A.createDataURL(te,pe),ce+='"',ce+=' width="',ce+=be,ce+='"',ce+=' height="',ce+=be,ce+='"',xe&&(ce+=' alt="',ce+=le(xe),ce+='"'),ce+"/>"};var le=function(te){for(var pe="",xe=0;xe<te.length;xe+=1){var be=te.charAt(xe);switch(be){case"<":pe+="&lt;";break;case">":pe+="&gt;";break;case"&":pe+="&amp;";break;case'"':pe+="&quot;";break;default:pe+=be}}return pe};return A.createASCII=function(te,pe){if((te=te||1)<2)return(function(Le){Le=Le===void 0?2:Le;var Fe,Te,Be,ze,de,ne=1*A.getModuleCount()+2*Le,se=Le,me=ne-Le,Ee={"":""," ":""," ":"","  ":" "},_e={"":""," ":""," ":" ","  ":" "},ve="";for(Fe=0;Fe<ne;Fe+=2){for(Be=Math.floor((Fe-se)/1),ze=Math.floor((Fe+1-se)/1),Te=0;Te<ne;Te+=1)de="",se<=Te&&Te<me&&se<=Fe&&Fe<me&&A.isDark(Be,Math.floor((Te-se)/1))&&(de=" "),se<=Te&&Te<me&&se<=Fe+1&&Fe+1<me&&A.isDark(ze,Math.floor((Te-se)/1))?de+=" ":de+="",ve+=Le<1&&Fe+1>=me?_e[de]:Ee[de];ve+=`
`}return ne%2&&Le>0?ve.substring(0,ve.length-ne-1)+Array(ne+1).join(""):ve.substring(0,ve.length-1)})(pe);te-=1,pe=pe===void 0?2*te:pe;var xe,be,ce,re,ie=A.getModuleCount()*te+2*pe,fe=pe,ye=ie-pe,we=Array(te+1).join(""),Re=Array(te+1).join("  "),Me="",ke="";for(xe=0;xe<ie;xe+=1){for(ce=Math.floor((xe-fe)/te),ke="",be=0;be<ie;be+=1)re=1,fe<=be&&be<ye&&fe<=xe&&xe<ye&&A.isDark(ce,Math.floor((be-fe)/te))&&(re=0),ke+=re?we:Re;for(ce=0;ce<te;ce+=1)Me+=ke+`
`}return Me.substring(0,Me.length-1)},A.renderTo2dContext=function(te,pe){pe=pe||2;for(var xe=A.getModuleCount(),be=0;be<xe;be++)for(var ce=0;ce<xe;ce++)te.fillStyle=A.isDark(be,ce)?"black":"white",te.fillRect(be*pe,ce*pe,pe,pe)},A};p.stringToBytes=(p.stringToBytesFuncs={default:function(v){for(var S=[],N=0;N<v.length;N+=1){var R=v.charCodeAt(N);S.push(255&R)}return S}}).default,p.createStringToBytes=function(v,S){var N=(function(){for(var T=O(v),M=function(){var oe=T.read();if(oe==-1)throw"eof";return oe},I=0,$={};;){var A=T.read();if(A==-1)break;var L=M(),Y=M()<<8|M();$[String.fromCharCode(A<<8|L)]=Y,I+=1}if(I!=S)throw I+" != "+S;return $})(),R=63;return function(T){for(var M=[],I=0;I<T.length;I+=1){var $=T.charCodeAt(I);if($<128)M.push($);else{var A=N[T.charAt(I)];typeof A=="number"?(255&A)==A?M.push(A):(M.push(A>>>8),M.push(255&A)):M.push(R)}}return M}};var m,y,b,E,C,j={L:1,M:0,Q:3,H:2},B=(m=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],y=1335,b=7973,C=function(v){for(var S=0;v!=0;)S+=1,v>>>=1;return S},(E={}).getBCHTypeInfo=function(v){for(var S=v<<10;C(S)-C(y)>=0;)S^=y<<C(S)-C(y);return 21522^(v<<10|S)},E.getBCHTypeNumber=function(v){for(var S=v<<12;C(S)-C(b)>=0;)S^=b<<C(S)-C(b);return v<<12|S},E.getPatternPosition=function(v){return m[v-1]},E.getMaskFunction=function(v){switch(v){case 0:return function(S,N){return(S+N)%2==0};case 1:return function(S,N){return S%2==0};case 2:return function(S,N){return N%3==0};case 3:return function(S,N){return(S+N)%3==0};case 4:return function(S,N){return(Math.floor(S/2)+Math.floor(N/3))%2==0};case 5:return function(S,N){return S*N%2+S*N%3==0};case 6:return function(S,N){return(S*N%2+S*N%3)%2==0};case 7:return function(S,N){return(S*N%3+(S+N)%2)%2==0};default:throw"bad maskPattern:"+v}},E.getErrorCorrectPolynomial=function(v){for(var S=F([1],0),N=0;N<v;N+=1)S=S.multiply(F([1,D.gexp(N)],0));return S},E.getLengthInBits=function(v,S){if(1<=S&&S<10)switch(v){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+v}else if(S<27)switch(v){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+v}else{if(!(S<41))throw"type:"+S;switch(v){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+v}}},E.getLostPoint=function(v){for(var S=v.getModuleCount(),N=0,R=0;R<S;R+=1)for(var T=0;T<S;T+=1){for(var M=0,I=v.isDark(R,T),$=-1;$<=1;$+=1)if(!(R+$<0||S<=R+$))for(var A=-1;A<=1;A+=1)T+A<0||S<=T+A||$==0&&A==0||I==v.isDark(R+$,T+A)&&(M+=1);M>5&&(N+=3+M-5)}for(R=0;R<S-1;R+=1)for(T=0;T<S-1;T+=1){var L=0;v.isDark(R,T)&&(L+=1),v.isDark(R+1,T)&&(L+=1),v.isDark(R,T+1)&&(L+=1),v.isDark(R+1,T+1)&&(L+=1),L!=0&&L!=4||(N+=3)}for(R=0;R<S;R+=1)for(T=0;T<S-6;T+=1)v.isDark(R,T)&&!v.isDark(R,T+1)&&v.isDark(R,T+2)&&v.isDark(R,T+3)&&v.isDark(R,T+4)&&!v.isDark(R,T+5)&&v.isDark(R,T+6)&&(N+=40);for(T=0;T<S;T+=1)for(R=0;R<S-6;R+=1)v.isDark(R,T)&&!v.isDark(R+1,T)&&v.isDark(R+2,T)&&v.isDark(R+3,T)&&v.isDark(R+4,T)&&!v.isDark(R+5,T)&&v.isDark(R+6,T)&&(N+=40);var Y=0;for(T=0;T<S;T+=1)for(R=0;R<S;R+=1)v.isDark(R,T)&&(Y+=1);return N+Math.abs(100*Y/S/S-50)/5*10},E),D=(function(){for(var v=new Array(256),S=new Array(256),N=0;N<8;N+=1)v[N]=1<<N;for(N=8;N<256;N+=1)v[N]=v[N-4]^v[N-5]^v[N-6]^v[N-8];for(N=0;N<255;N+=1)S[v[N]]=N;return{glog:function(R){if(R<1)throw"glog("+R+")";return S[R]},gexp:function(R){for(;R<0;)R+=255;for(;R>=256;)R-=255;return v[R]}}})();function F(v,S){if(v.length===void 0)throw v.length+"/"+S;var N=(function(){for(var T=0;T<v.length&&v[T]==0;)T+=1;for(var M=new Array(v.length-T+S),I=0;I<v.length-T;I+=1)M[I]=v[I+T];return M})(),R={getAt:function(T){return N[T]},getLength:function(){return N.length},multiply:function(T){for(var M=new Array(R.getLength()+T.getLength()-1),I=0;I<R.getLength();I+=1)for(var $=0;$<T.getLength();$+=1)M[I+$]^=D.gexp(D.glog(R.getAt(I))+D.glog(T.getAt($)));return F(M,0)},mod:function(T){if(R.getLength()-T.getLength()<0)return R;for(var M=D.glog(R.getAt(0))-D.glog(T.getAt(0)),I=new Array(R.getLength()),$=0;$<R.getLength();$+=1)I[$]=R.getAt($);for($=0;$<T.getLength();$+=1)I[$]^=D.gexp(D.glog(T.getAt($))+M);return F(I,0).mod(T)}};return R}var q=(function(){var v=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],S=function(R,T){var M={};return M.totalCount=R,M.dataCount=T,M},N={getRSBlocks:function(R,T){var M=(function(U,G){switch(G){case j.L:return v[4*(U-1)+0];case j.M:return v[4*(U-1)+1];case j.Q:return v[4*(U-1)+2];case j.H:return v[4*(U-1)+3];default:return}})(R,T);if(M===void 0)throw"bad rs block @ typeNumber:"+R+"/errorCorrectionLevel:"+T;for(var I=M.length/3,$=[],A=0;A<I;A+=1)for(var L=M[3*A+0],Y=M[3*A+1],oe=M[3*A+2],J=0;J<L;J+=1)$.push(S(Y,oe));return $}};return N})(),V=function(){var v=[],S=0,N={getBuffer:function(){return v},getAt:function(R){var T=Math.floor(R/8);return(v[T]>>>7-R%8&1)==1},put:function(R,T){for(var M=0;M<T;M+=1)N.putBit((R>>>T-M-1&1)==1)},getLengthInBits:function(){return S},putBit:function(R){var T=Math.floor(S/8);v.length<=T&&v.push(0),R&&(v[T]|=128>>>S%8),S+=1}};return N},ee=function(v){var S=v,N={getMode:function(){return 1},getLength:function(M){return S.length},write:function(M){for(var I=S,$=0;$+2<I.length;)M.put(R(I.substring($,$+3)),10),$+=3;$<I.length&&(I.length-$==1?M.put(R(I.substring($,$+1)),4):I.length-$==2&&M.put(R(I.substring($,$+2)),7))}},R=function(M){for(var I=0,$=0;$<M.length;$+=1)I=10*I+T(M.charAt($));return I},T=function(M){if("0"<=M&&M<="9")return M.charCodeAt(0)-48;throw"illegal char :"+M};return N},Q=function(v){var S=v,N={getMode:function(){return 2},getLength:function(T){return S.length},write:function(T){for(var M=S,I=0;I+1<M.length;)T.put(45*R(M.charAt(I))+R(M.charAt(I+1)),11),I+=2;I<M.length&&T.put(R(M.charAt(I)),6)}},R=function(T){if("0"<=T&&T<="9")return T.charCodeAt(0)-48;if("A"<=T&&T<="Z")return T.charCodeAt(0)-65+10;switch(T){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+T}};return N},W=function(v){var S=p.stringToBytes(v);return{getMode:function(){return 4},getLength:function(N){return S.length},write:function(N){for(var R=0;R<S.length;R+=1)N.put(S[R],8)}}},Z=function(v){var S=p.stringToBytesFuncs.SJIS;if(!S)throw"sjis not supported.";(function(){var T=S("");if(T.length!=2||(T[0]<<8|T[1])!=38726)throw"sjis not supported."})();var N=S(v),R={getMode:function(){return 8},getLength:function(T){return~~(N.length/2)},write:function(T){for(var M=N,I=0;I+1<M.length;){var $=(255&M[I])<<8|255&M[I+1];if(33088<=$&&$<=40956)$-=33088;else{if(!(57408<=$&&$<=60351))throw"illegal char at "+(I+1)+"/"+$;$-=49472}$=192*($>>>8&255)+(255&$),T.put($,13),I+=2}if(I<M.length)throw"illegal char at "+(I+1)}};return R},z=function(){var v=[],S={writeByte:function(N){v.push(255&N)},writeShort:function(N){S.writeByte(N),S.writeByte(N>>>8)},writeBytes:function(N,R,T){R=R||0,T=T||N.length;for(var M=0;M<T;M+=1)S.writeByte(N[M+R])},writeString:function(N){for(var R=0;R<N.length;R+=1)S.writeByte(N.charCodeAt(R))},toByteArray:function(){return v},toString:function(){var N="";N+="[";for(var R=0;R<v.length;R+=1)R>0&&(N+=","),N+=v[R];return N+"]"}};return S},O=function(v){var S=v,N=0,R=0,T=0,M={read:function(){for(;T<8;){if(N>=S.length){if(T==0)return-1;throw"unexpected end of file./"+T}var $=S.charAt(N);if(N+=1,$=="=")return T=0,-1;$.match(/^\s$/)||(R=R<<6|I($.charCodeAt(0)),T+=6)}var A=R>>>T-8&255;return T-=8,A}},I=function($){if(65<=$&&$<=90)return $-65;if(97<=$&&$<=122)return $-97+26;if(48<=$&&$<=57)return $-48+52;if($==43)return 62;if($==47)return 63;throw"c:"+$};return M},k=function(v,S,N){for(var R=(function(Y,oe){var J=Y,U=oe,G=new Array(Y*oe),ae={setPixel:function(te,pe,xe){G[pe*J+te]=xe},write:function(te){te.writeString("GIF87a"),te.writeShort(J),te.writeShort(U),te.writeByte(128),te.writeByte(0),te.writeByte(0),te.writeByte(0),te.writeByte(0),te.writeByte(0),te.writeByte(255),te.writeByte(255),te.writeByte(255),te.writeString(","),te.writeShort(0),te.writeShort(0),te.writeShort(J),te.writeShort(U),te.writeByte(0);var pe=he(2);te.writeByte(2);for(var xe=0;pe.length-xe>255;)te.writeByte(255),te.writeBytes(pe,xe,255),xe+=255;te.writeByte(pe.length-xe),te.writeBytes(pe,xe,pe.length-xe),te.writeByte(0),te.writeString(";")}},he=function(te){for(var pe=1<<te,xe=1+(1<<te),be=te+1,ce=le(),re=0;re<pe;re+=1)ce.add(String.fromCharCode(re));ce.add(String.fromCharCode(pe)),ce.add(String.fromCharCode(xe));var ie,fe,ye,we=z(),Re=(ie=we,fe=0,ye=0,{write:function(Fe,Te){if(Fe>>>Te)throw"length over";for(;fe+Te>=8;)ie.writeByte(255&(Fe<<fe|ye)),Te-=8-fe,Fe>>>=8-fe,ye=0,fe=0;ye|=Fe<<fe,fe+=Te},flush:function(){fe>0&&ie.writeByte(ye)}});Re.write(pe,be);var Me=0,ke=String.fromCharCode(G[Me]);for(Me+=1;Me<G.length;){var Le=String.fromCharCode(G[Me]);Me+=1,ce.contains(ke+Le)?ke+=Le:(Re.write(ce.indexOf(ke),be),ce.size()<4095&&(ce.size()==1<<be&&(be+=1),ce.add(ke+Le)),ke=Le)}return Re.write(ce.indexOf(ke),be),Re.write(xe,be),Re.flush(),we.toByteArray()},le=function(){var te={},pe=0,xe={add:function(be){if(xe.contains(be))throw"dup key:"+be;te[be]=pe,pe+=1},size:function(){return pe},indexOf:function(be){return te[be]},contains:function(be){return te[be]!==void 0}};return xe};return ae})(v,S),T=0;T<S;T+=1)for(var M=0;M<v;M+=1)R.setPixel(M,T,N(M,T));var I=z();R.write(I);for(var $=(function(){var Y=0,oe=0,J=0,U="",G={},ae=function(le){U+=String.fromCharCode(he(63&le))},he=function(le){if(!(le<0)){if(le<26)return 65+le;if(le<52)return le-26+97;if(le<62)return le-52+48;if(le==62)return 43;if(le==63)return 47}throw"n:"+le};return G.writeByte=function(le){for(Y=Y<<8|255&le,oe+=8,J+=1;oe>=6;)ae(Y>>>oe-6),oe-=6},G.flush=function(){if(oe>0&&(ae(Y<<6-oe),Y=0,oe=0),J%3!=0)for(var le=3-J%3,te=0;te<le;te+=1)U+="="},G.toString=function(){return U},G})(),A=I.toByteArray(),L=0;L<A.length;L+=1)$.writeByte(A[L]);return $.flush(),"data:image/gif;base64,"+$};return p})();d.stringToBytesFuncs["UTF-8"]=function(p){return(function(m){for(var y=[],b=0;b<m.length;b++){var E=m.charCodeAt(b);E<128?y.push(E):E<2048?y.push(192|E>>6,128|63&E):E<55296||E>=57344?y.push(224|E>>12,128|E>>6&63,128|63&E):(b++,E=65536+((1023&E)<<10|1023&m.charCodeAt(b)),y.push(240|E>>18,128|E>>12&63,128|E>>6&63,128|63&E))}return y})(p)},(f=typeof(u=function(){return d})=="function"?u.apply(c,[]):u)===void 0||(l.exports=f)}},r={};function a(l){var c=r[l];if(c!==void 0)return c.exports;var u=r[l]={exports:{}};return s[l](u,u.exports,a),u.exports}a.n=l=>{var c=l&&l.__esModule?()=>l.default:()=>l;return a.d(c,{a:c}),c},a.d=(l,c)=>{for(var u in c)a.o(c,u)&&!a.o(l,u)&&Object.defineProperty(l,u,{enumerable:!0,get:c[u]})},a.o=(l,c)=>Object.prototype.hasOwnProperty.call(l,c);var o={};return(()=>{a.d(o,{default:()=>S});const l=N=>!!N&&typeof N=="object"&&!Array.isArray(N);function c(N,...R){if(!R.length)return N;const T=R.shift();return T!==void 0&&l(N)&&l(T)?(N=Object.assign({},N),Object.keys(T).forEach((M=>{const I=N[M],$=T[M];Array.isArray(I)&&Array.isArray($)?N[M]=$:l(I)&&l($)?N[M]=c(Object.assign({},I),$):N[M]=$})),c(N,...R)):N}function u(N,R){const T=document.createElement("a");T.download=R,T.href=N,document.body.appendChild(T),T.click(),document.body.removeChild(T)}const f={L:.07,M:.15,Q:.25,H:.3};class d{constructor({svg:R,type:T,window:M}){this._svg=R,this._type=T,this._window=M}draw(R,T,M,I){let $;switch(this._type){case"dots":$=this._drawDot;break;case"classy":$=this._drawClassy;break;case"classy-rounded":$=this._drawClassyRounded;break;case"rounded":$=this._drawRounded;break;case"extra-rounded":$=this._drawExtraRounded;break;default:$=this._drawSquare}$.call(this,{x:R,y:T,size:M,getNeighbor:I})}_rotateFigure({x:R,y:T,size:M,rotation:I=0,draw:$}){var A;const L=R+M/2,Y=T+M/2;$(),(A=this._element)===null||A===void 0||A.setAttribute("transform",`rotate(${180*I/Math.PI},${L},${Y})`)}_basicDot(R){const{size:T,x:M,y:I}=R;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(M+T/2)),this._element.setAttribute("cy",String(I+T/2)),this._element.setAttribute("r",String(T/2))}}))}_basicSquare(R){const{size:T,x:M,y:I}=R;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(M)),this._element.setAttribute("y",String(I)),this._element.setAttribute("width",String(T)),this._element.setAttribute("height",String(T))}}))}_basicSideRounded(R){const{size:T,x:M,y:I}=R;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${I}v ${T}h `+T/2+`a ${T/2} ${T/2}, 0, 0, 0, 0 ${-T}`)}}))}_basicCornerRounded(R){const{size:T,x:M,y:I}=R;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${I}v ${T}h ${T}v `+-T/2+`a ${T/2} ${T/2}, 0, 0, 0, ${-T/2} ${-T/2}`)}}))}_basicCornerExtraRounded(R){const{size:T,x:M,y:I}=R;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${I}v ${T}h ${T}a ${T} ${T}, 0, 0, 0, ${-T} ${-T}`)}}))}_basicCornersRounded(R){const{size:T,x:M,y:I}=R;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("d",`M ${M} ${I}v `+T/2+`a ${T/2} ${T/2}, 0, 0, 0, ${T/2} ${T/2}h `+T/2+"v "+-T/2+`a ${T/2} ${T/2}, 0, 0, 0, ${-T/2} ${-T/2}`)}}))}_drawDot({x:R,y:T,size:M}){this._basicDot({x:R,y:T,size:M,rotation:0})}_drawSquare({x:R,y:T,size:M}){this._basicSquare({x:R,y:T,size:M,rotation:0})}_drawRounded({x:R,y:T,size:M,getNeighbor:I}){const $=I?+I(-1,0):0,A=I?+I(1,0):0,L=I?+I(0,-1):0,Y=I?+I(0,1):0,oe=$+A+L+Y;if(oe!==0)if(oe>2||$&&A||L&&Y)this._basicSquare({x:R,y:T,size:M,rotation:0});else{if(oe===2){let J=0;return $&&L?J=Math.PI/2:L&&A?J=Math.PI:A&&Y&&(J=-Math.PI/2),void this._basicCornerRounded({x:R,y:T,size:M,rotation:J})}if(oe===1){let J=0;return L?J=Math.PI/2:A?J=Math.PI:Y&&(J=-Math.PI/2),void this._basicSideRounded({x:R,y:T,size:M,rotation:J})}}else this._basicDot({x:R,y:T,size:M,rotation:0})}_drawExtraRounded({x:R,y:T,size:M,getNeighbor:I}){const $=I?+I(-1,0):0,A=I?+I(1,0):0,L=I?+I(0,-1):0,Y=I?+I(0,1):0,oe=$+A+L+Y;if(oe!==0)if(oe>2||$&&A||L&&Y)this._basicSquare({x:R,y:T,size:M,rotation:0});else{if(oe===2){let J=0;return $&&L?J=Math.PI/2:L&&A?J=Math.PI:A&&Y&&(J=-Math.PI/2),void this._basicCornerExtraRounded({x:R,y:T,size:M,rotation:J})}if(oe===1){let J=0;return L?J=Math.PI/2:A?J=Math.PI:Y&&(J=-Math.PI/2),void this._basicSideRounded({x:R,y:T,size:M,rotation:J})}}else this._basicDot({x:R,y:T,size:M,rotation:0})}_drawClassy({x:R,y:T,size:M,getNeighbor:I}){const $=I?+I(-1,0):0,A=I?+I(1,0):0,L=I?+I(0,-1):0,Y=I?+I(0,1):0;$+A+L+Y!==0?$||L?A||Y?this._basicSquare({x:R,y:T,size:M,rotation:0}):this._basicCornerRounded({x:R,y:T,size:M,rotation:Math.PI/2}):this._basicCornerRounded({x:R,y:T,size:M,rotation:-Math.PI/2}):this._basicCornersRounded({x:R,y:T,size:M,rotation:Math.PI/2})}_drawClassyRounded({x:R,y:T,size:M,getNeighbor:I}){const $=I?+I(-1,0):0,A=I?+I(1,0):0,L=I?+I(0,-1):0,Y=I?+I(0,1):0;$+A+L+Y!==0?$||L?A||Y?this._basicSquare({x:R,y:T,size:M,rotation:0}):this._basicCornerExtraRounded({x:R,y:T,size:M,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:R,y:T,size:M,rotation:-Math.PI/2}):this._basicCornersRounded({x:R,y:T,size:M,rotation:Math.PI/2})}}const p={dot:"dot",square:"square",extraRounded:"extra-rounded"},m=Object.values(p);class y{constructor({svg:R,type:T,window:M}){this._svg=R,this._type=T,this._window=M}draw(R,T,M,I){let $;switch(this._type){case p.square:$=this._drawSquare;break;case p.extraRounded:$=this._drawExtraRounded;break;default:$=this._drawDot}$.call(this,{x:R,y:T,size:M,rotation:I})}_rotateFigure({x:R,y:T,size:M,rotation:I=0,draw:$}){var A;const L=R+M/2,Y=T+M/2;$(),(A=this._element)===null||A===void 0||A.setAttribute("transform",`rotate(${180*I/Math.PI},${L},${Y})`)}_basicDot(R){const{size:T,x:M,y:I}=R,$=T/7;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M+T/2} ${I}a ${T/2} ${T/2} 0 1 0 0.1 0zm 0 ${$}a ${T/2-$} ${T/2-$} 0 1 1 -0.1 0Z`)}}))}_basicSquare(R){const{size:T,x:M,y:I}=R,$=T/7;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M} ${I}v ${T}h ${T}v `+-T+`zM ${M+$} ${I+$}h `+(T-2*$)+"v "+(T-2*$)+"h "+(2*$-T)+"z")}}))}_basicExtraRounded(R){const{size:T,x:M,y:I}=R,$=T/7;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","path"),this._element.setAttribute("clip-rule","evenodd"),this._element.setAttribute("d",`M ${M} ${I+2.5*$}v `+2*$+`a ${2.5*$} ${2.5*$}, 0, 0, 0, ${2.5*$} ${2.5*$}h `+2*$+`a ${2.5*$} ${2.5*$}, 0, 0, 0, ${2.5*$} ${2.5*-$}v `+-2*$+`a ${2.5*$} ${2.5*$}, 0, 0, 0, ${2.5*-$} ${2.5*-$}h `+-2*$+`a ${2.5*$} ${2.5*$}, 0, 0, 0, ${2.5*-$} ${2.5*$}M ${M+2.5*$} ${I+$}h `+2*$+`a ${1.5*$} ${1.5*$}, 0, 0, 1, ${1.5*$} ${1.5*$}v `+2*$+`a ${1.5*$} ${1.5*$}, 0, 0, 1, ${1.5*-$} ${1.5*$}h `+-2*$+`a ${1.5*$} ${1.5*$}, 0, 0, 1, ${1.5*-$} ${1.5*-$}v `+-2*$+`a ${1.5*$} ${1.5*$}, 0, 0, 1, ${1.5*$} ${1.5*-$}`)}}))}_drawDot({x:R,y:T,size:M,rotation:I}){this._basicDot({x:R,y:T,size:M,rotation:I})}_drawSquare({x:R,y:T,size:M,rotation:I}){this._basicSquare({x:R,y:T,size:M,rotation:I})}_drawExtraRounded({x:R,y:T,size:M,rotation:I}){this._basicExtraRounded({x:R,y:T,size:M,rotation:I})}}const b={dot:"dot",square:"square"},E=Object.values(b);class C{constructor({svg:R,type:T,window:M}){this._svg=R,this._type=T,this._window=M}draw(R,T,M,I){let $;$=this._type===b.square?this._drawSquare:this._drawDot,$.call(this,{x:R,y:T,size:M,rotation:I})}_rotateFigure({x:R,y:T,size:M,rotation:I=0,draw:$}){var A;const L=R+M/2,Y=T+M/2;$(),(A=this._element)===null||A===void 0||A.setAttribute("transform",`rotate(${180*I/Math.PI},${L},${Y})`)}_basicDot(R){const{size:T,x:M,y:I}=R;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","circle"),this._element.setAttribute("cx",String(M+T/2)),this._element.setAttribute("cy",String(I+T/2)),this._element.setAttribute("r",String(T/2))}}))}_basicSquare(R){const{size:T,x:M,y:I}=R;this._rotateFigure(Object.assign(Object.assign({},R),{draw:()=>{this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect"),this._element.setAttribute("x",String(M)),this._element.setAttribute("y",String(I)),this._element.setAttribute("width",String(T)),this._element.setAttribute("height",String(T))}}))}_drawDot({x:R,y:T,size:M,rotation:I}){this._basicDot({x:R,y:T,size:M,rotation:I})}_drawSquare({x:R,y:T,size:M,rotation:I}){this._basicSquare({x:R,y:T,size:M,rotation:I})}}const j="circle",B=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],D=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class F{constructor(R,T){this._roundSize=M=>this._options.dotsOptions.roundSize?Math.floor(M):M,this._window=T,this._element=this._window.document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(R.width)),this._element.setAttribute("height",String(R.height)),this._element.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),R.dotsOptions.roundSize||this._element.setAttribute("shape-rendering","crispEdges"),this._element.setAttribute("viewBox",`0 0 ${R.width} ${R.height}`),this._defs=this._window.document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._imageUri=R.image,this._instanceId=F.instanceCount++,this._options=R}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(R){const T=R.getModuleCount(),M=Math.min(this._options.width,this._options.height)-2*this._options.margin,I=this._options.shape===j?M/Math.sqrt(2):M,$=this._roundSize(I/T);let A={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=R,this._options.image){if(await this.loadImage(),!this._image)return;const{imageOptions:L,qrOptions:Y}=this._options,oe=L.imageSize*f[Y.errorCorrectionLevel],J=Math.floor(oe*T*T);A=(function({originalHeight:U,originalWidth:G,maxHiddenDots:ae,maxHiddenAxisDots:he,dotSize:le}){const te={x:0,y:0},pe={x:0,y:0};if(U<=0||G<=0||ae<=0||le<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};const xe=U/G;return te.x=Math.floor(Math.sqrt(ae/xe)),te.x<=0&&(te.x=1),he&&he<te.x&&(te.x=he),te.x%2==0&&te.x--,pe.x=te.x*le,te.y=1+2*Math.ceil((te.x*xe-1)/2),pe.y=Math.round(pe.x*xe),(te.y*te.x>ae||he&&he<te.y)&&(he&&he<te.y?(te.y=he,te.y%2==0&&te.x--):te.y-=2,pe.y=te.y*le,te.x=1+2*Math.ceil((te.y/xe-1)/2),pe.x=Math.round(pe.y/xe)),{height:pe.y,width:pe.x,hideYDots:te.y,hideXDots:te.x}})({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:J,maxHiddenAxisDots:T-14,dotSize:$})}this.drawBackground(),this.drawDots(((L,Y)=>{var oe,J,U,G,ae,he;return!(this._options.imageOptions.hideBackgroundDots&&L>=(T-A.hideYDots)/2&&L<(T+A.hideYDots)/2&&Y>=(T-A.hideXDots)/2&&Y<(T+A.hideXDots)/2||!((oe=B[L])===null||oe===void 0)&&oe[Y]||!((J=B[L-T+7])===null||J===void 0)&&J[Y]||!((U=B[L])===null||U===void 0)&&U[Y-T+7]||!((G=D[L])===null||G===void 0)&&G[Y]||!((ae=D[L-T+7])===null||ae===void 0)&&ae[Y]||!((he=D[L])===null||he===void 0)&&he[Y-T+7])})),this.drawCorners(),this._options.image&&await this.drawImage({width:A.width,height:A.height,count:T,dotSize:$})}drawBackground(){var R,T,M;const I=this._element,$=this._options;if(I){const A=(R=$.backgroundOptions)===null||R===void 0?void 0:R.gradient,L=(T=$.backgroundOptions)===null||T===void 0?void 0:T.color;let Y=$.height,oe=$.width;if(A||L){const J=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id",`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),!((M=$.backgroundOptions)===null||M===void 0)&&M.round&&(Y=oe=Math.min($.width,$.height),J.setAttribute("rx",String(Y/2*$.backgroundOptions.round))),J.setAttribute("x",String(this._roundSize(($.width-oe)/2))),J.setAttribute("y",String(this._roundSize(($.height-Y)/2))),J.setAttribute("width",String(oe)),J.setAttribute("height",String(Y)),this._backgroundClipPath.appendChild(J),this._createColor({options:A,color:L,additionalRotation:0,x:0,y:0,height:$.height,width:$.width,name:`background-color-${this._instanceId}`})}}}drawDots(R){var T,M;if(!this._qr)throw"QR code is not defined";const I=this._options,$=this._qr.getModuleCount();if($>I.width||$>I.height)throw"The canvas is too small.";const A=Math.min(I.width,I.height)-2*I.margin,L=I.shape===j?A/Math.sqrt(2):A,Y=this._roundSize(L/$),oe=this._roundSize((I.width-$*Y)/2),J=this._roundSize((I.height-$*Y)/2),U=new d({svg:this._element,type:I.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id",`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(T=I.dotsOptions)===null||T===void 0?void 0:T.gradient,color:I.dotsOptions.color,additionalRotation:0,x:0,y:0,height:I.height,width:I.width,name:`dot-color-${this._instanceId}`});for(let G=0;G<$;G++)for(let ae=0;ae<$;ae++)R&&!R(G,ae)||!((M=this._qr)===null||M===void 0)&&M.isDark(G,ae)&&(U.draw(oe+ae*Y,J+G*Y,Y,((he,le)=>!(ae+he<0||G+le<0||ae+he>=$||G+le>=$)&&!(R&&!R(G+le,ae+he))&&!!this._qr&&this._qr.isDark(G+le,ae+he))),U._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(U._element));if(I.shape===j){const G=this._roundSize((A/Y-$)/2),ae=$+2*G,he=oe-G*Y,le=J-G*Y,te=[],pe=this._roundSize(ae/2);for(let xe=0;xe<ae;xe++){te[xe]=[];for(let be=0;be<ae;be++)xe>=G-1&&xe<=ae-G&&be>=G-1&&be<=ae-G||Math.sqrt((xe-pe)*(xe-pe)+(be-pe)*(be-pe))>pe?te[xe][be]=0:te[xe][be]=this._qr.isDark(be-2*G<0?be:be>=$?be-2*G:be-G,xe-2*G<0?xe:xe>=$?xe-2*G:xe-G)?1:0}for(let xe=0;xe<ae;xe++)for(let be=0;be<ae;be++)te[xe][be]&&(U.draw(he+be*Y,le+xe*Y,Y,((ce,re)=>{var ie;return!!(!((ie=te[xe+re])===null||ie===void 0)&&ie[be+ce])})),U._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(U._element))}}drawCorners(){if(!this._qr)throw"QR code is not defined";const R=this._element,T=this._options;if(!R)throw"Element code is not defined";const M=this._qr.getModuleCount(),I=Math.min(T.width,T.height)-2*T.margin,$=T.shape===j?I/Math.sqrt(2):I,A=this._roundSize($/M),L=7*A,Y=3*A,oe=this._roundSize((T.width-M*A)/2),J=this._roundSize((T.height-M*A)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((([U,G,ae])=>{var he,le,te,pe,xe,be,ce,re,ie,fe,ye,we,Re,Me;const ke=oe+U*A*(M-7),Le=J+G*A*(M-7);let Fe=this._dotsClipPath,Te=this._dotsClipPath;if((!((he=T.cornersSquareOptions)===null||he===void 0)&&he.gradient||!((le=T.cornersSquareOptions)===null||le===void 0)&&le.color)&&(Fe=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),Fe.setAttribute("id",`clip-path-corners-square-color-${U}-${G}-${this._instanceId}`),this._defs.appendChild(Fe),this._cornersSquareClipPath=this._cornersDotClipPath=Te=Fe,this._createColor({options:(te=T.cornersSquareOptions)===null||te===void 0?void 0:te.gradient,color:(pe=T.cornersSquareOptions)===null||pe===void 0?void 0:pe.color,additionalRotation:ae,x:ke,y:Le,height:L,width:L,name:`corners-square-color-${U}-${G}-${this._instanceId}`})),((xe=T.cornersSquareOptions)===null||xe===void 0?void 0:xe.type)&&m.includes(T.cornersSquareOptions.type)){const Be=new y({svg:this._element,type:T.cornersSquareOptions.type,window:this._window});Be.draw(ke,Le,L,ae),Be._element&&Fe&&Fe.appendChild(Be._element)}else{const Be=new d({svg:this._element,type:((be=T.cornersSquareOptions)===null||be===void 0?void 0:be.type)||T.dotsOptions.type,window:this._window});for(let ze=0;ze<B.length;ze++)for(let de=0;de<B[ze].length;de++)!((ce=B[ze])===null||ce===void 0)&&ce[de]&&(Be.draw(ke+de*A,Le+ze*A,A,((ne,se)=>{var me;return!!(!((me=B[ze+se])===null||me===void 0)&&me[de+ne])})),Be._element&&Fe&&Fe.appendChild(Be._element))}if((!((re=T.cornersDotOptions)===null||re===void 0)&&re.gradient||!((ie=T.cornersDotOptions)===null||ie===void 0)&&ie.color)&&(Te=this._window.document.createElementNS("http://www.w3.org/2000/svg","clipPath"),Te.setAttribute("id",`clip-path-corners-dot-color-${U}-${G}-${this._instanceId}`),this._defs.appendChild(Te),this._cornersDotClipPath=Te,this._createColor({options:(fe=T.cornersDotOptions)===null||fe===void 0?void 0:fe.gradient,color:(ye=T.cornersDotOptions)===null||ye===void 0?void 0:ye.color,additionalRotation:ae,x:ke+2*A,y:Le+2*A,height:Y,width:Y,name:`corners-dot-color-${U}-${G}-${this._instanceId}`})),((we=T.cornersDotOptions)===null||we===void 0?void 0:we.type)&&E.includes(T.cornersDotOptions.type)){const Be=new C({svg:this._element,type:T.cornersDotOptions.type,window:this._window});Be.draw(ke+2*A,Le+2*A,Y,ae),Be._element&&Te&&Te.appendChild(Be._element)}else{const Be=new d({svg:this._element,type:((Re=T.cornersDotOptions)===null||Re===void 0?void 0:Re.type)||T.dotsOptions.type,window:this._window});for(let ze=0;ze<D.length;ze++)for(let de=0;de<D[ze].length;de++)!((Me=D[ze])===null||Me===void 0)&&Me[de]&&(Be.draw(ke+de*A,Le+ze*A,A,((ne,se)=>{var me;return!!(!((me=D[ze+se])===null||me===void 0)&&me[de+ne])})),Be._element&&Te&&Te.appendChild(Be._element))}}))}loadImage(){return new Promise(((R,T)=>{var M;const I=this._options;if(!I.image)return T("Image is not defined");if(!((M=I.nodeCanvas)===null||M===void 0)&&M.loadImage)I.nodeCanvas.loadImage(I.image).then(($=>{var A,L;if(this._image=$,this._options.imageOptions.saveAsBlob){const Y=(A=I.nodeCanvas)===null||A===void 0?void 0:A.createCanvas(this._image.width,this._image.height);(L=Y?.getContext("2d"))===null||L===void 0||L.drawImage($,0,0),this._imageUri=Y?.toDataURL()}R()})).catch(T);else{const $=new this._window.Image;typeof I.imageOptions.crossOrigin=="string"&&($.crossOrigin=I.imageOptions.crossOrigin),this._image=$,$.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await(async function(A,L){return new Promise((Y=>{const oe=new L.XMLHttpRequest;oe.onload=function(){const J=new L.FileReader;J.onloadend=function(){Y(J.result)},J.readAsDataURL(oe.response)},oe.open("GET",A),oe.responseType="blob",oe.send()}))})(I.image||"",this._window)),R()},$.src=I.image}}))}async drawImage({width:R,height:T,count:M,dotSize:I}){const $=this._options,A=this._roundSize(($.width-M*I)/2),L=this._roundSize(($.height-M*I)/2),Y=A+this._roundSize($.imageOptions.margin+(M*I-R)/2),oe=L+this._roundSize($.imageOptions.margin+(M*I-T)/2),J=R-2*$.imageOptions.margin,U=T-2*$.imageOptions.margin,G=this._window.document.createElementNS("http://www.w3.org/2000/svg","image");G.setAttribute("href",this._imageUri||""),G.setAttribute("xlink:href",this._imageUri||""),G.setAttribute("x",String(Y)),G.setAttribute("y",String(oe)),G.setAttribute("width",`${J}px`),G.setAttribute("height",`${U}px`),this._element.appendChild(G)}_createColor({options:R,color:T,additionalRotation:M,x:I,y:$,height:A,width:L,name:Y}){const oe=L>A?L:A,J=this._window.document.createElementNS("http://www.w3.org/2000/svg","rect");if(J.setAttribute("x",String(I)),J.setAttribute("y",String($)),J.setAttribute("height",String(A)),J.setAttribute("width",String(L)),J.setAttribute("clip-path",`url('#clip-path-${Y}')`),R){let U;if(R.type==="radial")U=this._window.document.createElementNS("http://www.w3.org/2000/svg","radialGradient"),U.setAttribute("id",Y),U.setAttribute("gradientUnits","userSpaceOnUse"),U.setAttribute("fx",String(I+L/2)),U.setAttribute("fy",String($+A/2)),U.setAttribute("cx",String(I+L/2)),U.setAttribute("cy",String($+A/2)),U.setAttribute("r",String(oe/2));else{const G=((R.rotation||0)+M)%(2*Math.PI),ae=(G+2*Math.PI)%(2*Math.PI);let he=I+L/2,le=$+A/2,te=I+L/2,pe=$+A/2;ae>=0&&ae<=.25*Math.PI||ae>1.75*Math.PI&&ae<=2*Math.PI?(he-=L/2,le-=A/2*Math.tan(G),te+=L/2,pe+=A/2*Math.tan(G)):ae>.25*Math.PI&&ae<=.75*Math.PI?(le-=A/2,he-=L/2/Math.tan(G),pe+=A/2,te+=L/2/Math.tan(G)):ae>.75*Math.PI&&ae<=1.25*Math.PI?(he+=L/2,le+=A/2*Math.tan(G),te-=L/2,pe-=A/2*Math.tan(G)):ae>1.25*Math.PI&&ae<=1.75*Math.PI&&(le+=A/2,he+=L/2/Math.tan(G),pe-=A/2,te-=L/2/Math.tan(G)),U=this._window.document.createElementNS("http://www.w3.org/2000/svg","linearGradient"),U.setAttribute("id",Y),U.setAttribute("gradientUnits","userSpaceOnUse"),U.setAttribute("x1",String(Math.round(he))),U.setAttribute("y1",String(Math.round(le))),U.setAttribute("x2",String(Math.round(te))),U.setAttribute("y2",String(Math.round(pe)))}R.colorStops.forEach((({offset:G,color:ae})=>{const he=this._window.document.createElementNS("http://www.w3.org/2000/svg","stop");he.setAttribute("offset",100*G+"%"),he.setAttribute("stop-color",ae),U.appendChild(he)})),J.setAttribute("fill",`url('#${Y}')`),this._defs.appendChild(U)}else T&&J.setAttribute("fill",T);this._element.appendChild(J)}}F.instanceCount=0;const q=F,V="canvas",ee={};for(let N=0;N<=40;N++)ee[N]=N;const Q={type:V,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:ee[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000",roundSize:!0},backgroundOptions:{round:0,color:"#fff"}};function W(N){const R=Object.assign({},N);if(!R.colorStops||!R.colorStops.length)throw"Field 'colorStops' is required in gradient";return R.rotation?R.rotation=Number(R.rotation):R.rotation=0,R.colorStops=R.colorStops.map((T=>Object.assign(Object.assign({},T),{offset:Number(T.offset)}))),R}function Z(N){const R=Object.assign({},N);return R.width=Number(R.width),R.height=Number(R.height),R.margin=Number(R.margin),R.imageOptions=Object.assign(Object.assign({},R.imageOptions),{hideBackgroundDots:!!R.imageOptions.hideBackgroundDots,imageSize:Number(R.imageOptions.imageSize),margin:Number(R.imageOptions.margin)}),R.margin>Math.min(R.width,R.height)&&(R.margin=Math.min(R.width,R.height)),R.dotsOptions=Object.assign({},R.dotsOptions),R.dotsOptions.gradient&&(R.dotsOptions.gradient=W(R.dotsOptions.gradient)),R.cornersSquareOptions&&(R.cornersSquareOptions=Object.assign({},R.cornersSquareOptions),R.cornersSquareOptions.gradient&&(R.cornersSquareOptions.gradient=W(R.cornersSquareOptions.gradient))),R.cornersDotOptions&&(R.cornersDotOptions=Object.assign({},R.cornersDotOptions),R.cornersDotOptions.gradient&&(R.cornersDotOptions.gradient=W(R.cornersDotOptions.gradient))),R.backgroundOptions&&(R.backgroundOptions=Object.assign({},R.backgroundOptions),R.backgroundOptions.gradient&&(R.backgroundOptions.gradient=W(R.backgroundOptions.gradient))),R}var z=a(873),O=a.n(z);function k(N){if(!N)throw new Error("Extension must be defined");N[0]==="."&&(N=N.substring(1));const R={bmp:"image/bmp",gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",webp:"image/webp",pdf:"application/pdf"}[N.toLowerCase()];if(!R)throw new Error(`Extension "${N}" is not supported`);return R}class v{constructor(R){R?.jsdom?this._window=new R.jsdom("",{resources:"usable"}).window:this._window=window,this._options=R?Z(c(Q,R)):Q,this.update()}static _clearContainer(R){R&&(R.innerHTML="")}_setupSvg(){if(!this._qr)return;const R=new q(this._options,this._window);this._svg=R.getElement(),this._svgDrawingPromise=R.drawQR(this._qr).then((()=>{var T;this._svg&&((T=this._extension)===null||T===void 0||T.call(this,R.getElement(),this._options))}))}_setupCanvas(){var R,T;this._qr&&(!((R=this._options.nodeCanvas)===null||R===void 0)&&R.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement("canvas"),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=(T=this._svgDrawingPromise)===null||T===void 0?void 0:T.then((()=>{var M;if(!this._svg)return;const I=this._svg,$=new this._window.XMLSerializer().serializeToString(I),A=btoa($),L=`data:${k("svg")};base64,${A}`;if(!((M=this._options.nodeCanvas)===null||M===void 0)&&M.loadImage)return this._options.nodeCanvas.loadImage(L).then((Y=>{var oe,J;Y.width=this._options.width,Y.height=this._options.height,(J=(oe=this._nodeCanvas)===null||oe===void 0?void 0:oe.getContext("2d"))===null||J===void 0||J.drawImage(Y,0,0)}));{const Y=new this._window.Image;return new Promise((oe=>{Y.onload=()=>{var J,U;(U=(J=this._domCanvas)===null||J===void 0?void 0:J.getContext("2d"))===null||U===void 0||U.drawImage(Y,0,0),oe()},Y.src=L}))}})))}async _getElement(R="png"){if(!this._qr)throw"QR code is empty";return R.toLowerCase()==="svg"?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(R){v._clearContainer(this._container),this._options=R?Z(c(this._options,R)):this._options,this._options.data&&(this._qr=O()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||(function(T){switch(!0){case/^[0-9]*$/.test(T):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(T):return"Alphanumeric";default:return"Byte"}})(this._options.data)),this._qr.make(),this._options.type===V?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(R){if(R){if(typeof R.appendChild!="function")throw"Container should be a single DOM node";this._options.type===V?this._domCanvas&&R.appendChild(this._domCanvas):this._svg&&R.appendChild(this._svg),this._container=R}}applyExtension(R){if(!R)throw"Extension function should be defined.";this._extension=R,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(R="png"){if(!this._qr)throw"QR code is empty";const T=await this._getElement(R),M=k(R);if(!T)return null;if(R.toLowerCase()==="svg"){const I=`<?xml version="1.0" standalone="no"?>\r
${new this._window.XMLSerializer().serializeToString(T)}`;return typeof Blob>"u"||this._options.jsdom?Buffer.from(I):new Blob([I],{type:M})}return new Promise((I=>{const $=T;if("toBuffer"in $)if(M==="image/png")I($.toBuffer(M));else if(M==="image/jpeg")I($.toBuffer(M));else{if(M!=="application/pdf")throw Error("Unsupported extension");I($.toBuffer(M))}else"toBlob"in $&&$.toBlob(I,M,1)}))}async download(R){if(!this._qr)throw"QR code is empty";if(typeof Blob>"u")throw"Cannot download in Node.js, call getRawData instead.";let T="png",M="qr";typeof R=="string"?(T=R,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof R=="object"&&R!==null&&(R.name&&(M=R.name),R.extension&&(T=R.extension));const I=await this._getElement(T);if(I)if(T.toLowerCase()==="svg"){let $=new XMLSerializer().serializeToString(I);$=`<?xml version="1.0" standalone="no"?>\r
`+$,u(`data:${k(T)};charset=utf-8,${encodeURIComponent($)}`,`${M}.svg`)}else u(I.toDataURL(k(T)),`${M}.${T}`)}}const S=v})(),o.default})()))})(qrCodeStyling$1)),qrCodeStyling$1.exports}var qrCodeStylingExports=requireQrCodeStyling();const QRCodeStyling=getDefaultExportFromCjs$4(qrCodeStylingExports),unicityLogo="/sphere/fix-storage-disconnect-during-init/images/unicity_logo.svg";function getQRSize(){if(typeof window>"u")return 200;const t=window.innerWidth;return t<360?160:t<400?180:200}function QRModal({show:t,address:e,onClose:s}){const r=reactExports.useRef(null),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(getQRSize);return reactExports.useEffect(()=>{const u=()=>c(getQRSize());return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),reactExports.useEffect(()=>{t&&e&&r.current&&(r.current.innerHTML="",new QRCodeStyling({width:l,height:l,data:e,margin:0,qrOptions:{typeNumber:0,mode:"Byte",errorCorrectionLevel:"M"},imageOptions:{hideBackgroundDots:!0,imageSize:.2,margin:3},dotsOptions:{type:"rounded",color:"#ffffff"},backgroundOptions:{color:"#1a1a1a"},cornersSquareOptions:{type:"extra-rounded",color:"#ffffff"},cornersDotOptions:{type:"dot",color:"#ffffff"},image:unicityLogo}).append(r.current))},[t,e,l]),t?jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:s,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},transition:{type:"spring",duration:.5},className:"relative w-full max-w-sm bg-white dark:bg-[#111] border border-neutral-200 dark:border-white/10 rounded-3xl shadow-2xl p-4 sm:p-6 overflow-hidden max-h-[90vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-center mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg sm:text-xl font-bold text-neutral-900 dark:text-white mb-1",children:"Receive ALPHA"}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm text-neutral-500 dark:text-neutral-400",children:"Scan QR code to receive payment"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,type:"spring"},className:"relative bg-neutral-900 p-4 sm:p-6 rounded-2xl shadow-inner mb-4 flex items-center justify-center",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"absolute top-2 left-2 w-5 h-5 sm:w-6 sm:h-6 border-t-[3px] border-l-[3px] sm:border-t-4 sm:border-l-4 border-blue-500 rounded-tl-lg"}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.35},className:"absolute top-2 right-2 w-5 h-5 sm:w-6 sm:h-6 border-t-[3px] border-r-[3px] sm:border-t-4 sm:border-r-4 border-blue-500 rounded-tr-lg"}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"absolute bottom-2 left-2 w-5 h-5 sm:w-6 sm:h-6 border-b-[3px] border-l-[3px] sm:border-b-4 sm:border-l-4 border-blue-500 rounded-bl-lg"}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.45},className:"absolute bottom-2 right-2 w-5 h-5 sm:w-6 sm:h-6 border-b-[3px] border-r-[3px] sm:border-b-4 sm:border-r-4 border-blue-500 rounded-br-lg"}),jsxRuntimeExports.jsx("div",{ref:r,style:{width:l,height:l}})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-xl p-3 sm:p-4 mb-4 border border-neutral-200 dark:border-neutral-700/50 backdrop-blur-sm",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-2 text-center",children:"Your Address"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("a",{href:`https://www.unicity.network/address/${e}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-xs font-mono text-blue-500 dark:text-blue-400 hover:text-blue-400 dark:hover:text-blue-300 break-all text-center transition-colors",children:e}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{navigator.clipboard.writeText(e),o(!0),setTimeout(()=>o(!1),2e3)},className:`p-2 rounded-lg transition-all ${a?"bg-green-600 hover:bg-green-500 shadow-lg shadow-green-500/20":"bg-neutral-200 dark:bg-neutral-700 hover:bg-neutral-300 dark:hover:bg-neutral-600"} text-neutral-800 dark:text-white`,title:a?"Copied!":"Copy address",children:jsxRuntimeExports.jsx(motion.div,{initial:!1,animate:{rotate:a?[0,-10,10,0]:0},transition:{duration:.3},children:a?jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-white"}):jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})})})]})]}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"w-full px-4 py-2.5 sm:py-3 rounded-xl bg-linear-to-br from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white font-semibold shadow-lg shadow-blue-500/20 transition-all text-sm sm:text-base",children:"Close"})]})}):null}function SaveWalletModal({show:t,onConfirm:e,onCancel:s,hasMnemonic:r}){const[a,o]=reactExports.useState("alpha_wallet_backup"),[l,c]=reactExports.useState(""),[u,f]=reactExports.useState(""),[d,p]=reactExports.useState("");if(!t)return null;const m=()=>{if(p(""),l){if(l!==u){p("Passwords do not match!");return}if(l.length<4){p("Password must be at least 4 characters");return}}e(a,l||void 0),o("alpha_wallet_backup"),c(""),f(""),p("")};return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:s,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",duration:.4},className:"relative w-full max-w-md bg-white dark:bg-[#111] border border-neutral-200 dark:border-white/10 rounded-3xl shadow-2xl p-6 overflow-hidden",onClick:y=>y.stopPropagation(),children:[jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"flex flex-col items-center text-center mb-6",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"w-12 h-12 bg-blue-500/10 rounded-full flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(motion.div,{animate:{y:[0,-2,0]},transition:{delay:.3,duration:1.5,repeat:1/0,ease:"easeInOut"},children:jsxRuntimeExports.jsx(Shield,{className:"w-6 h-6 text-blue-500"})})}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white text-xl font-bold mb-2",children:"Backup Wallet"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Export your wallet keys to a JSON file. Keep this safe!"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 p-2 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[jsxRuntimeExports.jsx(FileBraces,{className:"w-4 h-4 text-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-blue-500 font-medium",children:"JSON Format"}),r&&jsxRuntimeExports.jsx("span",{className:"text-[10px] bg-green-500/20 text-green-500 px-1.5 py-0.5 rounded",children:"+mnemonic"})]}),jsxRuntimeExports.jsxs("p",{className:"text-[10px] text-neutral-400 mb-4 text-center",children:["Includes verification address",r?" and recovery phrase":""]}),jsxRuntimeExports.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Filename"}),jsxRuntimeExports.jsx("input",{placeholder:"Filename",value:a,onChange:y=>o(y.target.value),className:"w-full mb-3 px-3 py-2 bg-neutral-100 dark:bg-neutral-800 rounded text-neutral-800 dark:text-neutral-200 placeholder-neutral-400 border border-neutral-200 dark:border-neutral-700 focus:border-blue-500 outline-none transition-colors"}),jsxRuntimeExports.jsx("label",{className:"text-xs text-neutral-500 mb-1 block",children:"Encryption Password (Optional)"}),jsxRuntimeExports.jsx("input",{placeholder:"Password",type:"password",value:l,onChange:y=>c(y.target.value),className:"w-full mb-3 px-3 py-2 bg-neutral-100 dark:bg-neutral-800 rounded text-neutral-800 dark:text-neutral-200 placeholder-neutral-400 border border-neutral-200 dark:border-neutral-700 focus:border-blue-500 outline-none transition-colors"}),jsxRuntimeExports.jsx("input",{placeholder:"Confirm Password",type:"password",value:u,onChange:y=>f(y.target.value),className:"w-full mb-4 px-3 py-2 bg-neutral-100 dark:bg-neutral-800 rounded text-neutral-800 dark:text-neutral-200 placeholder-neutral-400 border border-neutral-200 dark:border-neutral-700 focus:border-blue-500 outline-none transition-colors"}),d&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-500/10 border border-red-900/50 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4 text-red-500 shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-red-400 text-sm",children:d})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"flex-1 py-2 bg-neutral-200 dark:bg-neutral-700 rounded text-neutral-700 dark:text-white hover:bg-neutral-300 dark:hover:bg-neutral-600 transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"flex-1 py-2 bg-linear-to-br from-blue-600 to-blue-700 rounded text-white hover:from-blue-500 hover:to-blue-600 transition-all shadow-lg shadow-blue-500/20",children:"Save"})]})]})})}new elliptic.ec("secp256k1");function SendModal({show:t,selectedAddress:e,onClose:s,onSend:r,vestingBalances:a,onEstimateFee:o,onResolveAddress:l,prefill:c}){const[u,f]=reactExports.useState(""),[d,p]=reactExports.useState(""),[m,y]=reactExports.useState(null),[b,E]=reactExports.useState("all"),[C,j]=reactExports.useState({vested:0n,unvested:0n,all:0n}),[B,D]=reactExports.useState("input"),[F,q]=reactExports.useState(null),[V,ee]=reactExports.useState(!1),Q=reactExports.useRef(!1);reactExports.useEffect(()=>{t?a&&j(a):(f(""),p(""),y(null),E("all"),D("input"),q(null),Q.current=!1)},[t,e,a]),reactExports.useEffect(()=>{!t||!c||Q.current||(Q.current=!0,f(c.to),p(c.amount))},[t,c]);const W=k=>{E(k),p("")},Z=()=>C[b],z=async()=>{if(!u.trim()||!d.trim()){y("Please fill in all fields");return}const k=parseFloat(d);if(isNaN(k)||k<=0){y("Please enter a valid amount");return}y(null),ee(!0);try{const v=Math.round(k*1e8).toString();let S=u,N;if(l)try{const I=await l(u);S=I.address,N=I.nametag}catch(I){y(I instanceof Error?I.message:"Failed to resolve address"),ee(!1);return}let R="10000";if(o)try{R=(await o(S,v)).fee}catch{}const T=(parseInt(R,10)/1e8).toFixed(8),M=(k+parseInt(R,10)/1e8).toFixed(8);q({resolvedAddress:S,nametag:N,amountAlpha:k.toFixed(8),amountSats:v,feeSats:R,feeAlpha:T,totalAlpha:M}),D("confirm")}catch(v){y(v instanceof Error?v.message:"Failed to prepare transaction")}finally{ee(!1)}},O=async()=>{if(F){y(null);try{await r(F.resolvedAddress,d),s({success:!0})}catch(k){y(k instanceof Error?k.message:"Transaction failed")}}};return t?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(),className:"absolute inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm"}),jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"relative w-full max-w-md bg-white dark:bg-[#111] border border-neutral-200 dark:border-white/10 rounded-3xl shadow-2xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-neutral-200 dark:border-white/5 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[B==="confirm"&&jsxRuntimeExports.jsx("button",{onClick:()=>{D("input"),y(null)},className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-full transition-colors",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 text-neutral-500 dark:text-neutral-400"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:B==="confirm"?"Confirm Transaction":"Send ALPHA"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>s(),className:"p-2 hover:bg-neutral-100 dark:hover:bg-white/5 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-neutral-500 dark:text-neutral-400"})})]}),jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:B==="input"?jsxRuntimeExports.jsxs(motion.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},children:[jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-neutral-500 dark:text-neutral-400 block mb-2",children:"Coin Type"}),jsxRuntimeExports.jsx("div",{className:"flex gap-3",children:[{value:"all",label:"All",balance:C.all},{value:"vested",label:"Vested",balance:C.vested},{value:"unvested",label:"Unvested",balance:C.unvested}].map(k=>{const v=b===k.value,S=k.value==="vested"?"border-green-500 bg-green-500/10 text-green-600 dark:text-green-400":k.value==="unvested"?"border-orange-500 bg-orange-500/10 text-orange-600 dark:text-orange-400":"border-blue-500 bg-blue-500/10 text-blue-600 dark:text-blue-400";return jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>W(k.value),className:`flex-1 py-3 px-4 rounded-xl border-2 transition-all ${v?S:"border-neutral-200 dark:border-neutral-700 bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 hover:border-neutral-300 dark:hover:border-neutral-600"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold",children:k.label}),jsxRuntimeExports.jsx("div",{className:"text-xs font-mono mt-1",children:(Number(k.balance)/1e8).toFixed(4)})]},k.value)})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-neutral-500 dark:text-neutral-400 block mb-2",children:"Destination Address"}),jsxRuntimeExports.jsx("input",{autoFocus:!0,value:u,onChange:k=>f(k.target.value),onKeyDown:k=>k.key==="Enter"&&z(),className:"w-full bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-white/10 rounded-xl py-3 px-4 text-neutral-900 dark:text-white focus:border-green-500 outline-none font-mono text-sm",placeholder:"Enter wallet address or @nametag"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[jsxRuntimeExports.jsx("label",{className:"text-neutral-500 dark:text-neutral-400",children:"Amount"}),jsxRuntimeExports.jsxs("span",{className:"text-neutral-500 dark:text-neutral-400",children:["Available:"," ",jsxRuntimeExports.jsxs("span",{className:"text-neutral-900 dark:text-white",children:[(Number(Z())/1e8).toFixed(8)," ALPHA"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"number",step:"any",value:d,onChange:k=>p(k.target.value),onKeyDown:k=>k.key==="Enter"&&z(),className:"w-full bg-neutral-100 dark:bg-neutral-900 border border-neutral-200 dark:border-white/10 rounded-xl py-3 px-4 pr-32 text-neutral-900 dark:text-white text-2xl font-mono focus:border-green-500 outline-none",placeholder:"0.00"}),jsxRuntimeExports.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const k=Number(Z())/1e8;p(String(Math.floor(k*.25*1e8)/1e8))},className:"px-2 py-1 text-xs bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 rounded hover:bg-neutral-300 dark:hover:bg-neutral-700",children:"25%"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const k=Number(Z())/1e8;p(String(Math.floor(k*.5*1e8)/1e8))},className:"px-2 py-1 text-xs bg-neutral-200 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 rounded hover:bg-neutral-300 dark:hover:bg-neutral-700",children:"50%"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const k=Number(Z())/1e8;p(String(k))},className:"px-2 py-1 text-xs bg-green-600 hover:bg-green-500 text-white rounded",children:"MAX"})]})]}),m&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2",children:m})]}),jsxRuntimeExports.jsx("button",{onClick:z,disabled:!u||!d||V,className:"w-full py-3 bg-linear-to-br from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-medium rounded-xl flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-xl shadow-green-500/20",children:V?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Preparing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Review Transaction",jsxRuntimeExports.jsx(ArrowRight,{size:18})]})})]},"input"):jsxRuntimeExports.jsx(motion.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},exit:{x:20,opacity:0},children:F&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 rounded-xl p-4 space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Recipient"})}),F.nametag&&jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:["@",F.nametag]}),jsxRuntimeExports.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300 break-all",children:F.resolvedAddress})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 rounded-xl p-4 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Amount"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-mono text-neutral-900 dark:text-white",children:[F.amountAlpha," ALPHA"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Network Fee"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-mono text-neutral-900 dark:text-white",children:[F.feeAlpha," ALPHA"]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-3 flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-neutral-900 dark:text-white",children:"Total"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-mono font-semibold text-neutral-900 dark:text-white",children:[F.totalAlpha," ALPHA"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 rounded-xl p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"From"})}),jsxRuntimeExports.jsx("div",{className:"text-xs font-mono text-neutral-700 dark:text-neutral-300 mt-1 break-all",children:e})]}),m&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm",children:m}),jsxRuntimeExports.jsxs("button",{onClick:O,className:"w-full py-3 bg-linear-to-br from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-medium rounded-xl flex items-center justify-center gap-2 transition-colors shadow-xl shadow-green-500/20",children:["Confirm & Send",jsxRuntimeExports.jsx(ArrowRight,{size:18})]})]})},"confirm")})})]})]}):null}function BalanceDisplay({totalValue:t,showBalances:e,onToggle:s,isLoading:r}){const a=useMotionValue(0),o=useTransform(a,l=>`$${l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`);return reactExports.useEffect(()=>{if(Math.abs(a.get()-t)>.001)return animate(a,t,{duration:.5,ease:"easeOut"}).stop},[t,a]),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl text-neutral-900 dark:text-white font-bold tracking-tight",children:r?jsxRuntimeExports.jsx("span",{className:"inline-flex items-center gap-2",children:jsxRuntimeExports.jsx("span",{className:"inline-block w-32 h-9 bg-neutral-200 dark:bg-neutral-700 rounded-lg animate-pulse"})}):e?jsxRuntimeExports.jsx(motion.span,{children:o}):""}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:s,className:"p-1.5 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded-lg transition-colors text-neutral-400 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-white",title:e?"Hide balances":"Show balances",children:e?jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"})})]})}function WalletStatusLine({isLoadingAssets:t,isLoadingL1:e,pendingCount:s}){const r=[];if(t&&r.push({label:"Loading assets",spinning:!0}),e&&r.push({label:"Loading L1 balance",spinning:!0}),s>0&&r.push({label:`${s} pending transfer${s>1?"s":""}`}),r.length===0)return null;const a=r[0];return jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:4},className:"flex items-center justify-center gap-1.5 text-xs text-neutral-400 dark:text-neutral-500",children:[a.spinning?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3 h-3 animate-spin"}):jsxRuntimeExports.jsx(Wifi,{className:"w-3 h-3"}),jsxRuntimeExports.jsxs("span",{children:[a.label,"..."]})]},a.label)})}function L3WalletView({showBalances:t,setShowBalances:e,isHistoryOpen:s,setIsHistoryOpen:r,isRequestsOpen:a,setIsRequestsOpen:o,isSettingsOpen:l,setIsSettingsOpen:c,setIsL1WalletOpen:u,paymentRequests:f,paymentRequestsPendingCount:d,paymentRequestsReject:p,paymentRequestsPaid:m,paymentRequestsClearProcessed:y}){const b=useNavigate(),{identity:E,isLoading:C}=useIdentity(),{assets:j,isLoading:B}=useAssets(),{tokens:D,pendingTokens:F}=useTokens(),{balance:q,isLoading:V}=useL1Balance(),{sphere:ee,deleteWallet:Q}=useSphereContext(),W=j,Z=D,z=reactExports.useMemo(()=>Z.filter(Be=>Be.coinId!=="NAMETAG"),[Z]),O=reactExports.useMemo(()=>q?.total?Number(q.total)/1e8:0,[q]),[k,v]=reactExports.useState("assets"),[S,N]=reactExports.useState(!1),[R,T]=reactExports.useState(!1),[M,I]=reactExports.useState(!1),[$,A]=reactExports.useState([]),[L,Y]=reactExports.useState(!1),oe=reactExports.useRef(new Set),J=reactExports.useRef(new Set),U=reactExports.useRef(!0),G=reactExports.useMemo(()=>{if(U.current)return new Set;const Be=new Set;return Z.filter(ze=>ze.coinId!=="NAMETAG").forEach(ze=>{oe.current.has(ze.id)||Be.add(ze.id)}),Be},[Z]),ae=reactExports.useMemo(()=>{if(U.current)return new Set;const Be=new Set;return O>0&&!J.current.has("l1-alpha")&&Be.add("l1-alpha"),W.forEach(ze=>{J.current.has(ze.coinId)||Be.add(ze.coinId)}),Be},[W,O]);reactExports.useEffect(()=>{const Be=new Set(Z.filter(ze=>ze.coinId!=="NAMETAG").map(ze=>ze.id));oe.current=Be,U.current=!1},[Z]),reactExports.useEffect(()=>{const Be=new Set(W.map(ze=>ze.coinId));O>0&&Be.add("l1-alpha"),J.current=Be},[W,O]);const[he,le]=reactExports.useState(!1),[te,pe]=reactExports.useState(!1),[xe,be]=reactExports.useState(!1),ce=reactExports.useCallback(()=>{e(!t)},[t,e]),re=reactExports.useMemo(()=>{const ze=BigInt(Math.round(O*1e8)).toString(),de=O*1;return{coinId:"l1-alpha",symbol:"ALPHA",name:"Unicity Alphanet",totalAmount:ze,decimals:8,tokenCount:1,confirmedAmount:ze,unconfirmedAmount:"0",confirmedTokenCount:1,unconfirmedTokenCount:0,iconUrl:void 0,priceUsd:1,priceEur:.92,change24h:0,fiatValueUsd:de,fiatValueEur:de*.92}},[O]),ie=reactExports.useMemo(()=>{const Be=j.reduce((de,ne)=>de+(ne.fiatValueUsd??0),0),ze=re.fiatValueUsd??0;return Be+ze},[j,re]),fe=()=>{if(!ee)return;const Be=ee.getMnemonic();Be?(A(Be.split(" ")),I(!0)):alert(`Recovery phrase not available.

This wallet was imported from a file that doesn't contain a mnemonic phrase. Only the master key was imported.`)},ye=reactExports.useMemo(()=>ee?.getMnemonic()!==null,[ee]),we=()=>{be(!0)},Re=async(Be,ze)=>{if(ee)try{const de=await ee.exportToJSON({password:ze,includeMnemonic:!0}),ne=new Blob([JSON.stringify(de,null,2)],{type:"application/json"}),se=URL.createObjectURL(ne),me=document.createElement("a");me.href=se,me.download=Be.endsWith(".json")?Be:`${Be}.json`,me.click(),URL.revokeObjectURL(se),be(!1)}catch(de){console.error("Failed to save wallet:",de)}},[Me,ke]=reactExports.useState(!1),Le=async()=>{try{ke(!0),await Q(),b("/",{replace:!0})}catch(Be){console.error("Failed to logout:",Be),ke(!1)}},Fe=()=>{pe(!1),le(!0)},Te=Be=>Be.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4});return C?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-3",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin text-neutral-400 dark:text-neutral-600"}),jsxRuntimeExports.jsx(WalletStatusLine,{isLoadingAssets:B,isLoadingL1:V,pendingCount:0})]}):E?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full relative",children:[jsxRuntimeExports.jsxs("div",{className:"px-6 mb-6 shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center mb-6 pt-2",children:[jsxRuntimeExports.jsx(BalanceDisplay,{totalValue:ie,showBalances:t,onToggle:ce,isLoading:B&&ie===0}),jsxRuntimeExports.jsx(WalletStatusLine,{isLoadingAssets:B,isLoadingL1:V,pendingCount:F.length})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:[jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>Y(!0),className:"relative px-2 py-2.5 sm:px-3 sm:py-3 rounded-xl bg-linear-to-br from-orange-500 to-orange-600 text-white text-xs sm:text-sm shadow-xl shadow-orange-500/20 flex items-center justify-center gap-1.5 sm:gap-2 overflow-hidden whitespace-nowrap",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),jsxRuntimeExports.jsx("span",{children:"Top Up"})]}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},onClick:()=>T(!0),className:"relative px-2 py-2.5 sm:px-3 sm:py-3 rounded-xl bg-neutral-100 dark:bg-neutral-800/80 hover:bg-neutral-200 dark:hover:bg-neutral-700/80 text-neutral-900 dark:text-white text-xs sm:text-sm border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-1.5 sm:gap-2 whitespace-nowrap",children:[jsxRuntimeExports.jsx(ArrowDownUp,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),jsxRuntimeExports.jsx("span",{children:"Swap"})]}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:z.length>0?1.02:1,y:z.length>0?-2:0},whileTap:{scale:z.length>0?.98:1},onClick:()=>N(!0),disabled:z.length===0,className:"relative px-2 py-2.5 sm:px-3 sm:py-3 rounded-xl bg-neutral-100 dark:bg-neutral-800/80 hover:bg-neutral-200 dark:hover:bg-neutral-700/80 text-neutral-900 dark:text-white text-xs sm:text-sm border border-neutral-200 dark:border-neutral-700/50 flex items-center justify-center gap-1.5 sm:gap-2 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[jsxRuntimeExports.jsx(ArrowUpRight,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),jsxRuntimeExports.jsx("span",{children:"Send"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"px-6 mb-4 shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"flex p-1 bg-neutral-100 dark:bg-neutral-900/50 rounded-xl border border-neutral-200 dark:border-neutral-800",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>v("assets"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-xs font-medium rounded-lg transition-all relative ${k==="assets"?"text-neutral-900 dark:text-white":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:[k==="assets"&&jsxRuntimeExports.jsx(motion.div,{layoutId:"activeTab",className:"absolute inset-0 bg-white dark:bg-neutral-800 rounded-lg shadow-sm",transition:{type:"spring",bounce:.2,duration:.6}}),jsxRuntimeExports.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Layers,{className:"w-3 h-3"})," Assets"]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>v("tokens"),className:`flex-1 flex items-center justify-center gap-2 py-2 text-xs font-medium rounded-lg transition-all relative ${k==="tokens"?"text-neutral-900 dark:text-white":"text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-400"}`,children:[k==="tokens"&&jsxRuntimeExports.jsx(motion.div,{layoutId:"activeTab",className:"absolute inset-0 bg-white dark:bg-neutral-800 rounded-lg shadow-sm",transition:{type:"spring",bounce:.2,duration:.6}}),jsxRuntimeExports.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Coins,{className:"w-3 h-3"})," Tokens"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"p-6 pt-0 flex-1 overflow-y-auto custom-scrollbar",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 text-orange-500"}),jsxRuntimeExports.jsx("h4",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Network Assets"})]})}),jsxRuntimeExports.jsx("div",{className:"relative min-h-50",children:B?jsxRuntimeExports.jsx("div",{className:"py-10 text-center",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 text-orange-500 animate-spin mx-auto"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[k==="assets"&&jsxRuntimeExports.jsx("div",{className:"space-y-2",children:W.length===0&&O===0?jsxRuntimeExports.jsx(EmptyState,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[O>0&&jsxRuntimeExports.jsx(AssetRow,{asset:re,showBalances:t,delay:(ae.has("l1-alpha"),0),layer:"L1",isNew:ae.has("l1-alpha"),onClick:()=>u(!0)},"l1-alpha"),W.map((Be,ze)=>jsxRuntimeExports.jsx(AssetRow,{asset:Be,showBalances:t,delay:ae.has(Be.coinId)?(ze+1)*.05:0,layer:"L3",isNew:ae.has(Be.coinId)},Be.coinId))]})}),k==="tokens"&&jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Z.filter(Be=>Be.coinId!=="NAMETAG").length===0?jsxRuntimeExports.jsx(EmptyState,{text:"No individual tokens found."}):Z.filter(Be=>Be.coinId!=="NAMETAG").sort((Be,ze)=>ze.createdAt-Be.createdAt).map((Be,ze)=>jsxRuntimeExports.jsx(TokenRow,{token:Be,delay:G.has(Be.id)?ze*.05:0,isNew:G.has(Be.id)},Be.id))})]})})]}),jsxRuntimeExports.jsx(TopUpModal,{isOpen:L,onClose:()=>Y(!1)}),jsxRuntimeExports.jsx(SendModal$1,{isOpen:S,onClose:()=>N(!1)}),jsxRuntimeExports.jsx(SwapModal,{isOpen:R,onClose:()=>T(!1)}),jsxRuntimeExports.jsx(PaymentRequestsModal,{isOpen:a,onClose:()=>o(!1),requests:f,pendingCount:d,reject:p,paid:m,clearProcessed:y}),jsxRuntimeExports.jsx(SeedPhraseModal,{isOpen:M,onClose:()=>I(!1),seedPhrase:$}),jsxRuntimeExports.jsx(TransactionHistoryModal,{isOpen:s,onClose:()=>r(!1)}),jsxRuntimeExports.jsx(SettingsModal,{isOpen:l,onClose:()=>c(!1),onOpenL1Wallet:()=>u(!0),onBackupWallet:()=>le(!0),onLogout:()=>pe(!0),l1Balance:Te(O)}),jsxRuntimeExports.jsx(BackupWalletModal,{isOpen:he,onClose:()=>le(!1),onExportWalletFile:we,onShowRecoveryPhrase:fe}),jsxRuntimeExports.jsx(LogoutConfirmModal,{isOpen:te,onClose:()=>pe(!1),onBackupAndLogout:Fe,onLogoutWithoutBackup:Le,isLoggingOut:Me}),jsxRuntimeExports.jsx(SaveWalletModal,{show:xe,onConfirm:Re,onCancel:()=>be(!1),hasMnemonic:ye})]}):jsxRuntimeExports.jsx(CreateWalletFlow,{})}function EmptyState({text:t}){return jsxRuntimeExports.jsxs("div",{className:"text-center py-10 flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-neutral-100 dark:bg-neutral-800 flex items-center justify-center",children:jsxRuntimeExports.jsx(Sparkles,{className:"w-6 h-6 text-neutral-400 dark:text-neutral-600"})}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 text-sm",children:t||jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Wallet is empty.",jsxRuntimeExports.jsx("br",{}),"Mint some tokens to start!"]})})]})}function VestingDisplay({showBalances:t=!0,balances:e,isClassifying:s=!1}){const r=l=>(Number(l)/1e8).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:8}),a=e?.vested??0n,o=e?.unvested??0n;return jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 rounded-xl bg-green-500/10 border border-green-500/20 p-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium block mb-1",children:["Vested",s&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3 h-3 animate-spin inline ml-1"})]}),t?jsxRuntimeExports.jsx("span",{className:"text-sm font-mono text-green-600 dark:text-green-400",children:r(a)}):jsxRuntimeExports.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:""})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 rounded-xl bg-orange-500/10 border border-orange-500/20 p-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium block mb-1",children:["Unvested",s&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3 h-3 animate-spin inline ml-1"})]}),t?jsxRuntimeExports.jsx("span",{className:"text-sm font-mono text-orange-600 dark:text-orange-400",children:r(o)}):jsxRuntimeExports.jsx("span",{className:"text-sm text-orange-600 dark:text-orange-400",children:""})]})]})}const iconMap={success:CircleCheckBig,error:CircleX,warning:TriangleAlert,info:Info},colorMap={success:{bg:"bg-emerald-500/10",text:"text-emerald-500",border:"border-emerald-900/50",button:"bg-emerald-600 hover:bg-emerald-500"},error:{bg:"bg-red-500/10",text:"text-red-500",border:"border-red-900/50",button:"bg-red-600 hover:bg-red-500"},warning:{bg:"bg-amber-500/10",text:"text-amber-500",border:"border-amber-900/50",button:"bg-amber-600 hover:bg-amber-500"},info:{bg:"bg-blue-500/10",text:"text-blue-500",border:"border-blue-900/50",button:"bg-blue-600 hover:bg-blue-500"}};function TxidItem({txid:t}){const[e,s]=reactExports.useState(!1),r=async()=>{await navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),2e3)},a=`https://www.unicity.network/tx/${t}`;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-2 bg-neutral-100 dark:bg-neutral-800/50 rounded-lg",children:[jsxRuntimeExports.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-xs text-blue-500 dark:text-blue-400 hover:text-blue-400 dark:hover:text-blue-300 font-mono truncate",title:t,children:[t.slice(0,12),"...",t.slice(-12)]}),jsxRuntimeExports.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-neutral-500 dark:text-neutral-400 hover:text-blue-500 dark:hover:text-blue-400 transition-colors",title:"Open in explorer",children:jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:r,className:"p-1.5 text-neutral-500 dark:text-neutral-400 hover:text-emerald-500 dark:hover:text-emerald-400 transition-colors",title:"Copy TXID",children:e?jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-emerald-500 dark:text-emerald-400"}):jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})})]})}function MessageModal({show:t,type:e,title:s,message:r,txids:a,onClose:o}){if(!t)return null;const l=iconMap[e],c=colorMap[e];return jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:o,children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",duration:.4},className:"relative w-full max-w-md bg-white dark:bg-[#111] border border-neutral-200 dark:border-white/10 rounded-3xl shadow-2xl p-6 overflow-hidden",onClick:u=>u.stopPropagation(),children:[jsxRuntimeExports.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"flex flex-col items-center text-center mb-6",children:[jsxRuntimeExports.jsx(motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:`w-12 h-12 ${c.bg} rounded-full flex items-center justify-center mb-4`,children:jsxRuntimeExports.jsx(motion.div,{initial:{scale:.8},animate:{scale:1},transition:{delay:.3},children:jsxRuntimeExports.jsx(l,{className:`w-6 h-6 ${c.text}`})})}),jsxRuntimeExports.jsx("h3",{className:"text-neutral-900 dark:text-white text-xl font-bold mb-2",children:s}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm whitespace-pre-wrap",children:r})]}),a&&a.length>0&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"mb-4 space-y-2",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-neutral-500 mb-2",children:["Transaction ID",a.length>1?"s":"",":"]}),a.map(u=>jsxRuntimeExports.jsx(TxidItem,{txid:u},u))]}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,className:`w-full py-3 ${c.button} rounded-xl text-white font-medium transition-colors`,children:"OK"})})]})})}function L1WalletModal({isOpen:t,onClose:e,showBalances:s}){const[r,a]=reactExports.useState("main"),[o,l]=reactExports.useState(!1),[c,u]=reactExports.useState(!1),[f,d]=reactExports.useState(!1),[p,m]=reactExports.useState(!1),[y,b]=reactExports.useState(!1),[E,C]=reactExports.useState([]),[j,B]=reactExports.useState({show:!1,type:"info",title:"",message:""}),{sphere:D}=useSphereContext(),{l1Address:F,nametag:q}=useIdentity(),{balance:V,isLoading:ee}=useL1Balance(),{send:Q,estimateFee:W,resolveAddress:Z}=useL1Send(),{transactions:z,isLoading:O}=useL1Transactions(),k=useQueryClient(),v=F??"",S=D?.getCurrentAddressIndex()??0,N=V?Number(V.total)/1e8:0,R=N,T=V?{vested:BigInt(V.vested),unvested:BigInt(V.unvested),all:BigInt(V.total)}:{vested:0n,unvested:0n,all:0n};reactExports.useEffect(()=>{if(D)try{const J=D.getActiveAddresses();C(J.map(U=>({index:U.index,l1Address:U.l1Address,nametag:U.nametag})))}catch(J){console.error("[L1WalletModal] Failed to load addresses:",J)}},[D,S]),reactExports.useEffect(()=>{t&&a("main")},[t]);const M=reactExports.useCallback((J,U,G,ae)=>{B({show:!0,type:J,title:U,message:G,txids:ae})},[]),I=reactExports.useCallback(()=>{B(J=>({...J,show:!1}))},[]),$=reactExports.useCallback(async J=>{if(!D||y||J===S){l(!1);return}l(!1),b(!0);try{await D.switchToAddress(J),k.removeQueries({queryKey:SPHERE_KEYS.identity.all}),k.removeQueries({queryKey:SPHERE_KEYS.l1.all}),k.removeQueries({queryKey:SPHERE_KEYS.payments.all}),k.invalidateQueries({queryKey:SPHERE_KEYS.identity.all}),k.invalidateQueries({queryKey:SPHERE_KEYS.l1.all}),k.invalidateQueries({queryKey:SPHERE_KEYS.payments.all}),window.dispatchEvent(new Event("wallet-updated"))}catch(U){console.error("[L1WalletModal] Failed to switch address:",U)}finally{b(!1)}},[D,y,S,k]),A=reactExports.useCallback(async()=>{if(D){l(!1);try{const U=E.reduce((ae,he)=>Math.max(ae,he.index),-1)+1;await D.trackScannedAddresses([{index:U,hidden:!1}]);const G=D.getActiveAddresses();C(G.map(ae=>({index:ae.index,l1Address:ae.l1Address,nametag:ae.nametag})))}catch(J){console.error("[L1WalletModal] Failed to derive new address:",J)}}},[D,E]),L=reactExports.useCallback(async(J,U)=>{const G=Number(U);if(isNaN(G)||G<=0){M("error","Invalid Amount","Please enter a valid amount");return}try{const ae=Math.round(G*1e8).toString(),he=await Q({toAddress:J,amount:ae});m(!1),M("success","Transaction Sent","Transaction sent successfully!",he.txHash?[he.txHash]:void 0)}catch(ae){M("error","Transaction Failed","Transaction failed: "+(ae instanceof Error?ae.message:String(ae)))}},[Q,M]),Y=J=>J.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:8}),oe=reactExports.useMemo(()=>[...E].sort((J,U)=>J.index-U.index),[E]);return jsxRuntimeExports.jsxs(BaseModal,{isOpen:t,onClose:e,size:"lg",showOrbs:!1,className:"max-h-[92%]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-800 shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[r==="history"&&jsxRuntimeExports.jsx("button",{onClick:()=>a("main"),className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-neutral-600 dark:text-neutral-400"})}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-xl bg-linear-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-sm",children:"L1"})}),jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:r==="history"?"Transaction History":"L1 Wallet"})]}),jsxRuntimeExports.jsx("button",{onClick:e,className:"p-2 rounded-xl hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-neutral-500"})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto",children:D?ee&&!V?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 animate-spin text-blue-500"})}):r==="history"?jsxRuntimeExports.jsx("div",{className:"p-4 space-y-2",children:O?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-12",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 animate-spin text-neutral-400"})}):z.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-neutral-500",children:"No transactions found"}):z.map(J=>{const U=J.type==="incoming";return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-100 dark:bg-neutral-800/50 rounded-xl",children:[jsxRuntimeExports.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${U?"bg-green-500/20":"bg-red-500/20"}`,children:U?jsxRuntimeExports.jsx(ArrowDownLeft,{className:"w-4 h-4 text-green-500"}):jsxRuntimeExports.jsx(ArrowUpRight,{className:"w-4 h-4 text-red-500"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:U?"Received":"Sent"}),jsxRuntimeExports.jsxs("span",{className:`text-sm font-medium ${U?"text-green-500":"text-red-500"}`,children:[U?"+":"-",(Number(J.amount)/1e8).toFixed(8)," ALPHA"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-0.5",children:[jsxRuntimeExports.jsxs("a",{href:`https://www.unicity.network/tx/${J.txid}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-mono text-blue-500 dark:text-blue-400 hover:text-blue-300 truncate mr-2",children:[J.txid.slice(0,12),"...",J.txid.slice(-6)]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-400 shrink-0",children:J.confirmations>0?`${J.confirmations} conf`:"unconfirmed"})]})]})]},J.txid)})}):jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mb-1",children:"Total Balance"}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-neutral-900 dark:text-white",children:s?`${Y(R)} ALPHA`:""})]}),jsxRuntimeExports.jsx(VestingDisplay,{showBalances:s,balances:T,isClassifying:!1}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-800/50 rounded-xl p-3",children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-2 flex items-center gap-1.5",children:[y&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3 h-3 animate-spin"}),y?"Switching...":"Active Address"]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>l(J=>!J),className:"w-full flex items-center justify-between gap-2 p-2 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700/50 transition-colors",children:[jsxRuntimeExports.jsxs("span",{className:"flex flex-col text-xs",children:[q&&jsxRuntimeExports.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["@",q]}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-neutral-700 dark:text-neutral-300 truncate",children:[v.slice(0,16),"...",v.slice(-8)]})]}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 text-neutral-500 transition-transform shrink-0 ${o?"rotate-180":""}`})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:o&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-10",onClick:()=>l(!1)}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute z-20 mt-2 w-full bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-xl shadow-xl max-h-40 overflow-y-auto",children:[oe.map(J=>{const U=J.index===S;return jsxRuntimeExports.jsxs("button",{onClick:()=>$(J.index),disabled:y,className:`w-full flex items-center gap-2 px-3 py-2.5 text-xs hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors disabled:opacity-50 ${U?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 rounded-full shrink-0 ${U?"bg-blue-500":"bg-transparent"}`}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[J.nametag&&jsxRuntimeExports.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium block",children:["@",J.nametag]}),jsxRuntimeExports.jsxs("span",{className:"font-mono text-neutral-700 dark:text-neutral-300 truncate block",children:[J.l1Address.slice(0,12),"...",J.l1Address.slice(-6)]})]})]},J.l1Address)}),jsxRuntimeExports.jsxs("button",{onClick:A,className:"w-full flex items-center gap-2 px-3 py-2.5 text-xs hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors border-t border-neutral-200 dark:border-neutral-700",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3 h-3 text-orange-500"}),jsxRuntimeExports.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"New Address"})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:s?`${Y(N)} ALPHA`:""}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsx("button",{onClick:()=>{navigator.clipboard.writeText(v),u(!0),setTimeout(()=>u(!1),2e3)},className:`p-1.5 rounded-lg transition-colors ${c?"bg-green-500 text-white":"hover:bg-neutral-200 dark:hover:bg-neutral-700 text-neutral-500"}`,children:c?jsxRuntimeExports.jsx(Check,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("a",{href:`https://www.unicity.network/address/${v}`,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 rounded-lg hover:bg-neutral-200 dark:hover:bg-neutral-700 text-neutral-500 transition-colors",children:jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(MenuButton,{icon:QrCode,color:"blue",label:"Receive (Show QR)",showChevron:!1,onClick:()=>d(!0)}),jsxRuntimeExports.jsx(MenuButton,{icon:Send,color:"green",label:"Send ALPHA",showChevron:!1,onClick:()=>m(!0)}),jsxRuntimeExports.jsx(MenuButton,{icon:History,color:"purple",label:"Transaction History",showChevron:!1,onClick:()=>a("history")})]})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 animate-spin text-blue-500"})})}),jsxRuntimeExports.jsx(QRModal,{show:f,address:v,onClose:()=>d(!1)}),jsxRuntimeExports.jsx(SendModal,{show:p,selectedAddress:v,onClose:()=>m(!1),onSend:L,vestingBalances:T,onEstimateFee:W,onResolveAddress:Z}),jsxRuntimeExports.jsx(MessageModal,{show:j.show,type:j.type,title:j.title,message:j.message,txids:j.txids,onClose:I})]})}function RegisterNametagModal({isOpen:t,onClose:e}){const[s,r]=reactExports.useState(""),[a,o]=reactExports.useState(null),[l,c]=reactExports.useState(!1),[u,f]=reactExports.useState(!1),[d,p]=reactExports.useState("idle"),{sphere:m,resolveNametag:y}=useSphereContext(),b=useQueryClient();reactExports.useEffect(()=>{const D=s.trim().replace(/^@/,"");if(!D||D.length<2){p("idle");return}p("checking");const F=setTimeout(async()=>{try{const q=await y(D);p(q?"taken":"available")}catch{p("idle")}},500);return()=>clearTimeout(F)},[s,y]),reactExports.useEffect(()=>{t||(r(""),o(null),p("idle"),f(!1))},[t]);const E=D=>{const F=D.target.value.toLowerCase();/^[a-z0-9_\-+.]*$/.test(F)&&(r(F),o(null))},C=s.trim().length>=2&&!l&&d!=="taken"&&d!=="checking",j=reactExports.useCallback(async()=>{if(!(!s.trim()||!m||l)){c(!0),o(null);try{const D=s.trim().replace("@","");if(await y(D)){o(`@${D} is already taken`),p("taken"),c(!1);return}await m.registerNametag(D),b.invalidateQueries({queryKey:SPHERE_KEYS.identity.all}),b.invalidateQueries({queryKey:SPHERE_KEYS.payments.all}),window.dispatchEvent(new Event("wallet-updated")),f(!0),setTimeout(()=>{e(),f(!1),r("")},1500)}catch(D){o(D instanceof Error?D.message:"Registration failed")}finally{c(!1)}}},[s,m,l,y,b,e]),B=D=>{D.key==="Enter"&&C&&j()};return jsxRuntimeExports.jsx(AnimatePresence,{children:t&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm",onClick:e}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-sm bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden",onClick:D=>D.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-200 dark:border-neutral-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Tag,{className:"w-5 h-5 text-orange-500"}),jsxRuntimeExports.jsx("span",{className:"text-base font-semibold text-neutral-900 dark:text-white",children:"Register Unicity ID"})]}),jsxRuntimeExports.jsx("button",{onClick:e,className:"p-1.5 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4 text-neutral-500"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Choose a unique ID to receive tokens easily without sharing long addresses."}),u?jsxRuntimeExports.jsx("div",{className:"text-center py-4",children:jsxRuntimeExports.jsx("p",{className:"text-emerald-500 font-medium",children:"Registered successfully!"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1.5 z-10",children:[d==="checking"&&jsxRuntimeExports.jsx(LoaderCircle,{className:"w-3.5 h-3.5 text-neutral-400 animate-spin"}),d==="available"&&jsxRuntimeExports.jsx(CircleCheck,{className:"w-3.5 h-3.5 text-emerald-500"}),d==="taken"&&jsxRuntimeExports.jsx(CircleAlert,{className:"w-3.5 h-3.5 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-neutral-400 dark:text-neutral-500 group-focus-within:text-orange-500 dark:group-focus-within:text-orange-400 transition-colors text-sm font-medium",children:"@unicity"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:s,onChange:E,onKeyDown:B,placeholder:"id",autoFocus:!0,className:`w-full bg-neutral-100 dark:bg-neutral-800/50 border-2 rounded-xl py-3 pl-4 pr-28 text-sm text-neutral-900 dark:text-white placeholder-neutral-400 dark:placeholder-neutral-600 focus:outline-none focus:bg-white dark:focus:bg-neutral-800 transition-all ${d==="taken"?"border-red-400 dark:border-red-500/50 focus:border-red-500":d==="available"?"border-emerald-400 dark:border-emerald-500/50 focus:border-emerald-500":"border-neutral-200 dark:border-neutral-700/50 focus:border-orange-500"}`})]}),jsxRuntimeExports.jsxs("div",{className:"h-4 -mt-2",children:[d==="taken"&&!a&&jsxRuntimeExports.jsxs("p",{className:"text-red-500 dark:text-red-400 text-xs",children:["@",s," is already taken"]}),d==="available"&&jsxRuntimeExports.jsxs("p",{className:"text-emerald-500 dark:text-emerald-400 text-xs",children:["@",s," is available"]})]}),jsxRuntimeExports.jsx("button",{onClick:j,disabled:!C,className:"w-full py-3 px-4 rounded-xl bg-linear-to-r from-orange-500 to-orange-600 text-white text-sm font-bold shadow-lg shadow-orange-500/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:from-orange-400 hover:to-orange-500 transition-all",children:l?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Registering..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Register",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4"})]})}),a&&jsxRuntimeExports.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs bg-red-500/10 border border-red-500/20 p-2 rounded-lg",children:a})]})]})]})})]})})}const PANEL_SHELL="bg-white/60 dark:bg-neutral-900/90 backdrop-blur-xl rounded-3xl border border-neutral-200 dark:border-neutral-800/50 overflow-hidden h-full relative lg:shadow-xl dark:lg:shadow-2xl flex flex-col transition-all duration-500 theme-transition";function WalletPanel(){const[t,e]=reactExports.useState(!0),[s,r]=reactExports.useState(!1),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState(!1),[u,f]=reactExports.useState(!1),[d,p]=reactExports.useState(!1),{isLoading:m,walletExists:y,error:b}=useWalletStatus(),{identity:E,nametag:C,isLoading:j}=useIdentity(),{pendingCount:B,requests:D,reject:F,paid:q,clearProcessed:V}=useIncomingPaymentRequests(),{setFullscreen:ee}=useUIState(),Q=reactExports.useRef(null),W=reactExports.useRef(!1);return reactExports.useEffect(()=>{if(!W.current){(D.length>0||B===0)&&(Q.current=B,W.current=!0);return}Q.current!==null&&B>Q.current&&(ee(!1),o(!0)),Q.current=B},[B,D.length,ee]),b?jsxRuntimeExports.jsx("div",{className:PANEL_SHELL,children:jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4 p-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-500/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(RefreshCw,{className:"w-6 h-6 text-red-500"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-white",children:"Initialization error"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Please reload the page"})]}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.location.reload(),className:"px-5 py-2 bg-linear-to-r from-orange-500 to-orange-600 text-white text-sm font-medium rounded-xl shadow-lg shadow-orange-500/25",children:"Reload"})]})}):m?jsxRuntimeExports.jsx("div",{className:PANEL_SHELL,children:jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 text-orange-500 animate-spin"})})}):y?j||!E?jsxRuntimeExports.jsx("div",{className:PANEL_SHELL,children:jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 text-orange-500 animate-spin"})})}):jsxRuntimeExports.jsxs("div",{className:PANEL_SHELL,children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-20 -right-20 w-80 h-80 rounded-full blur-3xl bg-orange-500/5 dark:bg-orange-500/10"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-20 -left-20 w-80 h-80 rounded-full blur-3xl bg-purple-500/5 dark:bg-purple-500/10"}),jsxRuntimeExports.jsx("div",{className:"p-3 sm:p-4 lg:p-6 pb-2 relative shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.05},className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-lg sm:rounded-xl blur-lg opacity-50 bg-orange-500"}),jsxRuntimeExports.jsx("div",{className:"relative w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-linear-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-xl",children:jsxRuntimeExports.jsx(Wallet,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm sm:text-base text-neutral-900 dark:text-white font-medium tracking-wide",children:"Wallet"}),!C&&jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"flex items-center gap-1 px-2 py-0.5 text-[10px] sm:text-xs bg-orange-500/10 hover:bg-orange-500/20 text-orange-600 dark:text-orange-400 rounded-lg transition-colors border border-orange-500/20",children:[jsxRuntimeExports.jsx(Tag,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:"Register ID"})]})]}),jsxRuntimeExports.jsx(AddressSelector,{compact:!0})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>r(!0),className:"p-1.5 sm:p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded-lg transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white",title:"Transaction history",children:jsxRuntimeExports.jsx(Clock,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>o(!0),className:"relative p-1.5 sm:p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded-lg transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white",title:"Payment requests",children:[jsxRuntimeExports.jsx(Bell,{className:"w-5 h-5"}),B>0&&jsxRuntimeExports.jsxs("span",{className:"absolute top-0.5 right-0.5 flex h-2.5 w-2.5",children:[jsxRuntimeExports.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),jsxRuntimeExports.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500"})]})]}),jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>c(!0),className:"p-1.5 sm:p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800/80 rounded-lg transition-colors text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white",title:"Settings",children:jsxRuntimeExports.jsx(EllipsisVertical,{className:"w-5 h-5"})})]})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 relative overflow-hidden",children:jsxRuntimeExports.jsx(L3WalletView,{showBalances:t,setShowBalances:e,isHistoryOpen:s,setIsHistoryOpen:r,isRequestsOpen:a,setIsRequestsOpen:o,isSettingsOpen:l,setIsSettingsOpen:c,isL1WalletOpen:u,setIsL1WalletOpen:f,paymentRequests:D,paymentRequestsPendingCount:B,paymentRequestsReject:F,paymentRequestsPaid:q,paymentRequestsClearProcessed:V})}),jsxRuntimeExports.jsx(L1WalletModal,{isOpen:u,onClose:()=>f(!1),showBalances:t}),jsxRuntimeExports.jsx(RegisterNametagModal,{isOpen:d,onClose:()=>p(!1)})]}):jsxRuntimeExports.jsxs("div",{className:PANEL_SHELL,children:[jsxRuntimeExports.jsx("div",{className:"absolute -top-20 -right-20 w-80 h-80 rounded-full blur-3xl bg-orange-500/5 dark:bg-orange-500/10"}),jsxRuntimeExports.jsx("div",{className:"absolute -bottom-20 -left-20 w-80 h-80 rounded-full blur-3xl bg-purple-500/5 dark:bg-purple-500/10"}),jsxRuntimeExports.jsx("div",{className:"flex-1 relative overflow-y-auto",children:jsxRuntimeExports.jsx(CreateWalletFlow,{})})]})}function WalletRequiredBlocker({children:t,agentId:e,onOpenWallet:s}){const{walletExists:r,isLoading:a}=useWalletStatus();return a||r||!agentRequiresWallet(e)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t}):jsxRuntimeExports.jsx("div",{className:"h-full flex items-center justify-center bg-white/60 dark:bg-neutral-900/90 backdrop-blur-xl rounded-3xl border border-neutral-200 dark:border-neutral-800/50",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-6 p-8 text-center max-w-sm",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 rounded-2xl blur-xl opacity-30 bg-orange-500"}),jsxRuntimeExports.jsx("div",{className:"relative w-16 h-16 rounded-2xl bg-linear-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-xl",children:jsxRuntimeExports.jsx(Wallet,{className:"w-8 h-8 text-white"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-neutral-900 dark:text-white",children:"Wallet Required"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"This agent requires a wallet to function. Create or import a wallet to get started."})]}),s&&jsxRuntimeExports.jsx(motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"px-6 py-2.5 bg-linear-to-r from-orange-500 to-orange-600 text-white font-medium rounded-xl shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40 transition-shadow",children:"Set Up Wallet"})]})})}const DEFAULT_VISIBLE_AGENTS=7;function AgentPage(){const{agentId:t}=useParams(),e=reactExports.useRef(null),[s,r]=reactExports.useState("chat"),[a,o]=reactExports.useState(!1),[l,c]=reactExports.useState([]),[u,f]=reactExports.useState(null),[d,p]=reactExports.useState("idle"),m=reactExports.useRef(void 0),y=reactExports.useRef([]);y.current=l;const b=agents.length>DEFAULT_VISIBLE_AGENTS;reactExports.useEffect(()=>{if(!t)return;const q=m.current!==t;m.current=t;const V=y.current;V[0]!==t&&(q&&V.includes(t)?(f(t),p("exiting"),setTimeout(()=>{c(ee=>{const Q=ee.filter(W=>W!==t);return[t,...Q].slice(0,DEFAULT_VISIBLE_AGENTS)}),p("entering"),setTimeout(()=>{p("idle"),f(null)},450)},350)):c(ee=>{const Q=ee.filter(W=>W!==t);return[t,...Q].slice(0,DEFAULT_VISIBLE_AGENTS)}))},[t]);const E=(()=>{if(a)return agents;const q=l.map(Q=>agents.find(W=>W.id===Q)).filter(Q=>Q!==void 0),V=agents.filter(Q=>!l.includes(Q.id));return[...q,...V].slice(0,DEFAULT_VISIBLE_AGENTS)})(),C=t?getAgentConfig(t):void 0,j=reactExports.useRef(null),B=()=>{!e.current||window.innerWidth>=1024||(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{if(!e.current)return;const q=e.current.scrollLeft,V=e.current.offsetWidth;r(q>V/2?"wallet":"chat")},50))},D=q=>{if(!e.current)return;const V=e.current.offsetWidth;e.current.scrollTo({left:q==="wallet"?V:0,behavior:"smooth"}),r(q)};if(reactExports.useEffect(()=>{window.innerWidth<1024&&e.current&&(e.current.scrollTo({left:0,behavior:"instant"}),r("chat"))},[t]),reactExports.useEffect(()=>{const q=()=>{window.innerWidth<1024&&(console.log(" Payment request received, switching to wallet panel..."),D("wallet"))};return window.addEventListener("payment-requests-updated",q),()=>{window.removeEventListener("payment-requests-updated",q)}},[]),!C)return jsxRuntimeExports.jsx(Navigate,{to:"/agents/chat",replace:!0});const F=()=>{if(C.type==="iframe")return jsxRuntimeExports.jsx(IframeAgent,{agent:C});switch(C.id){case"chat":return jsxRuntimeExports.jsx(ChatSection,{});case"ai":return jsxRuntimeExports.jsx(AIChat,{agent:C});case"trivia":return jsxRuntimeExports.jsx(TriviaChat,{agent:C});case"games":return jsxRuntimeExports.jsx(GamesChat,{agent:C});case"sport":return jsxRuntimeExports.jsx(SportChat,{agent:C});case"p2p":return jsxRuntimeExports.jsx(P2PChat,{agent:C});case"merch":return jsxRuntimeExports.jsx(MerchChat,{agent:C});case"sell-anything":return jsxRuntimeExports.jsx(SellAnythingChat,{agent:C});case"pokemon":return jsxRuntimeExports.jsx(PokemonChat,{agent:C});default:return jsxRuntimeExports.jsx(ChatSection,{})}};return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[jsxRuntimeExports.jsxs("div",{"data-tutorial":"agents",className:"hidden lg:block mb-8 relative px-8 pt-8 pb-5 rounded-2xl dark:bg-linear-to-br dark:from-neutral-900/40 dark:to-neutral-800/20 backdrop-blur-sm border border-neutral-200 dark:border-neutral-800/50",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 border-l-2 border-t-2 border-orange-500/50 rounded-tl-2xl"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-32 h-32 border-r-2 border-b-2 border-orange-500/50 rounded-br-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${Math.min(E.length,DEFAULT_VISIBLE_AGENTS)}, 1fr)`},children:[E.slice(0,DEFAULT_VISIBLE_AGENTS).map((q,V)=>{const ee=u===q.id,Q=V===0,W=ee&&d==="exiting"&&!Q,Z=ee&&d==="entering"&&Q;return jsxRuntimeExports.jsx(motion.div,{layout:!0,initial:!1,animate:{opacity:W?0:1,scale:W?.75:1,y:W?-15:0},transition:{layout:{type:"spring",stiffness:250,damping:30},opacity:{duration:.35,ease:"easeOut"},scale:{duration:.35,ease:"easeOut"},y:{duration:.35,ease:"easeOut"}},children:jsxRuntimeExports.jsx(motion.div,{initial:Z?{opacity:0,scale:.8,y:15}:!1,animate:{opacity:1,scale:1,y:0},transition:{duration:.4,ease:[.34,1.56,.64,1]},children:jsxRuntimeExports.jsx(AgentCard,{id:q.id,name:q.name,Icon:q.Icon,category:q.category,color:q.color,isSelected:t===q.id})})},q.id)}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"sync",children:a&&E.slice(DEFAULT_VISIBLE_AGENTS).map((q,V)=>jsxRuntimeExports.jsx(motion.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.1}},transition:{layout:{type:"spring",stiffness:400,damping:35},duration:.15,delay:V*.02},children:jsxRuntimeExports.jsx(AgentCard,{id:q.id,name:q.name,Icon:q.Icon,category:q.category,color:q.color,isSelected:t===q.id})},q.id))})]}),b&&jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>o(!a),className:"flex items-center gap-1.5 px-4 pt-2 text-sm font-medium text-neutral-600 dark:text-neutral-400 hover:text-orange-500 dark:hover:text-orange-400 transition-colors duration-200",children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"Hide all"}),jsxRuntimeExports.jsx(ChevronUp,{className:"w-4 h-4"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"View all"}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4"})]})})})]})]}),jsxRuntimeExports.jsx("div",{className:"hidden lg:block mb-6",children:jsxRuntimeExports.jsx(ActivityTicker,{agentId:t})}),jsxRuntimeExports.jsxs("div",{"data-tutorial":"mobile-tabs",className:"lg:hidden shrink-0 relative flex p-1 mb-3 bg-neutral-100 dark:bg-neutral-800/50 rounded-2xl backdrop-blur-sm border border-neutral-200 dark:border-neutral-700/30 overflow-hidden",children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute top-1 bottom-1 left-1 bg-linear-to-r from-orange-500 to-orange-600 rounded-xl shadow-lg shadow-orange-500/20",initial:!1,animate:{x:s==="chat"?"0%":"100%",width:"calc(50% - 0.25rem)"},transition:{type:"spring",stiffness:300,damping:30}}),jsxRuntimeExports.jsxs("button",{onClick:()=>D("chat"),className:`relative z-10 flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl font-medium transition-colors duration-200 ${s==="chat"?"text-white":"text-neutral-500 dark:text-neutral-400"}`,children:[jsxRuntimeExports.jsx(MessageSquare,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Agents"})]}),jsxRuntimeExports.jsxs("button",{"data-tutorial":"mobile-wallet-tab",onClick:()=>D("wallet"),className:`relative z-10 flex-1 flex items-center justify-center gap-2 py-2.5 rounded-xl font-medium transition-colors duration-200 ${s==="wallet"?"text-white":"text-neutral-500 dark:text-neutral-400"}`,children:[jsxRuntimeExports.jsx(Wallet,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Wallet"})]})]}),jsxRuntimeExports.jsxs("div",{ref:e,onScroll:B,className:"lg:hidden flex-1 min-h-0 flex overflow-x-auto snap-x snap-mandatory scrollbar-hide py-1",children:[jsxRuntimeExports.jsx("div",{"data-tutorial":"mobile-chat",className:"w-full shrink-0 snap-center h-full",children:jsxRuntimeExports.jsx(WalletRequiredBlocker,{agentId:t,onOpenWallet:()=>D("wallet"),children:F()})}),jsxRuntimeExports.jsx("div",{"data-tutorial":"mobile-wallet",className:"w-full shrink-0 snap-center h-full",children:jsxRuntimeExports.jsx(WalletPanel,{})})]}),jsxRuntimeExports.jsxs("div",{className:"hidden lg:grid lg:grid-cols-3 lg:gap-8 lg:flex-1 lg:min-h-[650px] lg:py-2",children:[jsxRuntimeExports.jsx("div",{"data-tutorial":"chat",className:"lg:col-span-2 h-full min-h-0",children:jsxRuntimeExports.jsx(WalletRequiredBlocker,{agentId:t,children:F()})}),jsxRuntimeExports.jsx("div",{"data-tutorial":"wallet",className:"h-full min-h-0",children:jsxRuntimeExports.jsx(WalletPanel,{})})]})]})}function DevelopersPage(){const[t,e]=reactExports.useState("init"),[s,r]=reactExports.useState(null),a=(c,u)=>{navigator.clipboard.writeText(c),r(u),setTimeout(()=>r(null),2e3)},o={init:{icon:"",title:"Initialization",tagline:"Your key is your identity.",description:"No API keys. Your cryptographic keypair IS your Unicity ID. Self-authenticated, decentralized identity.",color:"from-emerald-500 to-teal-500",code:"const sphere = await Sphere.init({ mode: 'trusted', mnemonic: '...' });",fullExample:`// Trusted mode (browser - local key management)
const sphere = await Sphere.init({
  mode: 'trusted',
  mnemonic: 'abandon badge cable ...'
});
console.log(sphere.address); // "unicity:0x8f3a..."

// Untrusted mode (server agent - remote signing)
const sphere = await Sphere.init({
  mode: 'untrusted',
  remoteUnicityId: 'unicity:0x8f3a...'
});
// Transactions tunneled to browser for signing`,features:["Self-authenticated","No registration","BIP32 HD wallets","Cross-device sync"]},payments:{icon:"",title:"Payments",tagline:"Three parameters. That's it.",description:"Send any token to anyone. No gas estimation. No nonce management. No failed transactions.",color:"from-orange-500 to-amber-500",code:'await sphere.send("USDC", 100, "@merchant");',fullExample:`// Simple payment (use @nametag or unicity:0x...)
await sphere.send("USDC", 100, "@merchant");

// Listen for incoming payments
sphere.on.receive((transfer) => {
  console.log(\`Received \${transfer.amount} \${transfer.token}\`);
});

// Check balance
const balance = await sphere.getBalance("USDC");

// With escrow
const escrow = await sphere.escrow({
  token: "USDC",
  amount: 5000,
  to: "@seller",
  releaseCondition: "delivery_confirmed"
});
await escrow.release();`,features:["Instant P2P settlement","Any token, any amount","Built-in escrow","Nametag support"]},communication:{icon:"",title:"Communication",tagline:"Message anyone. Human or agent.",description:"Direct encrypted P2P messaging via Nostr. NIP-17 encryption. No central servers.",color:"from-violet-500 to-purple-500",code:'await sphere.msg("@alice", { type: "offer", price: 500 });',fullExample:`// Send an offer
await sphere.msg("@alice", {
  type: "offer",
  item: "PSA-10-charizard",
  price: 12000,
  currency: "USDC"
});

// Listen for messages
sphere.on.msg((msg) => {
  if (msg.type === "accepted") {
    // Trigger payment
    await sphere.send(msg.currency, msg.price, msg.from);
  }
});`,features:["End-to-end encrypted","P2P via Nostr","Agent-to-agent native","Structured payloads"]},agents:{icon:"",title:"Agents",tagline:"Intent-based or direct. Your choice.",description:"Register high-level intents for autonomous matching, or discover and invoke agents directly.",color:"from-cyan-500 to-blue-500",code:'await sphere.intent("buy", { item: "gold-1oz", maxPrice: 2100 });',fullExample:`// High-level intent (autonomous matching)
const intent = await sphere.intent("buy", {
  category: "tickets",
  event: "World Cup 2026",
  maxPrice: 2000
});
intent.onMatch((match) => {
  console.log(\`Found: \${match.description} - \${match.price}\`);
  match.approve(); // Auto-execute
});

// Direct agent discovery
const sellers = await sphere.discover("ticket resellers");

// Direct invocation (P2P)
await sphere.invoke(sellers[0].id, "buy", {
  item: "World Cup ticket",
  maxPrice: 2000
});

// Advertise your own capabilities
sphere.advertise({
  capabilities: ["sell_collectibles"],
  fee: { currency: "USDC", percent: 1 }
});`,features:["Intent-based matching","P2P discovery","Direct invocation","Capability advertising"]}},l=`// Initialize with your keypair (no API key needed!)
const sphere = await Sphere.init({
  mode: 'trusted',
  mnemonic: process.env.WALLET_MNEMONIC
});

// Create a listing
async function list(item, price) {
  return sphere.listing.create({ item, price, seller: sphere.address });
}

// Make an offer
async function offer(listingId, price) {
  const listing = await sphere.listing.get(listingId);
  await sphere.msg(listing.seller, { type: "offer", listing: listingId, price });
}

// Handle offers automatically
sphere.on.msg(async (msg) => {
  if (msg.type === "offer" && msg.price >= listing.price) {
    await sphere.escrow({ token: "USDC", amount: msg.price, to: sphere.address });
    await sphere.msg(msg.from, { type: "accepted" });
  }
});

// That's it. You have a marketplace.`;return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"text-neutral-900 dark:text-white",children:[jsxRuntimeExports.jsx("section",{className:"px-4 sm:px-6 py-12 sm:py-16 text-center",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs(motion.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-6 leading-tight",children:["One SDK.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"bg-linear-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent",children:"Infinite Marketplaces."})]}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-lg sm:text-xl text-neutral-600 dark:text-neutral-400 mb-8 sm:mb-10 max-w-2xl mx-auto",children:"You don't need a blockchain team. If you can call an API, you can build a marketplace where humans and agents trade anything."}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex gap-4 justify-center flex-wrap",children:[jsxRuntimeExports.jsx("button",{className:"bg-linear-to-r from-orange-500 to-amber-500 text-white px-6 py-3 rounded-xl font-semibold hover:opacity-90 transition shadow-lg shadow-orange-500/25",children:"Start Building"}),jsxRuntimeExports.jsx(Link$1,{to:"/developers/docs",className:"border border-neutral-300 dark:border-neutral-700 text-neutral-700 dark:text-white px-6 py-3 rounded-xl font-medium hover:border-neutral-400 dark:hover:border-neutral-500 transition",children:"Read Docs"})]})]})}),jsxRuntimeExports.jsx("section",{className:"px-4 sm:px-6 py-8 sm:py-12",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:Object.entries(o).map(([c,u])=>jsxRuntimeExports.jsxs(motion.button,{onClick:()=>e(c),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-5 sm:p-6 rounded-2xl border text-left transition-all ${t===c?"bg-white dark:bg-neutral-800 border-orange-500/50 shadow-lg shadow-orange-500/10":"bg-white/50 dark:bg-neutral-800/50 border-neutral-200 dark:border-neutral-700/50 hover:border-neutral-300 dark:hover:border-neutral-600"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-xl bg-linear-to-br ${u.color} flex items-center justify-center text-2xl mb-4`,children:u.icon}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-1",children:u.title}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-neutral-400 text-sm",children:u.tagline})]},c))}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 overflow-hidden shadow-xl",children:[jsxRuntimeExports.jsx("div",{className:"p-6 sm:p-8 border-b border-neutral-200 dark:border-neutral-700",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:o[t].title}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 max-w-xl",children:o[t].description})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:o[t].features.map((c,u)=>jsxRuntimeExports.jsx("span",{className:"bg-neutral-100 dark:bg-neutral-700 text-neutral-600 dark:text-neutral-300 text-xs px-3 py-1 rounded-full",children:c},u))})]})}),jsxRuntimeExports.jsxs("div",{className:"p-4 sm:p-6 bg-neutral-50 dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 uppercase tracking-wider",children:"The entire integration"}),jsxRuntimeExports.jsx("button",{onClick:()=>a(o[t].code,"oneliner"),className:"text-xs text-neutral-500 hover:text-neutral-700 dark:hover:text-white transition",children:s==="oneliner"?" Copied":"Copy"})]}),jsxRuntimeExports.jsx("pre",{className:"text-base sm:text-lg font-mono overflow-x-auto",children:jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:o[t].code})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 sm:p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 uppercase tracking-wider",children:"Full example"}),jsxRuntimeExports.jsx("button",{onClick:()=>a(o[t].fullExample,"full"),className:"text-xs text-neutral-500 hover:text-neutral-700 dark:hover:text-white transition",children:s==="full"?" Copied":"Copy"})]}),jsxRuntimeExports.jsx("pre",{className:"text-sm font-mono text-neutral-700 dark:text-neutral-300 overflow-x-auto",children:jsxRuntimeExports.jsx("code",{children:o[t].fullExample})})]})]},t)]})}),jsxRuntimeExports.jsx("section",{className:"px-4 sm:px-6 py-12 sm:py-16",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-10 sm:mb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"A Complete Marketplace in 25 Lines"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:"Listings, offers, negotiation, escrow, settlement. All of it."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 overflow-hidden shadow-xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border-b border-neutral-200 dark:border-neutral-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 font-mono",children:"marketplace.js"}),jsxRuntimeExports.jsx("button",{onClick:()=>a(l,"marketplace"),className:"text-xs text-neutral-500 hover:text-neutral-700 dark:hover:text-white transition",children:s==="marketplace"?" Copied":"Copy"})]}),jsxRuntimeExports.jsx("pre",{className:"p-4 sm:p-6 text-sm font-mono text-neutral-700 dark:text-neutral-300 overflow-x-auto",children:jsxRuntimeExports.jsx("code",{children:l})})]})]})}),jsxRuntimeExports.jsx("section",{className:"px-4 sm:px-6 py-12 sm:py-16 bg-neutral-50 dark:bg-neutral-900/50 rounded-2xl",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-10 sm:mb-12",children:"Why Build Here?"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6 sm:gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 p-6 sm:p-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-6 text-neutral-500 dark:text-neutral-400",children:"Traditional Stack"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-4 text-neutral-500",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-red-400",children:""})," API key management"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-red-400",children:""})," Gas fee estimation"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-red-400",children:""})," Wallet integration"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-red-400",children:""})," Payment rails"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-red-400",children:""})," Messaging infra"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-red-400",children:""})," Months to MVP"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-linear-to-br from-orange-500/10 to-amber-500/10 dark:from-orange-500/20 dark:to-amber-500/10 rounded-2xl border border-orange-500/30 p-6 sm:p-8",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-6 text-orange-500",children:"Sphere SDK"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3 text-neutral-700 dark:text-neutral-200",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500",children:""})," Private key IS identity"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3 text-neutral-700 dark:text-neutral-200",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500",children:""})," Included (off-chain)"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3 text-neutral-700 dark:text-neutral-200",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500",children:""})," Unified Unicity ID"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3 text-neutral-700 dark:text-neutral-200",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500",children:""})," Just call ",jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400 text-sm",children:"send()"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3 text-neutral-700 dark:text-neutral-200",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500",children:""})," Built-in P2P"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3 text-neutral-700 dark:text-neutral-200",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500",children:""})," ",jsxRuntimeExports.jsx("strong",{children:"Days"})]})]})]})]})]})}),jsxRuntimeExports.jsx("section",{className:"px-4 sm:px-6 py-12 sm:py-16",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold mb-6",children:"Ready to Build?"}),jsxRuntimeExports.jsx("p",{className:"text-lg sm:text-xl text-neutral-600 dark:text-neutral-400 mb-8 sm:mb-10",children:"Install the SDK and ship a marketplace this week."}),jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl border border-neutral-200 dark:border-neutral-700 p-6 sm:p-8 mb-8 sm:mb-10 shadow-xl",children:[jsxRuntimeExports.jsxs("pre",{className:"text-left font-mono text-sm mb-6 overflow-x-auto",children:[jsxRuntimeExports.jsx("code",{className:"text-neutral-500",children:"# Install the SDK"}),`
`,jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"npm install @agentsphere/sdk"}),`

`,jsxRuntimeExports.jsx("code",{className:"text-neutral-500",children:"# Generate a keypair (your identity)"}),`
`,jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"npx sphere-keygen"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[jsxRuntimeExports.jsx(Link$1,{to:"/developers/docs",className:"bg-linear-to-r from-orange-500 to-amber-500 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:opacity-90 transition shadow-lg shadow-orange-500/25",children:"View Documentation"}),jsxRuntimeExports.jsx("a",{href:"#",className:"border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-white px-8 py-4 rounded-xl font-semibold text-lg hover:border-neutral-400 dark:hover:border-neutral-500 transition",children:"Generate Keypair"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-6 sm:gap-8 text-neutral-600 dark:text-neutral-400 flex-wrap",children:[jsxRuntimeExports.jsxs(Link$1,{to:"/developers/docs",className:"hover:text-orange-500 transition flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:""})," Documentation"]}),jsxRuntimeExports.jsxs("a",{href:"https://discord.gg/S9f57ZKdt",target:"_blank",rel:"noopener noreferrer",className:"hover:text-orange-500 transition flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:""})," Discord"]}),jsxRuntimeExports.jsxs("a",{href:"https://github.com/unicitynetwork",target:"_blank",rel:"noopener noreferrer",className:"hover:text-orange-500 transition flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:""})," GitHub"]}),jsxRuntimeExports.jsxs("a",{href:"#",className:"hover:text-orange-500 transition flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:""})," Grants"]})]})]})}),jsxRuntimeExports.jsx("footer",{className:"border-t border-neutral-200 dark:border-neutral-700 px-4 sm:px-6 py-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between text-sm text-neutral-500 flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-linear-to-br from-orange-500 to-amber-500 rounded flex items-center justify-center font-bold text-xs text-white",children:"S"}),jsxRuntimeExports.jsx("span",{children:"AgentSphere by Unicity Labs"})]}),jsxRuntimeExports.jsx("div",{children:"One SDK. Any marketplace. Let's build."})]})})]})}function MineAlphaPage(){const[t,e]=reactExports.useState("commercial"),s={commercial:{icon:"",title:"Commercial Mining",tagline:"Plug in. Earn. No hardware.",description:"Purchase hash rate from professional mining facilities. No equipment, no setup, no electricity bills. Just rewards.",color:"from-emerald-500 to-teal-500",features:["No hardware required","Instant activation","Professional facilities","Predictable returns"],content:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-950 rounded-xl p-6 border border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-linear-to-br from-emerald-500 to-teal-500 rounded-xl flex items-center justify-center text-2xl",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg text-neutral-900 dark:text-white",children:"Friendly Miners"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-500 dark:text-gray-400 text-sm",children:"Mining-as-a-Service Platform"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-gray-300 mb-6",children:"The easiest way to mine ALPHA. Purchase hash rate contracts from our network of professional mining facilities. No technical knowledge required."}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:"99.9%"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm",children:"Uptime guarantee"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:"24/7"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm",children:"Monitoring"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:"0"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm",children:"Hardware to manage"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:"Daily"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm",children:"Payouts"})]})]}),jsxRuntimeExports.jsx("a",{href:"https://friendly-miners.com",target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-linear-to-r from-emerald-500 to-teal-500 text-white text-center px-6 py-4 rounded-xl font-semibold hover:opacity-90 transition",children:"Start Mining on Friendly Miners "})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-gray-900/50 rounded-xl p-6 border border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-3 text-neutral-900 dark:text-white",children:"How it works"}),jsxRuntimeExports.jsxs("ol",{className:"space-y-3 text-neutral-600 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("li",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("span",{className:"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 w-6 h-6 rounded-full flex items-center justify-center text-sm shrink-0",children:"1"}),jsxRuntimeExports.jsx("span",{children:"Choose your hash rate package"})]}),jsxRuntimeExports.jsxs("li",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("span",{className:"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 w-6 h-6 rounded-full flex items-center justify-center text-sm shrink-0",children:"2"}),jsxRuntimeExports.jsx("span",{children:"Pay with crypto or fiat"})]}),jsxRuntimeExports.jsxs("li",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("span",{className:"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 w-6 h-6 rounded-full flex items-center justify-center text-sm shrink-0",children:"3"}),jsxRuntimeExports.jsx("span",{children:"Mining starts immediately"})]}),jsxRuntimeExports.jsxs("li",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("span",{className:"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 w-6 h-6 rounded-full flex items-center justify-center text-sm shrink-0",children:"4"}),jsxRuntimeExports.jsx("span",{children:"Receive daily ALPHA payouts to your wallet"})]})]})]})]})},solo:{icon:"",title:"Solo Mining",tagline:"Your hardware. Your rewards. Full control.",description:"Run your own mining operation and keep 100% of block rewards. Higher variance, higher potential rewards.",color:"from-orange-500 to-amber-500",features:["100% of block rewards","Full decentralization","No pool fees","Complete control"],content:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-950 rounded-xl p-6 border border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-4 text-neutral-900 dark:text-white",children:"Quick Start"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-2",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-gray-500 uppercase tracking-wider",children:"1. Install the node"})}),jsxRuntimeExports.jsx("pre",{className:"text-sm font-mono text-amber-600 dark:text-amber-400 overflow-x-auto",children:jsxRuntimeExports.jsx("code",{children:"curl -sSL https://get.unicity.network | bash"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-2",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-gray-500 uppercase tracking-wider",children:"2. Configure mining"})}),jsxRuntimeExports.jsx("pre",{className:"text-sm font-mono text-amber-600 dark:text-amber-400 overflow-x-auto whitespace-pre-wrap",children:`# Edit config file
nano ~/.unicity/config.toml

# Set your wallet address
[mining]
enabled = true
wallet = "unicity:0xYOUR_WALLET_ADDRESS"
threads = 8  # Adjust to your CPU cores`})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-2",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-500 dark:text-gray-500 uppercase tracking-wider",children:"3. Start mining"})}),jsxRuntimeExports.jsx("pre",{className:"text-sm font-mono text-amber-600 dark:text-amber-400 overflow-x-auto",children:jsxRuntimeExports.jsx("code",{children:"unicity-node --mine"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-gray-900/50 rounded-xl p-6 border border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-4 text-neutral-900 dark:text-white",children:"Hardware Requirements"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm mb-1",children:"Minimum"}),jsxRuntimeExports.jsxs("ul",{className:"text-neutral-700 dark:text-gray-300 text-sm space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" 4 CPU cores"}),jsxRuntimeExports.jsx("li",{children:" 8 GB RAM"}),jsxRuntimeExports.jsx("li",{children:" 100 GB SSD"}),jsxRuntimeExports.jsx("li",{children:" 10 Mbps connection"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm mb-1",children:"Recommended"}),jsxRuntimeExports.jsxs("ul",{className:"text-neutral-700 dark:text-gray-300 text-sm space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" 16+ CPU cores"}),jsxRuntimeExports.jsx("li",{children:" 32 GB RAM"}),jsxRuntimeExports.jsx("li",{children:" 500 GB NVMe"}),jsxRuntimeExports.jsx("li",{children:" 100 Mbps connection"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-gray-900/50 rounded-xl p-6 border border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-3 text-neutral-900 dark:text-white",children:"Solo Mining Considerations"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-neutral-600 dark:text-gray-400 text-sm",children:[jsxRuntimeExports.jsxs("li",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-amber-500 dark:text-amber-400",children:""}),jsxRuntimeExports.jsx("span",{children:"High variance  you may go days without finding a block"})]}),jsxRuntimeExports.jsxs("li",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-amber-500 dark:text-amber-400",children:""}),jsxRuntimeExports.jsx("span",{children:"When you find a block, you keep 100% of the reward"})]}),jsxRuntimeExports.jsxs("li",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-amber-500 dark:text-amber-400",children:""}),jsxRuntimeExports.jsx("span",{children:"Best for miners with significant hash power"})]}),jsxRuntimeExports.jsxs("li",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-amber-500 dark:text-amber-400",children:""}),jsxRuntimeExports.jsx("span",{children:"Contributes directly to network decentralization"})]})]})]}),jsxRuntimeExports.jsx("a",{href:"https://friendly-miners.com",target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-linear-to-r from-orange-500 to-amber-500 text-white text-center px-6 py-4 rounded-xl font-semibold hover:opacity-90 transition",children:"Full Solo Mining Guide "})]})},pool:{icon:"",title:"Pool Mining",tagline:"Combine forces. Steady rewards.",description:"Join a mining pool to combine hash power with other miners. More consistent payouts, lower variance.",color:"from-violet-500 to-purple-500",features:["Steady payouts","Lower variance","Community support","Easy setup"],content:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-950 rounded-xl p-6 border border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-4 text-neutral-900 dark:text-white",children:"Mining Pools"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4 border border-neutral-200 dark:border-gray-800 hover:border-violet-500/50 transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-violet-500/20 rounded-lg flex items-center justify-center text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-neutral-900 dark:text-white",children:"Unicity Pool"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm",children:"Official community pool"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-violet-600 dark:text-violet-400 font-semibold",children:"1% fee"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-xs",children:"PPLNS"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-600 dark:text-gray-400",children:"pool.unicity.network:3333"}),jsxRuntimeExports.jsx("a",{href:"https://unicity-pool.com/index.html",target:"_blank",rel:"noopener noreferrer",className:"text-violet-600 dark:text-violet-400 text-sm hover:underline",children:"Connect "})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4 border border-neutral-200 dark:border-gray-800 hover:border-violet-500/50 transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-neutral-900 dark:text-white",children:"HashVault"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm",children:"Multi-algo pool"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-violet-600 dark:text-violet-400 font-semibold",children:"0.9% fee"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-xs",children:"PPLNS"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-600 dark:text-gray-400",children:"alpha.hashvault.pro:3333"}),jsxRuntimeExports.jsx("a",{href:"https://hashvault.pro",target:"_blank",rel:"noopener noreferrer",className:"text-violet-600 dark:text-violet-400 text-sm hover:underline",children:"Connect "})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4 border border-neutral-200 dark:border-gray-800 hover:border-violet-500/50 transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-neutral-900 dark:text-white",children:"HeroMiners"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm",children:"Global infrastructure"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-violet-600 dark:text-violet-400 font-semibold",children:"1% fee"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-xs",children:"PROP"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-600 dark:text-gray-400",children:"alpha.herominers.com:1111"}),jsxRuntimeExports.jsx("a",{href:"https://herominers.com",target:"_blank",rel:"noopener noreferrer",className:"text-violet-600 dark:text-violet-400 text-sm hover:underline",children:"Connect "})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4 border border-neutral-200 dark:border-gray-800 hover:border-violet-500/50 transition",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-neutral-900 dark:text-white",children:"2Miners"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-sm",children:"Established since 2017"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:"text-violet-600 dark:text-violet-400 font-semibold",children:"1% fee"}),jsxRuntimeExports.jsx("div",{className:"text-neutral-500 dark:text-gray-500 text-xs",children:"PPLNS / SOLO"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-neutral-600 dark:text-gray-400",children:"alpha.2miners.com:2222"}),jsxRuntimeExports.jsx("a",{href:"https://2miners.com",target:"_blank",rel:"noopener noreferrer",className:"text-violet-600 dark:text-violet-400 text-sm hover:underline",children:"Connect "})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-gray-900/50 rounded-xl p-6 border border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-4 text-neutral-900 dark:text-white",children:"Quick Pool Setup"}),jsxRuntimeExports.jsx("div",{className:"bg-neutral-100 dark:bg-gray-900 rounded-lg p-4",children:jsxRuntimeExports.jsx("pre",{className:"text-sm font-mono text-violet-600 dark:text-violet-400 overflow-x-auto whitespace-pre-wrap",children:`# Example: Connect to Unicity Pool
./unicity-miner -o stratum+tcp://pool.unicity.network:3333 \\
  -u YOUR_WALLET_ADDRESS \\
  -p x`})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-gray-900/50 rounded-xl p-6 border border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-3 text-neutral-900 dark:text-white",children:"Pool vs Solo"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-violet-600 dark:text-violet-400 mb-2",children:"Pool Mining"}),jsxRuntimeExports.jsxs("ul",{className:"text-neutral-600 dark:text-gray-400 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Regular payouts"}),jsxRuntimeExports.jsx("li",{children:" Lower variance"}),jsxRuntimeExports.jsx("li",{children:" Good for smaller miners"}),jsxRuntimeExports.jsx("li",{children:" Pool fees (0.9-1%)"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-amber-500 dark:text-amber-400 mb-2",children:"Solo Mining"}),jsxRuntimeExports.jsxs("ul",{className:"text-neutral-600 dark:text-gray-400 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" 100% of rewards"}),jsxRuntimeExports.jsx("li",{children:" No fees"}),jsxRuntimeExports.jsx("li",{children:" Full decentralization"}),jsxRuntimeExports.jsx("li",{children:" High variance"})]})]})]})]})]})}};return jsxRuntimeExports.jsxs("div",{className:"text-neutral-900 dark:text-white bg-neutral-100 dark:bg-gray-950 min-h-full",children:[jsxRuntimeExports.jsx("section",{className:"py-8 md:py-12 text-center",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs(motion.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-3xl md:text-5xl font-bold mb-4 md:mb-6 leading-tight",children:["Mine ALPHA.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"bg-linear-to-r from-emerald-500 to-teal-500 bg-clip-text text-transparent",children:"Choose Your Path."})]}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-lg md:text-xl text-neutral-600 dark:text-gray-400 mb-8 max-w-2xl mx-auto",children:"Three ways to participate in the Unicity network. From zero-setup cloud mining to running your own operation."})]})}),jsxRuntimeExports.jsx("section",{className:"pb-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:Object.entries(s).map(([r,a])=>jsxRuntimeExports.jsxs(motion.button,{onClick:()=>e(r),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-6 rounded-2xl border text-left transition-all ${t===r?"bg-white dark:bg-gray-900 border-neutral-300 dark:border-gray-700":"bg-white/50 dark:bg-gray-900/50 border-neutral-200/50 dark:border-gray-800/50 hover:border-neutral-300 dark:hover:border-gray-700"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-xl bg-linear-to-br ${a.color} flex items-center justify-center text-2xl mb-4`,children:a.icon}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-1 text-neutral-900 dark:text-white",children:a.title}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-gray-400 text-sm",children:a.tagline})]},r))}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-900 rounded-2xl border border-neutral-200 dark:border-gray-800 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-6 md:p-8 border-b border-neutral-200 dark:border-gray-800",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-2 text-neutral-900 dark:text-white",children:s[t].title}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-gray-400 max-w-xl",children:s[t].description})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:s[t].features.map((r,a)=>jsxRuntimeExports.jsx("span",{className:"bg-neutral-100 dark:bg-gray-800 text-neutral-700 dark:text-gray-300 text-xs px-3 py-1 rounded-full",children:r},a))})]})}),jsxRuntimeExports.jsx("div",{className:"p-6 md:p-8",children:s[t].content})]},t)]})}),jsxRuntimeExports.jsx("section",{className:"py-8 md:py-12 bg-neutral-50 dark:bg-gray-900/50 rounded-2xl my-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center mb-8 md:mb-12 text-neutral-900 dark:text-white",children:"Which Option is Right for You?"}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-left",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b border-neutral-200 dark:border-gray-800",children:[jsxRuntimeExports.jsx("th",{className:"py-4 px-4 text-neutral-500 dark:text-gray-400 font-medium"}),jsxRuntimeExports.jsx("th",{className:"py-4 px-4 text-emerald-600 dark:text-emerald-400 font-medium",children:"Commercial"}),jsxRuntimeExports.jsx("th",{className:"py-4 px-4 text-amber-600 dark:text-amber-400 font-medium",children:"Solo"}),jsxRuntimeExports.jsx("th",{className:"py-4 px-4 text-violet-600 dark:text-violet-400 font-medium",children:"Pool"})]})}),jsxRuntimeExports.jsxs("tbody",{className:"text-neutral-700 dark:text-gray-300",children:[jsxRuntimeExports.jsxs("tr",{className:"border-b border-neutral-200/50 dark:border-gray-800/50",children:[jsxRuntimeExports.jsx("td",{className:"py-4 px-4 text-neutral-500 dark:text-gray-500",children:"Hardware needed"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"None"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Yes"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Yes"})]}),jsxRuntimeExports.jsxs("tr",{className:"border-b border-neutral-200/50 dark:border-gray-800/50",children:[jsxRuntimeExports.jsx("td",{className:"py-4 px-4 text-neutral-500 dark:text-gray-500",children:"Technical skill"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Beginner"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Advanced"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Intermediate"})]}),jsxRuntimeExports.jsxs("tr",{className:"border-b border-neutral-200/50 dark:border-gray-800/50",children:[jsxRuntimeExports.jsx("td",{className:"py-4 px-4 text-neutral-500 dark:text-gray-500",children:"Payout frequency"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Daily"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Variable"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Regular"})]}),jsxRuntimeExports.jsxs("tr",{className:"border-b border-neutral-200/50 dark:border-gray-800/50",children:[jsxRuntimeExports.jsx("td",{className:"py-4 px-4 text-neutral-500 dark:text-gray-500",children:"Fees"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Service fee"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"None"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"0.9-1%"})]}),jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"py-4 px-4 text-neutral-500 dark:text-gray-500",children:"Best for"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Passive income"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Large miners"}),jsxRuntimeExports.jsx("td",{className:"py-4 px-4",children:"Most miners"})]})]})]})})]})}),jsxRuntimeExports.jsx("footer",{className:"border-t border-neutral-200 dark:border-gray-800 py-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between text-sm text-neutral-500 dark:text-gray-500 flex-wrap gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-linear-to-br from-emerald-500 to-teal-500 rounded flex items-center justify-center font-bold text-xs text-white",children:""}),jsxRuntimeExports.jsx("span",{children:"Mine ALPHA by Unicity Labs"})]}),jsxRuntimeExports.jsx("div",{children:"Choose your path. Start mining today."})]})})]})}const navigation$1=[{id:"getting-started",label:"Getting Started",children:[{id:"installation",label:"Installation"},{id:"quick-start",label:"Quick Start"}]},{id:"core-concepts",label:"Core Concepts",children:[{id:"identity",label:"Identity & Authentication"},{id:"addresses",label:"Unicity Addresses"},{id:"nametags",label:"Nametags (@username)"},{id:"token-model",label:"Token Model"}]},{id:"api-reference",label:"API Reference",children:[{id:"api-init",label:"Sphere.init()"},{id:"api-send",label:"sphere.send()"},{id:"api-getbalance",label:"sphere.getBalance()"},{id:"api-on-receive",label:"sphere.on.receive()"},{id:"api-escrow",label:"sphere.escrow()"},{id:"api-msg",label:"sphere.msg()"},{id:"api-on-msg",label:"sphere.on.msg()"},{id:"api-intent",label:"sphere.intent()"},{id:"api-discover",label:"sphere.discover()"},{id:"api-invoke",label:"sphere.invoke()"},{id:"api-advertise",label:"sphere.advertise()"}]},{id:"guides",label:"Guides",children:[{id:"guide-marketplace",label:"Building a Marketplace"},{id:"guide-agent-communication",label:"Agent-to-Agent Communication"},{id:"guide-security",label:"Security Best Practices"}]},{id:"examples",label:"Examples",children:[{id:"example-payment",label:"Simple Payment"},{id:"example-marketplace",label:"P2P Marketplace"},{id:"example-ai-agent",label:"AI Agent Integration"}]}],inPreparationSections=["api-escrow","api-intent","api-discover","api-invoke","api-advertise","guide-agent-communication","guide-security","example-ai-agent"];function CodeBlock({code:t,filename:e,language:s="typescript"}){const[r,a]=reactExports.useState(!1),o=()=>{navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)};return jsxRuntimeExports.jsxs("div",{className:"bg-neutral-900 rounded-xl overflow-hidden my-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-b border-neutral-700",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-400 font-mono",children:e||s}),jsxRuntimeExports.jsx("button",{onClick:o,className:"text-xs text-neutral-400 hover:text-white transition",children:r?" Copied":"Copy"})]}),jsxRuntimeExports.jsx("pre",{className:"p-4 text-sm overflow-x-auto",children:jsxRuntimeExports.jsx("code",{className:"text-amber-400",children:t})})]})}function InPreparationBadge(){return jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-purple-500/10 text-purple-500 border border-purple-500/30 rounded-full ml-2",children:"In Preparation"})}function ParamTable({params:t}){return jsxRuntimeExports.jsx("div",{className:"overflow-x-auto my-4",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-left text-neutral-500 border-b border-neutral-200 dark:border-neutral-700",children:[jsxRuntimeExports.jsx("th",{className:"pb-2 pr-4",children:"Parameter"}),jsxRuntimeExports.jsx("th",{className:"pb-2 pr-4",children:"Type"}),jsxRuntimeExports.jsx("th",{className:"pb-2",children:"Description"})]})}),jsxRuntimeExports.jsx("tbody",{children:t.map((e,s)=>jsxRuntimeExports.jsxs("tr",{className:"border-b border-neutral-100 dark:border-neutral-800",children:[jsxRuntimeExports.jsxs("td",{className:"py-2 pr-4",children:[jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:e.name}),e.required&&jsxRuntimeExports.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),jsxRuntimeExports.jsx("td",{className:"py-2 pr-4 text-neutral-600 dark:text-neutral-400 font-mono text-xs",children:e.type}),jsxRuntimeExports.jsx("td",{className:"py-2 text-neutral-600 dark:text-neutral-400",children:e.description})]},s))})]})})}function DocsPage(){const[t,e]=reactExports.useState("getting-started"),[s,r]=reactExports.useState(!1),[a,o]=reactExports.useState(new Set(["getting-started","api-reference"]));reactExports.useEffect(()=>{const f=()=>{const d=document.querySelectorAll("[data-section]");let p="getting-started";d.forEach(m=>{m.getBoundingClientRect().top<=100&&(p=m.getAttribute("data-section"))}),e(p)};return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[]);const l=f=>{const d=document.getElementById(f);d&&(d.scrollIntoView({behavior:"smooth",block:"start"}),e(f),r(!1))},c=f=>{o(d=>{const p=new Set(d);return p.has(f)?p.delete(f):p.add(f),p})},u=f=>inPreparationSections.includes(f);return jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen text-neutral-900 dark:text-white relative z-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>r(!s),className:"lg:hidden fixed top-16 left-4 z-30 p-2 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-lg rounded-lg border border-neutral-200 dark:border-neutral-700 text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s?jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),s&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-10 bg-black/50 lg:hidden",onClick:()=>r(!1)}),jsxRuntimeExports.jsx("aside",{className:`
        fixed top-14 z-20 w-64 h-[calc(100vh-3.5rem)] overflow-y-auto
        backdrop-blur-lg lg:backdrop-blur-none border-r border-neutral-200/50 dark:border-neutral-800/50 lg:border-0
        transform transition-transform
        ${s?"left-0 translate-x-0":"-translate-x-full lg:translate-x-0"}
        lg:left-[max(1rem,calc((100vw-80rem)/2))]
        p-4 lg:py-8 lg:pr-8
      `,children:jsxRuntimeExports.jsx("nav",{className:"space-y-1",children:navigation$1.map(f=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{f.children?c(f.id):l(f.id)},className:`
                    w-full flex items-center justify-between px-3 py-2 text-sm font-medium rounded-lg transition
                    ${t===f.id||f.children?.some(d=>d.id===t)?"text-orange-600 dark:text-orange-400 bg-orange-50 dark:bg-orange-500/10":"text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white hover:bg-neutral-100 dark:hover:bg-neutral-800"}
                  `,children:[jsxRuntimeExports.jsx("span",{children:f.label}),f.children&&jsxRuntimeExports.jsx("svg",{className:`w-4 h-4 transition-transform ${a.has(f.id)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),f.children&&a.has(f.id)&&jsxRuntimeExports.jsx("div",{className:"ml-4 mt-1 space-y-1",children:f.children.map(d=>jsxRuntimeExports.jsxs("button",{onClick:()=>l(d.id),className:`
                          w-full flex items-center px-3 py-1.5 text-sm rounded-lg transition
                          ${t===d.id?"text-orange-600 dark:text-orange-400":"text-neutral-500 dark:text-neutral-500 hover:text-neutral-900 dark:hover:text-white"}
                        `,children:[jsxRuntimeExports.jsx("span",{children:d.label}),u(d.id)&&jsxRuntimeExports.jsx("span",{className:"ml-2 w-2 h-2 rounded-full bg-purple-500"})]},d.id))})]},f.id))})}),jsxRuntimeExports.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8 lg:pl-72",children:[jsxRuntimeExports.jsxs("section",{id:"getting-started","data-section":"getting-started",className:"mb-16",children:[jsxRuntimeExports.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-4",children:["Sphere SDK",jsxRuntimeExports.jsx("span",{className:"ml-3 text-sm font-normal text-neutral-500",children:"v1.0.0"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg text-neutral-600 dark:text-neutral-400 mb-8 max-w-2xl",children:"Build marketplaces where humans and AI agents trade anything. No blockchain expertise required."}),jsxRuntimeExports.jsxs("div",{id:"installation","data-section":"installation",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Installation"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Install the Sphere SDK using npm, yarn, or pnpm:"}),jsxRuntimeExports.jsx(CodeBlock,{code:"npm install @agentsphere/sdk",filename:"terminal"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-4",children:"Or with yarn:"}),jsxRuntimeExports.jsx(CodeBlock,{code:"yarn add @agentsphere/sdk",filename:"terminal"})]}),jsxRuntimeExports.jsxs("div",{id:"quick-start","data-section":"quick-start",className:"scroll-mt-24",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Quick Start"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Get started with Sphere in just a few lines of code:"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"app.ts",code:`import { Sphere } from '@agentsphere/sdk';

// Initialize with your mnemonic
const sphere = await Sphere.init({
  mode: 'trusted',
  mnemonic: 'abandon badge cable drama ...'
});

// Your Unicity address - derived from your keypair
console.log(sphere.address); // "unicity:0x8f3a..."

// Send tokens to anyone
await sphere.send("USDC", 100, "@merchant");

// Listen for incoming transfers
sphere.on.receive((transfer) => {
  console.log(\`Received \${transfer.amount} \${transfer.token} from \${transfer.from}\`);
});`})]})]}),jsxRuntimeExports.jsxs("section",{id:"core-concepts","data-section":"core-concepts",className:"mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 pb-2 border-b border-neutral-200 dark:border-neutral-700",children:"Core Concepts"}),jsxRuntimeExports.jsxs("div",{id:"identity","data-section":"identity",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Identity & Authentication"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:["Sphere uses cryptographic identity instead of API keys. Your private key ",jsxRuntimeExports.jsx("strong",{children:"IS"})," your identity. This means:"]}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-neutral-600 dark:text-neutral-400 space-y-2 mb-4",children:[jsxRuntimeExports.jsx("li",{children:"No registration or API key management"}),jsxRuntimeExports.jsx("li",{children:"Self-authenticated - prove you are who you say you are cryptographically"}),jsxRuntimeExports.jsx("li",{children:"Portable across any application or platform"}),jsxRuntimeExports.jsx("li",{children:"BIP32 HD wallet support for generating multiple addresses from a single seed"})]}),jsxRuntimeExports.jsx("h4",{className:"font-semibold text-lg mt-6 mb-3",children:"Trusted vs Untrusted Mode"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl p-4 border border-neutral-200 dark:border-neutral-700",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium mb-2 text-emerald-600 dark:text-emerald-400",children:"Trusted Mode"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-3",children:"For browser applications where the user controls their keys locally."}),jsxRuntimeExports.jsx(CodeBlock,{code:`const sphere = await Sphere.init({
  mode: 'trusted',
  mnemonic: 'your seed phrase...'
});`})]}),jsxRuntimeExports.jsxs("div",{className:"bg-neutral-50 dark:bg-neutral-800 rounded-xl p-4 border border-neutral-200 dark:border-neutral-700",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium mb-2 text-violet-600 dark:text-violet-400",children:"Untrusted Mode"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mb-3",children:"For server agents - transactions are tunneled to the browser for signing."}),jsxRuntimeExports.jsx(CodeBlock,{code:`const sphere = await Sphere.init({
  mode: 'untrusted',
  remoteUnicityId: 'unicity:0x8f3a...'
});`})]})]})]}),jsxRuntimeExports.jsxs("div",{id:"addresses","data-section":"addresses",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Unicity Addresses"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Every identity on the Unicity network has a unique address derived from their public key. Addresses follow the format:"}),jsxRuntimeExports.jsx(CodeBlock,{code:"unicity:0x{40-character-hex}",filename:"format"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-600 dark:text-neutral-400 mt-4",children:["Example: ",jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"unicity:0x8f3a7b2c1d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a"})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-4",children:"Addresses are deterministic - the same keypair will always produce the same address. This allows for trustless identity verification across the network."})]}),jsxRuntimeExports.jsxs("div",{id:"nametags","data-section":"nametags",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Nametags (@username)"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Nametags are human-readable aliases for Unicity addresses. Instead of using long hex addresses, you can use simple usernames:"}),jsxRuntimeExports.jsx(CodeBlock,{code:`// Using nametag instead of hex address
await sphere.send("USDC", 100, "@alice");

// Both work the same:
await sphere.send("USDC", 100, "unicity:0x8f3a7b2c...");
await sphere.send("USDC", 100, "@alice");`,filename:"nametags.ts"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mt-4",children:"Nametags are resolved via the Unicity registry and are globally unique. Register your nametag once to use it across all applications."})]}),jsxRuntimeExports.jsxs("div",{id:"token-model","data-section":"token-model",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Token Model"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Tokens on Unicity are cryptographic assets that can represent any value: currencies, collectibles, tickets, or any other asset class. Key features:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-neutral-600 dark:text-neutral-400 space-y-2",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Instant settlement"})," - no waiting for block confirmations"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"No gas fees"})," - transactions are off-chain with on-chain finality"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Atomic transfers"})," - transfers either complete fully or not at all"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"P2P native"})," - send directly to recipients without intermediaries"]})]})]})]}),jsxRuntimeExports.jsxs("section",{id:"api-reference","data-section":"api-reference",className:"mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 pb-2 border-b border-neutral-200 dark:border-neutral-700",children:"API Reference"}),jsxRuntimeExports.jsxs("div",{id:"api-init","data-section":"api-init",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"Sphere.init(options)"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Initializes a new Sphere instance with the provided configuration. This is the entry point for all SDK operations."}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Signature"}),jsxRuntimeExports.jsx(CodeBlock,{code:"static async init(options: InitOptions): Promise<Sphere>"}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Parameters"}),jsxRuntimeExports.jsx(ParamTable,{params:[{name:"mode",type:"'trusted' | 'untrusted'",description:"Determines key management strategy",required:!0},{name:"mnemonic",type:"string",description:"BIP39 mnemonic phrase (required for trusted mode)"},{name:"remoteUnicityId",type:"string",description:"Remote signing address (required for untrusted mode)"},{name:"addressIndex",type:"number",description:"BIP44 derivation index (default: 0)"}]}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Returns"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:[jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"Promise<Sphere>"})," - A configured Sphere instance ready for operations."]}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Example"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"init-example.ts",code:`import { Sphere } from '@agentsphere/sdk';

// Trusted mode - browser with local keys
const sphere = await Sphere.init({
  mode: 'trusted',
  mnemonic: 'abandon badge cable drama eager fabric ...',
  addressIndex: 0
});

console.log(sphere.address); // "unicity:0x8f3a7b2c..."

// Untrusted mode - server agent with remote signing
const serverSphere = await Sphere.init({
  mode: 'untrusted',
  remoteUnicityId: 'unicity:0x8f3a7b2c...'
});`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Related"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-600 dark:text-neutral-400",children:[jsxRuntimeExports.jsx("button",{onClick:()=>l("api-send"),className:"text-orange-600 dark:text-orange-400 hover:underline",children:"sphere.send()"}),","," ",jsxRuntimeExports.jsx("button",{onClick:()=>l("api-getbalance"),className:"text-orange-600 dark:text-orange-400 hover:underline",children:"sphere.getBalance()"})]})]}),jsxRuntimeExports.jsxs("div",{id:"api-send","data-section":"api-send",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.send(token, amount, recipient)"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Sends tokens to a recipient. Supports both nametags (@username) and raw Unicity addresses."}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Signature"}),jsxRuntimeExports.jsx(CodeBlock,{code:"async send(token: string, amount: number, recipient: string): Promise<TransferResult>"}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Parameters"}),jsxRuntimeExports.jsx(ParamTable,{params:[{name:"token",type:"string",description:'Token symbol (e.g., "USDC", "ALPHA")',required:!0},{name:"amount",type:"number",description:"Amount to send",required:!0},{name:"recipient",type:"string",description:"@nametag or unicity:0x... address",required:!0}]}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Returns"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-2",children:jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"Promise<TransferResult>"})}),jsxRuntimeExports.jsx(CodeBlock,{code:`interface TransferResult {
  txId: string;          // Transaction ID
  status: 'success' | 'pending' | 'failed';
  timestamp: number;     // Unix timestamp
  inclusionProof?: string; // Proof of inclusion in aggregator
}`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Example"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"send-example.ts",code:`// Send using nametag
const result = await sphere.send("USDC", 100, "@merchant");
console.log(\`Transaction \${result.txId} - \${result.status}\`);

// Send using raw address
await sphere.send("ALPHA", 50, "unicity:0x8f3a7b2c1d4e5f6a...");

// Send with error handling
try {
  await sphere.send("USDC", 1000, "@seller");
} catch (error) {
  if (error.code === 'INSUFFICIENT_BALANCE') {
    console.log('Not enough tokens');
  }
}`})]}),jsxRuntimeExports.jsxs("div",{id:"api-getbalance","data-section":"api-getbalance",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.getBalance(token?)"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Retrieves the balance for a specific token or all tokens."}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Signature"}),jsxRuntimeExports.jsx(CodeBlock,{code:"async getBalance(token?: string): Promise<Balance | BalanceMap>"}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Parameters"}),jsxRuntimeExports.jsx(ParamTable,{params:[{name:"token",type:"string",description:"Token symbol. If omitted, returns all balances."}]}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Returns"}),jsxRuntimeExports.jsx(CodeBlock,{code:`// Single token
interface Balance {
  token: string;
  amount: number;
  available: number;  // Amount not in escrow
  escrowed: number;   // Amount in active escrows
}

// All tokens
type BalanceMap = Record<string, Balance>;`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Example"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"balance-example.ts",code:'// Get specific token balance\nconst usdcBalance = await sphere.getBalance("USDC");\nconsole.log(`USDC: ${usdcBalance.amount} (available: ${usdcBalance.available})`);\n\n// Get all balances\nconst allBalances = await sphere.getBalance();\nfor (const [token, balance] of Object.entries(allBalances)) {\n  console.log(`${token}: ${balance.amount}`);\n}'})]}),jsxRuntimeExports.jsxs("div",{id:"api-on-receive","data-section":"api-on-receive",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.on.receive(callback)"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Subscribes to incoming token transfers. The callback is invoked whenever tokens are received."}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Signature"}),jsxRuntimeExports.jsx(CodeBlock,{code:"on.receive(callback: (transfer: IncomingTransfer) => void): Unsubscribe"}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Callback Parameter"}),jsxRuntimeExports.jsx(CodeBlock,{code:`interface IncomingTransfer {
  txId: string;       // Transaction ID
  token: string;      // Token symbol
  amount: number;     // Amount received
  from: string;       // Sender's Unicity address
  fromNametag?: string; // Sender's nametag if available
  timestamp: number;  // Unix timestamp
}`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Returns"}),jsxRuntimeExports.jsxs("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:[jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"Unsubscribe"})," - Function to call to stop listening."]}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Example"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"receive-example.ts",code:`// Listen for incoming transfers
const unsubscribe = sphere.on.receive((transfer) => {
  console.log(\`Received \${transfer.amount} \${transfer.token}\`);
  console.log(\`From: \${transfer.fromNametag || transfer.from}\`);

  // Auto-acknowledge
  if (transfer.amount > 100) {
    sphere.msg(transfer.from, { type: 'thanks', for: transfer.txId });
  }
});

// Later, stop listening
unsubscribe();`})]}),jsxRuntimeExports.jsxs("div",{id:"api-escrow","data-section":"api-escrow",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold mb-4",children:[jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.escrow(options)"}),jsxRuntimeExports.jsx(InPreparationBadge,{})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Creates an escrow for conditional token transfers. Funds are locked until release conditions are met."}),jsxRuntimeExports.jsx("div",{className:"bg-purple-50 dark:bg-purple-500/10 border border-purple-200 dark:border-purple-500/30 rounded-xl p-4 mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"This feature is under active development and will be available soon."})}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Proposed Signature"}),jsxRuntimeExports.jsx(CodeBlock,{code:"async escrow(options: EscrowOptions): Promise<Escrow>"}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Proposed Parameters"}),jsxRuntimeExports.jsx(ParamTable,{params:[{name:"token",type:"string",description:"Token symbol",required:!0},{name:"amount",type:"number",description:"Amount to escrow",required:!0},{name:"to",type:"string",description:"Recipient address or nametag",required:!0},{name:"releaseCondition",type:"string",description:"Condition for release"},{name:"expiresAt",type:"number",description:"Expiration timestamp"}]}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Proposed Usage"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"escrow-example.ts",code:`// Create an escrow
const escrow = await sphere.escrow({
  token: "USDC",
  amount: 5000,
  to: "@seller",
  releaseCondition: "delivery_confirmed",
  expiresAt: Date.now() + 7 * 24 * 60 * 60 * 1000 // 7 days
});

// Release funds when condition is met
await escrow.release();

// Or refund if needed
await escrow.refund();

// Check escrow status
console.log(escrow.status); // 'active' | 'released' | 'refunded' | 'expired'`})]}),jsxRuntimeExports.jsxs("div",{id:"api-msg","data-section":"api-msg",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.msg(recipient, payload)"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Sends an encrypted P2P message to a recipient via Nostr. Messages can contain structured data."}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Signature"}),jsxRuntimeExports.jsx(CodeBlock,{code:"async msg(recipient: string, payload: object): Promise<void>"}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Parameters"}),jsxRuntimeExports.jsx(ParamTable,{params:[{name:"recipient",type:"string",description:"@nametag or unicity:0x... address",required:!0},{name:"payload",type:"object",description:"Structured message data",required:!0}]}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Example"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"msg-example.ts",code:`// Send an offer
await sphere.msg("@alice", {
  type: "offer",
  item: "PSA-10-charizard",
  price: 12000,
  currency: "USDC",
  validUntil: Date.now() + 3600000 // 1 hour
});

// Send order confirmation
await sphere.msg("@buyer", {
  type: "order_confirmed",
  orderId: "ORD-12345",
  estimatedDelivery: "2025-01-15"
});`})]}),jsxRuntimeExports.jsxs("div",{id:"api-on-msg","data-section":"api-on-msg",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.on.msg(callback)"})}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Subscribes to incoming messages. Messages are end-to-end encrypted via NIP-17."}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Signature"}),jsxRuntimeExports.jsx(CodeBlock,{code:"on.msg(callback: (msg: IncomingMessage) => void): Unsubscribe"}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Callback Parameter"}),jsxRuntimeExports.jsx(CodeBlock,{code:`interface IncomingMessage {
  from: string;        // Sender's Unicity address
  fromNametag?: string; // Sender's nametag if available
  payload: object;     // Message content
  timestamp: number;   // Unix timestamp
}`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Example"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"on-msg-example.ts",code:`sphere.on.msg(async (msg) => {
  console.log(\`Message from \${msg.fromNametag || msg.from}\`);

  if (msg.payload.type === "offer") {
    // Evaluate and respond to offer
    if (msg.payload.price >= 10000) {
      await sphere.msg(msg.from, { type: "accepted", offerId: msg.payload.id });
      // Proceed with payment
    } else {
      await sphere.msg(msg.from, { type: "rejected", reason: "price_too_low" });
    }
  }
});`})]}),jsxRuntimeExports.jsxs("div",{id:"api-intent","data-section":"api-intent",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold mb-4",children:[jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.intent(action, params)"}),jsxRuntimeExports.jsx(InPreparationBadge,{})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Registers a high-level intent for autonomous matching with other agents or services."}),jsxRuntimeExports.jsx("div",{className:"bg-purple-50 dark:bg-purple-500/10 border border-purple-200 dark:border-purple-500/30 rounded-xl p-4 mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"This feature is under active development and will be available soon."})}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Proposed Usage"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"intent-example.ts",code:`// Register a buying intent
const intent = await sphere.intent("buy", {
  category: "tickets",
  event: "World Cup 2026",
  maxPrice: 2000,
  currency: "USDC"
});

// Handle matches
intent.onMatch((match) => {
  console.log(\`Found: \${match.description} - \${match.price} \${match.currency}\`);
  match.approve(); // Auto-execute the match
});

// Cancel the intent
await intent.cancel();`})]}),jsxRuntimeExports.jsxs("div",{id:"api-discover","data-section":"api-discover",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold mb-4",children:[jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.discover(query)"}),jsxRuntimeExports.jsx(InPreparationBadge,{})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Discovers agents or services that match a given query."}),jsxRuntimeExports.jsx("div",{className:"bg-purple-50 dark:bg-purple-500/10 border border-purple-200 dark:border-purple-500/30 rounded-xl p-4 mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"This feature is under active development and will be available soon."})}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Proposed Usage"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"discover-example.ts",code:`// Discover ticket resellers
const sellers = await sphere.discover("ticket resellers", {
  category: "sports",
  rating: { min: 4.5 }
});

console.log(\`Found \${sellers.length} sellers\`);
sellers.forEach(seller => {
  console.log(\`\${seller.nametag}: \${seller.description}\`);
});`})]}),jsxRuntimeExports.jsxs("div",{id:"api-invoke","data-section":"api-invoke",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold mb-4",children:[jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.invoke(agentId, action, params)"}),jsxRuntimeExports.jsx(InPreparationBadge,{})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Directly invokes an action on another agent or service."}),jsxRuntimeExports.jsx("div",{className:"bg-purple-50 dark:bg-purple-500/10 border border-purple-200 dark:border-purple-500/30 rounded-xl p-4 mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"This feature is under active development and will be available soon."})}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Proposed Usage"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"invoke-example.ts",code:`// Invoke a specific seller
const result = await sphere.invoke("@ticket-dealer", "buy", {
  item: "World Cup final ticket",
  maxPrice: 2000,
  currency: "USDC"
});

if (result.status === "success") {
  console.log(\`Purchased ticket: \${result.ticketId}\`);
}`})]}),jsxRuntimeExports.jsxs("div",{id:"api-advertise","data-section":"api-advertise",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold mb-4",children:[jsxRuntimeExports.jsx("code",{className:"text-amber-600 dark:text-amber-400",children:"sphere.advertise(capabilities)"}),jsxRuntimeExports.jsx(InPreparationBadge,{})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Advertises your agent's capabilities for discovery by other agents."}),jsxRuntimeExports.jsx("div",{className:"bg-purple-50 dark:bg-purple-500/10 border border-purple-200 dark:border-purple-500/30 rounded-xl p-4 mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"This feature is under active development and will be available soon."})}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Proposed Usage"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"advertise-example.ts",code:`// Advertise as a collectibles seller
sphere.advertise({
  capabilities: ["sell_collectibles", "buy_collectibles"],
  categories: ["trading-cards", "sports-memorabilia"],
  fee: { currency: "USDC", percent: 2.5 },
  description: "Verified seller of rare trading cards and memorabilia"
});`})]})]}),jsxRuntimeExports.jsxs("section",{id:"guides","data-section":"guides",className:"mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 pb-2 border-b border-neutral-200 dark:border-neutral-700",children:"Guides"}),jsxRuntimeExports.jsxs("div",{id:"guide-marketplace","data-section":"guide-marketplace",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Building a Marketplace"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"This guide shows you how to build a complete P2P marketplace with listings, offers, negotiation, and escrow - all in about 25 lines of code."}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Step 1: Initialize Your Agent"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"marketplace.ts",code:`import { Sphere } from '@agentsphere/sdk';

const sphere = await Sphere.init({
  mode: 'trusted',
  mnemonic: process.env.WALLET_MNEMONIC
});

console.log(\`Marketplace agent ready: \${sphere.address}\`);`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Step 2: Create Listings"}),jsxRuntimeExports.jsx(CodeBlock,{code:`async function createListing(item: string, price: number, currency: string) {
  const listing = {
    id: crypto.randomUUID(),
    item,
    price,
    currency,
    seller: sphere.address,
    createdAt: Date.now()
  };

  // Store listing (use your preferred storage)
  await saveListing(listing);

  return listing;
}

// Create a listing
const listing = await createListing("PSA-10 Charizard", 12000, "USDC");`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Step 3: Handle Offers"}),jsxRuntimeExports.jsx(CodeBlock,{code:`sphere.on.msg(async (msg) => {
  if (msg.payload.type === "offer") {
    const listing = await getListing(msg.payload.listingId);

    if (msg.payload.price >= listing.price) {
      // Accept the offer
      await sphere.msg(msg.from, {
        type: "accepted",
        listingId: listing.id,
        price: msg.payload.price
      });
    } else {
      // Counter-offer or reject
      await sphere.msg(msg.from, {
        type: "counter",
        listingId: listing.id,
        price: listing.price * 0.95 // 5% discount
      });
    }
  }
});`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Step 4: Complete the Sale"}),jsxRuntimeExports.jsx(CodeBlock,{code:`sphere.on.receive(async (transfer) => {
  // Check if this is for a pending sale
  const sale = await getPendingSale(transfer.from);

  if (sale && transfer.amount >= sale.price) {
    // Payment received - finalize the sale
    await finalizeSale(sale);

    // Send confirmation
    await sphere.msg(transfer.from, {
      type: "sale_complete",
      orderId: sale.id,
      item: sale.item
    });
  }
});`}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-lg mt-6 mb-3",children:"Complete Example"}),jsxRuntimeExports.jsx(CodeBlock,{filename:"marketplace.ts",code:`// Initialize with your keypair (no API key needed!)
const sphere = await Sphere.init({
  mode: 'trusted',
  mnemonic: process.env.WALLET_MNEMONIC
});

// Create a listing
async function list(item, price) {
  return sphere.listing.create({ item, price, seller: sphere.address });
}

// Make an offer
async function offer(listingId, price) {
  const listing = await sphere.listing.get(listingId);
  await sphere.msg(listing.seller, { type: "offer", listing: listingId, price });
}

// Handle offers automatically
sphere.on.msg(async (msg) => {
  if (msg.type === "offer" && msg.price >= listing.price) {
    await sphere.escrow({ token: "USDC", amount: msg.price, to: sphere.address });
    await sphere.msg(msg.from, { type: "accepted" });
  }
});

// That's it. You have a marketplace.`})]}),jsxRuntimeExports.jsxs("div",{id:"guide-agent-communication","data-section":"guide-agent-communication",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Agent-to-Agent Communication",jsxRuntimeExports.jsx(InPreparationBadge,{})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Learn how to build AI agents that communicate, negotiate, and transact with each other autonomously."}),jsxRuntimeExports.jsx("div",{className:"bg-purple-50 dark:bg-purple-500/10 border border-purple-200 dark:border-purple-500/30 rounded-xl p-4",children:jsxRuntimeExports.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"This guide is under active development and will be available soon."})})]}),jsxRuntimeExports.jsxs("div",{id:"guide-security","data-section":"guide-security",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Security Best Practices",jsxRuntimeExports.jsx(InPreparationBadge,{})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Essential security practices for building production applications with the Sphere SDK."}),jsxRuntimeExports.jsx("div",{className:"bg-purple-50 dark:bg-purple-500/10 border border-purple-200 dark:border-purple-500/30 rounded-xl p-4",children:jsxRuntimeExports.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"This guide is under active development and will be available soon."})})]})]}),jsxRuntimeExports.jsxs("section",{id:"examples","data-section":"examples",className:"mb-16",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-6 pb-2 border-b border-neutral-200 dark:border-neutral-700",children:"Examples"}),jsxRuntimeExports.jsxs("div",{id:"example-payment","data-section":"example-payment",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Simple Payment"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"A minimal example showing how to send and receive payments."}),jsxRuntimeExports.jsx(CodeBlock,{filename:"simple-payment.ts",code:`import { Sphere } from '@agentsphere/sdk';

async function main() {
  // Initialize
  const sphere = await Sphere.init({
    mode: 'trusted',
    mnemonic: process.env.MNEMONIC
  });

  // Check balance
  const balance = await sphere.getBalance("USDC");
  console.log(\`USDC Balance: \${balance.amount}\`);

  // Send payment
  if (balance.amount >= 100) {
    const result = await sphere.send("USDC", 100, "@recipient");
    console.log(\`Sent! Transaction: \${result.txId}\`);
  }

  // Listen for incoming payments
  sphere.on.receive((transfer) => {
    console.log(\`Received \${transfer.amount} \${transfer.token} from \${transfer.from}\`);
  });
}

main();`})]}),jsxRuntimeExports.jsxs("div",{id:"example-marketplace","data-section":"example-marketplace",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-4",children:"P2P Marketplace"}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"A complete peer-to-peer marketplace with listings, offers, and automatic negotiation."}),jsxRuntimeExports.jsx(CodeBlock,{filename:"p2p-marketplace.ts",code:`import { Sphere } from '@agentsphere/sdk';

interface Listing {
  id: string;
  item: string;
  price: number;
  currency: string;
  seller: string;
}

const listings: Map<string, Listing> = new Map();

async function main() {
  const sphere = await Sphere.init({
    mode: 'trusted',
    mnemonic: process.env.MNEMONIC
  });

  // Create a listing
  function createListing(item: string, price: number) {
    const listing: Listing = {
      id: crypto.randomUUID(),
      item,
      price,
      currency: "USDC",
      seller: sphere.address
    };
    listings.set(listing.id, listing);
    console.log(\`Created listing: \${item} for \${price} USDC\`);
    return listing;
  }

  // Handle incoming offers
  sphere.on.msg(async (msg) => {
    const payload = msg.payload as any;

    switch (payload.type) {
      case "offer":
        const listing = listings.get(payload.listingId);
        if (!listing) return;

        if (payload.price >= listing.price) {
          await sphere.msg(msg.from, {
            type: "accepted",
            listingId: listing.id,
            price: payload.price
          });
        } else if (payload.price >= listing.price * 0.9) {
          // Accept offers within 10%
          await sphere.msg(msg.from, {
            type: "counter",
            listingId: listing.id,
            price: listing.price * 0.95
          });
        } else {
          await sphere.msg(msg.from, {
            type: "rejected",
            listingId: listing.id,
            reason: "Price too low"
          });
        }
        break;

      case "accepted":
        console.log(\`Offer accepted! Sending payment...\`);
        await sphere.send("USDC", payload.price, msg.from);
        break;
    }
  });

  // Handle payments
  sphere.on.receive(async (transfer) => {
    console.log(\`Payment received: \${transfer.amount} \${transfer.token}\`);
    await sphere.msg(transfer.from, {
      type: "payment_confirmed",
      amount: transfer.amount,
      txId: transfer.txId
    });
  });

  // Example: Create some listings
  createListing("Vintage Rolex Submariner", 15000);
  createListing("PSA-10 Charizard", 12000);

  console.log("Marketplace running...");
}

main();`})]}),jsxRuntimeExports.jsxs("div",{id:"example-ai-agent","data-section":"example-ai-agent",className:"scroll-mt-24 mb-12",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["AI Agent Integration",jsxRuntimeExports.jsx(InPreparationBadge,{})]}),jsxRuntimeExports.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 mb-4",children:"Build an AI agent that can autonomously trade and negotiate on behalf of users."}),jsxRuntimeExports.jsx("div",{className:"bg-purple-50 dark:bg-purple-500/10 border border-purple-200 dark:border-purple-500/30 rounded-xl p-4",children:jsxRuntimeExports.jsx("p",{className:"text-purple-700 dark:text-purple-400 text-sm",children:"This example is under active development and will be available soon."})})]})]}),jsxRuntimeExports.jsxs("footer",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-8 mt-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-6 text-sm text-neutral-600 dark:text-neutral-400 mb-6",children:[jsxRuntimeExports.jsx("a",{href:"https://discord.gg/S9f57ZKdt",target:"_blank",rel:"noopener noreferrer",className:"hover:text-orange-500 transition",children:"Discord"}),jsxRuntimeExports.jsx("a",{href:"https://github.com/unicitynetwork",target:"_blank",rel:"noopener noreferrer",className:"hover:text-orange-500 transition",children:"GitHub"}),jsxRuntimeExports.jsx(Link$1,{to:"/developers",className:"hover:text-orange-500 transition",children:"Developer Portal"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-neutral-500",children:"AgentSphere by Unicity Labs"})]})]})]})}const APPROVED_SESSIONS_KEY="sphere-connect:approved";function getApprovedSession(t){try{const e=localStorage.getItem(APPROVED_SESSIONS_KEY);return e?JSON.parse(e).find(r=>r.origin===t)??null:null}catch{return null}}function saveApprovedSession(t){try{const e=localStorage.getItem(APPROVED_SESSIONS_KEY),s=e?JSON.parse(e):[],r=s.findIndex(a=>a.origin===t.origin);r>=0?s[r]=t:s.push(t),localStorage.setItem(APPROVED_SESSIONS_KEY,JSON.stringify(s))}catch{}}function ConnectPage(){const[t]=useSearchParams(),e=t.get("origin"),{sphere:s,isLoading:r}=useSphereContext(),{requestApproval:a,requestIntent:o,setConnectHost:l}=useConnectContext(),c=reactExports.useRef(null),u=reactExports.useRef(null),[f,d]=reactExports.useState("waiting"),[p,m]=reactExports.useState(""),[y,b]=reactExports.useState(null),E=reactExports.useRef(s);E.current=s;const C=reactExports.useRef(a);C.current=a;const j=reactExports.useRef(o);j.current=o;const B=!r&&!!s,D=reactExports.useRef(!1);return reactExports.useEffect(()=>{if(!B||D.current)return;if(!e){d("error"),m("Missing origin parameter");return}if(!window.opener){d("error"),m("This page must be opened as a popup from a dApp");return}D.current=!0;const F=E.current,q=PostMessageTransport.forHost(window.opener,{allowedOrigins:[e]});u.current=q;const V=new ConnectHost({sphere:F,transport:q,onConnectionRequest:async(ee,Q)=>{const W=getApprovedSession(e);if(W)return b(W.dappName),{approved:!0,grantedPermissions:W.permissions};const Z=await C.current(ee,Q);return Z.approved&&(b(ee.name),saveApprovedSession({origin:e,dappName:ee.name,permissions:Z.grantedPermissions,approvedAt:Date.now()})),Z},onIntent:(ee,Q)=>j.current(ee,Q)});c.current=V,l(V),d("ready");try{window.opener.postMessage({type:HOST_READY_TYPE},e)}catch{try{window.opener.postMessage({type:HOST_READY_TYPE},"*")}catch{}}},[B,e]),jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-neutral-950 dark:to-neutral-900 flex flex-col items-center p-4 pt-8",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[f==="ready"&&jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl border border-gray-200 dark:border-neutral-700 p-3 shadow-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300",children:y?`Connected to ${y}`:"Ready for connections"})]}),e&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400 dark:text-neutral-500 mt-1",children:["Origin: ",jsxRuntimeExports.jsx("span",{className:"font-mono",children:e})]})]}),f==="error"&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-2xl border border-red-200 dark:border-red-800 p-4 text-center text-red-600 dark:text-red-400 text-sm",children:p}),jsxRuntimeExports.jsx("div",{className:"h-[520px]",children:jsxRuntimeExports.jsx(WalletPanel,{})}),f==="ready"&&jsxRuntimeExports.jsx("p",{className:"text-xs text-center text-gray-400 dark:text-neutral-500 px-4",children:"You can close this window. It will re-open automatically when the dApp needs your wallet."})]})})}function App(){return useSphereEvents(),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(IntroPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/connect",element:jsxRuntimeExports.jsx(ConnectPage,{})}),jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(DashboardLayout,{}),children:[jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsx(Navigate,{to:"/agents/chat",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/agents/:agentId",element:jsxRuntimeExports.jsx(AgentPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/ai",element:jsxRuntimeExports.jsx(Navigate,{to:"/agents/ai",replace:!0})}),jsxRuntimeExports.jsx(Route,{path:"/developers",element:jsxRuntimeExports.jsx(DevelopersPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/mine",element:jsxRuntimeExports.jsx(MineAlphaPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/developers/docs",element:jsxRuntimeExports.jsx(DocsPage,{})})]})]})}const queryClient=new QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}});window.__TANSTACK_QUERY_CLIENT__=queryClient;const ServicesProvider=({children:t})=>{const[e,s]=reactExports.useState(!1),{sphere:r}=useSphereContext(),a=r?.groupChat??null;reactExports.useEffect(()=>{if(!a||!r)return;a.connect().then(()=>{s(a.getConnectionStatus())}).catch(c=>{console.error("[ServicesProvider] Group chat connect failed:",c)});const l=r.on("groupchat:connection",c=>{s(c.connected)});return()=>{l()}},[a,r]);const o=reactExports.useMemo(()=>({groupChat:a,isGroupChatConnected:e}),[a,e]);return jsxRuntimeExports.jsx(ServicesContext.Provider,{value:o,children:t})},PERMISSION_LABELS={[PERMISSION_SCOPES.IDENTITY_READ]:"View identity",[PERMISSION_SCOPES.BALANCE_READ]:"View balance",[PERMISSION_SCOPES.TOKENS_READ]:"View tokens",[PERMISSION_SCOPES.HISTORY_READ]:"View history",[PERMISSION_SCOPES.L1_READ]:"View L1 data",[PERMISSION_SCOPES.EVENTS_SUBSCRIBE]:"Subscribe to events",[PERMISSION_SCOPES.RESOLVE_PEER]:"Resolve addresses",[PERMISSION_SCOPES.TRANSFER_REQUEST]:"Request transfers",[PERMISSION_SCOPES.L1_TRANSFER]:"Request L1 transfers",[PERMISSION_SCOPES.DM_REQUEST]:"Send direct messages",[PERMISSION_SCOPES.DM_READ]:"Read direct messages",[PERMISSION_SCOPES.PAYMENT_REQUEST]:"Payment requests",[PERMISSION_SCOPES.SIGN_REQUEST]:"Sign messages"};function ConnectionApprovalModal(){const{pendingApproval:t,approveConnection:e,denyConnection:s}=useConnectContext(),[r,a]=reactExports.useState(new Set);if(!t)return null;const{dapp:o,permissions:l}=t;if(r.size===0&&l.length>0){const d=new Set(l);d.add(PERMISSION_SCOPES.IDENTITY_READ),a(d)}const c=d=>{d!==PERMISSION_SCOPES.IDENTITY_READ&&a(p=>{const m=new Set(p);return m.has(d)?m.delete(d):m.add(d),m})},u=()=>{e([...r]),a(new Set)},f=()=>{s(),a(new Set)};return jsxRuntimeExports.jsxs(BaseModal,{isOpen:!0,onClose:f,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"Connect dApp",subtitle:o.url,icon:Plug,onClose:f}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 px-6 py-5 overflow-y-auto flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-5 p-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-xl",children:[o.icon&&jsxRuntimeExports.jsx("img",{src:o.icon,alt:"",className:"w-10 h-10 rounded-lg"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-neutral-900 dark:text-white",children:o.name}),o.description&&jsxRuntimeExports.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:o.description})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Shield,{className:"w-4 h-4 text-neutral-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Permissions"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:l.map(d=>{const p=d===PERMISSION_SCOPES.IDENTITY_READ;return jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 p-2.5 rounded-lg hover:bg-neutral-50 dark:hover:bg-neutral-800/30 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:r.has(d),onChange:()=>c(d),disabled:p,className:"w-4 h-4 rounded accent-orange-500"}),jsxRuntimeExports.jsx("span",{className:`text-sm ${p?"text-neutral-400":"text-neutral-700 dark:text-neutral-300"}`,children:PERMISSION_LABELS[d]??d}),p&&jsxRuntimeExports.jsx("span",{className:"text-xs text-neutral-400 ml-auto",children:"Always granted"})]},d)})})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 px-6 py-4 border-t border-neutral-200/50 dark:border-neutral-700/50 flex gap-3 shrink-0",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",fullWidth:!0,onClick:f,children:"Deny"}),jsxRuntimeExports.jsx(Button,{variant:"success",fullWidth:!0,onClick:u,children:"Connect"})]})]})}function ConnectIntentHandler(){const{pendingIntent:t,resolveIntent:e,rejectIntent:s,connectHost:r}=useConnectContext(),{sendDM:a,isLoading:o}=useSendDM(),[l,c]=reactExports.useState(null),[u,f]=reactExports.useState(!1),{l1Address:d}=useIdentity(),{balance:p}=useL1Balance(),{send:m,estimateFee:y,resolveAddress:b}=useL1Send(),E=p?{vested:BigInt(p.vested),unvested:BigInt(p.unvested),all:BigInt(p.total)}:{vested:0n,unvested:0n,all:0n},C=reactExports.useCallback(async(q,V)=>{const ee=Number(V);if(isNaN(ee)||ee<=0)throw new Error("Invalid amount");const Q=Math.round(ee*1e8).toString();await m({toAddress:q,amount:Q})},[m]),j=reactExports.useRef(a);if(j.current=a,!t)return null;const{action:B,params:D}=t,F=()=>{s(ERROR_CODES.USER_REJECTED,"User cancelled")};if(B==="send")return jsxRuntimeExports.jsx(SendModal$1,{isOpen:!0,onClose:q=>{q?.success?e({success:!0}):s(ERROR_CODES.USER_REJECTED,"User cancelled")},prefill:{to:D.to,amount:D.amount,coinId:D.coinId??"UCT",memo:D.memo}});if(B==="payment_request")return jsxRuntimeExports.jsx(SendPaymentRequestModal,{isOpen:!0,onClose:q=>{q?.success?e({success:!0,requestId:q.requestId}):s(ERROR_CODES.USER_REJECTED,"User cancelled")},prefill:{to:D.to,amount:D.amount,coinId:D.coinId??"UCT",message:D.message}});if(B==="l1_send"){const q=D.to,V=D.amount;let ee=V;return V&&/^\d+$/.test(V)&&Number(V)>=1e3&&(ee=(Number(V)/1e8).toString()),jsxRuntimeExports.jsx(SendModal,{show:!0,selectedAddress:d??"",onClose:Q=>{Q?.success?e({success:!0}):s(ERROR_CODES.USER_REJECTED,"User cancelled")},onSend:C,vestingBalances:E,onEstimateFee:y,onResolveAddress:b,prefill:q?{to:q,amount:ee??""}:void 0})}if(B==="dm"){const q=D.to,V=D.message,ee=async()=>{c(null);try{const Q=await a(q,V);u&&r&&r.setIntentAutoApprove("dm",async(W,Z)=>{try{const z=await j.current(Z.to,Z.message);return{result:{sent:!0,messageId:z.id,timestamp:z.timestamp}}}catch(z){return{error:{code:ERROR_CODES.INTERNAL_ERROR,message:z instanceof Error?z.message:"DM failed"}}}}),e({sent:!0,messageId:Q.id,timestamp:Q.timestamp})}catch(Q){c(Q instanceof Error?Q.message:"Failed to send DM")}};return jsxRuntimeExports.jsxs(BaseModal,{isOpen:!0,onClose:F,showOrbs:!1,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"dApp DM Request",icon:MessageSquare,onClose:F}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-5 flex-1 flex flex-col justify-center",children:[jsxRuntimeExports.jsxs("div",{className:"bg-neutral-100 dark:bg-neutral-900 rounded-2xl p-5 mb-5 border border-neutral-200 dark:border-white/10",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-neutral-500 mb-2",children:["Send DM to ",jsxRuntimeExports.jsx("span",{className:"text-neutral-900 dark:text-white font-medium",children:q})]}),jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-neutral-800 rounded-xl p-3 text-neutral-700 dark:text-neutral-300 text-sm",children:V})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 mb-4 cursor-pointer select-none",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:u,onChange:Q=>f(Q.target.checked),className:"w-4 h-4 rounded accent-orange-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Allow this dApp to send DMs without confirmation"})]}),l&&jsxRuntimeExports.jsx("div",{className:"text-red-500 text-sm mb-3 text-center",children:l}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",fullWidth:!0,onClick:F,disabled:o,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:"primary",fullWidth:!0,disabled:o,onClick:ee,children:o?"Sending":"Send DM"})]})]})]})}return jsxRuntimeExports.jsxs(BaseModal,{isOpen:!0,onClose:F,showOrbs:!1,children:[jsxRuntimeExports.jsx(ModalHeader,{title:"Unknown Request",onClose:F}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-5 text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-neutral-500 mb-4",children:["Unsupported intent: ",jsxRuntimeExports.jsx("code",{className:"text-neutral-700 dark:text-neutral-300",children:B})]}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:F,children:"Dismiss"})]})]})}function ConnectProvider({children:t}){const[e,s]=reactExports.useState(null),[r,a]=reactExports.useState(null),o=reactExports.useRef(null),[,l]=reactExports.useState(0),c=reactExports.useCallback(E=>{o.current=E,l(C=>C+1)},[]),u=reactExports.useCallback((E,C)=>new Promise(j=>{s({dapp:E,permissions:C,resolve:j})}),[]),f=reactExports.useCallback((E,C)=>new Promise(j=>{a({action:E,params:C,resolve:j})}),[]),d=reactExports.useCallback(E=>{e?.resolve({approved:!0,grantedPermissions:E}),s(null)},[e]),p=reactExports.useCallback(()=>{e?.resolve({approved:!1,grantedPermissions:[]}),s(null)},[e]),m=reactExports.useCallback(E=>{r?.resolve({result:E}),a(null)},[r]),y=reactExports.useCallback((E,C)=>{r?.resolve({error:{code:E,message:C}}),a(null)},[r]),b={requestApproval:u,requestIntent:f,pendingApproval:e,pendingIntent:r,approveConnection:d,denyConnection:p,resolveIntent:m,rejectIntent:y,connectHost:o.current,setConnectHost:c};return jsxRuntimeExports.jsxs(ConnectContext.Provider,{value:b,children:[t,jsxRuntimeExports.jsx(ConnectionApprovalModal,{}),jsxRuntimeExports.jsx(ConnectIntentHandler,{})]})}const icons={info:jsxRuntimeExports.jsx(Info,{className:"w-5 h-5"}),success:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5"}),warning:jsxRuntimeExports.jsx(TriangleAlert,{className:"w-5 h-5"}),error:jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5"})},colors={info:"bg-blue-500/90 border-blue-400",success:"bg-green-500/90 border-green-400",warning:"bg-yellow-500/90 border-yellow-400",error:"bg-red-500/90 border-red-400"};function ToastContainer(){const[t,e]=reactExports.useState([]),s=reactExports.useCallback(a=>{e(o=>o.filter(l=>l.id!==a))},[]),r=reactExports.useCallback(a=>{const o=`toast-${Date.now()}-${Math.random().toString(36).slice(2)}`,l={id:o,message:a.message,type:a.type||"info",duration:a.duration??4e3};e(c=>[...c,l]),l.duration&&l.duration>0&&setTimeout(()=>s(o),l.duration)},[s]);return reactExports.useEffect(()=>{const a=o=>{r(o.detail)};return window.addEventListener("show-toast",a),()=>{window.removeEventListener("show-toast",a)}},[r]),jsxRuntimeExports.jsx("div",{className:"fixed bottom-4 right-4 z-100001 flex flex-col gap-2 pointer-events-none",children:jsxRuntimeExports.jsx(AnimatePresence,{children:t.map(a=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`
              pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl
              border shadow-lg backdrop-blur-sm text-white min-w-70 max-w-100
              ${colors[a.type]}
            `,children:[icons[a.type],jsxRuntimeExports.jsx("span",{className:"flex-1 text-sm font-medium",children:a.message}),jsxRuntimeExports.jsx("button",{onClick:()=>s(a.id),className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]},a.id))})})}var define_process_env_default={},win;if(typeof window>"u"){var loc={hostname:""};win={crypto:{randomUUID:function(){throw Error("unsupported")}},navigator:{userAgent:"",onLine:!0},document:{createElement:function(){return{}},location:loc,referrer:""},screen:{width:0,height:0},location:loc,addEventListener:function(){},removeEventListener:function(){},dispatchEvent:function(){},CustomEvent:function(){}}}else win=window;function _array_like_to_array(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,r=new Array(e);s<e;s++)r[s]=t[s];return r}function asyncGeneratorStep(t,e,s,r,a,o,l){try{var c=t[o](l),u=c.value}catch(f){s(f);return}c.done?e(u):Promise.resolve(u).then(r,a)}function _async_to_generator(t){return function(){var e=this,s=arguments;return new Promise(function(r,a){var o=t.apply(e,s);function l(u){asyncGeneratorStep(o,r,a,l,c,"next",u)}function c(u){asyncGeneratorStep(o,r,a,l,c,"throw",u)}l(void 0)})}}function _construct(t,e,s){return _is_native_reflect_construct()?_construct=Reflect.construct:_construct=function(a,o,l){var c=[null];c.push.apply(c,o);var u=Function.bind.apply(a,c),f=new u;return l&&_set_prototype_of(f,l.prototype),f},_construct.apply(null,arguments)}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _create_class(t,e,s){return e&&_defineProperties(t.prototype,e),t}function _extends(){return _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},_extends.apply(this,arguments)}function _get_prototype_of(t){return _get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},_get_prototype_of(t)}function _inherits(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_set_prototype_of(t,e)}function _instanceof(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _is_native_function(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _object_without_properties_loose(t,e){if(t==null)return{};var s={},r=Object.keys(t),a,o;for(o=0;o<r.length;o++)a=r[o],!(e.indexOf(a)>=0)&&(s[a]=t[a]);return s}function _set_prototype_of(t,e){return _set_prototype_of=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},_set_prototype_of(t,e)}function _type_of(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}function _unsupported_iterable_to_array(t,e){if(t){if(typeof t=="string")return _array_like_to_array(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(s);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _array_like_to_array(t,e)}}function _wrap_native_super(t){var e=typeof Map=="function"?new Map:void 0;return _wrap_native_super=function(r){if(r===null||!_is_native_function(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,a)}function a(){return _construct(r,arguments,_get_prototype_of(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(a,r)},_wrap_native_super(t)}function _is_native_reflect_construct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_is_native_reflect_construct=function(){return!!t})()}function _create_for_of_iterator_helper_loose(t,e){var s=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s)return(s=s.call(t)).next.bind(s);if(Array.isArray(t)||(s=_unsupported_iterable_to_array(t))||e){s&&(t=s);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _ts_generator(t,e){var s,r,a,o,l={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(f){return function(d){return u([f,d])}}function u(f){if(s)throw new TypeError("Generator is already executing.");for(;l;)try{if(s=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return l.label++,{value:f[1],done:!1};case 5:l.label++,r=f[1],f=[0];continue;case 7:f=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){l=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){l.label=f[1];break}if(f[0]===6&&l.label<a[1]){l.label=a[1],a=f;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(f);break}a[2]&&l.ops.pop(),l.trys.pop();continue}f=e.call(t,l)}catch(d){f=[6,d],r=0}finally{s=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function _ts_values(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],r=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var __defProp$1=Object.defineProperty,__defNormalProp$1=function(t,e,s){return e in t?__defProp$1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s},__publicField$1=function(t,e,s){return __defNormalProp$1(t,(typeof e>"u"?"undefined":_type_of(e))!=="symbol"?e+"":e,s)},_a,__defProp$1$1=Object.defineProperty,__defNormalProp$1$1=function(t,e,s){return e in t?__defProp$1$1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s},__publicField$1$1=function(t,e,s){return __defNormalProp$1$1(t,(typeof e>"u"?"undefined":_type_of(e))!=="symbol"?e+"":e,s)},NodeType$3=(function(t){return t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t})(NodeType$3||{}),testableAccessors$1={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},testableMethods$1={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},untaintedBasePrototype$1={},isAngularZonePresent$1=function(){return!!globalThis.Zone};function getUntaintedPrototype$1(t){if(untaintedBasePrototype$1[t])return untaintedBasePrototype$1[t];var e=globalThis[t],s=e.prototype,r=t in testableAccessors$1?testableAccessors$1[t]:void 0,a=!!(r&&r.every(function(d){var p,m;return!!((m=(p=Object.getOwnPropertyDescriptor(s,d))==null?void 0:p.get)!=null&&m.toString().includes("[native code]"))})),o=t in testableMethods$1?testableMethods$1[t]:void 0,l=!!(o&&o.every(function(d){var p;return typeof s[d]=="function"&&((p=s[d])==null?void 0:p.toString().includes("[native code]"))}));if(a&&l&&!isAngularZonePresent$1())return untaintedBasePrototype$1[t]=e.prototype,e.prototype;try{var c=document.createElement("iframe");document.body.appendChild(c);var u=c.contentWindow;if(!u)return e.prototype;var f=u[t].prototype;return document.body.removeChild(c),f?untaintedBasePrototype$1[t]=f:s}catch{return s}}var untaintedAccessorCache$1={};function getUntaintedAccessor$1(t,e,s){var r,a=t+"."+String(s);if(untaintedAccessorCache$1[a])return untaintedAccessorCache$1[a].call(e);var o=getUntaintedPrototype$1(t),l=(r=Object.getOwnPropertyDescriptor(o,s))==null?void 0:r.get;return l?(untaintedAccessorCache$1[a]=l,l.call(e)):e[s]}var untaintedMethodCache$1={};function getUntaintedMethod$1(t,e,s){var r=t+"."+String(s);if(untaintedMethodCache$1[r])return untaintedMethodCache$1[r].bind(e);var a=getUntaintedPrototype$1(t),o=a[s];return typeof o!="function"?e[s]:(untaintedMethodCache$1[r]=o,o.bind(e))}function childNodes$1(t){return getUntaintedAccessor$1("Node",t,"childNodes")}function parentNode$1(t){return getUntaintedAccessor$1("Node",t,"parentNode")}function parentElement$1(t){return getUntaintedAccessor$1("Node",t,"parentElement")}function textContent$1(t){return getUntaintedAccessor$1("Node",t,"textContent")}function contains$1(t,e){return getUntaintedMethod$1("Node",t,"contains")(e)}function getRootNode$1(t){return getUntaintedMethod$1("Node",t,"getRootNode")()}function host$1(t){return!t||!("host"in t)?null:getUntaintedAccessor$1("ShadowRoot",t,"host")}function styleSheets$1(t){return t.styleSheets}function shadowRoot$1(t){return!t||!("shadowRoot"in t)?null:getUntaintedAccessor$1("Element",t,"shadowRoot")}function querySelector$1(t,e){return getUntaintedAccessor$1("Element",t,"querySelector")(e)}function querySelectorAll$1(t,e){return getUntaintedAccessor$1("Element",t,"querySelectorAll")(e)}function mutationObserverCtor$1(){return getUntaintedPrototype$1("MutationObserver").constructor}function patch$1$1(t,e,s){try{if(!(e in t))return function(){};var r=t[e],a=s(r);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=a,function(){t[e]=r}}catch{return function(){}}}var index$1={childNodes:childNodes$1,parentNode:parentNode$1,parentElement:parentElement$1,textContent:textContent$1,contains:contains$1,getRootNode:getRootNode$1,host:host$1,styleSheets:styleSheets$1,shadowRoot:shadowRoot$1,querySelector:querySelector$1,querySelectorAll:querySelectorAll$1,mutationObserver:mutationObserverCtor$1,patch:patch$1$1};function isElement(t){return t.nodeType===t.ELEMENT_NODE}function isShadowRoot(t){var e=t&&"host"in t&&"mode"in t&&index$1.host(t)||null;return!!(e&&"shadowRoot"in e&&index$1.shadowRoot(e)===t)}function isNativeShadowDom(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function fixBrowserCompatibilityIssuesInCSS(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}function escapeImportStatement(t){var e=t.cssText;if(e.split('"').length<3)return e;var s=["@import","url("+JSON.stringify(t.href)+")"];return t.layerName===""?s.push("layer"):t.layerName&&s.push("layer("+t.layerName+")"),t.supportsText&&s.push("supports("+t.supportsText+")"),t.media.length&&s.push(t.media.mediaText),s.join(" ")+";"}function stringifyStylesheet(t){try{var e=t.rules||t.cssRules;if(!e)return null;var s=t.href;!s&&t.ownerNode&&t.ownerNode.ownerDocument&&(s=t.ownerNode.ownerDocument.location.href);var r=Array.from(e,function(a){return stringifyRule(a,s)}).join("");return fixBrowserCompatibilityIssuesInCSS(r)}catch{return null}}function stringifyRule(t,e){if(isCSSImportRule(t)){var s;try{s=stringifyStylesheet(t.styleSheet)||escapeImportStatement(t)}catch{s=t.cssText}return t.styleSheet.href?absolutifyURLs(s,t.styleSheet.href):s}else{var r=t.cssText;return isCSSStyleRule(t)&&t.selectorText.includes(":")&&(r=fixSafariColons(r)),e?absolutifyURLs(r,e):r}}function fixSafariColons(t){var e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function isCSSImportRule(t){return"styleSheet"in t}function isCSSStyleRule(t){return"selectorText"in t}var Mirror=(function(){function t(){__publicField$1$1(this,"idNodeMap",new Map),__publicField$1$1(this,"nodeMetaMap",new WeakMap)}var e=t.prototype;return e.getId=function(r){var a;if(!r)return-1;var o=(a=this.getMeta(r))==null?void 0:a.id;return o??-1},e.getNode=function(r){return this.idNodeMap.get(r)||null},e.getIds=function(){return Array.from(this.idNodeMap.keys())},e.getMeta=function(r){return this.nodeMetaMap.get(r)||null},e.removeNodeFromMap=function(r){var a=this,o=this.getId(r);this.idNodeMap.delete(o),r.childNodes&&r.childNodes.forEach(function(l){return a.removeNodeFromMap(l)})},e.has=function(r){return this.idNodeMap.has(r)},e.hasNode=function(r){return this.nodeMetaMap.has(r)},e.add=function(r,a){var o=a.id;this.idNodeMap.set(o,r),this.nodeMetaMap.set(r,a)},e.replace=function(r,a){var o=this.getNode(r);if(o){var l=this.nodeMetaMap.get(o);l&&this.nodeMetaMap.set(a,l)}this.idNodeMap.set(r,a)},e.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},t})();function createMirror$2(){return new Mirror}function maskInputValue(t){var e=t.element,s=t.maskInputOptions,r=t.tagName,a=t.type,o=t.value,l=t.maskInputFn,c=o||"",u=a&&toLowerCase(a);return(s[r.toLowerCase()]||u&&s[u])&&(l?c=l(c,e):c="*".repeat(c.length)),c}function toLowerCase(t){return t.toLowerCase()}var ORIGINAL_ATTRIBUTE_NAME="__rrweb_original__";function is2DCanvasBlank(t){var e=t.getContext("2d");if(!e)return!0;for(var s=50,r=0;r<t.width;r+=s)for(var a=0;a<t.height;a+=s){var o=e.getImageData,l=ORIGINAL_ATTRIBUTE_NAME in o?o[ORIGINAL_ATTRIBUTE_NAME]:o,c=new Uint32Array(l.call(e,r,a,Math.min(s,t.width-r),Math.min(s,t.height-a)).data.buffer);if(c.some(function(u){return u!==0}))return!1}return!0}function getInputType(t){var e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?toLowerCase(e):null}function extractFileExtension(t,e){var s;try{s=new URL(t,e??window.location.href)}catch{return null}var r=/\.([0-9a-z]+)(?:$)/i,a=s.pathname.match(r),o;return(o=a?.[1])!=null?o:null}function extractOrigin(t){var e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}var URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,URL_PROTOCOL_MATCH=/^(?:[a-z+]+:)?\/\//i,URL_WWW_MATCH=/^www\..*/i,DATA_URI=/^(data:)([^,]*),(.*)/i;function absolutifyURLs(t,e){return(t||"").replace(URL_IN_CSS_REF,function(s,r,a,o,l,c){var u=a||l||c,f=r||o||"";if(!u)return s;if(URL_PROTOCOL_MATCH.test(u)||URL_WWW_MATCH.test(u)||DATA_URI.test(u))return"url("+f+u+f+")";if(u[0]==="/")return"url("+f+(extractOrigin(e)+u)+f+")";var d=e.split("/"),p=u.split("/");d.pop();for(var m=_create_for_of_iterator_helper_loose(p),y;!(y=m()).done;){var b=y.value;b!=="."&&(b===".."?d.pop():d.push(b))}return"url("+f+d.join("/")+f+")"})}function normalizeCssString(t,e){return e===void 0&&(e=!1),e?t.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):t.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}function splitCssText(t,e,s){s===void 0&&(s=!1);var r=Array.from(e.childNodes),a=[],o=0;if(r.length>1&&t&&typeof t=="string"){for(var l=normalizeCssString(t,s),c=l.length/t.length,u=1;u<r.length;u++)if(r[u].textContent&&typeof r[u].textContent=="string"){for(var f=normalizeCssString(r[u].textContent,s),d=100,p=3;p<f.length&&(f[p].match(/[a-zA-Z0-9]/)||f.indexOf(f.substring(0,p),1)!==-1);p++);for(;p<f.length;p++){var m=f.substring(0,p),y=l.split(m),b=-1;if(y.length===2)b=y[0].length;else if(y.length>2&&y[0]===""&&r[u-1].textContent!=="")b=l.indexOf(m,1);else if(y.length===1){if(m=m.substring(0,m.length-1),y=l.split(m),y.length<=1)return a.push(t),a;p=d+1}else p===f.length-1&&(b=l.indexOf(m));if(y.length>=2&&p>d){var E=r[u-1].textContent;if(E&&typeof E=="string"){var C=normalizeCssString(E).length;b=l.indexOf(m,C)}b===-1&&(b=y[0].length)}if(b!==-1){for(var j=Math.floor(b/c);j>0&&j<t.length;){if(o+=1,o>50*r.length)return a.push(t),a;var B=normalizeCssString(t.substring(0,j),s);if(B.length===b){a.push(t.substring(0,j)),t=t.substring(j),l=l.substring(b);break}else B.length<b?j+=Math.max(1,Math.floor((b-B.length)/c)):j-=Math.max(1,Math.floor((B.length-b)*c))}break}}}}return a.push(t),a}function markCssSplits(t,e){return splitCssText(t,e).join("/* rr_split */")}var _id=1,tagNameRegex=new RegExp("[^a-z0-9-_:]"),IGNORED_NODE=-2;function genId(){return _id++}function getValidTagName$1(t){if(_instanceof(t,HTMLFormElement))return"form";var e=toLowerCase(t.tagName);return tagNameRegex.test(e)?"div":e}var canvasService,canvasCtx,SRCSET_NOT_SPACES=/^[^ \t\n\r\u000c]+/,SRCSET_COMMAS_OR_SPACES=/^[, \t\n\r\u000c]+/;function getAbsoluteSrcsetString(t,e){if(e.trim()==="")return e;var s=0;function r(f){var d,p=f.exec(e.substring(s));return p?(d=p[0],s+=d.length,d):""}for(var a=[];r(SRCSET_COMMAS_OR_SPACES),!(s>=e.length);){var o=r(SRCSET_NOT_SPACES);if(o.slice(-1)===",")o=absoluteToDoc(t,o.substring(0,o.length-1)),a.push(o);else{var l="";o=absoluteToDoc(t,o);for(var c=!1;;){var u=e.charAt(s);if(u===""){a.push((o+l).trim());break}else if(c)u===")"&&(c=!1);else if(u===","){s+=1,a.push((o+l).trim());break}else u==="("&&(c=!0);l+=u,s+=1}}}return a.join(", ")}var cachedDocument=new WeakMap;function absoluteToDoc(t,e){return!e||e.trim()===""?e:getHref(t,e)}function isSVGElement(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function getHref(t,e){var s=cachedDocument.get(t);if(s||(s=t.createElement("a"),cachedDocument.set(t,s)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return s.setAttribute("href",e),s.href}function transformAttribute(t,e,s,r){return r&&(s==="src"||s==="href"&&!(e==="use"&&r[0]==="#")||s==="xlink:href"&&r[0]!=="#"||s==="background"&&(e==="table"||e==="td"||e==="th")?absoluteToDoc(t,r):s==="srcset"?getAbsoluteSrcsetString(t,r):s==="style"?absolutifyURLs(r,getHref(t)):e==="object"&&s==="data"?absoluteToDoc(t,r):r)}function ignoreAttribute(t,e,s){return(t==="video"||t==="audio")&&e==="autoplay"}function _isBlockedElement(t,e,s){try{if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(var r=t.classList.length;r--;){var a=t.classList[r];if(e.test(a))return!0}if(s)return t.matches(s)}catch{}return!1}function classMatchesRegex$1(t,e,s){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return s?classMatchesRegex$1(index$1.parentNode(t),e,s):!1;for(var r=t.classList.length;r--;){var a=t.classList[r];if(e.test(a))return!0}return s?classMatchesRegex$1(index$1.parentNode(t),e,s):!1}function needMaskingText(t,e,s,r){var a;if(isElement(t)){if(a=t,!index$1.childNodes(a).length)return!1}else{if(index$1.parentElement(t)===null)return!1;a=index$1.parentElement(t)}try{if(typeof e=="string"){if(r){if(a.closest("."+e))return!0}else if(a.classList.contains(e))return!0}else if(classMatchesRegex$1(a,e,r))return!0;if(s){if(r){if(a.closest(s))return!0}else if(a.matches(s))return!0}}catch{}return!1}function onceIframeLoaded(t,e,s){var r=t.contentWindow;if(r){var a=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){var l=setTimeout(function(){a||(e(),a=!0)},s);t.addEventListener("load",function(){clearTimeout(l),a=!0,e()});return}var c="about:blank";if(r.location.href!==c||t.src===c||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}}function onceStylesheetLoaded(t,e,s){var r=!1,a;try{a=t.sheet}catch{return}if(!a){var o=setTimeout(function(){r||(e(),r=!0)},s);t.addEventListener("load",function(){clearTimeout(o),r=!0,e()})}}function serializeNode(t,e){var s=e.doc,r=e.mirror,a=e.blockClass,o=e.blockSelector,l=e.needsMask,c=e.inlineStylesheet,u=e.maskInputOptions,f=u===void 0?{}:u,d=e.maskTextFn,p=e.maskInputFn,m=e.dataURLOptions,y=m===void 0?{}:m,b=e.inlineImages,E=e.recordCanvas,C=e.keepIframeSrcFn,j=e.newlyAddedElement,B=j===void 0?!1:j,D=e.cssCaptured,F=D===void 0?!1:D,q=getRootId(s,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:NodeType$3.Document,childNodes:[],compatMode:t.compatMode}:{type:NodeType$3.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:NodeType$3.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:q};case t.ELEMENT_NODE:return serializeElementNode(t,{doc:s,blockClass:a,blockSelector:o,inlineStylesheet:c,maskInputOptions:f,maskInputFn:p,dataURLOptions:y,inlineImages:b,recordCanvas:E,keepIframeSrcFn:C,newlyAddedElement:B,rootId:q});case t.TEXT_NODE:return serializeTextNode(t,{doc:s,needsMask:l,maskTextFn:d,rootId:q,cssCaptured:F});case t.CDATA_SECTION_NODE:return{type:NodeType$3.CDATA,textContent:"",rootId:q};case t.COMMENT_NODE:return{type:NodeType$3.Comment,textContent:index$1.textContent(t)||"",rootId:q};default:return!1}}function getRootId(t,e){if(e.hasNode(t)){var s=e.getId(t);return s===1?void 0:s}}function serializeTextNode(t,e){var s=e.needsMask,r=e.maskTextFn,a=e.rootId,o=e.cssCaptured,l=index$1.parentNode(t),c=l&&l.tagName,u="",f=c==="STYLE"?!0:void 0,d=c==="SCRIPT"?!0:void 0;return d?u="SCRIPT_PLACEHOLDER":o||(u=index$1.textContent(t),f&&u&&(u=absolutifyURLs(u,getHref(e.doc)))),!f&&!d&&u&&s&&(u=r?r(u,index$1.parentElement(t)):u.replace(/[\S]/g,"*")),{type:NodeType$3.Text,textContent:u||"",rootId:a}}function serializeElementNode(t,e){for(var s=e.doc,r=e.blockClass,a=e.blockSelector,o=e.inlineStylesheet,l=e.maskInputOptions,c=l===void 0?{}:l,u=e.maskInputFn,f=e.dataURLOptions,d=f===void 0?{}:f,p=e.inlineImages,m=e.recordCanvas,y=e.keepIframeSrcFn,b=e.newlyAddedElement,E=b===void 0?!1:b,C=e.rootId,j=_isBlockedElement(t,r,a),B=getValidTagName$1(t),D={},F=t.attributes.length,q=0;q<F;q++){var V=t.attributes[q];ignoreAttribute(B,V.name,V.value)||(D[V.name]=transformAttribute(s,B,toLowerCase(V.name),V.value))}if(B==="link"&&o){var ee=Array.from(s.styleSheets).find(function(Y){return Y.href===t.href}),Q=null;ee&&(Q=stringifyStylesheet(ee)),Q&&(delete D.rel,delete D.href,D._cssText=Q)}if(B==="style"&&t.sheet){var W=stringifyStylesheet(t.sheet);W&&(t.childNodes.length>1&&(W=markCssSplits(W,t)),D._cssText=W)}if(B==="input"||B==="textarea"||B==="select"){var Z=t.value,z=t.checked;D.type!=="radio"&&D.type!=="checkbox"&&D.type!=="submit"&&D.type!=="button"&&Z?D.value=maskInputValue({element:t,type:getInputType(t),tagName:B,value:Z,maskInputOptions:c,maskInputFn:u}):z&&(D.checked=z)}if(B==="option"&&(t.selected&&!c.select?D.selected=!0:delete D.selected),B==="dialog"&&t.open&&(D.rr_open_mode=t.matches("dialog:modal")?"modal":"non-modal"),B==="canvas"&&m){if(t.__context==="2d")is2DCanvasBlank(t)||(D.rr_dataURL=t.toDataURL(d.type,d.quality));else if(!("__context"in t)){var O=t.toDataURL(d.type,d.quality),k=s.createElement("canvas");k.width=t.width,k.height=t.height;var v=k.toDataURL(d.type,d.quality);O!==v&&(D.rr_dataURL=O)}}if(B==="img"&&p){canvasService||(canvasService=s.createElement("canvas"),canvasCtx=canvasService.getContext("2d"));var S=t,N=S.currentSrc||S.getAttribute("src")||"<unknown-src>",R=S.crossOrigin,T=function(){S.removeEventListener("load",T);try{canvasService.width=S.naturalWidth,canvasService.height=S.naturalHeight,canvasCtx.drawImage(S,0,0),D.rr_dataURL=canvasService.toDataURL(d.type,d.quality)}catch(Y){if(S.crossOrigin!=="anonymous"){S.crossOrigin="anonymous",S.complete&&S.naturalWidth!==0?T():S.addEventListener("load",T);return}else console.warn("Cannot inline img src="+N+"! Error: "+Y)}S.crossOrigin==="anonymous"&&(R?D.crossOrigin=R:S.removeAttribute("crossorigin"))};S.complete&&S.naturalWidth!==0?T():S.addEventListener("load",T)}if(B==="audio"||B==="video"){var M=D;M.rr_mediaState=t.paused?"paused":"played",M.rr_mediaCurrentTime=t.currentTime,M.rr_mediaPlaybackRate=t.playbackRate,M.rr_mediaMuted=t.muted,M.rr_mediaLoop=t.loop,M.rr_mediaVolume=t.volume}if(E||(t.scrollLeft&&(D.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(D.rr_scrollTop=t.scrollTop)),j){var I=t.getBoundingClientRect(),$=I.width,A=I.height;D={class:D.class,rr_width:""+$+"px",rr_height:""+A+"px"}}B==="iframe"&&!y(D.src)&&(t.contentDocument||(D.rr_src=D.src),delete D.src);var L;try{customElements.get(B)&&(L=!0)}catch{}return{type:NodeType$3.Element,tagName:B,attributes:D,childNodes:[],isSVG:isSVGElement(t)||void 0,needBlock:j,rootId:C,isCustom:L}}function lowerIfExists(t){return t==null?"":t.toLowerCase()}function slimDOMExcluded(t,e){if(e.comment&&t.type===NodeType$3.Comment)return!0;if(t.type===NodeType$3.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"&&t.attributes.as==="script"||t.attributes.rel==="modulepreload")||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&extractFileExtension(t.attributes.href)==="js"))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(lowerIfExists(t.attributes.name).match(/^msapplication-tile(image|color)$/)||lowerIfExists(t.attributes.name)==="application-name"||lowerIfExists(t.attributes.rel)==="icon"||lowerIfExists(t.attributes.rel)==="apple-touch-icon"||lowerIfExists(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&lowerIfExists(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(lowerIfExists(t.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(t.attributes.name).match(/^(og|twitter):/)||lowerIfExists(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(lowerIfExists(t.attributes.name)==="robots"||lowerIfExists(t.attributes.name)==="googlebot"||lowerIfExists(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(lowerIfExists(t.attributes.name)==="author"||lowerIfExists(t.attributes.name)==="generator"||lowerIfExists(t.attributes.name)==="framework"||lowerIfExists(t.attributes.name)==="publisher"||lowerIfExists(t.attributes.name)==="progid"||lowerIfExists(t.attributes.property).match(/^article:/)||lowerIfExists(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(lowerIfExists(t.attributes.name)==="google-site-verification"||lowerIfExists(t.attributes.name)==="yandex-verification"||lowerIfExists(t.attributes.name)==="csrf-token"||lowerIfExists(t.attributes.name)==="p:domain_verify"||lowerIfExists(t.attributes.name)==="verify-v1"||lowerIfExists(t.attributes.name)==="verification"||lowerIfExists(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function serializeNodeWithId(t,e){var s=e.doc,r=e.mirror,a=e.blockClass,o=e.blockSelector,l=e.maskTextClass,c=e.maskTextSelector,u=e.skipChild,f=u===void 0?!1:u,d=e.inlineStylesheet,p=d===void 0?!0:d,m=e.maskInputOptions,y=m===void 0?{}:m,b=e.maskTextFn,E=e.maskInputFn,C=e.slimDOMOptions,j=e.dataURLOptions,B=j===void 0?{}:j,D=e.inlineImages,F=D===void 0?!1:D,q=e.recordCanvas,V=q===void 0?!1:q,ee=e.onSerialize,Q=e.onIframeLoad,W=e.iframeLoadTimeout,Z=W===void 0?5e3:W,z=e.onStylesheetLoad,O=e.stylesheetLoadTimeout,k=O===void 0?5e3:O,v=e.keepIframeSrcFn,S=v===void 0?function(){return!1}:v,N=e.newlyAddedElement,R=N===void 0?!1:N,T=e.cssCaptured,M=T===void 0?!1:T,I=e.needsMask,$=e.preserveWhiteSpace,A=$===void 0?!0:$;if(!I){var L=I===void 0;I=needMaskingText(t,l,c,L)}var Y=serializeNode(t,{doc:s,mirror:r,blockClass:a,blockSelector:o,needsMask:I,inlineStylesheet:p,maskInputOptions:y,maskTextFn:b,maskInputFn:E,dataURLOptions:B,inlineImages:F,recordCanvas:V,keepIframeSrcFn:S,newlyAddedElement:R,cssCaptured:M});if(!Y)return console.warn(t,"not serialized"),null;var oe;r.hasNode(t)?oe=r.getId(t):slimDOMExcluded(Y,C)||!A&&Y.type===NodeType$3.Text&&!Y.textContent.replace(/^\s+|\s+$/gm,"").length?oe=IGNORED_NODE:oe=genId();var J=Object.assign(Y,{id:oe});if(r.add(t,J),oe===IGNORED_NODE)return null;ee&&ee(t);var U=!f;if(J.type===NodeType$3.Element){U=U&&!J.needBlock,delete J.needBlock;var G=index$1.shadowRoot(t);G&&isNativeShadowDom(G)&&(J.isShadowHost=!0)}if((J.type===NodeType$3.Document||J.type===NodeType$3.Element)&&U){C.headWhitespace&&J.type===NodeType$3.Element&&J.tagName==="head"&&(A=!1);var ae={doc:s,mirror:r,blockClass:a,blockSelector:o,needsMask:I,maskTextClass:l,maskTextSelector:c,skipChild:f,inlineStylesheet:p,maskInputOptions:y,maskTextFn:b,maskInputFn:E,slimDOMOptions:C,dataURLOptions:B,inlineImages:F,recordCanvas:V,preserveWhiteSpace:A,onSerialize:ee,onIframeLoad:Q,iframeLoadTimeout:Z,onStylesheetLoad:z,stylesheetLoadTimeout:k,keepIframeSrcFn:S,cssCaptured:!1};if(!(J.type===NodeType$3.Element&&J.tagName==="textarea"&&J.attributes.value!==void 0)){J.type===NodeType$3.Element&&J.attributes._cssText!==void 0&&typeof J.attributes._cssText=="string"&&(ae.cssCaptured=!0);for(var he=_create_for_of_iterator_helper_loose(Array.from(index$1.childNodes(t))),le;!(le=he()).done;){var te=le.value,pe=serializeNodeWithId(te,ae);pe&&J.childNodes.push(pe)}}var xe=null;if(isElement(t)&&(xe=index$1.shadowRoot(t)))for(var be=_create_for_of_iterator_helper_loose(Array.from(index$1.childNodes(xe))),ce;!(ce=be()).done;){var re=ce.value,ie=serializeNodeWithId(re,ae);ie&&(isNativeShadowDom(xe)&&(ie.isShadow=!0),J.childNodes.push(ie))}}var fe=index$1.parentNode(t);return fe&&isShadowRoot(fe)&&isNativeShadowDom(fe)&&(J.isShadow=!0),J.type===NodeType$3.Element&&J.tagName==="iframe"&&onceIframeLoaded(t,function(){var ye=t.contentDocument;if(ye&&Q){var we=serializeNodeWithId(ye,{doc:ye,mirror:r,blockClass:a,blockSelector:o,needsMask:I,maskTextClass:l,maskTextSelector:c,skipChild:!1,inlineStylesheet:p,maskInputOptions:y,maskTextFn:b,maskInputFn:E,slimDOMOptions:C,dataURLOptions:B,inlineImages:F,recordCanvas:V,preserveWhiteSpace:A,onSerialize:ee,onIframeLoad:Q,iframeLoadTimeout:Z,onStylesheetLoad:z,stylesheetLoadTimeout:k,keepIframeSrcFn:S});we&&Q(t,we)}},Z),J.type===NodeType$3.Element&&J.tagName==="link"&&typeof J.attributes.rel=="string"&&(J.attributes.rel==="stylesheet"||J.attributes.rel==="preload"&&typeof J.attributes.href=="string"&&extractFileExtension(J.attributes.href)==="css")&&onceStylesheetLoaded(t,function(){if(z){var ye=serializeNodeWithId(t,{doc:s,mirror:r,blockClass:a,blockSelector:o,needsMask:I,maskTextClass:l,maskTextSelector:c,skipChild:!1,inlineStylesheet:p,maskInputOptions:y,maskTextFn:b,maskInputFn:E,slimDOMOptions:C,dataURLOptions:B,inlineImages:F,recordCanvas:V,preserveWhiteSpace:A,onSerialize:ee,onIframeLoad:Q,iframeLoadTimeout:Z,onStylesheetLoad:z,stylesheetLoadTimeout:k,keepIframeSrcFn:S});ye&&z(t,ye)}},k),J}function snapshot(t,e){var s=e||{},r=s.mirror,a=r===void 0?new Mirror:r,o=s.blockClass,l=o===void 0?"rr-block":o,c=s.blockSelector,u=c===void 0?null:c,f=s.maskTextClass,d=f===void 0?"rr-mask":f,p=s.maskTextSelector,m=p===void 0?null:p,y=s.inlineStylesheet,b=y===void 0?!0:y,E=s.inlineImages,C=E===void 0?!1:E,j=s.recordCanvas,B=j===void 0?!1:j,D=s.maskAllInputs,F=D===void 0?!1:D,q=s.maskTextFn,V=s.maskInputFn,ee=s.slimDOM,Q=ee===void 0?!1:ee,W=s.dataURLOptions,Z=s.preserveWhiteSpace,z=s.onSerialize,O=s.onIframeLoad,k=s.iframeLoadTimeout,v=s.onStylesheetLoad,S=s.stylesheetLoadTimeout,N=s.keepIframeSrcFn,R=N===void 0?function(){return!1}:N,T=F===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0,hidden:!0}:F===!1?{password:!0}:F,M=Q===!0||Q==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:Q==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:Q===!1?{}:Q;return serializeNodeWithId(t,{doc:t,mirror:a,blockClass:l,blockSelector:u,maskTextClass:d,maskTextSelector:m,skipChild:!1,inlineStylesheet:b,maskInputOptions:T,maskTextFn:q,maskInputFn:V,slimDOMOptions:M,dataURLOptions:W,inlineImages:C,recordCanvas:B,preserveWhiteSpace:Z,onSerialize:z,onIframeLoad:O,iframeLoadTimeout:k,onStylesheetLoad:v,stylesheetLoadTimeout:S,keepIframeSrcFn:R,newlyAddedElement:!1})}function getDefaultExportFromCjs$1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace$1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function r(){return _instanceof(this,r)?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),s}var picocolors_browser$1={exports:{}},x$1=String,create$1=function t(){return{isColorSupported:!1,reset:x$1,bold:x$1,dim:x$1,italic:x$1,underline:x$1,inverse:x$1,hidden:x$1,strikethrough:x$1,black:x$1,red:x$1,green:x$1,yellow:x$1,blue:x$1,magenta:x$1,cyan:x$1,white:x$1,gray:x$1,bgBlack:x$1,bgRed:x$1,bgGreen:x$1,bgYellow:x$1,bgBlue:x$1,bgMagenta:x$1,bgCyan:x$1,bgWhite:x$1}};picocolors_browser$1.exports=create$1();picocolors_browser$1.exports.createColors=create$1;var picocolors_browserExports$1=picocolors_browser$1.exports,__viteBrowserExternal$2={},__viteBrowserExternal$1$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal$2},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace$1(__viteBrowserExternal$1$1),pico$1=picocolors_browserExports$1,terminalHighlight$1$1=require$$2$1,CssSyntaxError$3$1=(function(t){_inherits(e,t);function e(r,a,o,l,c,u){var f;return f=t.call(this,r)||this,f.name="CssSyntaxError",f.reason=r,c&&(f.file=c),l&&(f.source=l),u&&(f.plugin=u),typeof a<"u"&&typeof o<"u"&&(typeof a=="number"?(f.line=a,f.column=o):(f.line=a.line,f.column=a.column,f.endLine=o.line,f.endColumn=o.column)),f.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(f,e),f}var s=e.prototype;return s.setMessage=function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},s.showSourceCode=function(a){var o=this;if(!this.source)return"";var l=this.source;a==null&&(a=pico$1.isColorSupported),terminalHighlight$1$1&&a&&(l=terminalHighlight$1$1(l));var c=l.split(/\r?\n/),u=Math.max(this.line-3,0),f=Math.min(this.line+2,c.length),d=String(f).length,p,m;if(a){var y=pico$1.createColors(!0),b=y.bold,E=y.gray,C=y.red;p=function(j){return b(C(j))},m=function(j){return E(j)}}else p=m=function(j){return j};return c.slice(u,f).map(function(j,B){var D=u+1+B,F=" "+(" "+D).slice(-d)+" | ";if(D===o.line){var q=m(F.replace(/\d/g," "))+j.slice(0,o.column-1).replace(/[^\t]/g," ");return p(">")+m(F)+j+`
 `+q+p("^")}return" "+m(F)+j}).join(`
`)},s.toString=function(){var a=this.showSourceCode();return a&&(a=`

`+a+`
`),this.name+": "+this.message+a},e})(_wrap_native_super(Error)),cssSyntaxError$1=CssSyntaxError$3$1;CssSyntaxError$3$1.default=CssSyntaxError$3$1;var symbols$1={};symbols$1.isClean=Symbol("isClean");symbols$1.my=Symbol("my");var DEFAULT_RAW$1={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize$1(t){return t[0].toUpperCase()+t.slice(1)}var Stringifier$2$1=(function(){function t(s){this.builder=s}var e=t.prototype;return e.atrule=function(r,a){var o="@"+r.name,l=r.params?this.rawValue(r,"params"):"";if(typeof r.raws.afterName<"u"?o+=r.raws.afterName:l&&(o+=" "),r.nodes)this.block(r,o+l);else{var c=(r.raws.between||"")+(a?";":"");this.builder(o+l+c,r)}},e.beforeAfter=function(r,a){var o;r.type==="decl"?o=this.raw(r,null,"beforeDecl"):r.type==="comment"?o=this.raw(r,null,"beforeComment"):a==="before"?o=this.raw(r,null,"beforeRule"):o=this.raw(r,null,"beforeClose");for(var l=r.parent,c=0;l&&l.type!=="root";)c+=1,l=l.parent;if(o.includes(`
`)){var u=this.raw(r,null,"indent");if(u.length)for(var f=0;f<c;f++)o+=u}return o},e.block=function(r,a){var o=this.raw(r,"between","beforeOpen");this.builder(a+o+"{",r,"start");var l;r.nodes&&r.nodes.length?(this.body(r),l=this.raw(r,"after")):l=this.raw(r,"after","emptyBody"),l&&this.builder(l),this.builder("}",r,"end")},e.body=function(r){for(var a=r.nodes.length-1;a>0&&r.nodes[a].type==="comment";)a-=1;for(var o=this.raw(r,"semicolon"),l=0;l<r.nodes.length;l++){var c=r.nodes[l],u=this.raw(c,"before");u&&this.builder(u),this.stringify(c,a!==l||o)}},e.comment=function(r){var a=this.raw(r,"left","commentLeft"),o=this.raw(r,"right","commentRight");this.builder("/*"+a+r.text+o+"*/",r)},e.decl=function(r,a){var o=this.raw(r,"between","colon"),l=r.prop+o+this.rawValue(r,"value");r.important&&(l+=r.raws.important||" !important"),a&&(l+=";"),this.builder(l,r)},e.document=function(r){this.body(r)},e.raw=function(r,a,o){var l;if(o||(o=a),a&&(l=r.raws[a],typeof l<"u"))return l;var c=r.parent;if(o==="before"&&(!c||c.type==="root"&&c.first===r||c&&c.type==="document"))return"";if(!c)return DEFAULT_RAW$1[o];var u=r.root();if(u.rawCache||(u.rawCache={}),typeof u.rawCache[o]<"u")return u.rawCache[o];if(o==="before"||o==="after")return this.beforeAfter(r,o);var f="raw"+capitalize$1(o);return this[f]?l=this[f](u,r):u.walk(function(d){if(l=d.raws[a],typeof l<"u")return!1}),typeof l>"u"&&(l=DEFAULT_RAW$1[o]),u.rawCache[o]=l,l},e.rawBeforeClose=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length>0&&typeof o.raws.after<"u")return a=o.raws.after,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),a&&(a=a.replace(/\S/g,"")),a},e.rawBeforeComment=function(r,a){var o;return r.walkComments(function(l){if(typeof l.raws.before<"u")return o=l.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(a,null,"beforeDecl"):o&&(o=o.replace(/\S/g,"")),o},e.rawBeforeDecl=function(r,a){var o;return r.walkDecls(function(l){if(typeof l.raws.before<"u")return o=l.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(a,null,"beforeRule"):o&&(o=o.replace(/\S/g,"")),o},e.rawBeforeOpen=function(r){var a;return r.walk(function(o){if(o.type!=="decl"&&(a=o.raws.between,typeof a<"u"))return!1}),a},e.rawBeforeRule=function(r){var a;return r.walk(function(o){if(o.nodes&&(o.parent!==r||r.first!==o)&&typeof o.raws.before<"u")return a=o.raws.before,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),a&&(a=a.replace(/\S/g,"")),a},e.rawColon=function(r){var a;return r.walkDecls(function(o){if(typeof o.raws.between<"u")return a=o.raws.between.replace(/[^\s:]/g,""),!1}),a},e.rawEmptyBody=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length===0&&(a=o.raws.after,typeof a<"u"))return!1}),a},e.rawIndent=function(r){if(r.raws.indent)return r.raws.indent;var a;return r.walk(function(o){var l=o.parent;if(l&&l!==r&&l.parent&&l.parent===r&&typeof o.raws.before<"u"){var c=o.raws.before.split(`
`);return a=c[c.length-1],a=a.replace(/\S/g,""),!1}}),a},e.rawSemicolon=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length&&o.last.type==="decl"&&(a=o.raws.semicolon,typeof a<"u"))return!1}),a},e.rawValue=function(r,a){var o=r[a],l=r.raws[a];return l&&l.value===o?l.raw:o},e.root=function(r){this.body(r),r.raws.after&&this.builder(r.raws.after)},e.rule=function(r){this.block(r,this.rawValue(r,"selector")),r.raws.ownSemicolon&&this.builder(r.raws.ownSemicolon,r,"end")},e.stringify=function(r,a){if(!this[r.type])throw new Error("Unknown AST node type "+r.type+". Maybe you need to change PostCSS stringifier.");this[r.type](r,a)},t})(),stringifier$1=Stringifier$2$1;Stringifier$2$1.default=Stringifier$2$1;var Stringifier$1$1=stringifier$1;function stringify$4$1(t,e){var s=new Stringifier$1$1(e);s.stringify(t)}var stringify_1$1=stringify$4$1;stringify$4$1.default=stringify$4$1;var isClean$2$1=symbols$1.isClean,my$2$1=symbols$1.my,CssSyntaxError$2$1=cssSyntaxError$1,Stringifier2$1=stringifier$1,stringify$3$1=stringify_1$1;function cloneNode$1(t,e){var s=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&r!=="proxyCache"){var a=t[r],o=typeof a>"u"?"undefined":_type_of(a);r==="parent"&&o==="object"?e&&(s[r]=e):r==="source"?s[r]=a:Array.isArray(a)?s[r]=a.map(function(l){return cloneNode$1(l,s)}):(o==="object"&&a!==null&&(a=cloneNode$1(a)),s[r]=a)}return s}var Node$4$1=(function(){function t(s){s===void 0&&(s={}),this.raws={},this[isClean$2$1]=!1,this[my$2$1]=!0;for(var r in s)if(r==="nodes"){this.nodes=[];for(var a=_create_for_of_iterator_helper_loose(s[r]),o;!(o=a()).done;){var l=o.value;typeof l.clone=="function"?this.append(l.clone()):this.append(l)}}else this[r]=s[r]}var e=t.prototype;return e.addToError=function(r){if(r.postcssNode=this,r.stack&&this.source&&/\n\s{4}at /.test(r.stack)){var a=this.source;r.stack=r.stack.replace(/\n\s{4}at /,"$&"+a.input.from+":"+a.start.line+":"+a.start.column+"$&")}return r},e.after=function(r){return this.parent.insertAfter(this,r),this},e.assign=function(r){r===void 0&&(r={});for(var a in r)this[a]=r[a];return this},e.before=function(r){return this.parent.insertBefore(this,r),this},e.cleanRaws=function(r){delete this.raws.before,delete this.raws.after,r||delete this.raws.between},e.clone=function(r){r===void 0&&(r={});var a=cloneNode$1(this);for(var o in r)a[o]=r[o];return a},e.cloneAfter=function(r){r===void 0&&(r={});var a=this.clone(r);return this.parent.insertAfter(this,a),a},e.cloneBefore=function(r){r===void 0&&(r={});var a=this.clone(r);return this.parent.insertBefore(this,a),a},e.error=function(r,a){if(a===void 0&&(a={}),this.source){var o=this.rangeBy(a),l=o.end,c=o.start;return this.source.input.error(r,{column:c.column,line:c.line},{column:l.column,line:l.line},a)}return new CssSyntaxError$2$1(r)},e.getProxyProcessor=function(){return{get:function(a,o){return o==="proxyOf"?a:o==="root"?function(){return a.root().toProxy()}:a[o]},set:function(a,o,l){return a[o]===l||(a[o]=l,(o==="prop"||o==="value"||o==="name"||o==="params"||o==="important"||o==="text")&&a.markDirty()),!0}}},e.markDirty=function(){if(this[isClean$2$1]){this[isClean$2$1]=!1;for(var r=this;r=r.parent;)r[isClean$2$1]=!1}},e.next=function(){if(this.parent){var r=this.parent.index(this);return this.parent.nodes[r+1]}},e.positionBy=function(r,a){var o=this.source.start;if(r.index)o=this.positionInside(r.index,a);else if(r.word){a=this.toString();var l=a.indexOf(r.word);l!==-1&&(o=this.positionInside(l,a))}return o},e.positionInside=function(r,a){for(var o=a||this.toString(),l=this.source.start.column,c=this.source.start.line,u=0;u<r;u++)o[u]===`
`?(l=1,c+=1):l+=1;return{column:l,line:c}},e.prev=function(){if(this.parent){var r=this.parent.index(this);return this.parent.nodes[r-1]}},e.rangeBy=function(r){var a={column:this.source.start.column,line:this.source.start.line},o=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:a.column+1,line:a.line};if(r.word){var l=this.toString(),c=l.indexOf(r.word);c!==-1&&(a=this.positionInside(c,l),o=this.positionInside(c+r.word.length,l))}else r.start?a={column:r.start.column,line:r.start.line}:r.index&&(a=this.positionInside(r.index)),r.end?o={column:r.end.column,line:r.end.line}:typeof r.endIndex=="number"?o=this.positionInside(r.endIndex):r.index&&(o=this.positionInside(r.index+1));return(o.line<a.line||o.line===a.line&&o.column<=a.column)&&(o={column:a.column+1,line:a.line}),{end:o,start:a}},e.raw=function(r,a){var o=new Stringifier2$1;return o.raw(this,r,a)},e.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];if(this.parent){for(var l=this,c=!1,u=_create_for_of_iterator_helper_loose(a),f;!(f=u()).done;){var d=f.value;d===this?c=!0:c?(this.parent.insertAfter(l,d),l=d):this.parent.insertBefore(l,d)}c||this.remove()}return this},e.root=function(){for(var r=this;r.parent&&r.parent.type!=="document";)r=r.parent;return r},e.toJSON=function(r,a){var o={},l=a==null;a=a||new Map;var c=0;for(var u in this)if(Object.prototype.hasOwnProperty.call(this,u)&&!(u==="parent"||u==="proxyCache")){var f=this[u];if(Array.isArray(f))o[u]=f.map(function(p){return(typeof p>"u"?"undefined":_type_of(p))==="object"&&p.toJSON?p.toJSON(null,a):p});else if((typeof f>"u"?"undefined":_type_of(f))==="object"&&f.toJSON)o[u]=f.toJSON(null,a);else if(u==="source"){var d=a.get(f.input);d==null&&(d=c,a.set(f.input,c),c++),o[u]={end:f.end,inputId:d,start:f.start}}else o[u]=f}return l&&(o.inputs=[].concat(a.keys()).map(function(p){return p.toJSON()})),o},e.toProxy=function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache},e.toString=function(r){r===void 0&&(r=stringify$3$1),r.stringify&&(r=r.stringify);var a="";return r(this,function(o){a+=o}),a},e.warn=function(r,a,o){var l={node:this};for(var c in o)l[c]=o[c];return r.warn(a,l)},_create_class(t,[{key:"proxyOf",get:function(){return this}}]),t})(),node$1=Node$4$1;Node$4$1.default=Node$4$1;var Node$3$1=node$1,Declaration$4$1=(function(t){_inherits(e,t);function e(s){var r;return s&&typeof s.value<"u"&&typeof s.value!="string"&&(s=_extends({},s,{value:String(s.value)})),r=t.call(this,s)||this,r.type="decl",r}return _create_class(e,[{key:"variable",get:function(){return this.prop.startsWith("--")||this.prop[0]==="$"}}]),e})(Node$3$1),declaration$1=Declaration$4$1;Declaration$4$1.default=Declaration$4$1;var urlAlphabet$1="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",nanoid$1$1=function(t){t===void 0&&(t=21);for(var e="",s=t;s--;)e+=urlAlphabet$1[Math.random()*64|0];return e},nonSecure$1={nanoid:nanoid$1$1},SourceMapConsumer$2$1=require$$2$1.SourceMapConsumer,SourceMapGenerator$2$1=require$$2$1.SourceMapGenerator,existsSync$1=require$$2$1.existsSync,readFileSync$1=require$$2$1.readFileSync,dirname$1$1=require$$2$1.dirname,join$1=require$$2$1.join;function fromBase64$1(t){return Buffer?Buffer.from(t,"base64").toString():window.atob(t)}var PreviousMap$2$1=(function(){function t(s,r){if(r.map!==!1){this.loadAnnotation(s),this.inline=this.startWith(this.annotation,"data:");var a=r.map?r.map.prev:void 0,o=this.loadMap(r.from,a);!this.mapFile&&r.from&&(this.mapFile=r.from),this.mapFile&&(this.root=dirname$1$1(this.mapFile)),o&&(this.text=o)}}var e=t.prototype;return e.consumer=function(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2$1(this.text)),this.consumerCache},e.decodeInline=function(r){var a=/^data:application\/json;charset=utf-?8;base64,/,o=/^data:application\/json;base64,/,l=/^data:application\/json;charset=utf-?8,/,c=/^data:application\/json,/;if(l.test(r)||c.test(r))return decodeURIComponent(r.substr(RegExp.lastMatch.length));if(a.test(r)||o.test(r))return fromBase64$1(r.substr(RegExp.lastMatch.length));var u=r.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+u)},e.getAnnotationURL=function(r){return r.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()},e.isMap=function(r){return(typeof r>"u"?"undefined":_type_of(r))!=="object"?!1:typeof r.mappings=="string"||typeof r._mappings=="string"||Array.isArray(r.sections)},e.loadAnnotation=function(r){var a=r.match(/\/\*\s*# sourceMappingURL=/gm);if(a){var o=r.lastIndexOf(a.pop()),l=r.indexOf("*/",o);o>-1&&l>-1&&(this.annotation=this.getAnnotationURL(r.substring(o,l)))}},e.loadFile=function(r){if(this.root=dirname$1$1(r),existsSync$1(r))return this.mapFile=r,readFileSync$1(r,"utf-8").toString().trim()},e.loadMap=function(r,a){if(a===!1)return!1;if(a){if(typeof a=="string")return a;if(typeof a=="function"){var o=a(r);if(o){var l=this.loadFile(o);if(!l)throw new Error("Unable to load previous source map: "+o.toString());return l}}else{if(_instanceof(a,SourceMapConsumer$2$1))return SourceMapGenerator$2$1.fromSourceMap(a).toString();if(_instanceof(a,SourceMapGenerator$2$1))return a.toString();if(this.isMap(a))return JSON.stringify(a);throw new Error("Unsupported previous source map format: "+a.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var c=this.annotation;return r&&(c=join$1(dirname$1$1(r),c)),this.loadFile(c)}}},e.startWith=function(r,a){return r?r.substr(0,a.length)===a:!1},e.withContent=function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},t})(),previousMap$1=PreviousMap$2$1;PreviousMap$2$1.default=PreviousMap$2$1;var SourceMapConsumer$1$1=require$$2$1.SourceMapConsumer,SourceMapGenerator$1$1=require$$2$1.SourceMapGenerator,fileURLToPath$1=require$$2$1.fileURLToPath,pathToFileURL$1$1=require$$2$1.pathToFileURL,isAbsolute$1=require$$2$1.isAbsolute,resolve$1$1=require$$2$1.resolve,nanoid$2=nonSecure$1.nanoid,terminalHighlight$2=require$$2$1,CssSyntaxError$1$1=cssSyntaxError$1,PreviousMap$1$1=previousMap$1,fromOffsetCache$1=Symbol("fromOffsetCache"),sourceMapAvailable$1$1=!!(SourceMapConsumer$1$1&&SourceMapGenerator$1$1),pathAvailable$1$1=!!(resolve$1$1&&isAbsolute$1),Input$4$1=(function(){function t(s,r){if(r===void 0&&(r={}),s===null||typeof s>"u"||(typeof s>"u"?"undefined":_type_of(s))==="object"&&!s.toString)throw new Error("PostCSS received "+s+" instead of CSS string");if(this.css=s.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,r.from&&(!pathAvailable$1$1||/^\w+:\/\//.test(r.from)||isAbsolute$1(r.from)?this.file=r.from:this.file=resolve$1$1(r.from)),pathAvailable$1$1&&sourceMapAvailable$1$1){var a=new PreviousMap$1$1(this.css,r);if(a.text){this.map=a;var o=a.consumer().file;!this.file&&o&&(this.file=this.mapResolve(o))}}this.file||(this.id="<input css "+nanoid$2(6)+">"),this.map&&(this.map.file=this.from)}var e=t.prototype;return e.error=function(r,a,o,l){l===void 0&&(l={});var c,u,f;if(a&&(typeof a>"u"?"undefined":_type_of(a))==="object"){var d=a,p=o;if(typeof d.offset=="number"){var m=this.fromOffset(d.offset);a=m.line,o=m.col}else a=d.line,o=d.column;if(typeof p.offset=="number"){var y=this.fromOffset(p.offset);u=y.line,f=y.col}else u=p.line,f=p.column}else if(!o){var b=this.fromOffset(a);a=b.line,o=b.col}var E=this.origin(a,o,u,f);return E?c=new CssSyntaxError$1$1(r,E.endLine===void 0?E.line:{column:E.column,line:E.line},E.endLine===void 0?E.column:{column:E.endColumn,line:E.endLine},E.source,E.file,l.plugin):c=new CssSyntaxError$1$1(r,u===void 0?a:{column:o,line:a},u===void 0?o:{column:f,line:u},this.css,this.file,l.plugin),c.input={column:o,endColumn:f,endLine:u,line:a,source:this.css},this.file&&(pathToFileURL$1$1&&(c.input.url=pathToFileURL$1$1(this.file).toString()),c.input.file=this.file),c},e.fromOffset=function(r){var a,o;if(this[fromOffsetCache$1])o=this[fromOffsetCache$1];else{var l=this.css.split(`
`);o=new Array(l.length);for(var c=0,u=0,f=l.length;u<f;u++)o[u]=c,c+=l[u].length+1;this[fromOffsetCache$1]=o}a=o[o.length-1];var d=0;if(r>=a)d=o.length-1;else for(var p=o.length-2,m;d<p;)if(m=d+(p-d>>1),r<o[m])p=m-1;else if(r>=o[m+1])d=m+1;else{d=m;break}return{col:r-o[d]+1,line:d+1}},e.mapResolve=function(r){return/^\w+:\/\//.test(r)?r:resolve$1$1(this.map.consumer().sourceRoot||this.map.root||".",r)},e.origin=function(r,a,o,l){if(!this.map)return!1;var c=this.map.consumer(),u=c.originalPositionFor({column:a,line:r});if(!u.source)return!1;var f;typeof o=="number"&&(f=c.originalPositionFor({column:l,line:o}));var d;isAbsolute$1(u.source)?d=pathToFileURL$1$1(u.source):d=new URL(u.source,this.map.consumer().sourceRoot||pathToFileURL$1$1(this.map.mapFile));var p={column:u.column,endColumn:f&&f.column,endLine:f&&f.line,line:u.line,url:d.toString()};if(d.protocol==="file:")if(fileURLToPath$1)p.file=fileURLToPath$1(d);else throw new Error("file: protocol is not available in this PostCSS build");var m=c.sourceContentFor(u.source);return m&&(p.source=m),p},e.toJSON=function(){for(var r={},a=0,o=["hasBOM","css","file","id"];a<o.length;a++){var l=o[a];this[l]!=null&&(r[l]=this[l])}return this.map&&(r.map=_extends({},this.map),r.map.consumerCache&&(r.map.consumerCache=void 0)),r},_create_class(t,[{key:"from",get:function(){return this.file||this.id}}]),t})(),input$1=Input$4$1;Input$4$1.default=Input$4$1;terminalHighlight$2&&terminalHighlight$2.registerInput&&terminalHighlight$2.registerInput(Input$4$1);var SourceMapConsumer$3=require$$2$1.SourceMapConsumer,SourceMapGenerator$3=require$$2$1.SourceMapGenerator,dirname$2=require$$2$1.dirname,relative$1=require$$2$1.relative,resolve$2=require$$2$1.resolve,sep$1=require$$2$1.sep,pathToFileURL$2=require$$2$1.pathToFileURL,Input$3$1=input$1,sourceMapAvailable$2=!!(SourceMapConsumer$3&&SourceMapGenerator$3),pathAvailable$2=!!(dirname$2&&resolve$2&&relative$1&&sep$1),MapGenerator$2$1=(function(){function t(s,r,a,o){this.stringify=s,this.mapOpts=a.map||{},this.root=r,this.opts=a,this.css=o,this.originalCSS=o,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}var e=t.prototype;return e.addAnnotation=function(){var r;this.isInline()?r="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?r=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?r=this.mapOpts.annotation(this.opts.to,this.root):r=this.outputFile()+".map";var a=`
`;this.css.includes(`\r
`)&&(a=`\r
`),this.css+=a+"/*# sourceMappingURL="+r+" */"},e.applyPrevMaps=function(){for(var r=_create_for_of_iterator_helper_loose(this.previous()),a;!(a=r()).done;){var o=a.value,l=this.toUrl(this.path(o.file)),c=o.root||dirname$2(o.file),u=void 0;this.mapOpts.sourcesContent===!1?(u=new SourceMapConsumer$3(o.text),u.sourcesContent&&(u.sourcesContent=null)):u=o.consumer(),this.map.applySourceMap(u,l,this.toUrl(this.path(c)))}},e.clearAnnotation=function(){if(this.mapOpts.annotation!==!1)if(this.root)for(var r,a=this.root.nodes.length-1;a>=0;a--)r=this.root.nodes[a],r.type==="comment"&&r.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(a);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))},e.generate=function(){if(this.clearAnnotation(),pathAvailable$2&&sourceMapAvailable$2&&this.isMap())return this.generateMap();var r="";return this.stringify(this.root,function(a){r+=a}),[r]},e.generateMap=function(){if(this.root)this.generateString();else if(this.previous().length===1){var r=this.previous()[0].consumer();r.file=this.outputFile(),this.map=SourceMapGenerator$3.fromSourceMap(r,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},e.generateString=function(){var r=this;this.css="",this.map=new SourceMapGenerator$3({file:this.outputFile(),ignoreInvalidMapping:!0});var a=1,o=1,l="<no source>",c={generated:{column:0,line:0},original:{column:0,line:0},source:""},u,f;this.stringify(this.root,function(d,p,m){if(r.css+=d,p&&m!=="end"&&(c.generated.line=a,c.generated.column=o-1,p.source&&p.source.start?(c.source=r.sourcePath(p),c.original.line=p.source.start.line,c.original.column=p.source.start.column-1,r.map.addMapping(c)):(c.source=l,c.original.line=1,c.original.column=0,r.map.addMapping(c))),u=d.match(/\n/g),u?(a+=u.length,f=d.lastIndexOf(`
`),o=d.length-f):o+=d.length,p&&m!=="start"){var y=p.parent||{raws:{}},b=p.type==="decl"||p.type==="atrule"&&!p.nodes;(!b||p!==y.last||y.raws.semicolon)&&(p.source&&p.source.end?(c.source=r.sourcePath(p),c.original.line=p.source.end.line,c.original.column=p.source.end.column-1,c.generated.line=a,c.generated.column=o-2,r.map.addMapping(c)):(c.source=l,c.original.line=1,c.original.column=0,c.generated.line=a,c.generated.column=o-1,r.map.addMapping(c)))}})},e.isAnnotation=function(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(function(r){return r.annotation}):!0},e.isInline=function(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;var r=this.mapOpts.annotation;return typeof r<"u"&&r!==!0?!1:this.previous().length?this.previous().some(function(a){return a.inline}):!0},e.isMap=function(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0},e.isSourcesContent=function(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(function(r){return r.withContent()}):!0},e.outputFile=function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"},e.path=function(r){if(this.mapOpts.absolute||r.charCodeAt(0)===60||/^\w+:\/\//.test(r))return r;var a=this.memoizedPaths.get(r);if(a)return a;var o=this.opts.to?dirname$2(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(o=dirname$2(resolve$2(o,this.mapOpts.annotation)));var l=relative$1(o,r);return this.memoizedPaths.set(r,l),l},e.previous=function(){var r=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(o){if(o.source&&o.source.input.map){var l=o.source.input.map;r.previousMaps.includes(l)||r.previousMaps.push(l)}});else{var a=new Input$3$1(this.originalCSS,this.opts);a.map&&this.previousMaps.push(a.map)}return this.previousMaps},e.setSourcesContent=function(){var r=this,a={};if(this.root)this.root.walk(function(l){if(l.source){var c=l.source.input.from;if(c&&!a[c]){a[c]=!0;var u=r.usesFileUrls?r.toFileUrl(c):r.toUrl(r.path(c));r.map.setSourceContent(u,l.source.input.css)}}});else if(this.css){var o=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(o,this.css)}},e.sourcePath=function(r){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(r.source.input.from):this.toUrl(this.path(r.source.input.from))},e.toBase64=function(r){return Buffer?Buffer.from(r).toString("base64"):window.btoa(unescape(encodeURIComponent(r)))},e.toFileUrl=function(r){var a=this.memoizedFileURLs.get(r);if(a)return a;if(pathToFileURL$2){var o=pathToFileURL$2(r).toString();return this.memoizedFileURLs.set(r,o),o}else throw new Error("`map.absolute` option is not available in this PostCSS build")},e.toUrl=function(r){var a=this.memoizedURLs.get(r);if(a)return a;sep$1==="\\"&&(r=r.replace(/\\/g,"/"));var o=encodeURI(r).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(r,o),o},t})(),mapGenerator$1=MapGenerator$2$1,Node$2$1=node$1,Comment$4$1=(function(t){_inherits(e,t);function e(s){var r;return r=t.call(this,s)||this,r.type="comment",r}return e})(Node$2$1),comment$1=Comment$4$1;Comment$4$1.default=Comment$4$1;var isClean$1$1=symbols$1.isClean,my$1$1=symbols$1.my,Declaration$3$1=declaration$1,Comment$3$1=comment$1,Node$1$1=node$1,parse$4$1,Rule$4$1,AtRule$4$1,Root$6$1;function cleanSource$1(t){return t.map(function(e){return e.nodes&&(e.nodes=cleanSource$1(e.nodes)),delete e.source,e})}function markDirtyUp$1(t){if(t[isClean$1$1]=!1,t.proxyOf.nodes)for(var e=_create_for_of_iterator_helper_loose(t.proxyOf.nodes),s;!(s=e()).done;){var r=s.value;markDirtyUp$1(r)}}var Container$7$1=(function(t){_inherits(e,t);function e(){return t.apply(this,arguments)||this}var s=e.prototype;return s.append=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];for(var c=_create_for_of_iterator_helper_loose(o),u;!(u=c()).done;)for(var f=u.value,d=this.normalize(f,this.last),p=_create_for_of_iterator_helper_loose(d),m;!(m=p()).done;){var y=m.value;this.proxyOf.nodes.push(y)}return this.markDirty(),this},s.cleanRaws=function(a){if(t.prototype.cleanRaws.call(this,a),this.nodes)for(var o=_create_for_of_iterator_helper_loose(this.nodes),l;!(l=o()).done;){var c=l.value;c.cleanRaws(a)}},s.each=function(a){if(this.proxyOf.nodes){for(var o=this.getIterator(),l,c;this.indexes[o]<this.proxyOf.nodes.length&&(l=this.indexes[o],c=a(this.proxyOf.nodes[l],l),c!==!1);)this.indexes[o]+=1;return delete this.indexes[o],c}},s.every=function(a){return this.nodes.every(a)},s.getIterator=function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var a=this.lastEach;return this.indexes[a]=0,a},s.getProxyProcessor=function(){return{get:function(o,l){return l==="proxyOf"?o:o[l]?l==="each"||typeof l=="string"&&l.startsWith("walk")?function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];var d;return(d=o)[l].apply(d,[].concat(u.map(function(p){return typeof p=="function"?function(m,y){return p(m.toProxy(),y)}:p})))}:l==="every"||l==="some"?function(c){return o[l](function(u){for(var f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return c.apply(void 0,[].concat([u.toProxy()],d))})}:l==="root"?function(){return o.root().toProxy()}:l==="nodes"?o.nodes.map(function(c){return c.toProxy()}):l==="first"||l==="last"?o[l].toProxy():o[l]:o[l]},set:function(o,l,c){return o[l]===c||(o[l]=c,(l==="name"||l==="params"||l==="selector")&&o.markDirty()),!0}}},s.index=function(a){return typeof a=="number"?a:(a.proxyOf&&(a=a.proxyOf),this.proxyOf.nodes.indexOf(a))},s.insertAfter=function(a,o){var l=this.index(a),c=this.normalize(o,this.proxyOf.nodes[l]).reverse();l=this.index(a);for(var u=_create_for_of_iterator_helper_loose(c),f;!(f=u()).done;){var d=f.value;this.proxyOf.nodes.splice(l+1,0,d)}var p;for(var m in this.indexes)p=this.indexes[m],l<p&&(this.indexes[m]=p+c.length);return this.markDirty(),this},s.insertBefore=function(a,o){var l=this.index(a),c=l===0?"prepend":!1,u=this.normalize(o,this.proxyOf.nodes[l],c).reverse();l=this.index(a);for(var f=_create_for_of_iterator_helper_loose(u),d;!(d=f()).done;){var p=d.value;this.proxyOf.nodes.splice(l,0,p)}var m;for(var y in this.indexes)m=this.indexes[y],l<=m&&(this.indexes[y]=m+u.length);return this.markDirty(),this},s.normalize=function(a,o){var l=this;if(typeof a=="string")a=cleanSource$1(parse$4$1(a).nodes);else if(typeof a>"u")a=[];else if(Array.isArray(a)){a=a.slice(0);for(var c=_create_for_of_iterator_helper_loose(a),u;!(u=c()).done;){var f=u.value;f.parent&&f.parent.removeChild(f,"ignore")}}else if(a.type==="root"&&this.type!=="document"){a=a.nodes.slice(0);for(var d=_create_for_of_iterator_helper_loose(a),p;!(p=d()).done;){var m=p.value;m.parent&&m.parent.removeChild(m,"ignore")}}else if(a.type)a=[a];else if(a.prop){if(typeof a.value>"u")throw new Error("Value field is missed in node creation");typeof a.value!="string"&&(a.value=String(a.value)),a=[new Declaration$3$1(a)]}else if(a.selector)a=[new Rule$4$1(a)];else if(a.name)a=[new AtRule$4$1(a)];else if(a.text)a=[new Comment$3$1(a)];else throw new Error("Unknown node type in node creation");var y=a.map(function(b){return b[my$1$1]||e.rebuild(b),b=b.proxyOf,b.parent&&b.parent.removeChild(b),b[isClean$1$1]&&markDirtyUp$1(b),typeof b.raws.before>"u"&&o&&typeof o.raws.before<"u"&&(b.raws.before=o.raws.before.replace(/\S/g,"")),b.parent=l.proxyOf,b});return y},s.prepend=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];o=o.reverse();for(var c=_create_for_of_iterator_helper_loose(o),u;!(u=c()).done;){for(var f=u.value,d=this.normalize(f,this.first,"prepend").reverse(),p=_create_for_of_iterator_helper_loose(d),m;!(m=p()).done;){var y=m.value;this.proxyOf.nodes.unshift(y)}for(var b in this.indexes)this.indexes[b]=this.indexes[b]+d.length}return this.markDirty(),this},s.push=function(a){return a.parent=this,this.proxyOf.nodes.push(a),this},s.removeAll=function(){for(var a=_create_for_of_iterator_helper_loose(this.proxyOf.nodes),o;!(o=a()).done;){var l=o.value;l.parent=void 0}return this.proxyOf.nodes=[],this.markDirty(),this},s.removeChild=function(a){a=this.index(a),this.proxyOf.nodes[a].parent=void 0,this.proxyOf.nodes.splice(a,1);var o;for(var l in this.indexes)o=this.indexes[l],o>=a&&(this.indexes[l]=o-1);return this.markDirty(),this},s.replaceValues=function(a,o,l){return l||(l=o,o={}),this.walkDecls(function(c){o.props&&!o.props.includes(c.prop)||o.fast&&!c.value.includes(o.fast)||(c.value=c.value.replace(a,l))}),this.markDirty(),this},s.some=function(a){return this.nodes.some(a)},s.walk=function(a){return this.each(function(o,l){var c;try{c=a(o,l)}catch(u){throw o.addToError(u)}return c!==!1&&o.walk&&(c=o.walk(a)),c})},s.walkAtRules=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="atrule"&&a.test(l.name))return o(l,c)}):this.walk(function(l,c){if(l.type==="atrule"&&l.name===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="atrule")return o(l,c)}))},s.walkComments=function(a){return this.walk(function(o,l){if(o.type==="comment")return a(o,l)})},s.walkDecls=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="decl"&&a.test(l.prop))return o(l,c)}):this.walk(function(l,c){if(l.type==="decl"&&l.prop===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="decl")return o(l,c)}))},s.walkRules=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="rule"&&a.test(l.selector))return o(l,c)}):this.walk(function(l,c){if(l.type==="rule"&&l.selector===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="rule")return o(l,c)}))},_create_class(e,[{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}]),e})(Node$1$1);Container$7$1.registerParse=function(t){parse$4$1=t};Container$7$1.registerRule=function(t){Rule$4$1=t};Container$7$1.registerAtRule=function(t){AtRule$4$1=t};Container$7$1.registerRoot=function(t){Root$6$1=t};var container$1=Container$7$1;Container$7$1.default=Container$7$1;Container$7$1.rebuild=function(t){t.type==="atrule"?Object.setPrototypeOf(t,AtRule$4$1.prototype):t.type==="rule"?Object.setPrototypeOf(t,Rule$4$1.prototype):t.type==="decl"?Object.setPrototypeOf(t,Declaration$3$1.prototype):t.type==="comment"?Object.setPrototypeOf(t,Comment$3$1.prototype):t.type==="root"&&Object.setPrototypeOf(t,Root$6$1.prototype),t[my$1$1]=!0,t.nodes&&t.nodes.forEach(function(e){Container$7$1.rebuild(e)})};var Container$6$1=container$1,LazyResult$4$1,Processor$3$1,Document$3$1=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,_extends({type:"document"},r))||this,a.nodes||(a.nodes=[]),a}var s=e.prototype;return s.toResult=function(a){a===void 0&&(a={});var o=new LazyResult$4$1(new Processor$3$1,this,a);return o.stringify()},e})(Container$6$1);Document$3$1.registerLazyResult=function(t){LazyResult$4$1=t};Document$3$1.registerProcessor=function(t){Processor$3$1=t};var document$1$1=Document$3$1;Document$3$1.default=Document$3$1;var Warning$2$1=(function(){function t(s,r){if(r===void 0&&(r={}),this.type="warning",this.text=s,r.node&&r.node.source){var a=r.node.rangeBy(r);this.line=a.start.line,this.column=a.start.column,this.endLine=a.end.line,this.endColumn=a.end.column}for(var o in r)this[o]=r[o]}var e=t.prototype;return e.toString=function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},t})(),warning$1=Warning$2$1;Warning$2$1.default=Warning$2$1;var Warning$1$1=warning$1,Result$3$1=(function(){function t(s,r,a){this.processor=s,this.messages=[],this.root=r,this.opts=a,this.css=void 0,this.map=void 0}var e=t.prototype;return e.toString=function(){return this.css},e.warn=function(r,a){a===void 0&&(a={}),a.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(a.plugin=this.lastPlugin.postcssPlugin);var o=new Warning$1$1(r,a);return this.messages.push(o),o},e.warnings=function(){return this.messages.filter(function(r){return r.type==="warning"})},_create_class(t,[{key:"content",get:function(){return this.css}}]),t})(),result$1=Result$3$1;Result$3$1.default=Result$3$1;var SINGLE_QUOTE$1=39,DOUBLE_QUOTE$1=34,BACKSLASH$1=92,SLASH$1=47,NEWLINE$1=10,SPACE$1=32,FEED$1=12,TAB$1=9,CR$1=13,OPEN_SQUARE$1=91,CLOSE_SQUARE$1=93,OPEN_PARENTHESES$1=40,CLOSE_PARENTHESES$1=41,OPEN_CURLY$1=123,CLOSE_CURLY$1=125,SEMICOLON$1=59,ASTERISK$1=42,COLON$1=58,AT$1=64,RE_AT_END$1=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END$1=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET$1=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE$1=/[\da-f]/i,tokenize$1=function t(e,s){s===void 0&&(s={});var r=e.css.valueOf(),a=s.ignoreErrors,o,l,c,u,f,d,p,m,y,b,E=r.length,C=0,j=[],B=[];function D(){return C}function F(Q){throw e.error("Unclosed "+Q,C)}function q(){return B.length===0&&C>=E}function V(Q){if(B.length)return B.pop();if(!(C>=E)){var W=Q?Q.ignoreUnclosed:!1;switch(o=r.charCodeAt(C),o){case NEWLINE$1:case SPACE$1:case TAB$1:case CR$1:case FEED$1:{l=C;do l+=1,o=r.charCodeAt(l);while(o===SPACE$1||o===NEWLINE$1||o===TAB$1||o===CR$1||o===FEED$1);b=["space",r.slice(C,l)],C=l-1;break}case OPEN_SQUARE$1:case CLOSE_SQUARE$1:case OPEN_CURLY$1:case CLOSE_CURLY$1:case COLON$1:case SEMICOLON$1:case CLOSE_PARENTHESES$1:{var Z=String.fromCharCode(o);b=[Z,Z,C];break}case OPEN_PARENTHESES$1:{if(m=j.length?j.pop()[1]:"",y=r.charCodeAt(C+1),m==="url"&&y!==SINGLE_QUOTE$1&&y!==DOUBLE_QUOTE$1&&y!==SPACE$1&&y!==NEWLINE$1&&y!==TAB$1&&y!==FEED$1&&y!==CR$1){l=C;do{if(d=!1,l=r.indexOf(")",l+1),l===-1)if(a||W){l=C;break}else F("bracket");for(p=l;r.charCodeAt(p-1)===BACKSLASH$1;)p-=1,d=!d}while(d);b=["brackets",r.slice(C,l+1),C,l],C=l}else l=r.indexOf(")",C+1),u=r.slice(C,l+1),l===-1||RE_BAD_BRACKET$1.test(u)?b=["(","(",C]:(b=["brackets",u,C,l],C=l);break}case SINGLE_QUOTE$1:case DOUBLE_QUOTE$1:{c=o===SINGLE_QUOTE$1?"'":'"',l=C;do{if(d=!1,l=r.indexOf(c,l+1),l===-1)if(a||W){l=C+1;break}else F("string");for(p=l;r.charCodeAt(p-1)===BACKSLASH$1;)p-=1,d=!d}while(d);b=["string",r.slice(C,l+1),C,l],C=l;break}case AT$1:{RE_AT_END$1.lastIndex=C+1,RE_AT_END$1.test(r),RE_AT_END$1.lastIndex===0?l=r.length-1:l=RE_AT_END$1.lastIndex-2,b=["at-word",r.slice(C,l+1),C,l],C=l;break}case BACKSLASH$1:{for(l=C,f=!0;r.charCodeAt(l+1)===BACKSLASH$1;)l+=1,f=!f;if(o=r.charCodeAt(l+1),f&&o!==SLASH$1&&o!==SPACE$1&&o!==NEWLINE$1&&o!==TAB$1&&o!==CR$1&&o!==FEED$1&&(l+=1,RE_HEX_ESCAPE$1.test(r.charAt(l)))){for(;RE_HEX_ESCAPE$1.test(r.charAt(l+1));)l+=1;r.charCodeAt(l+1)===SPACE$1&&(l+=1)}b=["word",r.slice(C,l+1),C,l],C=l;break}default:{o===SLASH$1&&r.charCodeAt(C+1)===ASTERISK$1?(l=r.indexOf("*/",C+2)+1,l===0&&(a||W?l=r.length:F("comment")),b=["comment",r.slice(C,l+1),C,l],C=l):(RE_WORD_END$1.lastIndex=C+1,RE_WORD_END$1.test(r),RE_WORD_END$1.lastIndex===0?l=r.length-1:l=RE_WORD_END$1.lastIndex-2,b=["word",r.slice(C,l+1),C,l],j.push(b),C=l);break}}return C++,b}}function ee(Q){B.push(Q)}return{back:ee,endOfFile:q,nextToken:V,position:D}},Container$5$1=container$1,AtRule$3$1=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,r)||this,a.type="atrule",a}var s=e.prototype;return s.append=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c;return this.proxyOf.nodes||(this.nodes=[]),(c=t.prototype.append).call.apply(c,[].concat([this],o))},s.prepend=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c;return this.proxyOf.nodes||(this.nodes=[]),(c=t.prototype.prepend).call.apply(c,[].concat([this],o))},e})(Container$5$1),atRule$1=AtRule$3$1;AtRule$3$1.default=AtRule$3$1;Container$5$1.registerAtRule(AtRule$3$1);var Container$4$1=container$1,LazyResult$3$1,Processor$2$1,Root$5$1=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,r)||this,a.type="root",a.nodes||(a.nodes=[]),a}var s=e.prototype;return s.normalize=function(a,o,l){var c=t.prototype.normalize.call(this,a);if(o){if(l==="prepend")this.nodes.length>1?o.raws.before=this.nodes[1].raws.before:delete o.raws.before;else if(this.first!==o)for(var u=_create_for_of_iterator_helper_loose(c),f;!(f=u()).done;){var d=f.value;d.raws.before=o.raws.before}}return c},s.removeChild=function(a,o){var l=this.index(a);return!o&&l===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[l].raws.before),t.prototype.removeChild.call(this,a)},s.toResult=function(a){a===void 0&&(a={});var o=new LazyResult$3$1(new Processor$2$1,this,a);return o.stringify()},e})(Container$4$1);Root$5$1.registerLazyResult=function(t){LazyResult$3$1=t};Root$5$1.registerProcessor=function(t){Processor$2$1=t};var root$1=Root$5$1;Root$5$1.default=Root$5$1;Container$4$1.registerRoot(Root$5$1);var list$2$1={comma:function t(e){return list$2$1.split(e,[","],!0)},space:function t(e){var s=[" ",`
`,"	"];return list$2$1.split(e,s)},split:function t(e,s,r){for(var a=[],o="",l=!1,c=0,u=!1,f="",d=!1,p=_create_for_of_iterator_helper_loose(e),m;!(m=p()).done;){var y=m.value;d?d=!1:y==="\\"?d=!0:u?y===f&&(u=!1):y==='"'||y==="'"?(u=!0,f=y):y==="("?c+=1:y===")"?c>0&&(c-=1):c===0&&s.includes(y)&&(l=!0),l?(o!==""&&a.push(o.trim()),o="",l=!1):o+=y}return(r||o!=="")&&a.push(o.trim()),a}},list_1$1=list$2$1;list$2$1.default=list$2$1;var Container$3$1=container$1,list$1$1=list_1$1,Rule$3$1=(function(t){_inherits(e,t);function e(s){var r;return r=t.call(this,s)||this,r.type="rule",r.nodes||(r.nodes=[]),r}return _create_class(e,[{key:"selectors",get:function(){return list$1$1.comma(this.selector)},set:function(r){var a=this.selector?this.selector.match(/,\s*/):null,o=a?a[0]:","+this.raw("between","beforeOpen");this.selector=r.join(o)}}]),e})(Container$3$1),rule$1=Rule$3$1;Rule$3$1.default=Rule$3$1;Container$3$1.registerRule(Rule$3$1);var Declaration$2$1=declaration$1,tokenizer2$1=tokenize$1,Comment$2$1=comment$1,AtRule$2$1=atRule$1,Root$4$1=root$1,Rule$2$1=rule$1,SAFE_COMMENT_NEIGHBOR$1={empty:!0,space:!0};function findLastWithPosition$1(t){for(var e=t.length-1;e>=0;e--){var s=t[e],r=s[3]||s[2];if(r)return r}}var Parser$1$1=(function(){function t(s){this.input=s,this.root=new Root$4$1,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:s,start:{column:1,line:1,offset:0}}}var e=t.prototype;return e.atrule=function(r){var a=new AtRule$2$1;a.name=r[1].slice(1),a.name===""&&this.unnamedAtrule(a,r),this.init(a,r[2]);for(var o,l,c,u=!1,f=!1,d=[],p=[];!this.tokenizer.endOfFile();){if(r=this.tokenizer.nextToken(),o=r[0],o==="("||o==="["?p.push(o==="("?")":"]"):o==="{"&&p.length>0?p.push("}"):o===p[p.length-1]&&p.pop(),p.length===0)if(o===";"){a.source.end=this.getPosition(r[2]),a.source.end.offset++,this.semicolon=!0;break}else if(o==="{"){f=!0;break}else if(o==="}"){if(d.length>0){for(c=d.length-1,l=d[c];l&&l[0]==="space";)l=d[--c];l&&(a.source.end=this.getPosition(l[3]||l[2]),a.source.end.offset++)}this.end(r);break}else d.push(r);else d.push(r);if(this.tokenizer.endOfFile()){u=!0;break}}a.raws.between=this.spacesAndCommentsFromEnd(d),d.length?(a.raws.afterName=this.spacesAndCommentsFromStart(d),this.raw(a,"params",d),u&&(r=d[d.length-1],a.source.end=this.getPosition(r[3]||r[2]),a.source.end.offset++,this.spaces=a.raws.between,a.raws.between="")):(a.raws.afterName="",a.params=""),f&&(a.nodes=[],this.current=a)},e.checkMissedSemicolon=function(r){var a=this.colon(r);if(a!==!1){for(var o=0,l,c=a-1;c>=0&&(l=r[c],!(l[0]!=="space"&&(o+=1,o===2)));c--);throw this.input.error("Missed semicolon",l[0]==="word"?l[3]+1:l[2])}},e.colon=function(r){for(var a=0,o,l,c,u=_create_for_of_iterator_helper_loose(r.entries()),f;!(f=u()).done;){var d=f.value,p=d[0],m=d[1];if(o=m,l=o[0],l==="("&&(a+=1),l===")"&&(a-=1),a===0&&l===":")if(!c)this.doubleColon(o);else{if(c[0]==="word"&&c[1]==="progid")continue;return p}c=o}return!1},e.comment=function(r){var a=new Comment$2$1;this.init(a,r[2]),a.source.end=this.getPosition(r[3]||r[2]),a.source.end.offset++;var o=r[1].slice(2,-2);if(/^\s*$/.test(o))a.text="",a.raws.left=o,a.raws.right="";else{var l=o.match(/^(\s*)([^]*\S)(\s*)$/);a.text=l[2],a.raws.left=l[1],a.raws.right=l[3]}},e.createTokenizer=function(){this.tokenizer=tokenizer2$1(this.input)},e.decl=function(r,a){var o=new Declaration$2$1;this.init(o,r[0][2]);var l=r[r.length-1];for(l[0]===";"&&(this.semicolon=!0,r.pop()),o.source.end=this.getPosition(l[3]||l[2]||findLastWithPosition$1(r)),o.source.end.offset++;r[0][0]!=="word";)r.length===1&&this.unknownWord(r),o.raws.before+=r.shift()[1];for(o.source.start=this.getPosition(r[0][2]),o.prop="";r.length;){var c=r[0][0];if(c===":"||c==="space"||c==="comment")break;o.prop+=r.shift()[1]}o.raws.between="";for(var u;r.length;)if(u=r.shift(),u[0]===":"){o.raws.between+=u[1];break}else u[0]==="word"&&/\w/.test(u[1])&&this.unknownWord([u]),o.raws.between+=u[1];(o.prop[0]==="_"||o.prop[0]==="*")&&(o.raws.before+=o.prop[0],o.prop=o.prop.slice(1));for(var f=[],d;r.length&&(d=r[0][0],!(d!=="space"&&d!=="comment"));)f.push(r.shift());this.precheckMissedSemicolon(r);for(var p=r.length-1;p>=0;p--){if(u=r[p],u[1].toLowerCase()==="!important"){o.important=!0;var m=this.stringFrom(r,p);m=this.spacesFromEnd(r)+m,m!==" !important"&&(o.raws.important=m);break}else if(u[1].toLowerCase()==="important"){for(var y=r.slice(0),b="",E=p;E>0;E--){var C=y[E][0];if(b.trim().indexOf("!")===0&&C!=="space")break;b=y.pop()[1]+b}b.trim().indexOf("!")===0&&(o.important=!0,o.raws.important=b,r=y)}if(u[0]!=="space"&&u[0]!=="comment")break}var j=r.some(function(B){return B[0]!=="space"&&B[0]!=="comment"});j&&(o.raws.between+=f.map(function(B){return B[1]}).join(""),f=[]),this.raw(o,"value",f.concat(r),a),o.value.includes(":")&&!a&&this.checkMissedSemicolon(r)},e.doubleColon=function(r){throw this.input.error("Double colon",{offset:r[2]},{offset:r[2]+r[1].length})},e.emptyRule=function(r){var a=new Rule$2$1;this.init(a,r[2]),a.selector="",a.raws.between="",this.current=a},e.end=function(r){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(r[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(r)},e.endFile=function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())},e.freeSemicolon=function(r){if(this.spaces+=r[1],this.current.nodes){var a=this.current.nodes[this.current.nodes.length-1];a&&a.type==="rule"&&!a.raws.ownSemicolon&&(a.raws.ownSemicolon=this.spaces,this.spaces="")}},e.getPosition=function(r){var a=this.input.fromOffset(r);return{column:a.col,line:a.line,offset:r}},e.init=function(r,a){this.current.push(r),r.source={input:this.input,start:this.getPosition(a)},r.raws.before=this.spaces,this.spaces="",r.type!=="comment"&&(this.semicolon=!1)},e.other=function(r){for(var a=!1,o=null,l=!1,c=null,u=[],f=r[1].startsWith("--"),d=[],p=r;p;){if(o=p[0],d.push(p),o==="("||o==="[")c||(c=p),u.push(o==="("?")":"]");else if(f&&l&&o==="{")c||(c=p),u.push("}");else if(u.length===0)if(o===";")if(l){this.decl(d,f);return}else break;else if(o==="{"){this.rule(d);return}else if(o==="}"){this.tokenizer.back(d.pop()),a=!0;break}else o===":"&&(l=!0);else o===u[u.length-1]&&(u.pop(),u.length===0&&(c=null));p=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(a=!0),u.length>0&&this.unclosedBracket(c),a&&l){if(!f)for(;d.length&&(p=d[d.length-1][0],!(p!=="space"&&p!=="comment"));)this.tokenizer.back(d.pop());this.decl(d,f)}else this.unknownWord(d)},e.parse=function(){for(var r;!this.tokenizer.endOfFile();)switch(r=this.tokenizer.nextToken(),r[0]){case"space":this.spaces+=r[1];break;case";":this.freeSemicolon(r);break;case"}":this.end(r);break;case"comment":this.comment(r);break;case"at-word":this.atrule(r);break;case"{":this.emptyRule(r);break;default:this.other(r);break}this.endFile()},e.precheckMissedSemicolon=function(){},e.raw=function(r,a,o,l){for(var c,u,f=o.length,d="",p=!0,m,y,b=0;b<f;b+=1)c=o[b],u=c[0],u==="space"&&b===f-1&&!l?p=!1:u==="comment"?(y=o[b-1]?o[b-1][0]:"empty",m=o[b+1]?o[b+1][0]:"empty",!SAFE_COMMENT_NEIGHBOR$1[y]&&!SAFE_COMMENT_NEIGHBOR$1[m]?d.slice(-1)===","?p=!1:d+=c[1]:p=!1):d+=c[1];if(!p){var E=o.reduce(function(C,j){return C+j[1]},"");r.raws[a]={raw:E,value:d}}r[a]=d},e.rule=function(r){r.pop();var a=new Rule$2$1;this.init(a,r[0][2]),a.raws.between=this.spacesAndCommentsFromEnd(r),this.raw(a,"selector",r),this.current=a},e.spacesAndCommentsFromEnd=function(r){for(var a,o="";r.length&&(a=r[r.length-1][0],!(a!=="space"&&a!=="comment"));)o=r.pop()[1]+o;return o},e.spacesAndCommentsFromStart=function(r){for(var a,o="";r.length&&(a=r[0][0],!(a!=="space"&&a!=="comment"));)o+=r.shift()[1];return o},e.spacesFromEnd=function(r){for(var a,o="";r.length&&(a=r[r.length-1][0],a==="space");)o=r.pop()[1]+o;return o},e.stringFrom=function(r,a){for(var o="",l=a;l<r.length;l++)o+=r[l][1];return r.splice(a,r.length-a),o},e.unclosedBlock=function(){var r=this.current.source.start;throw this.input.error("Unclosed block",r.line,r.column)},e.unclosedBracket=function(r){throw this.input.error("Unclosed bracket",{offset:r[2]},{offset:r[2]+1})},e.unexpectedClose=function(r){throw this.input.error("Unexpected }",{offset:r[2]},{offset:r[2]+1})},e.unknownWord=function(r){throw this.input.error("Unknown word",{offset:r[0][2]},{offset:r[0][2]+r[0][1].length})},e.unnamedAtrule=function(r,a){throw this.input.error("At-rule without name",{offset:a[2]},{offset:a[2]+a[1].length})},t})(),parser$1=Parser$1$1,Container$2$1=container$1,Parser2$1=parser$1,Input$2$1=input$1;function parse$3$1(t,e){var s=new Input$2$1(t,e),r=new Parser2$1(s);try{r.parse()}catch(a){throw a}return r.root}var parse_1$1=parse$3$1;parse$3$1.default=parse$3$1;Container$2$1.registerParse(parse$3$1);var isClean$3=symbols$1.isClean,my$3=symbols$1.my,MapGenerator$1$1=mapGenerator$1,stringify$2$1=stringify_1$1,Container$1$1=container$1,Document$2$1=document$1$1,Result$2$1=result$1,parse$2$1=parse_1$1,Root$3$1=root$1,TYPE_TO_CLASS_NAME$1={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS$1={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS$1={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN$1=0;function isPromise$1(t){return(typeof t>"u"?"undefined":_type_of(t))==="object"&&typeof t.then=="function"}function getEvents$1(t){var e=!1,s=TYPE_TO_CLASS_NAME$1[t.type];return t.type==="decl"?e=t.prop.toLowerCase():t.type==="atrule"&&(e=t.name.toLowerCase()),e&&t.append?[s,s+"-"+e,CHILDREN$1,s+"Exit",s+"Exit-"+e]:e?[s,s+"-"+e,s+"Exit",s+"Exit-"+e]:t.append?[s,CHILDREN$1,s+"Exit"]:[s,s+"Exit"]}function toStack$1(t){var e;return t.type==="document"?e=["Document",CHILDREN$1,"DocumentExit"]:t.type==="root"?e=["Root",CHILDREN$1,"RootExit"]:e=getEvents$1(t),{eventIndex:0,events:e,iterator:0,node:t,visitorIndex:0,visitors:[]}}function cleanMarks$1(t){return t[isClean$3]=!1,t.nodes&&t.nodes.forEach(function(e){return cleanMarks$1(e)}),t}var postcss$2$1={},LazyResult$2$1=(function(){function t(s,r,a){var o=this;this.stringified=!1,this.processed=!1;var l;if((typeof r>"u"?"undefined":_type_of(r))==="object"&&r!==null&&(r.type==="root"||r.type==="document"))l=cleanMarks$1(r);else if(_instanceof(r,t)||_instanceof(r,Result$2$1))l=cleanMarks$1(r.root),r.map&&(typeof a.map>"u"&&(a.map={}),a.map.inline||(a.map.inline=!1),a.map.prev=r.map);else{var c=parse$2$1;a.syntax&&(c=a.syntax.parse),a.parser&&(c=a.parser),c.parse&&(c=c.parse);try{l=c(r,a)}catch(u){this.processed=!0,this.error=u}l&&!l[my$3]&&Container$1$1.rebuild(l)}this.result=new Result$2$1(s,l,a),this.helpers=_extends({},postcss$2$1,{postcss:postcss$2$1,result:this.result}),this.plugins=this.processor.plugins.map(function(u){return(typeof u>"u"?"undefined":_type_of(u))==="object"&&u.prepare?_extends({},u,u.prepare(o.result)):u})}var e=t.prototype;return e.async=function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)},e.catch=function(r){return this.async().catch(r)},e.finally=function(r){return this.async().then(r,r)},e.getAsyncError=function(){throw new Error("Use process(css).then(cb) to work with async plugins")},e.handleError=function(r,a){var o=this.result.lastPlugin;try{if(a&&a.addToError(r),this.error=r,r.name==="CssSyntaxError"&&!r.plugin)r.plugin=o.postcssPlugin,r.setMessage();else if(o.postcssVersion)var l,c,u,f,d}catch(p){console&&console.error&&console.error(p)}return r},e.prepareVisitors=function(){var r=this;this.listeners={};for(var a=function(d,p,m){r.listeners[p]||(r.listeners[p]=[]),r.listeners[p].push([d,m])},o=_create_for_of_iterator_helper_loose(this.plugins),l;!(l=o()).done;){var c=l.value;if((typeof c>"u"?"undefined":_type_of(c))==="object")for(var u in c){if(!PLUGIN_PROPS$1[u]&&/^[A-Z]/.test(u))throw new Error("Unknown event "+u+" in "+c.postcssPlugin+". Try to update PostCSS ("+this.processor.version+" now).");if(!NOT_VISITORS$1[u])if(_type_of(c[u])==="object")for(var f in c[u])f==="*"?a(c,u,c[u][f]):a(c,u+"-"+f.toLowerCase(),c[u][f]);else typeof c[u]=="function"&&a(c,u,c[u])}}this.hasListener=Object.keys(this.listeners).length>0},e.runAsync=function(){var r=this;return _async_to_generator(function(){var a,o,l,c,u,f,d,p,m,y,b,E;return _ts_generator(this,function(C){switch(C.label){case 0:r.plugin=0,a=0,C.label=1;case 1:if(!(a<r.plugins.length))return[3,6];if(o=r.plugins[a],l=r.runOnRoot(o),!isPromise$1(l))return[3,5];C.label=2;case 2:return C.trys.push([2,4,,5]),[4,l];case 3:return C.sent(),[3,5];case 4:throw c=C.sent(),r.handleError(c);case 5:return a++,[3,1];case 6:if(r.prepareVisitors(),!r.hasListener)return[3,18];u=r.result.root,C.label=7;case 7:if(u[isClean$3])return[3,14];u[isClean$3]=!0,f=[toStack$1(u)],C.label=8;case 8:if(!(f.length>0))return[3,13];if(d=r.visitTick(f),!isPromise$1(d))return[3,12];C.label=9;case 9:return C.trys.push([9,11,,12]),[4,d];case 10:return C.sent(),[3,12];case 11:throw p=C.sent(),m=f[f.length-1].node,r.handleError(p,m);case 12:return[3,8];case 13:return[3,7];case 14:if(!r.listeners.OnceExit)return[3,18];y=function(){var j,B,D,F,q;return _ts_generator(this,function(V){switch(V.label){case 0:j=E.value,B=j[0],D=j[1],r.result.lastPlugin=B,V.label=1;case 1:return V.trys.push([1,6,,7]),u.type!=="document"?[3,3]:(F=u.nodes.map(function(ee){return D(ee,r.helpers)}),[4,Promise.all(F)]);case 2:return V.sent(),[3,5];case 3:return[4,D(u,r.helpers)];case 4:V.sent(),V.label=5;case 5:return[3,7];case 6:throw q=V.sent(),r.handleError(q);case 7:return[2]}})},b=_create_for_of_iterator_helper_loose(r.listeners.OnceExit),C.label=15;case 15:return(E=b()).done?[3,18]:[5,_ts_values(y())];case 16:C.sent(),C.label=17;case 17:return[3,15];case 18:return r.processed=!0,[2,r.stringify()]}})})()},e.runOnRoot=function(r){var a=this;this.result.lastPlugin=r;try{if((typeof r>"u"?"undefined":_type_of(r))==="object"&&r.Once){if(this.result.root.type==="document"){var o=this.result.root.nodes.map(function(l){return r.Once(l,a.helpers)});return isPromise$1(o[0])?Promise.all(o):o}return r.Once(this.result.root,this.helpers)}else if(typeof r=="function")return r(this.result.root,this.result)}catch(l){throw this.handleError(l)}},e.stringify=function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var r=this.result.opts,a=stringify$2$1;r.syntax&&(a=r.syntax.stringify),r.stringifier&&(a=r.stringifier),a.stringify&&(a=a.stringify);var o=new MapGenerator$1$1(a,this.result.root,this.result.opts),l=o.generate();return this.result.css=l[0],this.result.map=l[1],this.result},e.sync=function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(var r=_create_for_of_iterator_helper_loose(this.plugins),a;!(a=r()).done;){var o=a.value,l=this.runOnRoot(o);if(isPromise$1(l))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){for(var c=this.result.root;!c[isClean$3];)c[isClean$3]=!0,this.walkSync(c);if(this.listeners.OnceExit)if(c.type==="document")for(var u=_create_for_of_iterator_helper_loose(c.nodes),f;!(f=u()).done;){var d=f.value;this.visitSync(this.listeners.OnceExit,d)}else this.visitSync(this.listeners.OnceExit,c)}return this.result},e.then=function(r,a){return this.async().then(r,a)},e.toString=function(){return this.css},e.visitSync=function(r,a){for(var o=_create_for_of_iterator_helper_loose(r),l;!(l=o()).done;){var c=l.value,u=c[0],f=c[1];this.result.lastPlugin=u;var d=void 0;try{d=f(a,this.helpers)}catch(p){throw this.handleError(p,a.proxyOf)}if(a.type!=="root"&&a.type!=="document"&&!a.parent)return!0;if(isPromise$1(d))throw this.getAsyncError()}},e.visitTick=function(r){var a=r[r.length-1],o=a.node,l=a.visitors;if(o.type!=="root"&&o.type!=="document"&&!o.parent){r.pop();return}if(l.length>0&&a.visitorIndex<l.length){var c=l[a.visitorIndex],u=c[0],f=c[1];a.visitorIndex+=1,a.visitorIndex===l.length&&(a.visitors=[],a.visitorIndex=0),this.result.lastPlugin=u;try{return f(o.toProxy(),this.helpers)}catch(b){throw this.handleError(b,o)}}if(a.iterator!==0){for(var d=a.iterator,p;p=o.nodes[o.indexes[d]];)if(o.indexes[d]+=1,!p[isClean$3]){p[isClean$3]=!0,r.push(toStack$1(p));return}a.iterator=0,delete o.indexes[d]}for(var m=a.events;a.eventIndex<m.length;){var y=m[a.eventIndex];if(a.eventIndex+=1,y===CHILDREN$1){o.nodes&&o.nodes.length&&(o[isClean$3]=!0,a.iterator=o.getIterator());return}else if(this.listeners[y]){a.visitors=this.listeners[y];return}}r.pop()},e.walkSync=function(r){var a=this;r[isClean$3]=!0;for(var o=getEvents$1(r),l=_create_for_of_iterator_helper_loose(o),c;!(c=l()).done;){var u=c.value;if(u===CHILDREN$1)r.nodes&&r.each(function(d){d[isClean$3]||a.walkSync(d)});else{var f=this.listeners[u];if(f&&this.visitSync(f,r.toProxy()))return}}},e.warnings=function(){return this.sync().warnings()},_create_class(t,[{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]),t})();LazyResult$2$1.registerPostcss=function(t){postcss$2$1=t};var lazyResult$1=LazyResult$2$1;LazyResult$2$1.default=LazyResult$2$1;Root$3$1.registerLazyResult(LazyResult$2$1);Document$2$1.registerLazyResult(LazyResult$2$1);var MapGenerator2$1=mapGenerator$1,stringify$1$1=stringify_1$1,parse$1$1=parse_1$1,Result$1$1=result$1,NoWorkResult$1$1=(function(){function t(s,r,a){r=r.toString(),this.stringified=!1,this._processor=s,this._css=r,this._opts=a,this._map=void 0;var o,l=stringify$1$1;this.result=new Result$1$1(this._processor,o,this._opts),this.result.css=r;var c=this;Object.defineProperty(this.result,"root",{get:function(){return c.root}});var u=new MapGenerator2$1(l,o,this._opts,r);if(u.isMap()){var f=u.generate(),d=f[0],p=f[1];d&&(this.result.css=d),p&&(this.result.map=p)}else u.clearAnnotation(),this.result.css=u.css}var e=t.prototype;return e.async=function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)},e.catch=function(r){return this.async().catch(r)},e.finally=function(r){return this.async().then(r,r)},e.sync=function(){if(this.error)throw this.error;return this.result},e.then=function(r,a){return this.async().then(r,a)},e.toString=function(){return this._css},e.warnings=function(){return[]},_create_class(t,[{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var r,a=parse$1$1;try{r=a(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=r,r}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]),t})(),noWorkResult$1=NoWorkResult$1$1;NoWorkResult$1$1.default=NoWorkResult$1$1;var NoWorkResult2$1=noWorkResult$1,LazyResult$1$1=lazyResult$1,Document$1$1=document$1$1,Root$2$1=root$1,Processor$1$1=(function(){function t(s){s===void 0&&(s=[]),this.version="8.4.38",this.plugins=this.normalize(s)}var e=t.prototype;return e.normalize=function(r){for(var a=[],o=_create_for_of_iterator_helper_loose(r),l;!(l=o()).done;){var c=l.value;if(c.postcss===!0?c=c():c.postcss&&(c=c.postcss),(typeof c>"u"?"undefined":_type_of(c))==="object"&&Array.isArray(c.plugins))a=a.concat(c.plugins);else if((typeof c>"u"?"undefined":_type_of(c))==="object"&&c.postcssPlugin)a.push(c);else if(typeof c=="function")a.push(c);else if(!((typeof c>"u"?"undefined":_type_of(c))==="object"&&(c.parse||c.stringify)))throw new Error(c+" is not a PostCSS plugin")}return a},e.process=function(r,a){return a===void 0&&(a={}),!this.plugins.length&&!a.parser&&!a.stringifier&&!a.syntax?new NoWorkResult2$1(this,r,a):new LazyResult$1$1(this,r,a)},e.use=function(r){return this.plugins=this.plugins.concat(this.normalize([r])),this},t})(),processor$1=Processor$1$1;Processor$1$1.default=Processor$1$1;Root$2$1.registerProcessor(Processor$1$1);Document$1$1.registerProcessor(Processor$1$1);var Declaration$1$1=declaration$1,PreviousMap2$1=previousMap$1,Comment$1$1=comment$1,AtRule$1$1=atRule$1,Input$1$1=input$1,Root$1$1=root$1,Rule$1$1=rule$1;function fromJSON$1$1(t,e){if(Array.isArray(t))return t.map(function(p){return fromJSON$1$1(p)});var s=t.inputs,r=_object_without_properties_loose(t,["inputs"]);if(s){e=[];for(var a=_create_for_of_iterator_helper_loose(s),o;!(o=a()).done;){var l=o.value,c=_extends({},l,{__proto__:Input$1$1.prototype});c.map&&(c.map=_extends({},c.map,{__proto__:PreviousMap2$1.prototype})),e.push(c)}}if(r.nodes&&(r.nodes=t.nodes.map(function(p){return fromJSON$1$1(p,e)})),r.source){var u=r.source,f=u.inputId,d=_object_without_properties_loose(u,["inputId"]);r.source=d,f!=null&&(r.source.input=e[f])}if(r.type==="root")return new Root$1$1(r);if(r.type==="decl")return new Declaration$1$1(r);if(r.type==="rule")return new Rule$1$1(r);if(r.type==="comment")return new Comment$1$1(r);if(r.type==="atrule")return new AtRule$1$1(r);throw new Error("Unknown node type: "+t.type)}var fromJSON_1$1=fromJSON$1$1;fromJSON$1$1.default=fromJSON$1$1;var CssSyntaxError2$1=cssSyntaxError$1,Declaration2$1=declaration$1,LazyResult2$1=lazyResult$1,Container2$1=container$1,Processor2$1=processor$1,stringify$5$1=stringify_1$1,fromJSON$2=fromJSON_1$1,Document22=document$1$1,Warning2$1=warning$1,Comment2$1=comment$1,AtRule2$1=atRule$1,Result2$1=result$1,Input2$1=input$1,parse$5=parse_1$1,list$3=list_1$1,Rule2$1=rule$1,Root2$1=root$1,Node2$1=node$1;function postcss$3(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new Processor2$1(e)}postcss$3.plugin=function t(e,s){var r=!1;function a(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),define_process_env_default.LANG&&define_process_env_default.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));var f=s.apply(void 0,[].concat(c));return f.postcssPlugin=e,f.postcssVersion=new Processor2$1().version,f}var o;return Object.defineProperty(a,"postcss",{get:function(){return o||(o=a()),o}}),a.process=function(l,c,u){return postcss$3([a(u)]).process(l,c)},a};postcss$3.stringify=stringify$5$1;postcss$3.parse=parse$5;postcss$3.fromJSON=fromJSON$2;postcss$3.list=list$3;postcss$3.comment=function(t){return new Comment2$1(t)};postcss$3.atRule=function(t){return new AtRule2$1(t)};postcss$3.decl=function(t){return new Declaration2$1(t)};postcss$3.rule=function(t){return new Rule2$1(t)};postcss$3.root=function(t){return new Root2$1(t)};postcss$3.document=function(t){return new Document22(t)};postcss$3.CssSyntaxError=CssSyntaxError2$1;postcss$3.Declaration=Declaration2$1;postcss$3.Container=Container2$1;postcss$3.Processor=Processor2$1;postcss$3.Document=Document22;postcss$3.Comment=Comment2$1;postcss$3.Warning=Warning2$1;postcss$3.AtRule=AtRule2$1;postcss$3.Result=Result2$1;postcss$3.Input=Input2$1;postcss$3.Rule=Rule2$1;postcss$3.Root=Root2$1;postcss$3.Node=Node2$1;LazyResult2$1.registerPostcss(postcss$3);var postcss_1$1=postcss$3;postcss$3.default=postcss$3;var postcss$1$1=getDefaultExportFromCjs$1(postcss_1$1);postcss$1$1.stringify;postcss$1$1.fromJSON;postcss$1$1.plugin;postcss$1$1.parse;postcss$1$1.list;postcss$1$1.document;postcss$1$1.comment;postcss$1$1.atRule;postcss$1$1.rule;postcss$1$1.decl;postcss$1$1.root;postcss$1$1.CssSyntaxError;postcss$1$1.Declaration;postcss$1$1.Container;postcss$1$1.Processor;postcss$1$1.Document;postcss$1$1.Comment;postcss$1$1.Warning;postcss$1$1.AtRule;postcss$1$1.Result;postcss$1$1.Input;postcss$1$1.Rule;postcss$1$1.Root;postcss$1$1.Node;var __defProp2=Object.defineProperty,__defNormalProp2=function(t,e,s){return e in t?__defProp2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s},__publicField2=function(t,e,s){return __defNormalProp2(t,(typeof e>"u"?"undefined":_type_of(e))!=="symbol"?e+"":e,s)};function getDefaultExportFromCjs$2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace$2(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function r(){return _instanceof(this,r)?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),s}var picocolors_browser$2={exports:{}},x$2=String,create$2=function t(){return{isColorSupported:!1,reset:x$2,bold:x$2,dim:x$2,italic:x$2,underline:x$2,inverse:x$2,hidden:x$2,strikethrough:x$2,black:x$2,red:x$2,green:x$2,yellow:x$2,blue:x$2,magenta:x$2,cyan:x$2,white:x$2,gray:x$2,bgBlack:x$2,bgRed:x$2,bgGreen:x$2,bgYellow:x$2,bgBlue:x$2,bgMagenta:x$2,bgCyan:x$2,bgWhite:x$2}};picocolors_browser$2.exports=create$2();picocolors_browser$2.exports.createColors=create$2;var picocolors_browserExports$2=picocolors_browser$2.exports,__viteBrowserExternal$3={},__viteBrowserExternal$1$2=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal$3},Symbol.toStringTag,{value:"Module"})),require$$2$2=getAugmentedNamespace$2(__viteBrowserExternal$1$2),pico$2=picocolors_browserExports$2,terminalHighlight$1$2=require$$2$2,CssSyntaxError$3$2=(function(t){_inherits(e,t);function e(r,a,o,l,c,u){var f;return f=t.call(this,r)||this,f.name="CssSyntaxError",f.reason=r,c&&(f.file=c),l&&(f.source=l),u&&(f.plugin=u),typeof a<"u"&&typeof o<"u"&&(typeof a=="number"?(f.line=a,f.column=o):(f.line=a.line,f.column=a.column,f.endLine=o.line,f.endColumn=o.column)),f.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(f,e),f}var s=e.prototype;return s.setMessage=function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},s.showSourceCode=function(a){var o=this;if(!this.source)return"";var l=this.source;a==null&&(a=pico$2.isColorSupported),terminalHighlight$1$2&&a&&(l=terminalHighlight$1$2(l));var c=l.split(/\r?\n/),u=Math.max(this.line-3,0),f=Math.min(this.line+2,c.length),d=String(f).length,p,m;if(a){var y=pico$2.createColors(!0),b=y.bold,E=y.gray,C=y.red;p=function(j){return b(C(j))},m=function(j){return E(j)}}else p=m=function(j){return j};return c.slice(u,f).map(function(j,B){var D=u+1+B,F=" "+(" "+D).slice(-d)+" | ";if(D===o.line){var q=m(F.replace(/\d/g," "))+j.slice(0,o.column-1).replace(/[^\t]/g," ");return p(">")+m(F)+j+`
 `+q+p("^")}return" "+m(F)+j}).join(`
`)},s.toString=function(){var a=this.showSourceCode();return a&&(a=`

`+a+`
`),this.name+": "+this.message+a},e})(_wrap_native_super(Error)),cssSyntaxError$2=CssSyntaxError$3$2;CssSyntaxError$3$2.default=CssSyntaxError$3$2;var symbols$2={};symbols$2.isClean=Symbol("isClean");symbols$2.my=Symbol("my");var DEFAULT_RAW$2={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize$2(t){return t[0].toUpperCase()+t.slice(1)}var Stringifier$2$2=(function(){function t(s){this.builder=s}var e=t.prototype;return e.atrule=function(r,a){var o="@"+r.name,l=r.params?this.rawValue(r,"params"):"";if(typeof r.raws.afterName<"u"?o+=r.raws.afterName:l&&(o+=" "),r.nodes)this.block(r,o+l);else{var c=(r.raws.between||"")+(a?";":"");this.builder(o+l+c,r)}},e.beforeAfter=function(r,a){var o;r.type==="decl"?o=this.raw(r,null,"beforeDecl"):r.type==="comment"?o=this.raw(r,null,"beforeComment"):a==="before"?o=this.raw(r,null,"beforeRule"):o=this.raw(r,null,"beforeClose");for(var l=r.parent,c=0;l&&l.type!=="root";)c+=1,l=l.parent;if(o.includes(`
`)){var u=this.raw(r,null,"indent");if(u.length)for(var f=0;f<c;f++)o+=u}return o},e.block=function(r,a){var o=this.raw(r,"between","beforeOpen");this.builder(a+o+"{",r,"start");var l;r.nodes&&r.nodes.length?(this.body(r),l=this.raw(r,"after")):l=this.raw(r,"after","emptyBody"),l&&this.builder(l),this.builder("}",r,"end")},e.body=function(r){for(var a=r.nodes.length-1;a>0&&r.nodes[a].type==="comment";)a-=1;for(var o=this.raw(r,"semicolon"),l=0;l<r.nodes.length;l++){var c=r.nodes[l],u=this.raw(c,"before");u&&this.builder(u),this.stringify(c,a!==l||o)}},e.comment=function(r){var a=this.raw(r,"left","commentLeft"),o=this.raw(r,"right","commentRight");this.builder("/*"+a+r.text+o+"*/",r)},e.decl=function(r,a){var o=this.raw(r,"between","colon"),l=r.prop+o+this.rawValue(r,"value");r.important&&(l+=r.raws.important||" !important"),a&&(l+=";"),this.builder(l,r)},e.document=function(r){this.body(r)},e.raw=function(r,a,o){var l;if(o||(o=a),a&&(l=r.raws[a],typeof l<"u"))return l;var c=r.parent;if(o==="before"&&(!c||c.type==="root"&&c.first===r||c&&c.type==="document"))return"";if(!c)return DEFAULT_RAW$2[o];var u=r.root();if(u.rawCache||(u.rawCache={}),typeof u.rawCache[o]<"u")return u.rawCache[o];if(o==="before"||o==="after")return this.beforeAfter(r,o);var f="raw"+capitalize$2(o);return this[f]?l=this[f](u,r):u.walk(function(d){if(l=d.raws[a],typeof l<"u")return!1}),typeof l>"u"&&(l=DEFAULT_RAW$2[o]),u.rawCache[o]=l,l},e.rawBeforeClose=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length>0&&typeof o.raws.after<"u")return a=o.raws.after,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),a&&(a=a.replace(/\S/g,"")),a},e.rawBeforeComment=function(r,a){var o;return r.walkComments(function(l){if(typeof l.raws.before<"u")return o=l.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(a,null,"beforeDecl"):o&&(o=o.replace(/\S/g,"")),o},e.rawBeforeDecl=function(r,a){var o;return r.walkDecls(function(l){if(typeof l.raws.before<"u")return o=l.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(a,null,"beforeRule"):o&&(o=o.replace(/\S/g,"")),o},e.rawBeforeOpen=function(r){var a;return r.walk(function(o){if(o.type!=="decl"&&(a=o.raws.between,typeof a<"u"))return!1}),a},e.rawBeforeRule=function(r){var a;return r.walk(function(o){if(o.nodes&&(o.parent!==r||r.first!==o)&&typeof o.raws.before<"u")return a=o.raws.before,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),a&&(a=a.replace(/\S/g,"")),a},e.rawColon=function(r){var a;return r.walkDecls(function(o){if(typeof o.raws.between<"u")return a=o.raws.between.replace(/[^\s:]/g,""),!1}),a},e.rawEmptyBody=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length===0&&(a=o.raws.after,typeof a<"u"))return!1}),a},e.rawIndent=function(r){if(r.raws.indent)return r.raws.indent;var a;return r.walk(function(o){var l=o.parent;if(l&&l!==r&&l.parent&&l.parent===r&&typeof o.raws.before<"u"){var c=o.raws.before.split(`
`);return a=c[c.length-1],a=a.replace(/\S/g,""),!1}}),a},e.rawSemicolon=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length&&o.last.type==="decl"&&(a=o.raws.semicolon,typeof a<"u"))return!1}),a},e.rawValue=function(r,a){var o=r[a],l=r.raws[a];return l&&l.value===o?l.raw:o},e.root=function(r){this.body(r),r.raws.after&&this.builder(r.raws.after)},e.rule=function(r){this.block(r,this.rawValue(r,"selector")),r.raws.ownSemicolon&&this.builder(r.raws.ownSemicolon,r,"end")},e.stringify=function(r,a){if(!this[r.type])throw new Error("Unknown AST node type "+r.type+". Maybe you need to change PostCSS stringifier.");this[r.type](r,a)},t})(),stringifier$2=Stringifier$2$2;Stringifier$2$2.default=Stringifier$2$2;var Stringifier$1$2=stringifier$2;function stringify$4$2(t,e){var s=new Stringifier$1$2(e);s.stringify(t)}var stringify_1$2=stringify$4$2;stringify$4$2.default=stringify$4$2;var isClean$2$2=symbols$2.isClean,my$2$2=symbols$2.my,CssSyntaxError$2$2=cssSyntaxError$2,Stringifier22=stringifier$2,stringify$3$2=stringify_1$2;function cloneNode$2(t,e){var s=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&r!=="proxyCache"){var a=t[r],o=typeof a>"u"?"undefined":_type_of(a);r==="parent"&&o==="object"?e&&(s[r]=e):r==="source"?s[r]=a:Array.isArray(a)?s[r]=a.map(function(l){return cloneNode$2(l,s)}):(o==="object"&&a!==null&&(a=cloneNode$2(a)),s[r]=a)}return s}var Node$4$2=(function(){function t(s){s===void 0&&(s={}),this.raws={},this[isClean$2$2]=!1,this[my$2$2]=!0;for(var r in s)if(r==="nodes"){this.nodes=[];for(var a=_create_for_of_iterator_helper_loose(s[r]),o;!(o=a()).done;){var l=o.value;typeof l.clone=="function"?this.append(l.clone()):this.append(l)}}else this[r]=s[r]}var e=t.prototype;return e.addToError=function(r){if(r.postcssNode=this,r.stack&&this.source&&/\n\s{4}at /.test(r.stack)){var a=this.source;r.stack=r.stack.replace(/\n\s{4}at /,"$&"+a.input.from+":"+a.start.line+":"+a.start.column+"$&")}return r},e.after=function(r){return this.parent.insertAfter(this,r),this},e.assign=function(r){r===void 0&&(r={});for(var a in r)this[a]=r[a];return this},e.before=function(r){return this.parent.insertBefore(this,r),this},e.cleanRaws=function(r){delete this.raws.before,delete this.raws.after,r||delete this.raws.between},e.clone=function(r){r===void 0&&(r={});var a=cloneNode$2(this);for(var o in r)a[o]=r[o];return a},e.cloneAfter=function(r){r===void 0&&(r={});var a=this.clone(r);return this.parent.insertAfter(this,a),a},e.cloneBefore=function(r){r===void 0&&(r={});var a=this.clone(r);return this.parent.insertBefore(this,a),a},e.error=function(r,a){if(a===void 0&&(a={}),this.source){var o=this.rangeBy(a),l=o.end,c=o.start;return this.source.input.error(r,{column:c.column,line:c.line},{column:l.column,line:l.line},a)}return new CssSyntaxError$2$2(r)},e.getProxyProcessor=function(){return{get:function(a,o){return o==="proxyOf"?a:o==="root"?function(){return a.root().toProxy()}:a[o]},set:function(a,o,l){return a[o]===l||(a[o]=l,(o==="prop"||o==="value"||o==="name"||o==="params"||o==="important"||o==="text")&&a.markDirty()),!0}}},e.markDirty=function(){if(this[isClean$2$2]){this[isClean$2$2]=!1;for(var r=this;r=r.parent;)r[isClean$2$2]=!1}},e.next=function(){if(this.parent){var r=this.parent.index(this);return this.parent.nodes[r+1]}},e.positionBy=function(r,a){var o=this.source.start;if(r.index)o=this.positionInside(r.index,a);else if(r.word){a=this.toString();var l=a.indexOf(r.word);l!==-1&&(o=this.positionInside(l,a))}return o},e.positionInside=function(r,a){for(var o=a||this.toString(),l=this.source.start.column,c=this.source.start.line,u=0;u<r;u++)o[u]===`
`?(l=1,c+=1):l+=1;return{column:l,line:c}},e.prev=function(){if(this.parent){var r=this.parent.index(this);return this.parent.nodes[r-1]}},e.rangeBy=function(r){var a={column:this.source.start.column,line:this.source.start.line},o=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:a.column+1,line:a.line};if(r.word){var l=this.toString(),c=l.indexOf(r.word);c!==-1&&(a=this.positionInside(c,l),o=this.positionInside(c+r.word.length,l))}else r.start?a={column:r.start.column,line:r.start.line}:r.index&&(a=this.positionInside(r.index)),r.end?o={column:r.end.column,line:r.end.line}:typeof r.endIndex=="number"?o=this.positionInside(r.endIndex):r.index&&(o=this.positionInside(r.index+1));return(o.line<a.line||o.line===a.line&&o.column<=a.column)&&(o={column:a.column+1,line:a.line}),{end:o,start:a}},e.raw=function(r,a){var o=new Stringifier22;return o.raw(this,r,a)},e.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];if(this.parent){for(var l=this,c=!1,u=_create_for_of_iterator_helper_loose(a),f;!(f=u()).done;){var d=f.value;d===this?c=!0:c?(this.parent.insertAfter(l,d),l=d):this.parent.insertBefore(l,d)}c||this.remove()}return this},e.root=function(){for(var r=this;r.parent&&r.parent.type!=="document";)r=r.parent;return r},e.toJSON=function(r,a){var o={},l=a==null;a=a||new Map;var c=0;for(var u in this)if(Object.prototype.hasOwnProperty.call(this,u)&&!(u==="parent"||u==="proxyCache")){var f=this[u];if(Array.isArray(f))o[u]=f.map(function(p){return(typeof p>"u"?"undefined":_type_of(p))==="object"&&p.toJSON?p.toJSON(null,a):p});else if((typeof f>"u"?"undefined":_type_of(f))==="object"&&f.toJSON)o[u]=f.toJSON(null,a);else if(u==="source"){var d=a.get(f.input);d==null&&(d=c,a.set(f.input,c),c++),o[u]={end:f.end,inputId:d,start:f.start}}else o[u]=f}return l&&(o.inputs=[].concat(a.keys()).map(function(p){return p.toJSON()})),o},e.toProxy=function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache},e.toString=function(r){r===void 0&&(r=stringify$3$2),r.stringify&&(r=r.stringify);var a="";return r(this,function(o){a+=o}),a},e.warn=function(r,a,o){var l={node:this};for(var c in o)l[c]=o[c];return r.warn(a,l)},_create_class(t,[{key:"proxyOf",get:function(){return this}}]),t})(),node$2=Node$4$2;Node$4$2.default=Node$4$2;var Node$3$2=node$2,Declaration$4$2=(function(t){_inherits(e,t);function e(s){var r;return s&&typeof s.value<"u"&&typeof s.value!="string"&&(s=_extends({},s,{value:String(s.value)})),r=t.call(this,s)||this,r.type="decl",r}return _create_class(e,[{key:"variable",get:function(){return this.prop.startsWith("--")||this.prop[0]==="$"}}]),e})(Node$3$2),declaration$2=Declaration$4$2;Declaration$4$2.default=Declaration$4$2;var urlAlphabet$2="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",nanoid$1$2=function(t){t===void 0&&(t=21);for(var e="",s=t;s--;)e+=urlAlphabet$2[Math.random()*64|0];return e},nonSecure$2={nanoid:nanoid$1$2},SourceMapConsumer$2$2=require$$2$2.SourceMapConsumer,SourceMapGenerator$2$2=require$$2$2.SourceMapGenerator,existsSync$2=require$$2$2.existsSync,readFileSync$2=require$$2$2.readFileSync,dirname$1$2=require$$2$2.dirname,join$2=require$$2$2.join;function fromBase64$2(t){return Buffer?Buffer.from(t,"base64").toString():window.atob(t)}var PreviousMap$2$2=(function(){function t(s,r){if(r.map!==!1){this.loadAnnotation(s),this.inline=this.startWith(this.annotation,"data:");var a=r.map?r.map.prev:void 0,o=this.loadMap(r.from,a);!this.mapFile&&r.from&&(this.mapFile=r.from),this.mapFile&&(this.root=dirname$1$2(this.mapFile)),o&&(this.text=o)}}var e=t.prototype;return e.consumer=function(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2$2(this.text)),this.consumerCache},e.decodeInline=function(r){var a=/^data:application\/json;charset=utf-?8;base64,/,o=/^data:application\/json;base64,/,l=/^data:application\/json;charset=utf-?8,/,c=/^data:application\/json,/;if(l.test(r)||c.test(r))return decodeURIComponent(r.substr(RegExp.lastMatch.length));if(a.test(r)||o.test(r))return fromBase64$2(r.substr(RegExp.lastMatch.length));var u=r.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+u)},e.getAnnotationURL=function(r){return r.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()},e.isMap=function(r){return(typeof r>"u"?"undefined":_type_of(r))!=="object"?!1:typeof r.mappings=="string"||typeof r._mappings=="string"||Array.isArray(r.sections)},e.loadAnnotation=function(r){var a=r.match(/\/\*\s*# sourceMappingURL=/gm);if(a){var o=r.lastIndexOf(a.pop()),l=r.indexOf("*/",o);o>-1&&l>-1&&(this.annotation=this.getAnnotationURL(r.substring(o,l)))}},e.loadFile=function(r){if(this.root=dirname$1$2(r),existsSync$2(r))return this.mapFile=r,readFileSync$2(r,"utf-8").toString().trim()},e.loadMap=function(r,a){if(a===!1)return!1;if(a){if(typeof a=="string")return a;if(typeof a=="function"){var o=a(r);if(o){var l=this.loadFile(o);if(!l)throw new Error("Unable to load previous source map: "+o.toString());return l}}else{if(_instanceof(a,SourceMapConsumer$2$2))return SourceMapGenerator$2$2.fromSourceMap(a).toString();if(_instanceof(a,SourceMapGenerator$2$2))return a.toString();if(this.isMap(a))return JSON.stringify(a);throw new Error("Unsupported previous source map format: "+a.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var c=this.annotation;return r&&(c=join$2(dirname$1$2(r),c)),this.loadFile(c)}}},e.startWith=function(r,a){return r?r.substr(0,a.length)===a:!1},e.withContent=function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},t})(),previousMap$2=PreviousMap$2$2;PreviousMap$2$2.default=PreviousMap$2$2;var SourceMapConsumer$1$2=require$$2$2.SourceMapConsumer,SourceMapGenerator$1$2=require$$2$2.SourceMapGenerator,fileURLToPath$2=require$$2$2.fileURLToPath,pathToFileURL$1$2=require$$2$2.pathToFileURL,isAbsolute$2=require$$2$2.isAbsolute,resolve$1$2=require$$2$2.resolve,nanoid$3=nonSecure$2.nanoid,terminalHighlight$3=require$$2$2,CssSyntaxError$1$2=cssSyntaxError$2,PreviousMap$1$2=previousMap$2,fromOffsetCache$2=Symbol("fromOffsetCache"),sourceMapAvailable$1$2=!!(SourceMapConsumer$1$2&&SourceMapGenerator$1$2),pathAvailable$1$2=!!(resolve$1$2&&isAbsolute$2),Input$4$2=(function(){function t(s,r){if(r===void 0&&(r={}),s===null||typeof s>"u"||(typeof s>"u"?"undefined":_type_of(s))==="object"&&!s.toString)throw new Error("PostCSS received "+s+" instead of CSS string");if(this.css=s.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,r.from&&(!pathAvailable$1$2||/^\w+:\/\//.test(r.from)||isAbsolute$2(r.from)?this.file=r.from:this.file=resolve$1$2(r.from)),pathAvailable$1$2&&sourceMapAvailable$1$2){var a=new PreviousMap$1$2(this.css,r);if(a.text){this.map=a;var o=a.consumer().file;!this.file&&o&&(this.file=this.mapResolve(o))}}this.file||(this.id="<input css "+nanoid$3(6)+">"),this.map&&(this.map.file=this.from)}var e=t.prototype;return e.error=function(r,a,o,l){l===void 0&&(l={});var c,u,f;if(a&&(typeof a>"u"?"undefined":_type_of(a))==="object"){var d=a,p=o;if(typeof d.offset=="number"){var m=this.fromOffset(d.offset);a=m.line,o=m.col}else a=d.line,o=d.column;if(typeof p.offset=="number"){var y=this.fromOffset(p.offset);u=y.line,f=y.col}else u=p.line,f=p.column}else if(!o){var b=this.fromOffset(a);a=b.line,o=b.col}var E=this.origin(a,o,u,f);return E?c=new CssSyntaxError$1$2(r,E.endLine===void 0?E.line:{column:E.column,line:E.line},E.endLine===void 0?E.column:{column:E.endColumn,line:E.endLine},E.source,E.file,l.plugin):c=new CssSyntaxError$1$2(r,u===void 0?a:{column:o,line:a},u===void 0?o:{column:f,line:u},this.css,this.file,l.plugin),c.input={column:o,endColumn:f,endLine:u,line:a,source:this.css},this.file&&(pathToFileURL$1$2&&(c.input.url=pathToFileURL$1$2(this.file).toString()),c.input.file=this.file),c},e.fromOffset=function(r){var a,o;if(this[fromOffsetCache$2])o=this[fromOffsetCache$2];else{var l=this.css.split(`
`);o=new Array(l.length);for(var c=0,u=0,f=l.length;u<f;u++)o[u]=c,c+=l[u].length+1;this[fromOffsetCache$2]=o}a=o[o.length-1];var d=0;if(r>=a)d=o.length-1;else for(var p=o.length-2,m;d<p;)if(m=d+(p-d>>1),r<o[m])p=m-1;else if(r>=o[m+1])d=m+1;else{d=m;break}return{col:r-o[d]+1,line:d+1}},e.mapResolve=function(r){return/^\w+:\/\//.test(r)?r:resolve$1$2(this.map.consumer().sourceRoot||this.map.root||".",r)},e.origin=function(r,a,o,l){if(!this.map)return!1;var c=this.map.consumer(),u=c.originalPositionFor({column:a,line:r});if(!u.source)return!1;var f;typeof o=="number"&&(f=c.originalPositionFor({column:l,line:o}));var d;isAbsolute$2(u.source)?d=pathToFileURL$1$2(u.source):d=new URL(u.source,this.map.consumer().sourceRoot||pathToFileURL$1$2(this.map.mapFile));var p={column:u.column,endColumn:f&&f.column,endLine:f&&f.line,line:u.line,url:d.toString()};if(d.protocol==="file:")if(fileURLToPath$2)p.file=fileURLToPath$2(d);else throw new Error("file: protocol is not available in this PostCSS build");var m=c.sourceContentFor(u.source);return m&&(p.source=m),p},e.toJSON=function(){for(var r={},a=0,o=["hasBOM","css","file","id"];a<o.length;a++){var l=o[a];this[l]!=null&&(r[l]=this[l])}return this.map&&(r.map=_extends({},this.map),r.map.consumerCache&&(r.map.consumerCache=void 0)),r},_create_class(t,[{key:"from",get:function(){return this.file||this.id}}]),t})(),input$2=Input$4$2;Input$4$2.default=Input$4$2;terminalHighlight$3&&terminalHighlight$3.registerInput&&terminalHighlight$3.registerInput(Input$4$2);var SourceMapConsumer$4=require$$2$2.SourceMapConsumer,SourceMapGenerator$4=require$$2$2.SourceMapGenerator,dirname$3=require$$2$2.dirname,relative$2=require$$2$2.relative,resolve$3=require$$2$2.resolve,sep$2=require$$2$2.sep,pathToFileURL$3=require$$2$2.pathToFileURL,Input$3$2=input$2,sourceMapAvailable$3=!!(SourceMapConsumer$4&&SourceMapGenerator$4),pathAvailable$3=!!(dirname$3&&resolve$3&&relative$2&&sep$2),MapGenerator$2$2=(function(){function t(s,r,a,o){this.stringify=s,this.mapOpts=a.map||{},this.root=r,this.opts=a,this.css=o,this.originalCSS=o,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}var e=t.prototype;return e.addAnnotation=function(){var r;this.isInline()?r="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?r=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?r=this.mapOpts.annotation(this.opts.to,this.root):r=this.outputFile()+".map";var a=`
`;this.css.includes(`\r
`)&&(a=`\r
`),this.css+=a+"/*# sourceMappingURL="+r+" */"},e.applyPrevMaps=function(){for(var r=_create_for_of_iterator_helper_loose(this.previous()),a;!(a=r()).done;){var o=a.value,l=this.toUrl(this.path(o.file)),c=o.root||dirname$3(o.file),u=void 0;this.mapOpts.sourcesContent===!1?(u=new SourceMapConsumer$4(o.text),u.sourcesContent&&(u.sourcesContent=null)):u=o.consumer(),this.map.applySourceMap(u,l,this.toUrl(this.path(c)))}},e.clearAnnotation=function(){if(this.mapOpts.annotation!==!1)if(this.root)for(var r,a=this.root.nodes.length-1;a>=0;a--)r=this.root.nodes[a],r.type==="comment"&&r.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(a);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))},e.generate=function(){if(this.clearAnnotation(),pathAvailable$3&&sourceMapAvailable$3&&this.isMap())return this.generateMap();var r="";return this.stringify(this.root,function(a){r+=a}),[r]},e.generateMap=function(){if(this.root)this.generateString();else if(this.previous().length===1){var r=this.previous()[0].consumer();r.file=this.outputFile(),this.map=SourceMapGenerator$4.fromSourceMap(r,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator$4({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},e.generateString=function(){var r=this;this.css="",this.map=new SourceMapGenerator$4({file:this.outputFile(),ignoreInvalidMapping:!0});var a=1,o=1,l="<no source>",c={generated:{column:0,line:0},original:{column:0,line:0},source:""},u,f;this.stringify(this.root,function(d,p,m){if(r.css+=d,p&&m!=="end"&&(c.generated.line=a,c.generated.column=o-1,p.source&&p.source.start?(c.source=r.sourcePath(p),c.original.line=p.source.start.line,c.original.column=p.source.start.column-1,r.map.addMapping(c)):(c.source=l,c.original.line=1,c.original.column=0,r.map.addMapping(c))),u=d.match(/\n/g),u?(a+=u.length,f=d.lastIndexOf(`
`),o=d.length-f):o+=d.length,p&&m!=="start"){var y=p.parent||{raws:{}},b=p.type==="decl"||p.type==="atrule"&&!p.nodes;(!b||p!==y.last||y.raws.semicolon)&&(p.source&&p.source.end?(c.source=r.sourcePath(p),c.original.line=p.source.end.line,c.original.column=p.source.end.column-1,c.generated.line=a,c.generated.column=o-2,r.map.addMapping(c)):(c.source=l,c.original.line=1,c.original.column=0,c.generated.line=a,c.generated.column=o-1,r.map.addMapping(c)))}})},e.isAnnotation=function(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(function(r){return r.annotation}):!0},e.isInline=function(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;var r=this.mapOpts.annotation;return typeof r<"u"&&r!==!0?!1:this.previous().length?this.previous().some(function(a){return a.inline}):!0},e.isMap=function(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0},e.isSourcesContent=function(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(function(r){return r.withContent()}):!0},e.outputFile=function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"},e.path=function(r){if(this.mapOpts.absolute||r.charCodeAt(0)===60||/^\w+:\/\//.test(r))return r;var a=this.memoizedPaths.get(r);if(a)return a;var o=this.opts.to?dirname$3(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(o=dirname$3(resolve$3(o,this.mapOpts.annotation)));var l=relative$2(o,r);return this.memoizedPaths.set(r,l),l},e.previous=function(){var r=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(o){if(o.source&&o.source.input.map){var l=o.source.input.map;r.previousMaps.includes(l)||r.previousMaps.push(l)}});else{var a=new Input$3$2(this.originalCSS,this.opts);a.map&&this.previousMaps.push(a.map)}return this.previousMaps},e.setSourcesContent=function(){var r=this,a={};if(this.root)this.root.walk(function(l){if(l.source){var c=l.source.input.from;if(c&&!a[c]){a[c]=!0;var u=r.usesFileUrls?r.toFileUrl(c):r.toUrl(r.path(c));r.map.setSourceContent(u,l.source.input.css)}}});else if(this.css){var o=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(o,this.css)}},e.sourcePath=function(r){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(r.source.input.from):this.toUrl(this.path(r.source.input.from))},e.toBase64=function(r){return Buffer?Buffer.from(r).toString("base64"):window.btoa(unescape(encodeURIComponent(r)))},e.toFileUrl=function(r){var a=this.memoizedFileURLs.get(r);if(a)return a;if(pathToFileURL$3){var o=pathToFileURL$3(r).toString();return this.memoizedFileURLs.set(r,o),o}else throw new Error("`map.absolute` option is not available in this PostCSS build")},e.toUrl=function(r){var a=this.memoizedURLs.get(r);if(a)return a;sep$2==="\\"&&(r=r.replace(/\\/g,"/"));var o=encodeURI(r).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(r,o),o},t})(),mapGenerator$2=MapGenerator$2$2,Node$2$2=node$2,Comment$4$2=(function(t){_inherits(e,t);function e(s){var r;return r=t.call(this,s)||this,r.type="comment",r}return e})(Node$2$2),comment$2=Comment$4$2;Comment$4$2.default=Comment$4$2;var isClean$1$2=symbols$2.isClean,my$1$2=symbols$2.my,Declaration$3$2=declaration$2,Comment$3$2=comment$2,Node$1$2=node$2,parse$4$2,Rule$4$2,AtRule$4$2,Root$6$2;function cleanSource$2(t){return t.map(function(e){return e.nodes&&(e.nodes=cleanSource$2(e.nodes)),delete e.source,e})}function markDirtyUp$2(t){if(t[isClean$1$2]=!1,t.proxyOf.nodes)for(var e=_create_for_of_iterator_helper_loose(t.proxyOf.nodes),s;!(s=e()).done;){var r=s.value;markDirtyUp$2(r)}}var Container$7$2=(function(t){_inherits(e,t);function e(){return t.apply(this,arguments)||this}var s=e.prototype;return s.append=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];for(var c=_create_for_of_iterator_helper_loose(o),u;!(u=c()).done;)for(var f=u.value,d=this.normalize(f,this.last),p=_create_for_of_iterator_helper_loose(d),m;!(m=p()).done;){var y=m.value;this.proxyOf.nodes.push(y)}return this.markDirty(),this},s.cleanRaws=function(a){if(t.prototype.cleanRaws.call(this,a),this.nodes)for(var o=_create_for_of_iterator_helper_loose(this.nodes),l;!(l=o()).done;){var c=l.value;c.cleanRaws(a)}},s.each=function(a){if(this.proxyOf.nodes){for(var o=this.getIterator(),l,c;this.indexes[o]<this.proxyOf.nodes.length&&(l=this.indexes[o],c=a(this.proxyOf.nodes[l],l),c!==!1);)this.indexes[o]+=1;return delete this.indexes[o],c}},s.every=function(a){return this.nodes.every(a)},s.getIterator=function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var a=this.lastEach;return this.indexes[a]=0,a},s.getProxyProcessor=function(){return{get:function(o,l){return l==="proxyOf"?o:o[l]?l==="each"||typeof l=="string"&&l.startsWith("walk")?function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];var d;return(d=o)[l].apply(d,[].concat(u.map(function(p){return typeof p=="function"?function(m,y){return p(m.toProxy(),y)}:p})))}:l==="every"||l==="some"?function(c){return o[l](function(u){for(var f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return c.apply(void 0,[].concat([u.toProxy()],d))})}:l==="root"?function(){return o.root().toProxy()}:l==="nodes"?o.nodes.map(function(c){return c.toProxy()}):l==="first"||l==="last"?o[l].toProxy():o[l]:o[l]},set:function(o,l,c){return o[l]===c||(o[l]=c,(l==="name"||l==="params"||l==="selector")&&o.markDirty()),!0}}},s.index=function(a){return typeof a=="number"?a:(a.proxyOf&&(a=a.proxyOf),this.proxyOf.nodes.indexOf(a))},s.insertAfter=function(a,o){var l=this.index(a),c=this.normalize(o,this.proxyOf.nodes[l]).reverse();l=this.index(a);for(var u=_create_for_of_iterator_helper_loose(c),f;!(f=u()).done;){var d=f.value;this.proxyOf.nodes.splice(l+1,0,d)}var p;for(var m in this.indexes)p=this.indexes[m],l<p&&(this.indexes[m]=p+c.length);return this.markDirty(),this},s.insertBefore=function(a,o){var l=this.index(a),c=l===0?"prepend":!1,u=this.normalize(o,this.proxyOf.nodes[l],c).reverse();l=this.index(a);for(var f=_create_for_of_iterator_helper_loose(u),d;!(d=f()).done;){var p=d.value;this.proxyOf.nodes.splice(l,0,p)}var m;for(var y in this.indexes)m=this.indexes[y],l<=m&&(this.indexes[y]=m+u.length);return this.markDirty(),this},s.normalize=function(a,o){var l=this;if(typeof a=="string")a=cleanSource$2(parse$4$2(a).nodes);else if(typeof a>"u")a=[];else if(Array.isArray(a)){a=a.slice(0);for(var c=_create_for_of_iterator_helper_loose(a),u;!(u=c()).done;){var f=u.value;f.parent&&f.parent.removeChild(f,"ignore")}}else if(a.type==="root"&&this.type!=="document"){a=a.nodes.slice(0);for(var d=_create_for_of_iterator_helper_loose(a),p;!(p=d()).done;){var m=p.value;m.parent&&m.parent.removeChild(m,"ignore")}}else if(a.type)a=[a];else if(a.prop){if(typeof a.value>"u")throw new Error("Value field is missed in node creation");typeof a.value!="string"&&(a.value=String(a.value)),a=[new Declaration$3$2(a)]}else if(a.selector)a=[new Rule$4$2(a)];else if(a.name)a=[new AtRule$4$2(a)];else if(a.text)a=[new Comment$3$2(a)];else throw new Error("Unknown node type in node creation");var y=a.map(function(b){return b[my$1$2]||e.rebuild(b),b=b.proxyOf,b.parent&&b.parent.removeChild(b),b[isClean$1$2]&&markDirtyUp$2(b),typeof b.raws.before>"u"&&o&&typeof o.raws.before<"u"&&(b.raws.before=o.raws.before.replace(/\S/g,"")),b.parent=l.proxyOf,b});return y},s.prepend=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];o=o.reverse();for(var c=_create_for_of_iterator_helper_loose(o),u;!(u=c()).done;){for(var f=u.value,d=this.normalize(f,this.first,"prepend").reverse(),p=_create_for_of_iterator_helper_loose(d),m;!(m=p()).done;){var y=m.value;this.proxyOf.nodes.unshift(y)}for(var b in this.indexes)this.indexes[b]=this.indexes[b]+d.length}return this.markDirty(),this},s.push=function(a){return a.parent=this,this.proxyOf.nodes.push(a),this},s.removeAll=function(){for(var a=_create_for_of_iterator_helper_loose(this.proxyOf.nodes),o;!(o=a()).done;){var l=o.value;l.parent=void 0}return this.proxyOf.nodes=[],this.markDirty(),this},s.removeChild=function(a){a=this.index(a),this.proxyOf.nodes[a].parent=void 0,this.proxyOf.nodes.splice(a,1);var o;for(var l in this.indexes)o=this.indexes[l],o>=a&&(this.indexes[l]=o-1);return this.markDirty(),this},s.replaceValues=function(a,o,l){return l||(l=o,o={}),this.walkDecls(function(c){o.props&&!o.props.includes(c.prop)||o.fast&&!c.value.includes(o.fast)||(c.value=c.value.replace(a,l))}),this.markDirty(),this},s.some=function(a){return this.nodes.some(a)},s.walk=function(a){return this.each(function(o,l){var c;try{c=a(o,l)}catch(u){throw o.addToError(u)}return c!==!1&&o.walk&&(c=o.walk(a)),c})},s.walkAtRules=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="atrule"&&a.test(l.name))return o(l,c)}):this.walk(function(l,c){if(l.type==="atrule"&&l.name===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="atrule")return o(l,c)}))},s.walkComments=function(a){return this.walk(function(o,l){if(o.type==="comment")return a(o,l)})},s.walkDecls=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="decl"&&a.test(l.prop))return o(l,c)}):this.walk(function(l,c){if(l.type==="decl"&&l.prop===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="decl")return o(l,c)}))},s.walkRules=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="rule"&&a.test(l.selector))return o(l,c)}):this.walk(function(l,c){if(l.type==="rule"&&l.selector===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="rule")return o(l,c)}))},_create_class(e,[{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}]),e})(Node$1$2);Container$7$2.registerParse=function(t){parse$4$2=t};Container$7$2.registerRule=function(t){Rule$4$2=t};Container$7$2.registerAtRule=function(t){AtRule$4$2=t};Container$7$2.registerRoot=function(t){Root$6$2=t};var container$2=Container$7$2;Container$7$2.default=Container$7$2;Container$7$2.rebuild=function(t){t.type==="atrule"?Object.setPrototypeOf(t,AtRule$4$2.prototype):t.type==="rule"?Object.setPrototypeOf(t,Rule$4$2.prototype):t.type==="decl"?Object.setPrototypeOf(t,Declaration$3$2.prototype):t.type==="comment"?Object.setPrototypeOf(t,Comment$3$2.prototype):t.type==="root"&&Object.setPrototypeOf(t,Root$6$2.prototype),t[my$1$2]=!0,t.nodes&&t.nodes.forEach(function(e){Container$7$2.rebuild(e)})};var Container$6$2=container$2,LazyResult$4$2,Processor$3$2,Document$3$2=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,_extends({type:"document"},r))||this,a.nodes||(a.nodes=[]),a}var s=e.prototype;return s.toResult=function(a){a===void 0&&(a={});var o=new LazyResult$4$2(new Processor$3$2,this,a);return o.stringify()},e})(Container$6$2);Document$3$2.registerLazyResult=function(t){LazyResult$4$2=t};Document$3$2.registerProcessor=function(t){Processor$3$2=t};var document$1$2=Document$3$2;Document$3$2.default=Document$3$2;var Warning$2$2=(function(){function t(s,r){if(r===void 0&&(r={}),this.type="warning",this.text=s,r.node&&r.node.source){var a=r.node.rangeBy(r);this.line=a.start.line,this.column=a.start.column,this.endLine=a.end.line,this.endColumn=a.end.column}for(var o in r)this[o]=r[o]}var e=t.prototype;return e.toString=function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},t})(),warning$2=Warning$2$2;Warning$2$2.default=Warning$2$2;var Warning$1$2=warning$2,Result$3$2=(function(){function t(s,r,a){this.processor=s,this.messages=[],this.root=r,this.opts=a,this.css=void 0,this.map=void 0}var e=t.prototype;return e.toString=function(){return this.css},e.warn=function(r,a){a===void 0&&(a={}),a.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(a.plugin=this.lastPlugin.postcssPlugin);var o=new Warning$1$2(r,a);return this.messages.push(o),o},e.warnings=function(){return this.messages.filter(function(r){return r.type==="warning"})},_create_class(t,[{key:"content",get:function(){return this.css}}]),t})(),result$2=Result$3$2;Result$3$2.default=Result$3$2;var SINGLE_QUOTE$2=39,DOUBLE_QUOTE$2=34,BACKSLASH$2=92,SLASH$2=47,NEWLINE$2=10,SPACE$2=32,FEED$2=12,TAB$2=9,CR$2=13,OPEN_SQUARE$2=91,CLOSE_SQUARE$2=93,OPEN_PARENTHESES$2=40,CLOSE_PARENTHESES$2=41,OPEN_CURLY$2=123,CLOSE_CURLY$2=125,SEMICOLON$2=59,ASTERISK$2=42,COLON$2=58,AT$2=64,RE_AT_END$2=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END$2=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET$2=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE$2=/[\da-f]/i,tokenize$2=function t(e,s){s===void 0&&(s={});var r=e.css.valueOf(),a=s.ignoreErrors,o,l,c,u,f,d,p,m,y,b,E=r.length,C=0,j=[],B=[];function D(){return C}function F(Q){throw e.error("Unclosed "+Q,C)}function q(){return B.length===0&&C>=E}function V(Q){if(B.length)return B.pop();if(!(C>=E)){var W=Q?Q.ignoreUnclosed:!1;switch(o=r.charCodeAt(C),o){case NEWLINE$2:case SPACE$2:case TAB$2:case CR$2:case FEED$2:{l=C;do l+=1,o=r.charCodeAt(l);while(o===SPACE$2||o===NEWLINE$2||o===TAB$2||o===CR$2||o===FEED$2);b=["space",r.slice(C,l)],C=l-1;break}case OPEN_SQUARE$2:case CLOSE_SQUARE$2:case OPEN_CURLY$2:case CLOSE_CURLY$2:case COLON$2:case SEMICOLON$2:case CLOSE_PARENTHESES$2:{var Z=String.fromCharCode(o);b=[Z,Z,C];break}case OPEN_PARENTHESES$2:{if(m=j.length?j.pop()[1]:"",y=r.charCodeAt(C+1),m==="url"&&y!==SINGLE_QUOTE$2&&y!==DOUBLE_QUOTE$2&&y!==SPACE$2&&y!==NEWLINE$2&&y!==TAB$2&&y!==FEED$2&&y!==CR$2){l=C;do{if(d=!1,l=r.indexOf(")",l+1),l===-1)if(a||W){l=C;break}else F("bracket");for(p=l;r.charCodeAt(p-1)===BACKSLASH$2;)p-=1,d=!d}while(d);b=["brackets",r.slice(C,l+1),C,l],C=l}else l=r.indexOf(")",C+1),u=r.slice(C,l+1),l===-1||RE_BAD_BRACKET$2.test(u)?b=["(","(",C]:(b=["brackets",u,C,l],C=l);break}case SINGLE_QUOTE$2:case DOUBLE_QUOTE$2:{c=o===SINGLE_QUOTE$2?"'":'"',l=C;do{if(d=!1,l=r.indexOf(c,l+1),l===-1)if(a||W){l=C+1;break}else F("string");for(p=l;r.charCodeAt(p-1)===BACKSLASH$2;)p-=1,d=!d}while(d);b=["string",r.slice(C,l+1),C,l],C=l;break}case AT$2:{RE_AT_END$2.lastIndex=C+1,RE_AT_END$2.test(r),RE_AT_END$2.lastIndex===0?l=r.length-1:l=RE_AT_END$2.lastIndex-2,b=["at-word",r.slice(C,l+1),C,l],C=l;break}case BACKSLASH$2:{for(l=C,f=!0;r.charCodeAt(l+1)===BACKSLASH$2;)l+=1,f=!f;if(o=r.charCodeAt(l+1),f&&o!==SLASH$2&&o!==SPACE$2&&o!==NEWLINE$2&&o!==TAB$2&&o!==CR$2&&o!==FEED$2&&(l+=1,RE_HEX_ESCAPE$2.test(r.charAt(l)))){for(;RE_HEX_ESCAPE$2.test(r.charAt(l+1));)l+=1;r.charCodeAt(l+1)===SPACE$2&&(l+=1)}b=["word",r.slice(C,l+1),C,l],C=l;break}default:{o===SLASH$2&&r.charCodeAt(C+1)===ASTERISK$2?(l=r.indexOf("*/",C+2)+1,l===0&&(a||W?l=r.length:F("comment")),b=["comment",r.slice(C,l+1),C,l],C=l):(RE_WORD_END$2.lastIndex=C+1,RE_WORD_END$2.test(r),RE_WORD_END$2.lastIndex===0?l=r.length-1:l=RE_WORD_END$2.lastIndex-2,b=["word",r.slice(C,l+1),C,l],j.push(b),C=l);break}}return C++,b}}function ee(Q){B.push(Q)}return{back:ee,endOfFile:q,nextToken:V,position:D}},Container$5$2=container$2,AtRule$3$2=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,r)||this,a.type="atrule",a}var s=e.prototype;return s.append=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c;return this.proxyOf.nodes||(this.nodes=[]),(c=t.prototype.append).call.apply(c,[].concat([this],o))},s.prepend=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c;return this.proxyOf.nodes||(this.nodes=[]),(c=t.prototype.prepend).call.apply(c,[].concat([this],o))},e})(Container$5$2),atRule$2=AtRule$3$2;AtRule$3$2.default=AtRule$3$2;Container$5$2.registerAtRule(AtRule$3$2);var Container$4$2=container$2,LazyResult$3$2,Processor$2$2,Root$5$2=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,r)||this,a.type="root",a.nodes||(a.nodes=[]),a}var s=e.prototype;return s.normalize=function(a,o,l){var c=t.prototype.normalize.call(this,a);if(o){if(l==="prepend")this.nodes.length>1?o.raws.before=this.nodes[1].raws.before:delete o.raws.before;else if(this.first!==o)for(var u=_create_for_of_iterator_helper_loose(c),f;!(f=u()).done;){var d=f.value;d.raws.before=o.raws.before}}return c},s.removeChild=function(a,o){var l=this.index(a);return!o&&l===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[l].raws.before),t.prototype.removeChild.call(this,a)},s.toResult=function(a){a===void 0&&(a={});var o=new LazyResult$3$2(new Processor$2$2,this,a);return o.stringify()},e})(Container$4$2);Root$5$2.registerLazyResult=function(t){LazyResult$3$2=t};Root$5$2.registerProcessor=function(t){Processor$2$2=t};var root$2=Root$5$2;Root$5$2.default=Root$5$2;Container$4$2.registerRoot(Root$5$2);var list$2$2={comma:function t(e){return list$2$2.split(e,[","],!0)},space:function t(e){var s=[" ",`
`,"	"];return list$2$2.split(e,s)},split:function t(e,s,r){for(var a=[],o="",l=!1,c=0,u=!1,f="",d=!1,p=_create_for_of_iterator_helper_loose(e),m;!(m=p()).done;){var y=m.value;d?d=!1:y==="\\"?d=!0:u?y===f&&(u=!1):y==='"'||y==="'"?(u=!0,f=y):y==="("?c+=1:y===")"?c>0&&(c-=1):c===0&&s.includes(y)&&(l=!0),l?(o!==""&&a.push(o.trim()),o="",l=!1):o+=y}return(r||o!=="")&&a.push(o.trim()),a}},list_1$2=list$2$2;list$2$2.default=list$2$2;var Container$3$2=container$2,list$1$2=list_1$2,Rule$3$2=(function(t){_inherits(e,t);function e(s){var r;return r=t.call(this,s)||this,r.type="rule",r.nodes||(r.nodes=[]),r}return _create_class(e,[{key:"selectors",get:function(){return list$1$2.comma(this.selector)},set:function(r){var a=this.selector?this.selector.match(/,\s*/):null,o=a?a[0]:","+this.raw("between","beforeOpen");this.selector=r.join(o)}}]),e})(Container$3$2),rule$2=Rule$3$2;Rule$3$2.default=Rule$3$2;Container$3$2.registerRule(Rule$3$2);var Declaration$2$2=declaration$2,tokenizer22=tokenize$2,Comment$2$2=comment$2,AtRule$2$2=atRule$2,Root$4$2=root$2,Rule$2$2=rule$2,SAFE_COMMENT_NEIGHBOR$2={empty:!0,space:!0};function findLastWithPosition$2(t){for(var e=t.length-1;e>=0;e--){var s=t[e],r=s[3]||s[2];if(r)return r}}var Parser$1$2=(function(){function t(s){this.input=s,this.root=new Root$4$2,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:s,start:{column:1,line:1,offset:0}}}var e=t.prototype;return e.atrule=function(r){var a=new AtRule$2$2;a.name=r[1].slice(1),a.name===""&&this.unnamedAtrule(a,r),this.init(a,r[2]);for(var o,l,c,u=!1,f=!1,d=[],p=[];!this.tokenizer.endOfFile();){if(r=this.tokenizer.nextToken(),o=r[0],o==="("||o==="["?p.push(o==="("?")":"]"):o==="{"&&p.length>0?p.push("}"):o===p[p.length-1]&&p.pop(),p.length===0)if(o===";"){a.source.end=this.getPosition(r[2]),a.source.end.offset++,this.semicolon=!0;break}else if(o==="{"){f=!0;break}else if(o==="}"){if(d.length>0){for(c=d.length-1,l=d[c];l&&l[0]==="space";)l=d[--c];l&&(a.source.end=this.getPosition(l[3]||l[2]),a.source.end.offset++)}this.end(r);break}else d.push(r);else d.push(r);if(this.tokenizer.endOfFile()){u=!0;break}}a.raws.between=this.spacesAndCommentsFromEnd(d),d.length?(a.raws.afterName=this.spacesAndCommentsFromStart(d),this.raw(a,"params",d),u&&(r=d[d.length-1],a.source.end=this.getPosition(r[3]||r[2]),a.source.end.offset++,this.spaces=a.raws.between,a.raws.between="")):(a.raws.afterName="",a.params=""),f&&(a.nodes=[],this.current=a)},e.checkMissedSemicolon=function(r){var a=this.colon(r);if(a!==!1){for(var o=0,l,c=a-1;c>=0&&(l=r[c],!(l[0]!=="space"&&(o+=1,o===2)));c--);throw this.input.error("Missed semicolon",l[0]==="word"?l[3]+1:l[2])}},e.colon=function(r){for(var a=0,o,l,c,u=_create_for_of_iterator_helper_loose(r.entries()),f;!(f=u()).done;){var d=f.value,p=d[0],m=d[1];if(o=m,l=o[0],l==="("&&(a+=1),l===")"&&(a-=1),a===0&&l===":")if(!c)this.doubleColon(o);else{if(c[0]==="word"&&c[1]==="progid")continue;return p}c=o}return!1},e.comment=function(r){var a=new Comment$2$2;this.init(a,r[2]),a.source.end=this.getPosition(r[3]||r[2]),a.source.end.offset++;var o=r[1].slice(2,-2);if(/^\s*$/.test(o))a.text="",a.raws.left=o,a.raws.right="";else{var l=o.match(/^(\s*)([^]*\S)(\s*)$/);a.text=l[2],a.raws.left=l[1],a.raws.right=l[3]}},e.createTokenizer=function(){this.tokenizer=tokenizer22(this.input)},e.decl=function(r,a){var o=new Declaration$2$2;this.init(o,r[0][2]);var l=r[r.length-1];for(l[0]===";"&&(this.semicolon=!0,r.pop()),o.source.end=this.getPosition(l[3]||l[2]||findLastWithPosition$2(r)),o.source.end.offset++;r[0][0]!=="word";)r.length===1&&this.unknownWord(r),o.raws.before+=r.shift()[1];for(o.source.start=this.getPosition(r[0][2]),o.prop="";r.length;){var c=r[0][0];if(c===":"||c==="space"||c==="comment")break;o.prop+=r.shift()[1]}o.raws.between="";for(var u;r.length;)if(u=r.shift(),u[0]===":"){o.raws.between+=u[1];break}else u[0]==="word"&&/\w/.test(u[1])&&this.unknownWord([u]),o.raws.between+=u[1];(o.prop[0]==="_"||o.prop[0]==="*")&&(o.raws.before+=o.prop[0],o.prop=o.prop.slice(1));for(var f=[],d;r.length&&(d=r[0][0],!(d!=="space"&&d!=="comment"));)f.push(r.shift());this.precheckMissedSemicolon(r);for(var p=r.length-1;p>=0;p--){if(u=r[p],u[1].toLowerCase()==="!important"){o.important=!0;var m=this.stringFrom(r,p);m=this.spacesFromEnd(r)+m,m!==" !important"&&(o.raws.important=m);break}else if(u[1].toLowerCase()==="important"){for(var y=r.slice(0),b="",E=p;E>0;E--){var C=y[E][0];if(b.trim().indexOf("!")===0&&C!=="space")break;b=y.pop()[1]+b}b.trim().indexOf("!")===0&&(o.important=!0,o.raws.important=b,r=y)}if(u[0]!=="space"&&u[0]!=="comment")break}var j=r.some(function(B){return B[0]!=="space"&&B[0]!=="comment"});j&&(o.raws.between+=f.map(function(B){return B[1]}).join(""),f=[]),this.raw(o,"value",f.concat(r),a),o.value.includes(":")&&!a&&this.checkMissedSemicolon(r)},e.doubleColon=function(r){throw this.input.error("Double colon",{offset:r[2]},{offset:r[2]+r[1].length})},e.emptyRule=function(r){var a=new Rule$2$2;this.init(a,r[2]),a.selector="",a.raws.between="",this.current=a},e.end=function(r){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(r[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(r)},e.endFile=function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())},e.freeSemicolon=function(r){if(this.spaces+=r[1],this.current.nodes){var a=this.current.nodes[this.current.nodes.length-1];a&&a.type==="rule"&&!a.raws.ownSemicolon&&(a.raws.ownSemicolon=this.spaces,this.spaces="")}},e.getPosition=function(r){var a=this.input.fromOffset(r);return{column:a.col,line:a.line,offset:r}},e.init=function(r,a){this.current.push(r),r.source={input:this.input,start:this.getPosition(a)},r.raws.before=this.spaces,this.spaces="",r.type!=="comment"&&(this.semicolon=!1)},e.other=function(r){for(var a=!1,o=null,l=!1,c=null,u=[],f=r[1].startsWith("--"),d=[],p=r;p;){if(o=p[0],d.push(p),o==="("||o==="[")c||(c=p),u.push(o==="("?")":"]");else if(f&&l&&o==="{")c||(c=p),u.push("}");else if(u.length===0)if(o===";")if(l){this.decl(d,f);return}else break;else if(o==="{"){this.rule(d);return}else if(o==="}"){this.tokenizer.back(d.pop()),a=!0;break}else o===":"&&(l=!0);else o===u[u.length-1]&&(u.pop(),u.length===0&&(c=null));p=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(a=!0),u.length>0&&this.unclosedBracket(c),a&&l){if(!f)for(;d.length&&(p=d[d.length-1][0],!(p!=="space"&&p!=="comment"));)this.tokenizer.back(d.pop());this.decl(d,f)}else this.unknownWord(d)},e.parse=function(){for(var r;!this.tokenizer.endOfFile();)switch(r=this.tokenizer.nextToken(),r[0]){case"space":this.spaces+=r[1];break;case";":this.freeSemicolon(r);break;case"}":this.end(r);break;case"comment":this.comment(r);break;case"at-word":this.atrule(r);break;case"{":this.emptyRule(r);break;default:this.other(r);break}this.endFile()},e.precheckMissedSemicolon=function(){},e.raw=function(r,a,o,l){for(var c,u,f=o.length,d="",p=!0,m,y,b=0;b<f;b+=1)c=o[b],u=c[0],u==="space"&&b===f-1&&!l?p=!1:u==="comment"?(y=o[b-1]?o[b-1][0]:"empty",m=o[b+1]?o[b+1][0]:"empty",!SAFE_COMMENT_NEIGHBOR$2[y]&&!SAFE_COMMENT_NEIGHBOR$2[m]?d.slice(-1)===","?p=!1:d+=c[1]:p=!1):d+=c[1];if(!p){var E=o.reduce(function(C,j){return C+j[1]},"");r.raws[a]={raw:E,value:d}}r[a]=d},e.rule=function(r){r.pop();var a=new Rule$2$2;this.init(a,r[0][2]),a.raws.between=this.spacesAndCommentsFromEnd(r),this.raw(a,"selector",r),this.current=a},e.spacesAndCommentsFromEnd=function(r){for(var a,o="";r.length&&(a=r[r.length-1][0],!(a!=="space"&&a!=="comment"));)o=r.pop()[1]+o;return o},e.spacesAndCommentsFromStart=function(r){for(var a,o="";r.length&&(a=r[0][0],!(a!=="space"&&a!=="comment"));)o+=r.shift()[1];return o},e.spacesFromEnd=function(r){for(var a,o="";r.length&&(a=r[r.length-1][0],a==="space");)o=r.pop()[1]+o;return o},e.stringFrom=function(r,a){for(var o="",l=a;l<r.length;l++)o+=r[l][1];return r.splice(a,r.length-a),o},e.unclosedBlock=function(){var r=this.current.source.start;throw this.input.error("Unclosed block",r.line,r.column)},e.unclosedBracket=function(r){throw this.input.error("Unclosed bracket",{offset:r[2]},{offset:r[2]+1})},e.unexpectedClose=function(r){throw this.input.error("Unexpected }",{offset:r[2]},{offset:r[2]+1})},e.unknownWord=function(r){throw this.input.error("Unknown word",{offset:r[0][2]},{offset:r[0][2]+r[0][1].length})},e.unnamedAtrule=function(r,a){throw this.input.error("At-rule without name",{offset:a[2]},{offset:a[2]+a[1].length})},t})(),parser$2=Parser$1$2,Container$2$2=container$2,Parser22=parser$2,Input$2$2=input$2;function parse$3$2(t,e){var s=new Input$2$2(t,e),r=new Parser22(s);try{r.parse()}catch(a){throw a}return r.root}var parse_1$2=parse$3$2;parse$3$2.default=parse$3$2;Container$2$2.registerParse(parse$3$2);var isClean$4=symbols$2.isClean,my$4=symbols$2.my,MapGenerator$1$2=mapGenerator$2,stringify$2$2=stringify_1$2,Container$1$2=container$2,Document$2$2=document$1$2,Result$2$2=result$2,parse$2$2=parse_1$2,Root$3$2=root$2,TYPE_TO_CLASS_NAME$2={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS$2={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS$2={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN$2=0;function isPromise$2(t){return(typeof t>"u"?"undefined":_type_of(t))==="object"&&typeof t.then=="function"}function getEvents$2(t){var e=!1,s=TYPE_TO_CLASS_NAME$2[t.type];return t.type==="decl"?e=t.prop.toLowerCase():t.type==="atrule"&&(e=t.name.toLowerCase()),e&&t.append?[s,s+"-"+e,CHILDREN$2,s+"Exit",s+"Exit-"+e]:e?[s,s+"-"+e,s+"Exit",s+"Exit-"+e]:t.append?[s,CHILDREN$2,s+"Exit"]:[s,s+"Exit"]}function toStack$2(t){var e;return t.type==="document"?e=["Document",CHILDREN$2,"DocumentExit"]:t.type==="root"?e=["Root",CHILDREN$2,"RootExit"]:e=getEvents$2(t),{eventIndex:0,events:e,iterator:0,node:t,visitorIndex:0,visitors:[]}}function cleanMarks$2(t){return t[isClean$4]=!1,t.nodes&&t.nodes.forEach(function(e){return cleanMarks$2(e)}),t}var postcss$2$2={},LazyResult$2$2=(function(){function t(s,r,a){var o=this;this.stringified=!1,this.processed=!1;var l;if((typeof r>"u"?"undefined":_type_of(r))==="object"&&r!==null&&(r.type==="root"||r.type==="document"))l=cleanMarks$2(r);else if(_instanceof(r,t)||_instanceof(r,Result$2$2))l=cleanMarks$2(r.root),r.map&&(typeof a.map>"u"&&(a.map={}),a.map.inline||(a.map.inline=!1),a.map.prev=r.map);else{var c=parse$2$2;a.syntax&&(c=a.syntax.parse),a.parser&&(c=a.parser),c.parse&&(c=c.parse);try{l=c(r,a)}catch(u){this.processed=!0,this.error=u}l&&!l[my$4]&&Container$1$2.rebuild(l)}this.result=new Result$2$2(s,l,a),this.helpers=_extends({},postcss$2$2,{postcss:postcss$2$2,result:this.result}),this.plugins=this.processor.plugins.map(function(u){return(typeof u>"u"?"undefined":_type_of(u))==="object"&&u.prepare?_extends({},u,u.prepare(o.result)):u})}var e=t.prototype;return e.async=function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)},e.catch=function(r){return this.async().catch(r)},e.finally=function(r){return this.async().then(r,r)},e.getAsyncError=function(){throw new Error("Use process(css).then(cb) to work with async plugins")},e.handleError=function(r,a){var o=this.result.lastPlugin;try{if(a&&a.addToError(r),this.error=r,r.name==="CssSyntaxError"&&!r.plugin)r.plugin=o.postcssPlugin,r.setMessage();else if(o.postcssVersion)var l,c,u,f,d}catch(p){console&&console.error&&console.error(p)}return r},e.prepareVisitors=function(){var r=this;this.listeners={};for(var a=function(d,p,m){r.listeners[p]||(r.listeners[p]=[]),r.listeners[p].push([d,m])},o=_create_for_of_iterator_helper_loose(this.plugins),l;!(l=o()).done;){var c=l.value;if((typeof c>"u"?"undefined":_type_of(c))==="object")for(var u in c){if(!PLUGIN_PROPS$2[u]&&/^[A-Z]/.test(u))throw new Error("Unknown event "+u+" in "+c.postcssPlugin+". Try to update PostCSS ("+this.processor.version+" now).");if(!NOT_VISITORS$2[u])if(_type_of(c[u])==="object")for(var f in c[u])f==="*"?a(c,u,c[u][f]):a(c,u+"-"+f.toLowerCase(),c[u][f]);else typeof c[u]=="function"&&a(c,u,c[u])}}this.hasListener=Object.keys(this.listeners).length>0},e.runAsync=function(){var r=this;return _async_to_generator(function(){var a,o,l,c,u,f,d,p,m,y,b,E;return _ts_generator(this,function(C){switch(C.label){case 0:r.plugin=0,a=0,C.label=1;case 1:if(!(a<r.plugins.length))return[3,6];if(o=r.plugins[a],l=r.runOnRoot(o),!isPromise$2(l))return[3,5];C.label=2;case 2:return C.trys.push([2,4,,5]),[4,l];case 3:return C.sent(),[3,5];case 4:throw c=C.sent(),r.handleError(c);case 5:return a++,[3,1];case 6:if(r.prepareVisitors(),!r.hasListener)return[3,18];u=r.result.root,C.label=7;case 7:if(u[isClean$4])return[3,14];u[isClean$4]=!0,f=[toStack$2(u)],C.label=8;case 8:if(!(f.length>0))return[3,13];if(d=r.visitTick(f),!isPromise$2(d))return[3,12];C.label=9;case 9:return C.trys.push([9,11,,12]),[4,d];case 10:return C.sent(),[3,12];case 11:throw p=C.sent(),m=f[f.length-1].node,r.handleError(p,m);case 12:return[3,8];case 13:return[3,7];case 14:if(!r.listeners.OnceExit)return[3,18];y=function(){var j,B,D,F,q;return _ts_generator(this,function(V){switch(V.label){case 0:j=E.value,B=j[0],D=j[1],r.result.lastPlugin=B,V.label=1;case 1:return V.trys.push([1,6,,7]),u.type!=="document"?[3,3]:(F=u.nodes.map(function(ee){return D(ee,r.helpers)}),[4,Promise.all(F)]);case 2:return V.sent(),[3,5];case 3:return[4,D(u,r.helpers)];case 4:V.sent(),V.label=5;case 5:return[3,7];case 6:throw q=V.sent(),r.handleError(q);case 7:return[2]}})},b=_create_for_of_iterator_helper_loose(r.listeners.OnceExit),C.label=15;case 15:return(E=b()).done?[3,18]:[5,_ts_values(y())];case 16:C.sent(),C.label=17;case 17:return[3,15];case 18:return r.processed=!0,[2,r.stringify()]}})})()},e.runOnRoot=function(r){var a=this;this.result.lastPlugin=r;try{if((typeof r>"u"?"undefined":_type_of(r))==="object"&&r.Once){if(this.result.root.type==="document"){var o=this.result.root.nodes.map(function(l){return r.Once(l,a.helpers)});return isPromise$2(o[0])?Promise.all(o):o}return r.Once(this.result.root,this.helpers)}else if(typeof r=="function")return r(this.result.root,this.result)}catch(l){throw this.handleError(l)}},e.stringify=function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var r=this.result.opts,a=stringify$2$2;r.syntax&&(a=r.syntax.stringify),r.stringifier&&(a=r.stringifier),a.stringify&&(a=a.stringify);var o=new MapGenerator$1$2(a,this.result.root,this.result.opts),l=o.generate();return this.result.css=l[0],this.result.map=l[1],this.result},e.sync=function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(var r=_create_for_of_iterator_helper_loose(this.plugins),a;!(a=r()).done;){var o=a.value,l=this.runOnRoot(o);if(isPromise$2(l))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){for(var c=this.result.root;!c[isClean$4];)c[isClean$4]=!0,this.walkSync(c);if(this.listeners.OnceExit)if(c.type==="document")for(var u=_create_for_of_iterator_helper_loose(c.nodes),f;!(f=u()).done;){var d=f.value;this.visitSync(this.listeners.OnceExit,d)}else this.visitSync(this.listeners.OnceExit,c)}return this.result},e.then=function(r,a){return this.async().then(r,a)},e.toString=function(){return this.css},e.visitSync=function(r,a){for(var o=_create_for_of_iterator_helper_loose(r),l;!(l=o()).done;){var c=l.value,u=c[0],f=c[1];this.result.lastPlugin=u;var d=void 0;try{d=f(a,this.helpers)}catch(p){throw this.handleError(p,a.proxyOf)}if(a.type!=="root"&&a.type!=="document"&&!a.parent)return!0;if(isPromise$2(d))throw this.getAsyncError()}},e.visitTick=function(r){var a=r[r.length-1],o=a.node,l=a.visitors;if(o.type!=="root"&&o.type!=="document"&&!o.parent){r.pop();return}if(l.length>0&&a.visitorIndex<l.length){var c=l[a.visitorIndex],u=c[0],f=c[1];a.visitorIndex+=1,a.visitorIndex===l.length&&(a.visitors=[],a.visitorIndex=0),this.result.lastPlugin=u;try{return f(o.toProxy(),this.helpers)}catch(b){throw this.handleError(b,o)}}if(a.iterator!==0){for(var d=a.iterator,p;p=o.nodes[o.indexes[d]];)if(o.indexes[d]+=1,!p[isClean$4]){p[isClean$4]=!0,r.push(toStack$2(p));return}a.iterator=0,delete o.indexes[d]}for(var m=a.events;a.eventIndex<m.length;){var y=m[a.eventIndex];if(a.eventIndex+=1,y===CHILDREN$2){o.nodes&&o.nodes.length&&(o[isClean$4]=!0,a.iterator=o.getIterator());return}else if(this.listeners[y]){a.visitors=this.listeners[y];return}}r.pop()},e.walkSync=function(r){var a=this;r[isClean$4]=!0;for(var o=getEvents$2(r),l=_create_for_of_iterator_helper_loose(o),c;!(c=l()).done;){var u=c.value;if(u===CHILDREN$2)r.nodes&&r.each(function(d){d[isClean$4]||a.walkSync(d)});else{var f=this.listeners[u];if(f&&this.visitSync(f,r.toProxy()))return}}},e.warnings=function(){return this.sync().warnings()},_create_class(t,[{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]),t})();LazyResult$2$2.registerPostcss=function(t){postcss$2$2=t};var lazyResult$2=LazyResult$2$2;LazyResult$2$2.default=LazyResult$2$2;Root$3$2.registerLazyResult(LazyResult$2$2);Document$2$2.registerLazyResult(LazyResult$2$2);var MapGenerator22=mapGenerator$2,stringify$1$2=stringify_1$2,parse$1$2=parse_1$2,Result$1$2=result$2,NoWorkResult$1$2=(function(){function t(s,r,a){r=r.toString(),this.stringified=!1,this._processor=s,this._css=r,this._opts=a,this._map=void 0;var o,l=stringify$1$2;this.result=new Result$1$2(this._processor,o,this._opts),this.result.css=r;var c=this;Object.defineProperty(this.result,"root",{get:function(){return c.root}});var u=new MapGenerator22(l,o,this._opts,r);if(u.isMap()){var f=u.generate(),d=f[0],p=f[1];d&&(this.result.css=d),p&&(this.result.map=p)}else u.clearAnnotation(),this.result.css=u.css}var e=t.prototype;return e.async=function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)},e.catch=function(r){return this.async().catch(r)},e.finally=function(r){return this.async().then(r,r)},e.sync=function(){if(this.error)throw this.error;return this.result},e.then=function(r,a){return this.async().then(r,a)},e.toString=function(){return this._css},e.warnings=function(){return[]},_create_class(t,[{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var r,a=parse$1$2;try{r=a(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=r,r}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]),t})(),noWorkResult$2=NoWorkResult$1$2;NoWorkResult$1$2.default=NoWorkResult$1$2;var NoWorkResult22=noWorkResult$2,LazyResult$1$2=lazyResult$2,Document$1$2=document$1$2,Root$2$2=root$2,Processor$1$2=(function(){function t(s){s===void 0&&(s=[]),this.version="8.4.38",this.plugins=this.normalize(s)}var e=t.prototype;return e.normalize=function(r){for(var a=[],o=_create_for_of_iterator_helper_loose(r),l;!(l=o()).done;){var c=l.value;if(c.postcss===!0?c=c():c.postcss&&(c=c.postcss),(typeof c>"u"?"undefined":_type_of(c))==="object"&&Array.isArray(c.plugins))a=a.concat(c.plugins);else if((typeof c>"u"?"undefined":_type_of(c))==="object"&&c.postcssPlugin)a.push(c);else if(typeof c=="function")a.push(c);else if(!((typeof c>"u"?"undefined":_type_of(c))==="object"&&(c.parse||c.stringify)))throw new Error(c+" is not a PostCSS plugin")}return a},e.process=function(r,a){return a===void 0&&(a={}),!this.plugins.length&&!a.parser&&!a.stringifier&&!a.syntax?new NoWorkResult22(this,r,a):new LazyResult$1$2(this,r,a)},e.use=function(r){return this.plugins=this.plugins.concat(this.normalize([r])),this},t})(),processor$2=Processor$1$2;Processor$1$2.default=Processor$1$2;Root$2$2.registerProcessor(Processor$1$2);Document$1$2.registerProcessor(Processor$1$2);var Declaration$1$2=declaration$2,PreviousMap22=previousMap$2,Comment$1$2=comment$2,AtRule$1$2=atRule$2,Input$1$2=input$2,Root$1$2=root$2,Rule$1$2=rule$2;function fromJSON$1$2(t,e){if(Array.isArray(t))return t.map(function(p){return fromJSON$1$2(p)});var s=t.inputs,r=_object_without_properties_loose(t,["inputs"]);if(s){e=[];for(var a=_create_for_of_iterator_helper_loose(s),o;!(o=a()).done;){var l=o.value,c=_extends({},l,{__proto__:Input$1$2.prototype});c.map&&(c.map=_extends({},c.map,{__proto__:PreviousMap22.prototype})),e.push(c)}}if(r.nodes&&(r.nodes=t.nodes.map(function(p){return fromJSON$1$2(p,e)})),r.source){var u=r.source,f=u.inputId,d=_object_without_properties_loose(u,["inputId"]);r.source=d,f!=null&&(r.source.input=e[f])}if(r.type==="root")return new Root$1$2(r);if(r.type==="decl")return new Declaration$1$2(r);if(r.type==="rule")return new Rule$1$2(r);if(r.type==="comment")return new Comment$1$2(r);if(r.type==="atrule")return new AtRule$1$2(r);throw new Error("Unknown node type: "+t.type)}var fromJSON_1$2=fromJSON$1$2;fromJSON$1$2.default=fromJSON$1$2;var CssSyntaxError22=cssSyntaxError$2,Declaration22=declaration$2,LazyResult22=lazyResult$2,Container22=container$2,Processor22=processor$2,stringify$6=stringify_1$2,fromJSON$3=fromJSON_1$2,Document222=document$1$2,Warning22=warning$2,Comment22=comment$2,AtRule22=atRule$2,Result22=result$2,Input22=input$2,parse$6=parse_1$2,list$4=list_1$2,Rule22=rule$2,Root22=root$2,Node22=node$2;function postcss$4(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new Processor22(e)}postcss$4.plugin=function t(e,s){var r=!1;function a(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),define_process_env_default.LANG&&define_process_env_default.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));var f=s.apply(void 0,[].concat(c));return f.postcssPlugin=e,f.postcssVersion=new Processor22().version,f}var o;return Object.defineProperty(a,"postcss",{get:function(){return o||(o=a()),o}}),a.process=function(l,c,u){return postcss$4([a(u)]).process(l,c)},a};postcss$4.stringify=stringify$6;postcss$4.parse=parse$6;postcss$4.fromJSON=fromJSON$3;postcss$4.list=list$4;postcss$4.comment=function(t){return new Comment22(t)};postcss$4.atRule=function(t){return new AtRule22(t)};postcss$4.decl=function(t){return new Declaration22(t)};postcss$4.rule=function(t){return new Rule22(t)};postcss$4.root=function(t){return new Root22(t)};postcss$4.document=function(t){return new Document222(t)};postcss$4.CssSyntaxError=CssSyntaxError22;postcss$4.Declaration=Declaration22;postcss$4.Container=Container22;postcss$4.Processor=Processor22;postcss$4.Document=Document222;postcss$4.Comment=Comment22;postcss$4.Warning=Warning22;postcss$4.AtRule=AtRule22;postcss$4.Result=Result22;postcss$4.Input=Input22;postcss$4.Rule=Rule22;postcss$4.Root=Root22;postcss$4.Node=Node22;LazyResult22.registerPostcss(postcss$4);var postcss_1$2=postcss$4;postcss$4.default=postcss$4;var postcss$1$2=getDefaultExportFromCjs$2(postcss_1$2);postcss$1$2.stringify;postcss$1$2.fromJSON;postcss$1$2.plugin;postcss$1$2.parse;postcss$1$2.list;postcss$1$2.document;postcss$1$2.comment;postcss$1$2.atRule;postcss$1$2.rule;postcss$1$2.decl;postcss$1$2.root;postcss$1$2.CssSyntaxError;postcss$1$2.Declaration;postcss$1$2.Container;postcss$1$2.Processor;postcss$1$2.Document;postcss$1$2.Comment;postcss$1$2.Warning;postcss$1$2.AtRule;postcss$1$2.Result;postcss$1$2.Input;postcss$1$2.Rule;postcss$1$2.Root;postcss$1$2.Node;var BaseRRNode=(function(){function t(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];__publicField2(this,"parentElement",null),__publicField2(this,"parentNode",null),__publicField2(this,"ownerDocument"),__publicField2(this,"firstChild",null),__publicField2(this,"lastChild",null),__publicField2(this,"previousSibling",null),__publicField2(this,"nextSibling",null),__publicField2(this,"ELEMENT_NODE",1),__publicField2(this,"TEXT_NODE",3),__publicField2(this,"nodeType"),__publicField2(this,"nodeName"),__publicField2(this,"RRNodeType")}var e=t.prototype;return e.contains=function(r){if(_instanceof(r,t)){if(r.ownerDocument!==this.ownerDocument)return!1;if(r===this)return!0}else return!1;for(;r.parentNode;){if(r.parentNode===this)return!0;r=r.parentNode}return!1},e.appendChild=function(r){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")},e.insertBefore=function(r,a){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")},e.removeChild=function(r){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")},e.toString=function(){return"RRNode"},_create_class(t,[{key:"childNodes",get:function(){for(var r=[],a=this.firstChild;a;)r.push(a),a=a.nextSibling;return r}}]),t})(),testableAccessors$2={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},testableMethods$2={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},untaintedBasePrototype$2={},isAngularZonePresent$2=function(){return!!globalThis.Zone};function getUntaintedPrototype$2(t){if(untaintedBasePrototype$2[t])return untaintedBasePrototype$2[t];var e=globalThis[t],s=e.prototype,r=t in testableAccessors$2?testableAccessors$2[t]:void 0,a=!!(r&&r.every(function(d){var p,m;return!!((m=(p=Object.getOwnPropertyDescriptor(s,d))==null?void 0:p.get)!=null&&m.toString().includes("[native code]"))})),o=t in testableMethods$2?testableMethods$2[t]:void 0,l=!!(o&&o.every(function(d){var p;return typeof s[d]=="function"&&((p=s[d])==null?void 0:p.toString().includes("[native code]"))}));if(a&&l&&!isAngularZonePresent$2())return untaintedBasePrototype$2[t]=e.prototype,e.prototype;try{var c=document.createElement("iframe");document.body.appendChild(c);var u=c.contentWindow;if(!u)return e.prototype;var f=u[t].prototype;return document.body.removeChild(c),f?untaintedBasePrototype$2[t]=f:s}catch{return s}}var untaintedAccessorCache$2={};function getUntaintedAccessor$2(t,e,s){var r,a=t+"."+String(s);if(untaintedAccessorCache$2[a])return untaintedAccessorCache$2[a].call(e);var o=getUntaintedPrototype$2(t),l=(r=Object.getOwnPropertyDescriptor(o,s))==null?void 0:r.get;return l?(untaintedAccessorCache$2[a]=l,l.call(e)):e[s]}var untaintedMethodCache$2={};function getUntaintedMethod$2(t,e,s){var r=t+"."+String(s);if(untaintedMethodCache$2[r])return untaintedMethodCache$2[r].bind(e);var a=getUntaintedPrototype$2(t),o=a[s];return typeof o!="function"?e[s]:(untaintedMethodCache$2[r]=o,o.bind(e))}function childNodes$2(t){return getUntaintedAccessor$2("Node",t,"childNodes")}function parentNode$2(t){return getUntaintedAccessor$2("Node",t,"parentNode")}function parentElement$2(t){return getUntaintedAccessor$2("Node",t,"parentElement")}function textContent$2(t){return getUntaintedAccessor$2("Node",t,"textContent")}function contains$2(t,e){return getUntaintedMethod$2("Node",t,"contains")(e)}function getRootNode$2(t){return getUntaintedMethod$2("Node",t,"getRootNode")()}function host$2(t){return!t||!("host"in t)?null:getUntaintedAccessor$2("ShadowRoot",t,"host")}function styleSheets$2(t){return t.styleSheets}function shadowRoot$2(t){return!t||!("shadowRoot"in t)?null:getUntaintedAccessor$2("Element",t,"shadowRoot")}function querySelector$2(t,e){return getUntaintedAccessor$2("Element",t,"querySelector")(e)}function querySelectorAll$2(t,e){return getUntaintedAccessor$2("Element",t,"querySelectorAll")(e)}function mutationObserverCtor$2(){return getUntaintedPrototype$2("MutationObserver").constructor}function patch$2(t,e,s){try{if(!(e in t))return function(){};var r=t[e],a=s(r);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=a,function(){t[e]=r}}catch{return function(){}}}var index$2={childNodes:childNodes$2,parentNode:parentNode$2,parentElement:parentElement$2,textContent:textContent$2,contains:contains$2,getRootNode:getRootNode$2,host:host$2,styleSheets:styleSheets$2,shadowRoot:shadowRoot$2,querySelector:querySelector$2,querySelectorAll:querySelectorAll$2,mutationObserver:mutationObserverCtor$2,patch:patch$2};function on(t,e,s){s===void 0&&(s=document);var r={capture:!0,passive:!0};return s.addEventListener(t,e,r),function(){return s.removeEventListener(t,e,r)}}var DEPARTED_MIRROR_ACCESS_WARNING=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,_mirror={map:{},getId:function t(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),-1},getNode:function t(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),null},removeNodeFromMap:function t(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)},has:function t(){return console.error(DEPARTED_MIRROR_ACCESS_WARNING),!1},reset:function t(){console.error(DEPARTED_MIRROR_ACCESS_WARNING)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(_mirror=new Proxy(_mirror,{get:function(e,s,r){return s==="map"&&console.error(DEPARTED_MIRROR_ACCESS_WARNING),Reflect.get(e,s,r)}}));function throttle(t,e,s){s===void 0&&(s={});var r=null,a=0;return function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=Date.now();!a&&s.leading===!1&&(a=u);var f=e-(u-a),d=this;f<=0||f>e?(r&&(clearTimeout(r),r=null),a=u,t.apply(d,l)):!r&&s.trailing!==!1&&(r=setTimeout(function(){a=s.leading===!1?0:Date.now(),r=null,t.apply(d,l)},f))}}function hookSetter(t,e,s,r,a){a===void 0&&(a=window);var o=a.Object.getOwnPropertyDescriptor(t,e);return a.Object.defineProperty(t,e,r?s:{set:function(c){var u=this;setTimeout(function(){s.set.call(u,c)},0),o&&o.set&&o.set.call(this,c)}}),function(){return hookSetter(t,e,o||{},!0)}}var nowTimestamp=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(nowTimestamp=function(){return new Date().getTime()});function getWindowScroll(t){var e,s,r,a,o=t.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:o.documentElement.scrollLeft||o?.body&&((e=index$2.parentElement(o.body))==null?void 0:e.scrollLeft)||((s=o?.body)==null?void 0:s.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:o?.documentElement.scrollTop||o?.body&&((r=index$2.parentElement(o.body))==null?void 0:r.scrollTop)||((a=o?.body)==null?void 0:a.scrollTop)||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function closestElementOfNode(t){if(!t)return null;var e=t.nodeType===t.ELEMENT_NODE?t:index$2.parentElement(t);return e}function isBlocked(t,e,s,r){if(!t)return!1;var a=closestElementOfNode(t);if(!a)return!1;try{if(typeof e=="string"){if(a.classList.contains(e)||r&&a.closest("."+e)!==null)return!0}else if(classMatchesRegex$1(a,e,r))return!0}catch{}return!!(s&&(a.matches(s)||r&&a.closest(s)!==null))}function isSerialized(t,e){return e.getId(t)!==-1}function isIgnored(t,e,s){return t.tagName==="TITLE"&&s.headTitleMutations?!0:e.getId(t)===IGNORED_NODE}function isAncestorRemoved(t,e){if(isShadowRoot(t))return!1;var s=e.getId(t);if(!e.has(s))return!0;var r=index$2.parentNode(t);return r&&r.nodeType===t.DOCUMENT_NODE?!1:r?isAncestorRemoved(r,e):!0}function legacy_isTouchEvent(t){return!!t.changedTouches}function polyfill$1(t){t===void 0&&(t=window),"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function isSerializedIframe(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function isSerializedStylesheet(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function hasShadowRoot(t){return t?_instanceof(t,BaseRRNode)&&"shadowRoot"in t?!!t.shadowRoot:!!index$2.shadowRoot(t):!1}var StyleSheetMirror=(function(){function t(){__publicField$1(this,"id",1),__publicField$1(this,"styleIDMap",new WeakMap),__publicField$1(this,"idStyleMap",new Map)}var e=t.prototype;return e.getId=function(r){var a;return(a=this.styleIDMap.get(r))!=null?a:-1},e.has=function(r){return this.styleIDMap.has(r)},e.add=function(r,a){if(this.has(r))return this.getId(r);var o;return a===void 0?o=this.id++:o=a,this.styleIDMap.set(r,o),this.idStyleMap.set(o,r),o},e.getStyle=function(r){return this.idStyleMap.get(r)||null},e.reset=function(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1},e.generateId=function(){return this.id++},t})();function getShadowHost(t){var e,s=null;return"getRootNode"in t&&((e=index$2.getRootNode(t))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&index$2.host(index$2.getRootNode(t))&&(s=index$2.host(index$2.getRootNode(t))),s}function getRootShadowHost(t){for(var e=t,s;s=getShadowHost(e);)e=s;return e}function shadowHostInDom(t){var e=t.ownerDocument;if(!e)return!1;var s=getRootShadowHost(t);return index$2.contains(e,s)}function inDom(t){var e=t.ownerDocument;return e?index$2.contains(e,t)||shadowHostInDom(t):!1}var EventType=(function(t){return t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t})(EventType||{}),IncrementalSource=(function(t){return t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t})(IncrementalSource||{}),MouseInteractions=(function(t){return t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t})(MouseInteractions||{}),PointerTypes=(function(t){return t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t})(PointerTypes||{}),CanvasContext=(function(t){return t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t})(CanvasContext||{}),MediaInteractions=(function(t){return t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange",t[t.RateChange=4]="RateChange",t})(MediaInteractions||{}),NodeType=(function(t){return t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment",t})(NodeType||{});function isNodeInLinkedList(t){return"__ln"in t}var DoubleLinkedList=(function(){function t(){__publicField$1(this,"length",0),__publicField$1(this,"head",null),__publicField$1(this,"tail",null)}var e=t.prototype;return e.get=function(r){if(r>=this.length)throw new Error("Position outside of list range");for(var a=this.head,o=0;o<r;o++)a=a?.next||null;return a},e.addNode=function(r){var a={value:r,previous:null,next:null};if(r.__ln=a,r.previousSibling&&isNodeInLinkedList(r.previousSibling)){var o=r.previousSibling.__ln.next;a.next=o,a.previous=r.previousSibling.__ln,r.previousSibling.__ln.next=a,o&&(o.previous=a)}else if(r.nextSibling&&isNodeInLinkedList(r.nextSibling)&&r.nextSibling.__ln.previous){var l=r.nextSibling.__ln.previous;a.previous=l,a.next=r.nextSibling.__ln,r.nextSibling.__ln.previous=a,l&&(l.next=a)}else this.head&&(this.head.previous=a),a.next=this.head,this.head=a;a.next===null&&(this.tail=a),this.length++},e.removeNode=function(r){var a=r.__ln;this.head&&(a.previous?(a.previous.next=a.next,a.next?a.next.previous=a.previous:this.tail=a.previous):(this.head=a.next,this.head?this.head.previous=null:this.tail=null),r.__ln&&delete r.__ln,this.length--)},t})(),moveKey=function(t,e){return t+"@"+e},MutationBuffer=(function(){function t(){var s=this;__publicField$1(this,"frozen",!1),__publicField$1(this,"locked",!1),__publicField$1(this,"texts",[]),__publicField$1(this,"attributes",[]),__publicField$1(this,"attributeMap",new WeakMap),__publicField$1(this,"removes",[]),__publicField$1(this,"mapRemoves",[]),__publicField$1(this,"movedMap",{}),__publicField$1(this,"addedSet",new Set),__publicField$1(this,"movedSet",new Set),__publicField$1(this,"droppedSet",new Set),__publicField$1(this,"removesSubTreeCache",new Set),__publicField$1(this,"mutationCb"),__publicField$1(this,"blockClass"),__publicField$1(this,"blockSelector"),__publicField$1(this,"maskTextClass"),__publicField$1(this,"maskTextSelector"),__publicField$1(this,"inlineStylesheet"),__publicField$1(this,"maskInputOptions"),__publicField$1(this,"maskTextFn"),__publicField$1(this,"maskInputFn"),__publicField$1(this,"keepIframeSrcFn"),__publicField$1(this,"recordCanvas"),__publicField$1(this,"inlineImages"),__publicField$1(this,"slimDOMOptions"),__publicField$1(this,"dataURLOptions"),__publicField$1(this,"doc"),__publicField$1(this,"mirror"),__publicField$1(this,"iframeManager"),__publicField$1(this,"stylesheetManager"),__publicField$1(this,"shadowDomManager"),__publicField$1(this,"canvasManager"),__publicField$1(this,"processedNodeManager"),__publicField$1(this,"unattachedDoc"),__publicField$1(this,"processMutations",function(r){r.forEach(s.processMutation),s.emit()}),__publicField$1(this,"emit",function(){if(!(s.frozen||s.locked)){for(var r=[],a=new Set,o=new DoubleLinkedList,l=function(z){for(var O=z,k=IGNORED_NODE;k===IGNORED_NODE;)O=O&&O.nextSibling,k=O&&s.mirror.getId(O);return k},c=function(z){var O=index$2.parentNode(z);if(!(!O||!inDom(z))){var k=!1;if(z.nodeType===Node.TEXT_NODE){var v=O.tagName;if(v==="TEXTAREA")return;v==="STYLE"&&s.addedSet.has(O)&&(k=!0)}var S=isShadowRoot(O)?s.mirror.getId(getShadowHost(z)):s.mirror.getId(O),N=l(z);if(S===-1||N===-1)return o.addNode(z);var R=serializeNodeWithId(z,{doc:s.doc,mirror:s.mirror,blockClass:s.blockClass,blockSelector:s.blockSelector,maskTextClass:s.maskTextClass,maskTextSelector:s.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:s.inlineStylesheet,maskInputOptions:s.maskInputOptions,maskTextFn:s.maskTextFn,maskInputFn:s.maskInputFn,slimDOMOptions:s.slimDOMOptions,dataURLOptions:s.dataURLOptions,recordCanvas:s.recordCanvas,inlineImages:s.inlineImages,onSerialize:function(T){isSerializedIframe(T,s.mirror)&&s.iframeManager.addIframe(T),isSerializedStylesheet(T,s.mirror)&&s.stylesheetManager.trackLinkElement(T),hasShadowRoot(z)&&s.shadowDomManager.addShadowRoot(index$2.shadowRoot(z),s.doc)},onIframeLoad:function(T,M){s.iframeManager.attachIframe(T,M),s.shadowDomManager.observeAttachShadow(T)},onStylesheetLoad:function(T,M){s.stylesheetManager.attachLinkElement(T,M)},cssCaptured:k});R&&(r.push({parentId:S,nextId:N,node:R}),a.add(R.id))}};s.mapRemoves.length;)s.mirror.removeNodeFromMap(s.mapRemoves.shift());for(var u=_create_for_of_iterator_helper_loose(s.movedSet),f;!(f=u()).done;){var d=f.value;isParentRemoved(s.removesSubTreeCache,d,s.mirror)&&!s.movedSet.has(index$2.parentNode(d))||c(d)}for(var p=_create_for_of_iterator_helper_loose(s.addedSet),m;!(m=p()).done;){var y=m.value;!isAncestorInSet(s.droppedSet,y)&&!isParentRemoved(s.removesSubTreeCache,y,s.mirror)||isAncestorInSet(s.movedSet,y)?c(y):s.droppedSet.add(y)}for(var b=null;o.length;){var E=null;if(b){var C=s.mirror.getId(index$2.parentNode(b.value)),j=l(b.value);C!==-1&&j!==-1&&(E=b)}if(!E)for(var B=o.tail;B;){var D=B;if(B=B.previous,D){var F=s.mirror.getId(index$2.parentNode(D.value)),q=l(D.value);if(q===-1)continue;if(F!==-1){E=D;break}else{var V=D.value,ee=index$2.parentNode(V);if(ee&&ee.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var Q=index$2.host(ee),W=s.mirror.getId(Q);if(W!==-1){E=D;break}}}}}if(!E){for(;o.head;)o.removeNode(o.head.value);break}b=E.previous,o.removeNode(E.value),c(E.value)}var Z={texts:s.texts.map(function(z){var O=z.node,k=index$2.parentNode(O);return k&&k.tagName==="TEXTAREA"&&s.genTextAreaValueMutation(k),{id:s.mirror.getId(O),value:z.value}}).filter(function(z){return!a.has(z.id)}).filter(function(z){return s.mirror.has(z.id)}),attributes:s.attributes.map(function(z){var O=z.attributes;if(typeof O.style=="string"){var k=JSON.stringify(z.styleDiff),v=JSON.stringify(z._unchangedStyles);k.length<O.style.length&&(k+v).split("var(").length===O.style.split("var(").length&&(O.style=z.styleDiff)}return{id:s.mirror.getId(z.node),attributes:O}}).filter(function(z){return!a.has(z.id)}).filter(function(z){return s.mirror.has(z.id)}),removes:s.removes,adds:r};!Z.texts.length&&!Z.attributes.length&&!Z.removes.length&&!Z.adds.length||(s.texts=[],s.attributes=[],s.attributeMap=new WeakMap,s.removes=[],s.addedSet=new Set,s.movedSet=new Set,s.droppedSet=new Set,s.removesSubTreeCache=new Set,s.movedMap={},s.mutationCb(Z))}}),__publicField$1(this,"genTextAreaValueMutation",function(r){var a=s.attributeMap.get(r);a||(a={node:r,attributes:{},styleDiff:{},_unchangedStyles:{}},s.attributes.push(a),s.attributeMap.set(r,a));var o=Array.from(index$2.childNodes(r),function(l){return index$2.textContent(l)||""}).join("");a.attributes.value=maskInputValue({element:r,maskInputOptions:s.maskInputOptions,tagName:r.tagName,type:getInputType(r),value:o,maskInputFn:s.maskInputFn})}),__publicField$1(this,"processMutation",function(r){if(!isIgnored(r.target,s.mirror,s.slimDOMOptions))switch(r.type){case"characterData":{var a=index$2.textContent(r.target);!isBlocked(r.target,s.blockClass,s.blockSelector,!1)&&a!==r.oldValue&&s.texts.push({value:needMaskingText(r.target,s.maskTextClass,s.maskTextSelector,!0)&&a?s.maskTextFn?s.maskTextFn(a,closestElementOfNode(r.target)):a.replace(/[\S]/g,"*"):a,node:r.target});break}case"attributes":{var o=r.target,l=r.attributeName,c=r.target.getAttribute(l);if(l==="value"){var u=getInputType(o);c=maskInputValue({element:o,maskInputOptions:s.maskInputOptions,tagName:o.tagName,type:u,value:c,maskInputFn:s.maskInputFn})}if(isBlocked(r.target,s.blockClass,s.blockSelector,!1)||c===r.oldValue)return;var f=s.attributeMap.get(r.target);if(o.tagName==="IFRAME"&&l==="src"&&!s.keepIframeSrcFn(c))if(!o.contentDocument)l="rr_src";else return;if(f||(f={node:r.target,attributes:{},styleDiff:{},_unchangedStyles:{}},s.attributes.push(f),s.attributeMap.set(r.target,f)),l==="type"&&o.tagName==="INPUT"&&(r.oldValue||"").toLowerCase()==="password"&&o.setAttribute("data-rr-is-password","true"),!ignoreAttribute(o.tagName,l))if(f.attributes[l]=transformAttribute(s.doc,toLowerCase(o.tagName),toLowerCase(l),c),l==="style"){if(!s.unattachedDoc)try{s.unattachedDoc=document.implementation.createHTMLDocument()}catch{s.unattachedDoc=s.doc}var d=s.unattachedDoc.createElement("span");r.oldValue&&d.setAttribute("style",r.oldValue);for(var p=_create_for_of_iterator_helper_loose(Array.from(o.style)),m;!(m=p()).done;){var y=m.value,b=o.style.getPropertyValue(y),E=o.style.getPropertyPriority(y);b!==d.style.getPropertyValue(y)||E!==d.style.getPropertyPriority(y)?E===""?f.styleDiff[y]=b:f.styleDiff[y]=[b,E]:f._unchangedStyles[y]=[b,E]}for(var C=_create_for_of_iterator_helper_loose(Array.from(d.style)),j;!(j=C()).done;){var B=j.value;o.style.getPropertyValue(B)===""&&(f.styleDiff[B]=!1)}}else l==="open"&&o.tagName==="DIALOG"&&(o.matches("dialog:modal")?f.attributes.rr_open_mode="modal":f.attributes.rr_open_mode="non-modal");break}case"childList":{if(isBlocked(r.target,s.blockClass,s.blockSelector,!0))return;if(r.target.tagName==="TEXTAREA"){s.genTextAreaValueMutation(r.target);return}r.addedNodes.forEach(function(D){return s.genAdds(D,r.target)}),r.removedNodes.forEach(function(D){var F=s.mirror.getId(D),q=isShadowRoot(r.target)?s.mirror.getId(index$2.host(r.target)):s.mirror.getId(r.target);isBlocked(r.target,s.blockClass,s.blockSelector,!1)||isIgnored(D,s.mirror,s.slimDOMOptions)||!isSerialized(D,s.mirror)||(s.addedSet.has(D)?(deepDelete(s.addedSet,D),s.droppedSet.add(D)):s.addedSet.has(r.target)&&F===-1||isAncestorRemoved(r.target,s.mirror)||(s.movedSet.has(D)&&s.movedMap[moveKey(F,q)]?deepDelete(s.movedSet,D):(s.removes.push({parentId:q,id:F,isShadow:isShadowRoot(r.target)&&isNativeShadowDom(r.target)?!0:void 0}),processRemoves(D,s.removesSubTreeCache))),s.mapRemoves.push(D))});break}}}),__publicField$1(this,"genAdds",function(r,a){if(!s.processedNodeManager.inOtherBuffer(r,s)&&!(s.addedSet.has(r)||s.movedSet.has(r))){if(s.mirror.hasNode(r)){if(isIgnored(r,s.mirror,s.slimDOMOptions))return;s.movedSet.add(r);var o=null;a&&s.mirror.hasNode(a)&&(o=s.mirror.getId(a)),o&&o!==-1&&(s.movedMap[moveKey(s.mirror.getId(r),o)]=!0)}else s.addedSet.add(r),s.droppedSet.delete(r);isBlocked(r,s.blockClass,s.blockSelector,!1)||(index$2.childNodes(r).forEach(function(l){return s.genAdds(l)}),hasShadowRoot(r)&&index$2.childNodes(index$2.shadowRoot(r)).forEach(function(l){s.processedNodeManager.add(l,s),s.genAdds(l,r)}))}})}var e=t.prototype;return e.init=function(r){var a=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(function(o){a[o]=r[o]})},e.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},e.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},e.isFrozen=function(){return this.frozen},e.lock=function(){this.locked=!0,this.canvasManager.lock()},e.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},e.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},t})();function deepDelete(t,e){t.delete(e),index$2.childNodes(e).forEach(function(s){return deepDelete(t,s)})}function processRemoves(t,e){for(var s=[t];s.length;){var r=s.pop();e.has(r)||(e.add(r),index$2.childNodes(r).forEach(function(a){return s.push(a)}))}}function isParentRemoved(t,e,s){return t.size===0?!1:_isParentRemoved(t,e)}function _isParentRemoved(t,e,s){var r=index$2.parentNode(e);return r?t.has(r):!1}function isAncestorInSet(t,e){return t.size===0?!1:_isAncestorInSet(t,e)}function _isAncestorInSet(t,e){var s=index$2.parentNode(e);return s?t.has(s)?!0:_isAncestorInSet(t,s):!1}var errorHandler;function registerErrorHandler(t){errorHandler=t}function unregisterErrorHandler(){errorHandler=void 0}var callbackWrapper=function(t){if(!errorHandler)return t;var e=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];try{return t.apply(void 0,[].concat(r))}catch(o){if(errorHandler&&errorHandler(o)===!0)return;throw o}};return e},mutationBuffers=[];function getEventTarget(t){try{if("composedPath"in t){var e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function initMutationObserver(t,e){var s=new MutationBuffer;mutationBuffers.push(s),s.init(t);var r=new(mutationObserverCtor$2())(callbackWrapper(s.processMutations.bind(s)));return r.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}function initMoveObserver(t){var e=t.mousemoveCb,s=t.sampling,r=t.doc,a=t.mirror;if(s.mousemove===!1)return function(){};var o=typeof s.mousemove=="number"?s.mousemove:50,l=typeof s.mousemoveCallback=="number"?s.mousemoveCallback:500,c=[],u,f=throttle(callbackWrapper(function(m){var y=Date.now()-u;e(c.map(function(b){return b.timeOffset-=y,b}),m),c=[],u=null}),l),d=callbackWrapper(throttle(callbackWrapper(function(m){var y=getEventTarget(m),b=legacy_isTouchEvent(m)?m.changedTouches[0]:m,E=b.clientX,C=b.clientY;u||(u=nowTimestamp()),c.push({x:E,y:C,id:a.getId(y),timeOffset:nowTimestamp()-u}),f(typeof DragEvent<"u"&&_instanceof(m,DragEvent)?IncrementalSource.Drag:_instanceof(m,MouseEvent)?IncrementalSource.MouseMove:IncrementalSource.TouchMove)}),o,{trailing:!1})),p=[on("mousemove",d,r),on("touchmove",d,r),on("drag",d,r)];return callbackWrapper(function(){p.forEach(function(m){return m()})})}function initMouseInteractionObserver(t){var e=t.mouseInteractionCb,s=t.doc,r=t.mirror,a=t.blockClass,o=t.blockSelector,l=t.sampling;if(l.mouseInteraction===!1)return function(){};var c=l.mouseInteraction===!0||l.mouseInteraction===void 0?{}:l.mouseInteraction,u=[],f=null,d=function(p){return function(m){var y=getEventTarget(m);if(!isBlocked(y,a,o,!0)){var b=null,E=p;if("pointerType"in m){switch(m.pointerType){case"mouse":b=PointerTypes.Mouse;break;case"touch":b=PointerTypes.Touch;break;case"pen":b=PointerTypes.Pen;break}b===PointerTypes.Touch?MouseInteractions[p]===MouseInteractions.MouseDown?E="TouchStart":MouseInteractions[p]===MouseInteractions.MouseUp&&(E="TouchEnd"):PointerTypes.Pen}else legacy_isTouchEvent(m)&&(b=PointerTypes.Touch);b!==null?(f=b,(E.startsWith("Touch")&&b===PointerTypes.Touch||E.startsWith("Mouse")&&b===PointerTypes.Mouse)&&(b=null)):MouseInteractions[p]===MouseInteractions.Click&&(b=f,f=null);var C=legacy_isTouchEvent(m)?m.changedTouches[0]:m;if(C){var j=r.getId(y),B=C.clientX,D=C.clientY;callbackWrapper(e)(_extends({type:MouseInteractions[E],id:j,x:B,y:D},b!==null&&{pointerType:b}))}}}};return Object.keys(MouseInteractions).filter(function(p){return Number.isNaN(Number(p))&&!p.endsWith("_Departed")&&c[p]!==!1}).forEach(function(p){var m=toLowerCase(p),y=d(p);if(window.PointerEvent)switch(MouseInteractions[p]){case MouseInteractions.MouseDown:case MouseInteractions.MouseUp:m=m.replace("mouse","pointer");break;case MouseInteractions.TouchStart:case MouseInteractions.TouchEnd:return}u.push(on(m,y,s))}),callbackWrapper(function(){u.forEach(function(p){return p()})})}function initScrollObserver(t){var e=t.scrollCb,s=t.doc,r=t.mirror,a=t.blockClass,o=t.blockSelector,l=t.sampling,c=callbackWrapper(throttle(callbackWrapper(function(u){var f=getEventTarget(u);if(!(!f||isBlocked(f,a,o,!0))){var d=r.getId(f);if(f===s&&s.defaultView){var p=getWindowScroll(s.defaultView);e({id:d,x:p.left,y:p.top})}else e({id:d,x:f.scrollLeft,y:f.scrollTop})}}),l.scroll||100));return on("scroll",c,s)}function initViewportResizeObserver(t,e){var s=t.viewportResizeCb,r=e.win,a=-1,o=-1,l=callbackWrapper(throttle(callbackWrapper(function(){var c=getWindowHeight(),u=getWindowWidth();(a!==c||o!==u)&&(s({width:Number(u),height:Number(c)}),a=c,o=u)}),200));return on("resize",l,r)}var INPUT_TAGS=["INPUT","TEXTAREA","SELECT"],lastInputValueMap=new WeakMap;function initInputObserver(t){var e=t.inputCb,s=t.doc,r=t.mirror,a=t.blockClass,o=t.blockSelector,l=t.ignoreClass,c=t.ignoreSelector,u=t.maskInputOptions,f=t.maskInputFn,d=t.sampling,p=t.userTriggeredOnInput;function m(F){var q=getEventTarget(F),V=F.isTrusted,ee=q&&q.tagName;if(q&&ee==="OPTION"&&(q=index$2.parentElement(q)),!(!q||!ee||INPUT_TAGS.indexOf(ee)<0||isBlocked(q,a,o,!0))&&!(q.classList.contains(l)||c&&q.matches(c))){var Q=q.value,W=!1,Z=getInputType(q)||"";Z==="radio"||Z==="checkbox"?W=q.checked:(u[ee.toLowerCase()]||u[Z])&&(Q=maskInputValue({element:q,maskInputOptions:u,tagName:ee,type:Z,value:Q,maskInputFn:f})),y(q,p?{text:Q,isChecked:W,userTriggered:V}:{text:Q,isChecked:W});var z=q.name;Z==="radio"&&z&&W&&s.querySelectorAll('input[type="radio"][name="'+z+'"]').forEach(function(O){if(O!==q){var k=O.value;y(O,p?{text:k,isChecked:!W,userTriggered:!1}:{text:k,isChecked:!W})}})}}function y(F,q){var V=lastInputValueMap.get(F);if(!V||V.text!==q.text||V.isChecked!==q.isChecked){lastInputValueMap.set(F,q);var ee=r.getId(F);callbackWrapper(e)(_extends({},q,{id:ee}))}}var b=d.input==="last"?["change"]:["input","change"],E=b.map(function(F){return on(F,callbackWrapper(m),s)}),C=s.defaultView;if(!C)return function(){E.forEach(function(F){return F()})};var j=C.Object.getOwnPropertyDescriptor(C.HTMLInputElement.prototype,"value"),B=[[C.HTMLInputElement.prototype,"value"],[C.HTMLInputElement.prototype,"checked"],[C.HTMLSelectElement.prototype,"value"],[C.HTMLTextAreaElement.prototype,"value"],[C.HTMLSelectElement.prototype,"selectedIndex"],[C.HTMLOptionElement.prototype,"selected"]];if(j&&j.set){var D;(D=E).push.apply(D,[].concat(B.map(function(F){return hookSetter(F[0],F[1],{set:function(){callbackWrapper(m)({target:this,isTrusted:!1})}},!1,C)})))}return callbackWrapper(function(){E.forEach(function(F){return F()})})}function getNestedCSSRulePositions(t){var e=[];function s(r,a){if(hasNestedCSSRule("CSSGroupingRule")&&_instanceof(r.parentRule,CSSGroupingRule)||hasNestedCSSRule("CSSMediaRule")&&_instanceof(r.parentRule,CSSMediaRule)||hasNestedCSSRule("CSSSupportsRule")&&_instanceof(r.parentRule,CSSSupportsRule)||hasNestedCSSRule("CSSConditionRule")&&_instanceof(r.parentRule,CSSConditionRule)){var o=Array.from(r.parentRule.cssRules),l=o.indexOf(r);a.unshift(l)}else if(r.parentStyleSheet){var c=Array.from(r.parentStyleSheet.cssRules),u=c.indexOf(r);a.unshift(u)}return a}return s(t,e)}function getIdAndStyleId(t,e,s){var r,a;return t?(t.ownerNode?r=e.getId(t.ownerNode):a=s.getId(t),{styleId:a,id:r}):{}}function initStyleSheetObserver(t,e){var s=t.styleSheetRuleCb,r=t.mirror,a=t.stylesheetManager,o=e.win;if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return function(){};var l=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(l,{apply:callbackWrapper(function(m,y,b){var E=b[0],C=b[1],j=getIdAndStyleId(y,r,a.styleMirror),B=j.id,D=j.styleId;return(B&&B!==-1||D&&D!==-1)&&s({id:B,styleId:D,adds:[{rule:E,index:C}]}),m.apply(y,b)})}),o.CSSStyleSheet.prototype.addRule=function(m,y,b){b===void 0&&(b=this.cssRules.length);var E=m+" { "+y+" }";return o.CSSStyleSheet.prototype.insertRule.apply(this,[E,b])};var c=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=new Proxy(c,{apply:callbackWrapper(function(m,y,b){var E=b[0],C=getIdAndStyleId(y,r,a.styleMirror),j=C.id,B=C.styleId;return(j&&j!==-1||B&&B!==-1)&&s({id:j,styleId:B,removes:[{index:E}]}),m.apply(y,b)})}),o.CSSStyleSheet.prototype.removeRule=function(m){return o.CSSStyleSheet.prototype.deleteRule.apply(this,[m])};var u;o.CSSStyleSheet.prototype.replace&&(u=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=new Proxy(u,{apply:callbackWrapper(function(m,y,b){var E=b[0],C=getIdAndStyleId(y,r,a.styleMirror),j=C.id,B=C.styleId;return(j&&j!==-1||B&&B!==-1)&&s({id:j,styleId:B,replace:E}),m.apply(y,b)})}));var f;o.CSSStyleSheet.prototype.replaceSync&&(f=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=new Proxy(f,{apply:callbackWrapper(function(m,y,b){var E=b[0],C=getIdAndStyleId(y,r,a.styleMirror),j=C.id,B=C.styleId;return(j&&j!==-1||B&&B!==-1)&&s({id:j,styleId:B,replaceSync:E}),m.apply(y,b)})}));var d={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?d.CSSGroupingRule=o.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(d.CSSMediaRule=o.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(d.CSSConditionRule=o.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(d.CSSSupportsRule=o.CSSSupportsRule));var p={};return Object.entries(d).forEach(function(m){var y=m[0],b=m[1];p[y]={insertRule:b.prototype.insertRule,deleteRule:b.prototype.deleteRule},b.prototype.insertRule=new Proxy(p[y].insertRule,{apply:callbackWrapper(function(E,C,j){var B=j[0],D=j[1],F=getIdAndStyleId(C.parentStyleSheet,r,a.styleMirror),q=F.id,V=F.styleId;return(q&&q!==-1||V&&V!==-1)&&s({id:q,styleId:V,adds:[{rule:B,index:[].concat(getNestedCSSRulePositions(C),[D||0])}]}),E.apply(C,j)})}),b.prototype.deleteRule=new Proxy(p[y].deleteRule,{apply:callbackWrapper(function(E,C,j){var B=j[0],D=getIdAndStyleId(C.parentStyleSheet,r,a.styleMirror),F=D.id,q=D.styleId;return(F&&F!==-1||q&&q!==-1)&&s({id:F,styleId:q,removes:[{index:[].concat(getNestedCSSRulePositions(C),[B])}]}),E.apply(C,j)})})}),callbackWrapper(function(){o.CSSStyleSheet.prototype.insertRule=l,o.CSSStyleSheet.prototype.deleteRule=c,u&&(o.CSSStyleSheet.prototype.replace=u),f&&(o.CSSStyleSheet.prototype.replaceSync=f),Object.entries(d).forEach(function(m){var y=m[0],b=m[1];b.prototype.insertRule=p[y].insertRule,b.prototype.deleteRule=p[y].deleteRule})})}function initAdoptedStyleSheetObserver(t,e){var s=t.mirror,r=t.stylesheetManager,a,o,l,c=null;e.nodeName==="#document"?c=s.getId(e):c=s.getId(index$2.host(e));var u=e.nodeName==="#document"?(a=e.defaultView)==null?void 0:a.Document:(l=(o=e.ownerDocument)==null?void 0:o.defaultView)==null?void 0:l.ShadowRoot,f=u?.prototype?Object.getOwnPropertyDescriptor(u?.prototype,"adoptedStyleSheets"):void 0;return c===null||c===-1||!u||!f?function(){}:(Object.defineProperty(e,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get:function(){var p;return(p=f.get)==null?void 0:p.call(this)},set:function(p){var m,y=(m=f.set)==null?void 0:m.call(this,p);if(c!==null&&c!==-1)try{r.adoptStyleSheets(p,c)}catch{}return y}}),callbackWrapper(function(){Object.defineProperty(e,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get:f.get,set:f.set})}))}function initStyleDeclarationObserver(t,e){var s=t.styleDeclarationCb,r=t.mirror,a=t.ignoreCSSAttributes,o=t.stylesheetManager,l=e.win,c=l.CSSStyleDeclaration.prototype.setProperty;l.CSSStyleDeclaration.prototype.setProperty=new Proxy(c,{apply:callbackWrapper(function(f,d,p){var m,y=p[0],b=p[1],E=p[2];if(a.has(y))return c.apply(d,[y,b,E]);var C=getIdAndStyleId((m=d.parentRule)==null?void 0:m.parentStyleSheet,r,o.styleMirror),j=C.id,B=C.styleId;return(j&&j!==-1||B&&B!==-1)&&s({id:j,styleId:B,set:{property:y,value:b,priority:E},index:getNestedCSSRulePositions(d.parentRule)}),f.apply(d,p)})});var u=l.CSSStyleDeclaration.prototype.removeProperty;return l.CSSStyleDeclaration.prototype.removeProperty=new Proxy(u,{apply:callbackWrapper(function(f,d,p){var m,y=p[0];if(a.has(y))return u.apply(d,[y]);var b=getIdAndStyleId((m=d.parentRule)==null?void 0:m.parentStyleSheet,r,o.styleMirror),E=b.id,C=b.styleId;return(E&&E!==-1||C&&C!==-1)&&s({id:E,styleId:C,remove:{property:y},index:getNestedCSSRulePositions(d.parentRule)}),f.apply(d,p)})}),callbackWrapper(function(){l.CSSStyleDeclaration.prototype.setProperty=c,l.CSSStyleDeclaration.prototype.removeProperty=u})}function initMediaInteractionObserver(t){var e=t.mediaInteractionCb,s=t.blockClass,r=t.blockSelector,a=t.mirror,o=t.sampling,l=t.doc,c=callbackWrapper(function(f){return throttle(callbackWrapper(function(d){var p=getEventTarget(d);if(!(!p||isBlocked(p,s,r,!0))){var m=p.currentTime,y=p.volume,b=p.muted,E=p.playbackRate,C=p.loop;e({type:f,id:a.getId(p),currentTime:m,volume:y,muted:b,playbackRate:E,loop:C})}}),o.media||500)}),u=[on("play",c(MediaInteractions.Play),l),on("pause",c(MediaInteractions.Pause),l),on("seeked",c(MediaInteractions.Seeked),l),on("volumechange",c(MediaInteractions.VolumeChange),l),on("ratechange",c(MediaInteractions.RateChange),l)];return callbackWrapper(function(){u.forEach(function(f){return f()})})}function initFontObserver(t){var e=t.fontCb,s=t.doc,r=s.defaultView;if(!r)return function(){};var a=[],o=new WeakMap,l=r.FontFace;r.FontFace=function(f,d,p){var m=new l(f,d,p);return o.set(m,{family:f,buffer:typeof d!="string",descriptors:p,fontSource:typeof d=="string"?d:JSON.stringify(Array.from(new Uint8Array(d)))}),m};var c=patch$2(s.fonts,"add",function(u){return function(f){return setTimeout(callbackWrapper(function(){var d=o.get(f);d&&(e(d),o.delete(f))}),0),u.apply(this,[f])}});return a.push(function(){r.FontFace=l}),a.push(c),callbackWrapper(function(){a.forEach(function(u){return u()})})}function initSelectionObserver(t){var e=t.doc,s=t.mirror,r=t.blockClass,a=t.blockSelector,o=t.selectionCb,l=!0,c=callbackWrapper(function(){var u=e.getSelection();if(!(!u||l&&u?.isCollapsed)){l=u.isCollapsed||!1;for(var f=[],d=u.rangeCount||0,p=0;p<d;p++){var m=u.getRangeAt(p),y=m.startContainer,b=m.startOffset,E=m.endContainer,C=m.endOffset,j=isBlocked(y,r,a,!0)||isBlocked(E,r,a,!0);j||f.push({start:s.getId(y),startOffset:b,end:s.getId(E),endOffset:C})}o({ranges:f})}});return c(),on("selectionchange",c)}function initCustomElementObserver(t){var e=t.doc,s=t.customElementCb,r=e.defaultView;if(!r||!r.customElements)return function(){};var a=patch$2(r.customElements,"define",function(o){return function(l,c,u){try{s({define:{name:l}})}catch{console.warn("Custom element callback failed for "+l)}return o.apply(this,[l,c,u])}});return a}function mergeHooks(t,e){var s=t.mutationCb,r=t.mousemoveCb,a=t.mouseInteractionCb,o=t.scrollCb,l=t.viewportResizeCb,c=t.inputCb,u=t.mediaInteractionCb,f=t.styleSheetRuleCb,d=t.styleDeclarationCb,p=t.canvasMutationCb,m=t.fontCb,y=t.selectionCb,b=t.customElementCb;t.mutationCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.mutation){var B;(B=e).mutation.apply(B,[].concat(C))}s.apply(void 0,[].concat(C))},t.mousemoveCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.mousemove){var B;(B=e).mousemove.apply(B,[].concat(C))}r.apply(void 0,[].concat(C))},t.mouseInteractionCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.mouseInteraction){var B;(B=e).mouseInteraction.apply(B,[].concat(C))}a.apply(void 0,[].concat(C))},t.scrollCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.scroll){var B;(B=e).scroll.apply(B,[].concat(C))}o.apply(void 0,[].concat(C))},t.viewportResizeCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.viewportResize){var B;(B=e).viewportResize.apply(B,[].concat(C))}l.apply(void 0,[].concat(C))},t.inputCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.input){var B;(B=e).input.apply(B,[].concat(C))}c.apply(void 0,[].concat(C))},t.mediaInteractionCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.mediaInteaction){var B;(B=e).mediaInteaction.apply(B,[].concat(C))}u.apply(void 0,[].concat(C))},t.styleSheetRuleCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.styleSheetRule){var B;(B=e).styleSheetRule.apply(B,[].concat(C))}f.apply(void 0,[].concat(C))},t.styleDeclarationCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.styleDeclaration){var B;(B=e).styleDeclaration.apply(B,[].concat(C))}d.apply(void 0,[].concat(C))},t.canvasMutationCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.canvasMutation){var B;(B=e).canvasMutation.apply(B,[].concat(C))}p.apply(void 0,[].concat(C))},t.fontCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.font){var B;(B=e).font.apply(B,[].concat(C))}m.apply(void 0,[].concat(C))},t.selectionCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.selection){var B;(B=e).selection.apply(B,[].concat(C))}y.apply(void 0,[].concat(C))},t.customElementCb=function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];if(e.customElement){var B;(B=e).customElement.apply(B,[].concat(C))}b.apply(void 0,[].concat(C))}}function initObservers(t,e){e===void 0&&(e={});var s=t.doc.defaultView;if(!s)return function(){};mergeHooks(t,e);var r;t.recordDOM&&(r=initMutationObserver(t,t.doc));var a=initMoveObserver(t),o=initMouseInteractionObserver(t),l=initScrollObserver(t),c=initViewportResizeObserver(t,{win:s}),u=initInputObserver(t),f=initMediaInteractionObserver(t),d=function(){},p=function(){},m=function(){},y=function(){};t.recordDOM&&(d=initStyleSheetObserver(t,{win:s}),p=initAdoptedStyleSheetObserver(t,t.doc),m=initStyleDeclarationObserver(t,{win:s}),t.collectFonts&&(y=initFontObserver(t)));for(var b=initSelectionObserver(t),E=initCustomElementObserver(t),C=[],j=_create_for_of_iterator_helper_loose(t.plugins),B;!(B=j()).done;){var D=B.value;C.push(D.observer(D.callback,s,D.options))}return callbackWrapper(function(){mutationBuffers.forEach(function(F){return F.reset()}),r?.disconnect(),a(),o(),l(),c(),u(),f(),d(),p(),m(),y(),b(),E(),C.forEach(function(F){return F()})})}function hasNestedCSSRule(t){return typeof window[t]<"u"}function canMonkeyPatchNestedCSSRule(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}var CrossOriginIframeMirror=(function(){function t(s){__publicField$1(this,"iframeIdToRemoteIdMap",new WeakMap),__publicField$1(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=s}var e=t.prototype;return e.getId=function(r,a,o,l){var c=o||this.getIdToRemoteIdMap(r),u=l||this.getRemoteIdToIdMap(r),f=c.get(a);return f||(f=this.generateIdFn(),c.set(a,f),u.set(f,a)),f},e.getIds=function(r,a){var o=this,l=this.getIdToRemoteIdMap(r),c=this.getRemoteIdToIdMap(r);return a.map(function(u){return o.getId(r,u,l,c)})},e.getRemoteId=function(r,a,o){var l=o||this.getRemoteIdToIdMap(r);if(typeof a!="number")return a;var c=l.get(a);return c||-1},e.getRemoteIds=function(r,a){var o=this,l=this.getRemoteIdToIdMap(r);return a.map(function(c){return o.getRemoteId(r,c,l)})},e.reset=function(r){if(!r){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(r),this.iframeRemoteIdToIdMap.delete(r)},e.getIdToRemoteIdMap=function(r){var a=this.iframeIdToRemoteIdMap.get(r);return a||(a=new Map,this.iframeIdToRemoteIdMap.set(r,a)),a},e.getRemoteIdToIdMap=function(r){var a=this.iframeRemoteIdToIdMap.get(r);return a||(a=new Map,this.iframeRemoteIdToIdMap.set(r,a)),a},t})(),IframeManager=(function(){function t(s){__publicField$1(this,"iframes",new WeakMap),__publicField$1(this,"crossOriginIframeMap",new WeakMap),__publicField$1(this,"crossOriginIframeMirror",new CrossOriginIframeMirror(genId)),__publicField$1(this,"crossOriginIframeStyleMirror"),__publicField$1(this,"crossOriginIframeRootIdMap",new WeakMap),__publicField$1(this,"mirror"),__publicField$1(this,"mutationCb"),__publicField$1(this,"wrappedEmit"),__publicField$1(this,"loadListener"),__publicField$1(this,"stylesheetManager"),__publicField$1(this,"recordCrossOriginIframes"),this.mutationCb=s.mutationCb,this.wrappedEmit=s.wrappedEmit,this.stylesheetManager=s.stylesheetManager,this.recordCrossOriginIframes=s.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=s.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}var e=t.prototype;return e.addIframe=function(r){this.iframes.set(r,!0),r.contentWindow&&this.crossOriginIframeMap.set(r.contentWindow,r)},e.addLoadListener=function(r){this.loadListener=r},e.attachIframe=function(r,a){var o,l;this.mutationCb({adds:[{parentId:this.mirror.getId(r),nextId:null,node:a}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((o=r.contentWindow)==null||o.addEventListener("message",this.handleMessage.bind(this))),(l=this.loadListener)==null||l.call(this,r),r.contentDocument&&r.contentDocument.adoptedStyleSheets&&r.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.contentDocument.adoptedStyleSheets,this.mirror.getId(r.contentDocument))},e.handleMessage=function(r){var a=r;if(!(a.data.type!=="rrweb"||a.origin!==a.data.origin)){var o=r.source;if(o){var l=this.crossOriginIframeMap.get(r.source);if(l){var c=this.transformCrossOriginEvent(l,a.data.event);c&&this.wrappedEmit(c,a.data.isCheckout)}}}},e.transformCrossOriginEvent=function(r,a){var o=this,l;switch(a.type){case EventType.FullSnapshot:{this.crossOriginIframeMirror.reset(r),this.crossOriginIframeStyleMirror.reset(r),this.replaceIdOnNode(a.data.node,r);var c=a.data.node.id;return this.crossOriginIframeRootIdMap.set(r,c),this.patchRootIdOnNode(a.data.node,c),{timestamp:a.timestamp,type:EventType.IncrementalSnapshot,data:{source:IncrementalSource.Mutation,adds:[{parentId:this.mirror.getId(r),nextId:null,node:a.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case EventType.Meta:case EventType.Load:case EventType.DomContentLoaded:return!1;case EventType.Plugin:return a;case EventType.Custom:return this.replaceIds(a.data.payload,r,["id","parentId","previousId","nextId"]),a;case EventType.IncrementalSnapshot:switch(a.data.source){case IncrementalSource.Mutation:return a.data.adds.forEach(function(u){o.replaceIds(u,r,["parentId","nextId","previousId"]),o.replaceIdOnNode(u.node,r);var f=o.crossOriginIframeRootIdMap.get(r);f&&o.patchRootIdOnNode(u.node,f)}),a.data.removes.forEach(function(u){o.replaceIds(u,r,["parentId","id"])}),a.data.attributes.forEach(function(u){o.replaceIds(u,r,["id"])}),a.data.texts.forEach(function(u){o.replaceIds(u,r,["id"])}),a;case IncrementalSource.Drag:case IncrementalSource.TouchMove:case IncrementalSource.MouseMove:return a.data.positions.forEach(function(u){o.replaceIds(u,r,["id"])}),a;case IncrementalSource.ViewportResize:return!1;case IncrementalSource.MediaInteraction:case IncrementalSource.MouseInteraction:case IncrementalSource.Scroll:case IncrementalSource.CanvasMutation:case IncrementalSource.Input:return this.replaceIds(a.data,r,["id"]),a;case IncrementalSource.StyleSheetRule:case IncrementalSource.StyleDeclaration:return this.replaceIds(a.data,r,["id"]),this.replaceStyleIds(a.data,r,["styleId"]),a;case IncrementalSource.Font:return a;case IncrementalSource.Selection:return a.data.ranges.forEach(function(u){o.replaceIds(u,r,["start","end"])}),a;case IncrementalSource.AdoptedStyleSheet:return this.replaceIds(a.data,r,["id"]),this.replaceStyleIds(a.data,r,["styleIds"]),(l=a.data.styles)==null||l.forEach(function(u){o.replaceStyleIds(u,r,["styleId"])}),a}}return!1},e.replace=function(r,a,o,l){for(var c=_create_for_of_iterator_helper_loose(l),u;!(u=c()).done;){var f=u.value;!Array.isArray(a[f])&&typeof a[f]!="number"||(Array.isArray(a[f])?a[f]=r.getIds(o,a[f]):a[f]=r.getId(o,a[f]))}return a},e.replaceIds=function(r,a,o){return this.replace(this.crossOriginIframeMirror,r,a,o)},e.replaceStyleIds=function(r,a,o){return this.replace(this.crossOriginIframeStyleMirror,r,a,o)},e.replaceIdOnNode=function(r,a){var o=this;this.replaceIds(r,a,["id","rootId"]),"childNodes"in r&&r.childNodes.forEach(function(l){o.replaceIdOnNode(l,a)})},e.patchRootIdOnNode=function(r,a){var o=this;r.type!==NodeType.Document&&!r.rootId&&(r.rootId=a),"childNodes"in r&&r.childNodes.forEach(function(l){o.patchRootIdOnNode(l,a)})},t})(),ShadowDomManager=(function(){function t(s){__publicField$1(this,"shadowDoms",new WeakSet),__publicField$1(this,"mutationCb"),__publicField$1(this,"scrollCb"),__publicField$1(this,"bypassOptions"),__publicField$1(this,"mirror"),__publicField$1(this,"restoreHandlers",[]),this.mutationCb=s.mutationCb,this.scrollCb=s.scrollCb,this.bypassOptions=s.bypassOptions,this.mirror=s.mirror,this.init()}var e=t.prototype;return e.init=function(){this.reset(),this.patchAttachShadow(Element,document)},e.addShadowRoot=function(r,a){var o=this;if(isNativeShadowDom(r)&&!this.shadowDoms.has(r)){this.shadowDoms.add(r);var l=initMutationObserver(_extends({},this.bypassOptions,{doc:a,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),r);this.restoreHandlers.push(function(){return l.disconnect()}),this.restoreHandlers.push(initScrollObserver(_extends({},this.bypassOptions,{scrollCb:this.scrollCb,doc:r,mirror:this.mirror}))),setTimeout(function(){r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&o.bypassOptions.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,o.mirror.getId(index$2.host(r))),o.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:o.mirror,stylesheetManager:o.bypassOptions.stylesheetManager},r))},0)}},e.observeAttachShadow=function(r){!r.contentWindow||!r.contentDocument||this.patchAttachShadow(r.contentWindow.Element,r.contentDocument)},e.patchAttachShadow=function(r,a){var o=this;this.restoreHandlers.push(patch$2(r.prototype,"attachShadow",function(l){return function(c){var u=l.call(this,c),f=index$2.shadowRoot(this);return f&&inDom(this)&&o.addShadowRoot(f,a),u}}))},e.reset=function(){this.restoreHandlers.forEach(function(r){try{r()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet},t})(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1=0;i$1<chars.length;i$1++)lookup[chars.charCodeAt(i$1)]=i$1;var encode=function t(e){var s=new Uint8Array(e),r,a=s.length,o="";for(r=0;r<a;r+=3)o+=chars[s[r]>>2],o+=chars[(s[r]&3)<<4|s[r+1]>>4],o+=chars[(s[r+1]&15)<<2|s[r+2]>>6],o+=chars[s[r+2]&63];return a%3===2?o=o.substring(0,o.length-1)+"=":a%3===1&&(o=o.substring(0,o.length-2)+"=="),o},canvasVarMap=new Map;function variableListFor$1(t,e){var s=canvasVarMap.get(t);return s||(s=new Map,canvasVarMap.set(t,s)),s.has(e)||s.set(e,[]),s.get(e)}var saveWebGLVar=function(t,e,s){if(!(!t||!(isInstanceOfWebGLObject(t,e)||(typeof t>"u"?"undefined":_type_of(t))==="object"))){var r=t.constructor.name,a=variableListFor$1(s,r),o=a.indexOf(t);return o===-1&&(o=a.length,a.push(t)),o}};function serializeArg(t,e,s){if(_instanceof(t,Array))return t.map(function(b){return serializeArg(b,e,s)});if(t===null)return t;if(_instanceof(t,Float32Array)||_instanceof(t,Float64Array)||_instanceof(t,Int32Array)||_instanceof(t,Uint32Array)||_instanceof(t,Uint8Array)||_instanceof(t,Uint16Array)||_instanceof(t,Int16Array)||_instanceof(t,Int8Array)||_instanceof(t,Uint8ClampedArray)){var r=t.constructor.name;return{rr_type:r,args:[Object.values(t)]}}else if(_instanceof(t,ArrayBuffer)){var a=t.constructor.name,o=encode(t);return{rr_type:a,base64:o}}else if(_instanceof(t,DataView)){var l=t.constructor.name;return{rr_type:l,args:[serializeArg(t.buffer,e,s),t.byteOffset,t.byteLength]}}else if(_instanceof(t,HTMLImageElement)){var c=t.constructor.name,u=t.src;return{rr_type:c,src:u}}else if(_instanceof(t,HTMLCanvasElement)){var f="HTMLImageElement",d=t.toDataURL();return{rr_type:f,src:d}}else if(_instanceof(t,ImageData)){var p=t.constructor.name;return{rr_type:p,args:[serializeArg(t.data,e,s),t.width,t.height]}}else if(isInstanceOfWebGLObject(t,e)||(typeof t>"u"?"undefined":_type_of(t))==="object"){var m=t.constructor.name,y=saveWebGLVar(t,e,s);return{rr_type:m,index:y}}return t}var serializeArgs=function(t,e,s){return t.map(function(r){return serializeArg(r,e,s)})},isInstanceOfWebGLObject=function(t,e){var s=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"],r=s.filter(function(a){return typeof e[a]=="function"});return!!r.find(function(a){return _instanceof(t,e[a])})};function initCanvas2DMutationObserver(t,e,s,r){for(var a=function(){var f=u.value;try{if(typeof e.CanvasRenderingContext2D.prototype[f]!="function")return"continue";var d=patch$2(e.CanvasRenderingContext2D.prototype,f,function(m){return function(){for(var y=this,b=arguments.length,E=new Array(b),C=0;C<b;C++)E[C]=arguments[C];return isBlocked(this.canvas,s,r,!0)||setTimeout(function(){var j=serializeArgs(E,e,y);t(y.canvas,{type:CanvasContext["2D"],property:f,args:j})},0),m.apply(this,E)}});o.push(d)}catch{var p=hookSetter(e.CanvasRenderingContext2D.prototype,f,{set:function(b){t(this.canvas,{type:CanvasContext["2D"],property:f,args:[b],setter:!0})}});o.push(p)}},o=[],l=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype),c=_create_for_of_iterator_helper_loose(l),u;!(u=c()).done;)a();return function(){o.forEach(function(f){return f()})}}function getNormalizedContextName(t){return t==="experimental-webgl"?"webgl":t}function initCanvasContextObserver(t,e,s,r){var a=[];try{var o=patch$2(t.HTMLCanvasElement.prototype,"getContext",function(l){return function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];if(!isBlocked(this,e,s,!0)){var p=getNormalizedContextName(c);if("__context"in this||(this.__context=p),r&&["webgl","webgl2"].includes(p))if(f[0]&&_type_of(f[0])==="object"){var m=f[0];m.preserveDrawingBuffer||(m.preserveDrawingBuffer=!0)}else f.splice(0,1,{preserveDrawingBuffer:!0})}return l.apply(this,[].concat([c],f))}});a.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){a.forEach(function(l){return l()})}}function patchGLPrototype(t,e,s,r,a,o){for(var l=function(){var p=d.value;if(["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(p))return"continue";try{if(typeof t[p]!="function")return"continue";var m=patch$2(t,p,function(b){return function(){for(var E=arguments.length,C=new Array(E),j=0;j<E;j++)C[j]=arguments[j];var B=b.apply(this,C);if(saveWebGLVar(B,o,this),"tagName"in this.canvas&&!isBlocked(this.canvas,r,a,!0)){var D=serializeArgs(C,o,this),F={type:e,property:p,args:D};s(this.canvas,F)}return B}});c.push(m)}catch{var y=hookSetter(t,p,{set:function(C){s(this.canvas,{type:e,property:p,args:[C],setter:!0})}});c.push(y)}},c=[],u=Object.getOwnPropertyNames(t),f=_create_for_of_iterator_helper_loose(u),d;!(d=f()).done;)l();return c}function initCanvasWebGLMutationObserver(t,e,s,r){var a,o=[];if((a=o).push.apply(a,[].concat(patchGLPrototype(e.WebGLRenderingContext.prototype,CanvasContext.WebGL,t,s,r,e))),typeof e.WebGL2RenderingContext<"u"){var l;(l=o).push.apply(l,[].concat(patchGLPrototype(e.WebGL2RenderingContext.prototype,CanvasContext.WebGL2,t,s,r,e)))}return function(){o.forEach(function(c){return c()})}}var encodedJs="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",decodeBase64=function(t){return Uint8Array.from(atob(t),function(e){return e.charCodeAt(0)})},blob=typeof window<"u"&&window.Blob&&new Blob([decodeBase64(encodedJs)],{type:"text/javascript;charset=utf-8"});function WorkerWrapper(t){var e;try{if(e=blob&&(window.URL||window.webkitURL).createObjectURL(blob),!e)throw"";var s=new Worker(e,{name:t?.name});return s.addEventListener("error",function(){(window.URL||window.webkitURL).revokeObjectURL(e)}),s}catch{return new Worker("data:text/javascript;base64,"+encodedJs,{name:t?.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}var CanvasManager=(function(){function t(s){var r=this;__publicField$1(this,"pendingCanvasMutations",new Map),__publicField$1(this,"rafStamps",{latestId:0,invokeId:null}),__publicField$1(this,"mirror"),__publicField$1(this,"mutationCb"),__publicField$1(this,"resetObservers"),__publicField$1(this,"frozen",!1),__publicField$1(this,"locked",!1),__publicField$1(this,"processMutation",function(p,m){var y=r.rafStamps.invokeId&&r.rafStamps.latestId!==r.rafStamps.invokeId;(y||!r.rafStamps.invokeId)&&(r.rafStamps.invokeId=r.rafStamps.latestId),r.pendingCanvasMutations.has(p)||r.pendingCanvasMutations.set(p,[]),r.pendingCanvasMutations.get(p).push(m)});var a=s.sampling,o=a===void 0?"all":a,l=s.win,c=s.blockClass,u=s.blockSelector,f=s.recordCanvas,d=s.dataURLOptions;this.mutationCb=s.mutationCb,this.mirror=s.mirror,f&&o==="all"&&this.initCanvasMutationObserver(l,c,u),f&&typeof o=="number"&&this.initCanvasFPSObserver(o,l,c,u,{dataURLOptions:d})}var e=t.prototype;return e.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},e.freeze=function(){this.frozen=!0},e.unfreeze=function(){this.frozen=!1},e.lock=function(){this.locked=!0},e.unlock=function(){this.locked=!1},e.initCanvasFPSObserver=function(r,a,o,l,c){var u=this,f=initCanvasContextObserver(a,o,l,!0),d=new Map,p=new WorkerWrapper;p.onmessage=function(j){var B=j.data.id;if(d.set(B,!1),"base64"in j.data){var D=j.data,F=D.base64,q=D.type,V=D.width,ee=D.height;u.mutationCb({id:B,type:CanvasContext["2D"],commands:[{property:"clearRect",args:[0,0,V,ee]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:F}],type:q}]},0,0]}]})}};var m=1e3/r,y=0,b,E=function(){var j=[];return a.document.querySelectorAll("canvas").forEach(function(B){isBlocked(B,o,l,!0)||j.push(B)}),j},C=function(j){if(y&&j-y<m){b=requestAnimationFrame(C);return}y=j;var B=u;E().forEach(_async_to_generator(function(D){var F,q,V,ee;return _ts_generator(this,function(Q){switch(Q.label){case 0:return q=B.mirror.getId(D),d.get(q)?[2]:D.width===0||D.height===0?[2]:(d.set(q,!0),["webgl","webgl2"].includes(D.__context)&&(V=D.getContext(D.__context),((F=V?.getContextAttributes())==null?void 0:F.preserveDrawingBuffer)===!1&&V.clear(V.COLOR_BUFFER_BIT)),[4,createImageBitmap(D)]);case 1:return ee=Q.sent(),p.postMessage({id:q,bitmap:ee,width:D.width,height:D.height,dataURLOptions:c.dataURLOptions},[ee]),[2]}})})),b=requestAnimationFrame(C)};b=requestAnimationFrame(C),this.resetObservers=function(){f(),cancelAnimationFrame(b)}},e.initCanvasMutationObserver=function(r,a,o){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var l=initCanvasContextObserver(r,a,o,!1),c=initCanvas2DMutationObserver(this.processMutation.bind(this),r,a,o),u=initCanvasWebGLMutationObserver(this.processMutation.bind(this),r,a,o);this.resetObservers=function(){l(),c(),u()}},e.startPendingCanvasMutationFlusher=function(){var r=this;requestAnimationFrame(function(){return r.flushPendingCanvasMutations()})},e.startRAFTimestamping=function(){var r=this,a=function(o){r.rafStamps.latestId=o,requestAnimationFrame(a)};requestAnimationFrame(a)},e.flushPendingCanvasMutations=function(){var r=this;this.pendingCanvasMutations.forEach(function(a,o){var l=r.mirror.getId(o);r.flushPendingCanvasMutationFor(o,l)}),requestAnimationFrame(function(){return r.flushPendingCanvasMutations()})},e.flushPendingCanvasMutationFor=function(r,a){if(!(this.frozen||this.locked)){var o=this.pendingCanvasMutations.get(r);if(!(!o||a===-1)){var l=o.map(function(u){u.type;var f=_object_without_properties_loose(u,["type"]);return f}),c=o[0].type;this.mutationCb({id:a,type:c,commands:l}),this.pendingCanvasMutations.delete(r)}}},t})(),StylesheetManager=(function(){function t(s){__publicField$1(this,"trackedLinkElements",new WeakSet),__publicField$1(this,"mutationCb"),__publicField$1(this,"adoptedStyleSheetCb"),__publicField$1(this,"styleMirror",new StyleSheetMirror),this.mutationCb=s.mutationCb,this.adoptedStyleSheetCb=s.adoptedStyleSheetCb}var e=t.prototype;return e.attachLinkElement=function(r,a){"_cssText"in a.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:a.id,attributes:a.attributes}]}),this.trackLinkElement(r)},e.trackLinkElement=function(r){this.trackedLinkElements.has(r)||(this.trackedLinkElements.add(r),this.trackStylesheetInLinkElement(r))},e.adoptStyleSheets=function(r,a){var o,l=function(){var p=d.value,m=void 0;o.styleMirror.has(p)?m=o.styleMirror.getId(p):(m=o.styleMirror.add(p),u.push({styleId:m,rules:Array.from(p.rules||CSSRule,function(y,b){return{rule:stringifyRule(y,p.href),index:b}})})),c.styleIds.push(m)};if(r.length!==0){for(var c={id:a,styleIds:[]},u=[],f=_create_for_of_iterator_helper_loose(r),d;!(d=f()).done;)o=this,l();u.length>0&&(c.styles=u),this.adoptedStyleSheetCb(c)}},e.reset=function(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet},e.trackStylesheetInLinkElement=function(r){},t})(),ProcessedNodeManager=(function(){function t(){__publicField$1(this,"nodeMap",new WeakMap),__publicField$1(this,"active",!1)}var e=t.prototype;return e.inOtherBuffer=function(r,a){var o=this.nodeMap.get(r);return o&&Array.from(o).some(function(l){return l!==a})},e.add=function(r,a){var o=this;this.active||(this.active=!0,requestAnimationFrame(function(){o.nodeMap=new WeakMap,o.active=!1})),this.nodeMap.set(r,(this.nodeMap.get(r)||new Set).add(a))},e.destroy=function(){},t})(),wrappedEmit,takeFullSnapshot$1,canvasManager,recording=!1;try{if(Array.from([1],function(t){return t*2})[0]!==2){var cleanFrame=document.createElement("iframe");document.body.appendChild(cleanFrame),Array.from=((_a=cleanFrame.contentWindow)==null?void 0:_a.Array.from)||Array.from,document.body.removeChild(cleanFrame)}}catch(t){console.debug("Unable to override Array.from",t)}var mirror=createMirror$2();function record(t){t===void 0&&(t={});var e=t.emit,s=t.checkoutEveryNms,r=t.checkoutEveryNth,a=t.blockClass,o=a===void 0?"rr-block":a,l=t.blockSelector,c=l===void 0?null:l,u=t.ignoreClass,f=u===void 0?"rr-ignore":u,d=t.ignoreSelector,p=d===void 0?null:d,m=t.maskTextClass,y=m===void 0?"rr-mask":m,b=t.maskTextSelector,E=b===void 0?null:b,C=t.inlineStylesheet,j=C===void 0?!0:C,B=t.maskAllInputs,D=t.maskInputOptions,F=t.slimDOMOptions,q=t.maskInputFn,V=t.maskTextFn,ee=t.hooks,Q=t.packFn,W=t.sampling,Z=W===void 0?{}:W,z=t.dataURLOptions,O=z===void 0?{}:z,k=t.mousemoveWait,v=t.recordDOM,S=v===void 0?!0:v,N=t.recordCanvas,R=N===void 0?!1:N,T=t.recordCrossOriginIframes,M=T===void 0?!1:T,I=t.recordAfter,$=I===void 0?t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load":I,A=t.userTriggeredOnInput,L=A===void 0?!1:A,Y=t.collectFonts,oe=Y===void 0?!1:Y,J=t.inlineImages,U=J===void 0?!1:J,G=t.plugins,ae=t.keepIframeSrcFn,he=ae===void 0?function(){return!1}:ae,le=t.ignoreCSSAttributes,te=le===void 0?new Set([]):le,pe=t.errorHandler;registerErrorHandler(pe);var xe=M?window.parent===window:!0,be=!1;if(!xe)try{window.parent.document&&(be=!1)}catch{be=!0}if(xe&&!e)throw new Error("emit function is required");if(!xe&&!be)return function(){};k!==void 0&&Z.mousemove===void 0&&(Z.mousemove=k),mirror.reset();var ce=B===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0,hidden:!0}:D!==void 0?D:{password:!0},re=F===!0||F==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:F==="all",headMetaDescKeywords:F==="all",headTitleMutations:F==="all"}:F||{};polyfill$1();var ie,fe=0,ye=function(_e){for(var ve=_create_for_of_iterator_helper_loose(G||[]),Ae;!(Ae=ve()).done;){var Oe=Ae.value;Oe.eventProcessor&&(_e=Oe.eventProcessor(_e))}return Q&&!be&&(_e=Q(_e)),_e};wrappedEmit=function(_e,ve){var Ae,Oe=_e;if(Oe.timestamp=nowTimestamp(),(Ae=mutationBuffers[0])!=null&&Ae.isFrozen()&&Oe.type!==EventType.FullSnapshot&&!(Oe.type===EventType.IncrementalSnapshot&&Oe.data.source===IncrementalSource.Mutation)&&mutationBuffers.forEach(function(Ve){return Ve.unfreeze()}),xe)e?.(ye(Oe),ve);else if(be){var Ue={type:"rrweb",event:ye(Oe),origin:window.location.origin,isCheckout:ve};window.parent.postMessage(Ue,"*")}if(Oe.type===EventType.FullSnapshot)ie=Oe,fe=0;else if(Oe.type===EventType.IncrementalSnapshot){if(Oe.data.source===IncrementalSource.Mutation&&Oe.data.isAttachIframe)return;fe++;var Ke=r&&fe>=r,We=s&&Oe.timestamp-ie.timestamp>s;(Ke||We)&&takeFullSnapshot$1(!0)}};for(var we=function(_e){wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.Mutation},_e)})},Re=function(_e){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.Scroll},_e)})},Me=function(_e){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.CanvasMutation},_e)})},ke=function(_e){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.AdoptedStyleSheet},_e)})},Le=new StylesheetManager({mutationCb:we,adoptedStyleSheetCb:ke}),Fe=new IframeManager({mirror,mutationCb:we,stylesheetManager:Le,recordCrossOriginIframes:M,wrappedEmit}),Te=_create_for_of_iterator_helper_loose(G||[]),Be;!(Be=Te()).done;){var ze=Be.value;ze.getMirror&&ze.getMirror({nodeMirror:mirror,crossOriginIframeMirror:Fe.crossOriginIframeMirror,crossOriginIframeStyleMirror:Fe.crossOriginIframeStyleMirror})}var de=new ProcessedNodeManager;canvasManager=new CanvasManager({recordCanvas:R,mutationCb:Me,win:window,blockClass:o,blockSelector:c,mirror,sampling:Z.canvas,dataURLOptions:O});var ne=new ShadowDomManager({mutationCb:we,scrollCb:Re,bypassOptions:{blockClass:o,blockSelector:c,maskTextClass:y,maskTextSelector:E,inlineStylesheet:j,maskInputOptions:ce,dataURLOptions:O,maskTextFn:V,maskInputFn:q,recordCanvas:R,inlineImages:U,sampling:Z,slimDOMOptions:re,iframeManager:Fe,stylesheetManager:Le,canvasManager,keepIframeSrcFn:he,processedNodeManager:de},mirror});takeFullSnapshot$1=function(_e){if(_e===void 0&&(_e=!1),!!S){wrappedEmit({type:EventType.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}},_e),Le.reset(),ne.init(),mutationBuffers.forEach(function(Ae){return Ae.lock()});var ve=snapshot(document,{mirror,blockClass:o,blockSelector:c,maskTextClass:y,maskTextSelector:E,inlineStylesheet:j,maskAllInputs:ce,maskTextFn:V,maskInputFn:q,slimDOM:re,dataURLOptions:O,recordCanvas:R,inlineImages:U,onSerialize:function(Ae){isSerializedIframe(Ae,mirror)&&Fe.addIframe(Ae),isSerializedStylesheet(Ae,mirror)&&Le.trackLinkElement(Ae),hasShadowRoot(Ae)&&ne.addShadowRoot(index$2.shadowRoot(Ae),document)},onIframeLoad:function(Ae,Oe){Fe.attachIframe(Ae,Oe),ne.observeAttachShadow(Ae)},onStylesheetLoad:function(Ae,Oe){Le.attachLinkElement(Ae,Oe)},keepIframeSrcFn:he});if(!ve)return console.warn("Failed to snapshot the document");wrappedEmit({type:EventType.FullSnapshot,data:{node:ve,initialOffset:getWindowScroll(window)}},_e),mutationBuffers.forEach(function(Ae){return Ae.unlock()}),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Le.adoptStyleSheets(document.adoptedStyleSheets,mirror.getId(document))}};try{var se=[],me=function(_e){var ve;return callbackWrapper(initObservers)({mutationCb:we,mousemoveCb:function(Ae,Oe){return wrappedEmit({type:EventType.IncrementalSnapshot,data:{source:Oe,positions:Ae}})},mouseInteractionCb:function(Ae){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.MouseInteraction},Ae)})},scrollCb:Re,viewportResizeCb:function(Ae){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.ViewportResize},Ae)})},inputCb:function(Ae){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.Input},Ae)})},mediaInteractionCb:function(Ae){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.MediaInteraction},Ae)})},styleSheetRuleCb:function(Ae){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.StyleSheetRule},Ae)})},styleDeclarationCb:function(Ae){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.StyleDeclaration},Ae)})},canvasMutationCb:Me,fontCb:function(Ae){return wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.Font},Ae)})},selectionCb:function(Ae){wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.Selection},Ae)})},customElementCb:function(Ae){wrappedEmit({type:EventType.IncrementalSnapshot,data:_extends({source:IncrementalSource.CustomElement},Ae)})},blockClass:o,ignoreClass:f,ignoreSelector:p,maskTextClass:y,maskTextSelector:E,maskInputOptions:ce,inlineStylesheet:j,sampling:Z,recordDOM:S,recordCanvas:R,inlineImages:U,userTriggeredOnInput:L,collectFonts:oe,doc:_e,maskInputFn:q,maskTextFn:V,keepIframeSrcFn:he,blockSelector:c,slimDOMOptions:re,dataURLOptions:O,mirror,iframeManager:Fe,stylesheetManager:Le,shadowDomManager:ne,processedNodeManager:de,canvasManager,ignoreCSSAttributes:te,plugins:((ve=G?.filter(function(Ae){return Ae.observer}))==null?void 0:ve.map(function(Ae){return{observer:Ae.observer,options:Ae.options,callback:function(Oe){return wrappedEmit({type:EventType.Plugin,data:{plugin:Ae.name,payload:Oe}})}}}))||[]},ee)};Fe.addLoadListener(function(_e){try{se.push(me(_e.contentDocument))}catch(ve){console.warn(ve)}});var Ee=function(){takeFullSnapshot$1(),se.push(me(document)),recording=!0};return document.readyState==="interactive"||document.readyState==="complete"?Ee():(se.push(on("DOMContentLoaded",function(){wrappedEmit({type:EventType.DomContentLoaded,data:{}}),$==="DOMContentLoaded"&&Ee()})),se.push(on("load",function(){wrappedEmit({type:EventType.Load,data:{}}),$==="load"&&Ee()},window))),function(){se.forEach(function(_e){try{_e()}catch(Ae){var ve=String(Ae).toLowerCase();ve.includes("cross-origin")||console.warn(Ae)}}),de.destroy(),recording=!1,unregisterErrorHandler()}}catch(_e){console.warn(_e)}}record.addCustomEvent=function(t,e){if(!recording)throw new Error("please add custom event after start recording");wrappedEmit({type:EventType.Custom,data:{tag:t,payload:e}})};record.freezePage=function(){mutationBuffers.forEach(function(t){return t.freeze()})};record.takeFullSnapshot=function(t){if(!recording)throw new Error("please take full snapshot after start recording");takeFullSnapshot$1(t)};record.mirror=mirror;var n;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(n||(n={}));record.addCustomEvent;record.freezePage;record.takeFullSnapshot;var testableAccessors={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},testableMethods={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},untaintedBasePrototype={},isAngularZonePresent=function(){return!!globalThis.Zone};function getUntaintedPrototype(t){if(untaintedBasePrototype[t])return untaintedBasePrototype[t];var e=globalThis[t],s=e.prototype,r=t in testableAccessors?testableAccessors[t]:void 0,a=!!(r&&r.every(function(d){var p,m;return!!((m=(p=Object.getOwnPropertyDescriptor(s,d))==null?void 0:p.get)!=null&&m.toString().includes("[native code]"))})),o=t in testableMethods?testableMethods[t]:void 0,l=!!(o&&o.every(function(d){var p;return typeof s[d]=="function"&&((p=s[d])==null?void 0:p.toString().includes("[native code]"))}));if(a&&l&&!isAngularZonePresent())return untaintedBasePrototype[t]=e.prototype,e.prototype;try{var c=document.createElement("iframe");document.body.appendChild(c);var u=c.contentWindow;if(!u)return e.prototype;var f=u[t].prototype;return document.body.removeChild(c),f?untaintedBasePrototype[t]=f:s}catch{return s}}var untaintedAccessorCache={};function getUntaintedAccessor(t,e,s){var r,a=t+"."+String(s);if(untaintedAccessorCache[a])return untaintedAccessorCache[a].call(e);var o=getUntaintedPrototype(t),l=(r=Object.getOwnPropertyDescriptor(o,s))==null?void 0:r.get;return l?(untaintedAccessorCache[a]=l,l.call(e)):e[s]}var untaintedMethodCache={};function getUntaintedMethod(t,e,s){var r=t+"."+String(s);if(untaintedMethodCache[r])return untaintedMethodCache[r].bind(e);var a=getUntaintedPrototype(t),o=a[s];return typeof o!="function"?e[s]:(untaintedMethodCache[r]=o,o.bind(e))}function childNodes(t){return getUntaintedAccessor("Node",t,"childNodes")}function parentNode(t){return getUntaintedAccessor("Node",t,"parentNode")}function parentElement(t){return getUntaintedAccessor("Node",t,"parentElement")}function textContent(t){return getUntaintedAccessor("Node",t,"textContent")}function contains(t,e){return getUntaintedMethod("Node",t,"contains")(e)}function getRootNode(t){return getUntaintedMethod("Node",t,"getRootNode")()}function host(t){return!t||!("host"in t)?null:getUntaintedAccessor("ShadowRoot",t,"host")}function styleSheets(t){return t.styleSheets}function shadowRoot(t){return!t||!("shadowRoot"in t)?null:getUntaintedAccessor("Element",t,"shadowRoot")}function querySelector(t,e){return getUntaintedAccessor("Element",t,"querySelector")(e)}function querySelectorAll(t,e){return getUntaintedAccessor("Element",t,"querySelectorAll")(e)}function mutationObserverCtor(){return getUntaintedPrototype("MutationObserver").constructor}function patch$1(t,e,s){try{if(!(e in t))return function(){};var r=t[e],a=s(r);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=a,function(){t[e]=r}}catch{return function(){}}}var index={childNodes,parentNode,parentElement,textContent,contains,getRootNode,host,styleSheets,shadowRoot,querySelector,querySelectorAll,mutationObserver:mutationObserverCtor,patch:patch$1};function classMatchesRegex(t,e,s){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return classMatchesRegex(index.parentNode(t),e);for(var r=t.classList.length;r--;){var a=t.classList[r];if(e.test(a))return!0}return classMatchesRegex(index.parentNode(t),e)}function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function r(){return _instanceof(this,r)?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),s}var picocolors_browser={exports:{}},x=String,create=function t(){return{isColorSupported:!1,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x}};picocolors_browser.exports=create();picocolors_browser.exports.createColors=create;var picocolors_browserExports=picocolors_browser.exports,__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1),pico=picocolors_browserExports,terminalHighlight$1=require$$2,CssSyntaxError$3=(function(t){_inherits(e,t);function e(r,a,o,l,c,u){var f;return f=t.call(this,r)||this,f.name="CssSyntaxError",f.reason=r,c&&(f.file=c),l&&(f.source=l),u&&(f.plugin=u),typeof a<"u"&&typeof o<"u"&&(typeof a=="number"?(f.line=a,f.column=o):(f.line=a.line,f.column=a.column,f.endLine=o.line,f.endColumn=o.column)),f.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(f,e),f}var s=e.prototype;return s.setMessage=function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},s.showSourceCode=function(a){var o=this;if(!this.source)return"";var l=this.source;a==null&&(a=pico.isColorSupported),terminalHighlight$1&&a&&(l=terminalHighlight$1(l));var c=l.split(/\r?\n/),u=Math.max(this.line-3,0),f=Math.min(this.line+2,c.length),d=String(f).length,p,m;if(a){var y=pico.createColors(!0),b=y.bold,E=y.gray,C=y.red;p=function(j){return b(C(j))},m=function(j){return E(j)}}else p=m=function(j){return j};return c.slice(u,f).map(function(j,B){var D=u+1+B,F=" "+(" "+D).slice(-d)+" | ";if(D===o.line){var q=m(F.replace(/\d/g," "))+j.slice(0,o.column-1).replace(/[^\t]/g," ");return p(">")+m(F)+j+`
 `+q+p("^")}return" "+m(F)+j}).join(`
`)},s.toString=function(){var a=this.showSourceCode();return a&&(a=`

`+a+`
`),this.name+": "+this.message+a},e})(_wrap_native_super(Error)),cssSyntaxError=CssSyntaxError$3;CssSyntaxError$3.default=CssSyntaxError$3;var symbols={};symbols.isClean=Symbol("isClean");symbols.my=Symbol("my");var DEFAULT_RAW={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function capitalize(t){return t[0].toUpperCase()+t.slice(1)}var Stringifier$2=(function(){function t(s){this.builder=s}var e=t.prototype;return e.atrule=function(r,a){var o="@"+r.name,l=r.params?this.rawValue(r,"params"):"";if(typeof r.raws.afterName<"u"?o+=r.raws.afterName:l&&(o+=" "),r.nodes)this.block(r,o+l);else{var c=(r.raws.between||"")+(a?";":"");this.builder(o+l+c,r)}},e.beforeAfter=function(r,a){var o;r.type==="decl"?o=this.raw(r,null,"beforeDecl"):r.type==="comment"?o=this.raw(r,null,"beforeComment"):a==="before"?o=this.raw(r,null,"beforeRule"):o=this.raw(r,null,"beforeClose");for(var l=r.parent,c=0;l&&l.type!=="root";)c+=1,l=l.parent;if(o.includes(`
`)){var u=this.raw(r,null,"indent");if(u.length)for(var f=0;f<c;f++)o+=u}return o},e.block=function(r,a){var o=this.raw(r,"between","beforeOpen");this.builder(a+o+"{",r,"start");var l;r.nodes&&r.nodes.length?(this.body(r),l=this.raw(r,"after")):l=this.raw(r,"after","emptyBody"),l&&this.builder(l),this.builder("}",r,"end")},e.body=function(r){for(var a=r.nodes.length-1;a>0&&r.nodes[a].type==="comment";)a-=1;for(var o=this.raw(r,"semicolon"),l=0;l<r.nodes.length;l++){var c=r.nodes[l],u=this.raw(c,"before");u&&this.builder(u),this.stringify(c,a!==l||o)}},e.comment=function(r){var a=this.raw(r,"left","commentLeft"),o=this.raw(r,"right","commentRight");this.builder("/*"+a+r.text+o+"*/",r)},e.decl=function(r,a){var o=this.raw(r,"between","colon"),l=r.prop+o+this.rawValue(r,"value");r.important&&(l+=r.raws.important||" !important"),a&&(l+=";"),this.builder(l,r)},e.document=function(r){this.body(r)},e.raw=function(r,a,o){var l;if(o||(o=a),a&&(l=r.raws[a],typeof l<"u"))return l;var c=r.parent;if(o==="before"&&(!c||c.type==="root"&&c.first===r||c&&c.type==="document"))return"";if(!c)return DEFAULT_RAW[o];var u=r.root();if(u.rawCache||(u.rawCache={}),typeof u.rawCache[o]<"u")return u.rawCache[o];if(o==="before"||o==="after")return this.beforeAfter(r,o);var f="raw"+capitalize(o);return this[f]?l=this[f](u,r):u.walk(function(d){if(l=d.raws[a],typeof l<"u")return!1}),typeof l>"u"&&(l=DEFAULT_RAW[o]),u.rawCache[o]=l,l},e.rawBeforeClose=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length>0&&typeof o.raws.after<"u")return a=o.raws.after,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),a&&(a=a.replace(/\S/g,"")),a},e.rawBeforeComment=function(r,a){var o;return r.walkComments(function(l){if(typeof l.raws.before<"u")return o=l.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(a,null,"beforeDecl"):o&&(o=o.replace(/\S/g,"")),o},e.rawBeforeDecl=function(r,a){var o;return r.walkDecls(function(l){if(typeof l.raws.before<"u")return o=l.raws.before,o.includes(`
`)&&(o=o.replace(/[^\n]+$/,"")),!1}),typeof o>"u"?o=this.raw(a,null,"beforeRule"):o&&(o=o.replace(/\S/g,"")),o},e.rawBeforeOpen=function(r){var a;return r.walk(function(o){if(o.type!=="decl"&&(a=o.raws.between,typeof a<"u"))return!1}),a},e.rawBeforeRule=function(r){var a;return r.walk(function(o){if(o.nodes&&(o.parent!==r||r.first!==o)&&typeof o.raws.before<"u")return a=o.raws.before,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),a&&(a=a.replace(/\S/g,"")),a},e.rawColon=function(r){var a;return r.walkDecls(function(o){if(typeof o.raws.between<"u")return a=o.raws.between.replace(/[^\s:]/g,""),!1}),a},e.rawEmptyBody=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length===0&&(a=o.raws.after,typeof a<"u"))return!1}),a},e.rawIndent=function(r){if(r.raws.indent)return r.raws.indent;var a;return r.walk(function(o){var l=o.parent;if(l&&l!==r&&l.parent&&l.parent===r&&typeof o.raws.before<"u"){var c=o.raws.before.split(`
`);return a=c[c.length-1],a=a.replace(/\S/g,""),!1}}),a},e.rawSemicolon=function(r){var a;return r.walk(function(o){if(o.nodes&&o.nodes.length&&o.last.type==="decl"&&(a=o.raws.semicolon,typeof a<"u"))return!1}),a},e.rawValue=function(r,a){var o=r[a],l=r.raws[a];return l&&l.value===o?l.raw:o},e.root=function(r){this.body(r),r.raws.after&&this.builder(r.raws.after)},e.rule=function(r){this.block(r,this.rawValue(r,"selector")),r.raws.ownSemicolon&&this.builder(r.raws.ownSemicolon,r,"end")},e.stringify=function(r,a){if(!this[r.type])throw new Error("Unknown AST node type "+r.type+". Maybe you need to change PostCSS stringifier.");this[r.type](r,a)},t})(),stringifier=Stringifier$2;Stringifier$2.default=Stringifier$2;var Stringifier$1=stringifier;function stringify$4(t,e){var s=new Stringifier$1(e);s.stringify(t)}var stringify_1=stringify$4;stringify$4.default=stringify$4;var isClean$2=symbols.isClean,my$2=symbols.my,CssSyntaxError$2=cssSyntaxError,Stringifier2=stringifier,stringify$3=stringify_1;function cloneNode(t,e){var s=new t.constructor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&r!=="proxyCache"){var a=t[r],o=typeof a>"u"?"undefined":_type_of(a);r==="parent"&&o==="object"?e&&(s[r]=e):r==="source"?s[r]=a:Array.isArray(a)?s[r]=a.map(function(l){return cloneNode(l,s)}):(o==="object"&&a!==null&&(a=cloneNode(a)),s[r]=a)}return s}var Node$4=(function(){function t(s){s===void 0&&(s={}),this.raws={},this[isClean$2]=!1,this[my$2]=!0;for(var r in s)if(r==="nodes"){this.nodes=[];for(var a=_create_for_of_iterator_helper_loose(s[r]),o;!(o=a()).done;){var l=o.value;typeof l.clone=="function"?this.append(l.clone()):this.append(l)}}else this[r]=s[r]}var e=t.prototype;return e.addToError=function(r){if(r.postcssNode=this,r.stack&&this.source&&/\n\s{4}at /.test(r.stack)){var a=this.source;r.stack=r.stack.replace(/\n\s{4}at /,"$&"+a.input.from+":"+a.start.line+":"+a.start.column+"$&")}return r},e.after=function(r){return this.parent.insertAfter(this,r),this},e.assign=function(r){r===void 0&&(r={});for(var a in r)this[a]=r[a];return this},e.before=function(r){return this.parent.insertBefore(this,r),this},e.cleanRaws=function(r){delete this.raws.before,delete this.raws.after,r||delete this.raws.between},e.clone=function(r){r===void 0&&(r={});var a=cloneNode(this);for(var o in r)a[o]=r[o];return a},e.cloneAfter=function(r){r===void 0&&(r={});var a=this.clone(r);return this.parent.insertAfter(this,a),a},e.cloneBefore=function(r){r===void 0&&(r={});var a=this.clone(r);return this.parent.insertBefore(this,a),a},e.error=function(r,a){if(a===void 0&&(a={}),this.source){var o=this.rangeBy(a),l=o.end,c=o.start;return this.source.input.error(r,{column:c.column,line:c.line},{column:l.column,line:l.line},a)}return new CssSyntaxError$2(r)},e.getProxyProcessor=function(){return{get:function(a,o){return o==="proxyOf"?a:o==="root"?function(){return a.root().toProxy()}:a[o]},set:function(a,o,l){return a[o]===l||(a[o]=l,(o==="prop"||o==="value"||o==="name"||o==="params"||o==="important"||o==="text")&&a.markDirty()),!0}}},e.markDirty=function(){if(this[isClean$2]){this[isClean$2]=!1;for(var r=this;r=r.parent;)r[isClean$2]=!1}},e.next=function(){if(this.parent){var r=this.parent.index(this);return this.parent.nodes[r+1]}},e.positionBy=function(r,a){var o=this.source.start;if(r.index)o=this.positionInside(r.index,a);else if(r.word){a=this.toString();var l=a.indexOf(r.word);l!==-1&&(o=this.positionInside(l,a))}return o},e.positionInside=function(r,a){for(var o=a||this.toString(),l=this.source.start.column,c=this.source.start.line,u=0;u<r;u++)o[u]===`
`?(l=1,c+=1):l+=1;return{column:l,line:c}},e.prev=function(){if(this.parent){var r=this.parent.index(this);return this.parent.nodes[r-1]}},e.rangeBy=function(r){var a={column:this.source.start.column,line:this.source.start.line},o=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:a.column+1,line:a.line};if(r.word){var l=this.toString(),c=l.indexOf(r.word);c!==-1&&(a=this.positionInside(c,l),o=this.positionInside(c+r.word.length,l))}else r.start?a={column:r.start.column,line:r.start.line}:r.index&&(a=this.positionInside(r.index)),r.end?o={column:r.end.column,line:r.end.line}:typeof r.endIndex=="number"?o=this.positionInside(r.endIndex):r.index&&(o=this.positionInside(r.index+1));return(o.line<a.line||o.line===a.line&&o.column<=a.column)&&(o={column:a.column+1,line:a.line}),{end:o,start:a}},e.raw=function(r,a){var o=new Stringifier2;return o.raw(this,r,a)},e.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.replaceWith=function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];if(this.parent){for(var l=this,c=!1,u=_create_for_of_iterator_helper_loose(a),f;!(f=u()).done;){var d=f.value;d===this?c=!0:c?(this.parent.insertAfter(l,d),l=d):this.parent.insertBefore(l,d)}c||this.remove()}return this},e.root=function(){for(var r=this;r.parent&&r.parent.type!=="document";)r=r.parent;return r},e.toJSON=function(r,a){var o={},l=a==null;a=a||new Map;var c=0;for(var u in this)if(Object.prototype.hasOwnProperty.call(this,u)&&!(u==="parent"||u==="proxyCache")){var f=this[u];if(Array.isArray(f))o[u]=f.map(function(p){return(typeof p>"u"?"undefined":_type_of(p))==="object"&&p.toJSON?p.toJSON(null,a):p});else if((typeof f>"u"?"undefined":_type_of(f))==="object"&&f.toJSON)o[u]=f.toJSON(null,a);else if(u==="source"){var d=a.get(f.input);d==null&&(d=c,a.set(f.input,c),c++),o[u]={end:f.end,inputId:d,start:f.start}}else o[u]=f}return l&&(o.inputs=[].concat(a.keys()).map(function(p){return p.toJSON()})),o},e.toProxy=function(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache},e.toString=function(r){r===void 0&&(r=stringify$3),r.stringify&&(r=r.stringify);var a="";return r(this,function(o){a+=o}),a},e.warn=function(r,a,o){var l={node:this};for(var c in o)l[c]=o[c];return r.warn(a,l)},_create_class(t,[{key:"proxyOf",get:function(){return this}}]),t})(),node=Node$4;Node$4.default=Node$4;var Node$3=node,Declaration$4=(function(t){_inherits(e,t);function e(s){var r;return s&&typeof s.value<"u"&&typeof s.value!="string"&&(s=_extends({},s,{value:String(s.value)})),r=t.call(this,s)||this,r.type="decl",r}return _create_class(e,[{key:"variable",get:function(){return this.prop.startsWith("--")||this.prop[0]==="$"}}]),e})(Node$3),declaration=Declaration$4;Declaration$4.default=Declaration$4;var urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",nanoid$1=function(t){t===void 0&&(t=21);for(var e="",s=t;s--;)e+=urlAlphabet[Math.random()*64|0];return e},nonSecure={nanoid:nanoid$1},SourceMapConsumer$2=require$$2.SourceMapConsumer,SourceMapGenerator$2=require$$2.SourceMapGenerator,existsSync=require$$2.existsSync,readFileSync=require$$2.readFileSync,dirname$1=require$$2.dirname,join=require$$2.join;function fromBase64(t){return Buffer?Buffer.from(t,"base64").toString():window.atob(t)}var PreviousMap$2=(function(){function t(s,r){if(r.map!==!1){this.loadAnnotation(s),this.inline=this.startWith(this.annotation,"data:");var a=r.map?r.map.prev:void 0,o=this.loadMap(r.from,a);!this.mapFile&&r.from&&(this.mapFile=r.from),this.mapFile&&(this.root=dirname$1(this.mapFile)),o&&(this.text=o)}}var e=t.prototype;return e.consumer=function(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer$2(this.text)),this.consumerCache},e.decodeInline=function(r){var a=/^data:application\/json;charset=utf-?8;base64,/,o=/^data:application\/json;base64,/,l=/^data:application\/json;charset=utf-?8,/,c=/^data:application\/json,/;if(l.test(r)||c.test(r))return decodeURIComponent(r.substr(RegExp.lastMatch.length));if(a.test(r)||o.test(r))return fromBase64(r.substr(RegExp.lastMatch.length));var u=r.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+u)},e.getAnnotationURL=function(r){return r.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()},e.isMap=function(r){return(typeof r>"u"?"undefined":_type_of(r))!=="object"?!1:typeof r.mappings=="string"||typeof r._mappings=="string"||Array.isArray(r.sections)},e.loadAnnotation=function(r){var a=r.match(/\/\*\s*# sourceMappingURL=/gm);if(a){var o=r.lastIndexOf(a.pop()),l=r.indexOf("*/",o);o>-1&&l>-1&&(this.annotation=this.getAnnotationURL(r.substring(o,l)))}},e.loadFile=function(r){if(this.root=dirname$1(r),existsSync(r))return this.mapFile=r,readFileSync(r,"utf-8").toString().trim()},e.loadMap=function(r,a){if(a===!1)return!1;if(a){if(typeof a=="string")return a;if(typeof a=="function"){var o=a(r);if(o){var l=this.loadFile(o);if(!l)throw new Error("Unable to load previous source map: "+o.toString());return l}}else{if(_instanceof(a,SourceMapConsumer$2))return SourceMapGenerator$2.fromSourceMap(a).toString();if(_instanceof(a,SourceMapGenerator$2))return a.toString();if(this.isMap(a))return JSON.stringify(a);throw new Error("Unsupported previous source map format: "+a.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var c=this.annotation;return r&&(c=join(dirname$1(r),c)),this.loadFile(c)}}},e.startWith=function(r,a){return r?r.substr(0,a.length)===a:!1},e.withContent=function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},t})(),previousMap=PreviousMap$2;PreviousMap$2.default=PreviousMap$2;var SourceMapConsumer$1=require$$2.SourceMapConsumer,SourceMapGenerator$1=require$$2.SourceMapGenerator,fileURLToPath=require$$2.fileURLToPath,pathToFileURL$1=require$$2.pathToFileURL,isAbsolute=require$$2.isAbsolute,resolve$1=require$$2.resolve,nanoid=nonSecure.nanoid,terminalHighlight=require$$2,CssSyntaxError$1=cssSyntaxError,PreviousMap$1=previousMap,fromOffsetCache=Symbol("fromOffsetCache"),sourceMapAvailable$1=!!(SourceMapConsumer$1&&SourceMapGenerator$1),pathAvailable$1=!!(resolve$1&&isAbsolute),Input$4=(function(){function t(s,r){if(r===void 0&&(r={}),s===null||typeof s>"u"||(typeof s>"u"?"undefined":_type_of(s))==="object"&&!s.toString)throw new Error("PostCSS received "+s+" instead of CSS string");if(this.css=s.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,r.from&&(!pathAvailable$1||/^\w+:\/\//.test(r.from)||isAbsolute(r.from)?this.file=r.from:this.file=resolve$1(r.from)),pathAvailable$1&&sourceMapAvailable$1){var a=new PreviousMap$1(this.css,r);if(a.text){this.map=a;var o=a.consumer().file;!this.file&&o&&(this.file=this.mapResolve(o))}}this.file||(this.id="<input css "+nanoid(6)+">"),this.map&&(this.map.file=this.from)}var e=t.prototype;return e.error=function(r,a,o,l){l===void 0&&(l={});var c,u,f;if(a&&(typeof a>"u"?"undefined":_type_of(a))==="object"){var d=a,p=o;if(typeof d.offset=="number"){var m=this.fromOffset(d.offset);a=m.line,o=m.col}else a=d.line,o=d.column;if(typeof p.offset=="number"){var y=this.fromOffset(p.offset);u=y.line,f=y.col}else u=p.line,f=p.column}else if(!o){var b=this.fromOffset(a);a=b.line,o=b.col}var E=this.origin(a,o,u,f);return E?c=new CssSyntaxError$1(r,E.endLine===void 0?E.line:{column:E.column,line:E.line},E.endLine===void 0?E.column:{column:E.endColumn,line:E.endLine},E.source,E.file,l.plugin):c=new CssSyntaxError$1(r,u===void 0?a:{column:o,line:a},u===void 0?o:{column:f,line:u},this.css,this.file,l.plugin),c.input={column:o,endColumn:f,endLine:u,line:a,source:this.css},this.file&&(pathToFileURL$1&&(c.input.url=pathToFileURL$1(this.file).toString()),c.input.file=this.file),c},e.fromOffset=function(r){var a,o;if(this[fromOffsetCache])o=this[fromOffsetCache];else{var l=this.css.split(`
`);o=new Array(l.length);for(var c=0,u=0,f=l.length;u<f;u++)o[u]=c,c+=l[u].length+1;this[fromOffsetCache]=o}a=o[o.length-1];var d=0;if(r>=a)d=o.length-1;else for(var p=o.length-2,m;d<p;)if(m=d+(p-d>>1),r<o[m])p=m-1;else if(r>=o[m+1])d=m+1;else{d=m;break}return{col:r-o[d]+1,line:d+1}},e.mapResolve=function(r){return/^\w+:\/\//.test(r)?r:resolve$1(this.map.consumer().sourceRoot||this.map.root||".",r)},e.origin=function(r,a,o,l){if(!this.map)return!1;var c=this.map.consumer(),u=c.originalPositionFor({column:a,line:r});if(!u.source)return!1;var f;typeof o=="number"&&(f=c.originalPositionFor({column:l,line:o}));var d;isAbsolute(u.source)?d=pathToFileURL$1(u.source):d=new URL(u.source,this.map.consumer().sourceRoot||pathToFileURL$1(this.map.mapFile));var p={column:u.column,endColumn:f&&f.column,endLine:f&&f.line,line:u.line,url:d.toString()};if(d.protocol==="file:")if(fileURLToPath)p.file=fileURLToPath(d);else throw new Error("file: protocol is not available in this PostCSS build");var m=c.sourceContentFor(u.source);return m&&(p.source=m),p},e.toJSON=function(){for(var r={},a=0,o=["hasBOM","css","file","id"];a<o.length;a++){var l=o[a];this[l]!=null&&(r[l]=this[l])}return this.map&&(r.map=_extends({},this.map),r.map.consumerCache&&(r.map.consumerCache=void 0)),r},_create_class(t,[{key:"from",get:function(){return this.file||this.id}}]),t})(),input=Input$4;Input$4.default=Input$4;terminalHighlight&&terminalHighlight.registerInput&&terminalHighlight.registerInput(Input$4);var SourceMapConsumer=require$$2.SourceMapConsumer,SourceMapGenerator=require$$2.SourceMapGenerator,dirname=require$$2.dirname,relative=require$$2.relative,resolve$4=require$$2.resolve,sep=require$$2.sep,pathToFileURL=require$$2.pathToFileURL,Input$3=input,sourceMapAvailable=!!(SourceMapConsumer&&SourceMapGenerator),pathAvailable=!!(dirname&&resolve$4&&relative&&sep),MapGenerator$2=(function(){function t(s,r,a,o){this.stringify=s,this.mapOpts=a.map||{},this.root=r,this.opts=a,this.css=o,this.originalCSS=o,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}var e=t.prototype;return e.addAnnotation=function(){var r;this.isInline()?r="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?r=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?r=this.mapOpts.annotation(this.opts.to,this.root):r=this.outputFile()+".map";var a=`
`;this.css.includes(`\r
`)&&(a=`\r
`),this.css+=a+"/*# sourceMappingURL="+r+" */"},e.applyPrevMaps=function(){for(var r=_create_for_of_iterator_helper_loose(this.previous()),a;!(a=r()).done;){var o=a.value,l=this.toUrl(this.path(o.file)),c=o.root||dirname(o.file),u=void 0;this.mapOpts.sourcesContent===!1?(u=new SourceMapConsumer(o.text),u.sourcesContent&&(u.sourcesContent=null)):u=o.consumer(),this.map.applySourceMap(u,l,this.toUrl(this.path(c)))}},e.clearAnnotation=function(){if(this.mapOpts.annotation!==!1)if(this.root)for(var r,a=this.root.nodes.length-1;a>=0;a--)r=this.root.nodes[a],r.type==="comment"&&r.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(a);else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))},e.generate=function(){if(this.clearAnnotation(),pathAvailable&&sourceMapAvailable&&this.isMap())return this.generateMap();var r="";return this.stringify(this.root,function(a){r+=a}),[r]},e.generateMap=function(){if(this.root)this.generateString();else if(this.previous().length===1){var r=this.previous()[0].consumer();r.file=this.outputFile(),this.map=SourceMapGenerator.fromSourceMap(r,{ignoreInvalidMapping:!0})}else this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},e.generateString=function(){var r=this;this.css="",this.map=new SourceMapGenerator({file:this.outputFile(),ignoreInvalidMapping:!0});var a=1,o=1,l="<no source>",c={generated:{column:0,line:0},original:{column:0,line:0},source:""},u,f;this.stringify(this.root,function(d,p,m){if(r.css+=d,p&&m!=="end"&&(c.generated.line=a,c.generated.column=o-1,p.source&&p.source.start?(c.source=r.sourcePath(p),c.original.line=p.source.start.line,c.original.column=p.source.start.column-1,r.map.addMapping(c)):(c.source=l,c.original.line=1,c.original.column=0,r.map.addMapping(c))),u=d.match(/\n/g),u?(a+=u.length,f=d.lastIndexOf(`
`),o=d.length-f):o+=d.length,p&&m!=="start"){var y=p.parent||{raws:{}},b=p.type==="decl"||p.type==="atrule"&&!p.nodes;(!b||p!==y.last||y.raws.semicolon)&&(p.source&&p.source.end?(c.source=r.sourcePath(p),c.original.line=p.source.end.line,c.original.column=p.source.end.column-1,c.generated.line=a,c.generated.column=o-2,r.map.addMapping(c)):(c.source=l,c.original.line=1,c.original.column=0,c.generated.line=a,c.generated.column=o-1,r.map.addMapping(c)))}})},e.isAnnotation=function(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(function(r){return r.annotation}):!0},e.isInline=function(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;var r=this.mapOpts.annotation;return typeof r<"u"&&r!==!0?!1:this.previous().length?this.previous().some(function(a){return a.inline}):!0},e.isMap=function(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0},e.isSourcesContent=function(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(function(r){return r.withContent()}):!0},e.outputFile=function(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"},e.path=function(r){if(this.mapOpts.absolute||r.charCodeAt(0)===60||/^\w+:\/\//.test(r))return r;var a=this.memoizedPaths.get(r);if(a)return a;var o=this.opts.to?dirname(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(o=dirname(resolve$4(o,this.mapOpts.annotation)));var l=relative(o,r);return this.memoizedPaths.set(r,l),l},e.previous=function(){var r=this;if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(function(o){if(o.source&&o.source.input.map){var l=o.source.input.map;r.previousMaps.includes(l)||r.previousMaps.push(l)}});else{var a=new Input$3(this.originalCSS,this.opts);a.map&&this.previousMaps.push(a.map)}return this.previousMaps},e.setSourcesContent=function(){var r=this,a={};if(this.root)this.root.walk(function(l){if(l.source){var c=l.source.input.from;if(c&&!a[c]){a[c]=!0;var u=r.usesFileUrls?r.toFileUrl(c):r.toUrl(r.path(c));r.map.setSourceContent(u,l.source.input.css)}}});else if(this.css){var o=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(o,this.css)}},e.sourcePath=function(r){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(r.source.input.from):this.toUrl(this.path(r.source.input.from))},e.toBase64=function(r){return Buffer?Buffer.from(r).toString("base64"):window.btoa(unescape(encodeURIComponent(r)))},e.toFileUrl=function(r){var a=this.memoizedFileURLs.get(r);if(a)return a;if(pathToFileURL){var o=pathToFileURL(r).toString();return this.memoizedFileURLs.set(r,o),o}else throw new Error("`map.absolute` option is not available in this PostCSS build")},e.toUrl=function(r){var a=this.memoizedURLs.get(r);if(a)return a;sep==="\\"&&(r=r.replace(/\\/g,"/"));var o=encodeURI(r).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(r,o),o},t})(),mapGenerator=MapGenerator$2,Node$2=node,Comment$4=(function(t){_inherits(e,t);function e(s){var r;return r=t.call(this,s)||this,r.type="comment",r}return e})(Node$2),comment=Comment$4;Comment$4.default=Comment$4;var isClean$1=symbols.isClean,my$1=symbols.my,Declaration$3=declaration,Comment$3=comment,Node$1=node,parse$4,Rule$4,AtRule$4,Root$6;function cleanSource(t){return t.map(function(e){return e.nodes&&(e.nodes=cleanSource(e.nodes)),delete e.source,e})}function markDirtyUp(t){if(t[isClean$1]=!1,t.proxyOf.nodes)for(var e=_create_for_of_iterator_helper_loose(t.proxyOf.nodes),s;!(s=e()).done;){var r=s.value;markDirtyUp(r)}}var Container$7=(function(t){_inherits(e,t);function e(){return t.apply(this,arguments)||this}var s=e.prototype;return s.append=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];for(var c=_create_for_of_iterator_helper_loose(o),u;!(u=c()).done;)for(var f=u.value,d=this.normalize(f,this.last),p=_create_for_of_iterator_helper_loose(d),m;!(m=p()).done;){var y=m.value;this.proxyOf.nodes.push(y)}return this.markDirty(),this},s.cleanRaws=function(a){if(t.prototype.cleanRaws.call(this,a),this.nodes)for(var o=_create_for_of_iterator_helper_loose(this.nodes),l;!(l=o()).done;){var c=l.value;c.cleanRaws(a)}},s.each=function(a){if(this.proxyOf.nodes){for(var o=this.getIterator(),l,c;this.indexes[o]<this.proxyOf.nodes.length&&(l=this.indexes[o],c=a(this.proxyOf.nodes[l],l),c!==!1);)this.indexes[o]+=1;return delete this.indexes[o],c}},s.every=function(a){return this.nodes.every(a)},s.getIterator=function(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var a=this.lastEach;return this.indexes[a]=0,a},s.getProxyProcessor=function(){return{get:function(o,l){return l==="proxyOf"?o:o[l]?l==="each"||typeof l=="string"&&l.startsWith("walk")?function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];var d;return(d=o)[l].apply(d,[].concat(u.map(function(p){return typeof p=="function"?function(m,y){return p(m.toProxy(),y)}:p})))}:l==="every"||l==="some"?function(c){return o[l](function(u){for(var f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return c.apply(void 0,[].concat([u.toProxy()],d))})}:l==="root"?function(){return o.root().toProxy()}:l==="nodes"?o.nodes.map(function(c){return c.toProxy()}):l==="first"||l==="last"?o[l].toProxy():o[l]:o[l]},set:function(o,l,c){return o[l]===c||(o[l]=c,(l==="name"||l==="params"||l==="selector")&&o.markDirty()),!0}}},s.index=function(a){return typeof a=="number"?a:(a.proxyOf&&(a=a.proxyOf),this.proxyOf.nodes.indexOf(a))},s.insertAfter=function(a,o){var l=this.index(a),c=this.normalize(o,this.proxyOf.nodes[l]).reverse();l=this.index(a);for(var u=_create_for_of_iterator_helper_loose(c),f;!(f=u()).done;){var d=f.value;this.proxyOf.nodes.splice(l+1,0,d)}var p;for(var m in this.indexes)p=this.indexes[m],l<p&&(this.indexes[m]=p+c.length);return this.markDirty(),this},s.insertBefore=function(a,o){var l=this.index(a),c=l===0?"prepend":!1,u=this.normalize(o,this.proxyOf.nodes[l],c).reverse();l=this.index(a);for(var f=_create_for_of_iterator_helper_loose(u),d;!(d=f()).done;){var p=d.value;this.proxyOf.nodes.splice(l,0,p)}var m;for(var y in this.indexes)m=this.indexes[y],l<=m&&(this.indexes[y]=m+u.length);return this.markDirty(),this},s.normalize=function(a,o){var l=this;if(typeof a=="string")a=cleanSource(parse$4(a).nodes);else if(typeof a>"u")a=[];else if(Array.isArray(a)){a=a.slice(0);for(var c=_create_for_of_iterator_helper_loose(a),u;!(u=c()).done;){var f=u.value;f.parent&&f.parent.removeChild(f,"ignore")}}else if(a.type==="root"&&this.type!=="document"){a=a.nodes.slice(0);for(var d=_create_for_of_iterator_helper_loose(a),p;!(p=d()).done;){var m=p.value;m.parent&&m.parent.removeChild(m,"ignore")}}else if(a.type)a=[a];else if(a.prop){if(typeof a.value>"u")throw new Error("Value field is missed in node creation");typeof a.value!="string"&&(a.value=String(a.value)),a=[new Declaration$3(a)]}else if(a.selector)a=[new Rule$4(a)];else if(a.name)a=[new AtRule$4(a)];else if(a.text)a=[new Comment$3(a)];else throw new Error("Unknown node type in node creation");var y=a.map(function(b){return b[my$1]||e.rebuild(b),b=b.proxyOf,b.parent&&b.parent.removeChild(b),b[isClean$1]&&markDirtyUp(b),typeof b.raws.before>"u"&&o&&typeof o.raws.before<"u"&&(b.raws.before=o.raws.before.replace(/\S/g,"")),b.parent=l.proxyOf,b});return y},s.prepend=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];o=o.reverse();for(var c=_create_for_of_iterator_helper_loose(o),u;!(u=c()).done;){for(var f=u.value,d=this.normalize(f,this.first,"prepend").reverse(),p=_create_for_of_iterator_helper_loose(d),m;!(m=p()).done;){var y=m.value;this.proxyOf.nodes.unshift(y)}for(var b in this.indexes)this.indexes[b]=this.indexes[b]+d.length}return this.markDirty(),this},s.push=function(a){return a.parent=this,this.proxyOf.nodes.push(a),this},s.removeAll=function(){for(var a=_create_for_of_iterator_helper_loose(this.proxyOf.nodes),o;!(o=a()).done;){var l=o.value;l.parent=void 0}return this.proxyOf.nodes=[],this.markDirty(),this},s.removeChild=function(a){a=this.index(a),this.proxyOf.nodes[a].parent=void 0,this.proxyOf.nodes.splice(a,1);var o;for(var l in this.indexes)o=this.indexes[l],o>=a&&(this.indexes[l]=o-1);return this.markDirty(),this},s.replaceValues=function(a,o,l){return l||(l=o,o={}),this.walkDecls(function(c){o.props&&!o.props.includes(c.prop)||o.fast&&!c.value.includes(o.fast)||(c.value=c.value.replace(a,l))}),this.markDirty(),this},s.some=function(a){return this.nodes.some(a)},s.walk=function(a){return this.each(function(o,l){var c;try{c=a(o,l)}catch(u){throw o.addToError(u)}return c!==!1&&o.walk&&(c=o.walk(a)),c})},s.walkAtRules=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="atrule"&&a.test(l.name))return o(l,c)}):this.walk(function(l,c){if(l.type==="atrule"&&l.name===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="atrule")return o(l,c)}))},s.walkComments=function(a){return this.walk(function(o,l){if(o.type==="comment")return a(o,l)})},s.walkDecls=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="decl"&&a.test(l.prop))return o(l,c)}):this.walk(function(l,c){if(l.type==="decl"&&l.prop===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="decl")return o(l,c)}))},s.walkRules=function(a,o){return o?_instanceof(a,RegExp)?this.walk(function(l,c){if(l.type==="rule"&&a.test(l.selector))return o(l,c)}):this.walk(function(l,c){if(l.type==="rule"&&l.selector===a)return o(l,c)}):(o=a,this.walk(function(l,c){if(l.type==="rule")return o(l,c)}))},_create_class(e,[{key:"first",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}},{key:"last",get:function(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}]),e})(Node$1);Container$7.registerParse=function(t){parse$4=t};Container$7.registerRule=function(t){Rule$4=t};Container$7.registerAtRule=function(t){AtRule$4=t};Container$7.registerRoot=function(t){Root$6=t};var container=Container$7;Container$7.default=Container$7;Container$7.rebuild=function(t){t.type==="atrule"?Object.setPrototypeOf(t,AtRule$4.prototype):t.type==="rule"?Object.setPrototypeOf(t,Rule$4.prototype):t.type==="decl"?Object.setPrototypeOf(t,Declaration$3.prototype):t.type==="comment"?Object.setPrototypeOf(t,Comment$3.prototype):t.type==="root"&&Object.setPrototypeOf(t,Root$6.prototype),t[my$1]=!0,t.nodes&&t.nodes.forEach(function(e){Container$7.rebuild(e)})};var Container$6=container,LazyResult$4,Processor$3,Document$3=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,_extends({type:"document"},r))||this,a.nodes||(a.nodes=[]),a}var s=e.prototype;return s.toResult=function(a){a===void 0&&(a={});var o=new LazyResult$4(new Processor$3,this,a);return o.stringify()},e})(Container$6);Document$3.registerLazyResult=function(t){LazyResult$4=t};Document$3.registerProcessor=function(t){Processor$3=t};var document$1$3=Document$3;Document$3.default=Document$3;var Warning$2=(function(){function t(s,r){if(r===void 0&&(r={}),this.type="warning",this.text=s,r.node&&r.node.source){var a=r.node.rangeBy(r);this.line=a.start.line,this.column=a.start.column,this.endLine=a.end.line,this.endColumn=a.end.column}for(var o in r)this[o]=r[o]}var e=t.prototype;return e.toString=function(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},t})(),warning=Warning$2;Warning$2.default=Warning$2;var Warning$1=warning,Result$3=(function(){function t(s,r,a){this.processor=s,this.messages=[],this.root=r,this.opts=a,this.css=void 0,this.map=void 0}var e=t.prototype;return e.toString=function(){return this.css},e.warn=function(r,a){a===void 0&&(a={}),a.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(a.plugin=this.lastPlugin.postcssPlugin);var o=new Warning$1(r,a);return this.messages.push(o),o},e.warnings=function(){return this.messages.filter(function(r){return r.type==="warning"})},_create_class(t,[{key:"content",get:function(){return this.css}}]),t})(),result=Result$3;Result$3.default=Result$3;var SINGLE_QUOTE=39,DOUBLE_QUOTE=34,BACKSLASH=92,SLASH=47,NEWLINE=10,SPACE=32,FEED=12,TAB=9,CR=13,OPEN_SQUARE=91,CLOSE_SQUARE=93,OPEN_PARENTHESES=40,CLOSE_PARENTHESES=41,OPEN_CURLY=123,CLOSE_CURLY=125,SEMICOLON=59,ASTERISK=42,COLON=58,AT=64,RE_AT_END=/[\t\n\f\r "#'()/;[\\\]{}]/g,RE_WORD_END=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\r\n"'(/\\]/,RE_HEX_ESCAPE=/[\da-f]/i,tokenize=function t(e,s){s===void 0&&(s={});var r=e.css.valueOf(),a=s.ignoreErrors,o,l,c,u,f,d,p,m,y,b,E=r.length,C=0,j=[],B=[];function D(){return C}function F(Q){throw e.error("Unclosed "+Q,C)}function q(){return B.length===0&&C>=E}function V(Q){if(B.length)return B.pop();if(!(C>=E)){var W=Q?Q.ignoreUnclosed:!1;switch(o=r.charCodeAt(C),o){case NEWLINE:case SPACE:case TAB:case CR:case FEED:{l=C;do l+=1,o=r.charCodeAt(l);while(o===SPACE||o===NEWLINE||o===TAB||o===CR||o===FEED);b=["space",r.slice(C,l)],C=l-1;break}case OPEN_SQUARE:case CLOSE_SQUARE:case OPEN_CURLY:case CLOSE_CURLY:case COLON:case SEMICOLON:case CLOSE_PARENTHESES:{var Z=String.fromCharCode(o);b=[Z,Z,C];break}case OPEN_PARENTHESES:{if(m=j.length?j.pop()[1]:"",y=r.charCodeAt(C+1),m==="url"&&y!==SINGLE_QUOTE&&y!==DOUBLE_QUOTE&&y!==SPACE&&y!==NEWLINE&&y!==TAB&&y!==FEED&&y!==CR){l=C;do{if(d=!1,l=r.indexOf(")",l+1),l===-1)if(a||W){l=C;break}else F("bracket");for(p=l;r.charCodeAt(p-1)===BACKSLASH;)p-=1,d=!d}while(d);b=["brackets",r.slice(C,l+1),C,l],C=l}else l=r.indexOf(")",C+1),u=r.slice(C,l+1),l===-1||RE_BAD_BRACKET.test(u)?b=["(","(",C]:(b=["brackets",u,C,l],C=l);break}case SINGLE_QUOTE:case DOUBLE_QUOTE:{c=o===SINGLE_QUOTE?"'":'"',l=C;do{if(d=!1,l=r.indexOf(c,l+1),l===-1)if(a||W){l=C+1;break}else F("string");for(p=l;r.charCodeAt(p-1)===BACKSLASH;)p-=1,d=!d}while(d);b=["string",r.slice(C,l+1),C,l],C=l;break}case AT:{RE_AT_END.lastIndex=C+1,RE_AT_END.test(r),RE_AT_END.lastIndex===0?l=r.length-1:l=RE_AT_END.lastIndex-2,b=["at-word",r.slice(C,l+1),C,l],C=l;break}case BACKSLASH:{for(l=C,f=!0;r.charCodeAt(l+1)===BACKSLASH;)l+=1,f=!f;if(o=r.charCodeAt(l+1),f&&o!==SLASH&&o!==SPACE&&o!==NEWLINE&&o!==TAB&&o!==CR&&o!==FEED&&(l+=1,RE_HEX_ESCAPE.test(r.charAt(l)))){for(;RE_HEX_ESCAPE.test(r.charAt(l+1));)l+=1;r.charCodeAt(l+1)===SPACE&&(l+=1)}b=["word",r.slice(C,l+1),C,l],C=l;break}default:{o===SLASH&&r.charCodeAt(C+1)===ASTERISK?(l=r.indexOf("*/",C+2)+1,l===0&&(a||W?l=r.length:F("comment")),b=["comment",r.slice(C,l+1),C,l],C=l):(RE_WORD_END.lastIndex=C+1,RE_WORD_END.test(r),RE_WORD_END.lastIndex===0?l=r.length-1:l=RE_WORD_END.lastIndex-2,b=["word",r.slice(C,l+1),C,l],j.push(b),C=l);break}}return C++,b}}function ee(Q){B.push(Q)}return{back:ee,endOfFile:q,nextToken:V,position:D}},Container$5=container,AtRule$3=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,r)||this,a.type="atrule",a}var s=e.prototype;return s.append=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c;return this.proxyOf.nodes||(this.nodes=[]),(c=t.prototype.append).call.apply(c,[].concat([this],o))},s.prepend=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c;return this.proxyOf.nodes||(this.nodes=[]),(c=t.prototype.prepend).call.apply(c,[].concat([this],o))},e})(Container$5),atRule=AtRule$3;AtRule$3.default=AtRule$3;Container$5.registerAtRule(AtRule$3);var Container$4=container,LazyResult$3,Processor$2,Root$5=(function(t){_inherits(e,t);function e(r){var a;return a=t.call(this,r)||this,a.type="root",a.nodes||(a.nodes=[]),a}var s=e.prototype;return s.normalize=function(a,o,l){var c=t.prototype.normalize.call(this,a);if(o){if(l==="prepend")this.nodes.length>1?o.raws.before=this.nodes[1].raws.before:delete o.raws.before;else if(this.first!==o)for(var u=_create_for_of_iterator_helper_loose(c),f;!(f=u()).done;){var d=f.value;d.raws.before=o.raws.before}}return c},s.removeChild=function(a,o){var l=this.index(a);return!o&&l===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[l].raws.before),t.prototype.removeChild.call(this,a)},s.toResult=function(a){a===void 0&&(a={});var o=new LazyResult$3(new Processor$2,this,a);return o.stringify()},e})(Container$4);Root$5.registerLazyResult=function(t){LazyResult$3=t};Root$5.registerProcessor=function(t){Processor$2=t};var root=Root$5;Root$5.default=Root$5;Container$4.registerRoot(Root$5);var list$2={comma:function t(e){return list$2.split(e,[","],!0)},space:function t(e){var s=[" ",`
`,"	"];return list$2.split(e,s)},split:function t(e,s,r){for(var a=[],o="",l=!1,c=0,u=!1,f="",d=!1,p=_create_for_of_iterator_helper_loose(e),m;!(m=p()).done;){var y=m.value;d?d=!1:y==="\\"?d=!0:u?y===f&&(u=!1):y==='"'||y==="'"?(u=!0,f=y):y==="("?c+=1:y===")"?c>0&&(c-=1):c===0&&s.includes(y)&&(l=!0),l?(o!==""&&a.push(o.trim()),o="",l=!1):o+=y}return(r||o!=="")&&a.push(o.trim()),a}},list_1=list$2;list$2.default=list$2;var Container$3=container,list$1=list_1,Rule$3=(function(t){_inherits(e,t);function e(s){var r;return r=t.call(this,s)||this,r.type="rule",r.nodes||(r.nodes=[]),r}return _create_class(e,[{key:"selectors",get:function(){return list$1.comma(this.selector)},set:function(r){var a=this.selector?this.selector.match(/,\s*/):null,o=a?a[0]:","+this.raw("between","beforeOpen");this.selector=r.join(o)}}]),e})(Container$3),rule=Rule$3;Rule$3.default=Rule$3;Container$3.registerRule(Rule$3);var Declaration$2=declaration,tokenizer23=tokenize,Comment$2=comment,AtRule$2=atRule,Root$4=root,Rule$2=rule,SAFE_COMMENT_NEIGHBOR={empty:!0,space:!0};function findLastWithPosition(t){for(var e=t.length-1;e>=0;e--){var s=t[e],r=s[3]||s[2];if(r)return r}}var Parser$1=(function(){function t(s){this.input=s,this.root=new Root$4,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:s,start:{column:1,line:1,offset:0}}}var e=t.prototype;return e.atrule=function(r){var a=new AtRule$2;a.name=r[1].slice(1),a.name===""&&this.unnamedAtrule(a,r),this.init(a,r[2]);for(var o,l,c,u=!1,f=!1,d=[],p=[];!this.tokenizer.endOfFile();){if(r=this.tokenizer.nextToken(),o=r[0],o==="("||o==="["?p.push(o==="("?")":"]"):o==="{"&&p.length>0?p.push("}"):o===p[p.length-1]&&p.pop(),p.length===0)if(o===";"){a.source.end=this.getPosition(r[2]),a.source.end.offset++,this.semicolon=!0;break}else if(o==="{"){f=!0;break}else if(o==="}"){if(d.length>0){for(c=d.length-1,l=d[c];l&&l[0]==="space";)l=d[--c];l&&(a.source.end=this.getPosition(l[3]||l[2]),a.source.end.offset++)}this.end(r);break}else d.push(r);else d.push(r);if(this.tokenizer.endOfFile()){u=!0;break}}a.raws.between=this.spacesAndCommentsFromEnd(d),d.length?(a.raws.afterName=this.spacesAndCommentsFromStart(d),this.raw(a,"params",d),u&&(r=d[d.length-1],a.source.end=this.getPosition(r[3]||r[2]),a.source.end.offset++,this.spaces=a.raws.between,a.raws.between="")):(a.raws.afterName="",a.params=""),f&&(a.nodes=[],this.current=a)},e.checkMissedSemicolon=function(r){var a=this.colon(r);if(a!==!1){for(var o=0,l,c=a-1;c>=0&&(l=r[c],!(l[0]!=="space"&&(o+=1,o===2)));c--);throw this.input.error("Missed semicolon",l[0]==="word"?l[3]+1:l[2])}},e.colon=function(r){for(var a=0,o,l,c,u=_create_for_of_iterator_helper_loose(r.entries()),f;!(f=u()).done;){var d=f.value,p=d[0],m=d[1];if(o=m,l=o[0],l==="("&&(a+=1),l===")"&&(a-=1),a===0&&l===":")if(!c)this.doubleColon(o);else{if(c[0]==="word"&&c[1]==="progid")continue;return p}c=o}return!1},e.comment=function(r){var a=new Comment$2;this.init(a,r[2]),a.source.end=this.getPosition(r[3]||r[2]),a.source.end.offset++;var o=r[1].slice(2,-2);if(/^\s*$/.test(o))a.text="",a.raws.left=o,a.raws.right="";else{var l=o.match(/^(\s*)([^]*\S)(\s*)$/);a.text=l[2],a.raws.left=l[1],a.raws.right=l[3]}},e.createTokenizer=function(){this.tokenizer=tokenizer23(this.input)},e.decl=function(r,a){var o=new Declaration$2;this.init(o,r[0][2]);var l=r[r.length-1];for(l[0]===";"&&(this.semicolon=!0,r.pop()),o.source.end=this.getPosition(l[3]||l[2]||findLastWithPosition(r)),o.source.end.offset++;r[0][0]!=="word";)r.length===1&&this.unknownWord(r),o.raws.before+=r.shift()[1];for(o.source.start=this.getPosition(r[0][2]),o.prop="";r.length;){var c=r[0][0];if(c===":"||c==="space"||c==="comment")break;o.prop+=r.shift()[1]}o.raws.between="";for(var u;r.length;)if(u=r.shift(),u[0]===":"){o.raws.between+=u[1];break}else u[0]==="word"&&/\w/.test(u[1])&&this.unknownWord([u]),o.raws.between+=u[1];(o.prop[0]==="_"||o.prop[0]==="*")&&(o.raws.before+=o.prop[0],o.prop=o.prop.slice(1));for(var f=[],d;r.length&&(d=r[0][0],!(d!=="space"&&d!=="comment"));)f.push(r.shift());this.precheckMissedSemicolon(r);for(var p=r.length-1;p>=0;p--){if(u=r[p],u[1].toLowerCase()==="!important"){o.important=!0;var m=this.stringFrom(r,p);m=this.spacesFromEnd(r)+m,m!==" !important"&&(o.raws.important=m);break}else if(u[1].toLowerCase()==="important"){for(var y=r.slice(0),b="",E=p;E>0;E--){var C=y[E][0];if(b.trim().indexOf("!")===0&&C!=="space")break;b=y.pop()[1]+b}b.trim().indexOf("!")===0&&(o.important=!0,o.raws.important=b,r=y)}if(u[0]!=="space"&&u[0]!=="comment")break}var j=r.some(function(B){return B[0]!=="space"&&B[0]!=="comment"});j&&(o.raws.between+=f.map(function(B){return B[1]}).join(""),f=[]),this.raw(o,"value",f.concat(r),a),o.value.includes(":")&&!a&&this.checkMissedSemicolon(r)},e.doubleColon=function(r){throw this.input.error("Double colon",{offset:r[2]},{offset:r[2]+r[1].length})},e.emptyRule=function(r){var a=new Rule$2;this.init(a,r[2]),a.selector="",a.raws.between="",this.current=a},e.end=function(r){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(r[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(r)},e.endFile=function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())},e.freeSemicolon=function(r){if(this.spaces+=r[1],this.current.nodes){var a=this.current.nodes[this.current.nodes.length-1];a&&a.type==="rule"&&!a.raws.ownSemicolon&&(a.raws.ownSemicolon=this.spaces,this.spaces="")}},e.getPosition=function(r){var a=this.input.fromOffset(r);return{column:a.col,line:a.line,offset:r}},e.init=function(r,a){this.current.push(r),r.source={input:this.input,start:this.getPosition(a)},r.raws.before=this.spaces,this.spaces="",r.type!=="comment"&&(this.semicolon=!1)},e.other=function(r){for(var a=!1,o=null,l=!1,c=null,u=[],f=r[1].startsWith("--"),d=[],p=r;p;){if(o=p[0],d.push(p),o==="("||o==="[")c||(c=p),u.push(o==="("?")":"]");else if(f&&l&&o==="{")c||(c=p),u.push("}");else if(u.length===0)if(o===";")if(l){this.decl(d,f);return}else break;else if(o==="{"){this.rule(d);return}else if(o==="}"){this.tokenizer.back(d.pop()),a=!0;break}else o===":"&&(l=!0);else o===u[u.length-1]&&(u.pop(),u.length===0&&(c=null));p=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(a=!0),u.length>0&&this.unclosedBracket(c),a&&l){if(!f)for(;d.length&&(p=d[d.length-1][0],!(p!=="space"&&p!=="comment"));)this.tokenizer.back(d.pop());this.decl(d,f)}else this.unknownWord(d)},e.parse=function(){for(var r;!this.tokenizer.endOfFile();)switch(r=this.tokenizer.nextToken(),r[0]){case"space":this.spaces+=r[1];break;case";":this.freeSemicolon(r);break;case"}":this.end(r);break;case"comment":this.comment(r);break;case"at-word":this.atrule(r);break;case"{":this.emptyRule(r);break;default:this.other(r);break}this.endFile()},e.precheckMissedSemicolon=function(){},e.raw=function(r,a,o,l){for(var c,u,f=o.length,d="",p=!0,m,y,b=0;b<f;b+=1)c=o[b],u=c[0],u==="space"&&b===f-1&&!l?p=!1:u==="comment"?(y=o[b-1]?o[b-1][0]:"empty",m=o[b+1]?o[b+1][0]:"empty",!SAFE_COMMENT_NEIGHBOR[y]&&!SAFE_COMMENT_NEIGHBOR[m]?d.slice(-1)===","?p=!1:d+=c[1]:p=!1):d+=c[1];if(!p){var E=o.reduce(function(C,j){return C+j[1]},"");r.raws[a]={raw:E,value:d}}r[a]=d},e.rule=function(r){r.pop();var a=new Rule$2;this.init(a,r[0][2]),a.raws.between=this.spacesAndCommentsFromEnd(r),this.raw(a,"selector",r),this.current=a},e.spacesAndCommentsFromEnd=function(r){for(var a,o="";r.length&&(a=r[r.length-1][0],!(a!=="space"&&a!=="comment"));)o=r.pop()[1]+o;return o},e.spacesAndCommentsFromStart=function(r){for(var a,o="";r.length&&(a=r[0][0],!(a!=="space"&&a!=="comment"));)o+=r.shift()[1];return o},e.spacesFromEnd=function(r){for(var a,o="";r.length&&(a=r[r.length-1][0],a==="space");)o=r.pop()[1]+o;return o},e.stringFrom=function(r,a){for(var o="",l=a;l<r.length;l++)o+=r[l][1];return r.splice(a,r.length-a),o},e.unclosedBlock=function(){var r=this.current.source.start;throw this.input.error("Unclosed block",r.line,r.column)},e.unclosedBracket=function(r){throw this.input.error("Unclosed bracket",{offset:r[2]},{offset:r[2]+1})},e.unexpectedClose=function(r){throw this.input.error("Unexpected }",{offset:r[2]},{offset:r[2]+1})},e.unknownWord=function(r){throw this.input.error("Unknown word",{offset:r[0][2]},{offset:r[0][2]+r[0][1].length})},e.unnamedAtrule=function(r,a){throw this.input.error("At-rule without name",{offset:a[2]},{offset:a[2]+a[1].length})},t})(),parser=Parser$1,Container$2=container,Parser2=parser,Input$2=input;function parse$3(t,e){var s=new Input$2(t,e),r=new Parser2(s);try{r.parse()}catch(a){throw a}return r.root}var parse_1=parse$3;parse$3.default=parse$3;Container$2.registerParse(parse$3);var isClean=symbols.isClean,my=symbols.my,MapGenerator$1=mapGenerator,stringify$2=stringify_1,Container$1=container,Document$2=document$1$3,Result$2=result,parse$2=parse_1,Root$3=root,TYPE_TO_CLASS_NAME={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},PLUGIN_PROPS={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},NOT_VISITORS={Once:!0,postcssPlugin:!0,prepare:!0},CHILDREN=0;function isPromise(t){return(typeof t>"u"?"undefined":_type_of(t))==="object"&&typeof t.then=="function"}function getEvents(t){var e=!1,s=TYPE_TO_CLASS_NAME[t.type];return t.type==="decl"?e=t.prop.toLowerCase():t.type==="atrule"&&(e=t.name.toLowerCase()),e&&t.append?[s,s+"-"+e,CHILDREN,s+"Exit",s+"Exit-"+e]:e?[s,s+"-"+e,s+"Exit",s+"Exit-"+e]:t.append?[s,CHILDREN,s+"Exit"]:[s,s+"Exit"]}function toStack(t){var e;return t.type==="document"?e=["Document",CHILDREN,"DocumentExit"]:t.type==="root"?e=["Root",CHILDREN,"RootExit"]:e=getEvents(t),{eventIndex:0,events:e,iterator:0,node:t,visitorIndex:0,visitors:[]}}function cleanMarks(t){return t[isClean]=!1,t.nodes&&t.nodes.forEach(function(e){return cleanMarks(e)}),t}var postcss$2={},LazyResult$2=(function(){function t(s,r,a){var o=this;this.stringified=!1,this.processed=!1;var l;if((typeof r>"u"?"undefined":_type_of(r))==="object"&&r!==null&&(r.type==="root"||r.type==="document"))l=cleanMarks(r);else if(_instanceof(r,t)||_instanceof(r,Result$2))l=cleanMarks(r.root),r.map&&(typeof a.map>"u"&&(a.map={}),a.map.inline||(a.map.inline=!1),a.map.prev=r.map);else{var c=parse$2;a.syntax&&(c=a.syntax.parse),a.parser&&(c=a.parser),c.parse&&(c=c.parse);try{l=c(r,a)}catch(u){this.processed=!0,this.error=u}l&&!l[my]&&Container$1.rebuild(l)}this.result=new Result$2(s,l,a),this.helpers=_extends({},postcss$2,{postcss:postcss$2,result:this.result}),this.plugins=this.processor.plugins.map(function(u){return(typeof u>"u"?"undefined":_type_of(u))==="object"&&u.prepare?_extends({},u,u.prepare(o.result)):u})}var e=t.prototype;return e.async=function(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)},e.catch=function(r){return this.async().catch(r)},e.finally=function(r){return this.async().then(r,r)},e.getAsyncError=function(){throw new Error("Use process(css).then(cb) to work with async plugins")},e.handleError=function(r,a){var o=this.result.lastPlugin;try{if(a&&a.addToError(r),this.error=r,r.name==="CssSyntaxError"&&!r.plugin)r.plugin=o.postcssPlugin,r.setMessage();else if(o.postcssVersion)var l,c,u,f,d}catch(p){console&&console.error&&console.error(p)}return r},e.prepareVisitors=function(){var r=this;this.listeners={};for(var a=function(d,p,m){r.listeners[p]||(r.listeners[p]=[]),r.listeners[p].push([d,m])},o=_create_for_of_iterator_helper_loose(this.plugins),l;!(l=o()).done;){var c=l.value;if((typeof c>"u"?"undefined":_type_of(c))==="object")for(var u in c){if(!PLUGIN_PROPS[u]&&/^[A-Z]/.test(u))throw new Error("Unknown event "+u+" in "+c.postcssPlugin+". Try to update PostCSS ("+this.processor.version+" now).");if(!NOT_VISITORS[u])if(_type_of(c[u])==="object")for(var f in c[u])f==="*"?a(c,u,c[u][f]):a(c,u+"-"+f.toLowerCase(),c[u][f]);else typeof c[u]=="function"&&a(c,u,c[u])}}this.hasListener=Object.keys(this.listeners).length>0},e.runAsync=function(){var r=this;return _async_to_generator(function(){var a,o,l,c,u,f,d,p,m,y,b,E;return _ts_generator(this,function(C){switch(C.label){case 0:r.plugin=0,a=0,C.label=1;case 1:if(!(a<r.plugins.length))return[3,6];if(o=r.plugins[a],l=r.runOnRoot(o),!isPromise(l))return[3,5];C.label=2;case 2:return C.trys.push([2,4,,5]),[4,l];case 3:return C.sent(),[3,5];case 4:throw c=C.sent(),r.handleError(c);case 5:return a++,[3,1];case 6:if(r.prepareVisitors(),!r.hasListener)return[3,18];u=r.result.root,C.label=7;case 7:if(u[isClean])return[3,14];u[isClean]=!0,f=[toStack(u)],C.label=8;case 8:if(!(f.length>0))return[3,13];if(d=r.visitTick(f),!isPromise(d))return[3,12];C.label=9;case 9:return C.trys.push([9,11,,12]),[4,d];case 10:return C.sent(),[3,12];case 11:throw p=C.sent(),m=f[f.length-1].node,r.handleError(p,m);case 12:return[3,8];case 13:return[3,7];case 14:if(!r.listeners.OnceExit)return[3,18];y=function(){var j,B,D,F,q;return _ts_generator(this,function(V){switch(V.label){case 0:j=E.value,B=j[0],D=j[1],r.result.lastPlugin=B,V.label=1;case 1:return V.trys.push([1,6,,7]),u.type!=="document"?[3,3]:(F=u.nodes.map(function(ee){return D(ee,r.helpers)}),[4,Promise.all(F)]);case 2:return V.sent(),[3,5];case 3:return[4,D(u,r.helpers)];case 4:V.sent(),V.label=5;case 5:return[3,7];case 6:throw q=V.sent(),r.handleError(q);case 7:return[2]}})},b=_create_for_of_iterator_helper_loose(r.listeners.OnceExit),C.label=15;case 15:return(E=b()).done?[3,18]:[5,_ts_values(y())];case 16:C.sent(),C.label=17;case 17:return[3,15];case 18:return r.processed=!0,[2,r.stringify()]}})})()},e.runOnRoot=function(r){var a=this;this.result.lastPlugin=r;try{if((typeof r>"u"?"undefined":_type_of(r))==="object"&&r.Once){if(this.result.root.type==="document"){var o=this.result.root.nodes.map(function(l){return r.Once(l,a.helpers)});return isPromise(o[0])?Promise.all(o):o}return r.Once(this.result.root,this.helpers)}else if(typeof r=="function")return r(this.result.root,this.result)}catch(l){throw this.handleError(l)}},e.stringify=function(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();var r=this.result.opts,a=stringify$2;r.syntax&&(a=r.syntax.stringify),r.stringifier&&(a=r.stringifier),a.stringify&&(a=a.stringify);var o=new MapGenerator$1(a,this.result.root,this.result.opts),l=o.generate();return this.result.css=l[0],this.result.map=l[1],this.result},e.sync=function(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(var r=_create_for_of_iterator_helper_loose(this.plugins),a;!(a=r()).done;){var o=a.value,l=this.runOnRoot(o);if(isPromise(l))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){for(var c=this.result.root;!c[isClean];)c[isClean]=!0,this.walkSync(c);if(this.listeners.OnceExit)if(c.type==="document")for(var u=_create_for_of_iterator_helper_loose(c.nodes),f;!(f=u()).done;){var d=f.value;this.visitSync(this.listeners.OnceExit,d)}else this.visitSync(this.listeners.OnceExit,c)}return this.result},e.then=function(r,a){return this.async().then(r,a)},e.toString=function(){return this.css},e.visitSync=function(r,a){for(var o=_create_for_of_iterator_helper_loose(r),l;!(l=o()).done;){var c=l.value,u=c[0],f=c[1];this.result.lastPlugin=u;var d=void 0;try{d=f(a,this.helpers)}catch(p){throw this.handleError(p,a.proxyOf)}if(a.type!=="root"&&a.type!=="document"&&!a.parent)return!0;if(isPromise(d))throw this.getAsyncError()}},e.visitTick=function(r){var a=r[r.length-1],o=a.node,l=a.visitors;if(o.type!=="root"&&o.type!=="document"&&!o.parent){r.pop();return}if(l.length>0&&a.visitorIndex<l.length){var c=l[a.visitorIndex],u=c[0],f=c[1];a.visitorIndex+=1,a.visitorIndex===l.length&&(a.visitors=[],a.visitorIndex=0),this.result.lastPlugin=u;try{return f(o.toProxy(),this.helpers)}catch(b){throw this.handleError(b,o)}}if(a.iterator!==0){for(var d=a.iterator,p;p=o.nodes[o.indexes[d]];)if(o.indexes[d]+=1,!p[isClean]){p[isClean]=!0,r.push(toStack(p));return}a.iterator=0,delete o.indexes[d]}for(var m=a.events;a.eventIndex<m.length;){var y=m[a.eventIndex];if(a.eventIndex+=1,y===CHILDREN){o.nodes&&o.nodes.length&&(o[isClean]=!0,a.iterator=o.getIterator());return}else if(this.listeners[y]){a.visitors=this.listeners[y];return}}r.pop()},e.walkSync=function(r){var a=this;r[isClean]=!0;for(var o=getEvents(r),l=_create_for_of_iterator_helper_loose(o),c;!(c=l()).done;){var u=c.value;if(u===CHILDREN)r.nodes&&r.each(function(d){d[isClean]||a.walkSync(d)});else{var f=this.listeners[u];if(f&&this.visitSync(f,r.toProxy()))return}}},e.warnings=function(){return this.sync().warnings()},_create_class(t,[{key:"content",get:function(){return this.stringify().content}},{key:"css",get:function(){return this.stringify().css}},{key:"map",get:function(){return this.stringify().map}},{key:"messages",get:function(){return this.sync().messages}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){return this.sync().root}},{key:Symbol.toStringTag,get:function(){return"LazyResult"}}]),t})();LazyResult$2.registerPostcss=function(t){postcss$2=t};var lazyResult=LazyResult$2;LazyResult$2.default=LazyResult$2;Root$3.registerLazyResult(LazyResult$2);Document$2.registerLazyResult(LazyResult$2);var MapGenerator2=mapGenerator,stringify$1=stringify_1,parse$1=parse_1,Result$1=result,NoWorkResult$1=(function(){function t(s,r,a){r=r.toString(),this.stringified=!1,this._processor=s,this._css=r,this._opts=a,this._map=void 0;var o,l=stringify$1;this.result=new Result$1(this._processor,o,this._opts),this.result.css=r;var c=this;Object.defineProperty(this.result,"root",{get:function(){return c.root}});var u=new MapGenerator2(l,o,this._opts,r);if(u.isMap()){var f=u.generate(),d=f[0],p=f[1];d&&(this.result.css=d),p&&(this.result.map=p)}else u.clearAnnotation(),this.result.css=u.css}var e=t.prototype;return e.async=function(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)},e.catch=function(r){return this.async().catch(r)},e.finally=function(r){return this.async().then(r,r)},e.sync=function(){if(this.error)throw this.error;return this.result},e.then=function(r,a){return this.async().then(r,a)},e.toString=function(){return this._css},e.warnings=function(){return[]},_create_class(t,[{key:"content",get:function(){return this.result.css}},{key:"css",get:function(){return this.result.css}},{key:"map",get:function(){return this.result.map}},{key:"messages",get:function(){return[]}},{key:"opts",get:function(){return this.result.opts}},{key:"processor",get:function(){return this.result.processor}},{key:"root",get:function(){if(this._root)return this._root;var r,a=parse$1;try{r=a(this._css,this._opts)}catch(o){this.error=o}if(this.error)throw this.error;return this._root=r,r}},{key:Symbol.toStringTag,get:function(){return"NoWorkResult"}}]),t})(),noWorkResult=NoWorkResult$1;NoWorkResult$1.default=NoWorkResult$1;var NoWorkResult2=noWorkResult,LazyResult$1=lazyResult,Document$1=document$1$3,Root$2=root,Processor$1=(function(){function t(s){s===void 0&&(s=[]),this.version="8.4.38",this.plugins=this.normalize(s)}var e=t.prototype;return e.normalize=function(r){for(var a=[],o=_create_for_of_iterator_helper_loose(r),l;!(l=o()).done;){var c=l.value;if(c.postcss===!0?c=c():c.postcss&&(c=c.postcss),(typeof c>"u"?"undefined":_type_of(c))==="object"&&Array.isArray(c.plugins))a=a.concat(c.plugins);else if((typeof c>"u"?"undefined":_type_of(c))==="object"&&c.postcssPlugin)a.push(c);else if(typeof c=="function")a.push(c);else if(!((typeof c>"u"?"undefined":_type_of(c))==="object"&&(c.parse||c.stringify)))throw new Error(c+" is not a PostCSS plugin")}return a},e.process=function(r,a){return a===void 0&&(a={}),!this.plugins.length&&!a.parser&&!a.stringifier&&!a.syntax?new NoWorkResult2(this,r,a):new LazyResult$1(this,r,a)},e.use=function(r){return this.plugins=this.plugins.concat(this.normalize([r])),this},t})(),processor=Processor$1;Processor$1.default=Processor$1;Root$2.registerProcessor(Processor$1);Document$1.registerProcessor(Processor$1);var Declaration$1=declaration,PreviousMap2=previousMap,Comment$1=comment,AtRule$1=atRule,Input$1=input,Root$1=root,Rule$1=rule;function fromJSON$1(t,e){if(Array.isArray(t))return t.map(function(p){return fromJSON$1(p)});var s=t.inputs,r=_object_without_properties_loose(t,["inputs"]);if(s){e=[];for(var a=_create_for_of_iterator_helper_loose(s),o;!(o=a()).done;){var l=o.value,c=_extends({},l,{__proto__:Input$1.prototype});c.map&&(c.map=_extends({},c.map,{__proto__:PreviousMap2.prototype})),e.push(c)}}if(r.nodes&&(r.nodes=t.nodes.map(function(p){return fromJSON$1(p,e)})),r.source){var u=r.source,f=u.inputId,d=_object_without_properties_loose(u,["inputId"]);r.source=d,f!=null&&(r.source.input=e[f])}if(r.type==="root")return new Root$1(r);if(r.type==="decl")return new Declaration$1(r);if(r.type==="rule")return new Rule$1(r);if(r.type==="comment")return new Comment$1(r);if(r.type==="atrule")return new AtRule$1(r);throw new Error("Unknown node type: "+t.type)}var fromJSON_1=fromJSON$1;fromJSON$1.default=fromJSON$1;var CssSyntaxError2=cssSyntaxError,Declaration2=declaration,LazyResult2=lazyResult,Container2=container,Processor2=processor,stringify$5=stringify_1,fromJSON=fromJSON_1,Document2=document$1$3,Warning2=warning,Comment2=comment,AtRule2=atRule,Result2=result,Input2=input,parse=parse_1,list=list_1,Rule2=rule,Root2=root,Node2=node;function postcss(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return e.length===1&&Array.isArray(e[0])&&(e=e[0]),new Processor2(e)}postcss.plugin=function t(e,s){var r=!1;function a(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),define_process_env_default.LANG&&define_process_env_default.LANG.startsWith("cn")&&console.warn(e+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));var f=s.apply(void 0,[].concat(c));return f.postcssPlugin=e,f.postcssVersion=new Processor2().version,f}var o;return Object.defineProperty(a,"postcss",{get:function(){return o||(o=a()),o}}),a.process=function(l,c,u){return postcss([a(u)]).process(l,c)},a};postcss.stringify=stringify$5;postcss.parse=parse;postcss.fromJSON=fromJSON;postcss.list=list;postcss.comment=function(t){return new Comment2(t)};postcss.atRule=function(t){return new AtRule2(t)};postcss.decl=function(t){return new Declaration2(t)};postcss.rule=function(t){return new Rule2(t)};postcss.root=function(t){return new Root2(t)};postcss.document=function(t){return new Document2(t)};postcss.CssSyntaxError=CssSyntaxError2;postcss.Declaration=Declaration2;postcss.Container=Container2;postcss.Processor=Processor2;postcss.Document=Document2;postcss.Comment=Comment2;postcss.Warning=Warning2;postcss.AtRule=AtRule2;postcss.Result=Result2;postcss.Input=Input2;postcss.Rule=Rule2;postcss.Root=Root2;postcss.Node=Node2;LazyResult2.registerPostcss(postcss);var postcss_1=postcss;postcss.default=postcss;var postcss$1=getDefaultExportFromCjs(postcss_1);postcss$1.stringify;postcss$1.fromJSON;postcss$1.plugin;postcss$1.parse;postcss$1.list;postcss$1.document;postcss$1.comment;postcss$1.atRule;postcss$1.rule;postcss$1.decl;postcss$1.root;postcss$1.CssSyntaxError;postcss$1.Declaration;postcss$1.Container;postcss$1.Processor;postcss$1.Document;postcss$1.Comment;postcss$1.Warning;postcss$1.AtRule;postcss$1.Result;postcss$1.Input;postcss$1.Rule;postcss$1.Root;postcss$1.Node;var __defProp=Object.defineProperty,__defNormalProp=function(t,e,s){return e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s},__publicField=function(t,e,s){return __defNormalProp(t,(typeof e>"u"?"undefined":_type_of(e))!=="symbol"?e+"":e,s)};function patch(t,e,s){try{if(!(e in t))return function(){};var r=t[e],a=s(r);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=a,function(){t[e]=r}}catch{return function(){}}}var StackFrame=(function(){function t(s){__publicField(this,"fileName"),__publicField(this,"functionName"),__publicField(this,"lineNumber"),__publicField(this,"columnNumber"),this.fileName=s.fileName||"",this.functionName=s.functionName||"",this.lineNumber=s.lineNumber,this.columnNumber=s.columnNumber}var e=t.prototype;return e.toString=function(){var r=this.lineNumber||"",a=this.columnNumber||"";return this.functionName?this.functionName+" ("+this.fileName+":"+r+":"+a+")":this.fileName+":"+r+":"+a},t})(),FIREFOX_SAFARI_STACK_REGEXP=/(^|@)\S+:\d+/,CHROME_IE_STACK_REGEXP=/^\s*at .*(\S+:\d+|\(native\))/m,SAFARI_NATIVE_CODE_REGEXP=/^(eval@)?(\[native code])?$/,ErrorStackParser={parse:function t(e){return e?typeof e.stacktrace<"u"||typeof e["opera#sourceloc"]<"u"?this.parseOpera(e):e.stack&&e.stack.match(CHROME_IE_STACK_REGEXP)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):(console.warn("[console-record-plugin]: Failed to parse error object:",e),[]):[]},extractLocation:function t(e){if(e.indexOf(":")===-1)return[e];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/,r=s.exec(e.replace(/[()]/g,""));if(!r)throw new Error("Cannot parse given url: "+e);return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function t(e){var s=e.stack.split(`
`).filter(function(r){return!!r.match(CHROME_IE_STACK_REGEXP)},this);return s.map(function(r){r.indexOf("(eval ")>-1&&(r=r.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var a=r.replace(/^\s+/,"").replace(/\(eval code/g,"("),o=a.match(/ (\((.+):(\d+):(\d+)\)$)/);a=o?a.replace(o[0],""):a;var l=a.split(/\s+/).slice(1),c=this.extractLocation(o?o[1]:l.pop()),u=l.join(" ")||void 0,f=["eval","<anonymous>"].indexOf(c[0])>-1?void 0:c[0];return new StackFrame({functionName:u,fileName:f,lineNumber:c[1],columnNumber:c[2]})},this)},parseFFOrSafari:function t(e){var s=e.stack.split(`
`).filter(function(r){return!r.match(SAFARI_NATIVE_CODE_REGEXP)},this);return s.map(function(r){if(r.indexOf(" > eval")>-1&&(r=r.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),r.indexOf("@")===-1&&r.indexOf(":")===-1)return new StackFrame({functionName:r});var a=/((.*".+"[^@]*)?[^@]*)(?:@)/,o=r.match(a),l=o&&o[1]?o[1]:void 0,c=this.extractLocation(r.replace(a,""));return new StackFrame({functionName:l,fileName:c[0],lineNumber:c[1],columnNumber:c[2]})},this)},parseOpera:function t(e){return!e.stacktrace||e.message.indexOf(`
`)>-1&&e.message.split(`
`).length>e.stacktrace.split(`
`).length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function t(e){for(var s=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split(`
`),a=[],o=2,l=r.length;o<l;o+=2){var c=s.exec(r[o]);c&&a.push(new StackFrame({fileName:c[2],lineNumber:parseFloat(c[1])}))}return a},parseOpera10:function t(e){for(var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split(`
`),a=[],o=0,l=r.length;o<l;o+=2){var c=s.exec(r[o]);c&&a.push(new StackFrame({functionName:c[3]||void 0,fileName:c[2],lineNumber:parseFloat(c[1])}))}return a},parseOpera11:function t(e){var s=e.stack.split(`
`).filter(function(r){return!!r.match(FIREFOX_SAFARI_STACK_REGEXP)&&!r.match(/^Error created at/)},this);return s.map(function(r){var a=r.split("@"),o=this.extractLocation(a.pop()),l=a.shift()||"",c=l.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new StackFrame({functionName:c,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})},this)}};function pathToSelector(t){if(!t||!t.outerHTML)return"";for(var e="";t.parentElement;){var s=t.localName;if(!s)break;s=s.toLowerCase();var r=t.parentElement,a=[];if(r.children&&r.children.length>0)for(var o=0;o<r.children.length;o++){var l=r.children[o];l.localName&&l.localName.toLowerCase&&l.localName.toLowerCase()===s&&a.push(l)}a.length>1&&(s+=":eq("+a.indexOf(t)+")"),e=s+(e?">"+e:""),t=r}return e}function isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}function isObjTooDeep(t,e){if(e===0)return!0;for(var s=Object.keys(t),r=_create_for_of_iterator_helper_loose(s),a;!(a=r()).done;){var o=a.value;if(isObject(t[o])&&isObjTooDeep(t[o],e-1))return!0}return!1}function stringify(t,e){var s={numOfKeysLimit:50,depthOfLimit:4};Object.assign(s,e);var r=[],a=[];return JSON.stringify(t,function(c,u){if(r.length>0){var f=r.indexOf(this);~f?r.splice(f+1):r.push(this),~f?a.splice(f,1/0,c):a.push(c),~r.indexOf(u)&&(r[0]===u?u="[Circular ~]":u="[Circular ~."+a.slice(0,r.indexOf(u)).join(".")+"]")}else r.push(u);if(u===null)return u;if(u===void 0)return"undefined";if(o(u))return l(u);if((typeof u>"u"?"undefined":_type_of(u))==="bigint")return u.toString()+"n";if(_instanceof(u,Event)){var d={};for(var p in u){var m=u[p];Array.isArray(m)?d[p]=pathToSelector(m.length?m[0]:null):d[p]=m}return d}else{if(_instanceof(u,Node))return _instanceof(u,HTMLElement)?u?u.outerHTML:"":u.nodeName;if(_instanceof(u,Error))return u.stack?u.stack+`
End of stack for Error object`:u.name+": "+u.message}return u});function o(c){return!!(isObject(c)&&Object.keys(c).length>s.numOfKeysLimit||typeof c=="function"||isObject(c)&&isObjTooDeep(c,s.depthOfLimit))}function l(c){var u=c.toString();return s.stringLengthLimit&&u.length>s.stringLengthLimit&&(u=""+u.slice(0,s.stringLengthLimit)+"..."),u}}var defaultLogOptions={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function initLogObserver(t,e,s){var r=s?Object.assign({},defaultLogOptions,s):defaultLogOptions,a=r.logger;if(!a)return function(){};var o;typeof a=="string"?o=e[a]:o=a;var l=0,c=!1,u=[];if(r.level.includes("error")){var f=function(E){var C=E.message,j=E.error,B=ErrorStackParser.parse(j).map(function(F){return F.toString()}),D=[stringify(C,r.stringifyOptions)];t({level:"error",trace:B,payload:D})};e.addEventListener("error",f),u.push(function(){e.removeEventListener("error",f)});var d=function(E){var C,j;_instanceof(E.reason,Error)?(C=E.reason,j=[stringify("Uncaught (in promise) "+C.name+": "+C.message,r.stringifyOptions)]):(C=new Error,j=[stringify("Uncaught (in promise)",r.stringifyOptions),stringify(E.reason,r.stringifyOptions)]);var B=ErrorStackParser.parse(C).map(function(D){return D.toString()});t({level:"error",trace:B,payload:j})};e.addEventListener("unhandledrejection",d),u.push(function(){e.removeEventListener("unhandledrejection",d)})}for(var p=_create_for_of_iterator_helper_loose(r.level),m;!(m=p()).done;){var y=m.value;u.push(b(o,y))}return function(){u.forEach(function(E){return E()})};function b(E,C){var j=this;return E[C]?patch(E,C,function(B){var D=j;return function(){for(var F=arguments.length,q=new Array(F),V=0;V<F;V++)q[V]=arguments[V];if(B.apply(D,q),!(C==="assert"&&q[0])&&!c){c=!0;try{var ee=ErrorStackParser.parse(new Error).map(function(Z){return Z.toString()}).splice(1),Q=C==="assert"?q.slice(1):q,W=Q.map(function(Z){return stringify(Z,r.stringifyOptions)});l++,l<r.lengthThreshold?t({level:C,trace:ee,payload:W}):l===r.lengthThreshold&&t({level:"warn",trace:[],payload:[stringify("The number of log records reached the threshold.")]})}catch(Z){B.apply(void 0,[].concat(["rrweb logger error:",Z],q))}finally{c=!1}}}}):function(){}}}var PLUGIN_NAME="rrweb/console@1",getRecordConsolePlugin=function(t){return{name:PLUGIN_NAME,observer:initLogObserver,options:t}},setImmediate$1=win.setImmediate,builtInProp,cycle,schedulingQueue,ToString=Object.prototype.toString,timer=typeof setImmediate$1<"u"?function t(e){return setImmediate$1(e)}:setTimeout;try{Object.defineProperty({},"x",{}),builtInProp=function(e,s,r,a){return Object.defineProperty(e,s,{value:r,writable:!0,configurable:a!==!1})}}catch(t){builtInProp=function(s,r,a){return s[r]=a,s}}schedulingQueue=(function t(){var e,s,r;function a(o,l){this.fn=o,this.self=l,this.next=void 0}return{add:function(l,c){r=new a(l,c),s?s.next=r:e=r,s=r,r=void 0},drain:function(){var l=e;for(e=s=cycle=void 0;l;)l.fn.call(l.self),l=l.next}}})();function schedule(t,e){schedulingQueue.add(t,e),cycle||(cycle=timer(schedulingQueue.drain))}function isThenable(t){var e,s=typeof t;return t!==null&&(s==="object"||s==="function")&&(e=t.then),typeof e=="function"?e:!1}function notify(){for(var t=0;t<this.chain.length;t++)notifyIsolated(this,this.state===1?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function notifyIsolated(t,e,s){var r,a;try{e===!1?s.reject(t.msg):(e===!0?r=t.msg:r=e.call(void 0,t.msg),r===s.promise?s.reject(TypeError("Promise-chain cycle")):(a=isThenable(r))?a.call(r,s.resolve,s.reject):s.resolve(r))}catch(o){s.reject(o)}}function resolve(t){var e,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(e=isThenable(t))?schedule(function(){var r=new MakeDefWrapper(s);try{e.call(t,function(){resolve.apply(r,arguments)},function(){reject.apply(r,arguments)})}catch(a){reject.call(r,a)}}):(s.msg=t,s.state=1,s.chain.length>0&&schedule(notify,s))}catch(r){reject.call(new MakeDefWrapper(s),r)}}}function reject(t){var e=this;e.triggered||(e.triggered=!0,e.def&&(e=e.def),e.msg=t,e.state=2,e.chain.length>0&&schedule(notify,e))}function iteratePromises(t,e,s,r){for(var a=0;a<e.length;a++)(function(l){t.resolve(e[l]).then(function(u){s(l,u)},r)})(a)}function MakeDefWrapper(t){this.def=t,this.triggered=!1}function MakeDef(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function NpoPromise(t){if(typeof t!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var e=new MakeDef(this);this.then=function(r,a){var o={success:typeof r=="function"?r:!0,failure:typeof a=="function"?a:!1};return o.promise=new this.constructor(function(c,u){if(typeof c!="function"||typeof u!="function")throw TypeError("Not a function");o.resolve=c,o.reject=u}),e.chain.push(o),e.state!==0&&schedule(notify,e),o.promise},this.catch=function(r){return this.then(void 0,r)};try{t.call(void 0,function(r){resolve.call(e,r)},function(r){reject.call(e,r)})}catch(s){reject.call(e,s)}}var PromisePrototype=builtInProp({},"constructor",NpoPromise,!1);NpoPromise.prototype=PromisePrototype;builtInProp(PromisePrototype,"__NPO__",0,!1);builtInProp(NpoPromise,"resolve",function t(e){var s=this;return e&&typeof e=="object"&&e.__NPO__===1?e:new s(function(a,o){if(typeof a!="function"||typeof o!="function")throw TypeError("Not a function");a(e)})});builtInProp(NpoPromise,"reject",function t(e){return new this(function(r,a){if(typeof r!="function"||typeof a!="function")throw TypeError("Not a function");a(e)})});builtInProp(NpoPromise,"all",function t(e){var s=this;return ToString.call(e)!=="[object Array]"?s.reject(TypeError("Not an array")):e.length===0?s.resolve([]):new s(function(a,o){if(typeof a!="function"||typeof o!="function")throw TypeError("Not a function");var l=e.length,c=Array(l),u=0;iteratePromises(s,e,function(d,p){c[d]=p,++u===l&&a(c)},o)})});builtInProp(NpoPromise,"race",function t(e){var s=this;return ToString.call(e)!=="[object Array]"?s.reject(TypeError("Not an array")):new s(function(a,o){if(typeof a!="function"||typeof o!="function")throw TypeError("Not a function");iteratePromises(s,e,function(c,u){a(u)},o)})});var PromisePolyfill;typeof Promise<"u"&&Promise.toString().indexOf("[native code]")!==-1?PromisePolyfill=Promise:PromisePolyfill=NpoPromise;var Config={DEBUG:!1,LIB_VERSION:"2.74.0"},MAX_RECORDING_MS=1440*60*1e3,MAX_VALUE_FOR_MIN_RECORDING_MS=8*1e3,ArrayProto=Array.prototype,FuncProto=Function.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,windowConsole=win.console,navigator$1=win.navigator,document$1=win.document,windowOpera=win.opera,screen=win.screen,userAgent=navigator$1.userAgent,nativeBind=FuncProto.bind,nativeForEach=ArrayProto.forEach,nativeIndexOf=ArrayProto.indexOf,nativeMap=ArrayProto.map,nativeIsArray=Array.isArray,breaker={},_={trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},console$1={log:function(){if(Config.DEBUG&&!_.isUndefined(windowConsole)&&windowConsole)try{windowConsole.log.apply(windowConsole,arguments)}catch{_.each(arguments,function(e){windowConsole.log(e)})}},warn:function(){if(Config.DEBUG&&!_.isUndefined(windowConsole)&&windowConsole){var t=["Mixpanel warning:"].concat(_.toArray(arguments));try{windowConsole.warn.apply(windowConsole,t)}catch{_.each(t,function(s){windowConsole.warn(s)})}}},error:function(){if(Config.DEBUG&&!_.isUndefined(windowConsole)&&windowConsole){var t=["Mixpanel error:"].concat(_.toArray(arguments));try{windowConsole.error.apply(windowConsole,t)}catch{_.each(t,function(s){windowConsole.error(s)})}}},critical:function(){if(!_.isUndefined(windowConsole)&&windowConsole){var t=["Mixpanel error:"].concat(_.toArray(arguments));try{windowConsole.error.apply(windowConsole,t)}catch{_.each(t,function(s){windowConsole.error(s)})}}}},log_func_with_prefix=function(t,e){return function(){return arguments[0]="["+e+"] "+arguments[0],t.apply(console$1,arguments)}},console_with_prefix=function(t){return{log:log_func_with_prefix(console$1.log,t),error:log_func_with_prefix(console$1.error,t),critical:log_func_with_prefix(console$1.critical,t)}},safewrap=function(t){return function(){try{return t.apply(this,arguments)}catch(e){console$1.critical("Implementation error. Please turn on debug and contact support@mixpanel.com."),Config.DEBUG&&console$1.critical(e)}}},safewrapClass=function(t){var e=t.prototype;for(var s in e)typeof e[s]=="function"&&(e[s]=safewrap(e[s]))};_.bind=function(t,e){var s,r;if(nativeBind&&t.bind===nativeBind)return nativeBind.apply(t,slice.call(arguments,1));if(!_.isFunction(t))throw new TypeError;return s=slice.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,s.concat(slice.call(arguments)));var a={};a.prototype=t.prototype;var o=new a;a.prototype=null;var l=t.apply(o,s.concat(slice.call(arguments)));return Object(l)===l?l:o},r};_.each=function(t,e,s){if(t!=null){if(nativeForEach&&t.forEach===nativeForEach)t.forEach(e,s);else if(t.length===+t.length){for(var r=0,a=t.length;r<a;r++)if(r in t&&e.call(s,t[r],r,t)===breaker)return}else for(var o in t)if(hasOwnProperty.call(t,o)&&e.call(s,t[o],o,t)===breaker)return}};_.extend=function(t){return _.each(slice.call(arguments,1),function(e){for(var s in e)e[s]!==void 0&&(t[s]=e[s])}),t};_.isArray=nativeIsArray||function(t){return toString.call(t)==="[object Array]"};_.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch{return!1}};_.isArguments=function(t){return!!(t&&hasOwnProperty.call(t,"callee"))};_.toArray=function(t){return t?t.toArray?t.toArray():_.isArray(t)||_.isArguments(t)?slice.call(t):_.values(t):[]};_.map=function(t,e,s){if(nativeMap&&t.map===nativeMap)return t.map(e,s);var r=[];return _.each(t,function(a){r.push(e.call(s,a))}),r};_.keys=function(t){var e=[];return t===null||_.each(t,function(s,r){e[e.length]=r}),e};_.values=function(t){var e=[];return t===null||_.each(t,function(s){e[e.length]=s}),e};_.include=function(t,e){var s=!1;return t===null?s:nativeIndexOf&&t.indexOf===nativeIndexOf?t.indexOf(e)!=-1:(_.each(t,function(r){if(s||(s=r===e))return breaker}),s)};_.includes=function(t,e){return t.indexOf(e)!==-1};_.inherit=function(t,e){return t.prototype=new e,t.prototype.constructor=t,t.superclass=e.prototype,t};_.isObject=function(t){return t===Object(t)&&!_.isArray(t)};_.isEmptyObject=function(t){if(_.isObject(t)){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0}return!1};_.isUndefined=function(t){return t===void 0};_.isString=function(t){return toString.call(t)=="[object String]"};_.isDate=function(t){return toString.call(t)=="[object Date]"};_.isNumber=function(t){return toString.call(t)=="[object Number]"};_.isElement=function(t){return!!(t&&t.nodeType===1)};_.encodeDates=function(t){return _.each(t,function(e,s){_.isDate(e)?t[s]=_.formatDate(e):_.isObject(e)&&(t[s]=_.encodeDates(e))}),t};_.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()};_.formatDate=function(t){function e(s){return s<10?"0"+s:s}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())};_.strip_empty_properties=function(t){var e={};return _.each(t,function(s,r){_.isString(s)&&s.length>0&&(e[r]=s)}),e};_.truncate=function(t,e){var s;return typeof t=="string"?s=t.slice(0,e):_.isArray(t)?(s=[],_.each(t,function(r){s.push(_.truncate(r,e))})):_.isObject(t)?(s={},_.each(t,function(r,a){s[a]=_.truncate(r,e)})):s=t,s};_.JSONEncode=(function(){return function(t){var e=t,s=function(a){var o=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return o.lastIndex=0,o.test(a)?'"'+a.replace(o,function(c){var u=l[c];return typeof u=="string"?u:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'},r=function(a,o){var l="",c="    ",u=0,f="",d="",p=0,m=l,y=[],b=o[a];switch(b&&typeof b=="object"&&typeof b.toJSON=="function"&&(b=b.toJSON(a)),typeof b){case"string":return s(b);case"number":return isFinite(b)?String(b):"null";case"boolean":case"null":return String(b);case"object":if(!b)return"null";if(l+=c,y=[],toString.apply(b)==="[object Array]"){for(p=b.length,u=0;u<p;u+=1)y[u]=r(u,b)||"null";return d=y.length===0?"[]":l?`[
`+l+y.join(`,
`+l)+`
`+m+"]":"["+y.join(",")+"]",l=m,d}for(f in b)hasOwnProperty.call(b,f)&&(d=r(f,b),d&&y.push(s(f)+(l?": ":":")+d));return d=y.length===0?"{}":l?"{"+y.join(",")+m+"}":"{"+y.join(",")+"}",l=m,d}};return r("",{"":e})}})();_.JSONDecode=(function(){var t,e,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},r,a=function(y){var b=new SyntaxError(y);throw b.at=t,b.text=r,b},o=function(y){return y&&y!==e&&a("Expected '"+y+"' instead of '"+e+"'"),e=r.charAt(t),t+=1,e},l=function(){var y,b="";for(e==="-"&&(b="-",o("-"));e>="0"&&e<="9";)b+=e,o();if(e===".")for(b+=".";o()&&e>="0"&&e<="9";)b+=e;if(e==="e"||e==="E")for(b+=e,o(),(e==="-"||e==="+")&&(b+=e,o());e>="0"&&e<="9";)b+=e,o();if(y=+b,!isFinite(y))a("Bad number");else return y},c=function(){var y,b,E="",C;if(e==='"')for(;o();){if(e==='"')return o(),E;if(e==="\\")if(o(),e==="u"){for(C=0,b=0;b<4&&(y=parseInt(o(),16),!!isFinite(y));b+=1)C=C*16+y;E+=String.fromCharCode(C)}else if(typeof s[e]=="string")E+=s[e];else break;else E+=e}a("Bad string")},u=function(){for(;e&&e<=" ";)o()},f=function(){switch(e){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}a('Unexpected "'+e+'"')},d,p=function(){var y=[];if(e==="["){if(o("["),u(),e==="]")return o("]"),y;for(;e;){if(y.push(d()),u(),e==="]")return o("]"),y;o(","),u()}}a("Bad array")},m=function(){var y,b={};if(e==="{"){if(o("{"),u(),e==="}")return o("}"),b;for(;e;){if(y=c(),u(),o(":"),Object.hasOwnProperty.call(b,y)&&a('Duplicate key "'+y+'"'),b[y]=d(),u(),e==="}")return o("}"),b;o(","),u()}}a("Bad object")};return d=function(){switch(u(),e){case"{":return m();case"[":return p();case'"':return c();case"-":return l();default:return e>="0"&&e<="9"?l():f()}},function(y){var b;return r=y,t=0,e=" ",b=d(),u(),e&&a("Syntax error"),b}})();_.base64Encode=function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s,r,a,o,l,c,u,f,d=0,p=0,m="",y=[];if(!t)return t;t=_.utf8Encode(t);do s=t.charCodeAt(d++),r=t.charCodeAt(d++),a=t.charCodeAt(d++),f=s<<16|r<<8|a,o=f>>18&63,l=f>>12&63,c=f>>6&63,u=f&63,y[p++]=e.charAt(o)+e.charAt(l)+e.charAt(c)+e.charAt(u);while(d<t.length);switch(m=y.join(""),t.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"=";break}return m};_.utf8Encode=function(t){t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var e="",s,r,a=0,o;for(s=r=0,a=t.length,o=0;o<a;o++){var l=t.charCodeAt(o),c=null;l<128?r++:l>127&&l<2048?c=String.fromCharCode(l>>6|192,l&63|128):c=String.fromCharCode(l>>12|224,l>>6&63|128,l&63|128),c!==null&&(r>s&&(e+=t.substring(s,r)),e+=c,s=r=o+1)}return r>s&&(e+=t.substring(s,t.length)),e};_.UUID=function(){try{return win.crypto.randomUUID()}catch{for(var t=new Array(36),e=0;e<36;e++)t[e]=Math.floor(Math.random()*16);return t[14]=4,t[19]=t[19]&=-5,t[19]=t[19]|=8,t[8]=t[13]=t[18]=t[23]="-",_.map(t,function(r){return r.toString(16)}).join("")}};var BLOCKED_UA_STRS=["ahrefsbot","ahrefssiteaudit","amazonbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandex","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];_.isBlockedUA=function(t){var e;for(t=t.toLowerCase(),e=0;e<BLOCKED_UA_STRS.length;e++)if(t.indexOf(BLOCKED_UA_STRS[e])!==-1)return!0;return!1};_.HTTPBuildQuery=function(t,e){var s,r,a=[];return _.isUndefined(e)&&(e="&"),_.each(t,function(o,l){s=encodeURIComponent(o.toString()),r=encodeURIComponent(l),a[a.length]=r+"="+s}),a.join(e)};_.getQueryParam=function(t,e){e=e.replace(/[[]/g,"\\[").replace(/[\]]/g,"\\]");var s="[\\?&]"+e+"=([^&#]*)",r=new RegExp(s),a=r.exec(t);if(a===null||a&&typeof a[1]!="string"&&a[1].length)return"";var o=a[1];try{o=decodeURIComponent(o)}catch{console$1.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")};_.cookie={get:function(t){for(var e=t+"=",s=document$1.cookie.split(";"),r=0;r<s.length;r++){for(var a=s[r];a.charAt(0)==" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return decodeURIComponent(a.substring(e.length,a.length))}return null},parse:function(t){var e;try{e=_.JSONDecode(_.cookie.get(t))||{}}catch{}return e},set_seconds:function(t,e,s,r,a,o,l){var c="",u="",f="";if(l)c="; domain="+l;else if(r){var d=extract_domain(document$1.location.hostname);c=d?"; domain=."+d:""}if(s){var p=new Date;p.setTime(p.getTime()+s*1e3),u="; expires="+p.toGMTString()}o&&(a=!0,f="; SameSite=None"),a&&(f+="; secure"),document$1.cookie=t+"="+encodeURIComponent(e)+u+"; path=/"+c+f},set:function(t,e,s,r,a,o,l){var c="",u="",f="";if(l)c="; domain="+l;else if(r){var d=extract_domain(document$1.location.hostname);c=d?"; domain=."+d:""}if(s){var p=new Date;p.setTime(p.getTime()+s*24*60*60*1e3),u="; expires="+p.toGMTString()}o&&(a=!0,f="; SameSite=None"),a&&(f+="; secure");var m=t+"="+encodeURIComponent(e)+u+"; path=/"+c+f;return document$1.cookie=m,m},remove:function(t,e,s){_.cookie.set(t,"",-1,e,!1,!1,s)}};var _testStorageSupported=function(t){var e=!0;try{var s="__mplss_"+cheap_guid(8),r="xyz";t.setItem(s,r),t.getItem(s)!==r&&(e=!1),t.removeItem(s)}catch{e=!1}return e},_localStorageSupported=null,localStorageSupported=function(t,e){return _localStorageSupported!==null&&!e?_localStorageSupported:_localStorageSupported=_testStorageSupported(t||win.localStorage)},_sessionStorageSupported=null,sessionStorageSupported=function(t,e){return _sessionStorageSupported!==null&&!e?_sessionStorageSupported:_sessionStorageSupported=_testStorageSupported(t||win.sessionStorage)};function _storageWrapper(t,e,s){var r=function(a){console$1.error(e+" error: "+a)};return{is_supported:function(a){var o=s(t,a);return o||console$1.error(e+" unsupported"),o},error:r,get:function(a){try{return t.getItem(a)}catch(o){r(o)}return null},parse:function(a){try{return _.JSONDecode(t.getItem(a))||{}}catch{}return null},set:function(a,o){try{t.setItem(a,o)}catch(l){r(l)}},remove:function(a){try{t.removeItem(a)}catch(o){r(o)}}}}var windowLocalStorage=null,windowSessionStorage=null;try{windowLocalStorage=win.localStorage,windowSessionStorage=win.sessionStorage}catch(t){}_.localStorage=_storageWrapper(windowLocalStorage,"localStorage",localStorageSupported);_.sessionStorage=_storageWrapper(windowSessionStorage,"sessionStorage",sessionStorageSupported);_.register_event=(function(){var t=function(r,a,o,l,c){if(!r){console$1.error("No valid element provided to register_event");return}if(r.addEventListener&&!l)r.addEventListener(a,o,!!c);else{var u="on"+a,f=r[u];r[u]=e(r,o,f)}};function e(r,a,o){var l=function(c){if(c=c||s(win.event),!!c){var u=!0,f,d;return _.isFunction(o)&&(f=o(c)),d=a.call(r,c),(f===!1||d===!1)&&(u=!1),u}};return l}function s(r){return r&&(r.preventDefault=s.preventDefault,r.stopPropagation=s.stopPropagation),r}return s.preventDefault=function(){this.returnValue=!1},s.stopPropagation=function(){this.cancelBubble=!0},t})();var TOKEN_MATCH_REGEX=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');_.dom_query=(function(){function t(a){return a.all?a.all:a.getElementsByTagName("*")}var e=/[\t\r\n]/g;function s(a,o){var l=" "+o+" ";return(" "+a.className+" ").replace(e," ").indexOf(l)>=0}function r(a){if(!document$1.getElementsByTagName)return[];var o=a.split(" "),l,c,u,f,d,p,m,y,b,E,C=[document$1];for(p=0;p<o.length;p++){if(l=o[p].replace(/^\s+/,"").replace(/\s+$/,""),l.indexOf("#")>-1){c=l.split("#"),u=c[0];var j=c[1],B=document$1.getElementById(j);if(!B||u&&B.nodeName.toLowerCase()!=u)return[];C=[B];continue}if(l.indexOf(".")>-1){c=l.split("."),u=c[0];var D=c[1];for(u||(u="*"),f=[],d=0,m=0;m<C.length;m++)for(u=="*"?b=t(C[m]):b=C[m].getElementsByTagName(u),y=0;y<b.length;y++)f[d++]=b[y];for(C=[],E=0,m=0;m<f.length;m++)f[m].className&&_.isString(f[m].className)&&s(f[m],D)&&(C[E++]=f[m]);continue}var F=l.match(TOKEN_MATCH_REGEX);if(F){u=F[1];var q=F[2],V=F[3],ee=F[4];for(u||(u="*"),f=[],d=0,m=0;m<C.length;m++)for(u=="*"?b=t(C[m]):b=C[m].getElementsByTagName(u),y=0;y<b.length;y++)f[d++]=b[y];C=[],E=0;var Q;switch(V){case"=":Q=function(W){return W.getAttribute(q)==ee};break;case"~":Q=function(W){return W.getAttribute(q).match(new RegExp("\\b"+ee+"\\b"))};break;case"|":Q=function(W){return W.getAttribute(q).match(new RegExp("^"+ee+"-?"))};break;case"^":Q=function(W){return W.getAttribute(q).indexOf(ee)===0};break;case"$":Q=function(W){return W.getAttribute(q).lastIndexOf(ee)==W.getAttribute(q).length-ee.length};break;case"*":Q=function(W){return W.getAttribute(q).indexOf(ee)>-1};break;default:Q=function(W){return W.getAttribute(q)}}for(C=[],E=0,m=0;m<f.length;m++)Q(f[m])&&(C[E++]=f[m]);continue}for(u=l,f=[],d=0,m=0;m<C.length;m++)for(b=C[m].getElementsByTagName(u),y=0;y<b.length;y++)f[d++]=b[y];C=f}return C}return function(a){return _.isElement(a)?[a]:_.isObject(a)&&!_.isUndefined(a.length)?a:r.call(this,a)}})();var CAMPAIGN_KEYWORDS=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_id","utm_source_platform","utm_campaign_id","utm_creative_format","utm_marketing_tactic"],CLICK_IDS=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","sccid","ttclid","twclid","wbraid"];_.info={campaignParams:function(t){var e="",s={};return _.each(CAMPAIGN_KEYWORDS,function(r){e=_.getQueryParam(document$1.URL,r),e.length?s[r]=e:t!==void 0&&(s[r]=t)}),s},clickParams:function(){var t="",e={};return _.each(CLICK_IDS,function(s){t=_.getQueryParam(document$1.URL,s),t.length&&(e[s]=t)}),e},marketingParams:function(){return _.extend(_.info.campaignParams(),_.info.clickParams())},searchEngine:function(t){return t.search("https?://(.*)google.([^/?]*)")===0?"google":t.search("https?://(.*)bing.com")===0?"bing":t.search("https?://(.*)yahoo.com")===0?"yahoo":t.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(t){var e=_.info.searchEngine(t),s=e!="yahoo"?"q":"p",r={};if(e!==null){r.$search_engine=e;var a=_.getQueryParam(t,s);a.length&&(r.mp_keyword=a)}return r},browser:function(t,e,s){return e=e||"",s||_.includes(t," OPR/")?_.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":_.includes(t,"IEMobile")||_.includes(t,"WPDesktop")?"Internet Explorer Mobile":_.includes(t,"SamsungBrowser/")?"Samsung Internet":_.includes(t,"Edge")||_.includes(t,"Edg/")?"Microsoft Edge":_.includes(t,"FBIOS")?"Facebook Mobile":_.includes(t,"Whale/")?"Whale Browser":_.includes(t,"Chrome")?"Chrome":_.includes(t,"CriOS")?"Chrome iOS":_.includes(t,"UCWEB")||_.includes(t,"UCBrowser")?"UC Browser":_.includes(t,"FxiOS")?"Firefox iOS":_.includes(e,"Apple")?_.includes(t,"Mobile")?"Mobile Safari":"Safari":_.includes(t,"Android")?"Android Mobile":_.includes(t,"Konqueror")?"Konqueror":_.includes(t,"Firefox")?"Firefox":_.includes(t,"MSIE")||_.includes(t,"Trident/")?"Internet Explorer":_.includes(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,s){var r=_.info.browser(t,e,s),a={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/,"Whale Browser":/Whale\/(\d+(\.\d+)?)/},o=a[r];if(o===void 0)return null;var l=t.match(o);return l?parseFloat(l[l.length-2]):null},os:function(){var t=userAgent;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":""},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)?"Android":""},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},currentUrl:function(){return win.location.href},properties:function(t){return typeof t!="object"&&(t={}),_.extend(_.strip_empty_properties({$os:_.info.os(),$browser:_.info.browser(userAgent,navigator$1.vendor,windowOpera),$referrer:document$1.referrer,$referring_domain:_.info.referringDomain(document$1.referrer),$device:_.info.device(userAgent)}),{$current_url:_.info.currentUrl(),$browser_version:_.info.browserVersion(userAgent,navigator$1.vendor,windowOpera),$screen_height:screen.height,$screen_width:screen.width,mp_lib:"web",$lib_version:Config.LIB_VERSION,$insert_id:cheap_guid(),time:_.timestamp()/1e3},_.strip_empty_properties(t))},people_properties:function(){return _.extend(_.strip_empty_properties({$os:_.info.os(),$browser:_.info.browser(userAgent,navigator$1.vendor,windowOpera)}),{$browser_version:_.info.browserVersion(userAgent,navigator$1.vendor,windowOpera)})},mpPageViewProperties:function(){return _.strip_empty_properties({current_page_title:document$1.title,current_domain:win.location.hostname,current_url_path:win.location.pathname,current_url_protocol:win.location.protocol,current_url_search:win.location.search})}};var batchedThrottle=function(t,e){var s=null,r=[];return function(a){var o=this;return r.push(a),s||(s=new PromisePolyfill(function(l){setTimeout(function(){var c=t.apply(o,[r]);s=null,r=[],l(c)},e)})),s}},cheap_guid=function(t){var e=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return t?e.substring(0,t):e},generateTraceparent=function(){var t=_.UUID().replace(/-/g,""),e=_.UUID().replace(/-/g,"").substring(0,16),s="01";return"00-"+t+"-"+e+"-"+s},SIMPLE_DOMAIN_MATCH_REGEX=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,DOMAIN_MATCH_REGEX=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,extract_domain=function(t){var e=DOMAIN_MATCH_REGEX,s=t.split("."),r=s[s.length-1];(r.length>4||r==="com"||r==="org")&&(e=SIMPLE_DOMAIN_MATCH_REGEX);var a=t.match(e);return a?a[0]:""},isOnline=function(){var t=win.navigator.onLine;return _.isUndefined(t)||t},NOOP_FUNC=function(){},JSONStringify=null,JSONParse=null;typeof JSON<"u"&&(JSONStringify=JSON.stringify,JSONParse=JSON.parse);JSONStringify=JSONStringify||_.JSONEncode;JSONParse=JSONParse||_.JSONDecode;var canUseCompressionStream=function(t,e,s){if(!win.CompressionStream)return!1;var r=_.info.browser(t,e,s),a=_.info.browserVersion(t,e,s);return!((r==="Safari"||r==="Mobile Safari")&&a>=16.4&&a<16.6)};_.info=_.info;_.info.browser=_.info.browser;_.info.browserVersion=_.info.browserVersion;_.info.device=_.info.device;_.info.properties=_.info.properties;_.isBlockedUA=_.isBlockedUA;_.isEmptyObject=_.isEmptyObject;_.isObject=_.isObject;_.JSONDecode=_.JSONDecode;_.JSONEncode=_.JSONEncode;_.toArray=_.toArray;_.NPO=NpoPromise;var MIXPANEL_DB_NAME="mixpanelBrowserDb",RECORDING_EVENTS_STORE_NAME="mixpanelRecordingEvents",RECORDING_REGISTRY_STORE_NAME="mixpanelRecordingRegistry",DB_VERSION=1,OBJECT_STORES=[RECORDING_EVENTS_STORE_NAME,RECORDING_REGISTRY_STORE_NAME],IDBStorageWrapper=function(t){this.dbPromise=null,this.storeName=t};IDBStorageWrapper.prototype._openDb=function(){return new PromisePolyfill(function(t,e){var s=win.indexedDB.open(MIXPANEL_DB_NAME,DB_VERSION);s.onerror=function(){e(s.error)},s.onsuccess=function(){t(s.result)},s.onupgradeneeded=function(r){var a=r.target.result;OBJECT_STORES.forEach(function(o){a.createObjectStore(o)})}})};IDBStorageWrapper.prototype.init=function(){return win.indexedDB?(this.dbPromise||(this.dbPromise=this._openDb()),this.dbPromise.then(function(t){return t instanceof win.IDBDatabase?PromisePolyfill.resolve():PromisePolyfill.reject(t)})):PromisePolyfill.reject("indexedDB is not supported in this browser")};IDBStorageWrapper.prototype.isInitialized=function(){return!!this.dbPromise};IDBStorageWrapper.prototype.makeTransaction=function(t,e){var s=this.storeName,r=function(a){return new PromisePolyfill(function(o,l){var c=a.transaction(s,t);c.oncomplete=function(){o(c)},c.onabort=c.onerror=function(){l(c.error)},e(c.objectStore(s))})};return this.dbPromise.then(r).catch((function(a){return a&&a.name==="InvalidStateError"?(this.dbPromise=this._openDb(),this.dbPromise.then(r)):PromisePolyfill.reject(a)}).bind(this))};IDBStorageWrapper.prototype.setItem=function(t,e){return this.makeTransaction("readwrite",function(s){s.put(e,t)})};IDBStorageWrapper.prototype.getItem=function(t){var e;return this.makeTransaction("readonly",function(s){e=s.get(t)}).then(function(){return e.result})};IDBStorageWrapper.prototype.removeItem=function(t){return this.makeTransaction("readwrite",function(e){e.delete(t)})};IDBStorageWrapper.prototype.getAll=function(){var t;return this.makeTransaction("readonly",function(e){t=e.getAll()}).then(function(){return t.result})};var GDPR_DEFAULT_PERSISTENCE_PREFIX="__mp_opt_in_out_";function optIn(t,e){_optInOut(!0,t,e)}function optOut(t,e){_optInOut(!1,t,e)}function hasOptedIn(t,e){return _getStorageValue(t,e)==="1"}function hasOptedOut(t,e){if(_hasDoNotTrackFlagOn(e))return console$1.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var s=_getStorageValue(t,e)==="0";return s&&console$1.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),s}function addOptOutCheckMixpanelLib(t){return _addOptOutCheck(t,function(e){return this.get_config(e)})}function addOptOutCheckMixpanelPeople(t){return _addOptOutCheck(t,function(e){return this._get_config(e)})}function addOptOutCheckMixpanelGroup(t){return _addOptOutCheck(t,function(e){return this._get_config(e)})}function clearOptInOut(t,e){e=e||{},_getStorage(e).remove(_getStorageKey(t,e),!!e.crossSubdomainCookie,e.cookieDomain)}function _getStorage(t){return t=t||{},t.persistenceType==="localStorage"?_.localStorage:_.cookie}function _getStorageKey(t,e){return e=e||{},(e.persistencePrefix||GDPR_DEFAULT_PERSISTENCE_PREFIX)+t}function _getStorageValue(t,e){return _getStorage(e).get(_getStorageKey(t,e))}function _hasDoNotTrackFlagOn(t){if(t&&t.ignoreDnt)return!1;var e=t&&t.window||win,s=e.navigator||{},r=!1;return _.each([s.doNotTrack,s.msDoNotTrack,e.doNotTrack],function(a){_.includes([!0,1,"1","yes"],a)&&(r=!0)}),r}function _optInOut(t,e,s){if(!_.isString(e)||!e.length){console$1.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token");return}s=s||{},_getStorage(s).set(_getStorageKey(e,s),t?1:0,_.isNumber(s.cookieExpiration)?s.cookieExpiration:null,!!s.crossSubdomainCookie,!!s.secureCookie,!!s.crossSiteCookie,s.cookieDomain),s.track&&t&&s.track(s.trackEventName||"$opt_in",s.trackProperties,{send_immediately:!0})}function _addOptOutCheck(t,e){return function(){var s=!1;try{var r=e.call(this,"token"),a=e.call(this,"ignore_dnt"),o=e.call(this,"opt_out_tracking_persistence_type"),l=e.call(this,"opt_out_tracking_cookie_prefix"),c=e.call(this,"window");r&&(s=hasOptedOut(r,{ignoreDnt:a,persistenceType:o,persistencePrefix:l,window:c}))}catch(f){console$1.error("Unexpected error when checking tracking opt-out status: "+f)}if(!s)return t.apply(this,arguments);var u=arguments[arguments.length-1];typeof u=="function"&&u(0)}}var logger$6=console_with_prefix("lock"),SharedLock=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||win.localStorage,this.pollIntervalMS=e.pollIntervalMS||100,this.timeoutMS=e.timeoutMS||2e3,this.promiseImpl=e.promiseImpl||PromisePolyfill};SharedLock.prototype.withLock=function(t,e){var s=this.promiseImpl;return new s(_.bind(function(r,a){var o=e||new Date().getTime()+"|"+Math.random(),l=new Date().getTime(),c=this.storageKey,u=this.pollIntervalMS,f=this.timeoutMS,d=this.storage,p=c+":X",m=c+":Y",y=c+":Z",b=function(D){if(new Date().getTime()-l>f){logger$6.error("Timeout waiting for mutex on "+c+"; clearing lock. ["+o+"]"),d.removeItem(y),d.removeItem(m),j();return}setTimeout(function(){try{D()}catch(F){a(F)}},u*(Math.random()+.1))},E=function(D,F){D()?F():b(function(){E(D,F)})},C=function(){var D=d.getItem(m);return D&&D!==o?!1:(d.setItem(m,o),d.getItem(m)===o?!0:(localStorageSupported(d,!0)||a(new Error("localStorage support dropped while acquiring lock")),!1))},j=function(){d.setItem(p,o),E(C,function(){if(d.getItem(p)===o){B();return}b(function(){if(d.getItem(m)!==o){j();return}E(function(){return!d.getItem(y)},B)})})},B=function(){d.setItem(y,"1");var D=function(){d.removeItem(y),d.getItem(m)===o&&d.removeItem(m),d.getItem(p)===o&&d.removeItem(p)};t().then(function(F){D(),r(F)}).catch(function(F){D(),a(F)})};try{if(localStorageSupported(d,!0))j();else throw new Error("localStorage support check failed")}catch(D){a(D)}},this))};var LocalStorageWrapper=function(t){this.storage=t||win.localStorage};LocalStorageWrapper.prototype.init=function(){return PromisePolyfill.resolve()};LocalStorageWrapper.prototype.isInitialized=function(){return!0};LocalStorageWrapper.prototype.setItem=function(t,e){return new PromisePolyfill(_.bind(function(s,r){try{this.storage.setItem(t,JSONStringify(e))}catch(a){r(a)}s()},this))};LocalStorageWrapper.prototype.getItem=function(t){return new PromisePolyfill(_.bind(function(e,s){var r;try{r=JSONParse(this.storage.getItem(t))}catch(a){s(a)}e(r)},this))};LocalStorageWrapper.prototype.removeItem=function(t){return new PromisePolyfill(_.bind(function(e,s){try{this.storage.removeItem(t)}catch(r){s(r)}e()},this))};var logger$5=console_with_prefix("batch"),RequestQueue=function(t,e){e=e||{},this.storageKey=t,this.usePersistence=e.usePersistence,this.usePersistence&&(this.queueStorage=e.queueStorage||new LocalStorageWrapper,this.lock=new SharedLock(t,{storage:e.sharedLockStorage||win.localStorage,timeoutMS:e.sharedLockTimeoutMS})),this.reportError=e.errorReporter||_.bind(logger$5.error,logger$5),this.pid=e.pid||null,this.memQueue=[],this.initialized=!1,e.enqueueThrottleMs?this.enqueuePersisted=batchedThrottle(_.bind(this._enqueuePersisted,this),e.enqueueThrottleMs):this.enqueuePersisted=_.bind(function(s){return this._enqueuePersisted([s])},this)};RequestQueue.prototype.ensureInit=function(){return this.initialized||!this.usePersistence?PromisePolyfill.resolve():this.queueStorage.init().then(_.bind(function(){this.initialized=!0},this)).catch(_.bind(function(t){this.reportError("Error initializing queue persistence. Disabling persistence",t),this.initialized=!0,this.usePersistence=!1},this))};RequestQueue.prototype.enqueue=function(t,e){var s={id:cheap_guid(),flushAfter:new Date().getTime()+e*2,payload:t};return this.usePersistence?this.enqueuePersisted(s):(this.memQueue.push(s),PromisePolyfill.resolve(!0))};RequestQueue.prototype._enqueuePersisted=function(t){var e=_.bind(function(){return this.ensureInit().then(_.bind(function(){return this.readFromStorage()},this)).then(_.bind(function(s){return this.saveToStorage(s.concat(t))},this)).then(_.bind(function(s){return s&&(this.memQueue=this.memQueue.concat(t)),s},this)).catch(_.bind(function(s){return this.reportError("Error enqueueing items",s,t),!1},this))},this);return this.lock.withLock(e,this.pid).catch(_.bind(function(s){return this.reportError("Error acquiring storage lock",s),!1},this))};RequestQueue.prototype.fillBatch=function(t){var e=this.memQueue.slice(0,t);return this.usePersistence&&e.length<t?this.ensureInit().then(_.bind(function(){return this.readFromStorage()},this)).then(_.bind(function(s){if(s.length){var r={};_.each(e,function(l){r[l.id]=!0});for(var a=0;a<s.length;a++){var o=s[a];if(new Date().getTime()>o.flushAfter&&!r[o.id]&&(o.orphaned=!0,e.push(o),e.length>=t))break}}return e},this)):PromisePolyfill.resolve(e)};var filterOutIDsAndInvalid=function(t,e){var s=[];return _.each(t,function(r){r.id&&!e[r.id]&&s.push(r)}),s};RequestQueue.prototype.removeItemsByID=function(t){var e={};if(_.each(t,function(r){e[r]=!0}),this.memQueue=filterOutIDsAndInvalid(this.memQueue,e),this.usePersistence){var s=_.bind(function(){return this.ensureInit().then(_.bind(function(){return this.readFromStorage()},this)).then(_.bind(function(r){return r=filterOutIDsAndInvalid(r,e),this.saveToStorage(r)},this)).then(_.bind(function(){return this.readFromStorage()},this)).then(_.bind(function(r){for(var a=0;a<r.length;a++){var o=r[a];if(o.id&&e[o.id])throw new Error("Item not removed from storage")}return!0},this)).catch(_.bind(function(r){return this.reportError("Error removing items",r,t),!1},this))},this);return this.lock.withLock(s,this.pid).catch(_.bind(function(r){return this.reportError("Error acquiring storage lock",r),localStorageSupported(this.lock.storage,!0)?!1:s().then(_.bind(function(a){return a||this.queueStorage.removeItem(this.storageKey).then(function(){return a})},this)).catch(_.bind(function(a){return this.reportError("Error clearing queue",a),!1},this))},this))}else return PromisePolyfill.resolve(!0)};var updatePayloads=function(t,e){var s=[];return _.each(t,function(r){var a=r.id;if(a in e){var o=e[a];o!==null&&(r.payload=o,s.push(r))}else s.push(r)}),s};RequestQueue.prototype.updatePayloads=function(t){return this.memQueue=updatePayloads(this.memQueue,t),this.usePersistence?this.lock.withLock(_.bind(function(){return this.ensureInit().then(_.bind(function(){return this.readFromStorage()},this)).then(_.bind(function(s){return s=updatePayloads(s,t),this.saveToStorage(s)},this)).catch(_.bind(function(s){return this.reportError("Error updating items",t,s),!1},this))},this),this.pid).catch(_.bind(function(e){return this.reportError("Error acquiring storage lock",e),!1},this)):PromisePolyfill.resolve(!0)};RequestQueue.prototype.readFromStorage=function(){return this.ensureInit().then(_.bind(function(){return this.queueStorage.getItem(this.storageKey)},this)).then(_.bind(function(t){return t&&(_.isArray(t)||(this.reportError("Invalid storage entry:",t),t=null)),t||[]},this)).catch(_.bind(function(t){return this.reportError("Error retrieving queue",t),[]},this))};RequestQueue.prototype.saveToStorage=function(t){return this.ensureInit().then(_.bind(function(){return this.queueStorage.setItem(this.storageKey,t)},this)).then(function(){return!0}).catch(_.bind(function(e){return this.reportError("Error saving queue",e),!1},this))};RequestQueue.prototype.clear=function(){return this.memQueue=[],this.usePersistence?this.ensureInit().then(_.bind(function(){return this.queueStorage.removeItem(this.storageKey)},this)):PromisePolyfill.resolve()};var MAX_RETRY_INTERVAL_MS=600*1e3,logger$4=console_with_prefix("batch"),RequestBatcher=function(t,e){this.errorReporter=e.errorReporter,this.queue=new RequestQueue(t,{errorReporter:_.bind(this.reportError,this),queueStorage:e.queueStorage,sharedLockStorage:e.sharedLockStorage,sharedLockTimeoutMS:e.sharedLockTimeoutMS,usePersistence:e.usePersistence,enqueueThrottleMs:e.enqueueThrottleMs}),this.libConfig=e.libConfig,this.sendRequest=e.sendRequestFunc,this.beforeSendHook=e.beforeSendHook,this.stopAllBatching=e.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={},this.flushOnlyOnInterval=e.flushOnlyOnInterval||!1,this._flushPromise=null};RequestBatcher.prototype.enqueue=function(t){return this.queue.enqueue(t,this.flushInterval)};RequestBatcher.prototype.start=function(){return this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()};RequestBatcher.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)};RequestBatcher.prototype.clear=function(){return this.queue.clear()};RequestBatcher.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size};RequestBatcher.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)};RequestBatcher.prototype.scheduleFlush=function(t){this.flushInterval=t,this.stopped||(this.timeoutID=setTimeout(_.bind(function(){this.stopped||(this._flushPromise=this.flush())},this),this.flushInterval))};RequestBatcher.prototype.sendRequestPromise=function(t,e){return new PromisePolyfill(_.bind(function(s){this.sendRequest(t,e,s)},this))};RequestBatcher.prototype.flush=function(t){if(this.requestInProgress)return logger$4.log("Flush: Request already in progress"),PromisePolyfill.resolve();this.requestInProgress=!0,t=t||{};var e=this.libConfig.batch_request_timeout_ms,s=new Date().getTime(),r=this.batchSize;return this.queue.fillBatch(r).then(_.bind(function(a){var o=a.length===r,l=[],c={};if(_.each(a,function(p){var m=p.payload;if(this.beforeSendHook&&!p.orphaned&&(m=this.beforeSendHook(m)),m){m.event&&m.properties&&(m.properties=_.extend({},m.properties,{mp_sent_by_lib_version:Config.LIB_VERSION}));var y=!0,b=p.id;b?(this.itemIdsSentSuccessfully[b]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:p,batchSize:a.length,timesSent:this.itemIdsSentSuccessfully[b]}),y=!1):this.reportError("[dupe] found item with no ID",{item:p}),y&&l.push(m)}c[p.id]=m},this),l.length<1)return this.requestInProgress=!1,this.resetFlush(),PromisePolyfill.resolve();var u=_.bind(function(){return this.queue.removeItemsByID(_.map(a,function(p){return p.id})).then(_.bind(function(p){return _.each(a,_.bind(function(m){var y=m.id;y?(this.itemIdsSentSuccessfully[y]=this.itemIdsSentSuccessfully[y]||0,this.itemIdsSentSuccessfully[y]++,this.itemIdsSentSuccessfully[y]>5&&this.reportError("[dupe] item ID sent too many times",{item:m,batchSize:a.length,timesSent:this.itemIdsSentSuccessfully[y]})):this.reportError("[dupe] found item with no ID while removing",{item:m})},this)),p?(this.consecutiveRemovalFailures=0,this.flushOnlyOnInterval&&!o?(this.resetFlush(),PromisePolyfill.resolve()):this.flush()):(++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush(),PromisePolyfill.resolve())},this))},this),f=_.bind(function(p){this.requestInProgress=!1;try{if(t.unloading)return this.queue.updatePayloads(c);if(_.isObject(p)&&p.error==="timeout"&&new Date().getTime()-s>=e)return this.reportError("Network timeout; retrying"),this.flush();if(_.isObject(p)&&(p.httpStatusCode>=500||p.httpStatusCode===429||p.httpStatusCode<=0&&!isOnline()||p.error==="timeout")){var m=this.flushInterval*2;return p.retryAfter&&(m=parseInt(p.retryAfter,10)*1e3||m),m=Math.min(MAX_RETRY_INTERVAL_MS,m),this.reportError("Error; retry in "+m+" ms"),this.scheduleFlush(m),PromisePolyfill.resolve()}else if(_.isObject(p)&&p.httpStatusCode===413)if(a.length>1){var y=Math.max(1,Math.floor(r/2));return this.batchSize=Math.min(this.batchSize,y,a.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush(),PromisePolyfill.resolve()}else return this.reportError("Single-event request too large; dropping",a),this.resetBatchSize(),u();else return u()}catch(b){this.reportError("Error handling API response",b),this.resetFlush()}},this),d={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:e};return t.unloading&&(d.transport="sendBeacon"),logger$4.log("MIXPANEL REQUEST:",l),this.sendRequestPromise(l,d).then(f)},this)).catch(_.bind(function(a){this.reportError("Error flushing request queue",a),this.resetFlush()},this))};RequestBatcher.prototype.reportError=function(t,e){if(logger$4.error.apply(logger$4.error,arguments),this.errorReporter)try{e instanceof Error||(e=new Error(t)),this.errorReporter(t,e)}catch(s){logger$4.error(s)}};var isRecordingExpired=function(t){var e=Date.now();return!t||e>t.maxExpires||e>t.idleExpires},RECORD_ENQUEUE_THROTTLE_MS=250,EV_CHANGE="change",EV_CLICK="click",EV_HASHCHANGE="hashchange",EV_INPUT="input",EV_LOAD="load",EV_MP_LOCATION_CHANGE="mp_locationchange",EV_POPSTATE="popstate",EV_SCROLLEND="scrollend",EV_SCROLL="scroll",EV_SELECT="select",EV_SUBMIT="submit",EV_TOGGLE="toggle",EV_VISIBILITYCHANGE="visibilitychange",CLICK_EVENT_PROPS=["clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","x","y"],OPT_IN_CLASSES=["mp-include"],OPT_OUT_CLASSES=["mp-no-track"],SENSITIVE_DATA_CLASSES=OPT_OUT_CLASSES.concat(["mp-sensitive"]),TRACKED_ATTRS=["aria-label","aria-labelledby","aria-describedby","href","name","role","title","type"],INTERACTIVE_ARIA_ROLES={button:!0,checkbox:!0,combobox:!0,grid:!0,link:!0,listbox:!0,menu:!0,menubar:!0,menuitem:!0,menuitemcheckbox:!0,menuitemradio:!0,navigation:!0,option:!0,radio:!0,radiogroup:!0,searchbox:!0,slider:!0,spinbutton:!0,switch:!0,tab:!0,tablist:!0,textbox:!0,tree:!0,treegrid:!0,treeitem:!0},ALWAYS_NON_INTERACTIVE_TAGS={base:!0,head:!0,html:!0,link:!0,meta:!0,script:!0,style:!0,title:!0,br:!0,hr:!0,wbr:!0,noscript:!0,picture:!0,source:!0,template:!0,track:!0},TEXT_CONTAINER_TAGS={article:!0,div:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,p:!0,section:!0,span:!0},EVENT_HANDLER_ATTRIBUTES=["onclick","onmousedown","onmouseup","onpointerdown","onpointerup","ontouchend","ontouchstart"],MAX_DEPTH=5,logger$3=console_with_prefix("autocapture");function getClasses(t){for(var e={},s=getClassName(t).split(" "),r=0;r<s.length;r++){var a=s[r];a&&(e[a]=!0)}return e}function getClassName(t){switch(typeof t.className){case"string":return t.className;case"object":return t.className.baseVal||t.getAttribute("class")||"";default:return""}}function getPreviousElementSibling(t){if(t.previousElementSibling)return t.previousElementSibling;do t=t.previousSibling;while(t&&!isElementNode(t));return t}function getPropertiesFromElement(t,e,s,r,a,o){var l={$classes:getClassName(t).split(" "),$tag_name:t.tagName.toLowerCase()},c=t.id;c&&(l.$id=c),shouldTrackElementDetails(t,e,a,o)&&_.each(TRACKED_ATTRS.concat(r),function(p){if(t.hasAttribute(p)&&!s[p]){var m=t.getAttribute(p);shouldTrackValue(m)&&(l["$attr-"+p]=m)}});for(var u=1,f=1,d=t;d=getPreviousElementSibling(d);)u++,d.tagName===t.tagName&&f++;return l.$nth_child=u,l.$nth_of_type=f,l}function getPropsForDOMEvent(t,e){var s=e.allowElementCallback,r=e.allowSelectors||[],a=e.blockAttrs||[],o=e.blockElementCallback,l=e.blockSelectors||[],c=e.captureTextContent||!1,u=e.captureExtraAttrs||[],f=e.capturedForHeatMap||!1,d={};_.each(a,function(q){d[q]=!0});var p=null,m=typeof t.target>"u"?t.srcElement:t.target;if(isTextNode(m)&&(m=m.parentNode),shouldTrackDomEvent(m,t)&&isElementAllowed(m,t,s,r)&&!isElementBlocked(m,t,o,l)){for(var y=[m],b=m;b.parentNode&&!isTag(b,"body");)y.push(b.parentNode),b=b.parentNode;var E=[],C,j=!1;if(_.each(y,function(q){var V=shouldTrackElementDetails(q,t,s,r);!d.href&&q.tagName.toLowerCase()==="a"&&(C=q.getAttribute("href"),C=V&&shouldTrackValue(C)&&C),isElementBlocked(q,t,o,l)&&(j=!0),E.push(getPropertiesFromElement(q,t,d,u,s,r))},this),!j){var B=document$1.documentElement;if(p={$event_type:t.type,$host:win.location.host,$pathname:win.location.pathname,$elements:E,$el_attr__href:C,$viewportHeight:Math.max(B.clientHeight,win.innerHeight||0),$viewportWidth:Math.max(B.clientWidth,win.innerWidth||0),$pageHeight:document$1.body.offsetHeight||0,$pageWidth:document$1.body.offsetWidth||0},_.each(u,function(q){if(!d[q]&&m.hasAttribute(q)){var V=m.getAttribute(q);shouldTrackValue(V)&&(p["$el_attr__"+q]=V)}}),c&&(D=getSafeText(m,t,s,r),D&&D.length&&(p.$el_text=D)),t.type===EV_CLICK&&(_.each(CLICK_EVENT_PROPS,function(q){q in t&&(p["$"+q]=t[q])}),f&&(p.$captured_for_heatmap=!0),m=guessRealClickTarget(t)),c){var D=getSafeText(m,t,s,r);D&&D.length&&(p.$el_text=D)}if(m){if(!isElementAllowed(m,t,s,r)||isElementBlocked(m,t,o,l))return null;var F=getPropertiesFromElement(m,t,d,u,s,r);p.$target=F,p.$el_classes=F.$classes,_.extend(p,_.strip_empty_properties({$el_id:F.$id,$el_tag_name:F.$tag_name}))}}}return p}function getSafeText(t,e,s,r){var a="";return shouldTrackElementDetails(t,e,s,r)&&t.childNodes&&t.childNodes.length&&_.each(t.childNodes,function(o){isTextNode(o)&&o.textContent&&(a+=_.trim(o.textContent).split(/(\s+)/).filter(shouldTrackValue).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),_.trim(a)}function guessRealClickTarget(t){for(var e=t.target,s=t.composedPath(),r=0;r<s.length;r++){var a=s[r];if(isTag(a,"a")||isTag(a,"button")||isTag(a,"input")||isTag(a,"select")||a.getAttribute&&a.getAttribute("role")==="button"){e=a;break}if(a===e)break}return e}function isElementAllowed(t,e,s,r){if(s)try{if(!s(t,e))return!1}catch(l){return logger$3.critical("Error while checking element in allowElementCallback",l),!1}if(!r.length)return!0;for(var a=0;a<r.length;a++){var o=r[a];try{if(t.matches(o))return!0}catch(l){logger$3.critical("Error while checking selector: "+o,l)}}return!1}function isElementBlocked(t,e,s,r){var a;if(s)try{if(s(t,e))return!0}catch(c){return logger$3.critical("Error while checking element in blockElementCallback",c),!0}if(r&&r.length)for(a=0;a<r.length;a++){var o=r[a];try{if(t.matches(o))return!0}catch(c){logger$3.critical("Error while checking selector: "+o,c)}}var l=getClasses(t);for(a=0;a<OPT_OUT_CLASSES.length;a++)if(l[OPT_OUT_CLASSES[a]])return!0;return!1}function isElementNode(t){return t&&t.nodeType===1}function isTag(t,e){return t&&t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function isTextNode(t){return t&&t.nodeType===3}function minDOMApisSupported(){try{var t=document$1.createElement("div");return!!t.matches}catch{return!1}}function weakSetSupported(){return typeof WeakSet<"u"}function shouldTrackDomEvent(t,e){if(!t||isTag(t,"html")||!isElementNode(t))return!1;var s=t.tagName.toLowerCase();switch(s){case"form":return e.type===EV_SUBMIT;case"input":return["button","submit"].indexOf(t.getAttribute("type"))===-1?e.type===EV_CHANGE:e.type===EV_CLICK;case"select":case"textarea":return e.type===EV_CHANGE;default:return e.type===EV_CLICK}}function elementLooksSensitive(t){var e=(t.name||t.id||"").toString().toLowerCase();if(typeof e=="string"){var s=/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i;if(s.test(e.replace(/[^a-zA-Z0-9]/g,"")))return!0}return!1}function shouldTrackElementDetails(t,e,s,r){var a;if(!isElementAllowed(t,e,s,r))return!1;for(var o=t;o.parentNode&&!isTag(o,"body");o=o.parentNode){var l=getClasses(o);for(a=0;a<SENSITIVE_DATA_CLASSES.length;a++)if(l[SENSITIVE_DATA_CLASSES[a]])return!1}var c=getClasses(t);for(a=0;a<OPT_IN_CLASSES.length;a++)if(c[OPT_IN_CLASSES[a]])return!0;if(isTag(t,"input")||isTag(t,"select")||isTag(t,"textarea")||t.getAttribute("contenteditable")==="true")return!1;var u=t.type||"";if(typeof u=="string")switch(u.toLowerCase()){case"hidden":return!1;case"password":return!1}return!elementLooksSensitive(t)}function shouldTrackValue(t){if(t===null||_.isUndefined(t))return!1;if(typeof t=="string"){t=_.trim(t);var e=/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;if(e.test((t||"").replace(/[- ]/g,"")))return!1;var s=/(^\d{3}-?\d{2}-?\d{4}$)/;if(s.test(t))return!1}return!0}function getPolyfillScrollEndFunction(t){var e="onscrollend"in win,s=safewrap(t),r=EV_SCROLLEND;if(!e){var a=null,o=100;s=safewrap(function(){clearTimeout(a),a=setTimeout(t,o)}),r=EV_SCROLL}return{listener:s,eventType:r}}function hasInlineEventHandlers(t){for(var e=0;e<EVENT_HANDLER_ATTRIBUTES.length;e++)if(t.hasAttribute(EVENT_HANDLER_ATTRIBUTES[e]))return!0;return!1}function hasInteractiveAriaRole(t){var e=t.getAttribute("role");if(!e)return!1;var s=e.trim().split(/\s+/)[0].toLowerCase();return INTERACTIVE_ARIA_ROLES[s]}function hasAnyInteractivityIndicators(t){var e=t.tagName.toLowerCase();return!!(e==="button"||e==="input"||e==="select"||e==="textarea"||e==="details"||e==="dialog"||t.isContentEditable||t.onclick||t.onmousedown||t.onmouseup||t.ontouchstart||t.ontouchend||hasInlineEventHandlers(t)||hasInteractiveAriaRole(t)||e==="a"&&t.hasAttribute("href")||t.hasAttribute("tabindex"))}function isDefinitelyNonInteractive(t){if(!t||!t.tagName)return!0;var e=t.tagName.toLowerCase();if(ALWAYS_NON_INTERACTIVE_TAGS[e])return!0;if(hasAnyInteractivityIndicators(t))return!1;for(var s=t.parentElement,r=0;s&&r<MAX_DEPTH;){if(hasAnyInteractivityIndicators(s))return!1;if(s.getRootNode&&s.getRootNode()!==document$1){var a=s.getRootNode();if(a.host&&hasAnyInteractivityIndicators(a.host))return!1}s=s.parentElement,r++}return!!TEXT_CONTAINER_TAGS[e]}function getClickEventComposedPath(t){return"composedPath"in t?t.composedPath():[]}function getClickEventTargetElement(t){var e=getClickEventComposedPath(t);return e&&e.length>0?e[0]:t.target||t.srcElement}var COMMON_MASK_CLASSES_SELECTOR=".mp-mask, .fs-mask, .amp-mask, .rr-mask, .ph-mask",RRWEB_PASSWORD_ATTRIBUTE="data-rr-is-password",ALWAYS_MASKED_INPUT_TYPES=["password","email","tel","hidden"];function normalizeSelectors(t){return t?Array.isArray(t)?t:[t]:[]}function getPrivacyConfig(t){var e={input:{maskingSelector:"",unmaskingSelector:"",maskAll:!0},text:{maskingSelector:"",unmaskingSelector:"",maskAll:!0}},s=t.get_config("record_mask_input_selector"),r=t.get_config("record_unmask_input_selector"),a=t.get_config("record_mask_all_inputs");e.input.maskingSelector=normalizeSelectors(s).join(","),e.input.unmaskingSelector=normalizeSelectors(r).join(","),a!==void 0&&(e.input.maskAll=a);var o=t.get_config("record_mask_text_selector"),l=t.get_config("record_unmask_text_selector"),c=t.get_config("record_mask_all_text"),u=t.get_config("record_mask_text_class"),f=normalizeSelectors(o);if(u)if(u instanceof RegExp)e.text._legacyClassRegex=u;else{var d="."+u;f.indexOf(d)===-1&&f.push(d)}return e.text.maskingSelector=f.join(","),e.text.unmaskingSelector=normalizeSelectors(l).join(","),c===void 0&&o!==void 0?e.text.maskAll=!1:c!==void 0&&(e.text.maskAll=c),e}function elementMatchesSelector(t,e){return e?!!t.closest(e):!1}function shouldMaskInput(t,e){var s=(t.getAttribute("type")||"").toLowerCase();if(ALWAYS_MASKED_INPUT_TYPES.indexOf(s)!==-1)return!0;var r=(t.getAttribute("autocomplete")||"").toLowerCase();return r&&r!==""&&r!=="off"||t.hasAttribute(RRWEB_PASSWORD_ATTRIBUTE)||elementLooksSensitive(t)?!0:e.input.maskAll?!elementMatchesSelector(t,e.input.unmaskingSelector):!!(elementMatchesSelector(t,e.input.maskingSelector)||elementMatchesSelector(t,COMMON_MASK_CLASSES_SELECTOR))}function shouldMaskText(t,e){return t?e.text._legacyClassRegex&&classMatchesRegex(t,e.text._legacyClassRegex)?!0:e.text.maskAll?!elementMatchesSelector(t,e.text.unmaskingSelector):!!(elementMatchesSelector(t,e.text.maskingSelector)||elementMatchesSelector(t,COMMON_MASK_CLASSES_SELECTOR)):!1}var logger$2=console_with_prefix("recorder"),CompressionStream$1=win.CompressionStream,RECORDER_BATCHER_LIB_CONFIG={batch_size:1e3,batch_flush_interval_ms:10*1e3,batch_request_timeout_ms:90*1e3,batch_autostart:!0},ACTIVE_SOURCES=new Set([IncrementalSource.MouseMove,IncrementalSource.MouseInteraction,IncrementalSource.Scroll,IncrementalSource.ViewportResize,IncrementalSource.Input,IncrementalSource.TouchMove,IncrementalSource.MediaInteraction,IncrementalSource.Drag,IncrementalSource.Selection]);function isUserEvent(t){return t.type===EventType.IncrementalSnapshot&&ACTIVE_SOURCES.has(t.data.source)}var SessionRecording=function(t){this._mixpanel=t.mixpanelInstance,this._onIdleTimeout=t.onIdleTimeout||NOOP_FUNC,this._onMaxLengthReached=t.onMaxLengthReached||NOOP_FUNC,this._onBatchSent=t.onBatchSent||NOOP_FUNC,this._rrwebRecord=t.rrwebRecord||null,this._stopRecording=null,this.replayId=t.replayId,this.batchStartUrl=t.batchStartUrl||null,this.replayStartUrl=t.replayStartUrl||null,this.idleExpires=t.idleExpires||null,this.maxExpires=t.maxExpires||null,this.replayStartTime=t.replayStartTime||null,this.lastEventTimestamp=t.lastEventTimestamp||null,this.seqNo=t.seqNo||0,this.idleTimeoutId=null,this.maxTimeoutId=null,this.recordMaxMs=MAX_RECORDING_MS,this.recordMinMs=0;var e=localStorageSupported(t.sharedLockStorage,!0)&&!this.getConfig("disable_persistence");this.batcherKey="__mprec_"+this.getConfig("name")+"_"+this.getConfig("token")+"_"+this.replayId,this.queueStorage=new IDBStorageWrapper(RECORDING_EVENTS_STORE_NAME),this.batcher=new RequestBatcher(this.batcherKey,{errorReporter:this.reportError.bind(this),flushOnlyOnInterval:!0,libConfig:RECORDER_BATCHER_LIB_CONFIG,sendRequestFunc:this.flushEventsWithOptOut.bind(this),queueStorage:this.queueStorage,sharedLockStorage:t.sharedLockStorage,usePersistence:e,stopAllBatchingFunc:this.stopRecording.bind(this),enqueueThrottleMs:RECORD_ENQUEUE_THROTTLE_MS,sharedLockTimeoutMS:10*1e3})};SessionRecording.prototype.getUserIdInfo=function(){if(this.finalFlushUserIdInfo)return this.finalFlushUserIdInfo;var t={distinct_id:String(this._mixpanel.get_distinct_id())},e=this._mixpanel.get_property("$device_id");e&&(t.$device_id=e);var s=this._mixpanel.get_property("$user_id");return s&&(t.$user_id=s),t};SessionRecording.prototype.unloadPersistedData=function(){return this.batcher.stop(),this.queueStorage.init().catch((function(){this.reportError("Error initializing IndexedDB storage for unloading persisted data.")}).bind(this)).then((function(){return this.getDurationMs()<this._getRecordMinMs()?this.queueStorage.removeItem(this.batcherKey):this.batcher.flush().then((function(){return this.queueStorage.removeItem(this.batcherKey)}).bind(this))}).bind(this))};SessionRecording.prototype.getConfig=function(t){return this._mixpanel.get_config(t)};SessionRecording.prototype.get_config=function(t){return this.getConfig(t)};SessionRecording.prototype.startRecording=function(t){if(this._rrwebRecord===null){this.reportError("rrweb record function not provided. ");return}if(this._stopRecording!==null){logger$2.log("Recording already in progress, skipping startRecording.");return}this.recordMaxMs=this.getConfig("record_max_ms"),this.recordMaxMs>MAX_RECORDING_MS&&(this.recordMaxMs=MAX_RECORDING_MS,logger$2.critical("record_max_ms cannot be greater than "+MAX_RECORDING_MS+"ms. Capping value.")),this.maxExpires||(this.maxExpires=new Date().getTime()+this.recordMaxMs),this.recordMinMs=this._getRecordMinMs(),this.replayStartTime||(this.replayStartTime=new Date().getTime(),this.batchStartUrl=_.info.currentUrl(),this.replayStartUrl=_.info.currentUrl()),t||this.recordMinMs>0?this.batcher.stop():this.batcher.start();var e=(function(){clearTimeout(this.idleTimeoutId);var o=this.getConfig("record_idle_timeout_ms");this.idleTimeoutId=setTimeout(this._onIdleTimeout,o),this.idleExpires=new Date().getTime()+o}).bind(this);e();var s=this.getConfig("record_block_selector");(s===""||s===null)&&(s=void 0);var r=getPrivacyConfig(this._mixpanel);try{this._stopRecording=this._rrwebRecord({emit:(function(o){if(this.idleExpires&&this.idleExpires<o.timestamp){this._onIdleTimeout();return}isUserEvent(o)&&(this.batcher.stopped&&new Date().getTime()-this.replayStartTime>=this.recordMinMs&&this.batcher.start(),e()),this.__enqueuePromise=this.batcher.enqueue(o),(this.lastEventTimestamp===null||o.timestamp>this.lastEventTimestamp)&&(this.lastEventTimestamp=o.timestamp)}).bind(this),blockClass:this.getConfig("record_block_class"),blockSelector:s,collectFonts:this.getConfig("record_collect_fonts"),dataURLOptions:{type:"image/webp",quality:.6},maskAllInputs:!0,maskTextSelector:"*",maskInputFn:this._getMaskFn(shouldMaskInput,r),maskTextFn:this._getMaskFn(shouldMaskText,r),recordCanvas:this.getConfig("record_canvas"),sampling:{canvas:15},plugins:this.getConfig("record_console")?[getRecordConsolePlugin({stringifyOptions:{stringLengthLimit:1e3,numOfKeysLimit:50,depthOfLimit:2}})]:[]})}catch(o){this.reportError("Unexpected error when starting rrweb recording.",o)}if(typeof this._stopRecording!="function"){this.reportError("rrweb failed to start, skipping this recording."),this._stopRecording=null,this.stopRecording();return}var a=this.maxExpires-new Date().getTime();this.maxTimeoutId=setTimeout(this._onMaxLengthReached.bind(this),a)};SessionRecording.prototype.stopRecording=function(t){if(this.finalFlushUserIdInfo=this.getUserIdInfo(),!this.isRrwebStopped()){try{this._stopRecording()}catch(s){this.reportError("Error with rrweb stopRecording",s)}this._stopRecording=null}var e;return this.batcher.stopped?e=this.batcher.clear():t||(e=this.batcher.flush()),this.batcher.stop(),clearTimeout(this.idleTimeoutId),clearTimeout(this.maxTimeoutId),e};SessionRecording.prototype.isRrwebStopped=function(){return this._stopRecording===null};SessionRecording.prototype.flushEventsWithOptOut=function(t,e,s){var r=(function(a){a===0&&(this.stopRecording(),s({error:"Tracking has been opted out, stopping recording."}))}).bind(this);this._flushEvents(t,e,s,r)};SessionRecording.prototype.serialize=function(){var t;try{t=this._mixpanel.get_tab_id()}catch(e){this.reportError("Error getting tab ID for serialization ",e),t=null}return{replayId:this.replayId,seqNo:this.seqNo,replayStartTime:this.replayStartTime,batchStartUrl:this.batchStartUrl,replayStartUrl:this.replayStartUrl,lastEventTimestamp:this.lastEventTimestamp,idleExpires:this.idleExpires,maxExpires:this.maxExpires,tabId:t}};SessionRecording.deserialize=function(t,e){var s=new SessionRecording(_.extend({},e,{replayId:t.replayId,batchStartUrl:t.batchStartUrl,replayStartUrl:t.replayStartUrl,idleExpires:t.idleExpires,maxExpires:t.maxExpires,replayStartTime:t.replayStartTime,lastEventTimestamp:t.lastEventTimestamp,seqNo:t.seqNo,sharedLockStorage:e.sharedLockStorage}));return s};SessionRecording.prototype._sendRequest=function(t,e,s,r){var a=(function(l,c){l.status===200&&this.replayId===t&&(this.seqNo++,this.batchStartUrl=_.info.currentUrl()),this._onBatchSent(),r({status:0,httpStatusCode:l.status,responseBody:c,retryAfter:l.headers.get("Retry-After")})}).bind(this),o=this._mixpanel.get_api_host&&this._mixpanel.get_api_host("record")||this.getConfig("api_host");win.fetch(o+"/"+this.getConfig("api_routes").record+"?"+new URLSearchParams(e),{method:"POST",headers:{Authorization:"Basic "+btoa(this.getConfig("token")+":"),"Content-Type":"application/octet-stream"},body:s}).then(function(l){l.json().then(function(c){a(l,c)}).catch(function(c){r({error:c})})}).catch(function(l){r({error:l,httpStatusCode:0})})};SessionRecording.prototype._flushEvents=addOptOutCheckMixpanelLib(function(t,e,s){var r=t.length;if(r>0){for(var a=this.replayId,o=1/0,l=-1/0,c=!1,u=0;u<r;u++)o=Math.min(o,t[u].timestamp),l=Math.max(l,t[u].timestamp),t[u].type===EventType.FullSnapshot&&(c=!0);if(this.seqNo===0){if(!c){s({error:"First batch does not contain a full snapshot. Aborting recording."}),this.stopRecording(!0);return}this.replayStartTime=o}else this.replayStartTime||(this.reportError("Replay start time not set but seqNo is not 0. Using current batch start time as a fallback."),this.replayStartTime=o);var f=l-this.replayStartTime,d={$current_url:this.batchStartUrl,$lib_version:Config.LIB_VERSION,batch_start_time:o/1e3,mp_lib:"web",replay_id:a,replay_length_ms:f,replay_start_time:this.replayStartTime/1e3,replay_start_url:this.replayStartUrl,seq:this.seqNo},p=JSON.stringify(t);if(Object.assign(d,this.getUserIdInfo()),canUseCompressionStream(userAgent,navigator$1.vendor,windowOpera)){var m=new Blob([p],{type:"application/json"}).stream(),y=m.pipeThrough(new CompressionStream$1("gzip"));new Response(y).blob().then((function(b){d.format="gzip",this._sendRequest(a,d,b,s)}).bind(this))}else d.format="body",this._sendRequest(a,d,p,s)}});SessionRecording.prototype.reportError=function(t,e){logger$2.error.apply(logger$2.error,arguments);try{!e&&!(t instanceof Error)&&(t=new Error(t)),this.getConfig("error_reporter")(t,e)}catch(s){logger$2.error(s)}};SessionRecording.prototype.getDurationMs=function(){return this.replayStartTime===null?0:this.lastEventTimestamp===null?new Date().getTime()-this.replayStartTime:this.lastEventTimestamp-this.replayStartTime};SessionRecording.prototype._getRecordMinMs=function(){var t=this.getConfig("record_min_ms");return t>MAX_VALUE_FOR_MIN_RECORDING_MS?(logger$2.critical("record_min_ms cannot be greater than "+MAX_VALUE_FOR_MIN_RECORDING_MS+"ms. Capping value."),MAX_VALUE_FOR_MIN_RECORDING_MS):t};SessionRecording.prototype._getMaskFn=function(t,e){return(function(s,r){if(!s.trim().length)return"";var a=!0;try{a=t(r,e)}catch(l){this.reportError("Error checking if text should be masked, defaulting to masked",l)}if(a){var o=Math.min(s.length,1e4);return"*".repeat(o)}else return s}).bind(this)};var RecordingRegistry=function(t){this.idb=new IDBStorageWrapper(RECORDING_REGISTRY_STORE_NAME),this.errorReporter=t.errorReporter,this.mixpanelInstance=t.mixpanelInstance,this.sharedLockStorage=t.sharedLockStorage};RecordingRegistry.prototype.isPersistenceEnabled=function(){return!this.mixpanelInstance.get_config("disable_persistence")};RecordingRegistry.prototype.handleError=function(t){this.errorReporter("IndexedDB error: ",t)};RecordingRegistry.prototype.setActiveRecording=function(t){if(!this.isPersistenceEnabled())return PromisePolyfill.resolve();var e=t.tabId;return e?this.idb.init().then((function(){return this.idb.setItem(e,t)}).bind(this)).catch(this.handleError.bind(this)):(console.warn("No tab ID is set, cannot persist recording metadata."),PromisePolyfill.resolve())};RecordingRegistry.prototype.getActiveRecording=function(){return this.isPersistenceEnabled()?this.idb.init().then((function(){return this.idb.getItem(this.mixpanelInstance.get_tab_id())}).bind(this)).then((function(t){return isRecordingExpired(t)?null:t}).bind(this)).catch(this.handleError.bind(this)):PromisePolyfill.resolve(null)};RecordingRegistry.prototype.clearActiveRecording=function(){return this.isPersistenceEnabled()?this.markActiveRecordingExpired():this.deleteActiveRecording()};RecordingRegistry.prototype.markActiveRecordingExpired=function(){return this.getActiveRecording().then((function(t){if(t)return t.maxExpires=0,this.setActiveRecording(t)}).bind(this)).catch(this.handleError.bind(this))};RecordingRegistry.prototype.deleteActiveRecording=function(){return this.idb.isInitialized()?this.idb.removeItem(this.mixpanelInstance.get_tab_id()).catch(this.handleError.bind(this)):PromisePolyfill.resolve()};RecordingRegistry.prototype.flushInactiveRecordings=function(){return this.isPersistenceEnabled()?this.idb.init().then((function(){return this.idb.getAll()}).bind(this)).then((function(t){var e=t.filter(function(s){return isRecordingExpired(s)}).map((function(s){var r=SessionRecording.deserialize(s,{mixpanelInstance:this.mixpanelInstance,sharedLockStorage:this.sharedLockStorage});return r.unloadPersistedData().then((function(){return this.idb.removeItem(s.tabId)}).bind(this)).catch(this.handleError.bind(this))}).bind(this));return PromisePolyfill.all(e)}).bind(this)).catch(this.handleError.bind(this)):PromisePolyfill.resolve([])};var logger$1=console_with_prefix("recorder"),MixpanelRecorder=function(t,e,s){this.mixpanelInstance=t,this.rrwebRecord=e||record,this.sharedLockStorage=s,this.recordingRegistry=new RecordingRegistry({mixpanelInstance:this.mixpanelInstance,errorReporter:logger$1.error,sharedLockStorage:s}),this._flushInactivePromise=this.recordingRegistry.flushInactiveRecordings(),this.activeRecording=null,this.stopRecordingInProgress=!1};MixpanelRecorder.prototype.startRecording=function(t){if(t=t||{},this.activeRecording&&!this.activeRecording.isRrwebStopped()){logger$1.log("Recording already in progress, skipping startRecording.");return}var e=(function(){logger$1.log("Idle timeout reached, restarting recording."),this.resetRecording()}).bind(this),s=(function(){logger$1.log("Max recording length reached, stopping recording."),this.resetRecording()}).bind(this),r=(function(){this.recordingRegistry.setActiveRecording(this.activeRecording.serialize()),this.__flushPromise=this.activeRecording.batcher._flushPromise}).bind(this),a={mixpanelInstance:this.mixpanelInstance,onBatchSent:r,onIdleTimeout:e,onMaxLengthReached:s,replayId:_.UUID(),rrwebRecord:this.rrwebRecord,sharedLockStorage:this.sharedLockStorage};return t.activeSerializedRecording?this.activeRecording=SessionRecording.deserialize(t.activeSerializedRecording,a):this.activeRecording=new SessionRecording(a),this.activeRecording.startRecording(t.shouldStopBatcher),this.recordingRegistry.setActiveRecording(this.activeRecording.serialize())};MixpanelRecorder.prototype.stopRecording=function(){return this.stopRecordingInProgress=!0,this._stopCurrentRecording(!1,!0).then((function(){return this.recordingRegistry.clearActiveRecording()}).bind(this)).then((function(){this.stopRecordingInProgress=!1}).bind(this))};MixpanelRecorder.prototype.pauseRecording=function(){return this._stopCurrentRecording(!1)};MixpanelRecorder.prototype._stopCurrentRecording=function(t,e){if(this.activeRecording){var s=this.activeRecording.stopRecording(t);return e&&(this.activeRecording=null),s}return PromisePolyfill.resolve()};MixpanelRecorder.prototype.resumeRecording=function(t){return this.activeRecording&&this.activeRecording.isRrwebStopped()?(this.activeRecording.startRecording(!1),PromisePolyfill.resolve(null)):this.recordingRegistry.getActiveRecording().then((function(e){return e&&!this.stopRecordingInProgress?this.startRecording({activeSerializedRecording:e}):t?this.startRecording({shouldStopBatcher:!1}):(logger$1.log("No resumable recording found."),null)}).bind(this))};MixpanelRecorder.prototype.resetRecording=function(){this.stopRecording(),this.startRecording({shouldStopBatcher:!0})};MixpanelRecorder.prototype.getActiveReplayId=function(){return this.activeRecording&&!this.activeRecording.isRrwebStopped()?this.activeRecording.replayId:null};Object.defineProperty(MixpanelRecorder.prototype,"replayId",{get:function(){return this.getActiveReplayId()}});win.__mp_recorder=MixpanelRecorder;var DEFAULT_RAGE_CLICK_THRESHOLD_PX=30,DEFAULT_RAGE_CLICK_TIMEOUT_MS=1e3,DEFAULT_RAGE_CLICK_CLICK_COUNT=4,DEFAULT_RAGE_CLICK_INTERACTIVE_ELEMENTS_ONLY=!1;function RageClickTracker(){this.clicks=[]}RageClickTracker.prototype.isRageClick=function(t,e){e=e||{};var s=e.threshold_px||DEFAULT_RAGE_CLICK_THRESHOLD_PX,r=e.timeout_ms||DEFAULT_RAGE_CLICK_TIMEOUT_MS,a=e.click_count||DEFAULT_RAGE_CLICK_CLICK_COUNT,o=e.interactive_elements_only||DEFAULT_RAGE_CLICK_INTERACTIVE_ELEMENTS_ONLY;if(o){var l=getClickEventTargetElement(t);if(!l||isDefinitelyNonInteractive(l))return!1}var c=Date.now(),u=t.pageX,f=t.pageY,d=this.clicks[this.clicks.length-1];if(d&&c-d.timestamp<r&&Math.sqrt(Math.pow(u-d.x,2)+Math.pow(f-d.y,2))<s){if(this.clicks.push({x:u,y:f,timestamp:c}),this.clicks.length>=a)return this.clicks=[],!0}else this.clicks=[{x:u,y:f,timestamp:c}];return!1};function ShadowDOMObserver(t,e){this.changeCallback=t||function(){},this.observerConfig=e,this.observedShadowRoots=null,this.shadowObservers=[]}ShadowDOMObserver.prototype.getEventTarget=function(t){if(this.observedShadowRoots)return getClickEventTargetElement(t)};ShadowDOMObserver.prototype.observeFromEvent=function(t){if(this.observedShadowRoots)for(var e=getClickEventComposedPath(t),s=0;s<e.length;s++){var r=e[s];r&&r.shadowRoot&&this.observeShadowRoot(r.shadowRoot)}};ShadowDOMObserver.prototype.observeShadowRoot=function(t){if(!(!this.observedShadowRoots||this.observedShadowRoots.has(t))){var e=this;try{this.observedShadowRoots.add(t);var s=new window.MutationObserver(function(){e.changeCallback()});s.observe(t,this.observerConfig),this.shadowObservers.push(s)}catch(r){logger$3.critical("Error while observing shadow root",r)}}};ShadowDOMObserver.prototype.start=function(){if(!this.observedShadowRoots){if(!weakSetSupported()){logger$3.critical("Shadow DOM observation unavailable: WeakSet not supported");return}this.observedShadowRoots=new WeakSet}};ShadowDOMObserver.prototype.stop=function(){if(this.observedShadowRoots){for(var t=0;t<this.shadowObservers.length;t++)try{this.shadowObservers[t].disconnect()}catch(e){logger$3.critical("Error while disconnecting shadow DOM observer",e)}this.shadowObservers=[],this.observedShadowRoots=null}};var DEFAULT_DEAD_CLICK_TIMEOUT_MS=500,INTERACTION_EVENTS=[EV_CHANGE,EV_INPUT,EV_SUBMIT,EV_SELECT,EV_TOGGLE],LAYOUT_EVENTS=[EV_SCROLLEND],NAVIGATION_EVENTS=[EV_HASHCHANGE],MUTATION_OBSERVER_CONFIG={characterData:!0,childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class","hidden","checked","selected","value","display","visibility"]};function DeadClickTracker(t){this.eventListeners=[],this.mutationObserver=null,this.shadowDOMObserver=null,this.isTracking=!1,this.lastChangeEventTimestamp=0,this.pendingClicks=[],this.onDeadClickCallback=t,this.processingActive=!1,this.processingTimeout=null}DeadClickTracker.prototype.addClick=function(t){var e=this.shadowDOMObserver&&this.shadowDOMObserver.getEventTarget(t);return e||(e=t.target||t.srcElement),!e||isDefinitelyNonInteractive(e)?!1:(this.shadowDOMObserver&&this.shadowDOMObserver.observeFromEvent(t),this.pendingClicks.push({element:e,event:t,timestamp:Date.now()}),!0)};DeadClickTracker.prototype.trackClick=function(t,e){if(!this.isTracking)return!1;var s=this.addClick(t);return s&&this.triggerProcessing(e),s};DeadClickTracker.prototype.getDeadClicks=function(t){if(this.pendingClicks.length===0)return[];var e=t.timeout_ms,s=Date.now(),r=this.pendingClicks.slice();this.pendingClicks=[];for(var a=[],o=0;o<r.length;o++){var l=r[o];s-l.timestamp>=e?this.hasChangesAfter(l.timestamp)||a.push(l):this.pendingClicks.push(l)}return a};DeadClickTracker.prototype.hasChangesAfter=function(t){return this.lastChangeEventTimestamp>=t-100};DeadClickTracker.prototype.recordChangeEvent=function(){this.lastChangeEventTimestamp=Date.now()};DeadClickTracker.prototype.triggerProcessing=function(t){this.processingActive||(this.processingActive=!0,this.processRecursively(t))};DeadClickTracker.prototype.processRecursively=function(t){if(!this.isTracking||!this.onDeadClickCallback){this.processingActive=!1;return}var e=t.timeout_ms,s=this;this.processingTimeout=setTimeout(function(){if(s.processingActive){for(var r=s.getDeadClicks(t),a=0;a<r.length;a++)s.onDeadClickCallback(r[a].event);s.pendingClicks.length>0?s.processRecursively(t):s.processingActive=!1}},e)};DeadClickTracker.prototype.startTracking=function(){if(!this.isTracking){this.isTracking=!0;var t=this;INTERACTION_EVENTS.forEach(function(s){var r=function(){t.recordChangeEvent()};document.addEventListener(s,r,{capture:!0,passive:!0}),t.eventListeners.push({target:document,event:s,handler:r,options:{capture:!0,passive:!0}})}),NAVIGATION_EVENTS.forEach(function(s){var r=function(){t.recordChangeEvent()};window.addEventListener(s,r),t.eventListeners.push({target:window,event:s,handler:r})}),LAYOUT_EVENTS.forEach(function(s){var r=function(){t.recordChangeEvent()};window.addEventListener(s,r,{passive:!0}),t.eventListeners.push({target:window,event:s,handler:r,options:{passive:!0}})});var e=function(){t.recordChangeEvent()};if(document.addEventListener("selectionchange",e),t.eventListeners.push({target:document,event:"selectionchange",handler:e}),window.MutationObserver)try{this.mutationObserver=new window.MutationObserver(function(){t.recordChangeEvent()}),this.mutationObserver.observe(document.body||document.documentElement,MUTATION_OBSERVER_CONFIG)}catch(s){logger$3.critical("Error while setting up mutation observer",s)}if(window.customElements)try{this.shadowDOMObserver=new ShadowDOMObserver(function(){t.recordChangeEvent()},MUTATION_OBSERVER_CONFIG),this.shadowDOMObserver.start()}catch(s){logger$3.critical("Error while setting up shadow DOM observer",s),this.shadowDOMObserver=null}}};DeadClickTracker.prototype.stopTracking=function(){if(this.isTracking){this.isTracking=!1,this.pendingClicks=[],this.lastChangeEventTimestamp=0,this.processingActive=!1,this.processingTimeout&&(clearTimeout(this.processingTimeout),this.processingTimeout=null);for(var t=0;t<this.eventListeners.length;t++){var e=this.eventListeners[t];try{e.target.removeEventListener(e.event,e.handler,e.options)}catch(s){logger$3.critical("Error while removing event listener",s)}}if(this.eventListeners=[],this.mutationObserver){try{this.mutationObserver.disconnect()}catch(s){logger$3.critical("Error while disconnecting mutation observer",s)}this.mutationObserver=null}if(this.shadowDOMObserver){try{this.shadowDOMObserver.stop()}catch(s){logger$3.critical("Error while stopping shadow DOM observer",s)}this.shadowDOMObserver=null}}};var AUTOCAPTURE_CONFIG_KEY="autocapture",LEGACY_PAGEVIEW_CONFIG_KEY="track_pageview",PAGEVIEW_OPTION_FULL_URL="full-url",PAGEVIEW_OPTION_URL_WITH_PATH_AND_QUERY_STRING="url-with-path-and-query-string",PAGEVIEW_OPTION_URL_WITH_PATH="url-with-path",CONFIG_ALLOW_ELEMENT_CALLBACK="allow_element_callback",CONFIG_ALLOW_SELECTORS="allow_selectors",CONFIG_ALLOW_URL_REGEXES="allow_url_regexes",CONFIG_BLOCK_ATTRS="block_attrs",CONFIG_BLOCK_ELEMENT_CALLBACK="block_element_callback",CONFIG_BLOCK_SELECTORS="block_selectors",CONFIG_BLOCK_URL_REGEXES="block_url_regexes",CONFIG_CAPTURE_EXTRA_ATTRS="capture_extra_attrs",CONFIG_CAPTURE_TEXT_CONTENT="capture_text_content",CONFIG_SCROLL_CAPTURE_ALL="scroll_capture_all",CONFIG_SCROLL_CHECKPOINTS="scroll_depth_percent_checkpoints",CONFIG_TRACK_CLICK="click",CONFIG_TRACK_DEAD_CLICK="dead_click",CONFIG_TRACK_INPUT="input",CONFIG_TRACK_PAGEVIEW="pageview",CONFIG_TRACK_RAGE_CLICK="rage_click",CONFIG_TRACK_SCROLL="scroll",CONFIG_TRACK_PAGE_LEAVE="page_leave",CONFIG_TRACK_SUBMIT="submit",CONFIG_DEFAULTS$1={};CONFIG_DEFAULTS$1[CONFIG_ALLOW_SELECTORS]=[];CONFIG_DEFAULTS$1[CONFIG_ALLOW_URL_REGEXES]=[];CONFIG_DEFAULTS$1[CONFIG_BLOCK_ATTRS]=[];CONFIG_DEFAULTS$1[CONFIG_BLOCK_ELEMENT_CALLBACK]=null;CONFIG_DEFAULTS$1[CONFIG_BLOCK_SELECTORS]=[];CONFIG_DEFAULTS$1[CONFIG_BLOCK_URL_REGEXES]=[];CONFIG_DEFAULTS$1[CONFIG_CAPTURE_EXTRA_ATTRS]=[];CONFIG_DEFAULTS$1[CONFIG_CAPTURE_TEXT_CONTENT]=!1;CONFIG_DEFAULTS$1[CONFIG_SCROLL_CAPTURE_ALL]=!1;CONFIG_DEFAULTS$1[CONFIG_SCROLL_CHECKPOINTS]=[25,50,75,100];CONFIG_DEFAULTS$1[CONFIG_TRACK_CLICK]=!0;CONFIG_DEFAULTS$1[CONFIG_TRACK_DEAD_CLICK]=!0;CONFIG_DEFAULTS$1[CONFIG_TRACK_INPUT]=!0;CONFIG_DEFAULTS$1[CONFIG_TRACK_PAGEVIEW]=PAGEVIEW_OPTION_FULL_URL;CONFIG_DEFAULTS$1[CONFIG_TRACK_RAGE_CLICK]=!0;CONFIG_DEFAULTS$1[CONFIG_TRACK_SCROLL]=!0;CONFIG_DEFAULTS$1[CONFIG_TRACK_PAGE_LEAVE]=!1;CONFIG_DEFAULTS$1[CONFIG_TRACK_SUBMIT]=!0;var DEFAULT_PROPS={$mp_autocapture:!0},MP_EV_CLICK="$mp_click",MP_EV_DEAD_CLICK="$mp_dead_click",MP_EV_INPUT="$mp_input_change",MP_EV_RAGE_CLICK="$mp_rage_click",MP_EV_SCROLL="$mp_scroll",MP_EV_SUBMIT="$mp_submit",MP_EV_PAGE_LEAVE="$mp_page_leave",Autocapture=function(t){this.mp=t,this.maxScrollViewDepth=0,this.hasTrackedScrollSession=!1,this.previousScrollHeight=0};Autocapture.prototype.init=function(){if(!minDOMApisSupported()){logger$3.critical("Autocapture unavailable: missing required DOM APIs");return}this.initPageListeners(),this.initPageviewTracking(),this.initClickTracking(),this.initDeadClickTracking(),this.initInputTracking(),this.initScrollTracking(),this.initSubmitTracking(),this.initRageClickTracking(),this.initPageLeaveTracking()};Autocapture.prototype.getFullConfig=function(){var t=this.mp.get_config(AUTOCAPTURE_CONFIG_KEY);return t?_.isObject(t)?_.extend({},CONFIG_DEFAULTS$1,t):CONFIG_DEFAULTS$1:{}};Autocapture.prototype.getConfig=function(t){return this.getFullConfig()[t]};Autocapture.prototype.currentUrlBlocked=function(){var t,e=_.info.currentUrl(),s=this.getConfig(CONFIG_ALLOW_URL_REGEXES)||[];if(s.length){var r=!1;for(t=0;t<s.length;t++){var a=s[t];try{if(e.match(a)){r=!0;break}}catch(l){return logger$3.critical("Error while checking block URL regex: "+a,l),!0}}if(!r)return!0}var o=this.getConfig(CONFIG_BLOCK_URL_REGEXES)||[];if(!o||!o.length)return!1;for(t=0;t<o.length;t++)try{if(e.match(o[t]))return!0}catch(l){return logger$3.critical("Error while checking block URL regex: "+o[t],l),!0}return!1};Autocapture.prototype.pageviewTrackingConfig=function(){return this.mp.get_config(AUTOCAPTURE_CONFIG_KEY)?this.getConfig(CONFIG_TRACK_PAGEVIEW):this.mp.get_config(LEGACY_PAGEVIEW_CONFIG_KEY)};Autocapture.prototype.trackDomEvent=function(t,e){if(!this.currentUrlBlocked()){var s=this.mp.is_recording_heatmap_data()&&(e===MP_EV_CLICK&&!this.getConfig(CONFIG_TRACK_CLICK)||e===MP_EV_RAGE_CLICK&&!this._getClickTrackingConfig(CONFIG_TRACK_RAGE_CLICK)||e===MP_EV_DEAD_CLICK&&!this._getClickTrackingConfig(CONFIG_TRACK_DEAD_CLICK)),r=getPropsForDOMEvent(t,{allowElementCallback:this.getConfig(CONFIG_ALLOW_ELEMENT_CALLBACK),allowSelectors:this.getConfig(CONFIG_ALLOW_SELECTORS),blockAttrs:this.getConfig(CONFIG_BLOCK_ATTRS),blockElementCallback:this.getConfig(CONFIG_BLOCK_ELEMENT_CALLBACK),blockSelectors:this.getConfig(CONFIG_BLOCK_SELECTORS),captureExtraAttrs:this.getConfig(CONFIG_CAPTURE_EXTRA_ATTRS),captureTextContent:this.getConfig(CONFIG_CAPTURE_TEXT_CONTENT),capturedForHeatMap:s});r&&(_.extend(r,DEFAULT_PROPS),this.mp.track(e,r))}};Autocapture.prototype.initPageListeners=function(){if(win.removeEventListener(EV_POPSTATE,this.listenerPopstate),win.removeEventListener(EV_HASHCHANGE,this.listenerHashchange),!(!this.pageviewTrackingConfig()&&!this.getConfig(CONFIG_TRACK_PAGE_LEAVE)&&!this.mp.get_config("record_heatmap_data"))){this.listenerPopstate=function(){win.dispatchEvent(new Event(EV_MP_LOCATION_CHANGE))},this.listenerHashchange=function(){win.dispatchEvent(new Event(EV_MP_LOCATION_CHANGE))},win.addEventListener(EV_POPSTATE,this.listenerPopstate),win.addEventListener(EV_HASHCHANGE,this.listenerHashchange);var t=win.history.pushState;typeof t=="function"&&(win.history.pushState=function(s,r,a){t.call(win.history,s,r,a),win.dispatchEvent(new Event(EV_MP_LOCATION_CHANGE))});var e=win.history.replaceState;typeof e=="function"&&(win.history.replaceState=function(s,r,a){e.call(win.history,s,r,a),win.dispatchEvent(new Event(EV_MP_LOCATION_CHANGE))})}};Autocapture.prototype._getClickTrackingConfig=function(t){var e=this.getConfig(t);return e?e===!0?{}:typeof e=="object"?e:{}:null};Autocapture.prototype._trackPageLeave=function(t,e,s){if(!this.hasTrackedScrollSession&&!(!this.getConfig(CONFIG_TRACK_PAGE_LEAVE)&&!this.mp.is_recording_heatmap_data())){this.hasTrackedScrollSession=!0;var r=Math.max(document$1.documentElement.clientHeight,win.innerHeight||0),a=Math.round(Math.max(this.maxScrollViewDepth-r,0)/(s-r)*100),o=Math.round(r/s*100);s<=r&&(a=100,o=100);var l=_.extend({$max_scroll_view_depth:this.maxScrollViewDepth,$max_scroll_percentage:a,$fold_line_percentage:o,$scroll_height:s,$event_type:t.type,$current_url:e||_.info.currentUrl(),$viewportHeight:r,$viewportWidth:Math.max(document$1.documentElement.clientWidth,win.innerWidth||0),$captured_for_heatmap:this.mp.is_recording_heatmap_data()},DEFAULT_PROPS);this.mp.track(MP_EV_PAGE_LEAVE,l,{transport:"sendBeacon"})}};Autocapture.prototype._initScrollDepthTracking=function(){if(win.removeEventListener(EV_SCROLL,this.listenerScrollDepth),win.removeEventListener(EV_SCROLLEND,this.listenerScrollDepth),!!this.mp.get_config("record_heatmap_data")){logger$3.log("Initializing scroll depth tracking"),this.maxScrollViewDepth=Math.max(document$1.documentElement.clientHeight,win.innerHeight||0);var t=(function(){if(!this.currentUrlBlocked()){var s=Math.max(document$1.documentElement.clientHeight,win.innerHeight||0)+win.scrollY;s>this.maxScrollViewDepth&&(this.maxScrollViewDepth=s),this.previousScrollHeight=document$1.body.scrollHeight}}).bind(this),e=getPolyfillScrollEndFunction(t);this.listenerScrollDepth=e.listener,win.addEventListener(e.eventType,this.listenerScrollDepth)}};Autocapture.prototype.initClickTracking=function(){win.removeEventListener(EV_CLICK,this.listenerClick),!(!this.getConfig(CONFIG_TRACK_CLICK)&&!this.mp.get_config("record_heatmap_data"))&&(logger$3.log("Initializing click tracking"),this.listenerClick=(function(t){!this.getConfig(CONFIG_TRACK_CLICK)&&!this.mp.is_recording_heatmap_data()||this.trackDomEvent(t,MP_EV_CLICK)}).bind(this),win.addEventListener(EV_CLICK,this.listenerClick))};Autocapture.prototype.initDeadClickTracking=function(){var t=this._getClickTrackingConfig(CONFIG_TRACK_DEAD_CLICK);if(!t&&!this.mp.get_config("record_heatmap_data")){this.stopDeadClickTracking();return}logger$3.log("Initializing dead click tracking"),this._deadClickTracker||(this._deadClickTracker=new DeadClickTracker((function(e){this.trackDomEvent(e,MP_EV_DEAD_CLICK)}).bind(this)),this._deadClickTracker.startTracking()),this.listenerDeadClick||(this.listenerDeadClick=(function(e){var s=this._getClickTrackingConfig(CONFIG_TRACK_DEAD_CLICK);if(!(!s&&!this.mp.is_recording_heatmap_data())&&!this.currentUrlBlocked()){var r=s||{};r.timeout_ms||(r.timeout_ms=DEFAULT_DEAD_CLICK_TIMEOUT_MS),this._deadClickTracker.trackClick(e,r)}}).bind(this),win.addEventListener(EV_CLICK,this.listenerDeadClick))};Autocapture.prototype.initInputTracking=function(){win.removeEventListener(EV_CHANGE,this.listenerChange),this.getConfig(CONFIG_TRACK_INPUT)&&(logger$3.log("Initializing input tracking"),this.listenerChange=(function(t){this.getConfig(CONFIG_TRACK_INPUT)&&this.trackDomEvent(t,MP_EV_INPUT)}).bind(this),win.addEventListener(EV_CHANGE,this.listenerChange))};Autocapture.prototype.initPageviewTracking=function(){if(win.removeEventListener(EV_MP_LOCATION_CHANGE,this.listenerLocationchange),!!this.pageviewTrackingConfig()){logger$3.log("Initializing pageview tracking");var t="",e=!1;this.currentUrlBlocked()||(e=this.mp.track_pageview(DEFAULT_PROPS)),e&&(t=_.info.currentUrl()),this.listenerLocationchange=safewrap((function(){if(!this.currentUrlBlocked()){var s=_.info.currentUrl(),r=!1,a=s.split("#")[0].split("?")[0]!==t.split("#")[0].split("?")[0],o=this.pageviewTrackingConfig();if(o===PAGEVIEW_OPTION_FULL_URL?r=s!==t:o===PAGEVIEW_OPTION_URL_WITH_PATH_AND_QUERY_STRING?r=s.split("#")[0]!==t.split("#")[0]:o===PAGEVIEW_OPTION_URL_WITH_PATH&&(r=a),r){var l=this.mp.track_pageview(DEFAULT_PROPS);l&&(t=s),a&&(this.lastScrollCheckpoint=0,logger$3.log("Path change: re-initializing scroll depth checkpoints"))}}}).bind(this)),win.addEventListener(EV_MP_LOCATION_CHANGE,this.listenerLocationchange)}};Autocapture.prototype.initRageClickTracking=function(){win.removeEventListener(EV_CLICK,this.listenerRageClick);var t=this._getClickTrackingConfig(CONFIG_TRACK_RAGE_CLICK);!t&&!this.mp.get_config("record_heatmap_data")||(logger$3.log("Initializing rage click tracking"),this._rageClickTracker||(this._rageClickTracker=new RageClickTracker),this.listenerRageClick=(function(e){var s=this._getClickTrackingConfig(CONFIG_TRACK_RAGE_CLICK);!s&&!this.mp.is_recording_heatmap_data()||this.currentUrlBlocked()||this._rageClickTracker.isRageClick(e,s)&&this.trackDomEvent(e,MP_EV_RAGE_CLICK)}).bind(this),win.addEventListener(EV_CLICK,this.listenerRageClick))};Autocapture.prototype.initScrollTracking=function(){if(win.removeEventListener(EV_SCROLLEND,this.listenerScroll),win.removeEventListener(EV_SCROLL,this.listenerScroll),!!this.getConfig(CONFIG_TRACK_SCROLL)){logger$3.log("Initializing scroll tracking"),this.lastScrollCheckpoint=0;var t=(function(){if(this.getConfig(CONFIG_TRACK_SCROLL)&&!this.currentUrlBlocked()){var s=this.getConfig(CONFIG_SCROLL_CAPTURE_ALL),r=(this.getConfig(CONFIG_SCROLL_CHECKPOINTS)||[]).slice().sort(function(d,p){return d-p}),a=win.scrollY,o=_.extend({$scroll_top:a},DEFAULT_PROPS);try{var l=document$1.body.scrollHeight,c=Math.round(a/(l-win.innerHeight)*100);if(o.$scroll_height=l,o.$scroll_percentage=c,c>this.lastScrollCheckpoint)for(var u=0;u<r.length;u++){var f=r[u];c>=f&&this.lastScrollCheckpoint<f&&(o.$scroll_checkpoint=f,this.lastScrollCheckpoint=f,s=!0)}}catch(d){logger$3.critical("Error while calculating scroll percentage",d)}s&&this.mp.track(MP_EV_SCROLL,o)}}).bind(this),e=getPolyfillScrollEndFunction(t);this.listenerScroll=e.listener,win.addEventListener(e.eventType,this.listenerScroll)}};Autocapture.prototype.initSubmitTracking=function(){win.removeEventListener(EV_SUBMIT,this.listenerSubmit),this.getConfig(CONFIG_TRACK_SUBMIT)&&(logger$3.log("Initializing submit tracking"),this.listenerSubmit=(function(t){this.getConfig(CONFIG_TRACK_SUBMIT)&&this.trackDomEvent(t,MP_EV_SUBMIT)}).bind(this),win.addEventListener(EV_SUBMIT,this.listenerSubmit))};Autocapture.prototype.initPageLeaveTracking=function(){if(document$1.removeEventListener(EV_VISIBILITYCHANGE,this.listenerPageLeaveVisibilitychange),win.removeEventListener(EV_MP_LOCATION_CHANGE,this.listenerPageLeaveLocationchange),win.removeEventListener(EV_LOAD,this.listenerPageLoad),!(!this.getConfig(CONFIG_TRACK_PAGE_LEAVE)&&!this.mp.get_config("record_heatmap_data"))){logger$3.log("Initializing page visibility tracking."),this._initScrollDepthTracking();var t=_.info.currentUrl();this.listenerPageLoad=(function(){this.previousScrollHeight=document$1.body.scrollHeight}).bind(this),win.addEventListener(EV_LOAD,this.listenerPageLoad),this.listenerPageLeaveLocationchange=safewrap((function(e){if(!this.currentUrlBlocked()){var s=_.info.currentUrl(),r=s!==t;r&&(this._trackPageLeave(e,t,this.previousScrollHeight),t=s,this.maxScrollViewDepth=Math.max(document$1.documentElement.clientHeight,win.innerHeight||0),this.previousScrollHeight=document$1.body.scrollHeight,this.hasTrackedScrollSession=!1)}}).bind(this)),win.addEventListener(EV_MP_LOCATION_CHANGE,this.listenerPageLeaveLocationchange),this.listenerPageLeaveVisibilitychange=(function(e){document$1.hidden&&this._trackPageLeave(e,t,this.previousScrollHeight)}).bind(this),document$1.addEventListener(EV_VISIBILITYCHANGE,this.listenerPageLeaveVisibilitychange)}};Autocapture.prototype.stopDeadClickTracking=function(){this.listenerDeadClick&&(win.removeEventListener(EV_CLICK,this.listenerDeadClick),this.listenerDeadClick=null),this._deadClickTracker&&(this._deadClickTracker.stopTracking(),this._deadClickTracker=null)};safewrapClass(Autocapture);var logger=console_with_prefix("flags"),FLAGS_CONFIG_KEY="flags",CONFIG_CONTEXT="context",CONFIG_DEFAULTS={};CONFIG_DEFAULTS[CONFIG_CONTEXT]={};var FeatureFlagManager=function(t){this.fetch=win.fetch,this.getFullApiRoute=t.getFullApiRoute,this.getMpConfig=t.getConfigFunc,this.setMpConfig=t.setConfigFunc,this.getMpProperty=t.getPropertyFunc,this.track=t.trackingFunc};FeatureFlagManager.prototype.init=function(){if(!this.minApisSupported()){logger.critical("Feature Flags unavailable: missing minimum required APIs");return}this.flags=null,this.fetchFlags(),this.trackedFeatures=new Set};FeatureFlagManager.prototype.getFullConfig=function(){var t=this.getMpConfig(FLAGS_CONFIG_KEY);return t?_.isObject(t)?_.extend({},CONFIG_DEFAULTS,t):CONFIG_DEFAULTS:{}};FeatureFlagManager.prototype.getConfig=function(t){return this.getFullConfig()[t]};FeatureFlagManager.prototype.isSystemEnabled=function(){return!!this.getMpConfig(FLAGS_CONFIG_KEY)};FeatureFlagManager.prototype.updateContext=function(t,e){if(!this.isSystemEnabled())return logger.critical("Feature Flags not enabled, cannot update context"),Promise.resolve();var s=this.getMpConfig(FLAGS_CONFIG_KEY);_.isObject(s)||(s={});var r=e&&e.replace?{}:this.getConfig(CONFIG_CONTEXT);return s[CONFIG_CONTEXT]=_.extend({},r,t),this.setMpConfig(FLAGS_CONFIG_KEY,s),this.fetchFlags()};FeatureFlagManager.prototype.areFlagsReady=function(){return this.isSystemEnabled()||logger.error("Feature Flags not enabled"),!!this.flags};FeatureFlagManager.prototype.fetchFlags=function(){if(!this.isSystemEnabled())return Promise.resolve();var t=this.getMpProperty("distinct_id"),e=this.getMpProperty("$device_id"),s=generateTraceparent();logger.log("Fetching flags for distinct ID: "+t);var r=_.extend({distinct_id:t,device_id:e},this.getConfig(CONFIG_CONTEXT)),a=new URLSearchParams;a.set("context",JSON.stringify(r)),a.set("token",this.getMpConfig("token")),a.set("mp_lib","web"),a.set("$lib_version",Config.LIB_VERSION);var o=this.getFullApiRoute()+"?"+a.toString();return this._fetchInProgressStartTime=Date.now(),this.fetchPromise=this.fetch.call(win,o,{method:"GET",headers:{Authorization:"Basic "+btoa(this.getMpConfig("token")+":"),traceparent:s}}).then((function(l){return this.markFetchComplete(),l.json().then((function(c){var u=c.flags;if(!u)throw new Error("No flags in API response");var f=new Map;_.each(u,function(d,p){f.set(p,{key:d.variant_key,value:d.variant_value,experiment_id:d.experiment_id,is_experiment_active:d.is_experiment_active,is_qa_tester:d.is_qa_tester})}),this.flags=f,this._traceparent=s}).bind(this)).catch((function(c){this.markFetchComplete(),logger.error(c)}).bind(this))}).bind(this)).catch((function(l){this.markFetchComplete(),logger.error(l)}).bind(this)),this.fetchPromise};FeatureFlagManager.prototype.markFetchComplete=function(){if(!this._fetchInProgressStartTime){logger.error("Fetch in progress started time not set, cannot mark fetch complete");return}this._fetchStartTime=this._fetchInProgressStartTime,this._fetchCompleteTime=Date.now(),this._fetchLatency=this._fetchCompleteTime-this._fetchStartTime,this._fetchInProgressStartTime=null};FeatureFlagManager.prototype.getVariant=function(t,e){return this.fetchPromise?this.fetchPromise.then((function(){return this.getVariantSync(t,e)}).bind(this)).catch(function(s){return logger.error(s),e}):new Promise(function(s){logger.critical("Feature Flags not initialized"),s(e)})};FeatureFlagManager.prototype.getVariantSync=function(t,e){if(!this.areFlagsReady())return logger.log("Flags not loaded yet"),e;var s=this.flags.get(t);return s?(this.trackFeatureCheck(t,s),s):(logger.log('No flag found: "'+t+'"'),e)};FeatureFlagManager.prototype.getVariantValue=function(t,e){return this.getVariant(t,{value:e}).then(function(s){return s.value}).catch(function(s){return logger.error(s),e})};FeatureFlagManager.prototype.getFeatureData=function(t,e){return logger.critical("mixpanel.flags.get_feature_data() is deprecated and will be removed in a future release. Use mixpanel.flags.get_variant_value() instead."),this.getVariantValue(t,e)};FeatureFlagManager.prototype.getVariantValueSync=function(t,e){return this.getVariantSync(t,{value:e}).value};FeatureFlagManager.prototype.isEnabled=function(t,e){return this.getVariantValue(t).then((function(){return this.isEnabledSync(t,e)}).bind(this)).catch(function(s){return logger.error(s),e})};FeatureFlagManager.prototype.isEnabledSync=function(t,e){e=e||!1;var s=this.getVariantValueSync(t,e);return s!==!0&&s!==!1&&(logger.error('Feature flag "'+t+'" value: '+s+" is not a boolean; returning fallback value: "+e),s=e),s};FeatureFlagManager.prototype.trackFeatureCheck=function(t,e){if(!this.trackedFeatures.has(t)){this.trackedFeatures.add(t);var s={"Experiment name":t,"Variant name":e.key,$experiment_type:"feature_flag","Variant fetch start time":new Date(this._fetchStartTime).toISOString(),"Variant fetch complete time":new Date(this._fetchCompleteTime).toISOString(),"Variant fetch latency (ms)":this._fetchLatency,"Variant fetch traceparent":this._traceparent};e.experiment_id!=="undefined"&&(s.$experiment_id=e.experiment_id),e.is_experiment_active!=="undefined"&&(s.$is_experiment_active=e.is_experiment_active),e.is_qa_tester!=="undefined"&&(s.$is_qa_tester=e.is_qa_tester),this.track("$experiment_started",s)}};FeatureFlagManager.prototype.minApisSupported=function(){return!!this.fetch&&typeof Promise<"u"&&typeof Map<"u"&&typeof Set<"u"};safewrapClass(FeatureFlagManager);FeatureFlagManager.prototype.are_flags_ready=FeatureFlagManager.prototype.areFlagsReady;FeatureFlagManager.prototype.get_variant=FeatureFlagManager.prototype.getVariant;FeatureFlagManager.prototype.get_variant_sync=FeatureFlagManager.prototype.getVariantSync;FeatureFlagManager.prototype.get_variant_value=FeatureFlagManager.prototype.getVariantValue;FeatureFlagManager.prototype.get_variant_value_sync=FeatureFlagManager.prototype.getVariantValueSync;FeatureFlagManager.prototype.is_enabled=FeatureFlagManager.prototype.isEnabled;FeatureFlagManager.prototype.is_enabled_sync=FeatureFlagManager.prototype.isEnabledSync;FeatureFlagManager.prototype.update_context=FeatureFlagManager.prototype.updateContext;FeatureFlagManager.prototype.get_feature_data=FeatureFlagManager.prototype.getFeatureData;var DomTracker=function(){};DomTracker.prototype.create_properties=function(){};DomTracker.prototype.event_handler=function(){};DomTracker.prototype.after_track_handler=function(){};DomTracker.prototype.init=function(t){return this.mp=t,this};DomTracker.prototype.track=function(t,e,s,r){var a=this,o=_.dom_query(t);if(o.length===0){console$1.error("The DOM query ("+t+") returned 0 elements");return}return _.each(o,function(l){_.register_event(l,this.override_event,function(c){var u={},f=a.create_properties(s,this),d=a.mp.get_config("track_links_timeout");a.event_handler(c,this,u),window.setTimeout(a.track_callback(r,f,u,!0),d),a.mp.track(e,f,a.track_callback(r,f,u))})},this),!0};DomTracker.prototype.track_callback=function(t,e,s,r){r=r||!1;var a=this;return function(){s.callback_fired||(s.callback_fired=!0,!(t&&t(r,e)===!1)&&a.after_track_handler(e,s,r))}};DomTracker.prototype.create_properties=function(t,e){var s;return typeof t=="function"?s=t(e):s=_.extend({},t),s};var LinkTracker=function(){this.override_event="click"};_.inherit(LinkTracker,DomTracker);LinkTracker.prototype.create_properties=function(t,e){var s=LinkTracker.superclass.create_properties.apply(this,arguments);return e.href&&(s.url=e.href),s};LinkTracker.prototype.event_handler=function(t,e,s){s.new_tab=t.which===2||t.metaKey||t.ctrlKey||e.target==="_blank",s.href=e.href,s.new_tab||t.preventDefault()};LinkTracker.prototype.after_track_handler=function(t,e){e.new_tab||setTimeout(function(){window.location=e.href},0)};var FormTracker=function(){this.override_event="submit"};_.inherit(FormTracker,DomTracker);FormTracker.prototype.event_handler=function(t,e,s){s.element=e,t.preventDefault()};FormTracker.prototype.after_track_handler=function(t,e){setTimeout(function(){e.element.submit()},0)};var SET_ACTION="$set",SET_ONCE_ACTION="$set_once",UNSET_ACTION="$unset",ADD_ACTION="$add",APPEND_ACTION="$append",UNION_ACTION="$union",REMOVE_ACTION="$remove",DELETE_ACTION="$delete",apiActions={set_action:function(t,e){var s={},r={};return _.isObject(t)?_.each(t,function(a,o){this._is_reserved_property(o)||(r[o]=a)},this):r[t]=e,s[SET_ACTION]=r,s},unset_action:function(t){var e={},s=[];return _.isArray(t)||(t=[t]),_.each(t,function(r){this._is_reserved_property(r)||s.push(r)},this),e[UNSET_ACTION]=s,e},set_once_action:function(t,e){var s={},r={};return _.isObject(t)?_.each(t,function(a,o){this._is_reserved_property(o)||(r[o]=a)},this):r[t]=e,s[SET_ONCE_ACTION]=r,s},union_action:function(t,e){var s={},r={};return _.isObject(t)?_.each(t,function(a,o){this._is_reserved_property(o)||(r[o]=_.isArray(a)?a:[a])},this):r[t]=_.isArray(e)?e:[e],s[UNION_ACTION]=r,s},append_action:function(t,e){var s={},r={};return _.isObject(t)?_.each(t,function(a,o){this._is_reserved_property(o)||(r[o]=a)},this):r[t]=e,s[APPEND_ACTION]=r,s},remove_action:function(t,e){var s={},r={};return _.isObject(t)?_.each(t,function(a,o){this._is_reserved_property(o)||(r[o]=a)},this):r[t]=e,s[REMOVE_ACTION]=r,s},delete_action:function(){var t={};return t[DELETE_ACTION]="",t}},MixpanelGroup=function(){};_.extend(MixpanelGroup.prototype,apiActions);MixpanelGroup.prototype._init=function(t,e,s){this._mixpanel=t,this._group_key=e,this._group_id=s};MixpanelGroup.prototype.set=addOptOutCheckMixpanelGroup(function(t,e,s){var r=this.set_action(t,e);return _.isObject(t)&&(s=e),this._send_request(r,s)});MixpanelGroup.prototype.set_once=addOptOutCheckMixpanelGroup(function(t,e,s){var r=this.set_once_action(t,e);return _.isObject(t)&&(s=e),this._send_request(r,s)});MixpanelGroup.prototype.unset=addOptOutCheckMixpanelGroup(function(t,e){var s=this.unset_action(t);return this._send_request(s,e)});MixpanelGroup.prototype.union=addOptOutCheckMixpanelGroup(function(t,e,s){_.isObject(t)&&(s=e);var r=this.union_action(t,e);return this._send_request(r,s)});MixpanelGroup.prototype.delete=addOptOutCheckMixpanelGroup(function(t){var e=this.delete_action();return this._send_request(e,t)});MixpanelGroup.prototype.remove=addOptOutCheckMixpanelGroup(function(t,e,s){var r=this.remove_action(t,e);return this._send_request(r,s)});MixpanelGroup.prototype._send_request=function(t,e){t.$group_key=this._group_key,t.$group_id=this._group_id,t.$token=this._get_config("token");var s=_.encodeDates(t);return this._mixpanel._track_or_batch({type:"groups",data:s,endpoint:this._mixpanel.get_api_host("groups")+"/"+this._get_config("api_routes").groups,batcher:this._mixpanel.request_batchers.groups},e)};MixpanelGroup.prototype._is_reserved_property=function(t){return t==="$group_key"||t==="$group_id"};MixpanelGroup.prototype._get_config=function(t){return this._mixpanel.get_config(t)};MixpanelGroup.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id};MixpanelGroup.prototype.remove=MixpanelGroup.prototype.remove;MixpanelGroup.prototype.set=MixpanelGroup.prototype.set;MixpanelGroup.prototype.set_once=MixpanelGroup.prototype.set_once;MixpanelGroup.prototype.union=MixpanelGroup.prototype.union;MixpanelGroup.prototype.unset=MixpanelGroup.prototype.unset;MixpanelGroup.prototype.toString=MixpanelGroup.prototype.toString;var MixpanelPeople=function(){};_.extend(MixpanelPeople.prototype,apiActions);MixpanelPeople.prototype._init=function(t){this._mixpanel=t};MixpanelPeople.prototype.set=addOptOutCheckMixpanelPeople(function(t,e,s){var r=this.set_action(t,e);return _.isObject(t)&&(s=e),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),r[SET_ACTION]=_.extend({},_.info.people_properties(),r[SET_ACTION]),this._send_request(r,s)});MixpanelPeople.prototype.set_once=addOptOutCheckMixpanelPeople(function(t,e,s){var r=this.set_once_action(t,e);return _.isObject(t)&&(s=e),this._send_request(r,s)});MixpanelPeople.prototype.unset=addOptOutCheckMixpanelPeople(function(t,e){var s=this.unset_action(t);return this._send_request(s,e)});MixpanelPeople.prototype.increment=addOptOutCheckMixpanelPeople(function(t,e,s){var r={},a={};return _.isObject(t)?(_.each(t,function(o,l){if(!this._is_reserved_property(l))if(isNaN(parseFloat(o))){console$1.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else a[l]=o},this),s=e):(_.isUndefined(e)&&(e=1),a[t]=e),r[ADD_ACTION]=a,this._send_request(r,s)});MixpanelPeople.prototype.append=addOptOutCheckMixpanelPeople(function(t,e,s){_.isObject(t)&&(s=e);var r=this.append_action(t,e);return this._send_request(r,s)});MixpanelPeople.prototype.remove=addOptOutCheckMixpanelPeople(function(t,e,s){_.isObject(t)&&(s=e);var r=this.remove_action(t,e);return this._send_request(r,s)});MixpanelPeople.prototype.union=addOptOutCheckMixpanelPeople(function(t,e,s){_.isObject(t)&&(s=e);var r=this.union_action(t,e);return this._send_request(r,s)});MixpanelPeople.prototype.track_charge=addOptOutCheckMixpanelPeople(function(){console$1.error("mixpanel.people.track_charge() is deprecated and no longer has any effect.")});MixpanelPeople.prototype.clear_charges=function(t){return this.set("$transactions",[],t)};MixpanelPeople.prototype.delete_user=function(){if(!this._identify_called()){console$1.error("mixpanel.people.delete_user() requires you to call identify() first");return}var t={$delete:this._mixpanel.get_distinct_id()};return this._send_request(t)};MixpanelPeople.prototype.toString=function(){return this._mixpanel.toString()+".people"};MixpanelPeople.prototype._send_request=function(t,e){t.$token=this._get_config("token"),t.$distinct_id=this._mixpanel.get_distinct_id();var s=this._mixpanel.get_property("$device_id"),r=this._mixpanel.get_property("$user_id"),a=this._mixpanel.get_property("$had_persisted_distinct_id");s&&(t.$device_id=s),r&&(t.$user_id=r),a&&(t.$had_persisted_distinct_id=a);var o=_.encodeDates(t);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:o,endpoint:this._mixpanel.get_api_host("people")+"/"+this._get_config("api_routes").engage,batcher:this._mixpanel.request_batchers.people},e):(this._enqueue(t),_.isUndefined(e)||(this._get_config("verbose")?e({status:-1,error:null}):e(-1)),_.truncate(o,255))};MixpanelPeople.prototype._get_config=function(t){return this._mixpanel.get_config(t)};MixpanelPeople.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0};MixpanelPeople.prototype._enqueue=function(t){SET_ACTION in t?this._mixpanel.persistence._add_to_people_queue(SET_ACTION,t):SET_ONCE_ACTION in t?this._mixpanel.persistence._add_to_people_queue(SET_ONCE_ACTION,t):UNSET_ACTION in t?this._mixpanel.persistence._add_to_people_queue(UNSET_ACTION,t):ADD_ACTION in t?this._mixpanel.persistence._add_to_people_queue(ADD_ACTION,t):APPEND_ACTION in t?this._mixpanel.persistence._add_to_people_queue(APPEND_ACTION,t):REMOVE_ACTION in t?this._mixpanel.persistence._add_to_people_queue(REMOVE_ACTION,t):UNION_ACTION in t?this._mixpanel.persistence._add_to_people_queue(UNION_ACTION,t):console$1.error("Invalid call to _enqueue():",t)};MixpanelPeople.prototype._flush_one_queue=function(t,e,s,r){var a=this,o=_.extend({},this._mixpanel.persistence.load_queue(t)),l=o;!_.isUndefined(o)&&_.isObject(o)&&!_.isEmptyObject(o)&&(a._mixpanel.persistence._pop_from_people_queue(t,o),a._mixpanel.persistence.save(),r&&(l=r(o)),e.call(a,l,function(c,u){c===0&&a._mixpanel.persistence._add_to_people_queue(t,o),_.isUndefined(s)||s(c,u)}))};MixpanelPeople.prototype._flush=function(t,e,s,r,a,o,l){var c=this;this._flush_one_queue(SET_ACTION,this.set,t),this._flush_one_queue(SET_ONCE_ACTION,this.set_once,r),this._flush_one_queue(UNSET_ACTION,this.unset,o,function(C){return _.keys(C)}),this._flush_one_queue(ADD_ACTION,this.increment,e),this._flush_one_queue(UNION_ACTION,this.union,a);var u=this._mixpanel.persistence.load_queue(APPEND_ACTION);if(!_.isUndefined(u)&&_.isArray(u)&&u.length)for(var f,d=function(C,j){C===0&&c._mixpanel.persistence._add_to_people_queue(APPEND_ACTION,f),_.isUndefined(s)||s(C,j)},p=u.length-1;p>=0;p--)u=this._mixpanel.persistence.load_queue(APPEND_ACTION),f=u.pop(),c._mixpanel.persistence.save(),_.isEmptyObject(f)||c.append(f,d);var m=this._mixpanel.persistence.load_queue(REMOVE_ACTION);if(!_.isUndefined(m)&&_.isArray(m)&&m.length)for(var y,b=function(C,j){C===0&&c._mixpanel.persistence._add_to_people_queue(REMOVE_ACTION,y),_.isUndefined(l)||l(C,j)},E=m.length-1;E>=0;E--)m=this._mixpanel.persistence.load_queue(REMOVE_ACTION),y=m.pop(),c._mixpanel.persistence.save(),_.isEmptyObject(y)||c.remove(y,b)};MixpanelPeople.prototype._is_reserved_property=function(t){return t==="$distinct_id"||t==="$token"||t==="$device_id"||t==="$user_id"||t==="$had_persisted_distinct_id"};MixpanelPeople.prototype.set=MixpanelPeople.prototype.set;MixpanelPeople.prototype.set_once=MixpanelPeople.prototype.set_once;MixpanelPeople.prototype.unset=MixpanelPeople.prototype.unset;MixpanelPeople.prototype.increment=MixpanelPeople.prototype.increment;MixpanelPeople.prototype.append=MixpanelPeople.prototype.append;MixpanelPeople.prototype.remove=MixpanelPeople.prototype.remove;MixpanelPeople.prototype.union=MixpanelPeople.prototype.union;MixpanelPeople.prototype.track_charge=MixpanelPeople.prototype.track_charge;MixpanelPeople.prototype.clear_charges=MixpanelPeople.prototype.clear_charges;MixpanelPeople.prototype.delete_user=MixpanelPeople.prototype.delete_user;MixpanelPeople.prototype.toString=MixpanelPeople.prototype.toString;var SET_QUEUE_KEY="__mps",SET_ONCE_QUEUE_KEY="__mpso",UNSET_QUEUE_KEY="__mpus",ADD_QUEUE_KEY="__mpa",APPEND_QUEUE_KEY="__mpap",REMOVE_QUEUE_KEY="__mpr",UNION_QUEUE_KEY="__mpu",PEOPLE_DISTINCT_ID_KEY="$people_distinct_id",ALIAS_ID_KEY="__alias",EVENT_TIMERS_KEY="__timers",RESERVED_PROPERTIES=[SET_QUEUE_KEY,SET_ONCE_QUEUE_KEY,UNSET_QUEUE_KEY,ADD_QUEUE_KEY,APPEND_QUEUE_KEY,REMOVE_QUEUE_KEY,UNION_QUEUE_KEY,PEOPLE_DISTINCT_ID_KEY,ALIAS_ID_KEY,EVENT_TIMERS_KEY],MixpanelPersistence=function(t){this.props={},this.campaign_params_saved=!1,t.persistence_name?this.name="mp_"+t.persistence_name:this.name="mp_"+t.token+"_mixpanel";var e=t.persistence;e!=="cookie"&&e!=="localStorage"&&(console$1.critical("Unknown persistence type "+e+"; falling back to cookie"),e=t.persistence="cookie"),e==="localStorage"&&_.localStorage.is_supported()?this.storage=_.localStorage:this.storage=_.cookie,this.load(),this.update_config(t),this.upgrade(),this.save()};MixpanelPersistence.prototype.properties=function(){var t={};return this.load(),_.each(this.props,function(e,s){_.include(RESERVED_PROPERTIES,s)||(t[s]=e)}),t};MixpanelPersistence.prototype.load=function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=_.extend({},t))}};MixpanelPersistence.prototype.upgrade=function(){var t,e;this.storage===_.localStorage?(t=_.cookie.parse(this.name),_.cookie.remove(this.name),_.cookie.remove(this.name,!0),t&&this.register_once(t)):this.storage===_.cookie&&(e=_.localStorage.parse(this.name),_.localStorage.remove(this.name),e&&this.register_once(e))};MixpanelPersistence.prototype.save=function(){this.disabled||this.storage.set(this.name,JSONStringify(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)};MixpanelPersistence.prototype.load_prop=function(t){return this.load(),this.props[t]};MixpanelPersistence.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)};MixpanelPersistence.prototype.clear=function(){this.remove(),this.props={}};MixpanelPersistence.prototype.register_once=function(t,e,s){return _.isObject(t)?(typeof e>"u"&&(e="None"),this.expire_days=typeof s>"u"?this.default_expiry:s,this.load(),_.each(t,function(r,a){(!this.props.hasOwnProperty(a)||this.props[a]===e)&&(this.props[a]=r)},this),this.save(),!0):!1};MixpanelPersistence.prototype.register=function(t,e){return _.isObject(t)?(this.expire_days=typeof e>"u"?this.default_expiry:e,this.load(),_.extend(this.props,t),this.save(),!0):!1};MixpanelPersistence.prototype.unregister=function(t){this.load(),t in this.props&&(delete this.props[t],this.save())};MixpanelPersistence.prototype.update_search_keyword=function(t){this.register(_.info.searchInfo(t))};MixpanelPersistence.prototype.update_referrer_info=function(t){this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:_.info.referringDomain(t)||"$direct"},"")};MixpanelPersistence.prototype.get_referrer_info=function(){return _.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};MixpanelPersistence.prototype.update_config=function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cookie_domain(t.cookie_domain),this.set_cross_site(t.cross_site_cookie),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie)};MixpanelPersistence.prototype.set_disabled=function(t){this.disabled=t,this.disabled?this.remove():this.save()};MixpanelPersistence.prototype.set_cookie_domain=function(t){t!==this.cookie_domain&&(this.remove(),this.cookie_domain=t,this.save())};MixpanelPersistence.prototype.set_cross_site=function(t){t!==this.cross_site&&(this.cross_site=t,this.remove(),this.save())};MixpanelPersistence.prototype.set_cross_subdomain=function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())};MixpanelPersistence.prototype.get_cross_subdomain=function(){return this.cross_subdomain};MixpanelPersistence.prototype.set_secure=function(t){t!==this.secure&&(this.secure=!!t,this.remove(),this.save())};MixpanelPersistence.prototype._add_to_people_queue=function(t,e){var s=this._get_queue_key(t),r=e[t],a=this._get_or_create_queue(SET_ACTION),o=this._get_or_create_queue(SET_ONCE_ACTION),l=this._get_or_create_queue(UNSET_ACTION),c=this._get_or_create_queue(ADD_ACTION),u=this._get_or_create_queue(UNION_ACTION),f=this._get_or_create_queue(REMOVE_ACTION,[]),d=this._get_or_create_queue(APPEND_ACTION,[]);s===SET_QUEUE_KEY?(_.extend(a,r),this._pop_from_people_queue(ADD_ACTION,r),this._pop_from_people_queue(UNION_ACTION,r),this._pop_from_people_queue(UNSET_ACTION,r)):s===SET_ONCE_QUEUE_KEY?(_.each(r,function(p,m){m in o||(o[m]=p)}),this._pop_from_people_queue(UNSET_ACTION,r)):s===UNSET_QUEUE_KEY?_.each(r,function(p){_.each([a,o,c,u],function(m){p in m&&delete m[p]}),_.each(d,function(m){p in m&&delete m[p]}),l[p]=!0}):s===ADD_QUEUE_KEY?(_.each(r,function(p,m){m in a?a[m]+=p:(m in c||(c[m]=0),c[m]+=p)},this),this._pop_from_people_queue(UNSET_ACTION,r)):s===UNION_QUEUE_KEY?(_.each(r,function(p,m){_.isArray(p)&&(m in u||(u[m]=[]),_.each(p,function(y){_.include(u[m],y)||u[m].push(y)}))}),this._pop_from_people_queue(UNSET_ACTION,r)):s===REMOVE_QUEUE_KEY?(f.push(r),this._pop_from_people_queue(APPEND_ACTION,r)):s===APPEND_QUEUE_KEY&&(d.push(r),this._pop_from_people_queue(UNSET_ACTION,r)),console$1.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),console$1.log(e),this.save()};MixpanelPersistence.prototype._pop_from_people_queue=function(t,e){var s=this.props[this._get_queue_key(t)];_.isUndefined(s)||_.each(e,function(r,a){t===APPEND_ACTION||t===REMOVE_ACTION?_.each(s,function(o){o[a]===r&&delete o[a]}):delete s[a]},this)};MixpanelPersistence.prototype.load_queue=function(t){return this.load_prop(this._get_queue_key(t))};MixpanelPersistence.prototype._get_queue_key=function(t){if(t===SET_ACTION)return SET_QUEUE_KEY;if(t===SET_ONCE_ACTION)return SET_ONCE_QUEUE_KEY;if(t===UNSET_ACTION)return UNSET_QUEUE_KEY;if(t===ADD_ACTION)return ADD_QUEUE_KEY;if(t===APPEND_ACTION)return APPEND_QUEUE_KEY;if(t===REMOVE_ACTION)return REMOVE_QUEUE_KEY;if(t===UNION_ACTION)return UNION_QUEUE_KEY;console$1.error("Invalid queue:",t)};MixpanelPersistence.prototype._get_or_create_queue=function(t,e){var s=this._get_queue_key(t);return e=_.isUndefined(e)?{}:e,this.props[s]||(this.props[s]=e)};MixpanelPersistence.prototype.set_event_timer=function(t,e){var s=this.load_prop(EVENT_TIMERS_KEY)||{};s[t]=e,this.props[EVENT_TIMERS_KEY]=s,this.save()};MixpanelPersistence.prototype.remove_event_timer=function(t){var e=this.load_prop(EVENT_TIMERS_KEY)||{},s=e[t];return _.isUndefined(s)||(delete this.props[EVENT_TIMERS_KEY][t],this.save()),s};var init_type,load_extra_bundle=function(t,e){throw new Error(t+" not available in this build.")},mixpanel_master,INIT_MODULE=0,INIT_SNIPPET=1,PRIMARY_INSTANCE_NAME="mixpanel",PAYLOAD_TYPE_BASE64="base64",PAYLOAD_TYPE_JSON="json",DEVICE_ID_PREFIX="$device:",SETTING_STRICT="strict",SETTING_FALLBACK="fallback",SETTING_DISABLED="disabled",USE_XHR=win.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,ENQUEUE_REQUESTS=!USE_XHR&&userAgent.indexOf("MSIE")===-1&&userAgent.indexOf("Mozilla")===-1,sendBeacon=null;navigator$1.sendBeacon&&(sendBeacon=function(){return navigator$1.sendBeacon.apply(navigator$1,arguments)});var DEFAULT_API_ROUTES={track:"track/",engage:"engage/",groups:"groups/",record:"record/",flags:"flags/",settings:"settings/"},DEFAULT_CONFIG={api_host:"https://api-js.mixpanel.com",api_hosts:{},api_routes:DEFAULT_API_ROUTES,api_extra_query_params:{},api_method:"POST",api_transport:"XHR",api_payload_format:PAYLOAD_TYPE_BASE64,app_host:"https://mixpanel.com",autocapture:!1,cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:NOOP_FUNC,flags:!1,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:NOOP_FUNC,mp_loader:null,track_marketing:!0,track_pageview:!1,skip_first_touch_marketing:!1,store_google:!0,stop_utm_persistence:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{},record_block_class:new RegExp("^(mp-block|fs-exclude|amp-block|rr-block|ph-no-capture)$"),record_block_selector:"img, video, audio",record_canvas:!1,record_collect_fonts:!1,record_console:!0,record_heatmap_data:!1,record_idle_timeout_ms:1800*1e3,record_mask_inputs:!0,record_max_ms:MAX_RECORDING_MS,record_min_ms:0,record_sessions_percent:0,recorder_src:"https://cdn.mxpnl.com/libs/mixpanel-recorder.min.js",remote_settings_mode:SETTING_DISABLED},DOM_LOADED=!1,MixpanelLib=function(){},create_mplib=function(t,e,s){var r,a=s===PRIMARY_INSTANCE_NAME?mixpanel_master:mixpanel_master[s];if(a&&init_type===INIT_MODULE)r=a;else{if(a&&!_.isArray(a)){console$1.error("You have already initialized "+s);return}r=new MixpanelLib}if(r._cached_groups={},r._init(t,e,s),r.people=new MixpanelPeople,r.people._init(r),!r.get_config("skip_first_touch_marketing")){var o=_.info.campaignParams(null),l={},c=!1;_.each(o,function(f,d){l["initial_"+d]=f,f&&(c=!0)}),c&&r.people.set_once(l)}Config.DEBUG=Config.DEBUG||r.get_config("debug");var u=init_type===INIT_MODULE?"module":"snippet";return win.dispatchEvent(new win.CustomEvent("$mp_sdk_to_extension_event",{detail:{instance:r,source:u,token:t,name:s,info:_.info}})),!_.isUndefined(a)&&_.isArray(a)&&(r._execute_array.call(r.people,a.people),r._execute_array(a)),r};MixpanelLib.prototype.init=function(t,e,s){if(_.isUndefined(s)){this.report_error("You must name your new library: init(token, config, name)");return}if(s===PRIMARY_INSTANCE_NAME){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var r=create_mplib(t,e,s);return mixpanel_master[s]=r,r._loaded(),r};MixpanelLib.prototype._init=function(t,e,s){e=e||{},this.__loaded=!0,this.config={};var r={};if(!("api_payload_format"in e)){var a=e.api_host||DEFAULT_CONFIG.api_host;a.match(/\.mixpanel\.com/)&&(r.api_payload_format=PAYLOAD_TYPE_JSON)}if(this.hooks={},this.set_config(_.extend({},DEFAULT_CONFIG,r,e,{name:s,token:t,callback_fn:(s===PRIMARY_INSTANCE_NAME?s:PRIMARY_INSTANCE_NAME+"."+s)+"._jsc"})),this._jsc=NOOP_FUNC,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!_.localStorage.is_supported(!0)||!USE_XHR)this._batch_requests=!1,console$1.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"),_.each(this.get_batcher_configs(),function(u){console$1.log("Clearing batch queue "+u.queue_key),_.localStorage.remove(u.queue_key)});else if(this.init_batchers(),sendBeacon&&win.addEventListener){var o=_.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);win.addEventListener("pagehide",function(u){u.persisted&&o()}),win.addEventListener("visibilitychange",function(){document$1.visibilityState==="hidden"&&o()})}}this.persistence=this.cookie=new MixpanelPersistence(this.config),this.unpersisted_superprops={},this._gdpr_init();var l=_.UUID();this.get_distinct_id()||this.register_once({distinct_id:DEVICE_ID_PREFIX+l,$device_id:l},""),this.flags=new FeatureFlagManager({getFullApiRoute:_.bind(function(){return this.get_api_host("flags")+"/"+this.get_config("api_routes").flags},this),getConfigFunc:_.bind(this.get_config,this),setConfigFunc:_.bind(this.set_config,this),getPropertyFunc:_.bind(this.get_property,this),trackingFunc:_.bind(this.track,this)}),this.flags.init(),this.flags=this.flags,this.autocapture=new Autocapture(this),this.autocapture.init(),this._init_tab_id();var c=this.get_config("remote_settings_mode");c===SETTING_STRICT||c===SETTING_FALLBACK?this._fetch_remote_settings(c).then(_.bind(function(){this._check_and_start_session_recording()},this)):this._check_and_start_session_recording()};MixpanelLib.prototype._init_tab_id=function(){if(this.get_config("disable_persistence"))console$1.log("Tab ID initialization skipped due to disable_persistence config");else if(_.sessionStorage.is_supported())try{var t=this.get_config("name")+"_"+this.get_config("token"),e="mp_tab_id_"+t,s="mp_gen_new_tab_id_"+t;(_.sessionStorage.get(s)||!_.sessionStorage.get(e))&&_.sessionStorage.set(e,"$tab-"+_.UUID()),_.sessionStorage.set(s,"1"),this.tab_id=_.sessionStorage.get(e),win.addEventListener("beforeunload",function(){_.sessionStorage.remove(s)})}catch(r){this.report_error("Error initializing tab id",r)}else this.report_error("Session storage is not supported, cannot keep track of unique tab ID.")};MixpanelLib.prototype.get_tab_id=function(){return this.tab_id||null};MixpanelLib.prototype._should_load_recorder=function(){if(this.get_config("disable_persistence"))return console$1.log("Load recorder check skipped due to disable_persistence config"),Promise.resolve(!1);var t=new IDBStorageWrapper(RECORDING_REGISTRY_STORE_NAME),e=this.get_tab_id();return t.init().then(function(){return t.getAll()}).then(function(s){for(var r=0;r<s.length;r++)if(isRecordingExpired(s[r])||s[r].tabId===e)return!0;return!1}).catch(_.bind(function(s){this.report_error("Error checking recording registry",s)},this))};MixpanelLib.prototype._check_and_start_session_recording=addOptOutCheckMixpanelLib(function(t){if(!win.MutationObserver){console$1.critical("Browser does not support MutationObserver; skipping session recording");return}var e=_.bind(function(r){var a=_.bind(function(){this._recorder=this._recorder||new win.__mp_recorder(this),this._recorder.resumeRecording(r)},this);_.isUndefined(win.__mp_recorder)?load_extra_bundle(this.get_config("recorder_src"),a):a()},this),s=this.get_config("record_sessions_percent")>0&&Math.random()*100<=this.get_config("record_sessions_percent");t||s?e(!0):this._should_load_recorder().then(function(r){r&&e(!1)})});MixpanelLib.prototype.start_session_recording=function(){this._check_and_start_session_recording(!0)};MixpanelLib.prototype.stop_session_recording=function(){return this._recorder?this._recorder.stopRecording():Promise.resolve()};MixpanelLib.prototype.pause_session_recording=function(){return this._recorder?this._recorder.pauseRecording():Promise.resolve()};MixpanelLib.prototype.resume_session_recording=function(){return this._recorder?this._recorder.resumeRecording():Promise.resolve()};MixpanelLib.prototype.is_recording_heatmap_data=function(){return this._get_session_replay_id()&&this.get_config("record_heatmap_data")};MixpanelLib.prototype.get_session_recording_properties=function(){var t={},e=this._get_session_replay_id();return e&&(t.$mp_replay_id=e),t};MixpanelLib.prototype.get_session_replay_url=function(){var t=null,e=this._get_session_replay_id();if(e){var s=_.HTTPBuildQuery({replay_id:e,distinct_id:this.get_distinct_id(),token:this.get_config("token")});t="https://mixpanel.com/projects/replay-redirect?"+s}return t};MixpanelLib.prototype._get_session_replay_id=function(){var t=null;return this._recorder&&(t=this._recorder.replayId),t||null};MixpanelLib.prototype.__get_recorder=function(){return this._recorder};MixpanelLib.prototype._loaded=function(){if(this.get_config("loaded")(this),this._set_default_superprops(),this.people.set_once(this.persistence.get_referrer_info()),this.get_config("store_google")&&this.get_config("stop_utm_persistence")){var t=_.info.campaignParams(null);_.each(t,(function(e,s){this.unregister(s)}).bind(this))}};MixpanelLib.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(document$1.referrer),this.get_config("store_google")&&!this.get_config("stop_utm_persistence")&&this.register(_.info.campaignParams()),this.get_config("save_referrer")&&this.persistence.update_referrer_info(document$1.referrer)};MixpanelLib.prototype._dom_loaded=function(){_.each(this.__dom_loaded_queue,function(t){this._track_dom.apply(this,t)},this),this.has_opted_out_tracking()||_.each(this.__request_queue,function(t){this._send_request.apply(this,t)},this),delete this.__dom_loaded_queue,delete this.__request_queue};MixpanelLib.prototype._track_dom=function(t,e){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!DOM_LOADED)return this.__dom_loaded_queue.push([t,e]),!1;var s=new t().init(this);return s.track.apply(s,e)};MixpanelLib.prototype._prepare_callback=function(t,e){if(_.isUndefined(t))return null;if(USE_XHR){var s=function(l){t(l,e)};return s}else{var r=this._jsc,a=""+Math.floor(Math.random()*1e8),o=this.get_config("callback_fn")+"["+a+"]";return r[a]=function(l){delete r[a],t(l,e)},o}};MixpanelLib.prototype._send_request=function(t,e,s,r){var a=!0;if(ENQUEUE_REQUESTS)return this.__request_queue.push(arguments),a;var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},l=null;!r&&(_.isFunction(s)||typeof s=="string")&&(r=s,s=null),s=_.extend(o,s||{}),USE_XHR||(s.method="GET");var c=s.method==="POST",u=sendBeacon&&c&&s.transport.toLowerCase()==="sendbeacon",f=s.verbose;e.verbose&&(f=!0),this.get_config("test")&&(e.test=1),f&&(e.verbose=1),this.get_config("img")&&(e.img=1),USE_XHR||(r?e.callback=r:(f||this.get_config("test"))&&(e.callback="(function(){})")),e.ip=this.get_config("ip")?1:0,e._=new Date().getTime().toString(),c&&(l="data="+encodeURIComponent(e.data),delete e.data),_.extend(e,this.get_config("api_extra_query_params")),t+="?"+_.HTTPBuildQuery(e);var d=this;if("img"in e){var p=document$1.createElement("img");p.src=t,document$1.body.appendChild(p)}else if(u){try{a=sendBeacon(t,l)}catch(j){d.report_error(j),a=!1}try{r&&r(a?1:0)}catch(j){d.report_error(j)}}else if(USE_XHR)try{var m=new XMLHttpRequest;m.open(s.method,t,!0);var y=this.get_config("xhr_headers");if(c&&(y["Content-Type"]="application/x-www-form-urlencoded"),_.each(y,function(j,B){m.setRequestHeader(B,j)}),s.timeout_ms&&typeof m.timeout<"u"){m.timeout=s.timeout_ms;var b=new Date().getTime()}m.withCredentials=!0,m.onreadystatechange=function(){if(m.readyState===4)if(m.status===200){if(r)if(f){var j;try{j=_.JSONDecode(m.responseText)}catch(F){if(d.report_error(F),s.ignore_json_errors)j=m.responseText;else return}r(j)}else r(Number(m.responseText))}else{var B;if(m.timeout&&!m.status&&new Date().getTime()-b>=m.timeout?B="timeout":B="Bad HTTP status: "+m.status+" "+m.statusText,d.report_error(B),r)if(f){var D=m.responseHeaders||{};r({status:0,httpStatusCode:m.status,error:B,retryAfter:D["Retry-After"]})}else r(0)}},m.send(l)}catch(j){d.report_error(j),a=!1}else{var E=document$1.createElement("script");E.type="text/javascript",E.async=!0,E.defer=!0,E.src=t;var C=document$1.getElementsByTagName("script")[0];C.parentNode.insertBefore(E,C)}return a};MixpanelLib.prototype._fetch_remote_settings=function(t){var e=function(){t==="strict"&&l.set_config({record_sessions_percent:0})};if(!win.AbortController)return console$1.critical("Remote settings unavailable: missing minimum required APIs"),e(),Promise.resolve();var s=this.get_api_host("settings")+"/"+this.get_config("api_routes").settings,r={$lib_version:Config.LIB_VERSION,mp_lib:"web",sdk_config:"1"},a=_.HTTPBuildQuery(r),o=s+"?"+a,l=this,c=new AbortController,u=setTimeout(function(){c.abort()},500),f={method:"GET",headers:{Authorization:"Basic "+btoa(l.get_config("token")+":")},signal:c.signal};return win.fetch(o,f).then(function(d){if(clearTimeout(u),!d.ok){console$1.critical("Network response was not ok"),e();return}return d.json()}).then(function(d){if(d&&d.sdk_config&&d.sdk_config.config){var p=d.sdk_config.config,m={};_.each(p,function(y,b){DEFAULT_CONFIG.hasOwnProperty(b)&&(m[b]=y)}),_.isEmptyObject(m)?(console$1.critical("No valid config keys found in remote settings."),e()):l.set_config(m)}else e()}).catch(function(d){clearTimeout(u),console$1.critical("Failed to fetch remote settings",d),e()})};MixpanelLib.prototype._execute_array=function(t){var e,s=[],r=[],a=[];_.each(t,function(l){l&&(e=l[0],_.isArray(e)?a.push(l):typeof l=="function"?l.call(this):_.isArray(l)&&e==="alias"?s.push(l):_.isArray(l)&&e.indexOf("track")!==-1&&typeof this[e]=="function"?a.push(l):r.push(l))},this);var o=function(l,c){_.each(l,function(u){if(_.isArray(u[0])){var f=c;_.each(u,function(d){f=f[d[0]].apply(f,d.slice(1))})}else this[u[0]].apply(this,u.slice(1))},c)};o(s,this),o(r,this),o(a,this)};MixpanelLib.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events};MixpanelLib.prototype.get_batcher_configs=function(){var t="__mpq_"+this.get_config("token");return this._batcher_configs=this._batcher_configs||{events:{type:"events",api_name:"track",queue_key:t+"_ev"},people:{type:"people",api_name:"engage",queue_key:t+"_pp"},groups:{type:"groups",api_name:"groups",queue_key:t+"_gr"}},this._batcher_configs};MixpanelLib.prototype.init_batchers=function(){if(!this.are_batchers_initialized()){var t=_.bind(function(s){return new RequestBatcher(s.queue_key,{libConfig:this.config,errorReporter:this.get_config("error_reporter"),sendRequestFunc:_.bind(function(r,a,o){var l=this.get_config("api_routes");this._send_request(this.get_api_host(s.api_name)+"/"+l[s.api_name],this._encode_data_for_request(r),a,this._prepare_callback(o,r))},this),beforeSendHook:_.bind(function(r){var a=this._run_hook("before_send_"+s.type,r);return a?a[0]:null},this),stopAllBatchingFunc:_.bind(this.stop_batch_senders,this),usePersistence:!0})},this),e=this.get_batcher_configs();this.request_batchers={events:t(e.events),people:t(e.people),groups:t(e.groups)}}this.get_config("batch_autostart")&&this.start_batch_senders()};MixpanelLib.prototype.start_batch_senders=function(){this._batchers_were_started=!0,this.are_batchers_initialized()&&(this._batch_requests=!0,_.each(this.request_batchers,function(t){t.start()}))};MixpanelLib.prototype.stop_batch_senders=function(){this._batch_requests=!1,_.each(this.request_batchers,function(t){t.stop(),t.clear()})};MixpanelLib.prototype.push=function(t){this._execute_array([t])};MixpanelLib.prototype.disable=function(t){typeof t>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(t)};MixpanelLib.prototype._encode_data_for_request=function(t){var e=JSONStringify(t);return this.get_config("api_payload_format")===PAYLOAD_TYPE_BASE64&&(e=_.base64Encode(e)),{data:e}};MixpanelLib.prototype._track_or_batch=function(t,e){var s=_.truncate(t.data,255),r=t.endpoint,a=t.batcher,o=t.should_send_immediately,l=t.send_request_options||{};e=e||NOOP_FUNC;var c=!0,u=_.bind(function(){return l.skip_hooks||(s=this._run_hook("before_send_"+t.type,s),s&&(s=s[0])),s?(console$1.log("MIXPANEL REQUEST:"),console$1.log(s),this._send_request(r,this._encode_data_for_request(s),l,this._prepare_callback(e,s))):null},this);return this._batch_requests&&!o?a.enqueue(s).then(function(f){f?e(1,s):u()}):c=u(),c&&s};MixpanelLib.prototype.track=addOptOutCheckMixpanelLib(function(t,e,s,r){var a;if(!(s&&s.skip_hooks)){if(a=this._run_hook("before_track",t,e),a===null)return;t=a[0],e=a[1]}!r&&typeof s=="function"&&(r=s,s=null),s=s||{};var o=s.transport;o&&(s.transport=o);var l=s.send_immediately;if(typeof r!="function"&&(r=NOOP_FUNC),_.isUndefined(t)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(t)){r(0);return}e=_.extend({},e),e.token=this.get_config("token");var c=this.persistence.remove_event_timer(t);if(!_.isUndefined(c)){var u=new Date().getTime()-c;e.$duration=parseFloat((u/1e3).toFixed(3))}this._set_default_superprops();var f=this.get_config("track_marketing")?_.info.marketingParams():{};e=_.extend({},_.info.properties({mp_loader:this.get_config("mp_loader")}),f,this.persistence.properties(),this.unpersisted_superprops,this.get_session_recording_properties(),e);var d=this.get_config("property_blacklist");_.isArray(d)?_.each(d,function(m){delete e[m]}):this.report_error("Invalid value for property_blacklist config: "+d);var p={event:t,properties:e};return a=this._track_or_batch({type:"events",data:p,endpoint:this.get_api_host("events")+"/"+this.get_config("api_routes").track,batcher:this.request_batchers.events,should_send_immediately:l,send_request_options:s},r),a});MixpanelLib.prototype.set_group=addOptOutCheckMixpanelLib(function(t,e,s){_.isArray(e)||(e=[e]);var r={};return r[t]=e,this.register(r),this.people.set(t,e,s)});MixpanelLib.prototype.add_group=addOptOutCheckMixpanelLib(function(t,e,s){var r=this.get_property(t),a={};return r===void 0?(a[t]=[e],this.register(a)):r.indexOf(e)===-1&&(r.push(e),a[t]=r,this.register(a)),this.people.union(t,e,s)});MixpanelLib.prototype.remove_group=addOptOutCheckMixpanelLib(function(t,e,s){var r=this.get_property(t);if(r!==void 0){var a=r.indexOf(e);a>-1&&(r.splice(a,1),this.register({group_key:r})),r.length===0&&this.unregister(t)}return this.people.remove(t,e,s)});MixpanelLib.prototype.track_with_groups=addOptOutCheckMixpanelLib(function(t,e,s,r){var a=_.extend({},e||{});return _.each(s,function(o,l){o!=null&&(a[l]=o)}),this.track(t,a,r)});MixpanelLib.prototype._create_map_key=function(t,e){return t+"_"+JSON.stringify(e)};MixpanelLib.prototype._remove_group_from_cache=function(t,e){delete this._cached_groups[this._create_map_key(t,e)]};MixpanelLib.prototype.get_group=function(t,e){var s=this._create_map_key(t,e),r=this._cached_groups[s];return(r===void 0||r._group_key!==t||r._group_id!==e)&&(r=new MixpanelGroup,r._init(this,t,e),this._cached_groups[s]=r),r};MixpanelLib.prototype.track_pageview=addOptOutCheckMixpanelLib(function(t,e){typeof t!="object"&&(t={}),e=e||{};var s=e.event_name||"$mp_web_page_view",r=_.extend(_.info.mpPageViewProperties(),_.info.campaignParams(),_.info.clickParams()),a=_.extend({},r,t);return this.track(s,a)});MixpanelLib.prototype.track_links=function(){return this._track_dom.call(this,LinkTracker,arguments)};MixpanelLib.prototype.track_forms=function(){return this._track_dom.call(this,FormTracker,arguments)};MixpanelLib.prototype.time_event=function(t){if(_.isUndefined(t)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(t)||this.persistence.set_event_timer(t,new Date().getTime())};var REGISTER_DEFAULTS={persistent:!0},options_for_register=function(t){var e;return _.isObject(t)?e=t:_.isUndefined(t)?e={}:e={days:t},_.extend({},REGISTER_DEFAULTS,e)};MixpanelLib.prototype.register=function(t,e){var s=this._run_hook("before_register",t,e);if(s!==null){t=s[0],e=s[1];var r=options_for_register(e);r.persistent?this.persistence.register(t,r.days):_.extend(this.unpersisted_superprops,t)}};MixpanelLib.prototype.register_once=function(t,e,s){var r=this._run_hook("before_register_once",t,e,s);if(r!==null){t=r[0],e=r[1],s=r[2];var a=options_for_register(s);a.persistent?this.persistence.register_once(t,e,a.days):(typeof e>"u"&&(e="None"),_.each(t,function(o,l){(!this.unpersisted_superprops.hasOwnProperty(l)||this.unpersisted_superprops[l]===e)&&(this.unpersisted_superprops[l]=o)},this))}};MixpanelLib.prototype.unregister=function(t,e){var s=this._run_hook("before_unregister",t,e);s!==null&&(t=s[0],e=s[1],e=options_for_register(e),e.persistent?this.persistence.unregister(t):delete this.unpersisted_superprops[t])};MixpanelLib.prototype._register_single=function(t,e){var s={};s[t]=e,this.register(s)};MixpanelLib.prototype.identify=function(t,e,s,r,a,o,l,c){var u=this._run_hook("before_identify",t);if(u===null)return-1;t=u[0];var f=this.get_distinct_id();if(t&&f!==t){if(typeof t=="string"&&t.indexOf(DEVICE_ID_PREFIX)===0)return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:t})}if(!this.get_property("$device_id")){var d=f;this.register_once({$had_persisted_distinct_id:!0,$device_id:d},"")}t!==f&&t!==this.get_property(ALIAS_ID_KEY)&&(this.unregister(ALIAS_ID_KEY),this.register({distinct_id:t})),this._flags.identify_called=!0,this.people._flush(e,s,r,a,o,l,c),t!==f&&this.track("$identify",{distinct_id:t,$anon_distinct_id:f},{skip_hooks:!0}),t!==f&&this.flags.fetchFlags()};MixpanelLib.prototype.reset=function(){this.stop_session_recording(),this.persistence.clear(),this._flags.identify_called=!1;var t=_.UUID();this.register_once({distinct_id:DEVICE_ID_PREFIX+t,$device_id:t},""),this._check_and_start_session_recording()};MixpanelLib.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};MixpanelLib.prototype.alias=function(t,e){if(t===this.get_property(PEOPLE_DISTINCT_ID_KEY))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var s=this;return _.isUndefined(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single(ALIAS_ID_KEY,t),this.track("$create_alias",{alias:t,distinct_id:e},{skip_hooks:!0},function(){s.identify(t)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(t),-1)};MixpanelLib.prototype.name_tag=function(t){this._register_single("mp_name_tag",t)};MixpanelLib.prototype.set_config=function(t){if(_.isObject(t)){_.extend(this.config,t);var e=t.batch_size;e&&_.each(this.request_batchers,function(s){s.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),Config.DEBUG=Config.DEBUG||this.get_config("debug"),("autocapture"in t||"record_heatmap_data"in t)&&this.autocapture&&this.autocapture.init(),_.isObject(t.hooks)&&(this.hooks={},_.each(t.hooks,function(s,r){if(_.isFunction(s))this.hooks[r]=[s];else if(_.isArray(s)){this.hooks[r]=[];for(var a=0;a<s.length;a++)_.isFunction(s[a])||console$1.critical("Invalid hook added. Hook is not a function"),this.hooks[r].push(s[a])}else console$1.critical("Invalid hooks added. Ensure that the hook values passed into config.hooks are functions or arrays of functions.")},this))}};MixpanelLib.prototype.get_config=function(t){return this.config[t]};MixpanelLib.prototype._run_hook=function(t){var e=slice.call(arguments,1);return _.each(this.hooks[t],function(s){if(e===null)return null;var r=s.apply(this,e);typeof r>"u"?(this.report_error(t+" hook did not return a valid value"),e=null):(_.isArray(r)||(r=[r]),e.splice.apply(e,[0,r.length].concat(r)))},this),e};MixpanelLib.prototype.get_property=function(t){return this.persistence.load_prop([t])};MixpanelLib.prototype.get_api_host=function(t){return this.get_config("api_hosts")[t]||this.get_config("api_host")};MixpanelLib.prototype.toString=function(){var t=this.get_config("name");return t!==PRIMARY_INSTANCE_NAME&&(t=PRIMARY_INSTANCE_NAME+"."+t),t};MixpanelLib.prototype._event_is_disabled=function(t){return _.isBlockedUA(userAgent)||this._flags.disable_all_events||_.include(this.__disabled_events,t)};MixpanelLib.prototype._gdpr_init=function(){var t=this.get_config("opt_out_tracking_persistence_type")==="localStorage";t&&_.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||_.cookie.get("mp_optout"))&&(_.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};MixpanelLib.prototype._gdpr_update_persistence=function(t){var e;if(t&&t.clear_persistence)e=!0;else if(t&&t.enable_persistence)e=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==e&&this.persistence.set_disabled(e),e?(this.stop_batch_senders(),this.stop_session_recording()):this._batchers_were_started&&this.start_batch_senders()};MixpanelLib.prototype._gdpr_call_func=function(t,e){return e=_.extend({track:_.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},e),_.localStorage.is_supported()||(e.persistence_type="cookie"),t(this.get_config("token"),{track:e.track,trackEventName:e.track_event_name,trackProperties:e.track_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieDomain:e.cookie_domain,cookieExpiration:e.cookie_expiration,crossSiteCookie:e.cross_site_cookie,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie,ignoreDnt:e.ignore_dnt})};MixpanelLib.prototype.opt_in_tracking=function(t){t=_.extend({enable_persistence:!0},t),this._gdpr_call_func(optIn,t),this._gdpr_update_persistence(t)};MixpanelLib.prototype.opt_out_tracking=function(t){t=_.extend({clear_persistence:!0,delete_user:!0},t),t.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(optOut,t),this._gdpr_update_persistence(t)};MixpanelLib.prototype.has_opted_in_tracking=function(t){return this._gdpr_call_func(hasOptedIn,t)};MixpanelLib.prototype.has_opted_out_tracking=function(t){return this._gdpr_call_func(hasOptedOut,t)};MixpanelLib.prototype.clear_opt_in_out_tracking=function(t){t=_.extend({enable_persistence:!0},t),this._gdpr_call_func(clearOptInOut,t),this._gdpr_update_persistence(t)};MixpanelLib.prototype.report_error=function(t,e){console$1.error.apply(console$1.error,arguments);try{!e&&!(t instanceof Error)&&(t=new Error(t)),this.get_config("error_reporter")(t,e)}catch(s){console$1.error(s)}};MixpanelLib.prototype.add_hook=function(t,e){this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push(e)};MixpanelLib.prototype.remove_hook=function(t,e){var s;this.hooks[t]&&(s=this.hooks[t].indexOf(e),s!==-1?this.hooks[t].splice(s,1):console$1.log("remove_hook failed. Matching hook was not found"))};MixpanelLib.prototype.init=MixpanelLib.prototype.init;MixpanelLib.prototype.reset=MixpanelLib.prototype.reset;MixpanelLib.prototype.disable=MixpanelLib.prototype.disable;MixpanelLib.prototype.time_event=MixpanelLib.prototype.time_event;MixpanelLib.prototype.track=MixpanelLib.prototype.track;MixpanelLib.prototype.track_links=MixpanelLib.prototype.track_links;MixpanelLib.prototype.track_forms=MixpanelLib.prototype.track_forms;MixpanelLib.prototype.track_pageview=MixpanelLib.prototype.track_pageview;MixpanelLib.prototype.register=MixpanelLib.prototype.register;MixpanelLib.prototype.register_once=MixpanelLib.prototype.register_once;MixpanelLib.prototype.unregister=MixpanelLib.prototype.unregister;MixpanelLib.prototype.identify=MixpanelLib.prototype.identify;MixpanelLib.prototype.alias=MixpanelLib.prototype.alias;MixpanelLib.prototype.name_tag=MixpanelLib.prototype.name_tag;MixpanelLib.prototype.set_config=MixpanelLib.prototype.set_config;MixpanelLib.prototype.get_config=MixpanelLib.prototype.get_config;MixpanelLib.prototype.get_api_host=MixpanelLib.prototype.get_api_host;MixpanelLib.prototype.get_property=MixpanelLib.prototype.get_property;MixpanelLib.prototype.get_distinct_id=MixpanelLib.prototype.get_distinct_id;MixpanelLib.prototype.toString=MixpanelLib.prototype.toString;MixpanelLib.prototype.opt_out_tracking=MixpanelLib.prototype.opt_out_tracking;MixpanelLib.prototype.opt_in_tracking=MixpanelLib.prototype.opt_in_tracking;MixpanelLib.prototype.has_opted_out_tracking=MixpanelLib.prototype.has_opted_out_tracking;MixpanelLib.prototype.has_opted_in_tracking=MixpanelLib.prototype.has_opted_in_tracking;MixpanelLib.prototype.clear_opt_in_out_tracking=MixpanelLib.prototype.clear_opt_in_out_tracking;MixpanelLib.prototype.get_group=MixpanelLib.prototype.get_group;MixpanelLib.prototype.set_group=MixpanelLib.prototype.set_group;MixpanelLib.prototype.add_group=MixpanelLib.prototype.add_group;MixpanelLib.prototype.remove_group=MixpanelLib.prototype.remove_group;MixpanelLib.prototype.add_hook=MixpanelLib.prototype.add_hook;MixpanelLib.prototype.remove_hook=MixpanelLib.prototype.remove_hook;MixpanelLib.prototype.track_with_groups=MixpanelLib.prototype.track_with_groups;MixpanelLib.prototype.start_batch_senders=MixpanelLib.prototype.start_batch_senders;MixpanelLib.prototype.stop_batch_senders=MixpanelLib.prototype.stop_batch_senders;MixpanelLib.prototype.start_session_recording=MixpanelLib.prototype.start_session_recording;MixpanelLib.prototype.stop_session_recording=MixpanelLib.prototype.stop_session_recording;MixpanelLib.prototype.pause_session_recording=MixpanelLib.prototype.pause_session_recording;MixpanelLib.prototype.resume_session_recording=MixpanelLib.prototype.resume_session_recording;MixpanelLib.prototype.get_session_recording_properties=MixpanelLib.prototype.get_session_recording_properties;MixpanelLib.prototype.get_session_replay_url=MixpanelLib.prototype.get_session_replay_url;MixpanelLib.prototype.get_tab_id=MixpanelLib.prototype.get_tab_id;MixpanelLib.prototype.DEFAULT_API_ROUTES=DEFAULT_API_ROUTES;MixpanelLib.prototype.__get_recorder=MixpanelLib.prototype.__get_recorder;MixpanelPersistence.prototype.properties=MixpanelPersistence.prototype.properties;MixpanelPersistence.prototype.update_search_keyword=MixpanelPersistence.prototype.update_search_keyword;MixpanelPersistence.prototype.update_referrer_info=MixpanelPersistence.prototype.update_referrer_info;MixpanelPersistence.prototype.get_cross_subdomain=MixpanelPersistence.prototype.get_cross_subdomain;MixpanelPersistence.prototype.clear=MixpanelPersistence.prototype.clear;var instances={},extend_mp=function(){_.each(instances,function(t,e){e!==PRIMARY_INSTANCE_NAME&&(mixpanel_master[e]=t)}),mixpanel_master._=_},override_mp_init_func=function(){mixpanel_master.init=function(t,e,s){if(s)return mixpanel_master[s]||(mixpanel_master[s]=instances[s]=create_mplib(t,e,s),mixpanel_master[s]._loaded()),mixpanel_master[s];var r=mixpanel_master;instances[PRIMARY_INSTANCE_NAME]?r=instances[PRIMARY_INSTANCE_NAME]:t&&(r=create_mplib(t,e,PRIMARY_INSTANCE_NAME),r._loaded(),instances[PRIMARY_INSTANCE_NAME]=r),mixpanel_master=r,init_type===INIT_SNIPPET&&(win[PRIMARY_INSTANCE_NAME]=mixpanel_master),extend_mp()}},add_dom_loaded_handler=function(){function t(){t.done||(t.done=!0,DOM_LOADED=!0,ENQUEUE_REQUESTS=!1,_.each(instances,function(r){r._dom_loaded()}))}function e(){try{document$1.documentElement.doScroll("left")}catch{setTimeout(e,1);return}t()}if(document$1.addEventListener)document$1.readyState==="complete"?t():document$1.addEventListener("DOMContentLoaded",t,!1);else if(document$1.attachEvent){document$1.attachEvent("onreadystatechange",t);var s=!1;try{s=win.frameElement===null}catch{}document$1.documentElement.doScroll&&s&&e()}_.register_event(win,"load",t,!0)};function init_as_module(t){return load_extra_bundle=t,init_type=INIT_MODULE,mixpanel_master=new MixpanelLib,override_mp_init_func(),mixpanel_master.init(),add_dom_loaded_handler(),mixpanel_master}function loadNoop(t,e){e()}var mixpanel=init_as_module(loadNoop);(function t(){console.log(" [STARTUP] main.tsx executing - checking localStorage BEFORE any imports...");try{const e=[];for(let s=0;s<localStorage.length;s++){const r=localStorage.key(s);r&&r.startsWith("sphere_wallet_DIRECT://")&&e.push(r)}if(e.length===0)console.log(" [STARTUP] No wallet data found in localStorage");else for(const s of e){const r=localStorage.getItem(s);if(r)try{const a=JSON.parse(r);console.log(` [STARTUP] Wallet: size=${r.length} bytes, id=${a.id?.slice(0,8)}..., tokens=${a.tokens?.length||0}`)}catch{console.log(` [STARTUP] Wallet: size=${r.length} bytes (JSON parse error)`)}}}catch(e){console.error(" [STARTUP] Error checking localStorage:",e)}})();mixpanel.init("19d06212425213a4eeb34337016d0186",{autocapture:!0,record_sessions_percent:100,api_host:"https://api-eu.mixpanel.com"});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(SphereProvider,{network:"testnet",children:jsxRuntimeExports.jsx(ServicesProvider,{children:jsxRuntimeExports.jsx(ConnectProvider,{children:jsxRuntimeExports.jsxs(ThemeInitializer,{children:[jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsx(App,{})}),jsxRuntimeExports.jsx(ToastContainer,{})]})})})})})}));export{requireShams$1 as A,requireCallBound as B,requireEsObjectAtoms as C,requireCallBind as D,requireGetIntrinsic as E,requireHasPropertyDescriptors as F,requireDefineDataProperty as G,Buffer as H,requireBuffer$1 as I,requireStreamBrowserify as J,abool$2 as a,abytes$3 as b,createKeygen$1 as c,bytesToNumberLE$2 as d,concatBytes$2 as e,createCurveFields$1 as f,getDefaultExportFromCjs$4 as g,copyBytes$2 as h,isBytes$3 as i,aInRange$2 as j,hexToBytes$2 as k,bytesToHex$3 as l,memoized$2 as m,normalizeZ$2 as n,mod$2 as o,pow2$2 as p,isNegativeLE as q,randomBytes$1 as r,sha512 as s,sha256$3 as t,secp256k1$2 as u,validateObject$1 as v,wNAF$2 as w,requireCryptoBrowserify as x,requireUtil$1 as y,process$1 as z};
